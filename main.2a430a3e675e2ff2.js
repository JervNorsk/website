"use strict";(self.webpackChunkjervnorsk_website_frontend=self.webpackChunkjervnorsk_website_frontend||[]).push([[179],{5361:(pn,Ze,te)=>{te.d(Ze,{v:()=>K});var a=te(1571);let K=(()=>{class ge{constructor(){this.title="< error />",this.subtitle=""}}return ge.\u0275fac=function(xe){return new(xe||ge)},ge.\u0275cmp=a.Xpm({type:ge,selectors:[["ng-component"]],decls:15,vars:4,consts:[[1,"error","d-flex","flex-column","justify-content-center"],[1,"stack","text-center",2,"--stacks","3"],[2,"--index","0"],[2,"--index","1"],[2,"--index","2"],[1,"stack","text-center",2,"--stacks","1"]],template:function(xe,Re){1&xe&&(a.TgZ(0,"div",0)(1,"div",1)(2,"span",2)(3,"h1"),a._uU(4),a.qZA()(),a.TgZ(5,"span",3)(6,"h1"),a._uU(7),a.qZA()(),a.TgZ(8,"span",4)(9,"h1"),a._uU(10),a.qZA()()(),a.TgZ(11,"div",5)(12,"span",2)(13,"h6"),a._uU(14),a.qZA()()()()),2&xe&&(a.xp6(4),a.Oqu(Re.title),a.xp6(3),a.Oqu(Re.title),a.xp6(3),a.Oqu(Re.title),a.xp6(4),a.Oqu(Re.subtitle))},styles:[".error[_ngcontent-%COMP%]{color:var(--color)}.error[_ngcontent-%COMP%]   .stack[_ngcontent-%COMP%]{display:grid}.error[_ngcontent-%COMP%]   .stack[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{grid-row-start:1;grid-column-start:1;--stack-height: calc(100% /var(--stacks) - 1px);--inverse-index: calc(calc(var(--stacks) - 1) - var(--index));--clip-top: calc(var(--stack-height) * var(--index));--clip-bottom: calc(var(--stack-height) * var(--inverse-index));clip-path:inset(var(--clip-top) 0 var(--clip-bottom) 0);animation-name:_ngcontent-%COMP%_stack,_ngcontent-%COMP%_glitch;animation-duration:.34s,2s;animation-timing-function:cubic-bezier(.46,.29,0,1.24),ease;animation-iteration-count:1,infinite;animation-delay:calc(var(--index) * .12s),2s;animation-fill-mode:backwards,none;animation-direction:normal,alternate-reverse}.error[_ngcontent-%COMP%]   .stack[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(odd){--glitch-translate: 8px}.error[_ngcontent-%COMP%]   .stack[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(even){--glitch-translate: -8px}@keyframes _ngcontent-%COMP%_stack{0%{opacity:0;transform:translate(-50%);text-shadow:-2px 3px 0 red,2px -3px 0 blue}60%{opacity:.5;transform:translate(50%)}80%{transform:none;opacity:1;text-shadow:2px -3px 0 red,-2px 3px 0 blue}to{text-shadow:none}}@keyframes _ngcontent-%COMP%_glitch{0%{text-shadow:-2px 3px 0 red,2px -3px 0 blue;transform:translate(var(--glitch-translate))}2%{text-shadow:2px -3px 0 red,-2px 3px 0 blue}4%,to{text-shadow:none;transform:none}}"]}),ge})()},5874:(pn,Ze,te)=>{te.d(Ze,{u:()=>ge});var a=te(5361),K=te(1571);let ge=(()=>{class Se extends a.v{constructor(){super(...arguments),this.title="< not found />",this.subtitle="Missing something?"}}return Se.\u0275fac=function(){let xe;return function(Oe){return(xe||(xe=K.n5z(Se)))(Oe||Se)}}(),Se.\u0275cmp=K.Xpm({type:Se,selectors:[["jn-not-found-error"]],features:[K.qOj],decls:15,vars:4,consts:[[1,"error","d-flex","flex-column","justify-content-center"],[1,"stack","text-center",2,"--stacks","3"],[2,"--index","0"],[2,"--index","1"],[2,"--index","2"],[1,"stack","text-center",2,"--stacks","1"]],template:function(Re,Oe){1&Re&&(K.TgZ(0,"div",0)(1,"div",1)(2,"span",2)(3,"h1"),K._uU(4),K.qZA()(),K.TgZ(5,"span",3)(6,"h1"),K._uU(7),K.qZA()(),K.TgZ(8,"span",4)(9,"h1"),K._uU(10),K.qZA()()(),K.TgZ(11,"div",5)(12,"span",2)(13,"h6"),K._uU(14),K.qZA()()()()),2&Re&&(K.xp6(4),K.Oqu(Oe.title),K.xp6(3),K.Oqu(Oe.title),K.xp6(3),K.Oqu(Oe.title),K.xp6(4),K.Oqu(Oe.subtitle))},styles:[".error[_ngcontent-%COMP%]{color:var(--color)}.error[_ngcontent-%COMP%]   .stack[_ngcontent-%COMP%]{display:grid}.error[_ngcontent-%COMP%]   .stack[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{grid-row-start:1;grid-column-start:1;--stack-height: calc(100% /var(--stacks) - 1px);--inverse-index: calc(calc(var(--stacks) - 1) - var(--index));--clip-top: calc(var(--stack-height) * var(--index));--clip-bottom: calc(var(--stack-height) * var(--inverse-index));clip-path:inset(var(--clip-top) 0 var(--clip-bottom) 0);animation-name:_ngcontent-%COMP%_stack,_ngcontent-%COMP%_glitch;animation-duration:.34s,2s;animation-timing-function:cubic-bezier(.46,.29,0,1.24),ease;animation-iteration-count:1,infinite;animation-delay:calc(var(--index) * .12s),2s;animation-fill-mode:backwards,none;animation-direction:normal,alternate-reverse}.error[_ngcontent-%COMP%]   .stack[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(odd){--glitch-translate: 8px}.error[_ngcontent-%COMP%]   .stack[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(even){--glitch-translate: -8px}@keyframes _ngcontent-%COMP%_stack{0%{opacity:0;transform:translate(-50%);text-shadow:-2px 3px 0 red,2px -3px 0 blue}60%{opacity:.5;transform:translate(50%)}80%{transform:none;opacity:1;text-shadow:2px -3px 0 red,-2px 3px 0 blue}to{text-shadow:none}}@keyframes _ngcontent-%COMP%_glitch{0%{text-shadow:-2px 3px 0 red,2px -3px 0 blue;transform:translate(var(--glitch-translate))}2%{text-shadow:2px -3px 0 red,-2px 3px 0 blue}4%,to{text-shadow:none;transform:none}}"]}),Se})()},7832:(pn,Ze,te)=>{te.d(Ze,{l:()=>F_});var a=te(1571),K=te(9751),ge=te(515),Se=te(9646),xe=te(7579),Re=te(8421),Oe=te(5577),_t=te(1144),Je=te(576),Fe=te(3268);const ke=["addListener","removeListener"],Ke=["addEventListener","removeEventListener"],Lt=["on","off"];function ze(c,f,r,p){if((0,Je.m)(r)&&(p=r,r=void 0),p)return ze(c,f,r).pipe((0,Fe.Z)(p));const[M,N]=function _n(c){return(0,Je.m)(c.addEventListener)&&(0,Je.m)(c.removeEventListener)}(c)?Ke.map(ie=>he=>c[ie](f,he,r)):function dt(c){return(0,Je.m)(c.addListener)&&(0,Je.m)(c.removeListener)}(c)?ke.map(Mt(c,f)):function jt(c){return(0,Je.m)(c.on)&&(0,Je.m)(c.off)}(c)?Lt.map(Mt(c,f)):[];if(!M&&(0,_t.z)(c))return(0,Oe.z)(ie=>ze(ie,f,r))((0,Re.Xf)(c));if(!M)throw new TypeError("Invalid event target");return new K.y(ie=>{const he=(...me)=>ie.next(1<me.length?me:me[0]);return M(he),()=>N(he)})}function Mt(c,f){return r=>p=>c[r](f,p)}var ui=te(727);class Ri extends ui.w0{constructor(f,r){super()}schedule(f,r=0){return this}}const Ie={setInterval(c,f,...r){const{delegate:p}=Ie;return p?.setInterval?p.setInterval(c,f,...r):setInterval(c,f,...r)},clearInterval(c){const{delegate:f}=Ie;return(f?.clearInterval||clearInterval)(c)},delegate:void 0};var We=te(8737),$e=te(6063);class mt{constructor(f,r=mt.now){this.schedulerActionCtor=f,this.now=r}schedule(f,r=0,p){return new this.schedulerActionCtor(this,f).schedule(p,r)}}mt.now=$e.l.now;const Zt=new class Et extends mt{constructor(f,r=mt.now){super(f,r),this.actions=[],this._active=!1}flush(f){const{actions:r}=this;if(this._active)return void r.push(f);let p;this._active=!0;do{if(p=f.execute(f.state,f.delay))break}while(f=r.shift());if(this._active=!1,p){for(;f=r.shift();)f.unsubscribe();throw p}}}(class Ne extends Ri{constructor(f,r){super(f,r),this.scheduler=f,this.work=r,this.pending=!1}schedule(f,r=0){var p;if(this.closed)return this;this.state=f;const M=this.id,N=this.scheduler;return null!=M&&(this.id=this.recycleAsyncId(N,M,r)),this.pending=!0,this.delay=r,this.id=null!==(p=this.id)&&void 0!==p?p:this.requestAsyncId(N,this.id,r),this}requestAsyncId(f,r,p=0){return Ie.setInterval(f.flush.bind(f,this),p)}recycleAsyncId(f,r,p=0){if(null!=p&&this.delay===p&&!1===this.pending)return r;null!=r&&Ie.clearInterval(r)}execute(f,r){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const p=this._execute(f,r);if(p)return p;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(f,r){let M,p=!1;try{this.work(f)}catch(N){p=!0,M=N||new Error("Scheduled action threw falsy error")}if(p)return this.unsubscribe(),M}unsubscribe(){if(!this.closed){const{id:f,scheduler:r}=this,{actions:p}=r;this.work=this.state=this.scheduler=null,this.pending=!1,(0,We.P)(p,this),null!=f&&(this.id=this.recycleAsyncId(r,f,null)),this.delay=null,super.unsubscribe()}}});var kt=te(3532);function on(c=0,f,r=Zt){let p=-1;return null!=f&&((0,kt.K)(f)?r=f:p=f),new K.y(M=>{let N=function cn(c){return c instanceof Date&&!isNaN(c)}(c)?+c-r.now():c;N<0&&(N=0);let ie=0;return r.schedule(function(){M.closed||(M.next(ie++),0<=p?this.schedule(void 0,p):M.complete())},N)})}const{isArray:Ge}=Array;function Me(c){return 1===c.length&&Ge(c[0])?c[0]:c}var qe=te(5403);var xt=te(1135),Rn=te(9841),pi=te(5032);const lr=new K.y(pi.Z);var jn=te(3269);function tn(...c){const f=(0,jn.jO)(c),r=Me(c);return r.length?new K.y(p=>{let M=r.map(()=>[]),N=r.map(()=>!1);p.add(()=>{M=N=null});for(let ie=0;!p.closed&&ie<r.length;ie++)(0,Re.Xf)(r[ie]).subscribe((0,qe.x)(p,he=>{if(M[ie].push(he),M.every(me=>me.length)){const me=M.map(De=>De.shift());p.next(f?f(...me):me),M.some((De,Le)=>!De.length&&N[Le])&&p.complete()}},()=>{N[ie]=!0,!M[ie].length&&p.complete()}));return()=>{M=N=null}}):ge.E}var Si=te(6451),Es=te(7272),Mn=te(2722),xr=te(9300),Ci=te(5698),Qi=te(4004),ha=te(8675),Qr=te(4671),Ea=te(4482);function Dr(c,f=Qr.y){return c=c??fo,(0,Ea.e)((r,p)=>{let M,N=!0;r.subscribe((0,qe.x)(p,ie=>{const he=f(ie);(N||!c(M,he))&&(N=!1,M=he,p.next(ie))}))})}function fo(c,f){return c===f}var po=te(3900),Li=te(8505);function wr(...c){const f=(0,jn.jO)(c);return(0,Ea.e)((r,p)=>{const M=c.length,N=new Array(M);let ie=c.map(()=>!1),he=!1;for(let me=0;me<M;me++)(0,Re.Xf)(c[me]).subscribe((0,qe.x)(p,De=>{N[me]=De,!he&&!ie[me]&&(ie[me]=!0,(he=ie.every(Qr.y))&&(ie=null))},pi.Z));r.subscribe((0,qe.x)(p,me=>{if(he){const De=[me,...N];p.next(f?f(...De):De)}}))})}te(9718);var lt=te(6895);te(2076),te(4742),te(1810);const Wn=new a.OlP("NgValueAccessor");function pg(c,f){}function mg(c,f){if(1&c&&(a.TgZ(0,"button",3),a._uU(1),a.YNc(2,pg,0,0,"ng-template",4),a.qZA()),2&c){const r=f.$implicit;a.Q6J("ngbPanelToggle",r),a.xp6(1),a.hij(" ",r.title," "),a.xp6(1),a.Q6J("ngTemplateOutlet",null==r.titleTpl?null:r.titleTpl.templateRef)}}function gg(c,f){}function Yd(c,f){}function Rp(c,f){if(1&c){const r=a.EpF();a.TgZ(0,"div",8),a.NdJ("ngbRef",function(M){a.CHM(r);const N=a.oxw().$implicit;return a.KtG(N.panelDiv=M)}),a.TgZ(1,"div",9),a.YNc(2,Yd,0,0,"ng-template",4),a.qZA()()}if(2&c){const r=a.oxw().$implicit;a.s9C("id",r.id),a.uIk("aria-labelledby",r.id+"-header"),a.xp6(2),a.Q6J("ngTemplateOutlet",(null==r.contentTpl?null:r.contentTpl.templateRef)||null)}}Math,Math,Math;const _g=function(c,f){return{$implicit:c,opened:f}};function Sp(c,f){if(1&c&&(a.TgZ(0,"div")(1,"div",5),a.YNc(2,gg,0,0,"ng-template",6),a.qZA(),a.YNc(3,Rp,3,3,"div",7),a.qZA()),2&c){const r=f.$implicit,p=a.oxw(),M=a.MAs(1);a.Tol("accordion-item "+(r.cardClass||"")),a.xp6(1),a.Tol("accordion-header "+(r.type?"bg-"+r.type:p.type?"bg-"+p.type:"")),a.MGl("id","",r.id,"-header"),a.xp6(1),a.Q6J("ngTemplateOutlet",(null==r.headerTpl?null:r.headerTpl.templateRef)||M)("ngTemplateOutletContext",a.WLB(8,_g,r,r.isOpen)),a.xp6(1),a.Q6J("ngIf",!p.destroyOnHide||r.isOpen||r.transitionRunning)}}const iv=["ngbAccordionBody",""];function Cp(c,f){}function rv(c,f){if(1&c){const r=a.EpF();a.TgZ(0,"button",1),a.NdJ("click",function(){a.CHM(r);const M=a.oxw();return a.KtG(M.close())}),a.qZA()}}const Jd=["*"];function vg(c,f){if(1&c){const r=a.EpF();a.TgZ(0,"button",6),a.NdJ("click",function(){const N=a.CHM(r).$implicit,ie=a.oxw();return ie.focus(),a.KtG(ie.select(N.id,ie.NgbSlideEventSource.INDICATOR))}),a.qZA()}if(2&c){const r=f.$implicit,p=a.oxw();a.ekj("active",r.id===p.activeId),a.uIk("aria-labelledby","slide-"+r.id)("aria-controls","slide-"+r.id)("aria-selected",r.id===p.activeId)}}function cf(c,f){}function sv(c,f){if(1&c&&(a.TgZ(0,"div",7)(1,"span",8),a.SDv(2,9),a.qZA(),a.YNc(3,cf,0,0,"ng-template",10),a.qZA()),2&c){const r=f.$implicit,p=f.index,M=f.count;a.Q6J("id","slide-"+r.id),a.xp6(2),a.pQV(p+1)(M),a.QtT(2),a.xp6(1),a.Q6J("ngTemplateOutlet",r.tplRef)}}function ov(c,f){if(1&c){const r=a.EpF();a.TgZ(0,"button",11),a.NdJ("click",function(){a.CHM(r);const M=a.oxw();return a.KtG(M.arrowLeft())}),a._UZ(1,"span",12),a.TgZ(2,"span",8),a.SDv(3,13),a.qZA()()}}function uf(c,f){if(1&c){const r=a.EpF();a.TgZ(0,"button",14),a.NdJ("click",function(){a.CHM(r);const M=a.oxw();return a.KtG(M.arrowRight())}),a._UZ(1,"span",15),a.TgZ(2,"span",8),a.SDv(3,16),a.qZA()()}}const av=["ngbDatepickerDayView",""],lv=["month"],cv=["year"];function uv(c,f){if(1&c&&(a.TgZ(0,"option",5),a._uU(1),a.qZA()),2&c){const r=f.$implicit,p=a.oxw();a.Q6J("value",r),a.uIk("aria-label",p.i18n.getMonthFullName(r,p.date.year)),a.xp6(1),a.Oqu(p.i18n.getMonthShortName(r,p.date.year))}}function dv(c,f){if(1&c&&(a.TgZ(0,"option",5),a._uU(1),a.qZA()),2&c){const r=f.$implicit,p=a.oxw();a.Q6J("value",r),a.xp6(1),a.Oqu(p.i18n.getYearNumerals(r))}}function yg(c,f){if(1&c){const r=a.EpF();a.TgZ(0,"ngb-datepicker-navigation-select",7),a.NdJ("select",function(M){a.CHM(r);const N=a.oxw();return a.KtG(N.select.emit(M))}),a.qZA()}if(2&c){const r=a.oxw();a.Q6J("date",r.date)("disabled",r.disabled)("months",r.selectBoxes.months)("years",r.selectBoxes.years)}}function Ep(c,f){1&c&&a._UZ(0,"div",0)}function df(c,f){1&c&&a._UZ(0,"div",0)}function Ap(c,f){if(1&c&&(a.YNc(0,Ep,1,0,"div",9),a.TgZ(1,"div",10),a._uU(2),a.qZA(),a.YNc(3,df,1,0,"div",9)),2&c){const r=f.$implicit,p=f.index,M=a.oxw(2);a.Q6J("ngIf",p>0),a.xp6(2),a.hij(" ",M.i18n.getMonthLabel(r.firstDate)," "),a.xp6(1),a.Q6J("ngIf",p!==M.months.length-1)}}function Ip(c,f){if(1&c&&a.YNc(0,Ap,4,3,"ng-template",8),2&c){const r=a.oxw();a.Q6J("ngForOf",r.months)}}function Pp(c,f){if(1&c&&(a.TgZ(0,"div",5),a._uU(1),a.qZA()),2&c){const r=a.oxw(2);a.xp6(1),a.Oqu(r.i18n.getWeekLabel())}}function $a(c,f){if(1&c&&(a.TgZ(0,"div",6),a._uU(1),a.qZA()),2&c){const r=f.$implicit;a.xp6(1),a.Oqu(r)}}function bg(c,f){if(1&c&&(a.TgZ(0,"div",2),a.YNc(1,Pp,2,1,"div",3),a.YNc(2,$a,2,1,"div",4),a.qZA()),2&c){const r=a.oxw();a.xp6(1),a.Q6J("ngIf",r.datepicker.showWeekNumbers),a.xp6(1),a.Q6J("ngForOf",r.viewModel.weekdays)}}function Tg(c,f){if(1&c&&(a.TgZ(0,"div",11),a._uU(1),a.qZA()),2&c){const r=a.oxw(2).$implicit,p=a.oxw();a.xp6(1),a.Oqu(p.i18n.getWeekNumerals(r.number))}}function Mg(c,f){}function Op(c,f){if(1&c&&a.YNc(0,Mg,0,0,"ng-template",14),2&c){const r=a.oxw().$implicit,p=a.oxw(3);a.Q6J("ngTemplateOutlet",p.datepicker.dayTemplate)("ngTemplateOutletContext",r.context)}}function hf(c,f){if(1&c){const r=a.EpF();a.TgZ(0,"div",12),a.NdJ("click",function(M){const ie=a.CHM(r).$implicit;return a.oxw(3).doSelect(ie),a.KtG(M.preventDefault())}),a.YNc(1,Op,1,2,"ng-template",13),a.qZA()}if(2&c){const r=f.$implicit;a.ekj("disabled",r.context.disabled)("hidden",r.hidden)("ngb-dp-today",r.context.today),a.Q6J("tabindex",r.tabindex),a.uIk("aria-label",r.ariaLabel),a.xp6(1),a.Q6J("ngIf",!r.hidden)}}function xg(c,f){if(1&c&&(a.TgZ(0,"div",8),a.YNc(1,Tg,2,1,"div",9),a.YNc(2,hf,2,9,"div",10),a.qZA()),2&c){const r=a.oxw().$implicit,p=a.oxw();a.xp6(1),a.Q6J("ngIf",p.datepicker.showWeekNumbers),a.xp6(1),a.Q6J("ngForOf",r.days)}}function Dg(c,f){1&c&&a.YNc(0,xg,3,2,"div",7),2&c&&a.Q6J("ngIf",!f.$implicit.collapsed)}const wg=["defaultDayTemplate"],Np=["content"];function Rg(c,f){if(1&c&&a._UZ(0,"div",7),2&c){const p=f.currentMonth,M=f.selected,N=f.disabled,ie=f.focused;a.Q6J("date",f.date)("currentMonth",p)("selected",M)("disabled",N)("focused",ie)}}function Sg(c,f){if(1&c&&(a.TgZ(0,"div",12),a._uU(1),a.qZA()),2&c){const r=a.oxw().$implicit,p=a.oxw(2);a.xp6(1),a.hij(" ",p.i18n.getMonthLabel(r.firstDate)," ")}}function wo(c,f){if(1&c&&(a.TgZ(0,"div",9),a.YNc(1,Sg,2,1,"div",10),a._UZ(2,"ngb-datepicker-month",11),a.qZA()),2&c){const r=f.$implicit,p=a.oxw(2);a.xp6(1),a.Q6J("ngIf","none"===p.navigation||p.displayMonths>1&&"select"===p.navigation),a.xp6(1),a.Q6J("month",r.firstDate)}}function ff(c,f){if(1&c&&a.YNc(0,wo,3,2,"div",8),2&c){const r=a.oxw();a.Q6J("ngForOf",r.model.months)}}function Fp(c,f){if(1&c){const r=a.EpF();a.TgZ(0,"ngb-datepicker-navigation",13),a.NdJ("navigate",function(M){a.CHM(r);const N=a.oxw();return a.KtG(N.onNavigateEvent(M))})("select",function(M){a.CHM(r);const N=a.oxw();return a.KtG(N.onNavigateDateSelect(M))}),a.qZA()}if(2&c){const r=a.oxw();a.Q6J("date",r.model.firstDate)("months",r.model.months)("disabled",r.model.disabled)("showSelect","select"===r.model.navigation)("prevDisabled",r.model.prevDisabled)("nextDisabled",r.model.nextDisabled)("selectBoxes",r.model.selectBoxes)}}function pf(c,f){}function Zs(c,f){}const Xu=["dialog"],Lp=["ngbNavOutlet",""];function Bp(c,f){}const Cg=function(c){return{$implicit:c}};function jp(c,f){if(1&c&&(a.TgZ(0,"div",2),a.YNc(1,Bp,0,0,"ng-template",3),a.qZA()),2&c){const r=a.oxw().$implicit,p=a.oxw();a.Q6J("item",r)("nav",p.nav)("role",p.paneRole),a.xp6(1),a.Q6J("ngTemplateOutlet",(null==r.contentTpl?null:r.contentTpl.templateRef)||null)("ngTemplateOutletContext",a.VKq(5,Cg,r.active||p.isPanelTransitioning(r)))}}function Eg(c,f){if(1&c&&a.YNc(0,jp,2,7,"div",1),2&c){const r=f.$implicit,p=a.oxw();a.Q6J("ngIf",r.isPanelInDom()||p.isPanelTransitioning(r))}}function kp(c,f){1&c&&(a.TgZ(0,"span",9),a.SDv(1,10),a.qZA())}function Ag(c,f){1&c&&(a.TgZ(0,"span",9),a.SDv(1,11),a.qZA())}function Gp(c,f){1&c&&(a.TgZ(0,"span",9),a.SDv(1,12),a.qZA())}function Ig(c,f){1&c&&(a.TgZ(0,"span",9),a.SDv(1,13),a.qZA())}function Pg(c,f){1&c&&a._uU(0,"...")}function mf(c,f){1&c&&(a.TgZ(0,"span",15),a._uU(1,"(current)"),a.qZA())}function gf(c,f){if(1&c&&(a._uU(0),a.YNc(1,mf,2,0,"span",14)),2&c){const r=f.$implicit,p=f.currentPage;a.hij(" ",r," "),a.xp6(1),a.Q6J("ngIf",r===p)}}function Og(c,f){}const Qu=function(c){return{disabled:!0,currentPage:c}};function Ng(c,f){if(1&c&&(a.TgZ(0,"a",20),a.YNc(1,Og,0,0,"ng-template",8),a.qZA()),2&c){const r=a.oxw(2).$implicit,p=a.oxw(),M=a.MAs(9);a.xp6(1),a.Q6J("ngTemplateOutlet",(null==p.tplEllipsis?null:p.tplEllipsis.templateRef)||M)("ngTemplateOutletContext",a.VKq(2,Qu,r))}}function Fg(c,f){}const _f=function(c,f,r){return{disabled:c,$implicit:f,currentPage:r}};function vf(c,f){if(1&c){const r=a.EpF();a.TgZ(0,"a",21),a.NdJ("click",function(M){a.CHM(r);const N=a.oxw().$implicit;return a.oxw(2).selectPage(N),a.KtG(M.preventDefault())}),a.YNc(1,Fg,0,0,"ng-template",8),a.qZA()}if(2&c){const r=a.oxw().$implicit,p=a.oxw(),M=p.disabled,N=p.$implicit,ie=a.oxw(),he=a.MAs(11);a.uIk("tabindex",M?"-1":null)("aria-disabled",M?"true":null),a.xp6(1),a.Q6J("ngTemplateOutlet",(null==ie.tplNumber?null:ie.tplNumber.templateRef)||he)("ngTemplateOutletContext",a.kEZ(4,_f,M,r,N))}}function Vp(c,f){if(1&c&&(a.TgZ(0,"li",17),a.YNc(1,Ng,2,4,"a",18),a.YNc(2,vf,2,8,"a",19),a.qZA()),2&c){const r=f.$implicit,p=a.oxw(),M=p.$implicit,N=p.disabled,ie=a.oxw();a.ekj("active",r===M)("disabled",ie.isEllipsis(r)||N),a.uIk("aria-current",r===M?"page":null),a.xp6(1),a.Q6J("ngIf",ie.isEllipsis(r)),a.xp6(1),a.Q6J("ngIf",!ie.isEllipsis(r))}}function lu(c,f){1&c&&a.YNc(0,Vp,3,7,"li",16),2&c&&a.Q6J("ngForOf",f.pages)}function yf(c,f){}const Zd=function(c,f){return{disabled:c,currentPage:f}};function Lg(c,f){if(1&c){const r=a.EpF();a.TgZ(0,"li",17)(1,"a",22),a.NdJ("click",function(M){return a.CHM(r),a.oxw().selectPage(1),a.KtG(M.preventDefault())}),a.YNc(2,yf,0,0,"ng-template",8),a.qZA()()}if(2&c){const r=a.oxw(),p=a.MAs(1);a.ekj("disabled",r.previousDisabled()),a.xp6(1),a.uIk("tabindex",r.previousDisabled()?"-1":null)("aria-disabled",r.previousDisabled()?"true":null),a.xp6(1),a.Q6J("ngTemplateOutlet",(null==r.tplFirst?null:r.tplFirst.templateRef)||p)("ngTemplateOutletContext",a.WLB(6,Zd,r.previousDisabled(),r.page))}}function bf(c,f){}const Bg=function(c){return{disabled:c}};function jg(c,f){if(1&c){const r=a.EpF();a.TgZ(0,"li",17)(1,"a",23),a.NdJ("click",function(M){a.CHM(r);const N=a.oxw();return N.selectPage(N.page-1),a.KtG(M.preventDefault())}),a.YNc(2,bf,0,0,"ng-template",8),a.qZA()()}if(2&c){const r=a.oxw(),p=a.MAs(3);a.ekj("disabled",r.previousDisabled()),a.xp6(1),a.uIk("tabindex",r.previousDisabled()?"-1":null)("aria-disabled",r.previousDisabled()?"true":null),a.xp6(1),a.Q6J("ngTemplateOutlet",(null==r.tplPrevious?null:r.tplPrevious.templateRef)||p)("ngTemplateOutletContext",a.VKq(6,Bg,r.previousDisabled()))}}function kg(c,f){}function Gg(c,f){}function Vg(c,f){if(1&c){const r=a.EpF();a.TgZ(0,"li",17)(1,"a",24),a.NdJ("click",function(M){a.CHM(r);const N=a.oxw();return N.selectPage(N.page+1),a.KtG(M.preventDefault())}),a.YNc(2,Gg,0,0,"ng-template",8),a.qZA()()}if(2&c){const r=a.oxw(),p=a.MAs(5);a.ekj("disabled",r.nextDisabled()),a.xp6(1),a.uIk("tabindex",r.nextDisabled()?"-1":null)("aria-disabled",r.nextDisabled()?"true":null),a.xp6(1),a.Q6J("ngTemplateOutlet",(null==r.tplNext?null:r.tplNext.templateRef)||p)("ngTemplateOutletContext",a.WLB(6,Zd,r.nextDisabled(),r.page))}}function Ug(c,f){}function Up(c,f){if(1&c){const r=a.EpF();a.TgZ(0,"li",17)(1,"a",25),a.NdJ("click",function(M){a.CHM(r);const N=a.oxw();return N.selectPage(N.pageCount),a.KtG(M.preventDefault())}),a.YNc(2,Ug,0,0,"ng-template",8),a.qZA()()}if(2&c){const r=a.oxw(),p=a.MAs(7);a.ekj("disabled",r.nextDisabled()),a.xp6(1),a.uIk("tabindex",r.nextDisabled()?"-1":null)("aria-disabled",r.nextDisabled()?"true":null),a.xp6(1),a.Q6J("ngTemplateOutlet",(null==r.tplLast?null:r.tplLast.templateRef)||p)("ngTemplateOutletContext",a.WLB(6,Zd,r.nextDisabled(),r.page))}}const Tf=function(c,f,r){return{$implicit:c,pages:f,disabled:r}};function Hg(c,f){if(1&c&&(a.TgZ(0,"span"),a.SDv(1,1),a.ALo(2,"percent"),a.qZA()),2&c){const r=a.oxw();a.xp6(2),a.pQV(a.lcZ(2,1,r.getValue()/r.max)),a.QtT(1)}}function zp(c,f){1&c&&a._uU(0),2&c&&a.Oqu(100===f.fill?"\u2605":"\u2606")}function Wp(c,f){}function bc(c,f){if(1&c){const r=a.EpF();a.TgZ(0,"span",2),a._uU(1),a.qZA(),a.TgZ(2,"span",3),a.NdJ("mouseenter",function(){const N=a.CHM(r).index,ie=a.oxw();return a.KtG(ie.enter(N+1))})("click",function(){const N=a.CHM(r).index,ie=a.oxw();return a.KtG(ie.handleClick(N+1))}),a.YNc(3,Wp,0,0,"ng-template",4),a.qZA()}if(2&c){const r=f.index,p=a.oxw(),M=a.MAs(1);a.xp6(1),a.hij("(",r<p.nextRate?"*":" ",")"),a.xp6(1),a.Udp("cursor",p.isInteractive()?"pointer":"default"),a.xp6(1),a.Q6J("ngTemplateOutlet",p.starTemplate||p.starTemplateFromContent||M)("ngTemplateOutletContext",p.contexts[r])}}function $p(c,f){if(1&c){const r=a.EpF();a.TgZ(0,"button",11),a.NdJ("click",function(){a.CHM(r);const M=a.oxw();return a.KtG(M.changeHour(M.hourStep))}),a._UZ(1,"span",12),a.TgZ(2,"span",13),a.SDv(3,14),a.qZA()()}if(2&c){const r=a.oxw();a.ekj("btn-sm",r.isSmallSize)("btn-lg",r.isLargeSize)("disabled",r.disabled),a.Q6J("disabled",r.disabled)}}function Yp(c,f){if(1&c){const r=a.EpF();a.TgZ(0,"button",11),a.NdJ("click",function(){a.CHM(r);const M=a.oxw();return a.KtG(M.changeHour(-M.hourStep))}),a._UZ(1,"span",15),a.TgZ(2,"span",13),a.SDv(3,16),a.qZA()()}if(2&c){const r=a.oxw();a.ekj("btn-sm",r.isSmallSize)("btn-lg",r.isLargeSize)("disabled",r.disabled),a.Q6J("disabled",r.disabled)}}function zg(c,f){if(1&c){const r=a.EpF();a.TgZ(0,"button",11),a.NdJ("click",function(){a.CHM(r);const M=a.oxw();return a.KtG(M.changeMinute(M.minuteStep))}),a._UZ(1,"span",12),a.TgZ(2,"span",13),a.SDv(3,17),a.qZA()()}if(2&c){const r=a.oxw();a.ekj("btn-sm",r.isSmallSize)("btn-lg",r.isLargeSize)("disabled",r.disabled),a.Q6J("disabled",r.disabled)}}function fv(c,f){if(1&c){const r=a.EpF();a.TgZ(0,"button",11),a.NdJ("click",function(){a.CHM(r);const M=a.oxw();return a.KtG(M.changeMinute(-M.minuteStep))}),a._UZ(1,"span",15),a.TgZ(2,"span",13),a.SDv(3,18),a.qZA()()}if(2&c){const r=a.oxw();a.ekj("btn-sm",r.isSmallSize)("btn-lg",r.isLargeSize)("disabled",r.disabled),a.Q6J("disabled",r.disabled)}}function Kd(c,f){1&c&&(a.TgZ(0,"div",5),a._uU(1,":"),a.qZA())}function Wg(c,f){if(1&c){const r=a.EpF();a.TgZ(0,"button",11),a.NdJ("click",function(){a.CHM(r);const M=a.oxw(2);return a.KtG(M.changeSecond(M.secondStep))}),a._UZ(1,"span",12),a.TgZ(2,"span",13),a.SDv(3,21),a.qZA()()}if(2&c){const r=a.oxw(2);a.ekj("btn-sm",r.isSmallSize)("btn-lg",r.isLargeSize)("disabled",r.disabled),a.Q6J("disabled",r.disabled)}}function Jp(c,f){if(1&c){const r=a.EpF();a.TgZ(0,"button",11),a.NdJ("click",function(){a.CHM(r);const M=a.oxw(2);return a.KtG(M.changeSecond(-M.secondStep))}),a._UZ(1,"span",15),a.TgZ(2,"span",13),a.SDv(3,22),a.qZA()()}if(2&c){const r=a.oxw(2);a.ekj("btn-sm",r.isSmallSize)("btn-lg",r.isLargeSize)("disabled",r.disabled),a.Q6J("disabled",r.disabled)}}function Zp(c,f){if(1&c){const r=a.EpF();a.TgZ(0,"div",19),a.YNc(1,Wg,4,7,"button",3),a.TgZ(2,"input",20),a.NdJ("change",function(M){a.CHM(r);const N=a.oxw();return a.KtG(N.updateSecond(M.target.value))})("blur",function(){a.CHM(r);const M=a.oxw();return a.KtG(M.handleBlur())})("input",function(M){a.CHM(r);const N=a.oxw();return a.KtG(N.formatInput(M.target))})("keydown.ArrowUp",function(M){a.CHM(r);const N=a.oxw();return N.changeSecond(N.secondStep),a.KtG(M.preventDefault())})("keydown.ArrowDown",function(M){a.CHM(r);const N=a.oxw();return N.changeSecond(-N.secondStep),a.KtG(M.preventDefault())}),a.qZA(),a.YNc(3,Jp,4,7,"button",3),a.qZA()}if(2&c){const r=a.oxw();a.xp6(1),a.Q6J("ngIf",r.spinners),a.xp6(1),a.ekj("form-control-sm",r.isSmallSize)("form-control-lg",r.isLargeSize),a.Q6J("value",r.formatMinSec(null==r.model?null:r.model.second))("readOnly",r.readonlyInputs)("disabled",r.disabled),a.xp6(1),a.Q6J("ngIf",r.spinners)}}function Kp(c,f){1&c&&a._UZ(0,"div",5)}function xf(c,f){if(1&c&&(a.ynx(0),a.SDv(1,27),a.BQk()),2&c){const r=a.oxw(2);a.xp6(1),a.pQV(r.i18n.getAfternoonPeriod()),a.QtT(1)}}function qp(c,f){if(1&c&&a.SDv(0,28),2&c){const r=a.oxw(2);a.pQV(r.i18n.getMorningPeriod()),a.QtT(0)}}function qd(c,f){if(1&c){const r=a.EpF();a.TgZ(0,"div",23)(1,"button",24),a.NdJ("click",function(){a.CHM(r);const M=a.oxw();return a.KtG(M.toggleMeridian())}),a.YNc(2,xf,2,1,"ng-container",25),a.YNc(3,qp,1,1,"ng-template",null,26,a.W1O),a.qZA()()}if(2&c){const r=a.MAs(4),p=a.oxw();a.xp6(1),a.ekj("btn-sm",p.isSmallSize)("btn-lg",p.isLargeSize)("disabled",p.disabled),a.Q6J("disabled",p.disabled),a.xp6(1),a.Q6J("ngIf",p.model&&p.model.hour>=12)("ngIfElse",r)}}function Xd(c,f){if(1&c&&(a.TgZ(0,"strong",3),a._uU(1),a.qZA()),2&c){const r=a.oxw();a.xp6(1),a.Oqu(r.header)}}function $g(c,f){}function Xp(c,f){if(1&c){const r=a.EpF();a.TgZ(0,"div",4),a.YNc(1,$g,0,0,"ng-template",5),a.TgZ(2,"button",6),a.NdJ("click",function(){a.CHM(r);const M=a.oxw();return a.KtG(M.hide())}),a.qZA()()}if(2&c){const r=a.oxw(),p=a.MAs(1);a.xp6(1),a.Q6J("ngTemplateOutlet",r.contentHeaderTpl||p)}}function Qp(c,f){if(1&c&&(a.TgZ(0,"span"),a._uU(1),a.qZA()),2&c){const r=a.oxw().$implicit,p=a.oxw();a.Tol(p.highlightClass),a.xp6(1),a.Oqu(r)}}function em(c,f){if(1&c&&a._uU(0),2&c){const r=a.oxw().$implicit;a.Oqu(r)}}function Qd(c,f){if(1&c&&(a.YNc(0,Qp,2,3,"span",1),a.YNc(1,em,1,1,"ng-template",null,2,a.W1O)),2&c){const r=f.odd,p=a.MAs(2);a.Q6J("ngIf",r)("ngIfElse",p)}}function Ks(c){return parseInt(`${c}`,10)}function tm(c){return null!=c?`${c}`:""}function eh(c,f,r=0){return Math.max(Math.min(c,f),r)}function Zl(c){return"string"==typeof c}function Nr(c){return!isNaN(Ks(c))}function dr(c){return"number"==typeof c&&isFinite(c)&&Math.floor(c)===c}function cu(c){return null!=c}function th(c){return Nr(c)?`0${c}`.slice(-2):""}function Df(c,f){return c&&c.className&&c.className.split&&c.className.split(/\s+/).indexOf(f)>=0}function uu(c){return(c||document.body).getBoundingClientRect()}function Rf(c){return c.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}const nm={animation:!0,transitionTimerDelayMs:5},Kg=()=>{},{transitionTimerDelayMs:qg}=nm,nh=new Map,Rs=(c,f,r,p)=>{let M=p.context||{};const N=nh.get(f);if(N)switch(p.runningTransition){case"continue":return ge.E;case"stop":c.run(()=>N.transition$.complete()),M=Object.assign(N.context,M),nh.delete(f)}const ie=r(f,p.animation,M)||Kg;if(!p.animation||"none"===window.getComputedStyle(f).transitionProperty)return c.run(()=>ie()),(0,Se.of)(void 0).pipe(function wf(c){return f=>new K.y(r=>f.subscribe({next:ie=>c.run(()=>r.next(ie)),error:ie=>c.run(()=>r.error(ie)),complete:()=>c.run(()=>r.complete())}))}(c));const he=new xe.x,me=new xe.x,De=he.pipe(function wn(...c){return f=>(0,Es.z)(f,(0,Se.of)(...c))}(!0));nh.set(f,{transition$:he,complete:()=>{me.next(),me.complete()},context:M});const Le=function Zg(c){const{transitionDelay:f,transitionDuration:r}=window.getComputedStyle(c);return 1e3*(parseFloat(f)+parseFloat(r))}(f);return c.runOutsideAngular(()=>{const Dt=ze(f,"transitionend").pipe((0,Mn.R)(De),(0,xr.h)(({target:Jt})=>Jt===f));(function Qe(...c){return 1===(c=Me(c)).length?(0,Re.Xf)(c[0]):new K.y(function At(c){return f=>{let r=[];for(let p=0;r&&!f.closed&&p<c.length;p++)r.push((0,Re.Xf)(c[p]).subscribe((0,qe.x)(f,M=>{if(r){for(let N=0;N<r.length;N++)N!==p&&r[N].unsubscribe();r=null}f.next(M)})))}}(c))})(on(Le+qg).pipe((0,Mn.R)(De)),Dt,me).pipe((0,Mn.R)(De)).subscribe(()=>{nh.delete(f),c.run(()=>{ie(),he.next(),he.complete()})})}),he.asObservable()},im=(c,f,r)=>{let{direction:p,maxSize:M,dimension:N}=r;const{classList:ie}=c;function he(){ie.add("collapse"),"show"===p?ie.add("show"):ie.remove("show")}if(f)return M||(M=function vv(c,f){if(typeof navigator>"u")return"0px";const{classList:r}=c,p=r.contains("show");p||r.add("show"),c.style[f]="";const M=c.getBoundingClientRect()[f]+"px";return p||r.remove("show"),M}(c,N),r.maxSize=M,c.style[N]="show"!==p?M:"0px",ie.remove("collapse"),ie.remove("collapsing"),ie.remove("show"),uu(c),ie.add("collapsing")),c.style[N]="show"===p?M:"0px",()=>{he(),ie.remove("collapsing"),c.style[N]=""};he()};let zo=(()=>{class c{constructor(){this.animation=nm.animation}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275prov=a.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),ti=(()=>{class c{constructor(r){this._ngbConfig=r,this.closeOthers=!1}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(r){this._animation=r}}return c.\u0275fac=function(r){return new(r||c)(a.LFG(zo))},c.\u0275prov=a.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),Kt=0,Ma=(()=>{class c{constructor(r){this.templateRef=r}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(a.Rgc))},c.\u0275dir=a.lG2({type:c,selectors:[["ng-template","ngbPanelHeader",""]],standalone:!0}),c})(),ih=(()=>{class c{constructor(r){this.templateRef=r}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(a.Rgc))},c.\u0275dir=a.lG2({type:c,selectors:[["ng-template","ngbPanelTitle",""]],standalone:!0}),c})(),Xg=(()=>{class c{constructor(r){this.templateRef=r}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(a.Rgc))},c.\u0275dir=a.lG2({type:c,selectors:[["ng-template","ngbPanelContent",""]],standalone:!0}),c})(),rm=(()=>{class c{constructor(){this.disabled=!1,this.id="ngb-panel-"+Kt++,this.isOpen=!1,this.initClassDone=!1,this.transitionRunning=!1,this.shown=new a.vpe,this.hidden=new a.vpe}ngAfterContentChecked(){this.titleTpl=this.titleTpls.first,this.headerTpl=this.headerTpls.first,this.contentTpl=this.contentTpls.first}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275dir=a.lG2({type:c,selectors:[["ngb-panel"]],contentQueries:function(r,p,M){if(1&r&&(a.Suo(M,ih,4),a.Suo(M,Ma,4),a.Suo(M,Xg,4)),2&r){let N;a.iGM(N=a.CRH())&&(p.titleTpls=N),a.iGM(N=a.CRH())&&(p.headerTpls=N),a.iGM(N=a.CRH())&&(p.contentTpls=N)}},inputs:{disabled:"disabled",id:"id",title:"title",type:"type",cardClass:"cardClass"},outputs:{shown:"shown",hidden:"hidden"},standalone:!0}),c})(),yv=(()=>{class c{constructor(r){this._El=r,this.ngbRef=new a.vpe}ngOnInit(){this.ngbRef.emit(this._El.nativeElement)}ngOnDestroy(){this.ngbRef.emit(null)}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(a.SBq))},c.\u0275dir=a.lG2({type:c,selectors:[["","ngbRef",""]],outputs:{ngbRef:"ngbRef"},standalone:!0}),c})(),Sf=(()=>{class c{constructor(r,p){this.accordion=r,this.panel=p}set ngbPanelToggle(r){r&&(this.panel=r)}}return c.\u0275fac=function(r){return new(r||c)(a.Y36((0,a.Gpc)(()=>Cf)),a.Y36(rm,9))},c.\u0275dir=a.lG2({type:c,selectors:[["button","ngbPanelToggle",""]],hostAttrs:["type","button"],hostVars:5,hostBindings:function(r,p){1&r&&a.NdJ("click",function(){return p.accordion.toggle(p.panel.id)}),2&r&&(a.Ikx("disabled",p.panel.disabled),a.uIk("aria-expanded",p.panel.isOpen)("aria-controls",p.panel.id),a.ekj("collapsed",!p.panel.isOpen))},inputs:{ngbPanelToggle:"ngbPanelToggle"},standalone:!0}),c})(),Cf=(()=>{class c{constructor(r,p,M){this._ngZone=p,this._changeDetector=M,this.activeIds=[],this.destroyOnHide=!0,this.panelChange=new a.vpe,this.shown=new a.vpe,this.hidden=new a.vpe,this.animation=r.animation,this.type=r.type,this.closeOtherPanels=r.closeOthers}isExpanded(r){return this.activeIds.indexOf(r)>-1}expand(r){this._changeOpenState(this._findPanelById(r),!0)}expandAll(){this.closeOtherPanels?0===this.activeIds.length&&this.panels.length&&this._changeOpenState(this.panels.first,!0):this.panels.forEach(r=>this._changeOpenState(r,!0))}collapse(r){this._changeOpenState(this._findPanelById(r),!1)}collapseAll(){this.panels.forEach(r=>{this._changeOpenState(r,!1)})}toggle(r){const p=this._findPanelById(r);p&&this._changeOpenState(p,!p.isOpen)}ngAfterContentChecked(){Zl(this.activeIds)&&(this.activeIds=this.activeIds.split(/\s*,\s*/)),this.panels.forEach(r=>{r.isOpen=!r.disabled&&this.activeIds.indexOf(r.id)>-1}),this.activeIds.length>1&&this.closeOtherPanels&&(this._closeOthers(this.activeIds[0],!1),this._updateActiveIds()),this._ngZone.onStable.pipe((0,Ci.q)(1)).subscribe(()=>{this.panels.forEach(r=>{const p=r.panelDiv;p?r.initClassDone||(r.initClassDone=!0,Rs(this._ngZone,p,im,{animation:!1,runningTransition:"continue",context:{direction:r.isOpen?"show":"hide",dimension:"height"}})):r.initClassDone=!1})})}_changeOpenState(r,p){if(null!=r&&!r.disabled&&r.isOpen!==p){let M=!1;this.panelChange.emit({panelId:r.id,nextState:p,preventDefault:()=>{M=!0}}),M||(r.isOpen=p,r.transitionRunning=!0,p&&this.closeOtherPanels&&this._closeOthers(r.id),this._updateActiveIds(),this._runTransitions(this.animation))}}_closeOthers(r,p=!0){this.panels.forEach(M=>{M.id!==r&&M.isOpen&&(M.isOpen=!1,M.transitionRunning=p)})}_findPanelById(r){return this.panels.find(p=>p.id===r)||null}_updateActiveIds(){this.activeIds=this.panels.filter(r=>r.isOpen&&!r.disabled).map(r=>r.id)}_runTransitions(r){this._changeDetector.detectChanges(),this.panels.forEach(p=>{p.transitionRunning&&Rs(this._ngZone,p.panelDiv,im,{animation:r,runningTransition:"stop",context:{direction:p.isOpen?"show":"hide",dimension:"height"}}).subscribe(()=>{p.transitionRunning=!1;const{id:N}=p;p.isOpen?(p.shown.emit(),this.shown.emit(N)):(p.hidden.emit(),this.hidden.emit(N))})})}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(ti),a.Y36(a.R0b),a.Y36(a.sBO))},c.\u0275cmp=a.Xpm({type:c,selectors:[["ngb-accordion"]],contentQueries:function(r,p,M){if(1&r&&a.Suo(M,rm,4),2&r){let N;a.iGM(N=a.CRH())&&(p.panels=N)}},hostAttrs:["role","tablist",1,"accordion"],hostVars:1,hostBindings:function(r,p){2&r&&a.uIk("aria-multiselectable",!p.closeOtherPanels)},inputs:{animation:"animation",activeIds:"activeIds",closeOtherPanels:["closeOthers","closeOtherPanels"],destroyOnHide:"destroyOnHide",type:"type"},outputs:{panelChange:"panelChange",shown:"shown",hidden:"hidden"},exportAs:["ngbAccordion"],standalone:!0,features:[a.jDz],decls:3,vars:1,consts:[["ngbPanelHeader",""],["t",""],["ngFor","",3,"ngForOf"],[1,"accordion-button",3,"ngbPanelToggle"],[3,"ngTemplateOutlet"],["role","tab",3,"id"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["role","tabpanel",3,"id","ngbRef",4,"ngIf"],["role","tabpanel",3,"id","ngbRef"],[1,"accordion-body"]],template:function(r,p){1&r&&(a.YNc(0,mg,3,3,"ng-template",0,1,a.W1O),a.YNc(2,Sp,4,11,"ng-template",2)),2&r&&(a.xp6(2),a.Q6J("ngForOf",p.panels))},dependencies:[lt.ax,lt.tP,Sf,yv,Ma,lt.O5],encapsulation:2}),c})(),Qg=(()=>{class c{constructor(r){this._ngbConfig=r,this.horizontal=!1}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(r){this._animation=r}}return c.\u0275fac=function(r){return new(r||c)(a.LFG(zo))},c.\u0275prov=a.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),rh=(()=>{class c{constructor(r,p,M){this._element=r,this._zone=M,this._afterInit=!1,this._isCollapsed=!1,this.ngbCollapseChange=new a.vpe,this.shown=new a.vpe,this.hidden=new a.vpe,this.animation=p.animation,this.horizontal=p.horizontal}set collapsed(r){this._isCollapsed!==r&&(this._isCollapsed=r,this._afterInit&&this._runTransitionWithEvents(r,this.animation))}ngOnInit(){this._runTransition(this._isCollapsed,!1),this._afterInit=!0}toggle(r=this._isCollapsed){this.collapsed=!r,this.ngbCollapseChange.next(this._isCollapsed)}_runTransition(r,p){return Rs(this._zone,this._element.nativeElement,im,{animation:p,runningTransition:"stop",context:{direction:r?"hide":"show",dimension:this.horizontal?"width":"height"}})}_runTransitionWithEvents(r,p){this._runTransition(r,p).subscribe(()=>{r?this.hidden.emit():this.shown.emit()})}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(a.SBq),a.Y36(Qg),a.Y36(a.R0b))},c.\u0275dir=a.lG2({type:c,selectors:[["","ngbCollapse",""]],hostVars:2,hostBindings:function(r,p){2&r&&a.ekj("collapse-horizontal",p.horizontal)},inputs:{animation:"animation",collapsed:["ngbCollapse","collapsed"],horizontal:"horizontal"},outputs:{ngbCollapseChange:"ngbCollapseChange",shown:"shown",hidden:"hidden"},exportAs:["ngbCollapse"],standalone:!0}),c})(),du=0,ed=(()=>{class c{constructor(r){this._item=r}template(){return!1===this._item.destroyOnHide||this._item.animatingBodyCollapse?this._bodyTpl:null}}return c.\u0275fac=function(r){return new(r||c)(a.Y36((0,a.Gpc)(()=>Ro)))},c.\u0275cmp=a.Xpm({type:c,selectors:[["","ngbAccordionBody",""]],contentQueries:function(r,p,M){if(1&r&&a.Suo(M,a.Rgc,7),2&r){let N;a.iGM(N=a.CRH())&&(p._bodyTpl=N.first)}},hostVars:2,hostBindings:function(r,p){2&r&&a.ekj("accordion-body",!0)},standalone:!0,features:[a.jDz],attrs:iv,decls:1,vars:1,consts:[[3,"ngTemplateOutlet"]],template:function(r,p){1&r&&a.YNc(0,Cp,0,0,"ng-template",0),2&r&&a.Q6J("ngTemplateOutlet",p.template())},dependencies:[lt.tP],encapsulation:2}),c})(),qs=(()=>{class c{constructor(r,p){this.item=r,this.ngbCollapse=p}}return c.\u0275fac=function(r){return new(r||c)(a.Y36((0,a.Gpc)(()=>Ro)),a.Y36(rh))},c.\u0275dir=a.lG2({type:c,selectors:[["","ngbAccordionCollapse",""]],hostAttrs:["role","region"],hostVars:4,hostBindings:function(r,p){2&r&&(a.Ikx("id",p.item.collapseId),a.uIk("aria-labelledby",p.item.toggleId),a.ekj("accordion-collapse",!0))},exportAs:["ngbAccordionCollapse"],standalone:!0,features:[a.zW0([rh])]}),c})(),Ro=(()=>{class c{constructor(r,p){this._accordion=r,this._cd=p,this._subscriptions=[],this._collapsed=!0,this._id="ngb-accordion-item-"+du++,this.animatingBodyCollapse=!1,this.destroyOnHide=this._accordion.destroyOnHide,this.disabled=!1,this.shown=new a.vpe,this.hidden=new a.vpe}set id(r){Zl(r)&&""!==r&&(this._id=r)}set collapsed(r){this.collapsed!==r&&(this._collapsed=r,this._cd.markForCheck(),this._collapsed||(this.animatingBodyCollapse=!0,this._cd.detectChanges()),this._collapse.ngbCollapse.animation=this._accordion.animation,this._collapse.ngbCollapse.collapsed=r)}get collapsed(){return this._collapsed}get id(){return`${this._id}`}get toggleId(){return`${this.id}-toggle`}get collapseId(){return`${this.id}-collapse`}ngAfterContentInit(){const{ngbCollapse:r}=this._collapse;r.animation=!1,r.collapsed=this.collapsed,r.animation=this._accordion.animation,this._subscriptions.push(r.hidden.subscribe(()=>{this.animatingBodyCollapse=!1,this.hidden.emit(),this._accordion.hidden.emit(this.id)}),r.shown.subscribe(()=>{this.shown.emit(),this._accordion.shown.emit(this.id)}))}ngOnDestroy(){this._subscriptions.forEach(r=>r.unsubscribe())}toggle(){this.collapsed=!this.collapsed}}return c.\u0275fac=function(r){return new(r||c)(a.Y36((0,a.Gpc)(()=>Tc)),a.Y36(a.sBO))},c.\u0275dir=a.lG2({type:c,selectors:[["","ngbAccordionItem",""]],contentQueries:function(r,p,M){if(1&r&&a.Suo(M,qs,7),2&r){let N;a.iGM(N=a.CRH())&&(p._collapse=N.first)}},hostVars:3,hostBindings:function(r,p){2&r&&(a.Ikx("id",p.id),a.ekj("accordion-item",!0))},inputs:{id:["ngbAccordionItem","id"],destroyOnHide:"destroyOnHide",disabled:"disabled",collapsed:"collapsed"},outputs:{shown:"shown",hidden:"hidden"},exportAs:["ngbAccordionItem"],standalone:!0}),c})(),Tc=(()=>{class c{constructor(r){this.destroyOnHide=!0,this.shown=new a.vpe,this.hidden=new a.vpe,this.animation=r.animation,this.closeOthers=r.closeOthers}toggle(r){const p=this._getItem(r);if(p){const M=p.collapsed;this._items.forEach(N=>{N===p?N.toggle():this.closeOthers&&M&&(N.collapsed=!0)})}}expand(r){const p=this._getItem(r);p&&this._items.forEach(M=>{M===p?p.collapsed=!1:this.closeOthers&&(M.collapsed=!0)})}expandAll(){this.closeOthers?this._items.find(r=>!r.collapsed)||(this._items.get(0).collapsed=!1):this._items.forEach(r=>{r.collapsed=!1})}collapse(r){const p=this._getItem(r);p&&(p.collapsed=!0)}collapseAll(){this._items.forEach(r=>r.collapsed=!0)}isExpanded(r){const p=this._getItem(r);return!!p&&!p.collapsed}_getItem(r){return this._items.find(p=>p.id===r)}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(ti))},c.\u0275dir=a.lG2({type:c,selectors:[["","ngbAccordion",""]],contentQueries:function(r,p,M){if(1&r&&a.Suo(M,Ro,4),2&r){let N;a.iGM(N=a.CRH())&&(p._items=N)}},hostVars:2,hostBindings:function(r,p){2&r&&a.ekj("accordion",!0)},inputs:{animation:"animation",closeOthers:"closeOthers",destroyOnHide:"destroyOnHide"},outputs:{shown:"shown",hidden:"hidden"},exportAs:["ngbAccordion"],standalone:!0}),c})(),sm=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=a.oAB({type:c}),c.\u0275inj=a.cJS({imports:[Cf,ed]}),c})();const Af=({classList:c})=>{c.remove("show")};let oh=(()=>{class c{constructor(r){this._ngbConfig=r,this.dismissible=!0,this.type="warning"}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(r){this._animation=r}}return c.\u0275fac=function(r){return new(r||c)(a.LFG(zo))},c.\u0275prov=a.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),If=(()=>{class c{constructor(r,p,M,N){this._renderer=p,this._element=M,this._zone=N,this.closed=new a.vpe,this.dismissible=r.dismissible,this.type=r.type,this.animation=r.animation}close(){const r=Rs(this._zone,this._element.nativeElement,Af,{animation:this.animation,runningTransition:"continue"});return r.subscribe(()=>this.closed.emit()),r}ngOnChanges(r){const p=r.type;p&&!p.firstChange&&(this._renderer.removeClass(this._element.nativeElement,`alert-${p.previousValue}`),this._renderer.addClass(this._element.nativeElement,`alert-${p.currentValue}`))}ngOnInit(){this._renderer.addClass(this._element.nativeElement,`alert-${this.type}`)}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(oh),a.Y36(a.Qsj),a.Y36(a.SBq),a.Y36(a.R0b))},c.\u0275cmp=a.Xpm({type:c,selectors:[["ngb-alert"]],hostAttrs:["role","alert",1,"alert","show"],hostVars:4,hostBindings:function(r,p){2&r&&a.ekj("fade",p.animation)("alert-dismissible",p.dismissible)},inputs:{animation:"animation",dismissible:"dismissible",type:"type"},outputs:{closed:"closed"},exportAs:["ngbAlert"],standalone:!0,features:[a.TTD,a.jDz],ngContentSelectors:Jd,decls:2,vars:1,consts:function(){let f;return f=$localize`:@@ngb.alert.close:Close`,[["type","button","class","btn-close","aria-label",f,3,"click",4,"ngIf"],["type","button","aria-label",f,1,"btn-close",3,"click"]]},template:function(r,p){1&r&&(a.F$t(),a.Hsn(0),a.YNc(1,rv,1,0,"button",0)),2&r&&(a.xp6(1),a.Q6J("ngIf",p.dismissible))},dependencies:[lt.O5],styles:["ngb-alert{display:block}\n"],encapsulation:2,changeDetection:0}),c})(),e_=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=a.oAB({type:c}),c.\u0275inj=a.cJS({imports:[If]}),c})();var Ya=(()=>{return(c=Ya||(Ya={})).START="start",c.END="end",Ya;var c})();const Pf=({classList:c})=>c.contains("carousel-item-start")||c.contains("carousel-item-end"),Mc=c=>{c.remove("carousel-item-start"),c.remove("carousel-item-end")},ah=c=>{Mc(c),c.remove("carousel-item-prev"),c.remove("carousel-item-next")},t_=(c,f,{direction:r})=>{const{classList:p}=c;return f?(Pf(c)?Mc(p):(p.add("carousel-item-"+(r===Ya.START?"next":"prev")),uu(c),p.add("carousel-item-"+r)),()=>{ah(p),p.add("active")}):(Mc(p),ah(p),void p.add("active"))},om=(c,f,{direction:r})=>{const{classList:p}=c;return f?(Pf(c)?Mc(p):p.add("carousel-item-"+r),()=>{ah(p),p.remove("active")}):(Mc(p),ah(p),void p.remove("active"))};let lh=(()=>{class c{constructor(r){this._ngbConfig=r,this.interval=5e3,this.wrap=!0,this.keyboard=!0,this.pauseOnHover=!0,this.pauseOnFocus=!0,this.showNavigationArrows=!0,this.showNavigationIndicators=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(r){this._animation=r}}return c.\u0275fac=function(r){return new(r||c)(a.LFG(zo))},c.\u0275prov=a.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),n_=0,Of=(()=>{class c{constructor(r){this.tplRef=r,this.id="ngb-slide-"+n_++,this.slid=new a.vpe}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(a.Rgc))},c.\u0275dir=a.lG2({type:c,selectors:[["ng-template","ngbSlide",""]],inputs:{id:"id"},outputs:{slid:"slid"},standalone:!0}),c})(),i_=(()=>{class c{constructor(r,p,M,N,ie){this._platformId=p,this._ngZone=M,this._cd=N,this._container=ie,this.NgbSlideEventSource=fr,this._destroy$=new xe.x,this._interval$=new xt.X(0),this._mouseHover$=new xt.X(!1),this._focused$=new xt.X(!1),this._pauseOnHover$=new xt.X(!1),this._pauseOnFocus$=new xt.X(!1),this._pause$=new xt.X(!1),this._wrap$=new xt.X(!1),this.slide=new a.vpe,this.slid=new a.vpe,this._transitionIds=null,this.animation=r.animation,this.interval=r.interval,this.wrap=r.wrap,this.keyboard=r.keyboard,this.pauseOnHover=r.pauseOnHover,this.pauseOnFocus=r.pauseOnFocus,this.showNavigationArrows=r.showNavigationArrows,this.showNavigationIndicators=r.showNavigationIndicators}set interval(r){this._interval$.next(r)}get interval(){return this._interval$.value}set wrap(r){this._wrap$.next(r)}get wrap(){return this._wrap$.value}set pauseOnHover(r){this._pauseOnHover$.next(r)}get pauseOnHover(){return this._pauseOnHover$.value}set pauseOnFocus(r){this._pauseOnFocus$.next(r)}get pauseOnFocus(){return this._pauseOnFocus$.value}set mouseHover(r){this._mouseHover$.next(r)}get mouseHover(){return this._mouseHover$.value}set focused(r){this._focused$.next(r)}get focused(){return this._focused$.value}arrowLeft(){this.focus(),this.prev(fr.ARROW_LEFT)}arrowRight(){this.focus(),this.next(fr.ARROW_RIGHT)}ngAfterContentInit(){(0,lt.NF)(this._platformId)&&this._ngZone.runOutsideAngular(()=>{const r=(0,Rn.a)([this.slide.pipe((0,Qi.U)(p=>p.current),(0,ha.O)(this.activeId)),this._wrap$,this.slides.changes.pipe((0,ha.O)(null))]).pipe((0,Qi.U)(([p,M])=>{const N=this.slides.toArray(),ie=this._getSlideIdxById(p);return M?N.length>1:ie<N.length-1}),Dr());(0,Rn.a)([this._pause$,this._pauseOnHover$,this._mouseHover$,this._pauseOnFocus$,this._focused$,this._interval$,r]).pipe((0,Qi.U)(([p,M,N,ie,he,me,De])=>p||M&&N||ie&&he||!De?0:me),Dr(),(0,po.w)(p=>p>0?on(p,p):lr),(0,Mn.R)(this._destroy$)).subscribe(()=>this._ngZone.run(()=>this.next(fr.TIMER)))}),this.slides.changes.pipe((0,Mn.R)(this._destroy$)).subscribe(()=>{this._transitionIds?.forEach(r=>(c=>{nh.get(c)?.complete()})(this._getSlideElement(r))),this._transitionIds=null,this._cd.markForCheck(),this._ngZone.onStable.pipe((0,Ci.q)(1)).subscribe(()=>{for(const{id:r}of this.slides){const p=this._getSlideElement(r);r===this.activeId?p.classList.add("active"):p.classList.remove("active")}})})}ngAfterContentChecked(){let r=this._getSlideById(this.activeId);this.activeId=r?r.id:this.slides.length?this.slides.first.id:""}ngAfterViewInit(){if(this.activeId){const r=this._getSlideElement(this.activeId);r&&r.classList.add("active")}}ngOnDestroy(){this._destroy$.next()}select(r,p){this._cycleToSelected(r,this._getSlideEventDirection(this.activeId,r),p)}prev(r){this._cycleToSelected(this._getPrevSlide(this.activeId),Ya.END,r)}next(r){this._cycleToSelected(this._getNextSlide(this.activeId),Ya.START,r)}pause(){this._pause$.next(!0)}cycle(){this._pause$.next(!1)}focus(){this._container.nativeElement.focus()}_cycleToSelected(r,p,M){const N=this._transitionIds;if(N&&(N[0]!==r||N[1]!==this.activeId))return;let ie=this._getSlideById(r);if(ie&&ie.id!==this.activeId){this._transitionIds=[this.activeId,r],this.slide.emit({prev:this.activeId,current:ie.id,direction:p,paused:this._pause$.value,source:M});const he={animation:this.animation,runningTransition:"stop",context:{direction:p}},me=[],De=this._getSlideById(this.activeId);if(De){const Jt=Rs(this._ngZone,this._getSlideElement(De.id),om,he);Jt.subscribe(()=>{De.slid.emit({isShown:!1,direction:p,source:M})}),me.push(Jt)}const Le=this.activeId;this.activeId=ie.id;const Dt=this._getSlideById(this.activeId),St=Rs(this._ngZone,this._getSlideElement(ie.id),t_,he);St.subscribe(()=>{Dt?.slid.emit({isShown:!0,direction:p,source:M})}),me.push(St),tn(...me).pipe((0,Ci.q)(1)).subscribe(()=>{this._transitionIds=null,this.slid.emit({prev:Le,current:ie.id,direction:p,paused:this._pause$.value,source:M})})}this._cd.markForCheck()}_getSlideEventDirection(r,p){return this._getSlideIdxById(r)>this._getSlideIdxById(p)?Ya.END:Ya.START}_getSlideById(r){return this.slides.find(p=>p.id===r)||null}_getSlideIdxById(r){const p=this._getSlideById(r);return null!=p?this.slides.toArray().indexOf(p):-1}_getNextSlide(r){const p=this.slides.toArray(),M=this._getSlideIdxById(r);return M===p.length-1?this.wrap?p[0].id:p[p.length-1].id:p[M+1].id}_getPrevSlide(r){const p=this.slides.toArray(),M=this._getSlideIdxById(r);return 0===M?this.wrap?p[p.length-1].id:p[0].id:p[M-1].id}_getSlideElement(r){return this._container.nativeElement.querySelector(`#slide-${r}`)}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(lh),a.Y36(a.Lbi),a.Y36(a.R0b),a.Y36(a.sBO),a.Y36(a.SBq))},c.\u0275cmp=a.Xpm({type:c,selectors:[["ngb-carousel"]],contentQueries:function(r,p,M){if(1&r&&a.Suo(M,Of,4),2&r){let N;a.iGM(N=a.CRH())&&(p.slides=N)}},hostAttrs:["tabIndex","0",1,"carousel","slide"],hostVars:3,hostBindings:function(r,p){1&r&&a.NdJ("keydown.arrowLeft",function(){return p.keyboard&&p.arrowLeft()})("keydown.arrowRight",function(){return p.keyboard&&p.arrowRight()})("mouseenter",function(){return p.mouseHover=!0})("mouseleave",function(){return p.mouseHover=!1})("focusin",function(){return p.focused=!0})("focusout",function(){return p.focused=!1}),2&r&&(a.uIk("aria-activedescendant","slide-"+p.activeId),a.Udp("display","block"))},inputs:{animation:"animation",activeId:"activeId",interval:"interval",wrap:"wrap",keyboard:"keyboard",pauseOnHover:"pauseOnHover",pauseOnFocus:"pauseOnFocus",showNavigationArrows:"showNavigationArrows",showNavigationIndicators:"showNavigationIndicators"},outputs:{slide:"slide",slid:"slid"},exportAs:["ngbCarousel"],standalone:!0,features:[a.jDz],decls:6,vars:6,consts:function(){let f,r,p;return f=$localize`:Currently selected slide number read by screen reader@@ngb.carousel.slide-number: Slide ${"\ufffd0\ufffd"}:INTERPOLATION: of ${"\ufffd1\ufffd"}:INTERPOLATION_1: `,r=$localize`:@@ngb.carousel.previous:Previous`,p=$localize`:@@ngb.carousel.next:Next`,[["role","tablist",1,"carousel-indicators"],["type","button","data-bs-target","","role","tab",3,"active","click",4,"ngFor","ngForOf"],[1,"carousel-inner"],["class","carousel-item","role","tabpanel",3,"id",4,"ngFor","ngForOf"],["class","carousel-control-prev","type","button",3,"click",4,"ngIf"],["class","carousel-control-next","type","button",3,"click",4,"ngIf"],["type","button","data-bs-target","","role","tab",3,"click"],["role","tabpanel",1,"carousel-item",3,"id"],[1,"visually-hidden"],f,[3,"ngTemplateOutlet"],["type","button",1,"carousel-control-prev",3,"click"],["aria-hidden","true",1,"carousel-control-prev-icon"],r,["type","button",1,"carousel-control-next",3,"click"],["aria-hidden","true",1,"carousel-control-next-icon"],p]},template:function(r,p){1&r&&(a.TgZ(0,"div",0),a.YNc(1,vg,1,5,"button",1),a.qZA(),a.TgZ(2,"div",2),a.YNc(3,sv,4,4,"div",3),a.qZA(),a.YNc(4,ov,4,0,"button",4),a.YNc(5,uf,4,0,"button",5)),2&r&&(a.ekj("visually-hidden",!p.showNavigationIndicators),a.xp6(1),a.Q6J("ngForOf",p.slides),a.xp6(2),a.Q6J("ngForOf",p.slides),a.xp6(1),a.Q6J("ngIf",p.showNavigationArrows),a.xp6(1),a.Q6J("ngIf",p.showNavigationArrows))},dependencies:[lt.ax,lt.tP,lt.O5],encapsulation:2,changeDetection:0}),c})();var fr=(()=>{return(c=fr||(fr={})).TIMER="timer",c.ARROW_LEFT="arrowLeft",c.ARROW_RIGHT="arrowRight",c.INDICATOR="indicator",fr;var c})();let am=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=a.oAB({type:c}),c.\u0275inj=a.cJS({imports:[i_]}),c})(),Nf=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=a.oAB({type:c}),c.\u0275inj=a.cJS({}),c})();class Kr{constructor(f,r,p){this.year=dr(f)?f:null,this.month=dr(r)?r:null,this.day=dr(p)?p:null}static from(f){return f instanceof Kr?f:f?new Kr(f.year,f.month,f.day):null}equals(f){return null!=f&&this.year===f.year&&this.month===f.month&&this.day===f.day}before(f){return!!f&&(this.year===f.year?this.month===f.month?this.day!==f.day&&this.day<f.day:this.month<f.month:this.year<f.year)}after(f){return!!f&&(this.year===f.year?this.month===f.month?this.day!==f.day&&this.day>f.day:this.month>f.month:this.year>f.year)}}function ql(c,f){return!function lm(c,f){return!c&&!f||!!c&&!!f&&c.equals(f)}(c,f)}function Ff(c,f){return!(!c&&!f||c&&f&&c.year===f.year&&c.month===f.month)}function td(c,f,r){return c&&f&&c.before(f)?f:c&&r&&c.after(r)?r:c||null}function nd(c,f){const{minDate:r,maxDate:p,disabled:M,markDisabled:N}=f;return!(null==c||M||N&&N(c,{year:c.year,month:c.month})||r&&c.before(r)||p&&c.after(p))}function s_(c){return new Kr(c.getFullYear(),c.getMonth()+1,c.getDate())}function ch(c){const f=new Date(c.year,c.month-1,c.day,12);return isNaN(f.getTime())||f.setFullYear(c.year),f}let sd=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275prov=a.Yz7({token:c,factory:function(){return function hm(){return new Lf}()},providedIn:"root"}),c})(),Lf=(()=>{class c extends sd{getDaysPerWeek(){return 7}getMonths(){return[1,2,3,4,5,6,7,8,9,10,11,12]}getWeeksPerMonth(){return 6}getNext(r,p="d",M=1){let N=ch(r),ie=!0,he=N.getMonth();switch(p){case"y":N.setFullYear(N.getFullYear()+M);break;case"m":he+=M,N.setMonth(he),he%=12,he<0&&(he+=12);break;case"d":N.setDate(N.getDate()+M),ie=!1;break;default:return r}return ie&&N.getMonth()!==he&&N.setDate(0),s_(N)}getPrev(r,p="d",M=1){return this.getNext(r,p,-M)}getWeekday(r){let M=ch(r).getDay();return 0===M?7:M}getWeekNumber(r,p){7===p&&(p=0);const ie=ch(r[(11-p)%7]);ie.setDate(ie.getDate()+4-(ie.getDay()||7));const he=ie.getTime();return ie.setMonth(0),ie.setDate(1),Math.floor(Math.round((he-ie.getTime())/864e5)/7)+1}getToday(){return s_(new Date)}isValid(r){if(!(r&&dr(r.year)&&dr(r.month)&&dr(r.day)&&0!==r.year))return!1;const p=ch(r);return!isNaN(p.getTime())&&p.getFullYear()===r.year&&p.getMonth()+1===r.month&&p.getDate()===r.day}}return c.\u0275fac=function(){let f;return function(p){return(f||(f=a.n5z(c)))(p||c)}}(),c.\u0275prov=a.Yz7({token:c,factory:c.\u0275fac}),c})(),Ml=(()=>{class c{getMonthLabel(r){return`${this.getMonthFullName(r.month,r.year)} ${this.getYearNumerals(r.year)}`}getDayNumerals(r){return`${r.day}`}getWeekNumerals(r){return`${r}`}getYearNumerals(r){return`${r}`}getWeekLabel(){return""}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275prov=a.Yz7({token:c,factory:function(r){let p=null;return p=r?new r:function Tv(c){return new o_(c)}(a.LFG(a.soG)),p},providedIn:"root"}),c})(),o_=(()=>{class c extends Ml{constructor(r){super(),this._locale=r,this._monthsShort=(0,lt.UT)(r,lt.x.Standalone,lt.Tn.Abbreviated),this._monthsFull=(0,lt.UT)(r,lt.x.Standalone,lt.Tn.Wide)}getWeekdayLabel(r,p){const M=(0,lt.Mn)(this._locale,lt.x.Standalone,void 0===p?lt.Tn.Short:p);return M.map((ie,he)=>M[(he+1)%7])[r-1]||""}getMonthShortName(r){return this._monthsShort[r-1]||""}getMonthFullName(r){return this._monthsFull[r-1]||""}getDayAriaLabel(r){const p=new Date(r.year,r.month-1,r.day);return(0,lt.p6)(p,"fullDate",this._locale)}}return c.\u0275fac=function(r){return new(r||c)(a.LFG(a.soG))},c.\u0275prov=a.Yz7({token:c,factory:c.\u0275fac}),c})(),od=(()=>{class c{constructor(r,p){this._calendar=r,this._i18n=p,this._VALIDATORS={dayTemplateData:M=>{if(this._state.dayTemplateData!==M)return{dayTemplateData:M}},displayMonths:M=>{if(dr(M=Ks(M))&&M>0&&this._state.displayMonths!==M)return{displayMonths:M}},disabled:M=>{if(this._state.disabled!==M)return{disabled:M}},firstDayOfWeek:M=>{if(dr(M=Ks(M))&&M>=0&&this._state.firstDayOfWeek!==M)return{firstDayOfWeek:M}},focusVisible:M=>{if(this._state.focusVisible!==M&&!this._state.disabled)return{focusVisible:M}},markDisabled:M=>{if(this._state.markDisabled!==M)return{markDisabled:M}},maxDate:M=>{const N=this.toValidDate(M,null);if(ql(this._state.maxDate,N))return{maxDate:N}},minDate:M=>{const N=this.toValidDate(M,null);if(ql(this._state.minDate,N))return{minDate:N}},navigation:M=>{if(this._state.navigation!==M)return{navigation:M}},outsideDays:M=>{if(this._state.outsideDays!==M)return{outsideDays:M}},weekdays:M=>{const N=!0===M||!1===M?lt.Tn.Short:M,ie=!0!==M&&!1!==M||M;if(this._state.weekdayWidth!==N||this._state.weekdaysVisible!==ie)return{weekdayWidth:N,weekdaysVisible:ie}}},this._model$=new xe.x,this._dateSelect$=new xe.x,this._state={dayTemplateData:null,markDisabled:null,maxDate:null,minDate:null,disabled:!1,displayMonths:1,firstDate:null,firstDayOfWeek:1,lastDate:null,focusDate:null,focusVisible:!1,months:[],navigation:"select",outsideDays:"visible",prevDisabled:!1,nextDisabled:!1,selectedDate:null,selectBoxes:{years:[],months:[]},weekdayWidth:lt.Tn.Short,weekdaysVisible:!0}}get model$(){return this._model$.pipe((0,xr.h)(r=>r.months.length>0))}get dateSelect$(){return this._dateSelect$.pipe((0,xr.h)(r=>null!==r))}set(r){let p=Object.keys(r).map(M=>this._VALIDATORS[M](r[M])).reduce((M,N)=>({...M,...N}),{});Object.keys(p).length>0&&this._nextState(p)}focus(r){const p=this.toValidDate(r,null);null!=p&&!this._state.disabled&&ql(this._state.focusDate,p)&&this._nextState({focusDate:r})}focusSelect(){nd(this._state.focusDate,this._state)&&this.select(this._state.focusDate,{emitEvent:!0})}open(r){const p=this.toValidDate(r,this._calendar.getToday());null!=p&&!this._state.disabled&&(!this._state.firstDate||Ff(this._state.firstDate,p))&&this._nextState({firstDate:p})}select(r,p={}){const M=this.toValidDate(r,null);null!=M&&!this._state.disabled&&(ql(this._state.selectedDate,M)&&this._nextState({selectedDate:M}),p.emitEvent&&nd(M,this._state)&&this._dateSelect$.next(M))}toValidDate(r,p){const M=Kr.from(r);return void 0===p&&(p=this._calendar.getToday()),this._calendar.isValid(M)?M:p}getMonth(r){for(let p of this._state.months)if(r.month===p.number&&r.year===p.year)return p;throw new Error(`month ${r.month} of year ${r.year} not found`)}_nextState(r){const p=this._updateState(r);this._patchContexts(p),this._state=p,this._model$.next(this._state)}_patchContexts(r){const{months:p,displayMonths:M,selectedDate:N,focusDate:ie,focusVisible:he,disabled:me,outsideDays:De}=r;r.months.forEach(Le=>{Le.weeks.forEach(Dt=>{Dt.days.forEach(St=>{ie&&(St.context.focused=ie.equals(St.date)&&he),St.tabindex=!me&&ie&&St.date.equals(ie)&&ie.month===Le.number?0:-1,!0===me&&(St.context.disabled=!0),void 0!==N&&(St.context.selected=null!==N&&N.equals(St.date)),Le.number!==St.date.month&&(St.hidden="hidden"===De||"collapsed"===De||M>1&&St.date.after(p[0].firstDate)&&St.date.before(p[M-1].lastDate))})})})}_updateState(r){const p=Object.assign({},this._state,r);let M=p.firstDate;if(("minDate"in r||"maxDate"in r)&&(function cm(c,f){if(f&&c&&f.before(c))throw new Error(`'maxDate' ${f} should be greater than 'minDate' ${c}`)}(p.minDate,p.maxDate),p.focusDate=td(p.focusDate,p.minDate,p.maxDate),p.firstDate=td(p.firstDate,p.minDate,p.maxDate),M=p.focusDate),"disabled"in r&&(p.focusVisible=!1),"selectedDate"in r&&0===this._state.months.length&&(M=p.selectedDate),"focusVisible"in r||"focusDate"in r&&(p.focusDate=td(p.focusDate,p.minDate,p.maxDate),M=p.focusDate,0!==p.months.length&&p.focusDate&&!p.focusDate.before(p.firstDate)&&!p.focusDate.after(p.lastDate)))return p;if("firstDate"in r&&(p.firstDate=td(p.firstDate,p.minDate,p.maxDate),M=p.firstDate),M){const ie=function rd(c,f,r,p,M){const{displayMonths:N,months:ie}=r,he=ie.splice(0,ie.length);return Array.from({length:N},(De,Le)=>{const Dt=Object.assign(c.getNext(f,"m",Le),{day:1});if(ie[Le]=null,!M){const St=he.findIndex(Jt=>Jt.firstDate.equals(Dt));-1!==St&&(ie[Le]=he.splice(St,1)[0])}return Dt}).forEach((De,Le)=>{null===ie[Le]&&(ie[Le]=function um(c,f,r,p,M={}){const{dayTemplateData:N,minDate:ie,maxDate:he,firstDayOfWeek:me,markDisabled:De,outsideDays:Le,weekdayWidth:Dt,weekdaysVisible:St}=r,Jt=c.getToday();M.firstDate=null,M.lastDate=null,M.number=f.month,M.year=f.year,M.weeks=M.weeks||[],M.weekdays=M.weekdays||[],f=function dm(c,f,r){const p=c.getDaysPerWeek(),M=new Kr(f.year,f.month,1),N=c.getWeekday(M)%p;return c.getPrev(M,"d",(p+N-r)%p)}(c,f,me),St||(M.weekdays.length=0);for(let Nn=0;Nn<c.getWeeksPerMonth();Nn++){let Tn=M.weeks[Nn];Tn||(Tn=M.weeks[Nn]={number:0,days:[],collapsed:!0});const Dn=Tn.days;for(let $n=0;$n<c.getDaysPerWeek();$n++){0===Nn&&St&&(M.weekdays[$n]=p.getWeekdayLabel(c.getWeekday(f),Dt));const di=new Kr(f.year,f.month,f.day),bi=c.getNext(di),Ti=p.getDayAriaLabel(di);let ii=!!(ie&&di.before(ie)||he&&di.after(he));!ii&&De&&(ii=De(di,{month:M.number,year:M.year}));let hi=di.equals(Jt),Zi=N?N(di,{month:M.number,year:M.year}):void 0;null===M.firstDate&&di.month===M.number&&(M.firstDate=di),di.month===M.number&&bi.month!==M.number&&(M.lastDate=di);let li=Dn[$n];li||(li=Dn[$n]={}),li.date=di,li.context=Object.assign(li.context||{},{$implicit:di,date:di,data:Zi,currentMonth:M.number,currentYear:M.year,disabled:ii,focused:!1,selected:!1,today:hi}),li.tabindex=-1,li.ariaLabel=Ti,li.hidden=!1,f=bi}Tn.number=c.getWeekNumber(Dn.map($n=>$n.date),me),Tn.collapsed="collapsed"===Le&&Dn[0].date.month!==M.number&&Dn[Dn.length-1].date.month!==M.number}return M}(c,De,r,p,he.shift()||{}))}),ie}(this._calendar,M,p,this._i18n,"dayTemplateData"in r||"firstDayOfWeek"in r||"markDisabled"in r||"minDate"in r||"maxDate"in r||"disabled"in r||"outsideDays"in r||"weekdaysVisible"in r);p.months=ie,p.firstDate=ie[0].firstDate,p.lastDate=ie[ie.length-1].lastDate,"selectedDate"in r&&!nd(p.selectedDate,p)&&(p.selectedDate=null),"firstDate"in r&&(!p.focusDate||p.focusDate.before(p.firstDate)||p.focusDate.after(p.lastDate))&&(p.focusDate=M);const he=!this._state.firstDate||this._state.firstDate.year!==p.firstDate.year,me=!this._state.firstDate||this._state.firstDate.month!==p.firstDate.month;"select"===p.navigation?(("minDate"in r||"maxDate"in r||0===p.selectBoxes.years.length||he)&&(p.selectBoxes.years=function id(c,f,r){if(!c)return[];const p=f?Math.max(f.year,c.year-500):c.year-10,N=(r?Math.min(r.year,c.year+500):c.year+10)-p+1,ie=Array(N);for(let he=0;he<N;he++)ie[he]=p+he;return ie}(p.firstDate,p.minDate,p.maxDate)),("minDate"in r||"maxDate"in r||0===p.selectBoxes.months.length||he)&&(p.selectBoxes.months=function r_(c,f,r,p){if(!f)return[];let M=c.getMonths(f.year);if(r&&f.year===r.year){const N=M.findIndex(ie=>ie===r.month);M=M.slice(N)}if(p&&f.year===p.year){const N=M.findIndex(ie=>ie===p.month);M=M.slice(0,N+1)}return M}(this._calendar,p.firstDate,p.minDate,p.maxDate))):p.selectBoxes={years:[],months:[]},("arrows"===p.navigation||"select"===p.navigation)&&(me||he||"minDate"in r||"maxDate"in r||"disabled"in r)&&(p.prevDisabled=p.disabled||function qr(c,f,r){const p=Object.assign(c.getPrev(f,"m"),{day:1});return null!=r&&(p.year===r.year&&p.month<r.month||p.year<r.year&&1===r.month)}(this._calendar,p.firstDate,p.minDate),p.nextDisabled=p.disabled||function Fr(c,f,r){const p=Object.assign(c.getNext(f,"m"),{day:1});return null!=r&&p.after(r)}(this._calendar,p.lastDate,p.maxDate))}return p}}return c.\u0275fac=function(r){return new(r||c)(a.LFG(sd),a.LFG(Ml))},c.\u0275prov=a.Yz7({token:c,factory:c.\u0275fac}),c})();var xc=(()=>{return(c=xc||(xc={}))[c.PREV=0]="PREV",c[c.NEXT=1]="NEXT",xc;var c})();let fm=(()=>{class c{constructor(r){this.i18n=r}isMuted(){return!this.selected&&(this.date.month!==this.currentMonth||this.disabled)}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(Ml))},c.\u0275cmp=a.Xpm({type:c,selectors:[["","ngbDatepickerDayView",""]],hostAttrs:[1,"btn-light"],hostVars:10,hostBindings:function(r,p){2&r&&a.ekj("bg-primary",p.selected)("text-white",p.selected)("text-muted",p.isMuted())("outside",p.isMuted())("active",p.focused)},inputs:{currentMonth:"currentMonth",date:"date",disabled:"disabled",focused:"focused",selected:"selected"},standalone:!0,features:[a.jDz],attrs:av,decls:1,vars:1,template:function(r,p){1&r&&a._uU(0),2&r&&a.Oqu(p.i18n.getDayNumerals(p.date))},styles:["[ngbDatepickerDayView]{text-align:center;width:2rem;height:2rem;line-height:2rem;border-radius:.25rem;background:transparent}[ngbDatepickerDayView]:hover:not(.bg-primary),[ngbDatepickerDayView].active:not(.bg-primary){background-color:var(--bs-btn-bg);outline:1px solid var(--bs-border-color)}[ngbDatepickerDayView].outside{opacity:.5}\n"],encapsulation:2,changeDetection:0}),c})(),Dc=(()=>{class c{constructor(r,p){this.i18n=r,this._renderer=p,this.select=new a.vpe,this._month=-1,this._year=-1}changeMonth(r){this.select.emit(new Kr(this.date.year,Ks(r),1))}changeYear(r){this.select.emit(new Kr(Ks(r),this.date.month,1))}ngAfterViewChecked(){this.date&&(this.date.month!==this._month&&(this._month=this.date.month,this._renderer.setProperty(this.monthSelect.nativeElement,"value",this._month)),this.date.year!==this._year&&(this._year=this.date.year,this._renderer.setProperty(this.yearSelect.nativeElement,"value",this._year)))}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(Ml),a.Y36(a.Qsj))},c.\u0275cmp=a.Xpm({type:c,selectors:[["ngb-datepicker-navigation-select"]],viewQuery:function(r,p){if(1&r&&(a.Gf(lv,7,a.SBq),a.Gf(cv,7,a.SBq)),2&r){let M;a.iGM(M=a.CRH())&&(p.monthSelect=M.first),a.iGM(M=a.CRH())&&(p.yearSelect=M.first)}},inputs:{date:"date",disabled:"disabled",months:"months",years:"years"},outputs:{select:"select"},standalone:!0,features:[a.jDz],decls:6,vars:4,consts:function(){let f,r,p,M;return f=$localize`:@@ngb.datepicker.select-month:Select month`,r=$localize`:@@ngb.datepicker.select-month:Select month`,p=$localize`:@@ngb.datepicker.select-year:Select year`,M=$localize`:@@ngb.datepicker.select-year:Select year`,[["aria-label",f,"title",r,1,"form-select",3,"disabled","change"],["month",""],[3,"value",4,"ngFor","ngForOf"],["aria-label",p,"title",M,1,"form-select",3,"disabled","change"],["year",""],[3,"value"]]},template:function(r,p){1&r&&(a.TgZ(0,"select",0,1),a.NdJ("change",function(N){return p.changeMonth(N.target.value)}),a.YNc(2,uv,2,3,"option",2),a.qZA(),a.TgZ(3,"select",3,4),a.NdJ("change",function(N){return p.changeYear(N.target.value)}),a.YNc(5,dv,2,2,"option",2),a.qZA()),2&r&&(a.Q6J("disabled",p.disabled),a.xp6(2),a.Q6J("ngForOf",p.months),a.xp6(1),a.Q6J("disabled",p.disabled),a.xp6(2),a.Q6J("ngForOf",p.years))},dependencies:[lt.ax],styles:["ngb-datepicker-navigation-select>.form-select{flex:1 1 auto;padding:0 .5rem;font-size:.875rem;height:1.85rem}ngb-datepicker-navigation-select>.form-select:focus{z-index:1}ngb-datepicker-navigation-select>.form-select::-ms-value{background-color:transparent!important}\n"],encapsulation:2,changeDetection:0}),c})(),a_=(()=>{class c{constructor(r){this.i18n=r,this.navigation=xc,this.months=[],this.navigate=new a.vpe,this.select=new a.vpe}onClickPrev(r){r.currentTarget.focus(),this.navigate.emit(this.navigation.PREV)}onClickNext(r){r.currentTarget.focus(),this.navigate.emit(this.navigation.NEXT)}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(Ml))},c.\u0275cmp=a.Xpm({type:c,selectors:[["ngb-datepicker-navigation"]],inputs:{date:"date",disabled:"disabled",months:"months",showSelect:"showSelect",prevDisabled:"prevDisabled",nextDisabled:"nextDisabled",selectBoxes:"selectBoxes"},outputs:{navigate:"navigate",select:"select"},standalone:!0,features:[a.jDz],decls:8,vars:4,consts:function(){let f,r,p,M;return f=$localize`:@@ngb.datepicker.previous-month:Previous month`,r=$localize`:@@ngb.datepicker.previous-month:Previous month`,p=$localize`:@@ngb.datepicker.next-month:Next month`,M=$localize`:@@ngb.datepicker.next-month:Next month`,[[1,"ngb-dp-arrow"],["type","button","aria-label",f,"title",r,1,"btn","btn-link","ngb-dp-arrow-btn",3,"disabled","click"],[1,"ngb-dp-navigation-chevron"],["class","ngb-dp-navigation-select",3,"date","disabled","months","years","select",4,"ngIf"],[4,"ngIf"],[1,"ngb-dp-arrow","right"],["type","button","aria-label",p,"title",M,1,"btn","btn-link","ngb-dp-arrow-btn",3,"disabled","click"],[1,"ngb-dp-navigation-select",3,"date","disabled","months","years","select"],["ngFor","",3,"ngForOf"],["class","ngb-dp-arrow",4,"ngIf"],[1,"ngb-dp-month-name"]]},template:function(r,p){1&r&&(a.TgZ(0,"div",0)(1,"button",1),a.NdJ("click",function(N){return p.onClickPrev(N)}),a._UZ(2,"span",2),a.qZA()(),a.YNc(3,yg,1,4,"ngb-datepicker-navigation-select",3),a.YNc(4,Ip,1,1,null,4),a.TgZ(5,"div",5)(6,"button",6),a.NdJ("click",function(N){return p.onClickNext(N)}),a._UZ(7,"span",2),a.qZA()()),2&r&&(a.xp6(1),a.Q6J("disabled",p.prevDisabled),a.xp6(2),a.Q6J("ngIf",p.showSelect),a.xp6(1),a.Q6J("ngIf",!p.showSelect),a.xp6(2),a.Q6J("disabled",p.nextDisabled))},dependencies:[lt.O5,lt.ax,Dc],styles:["ngb-datepicker-navigation{display:flex;align-items:center}.ngb-dp-navigation-chevron{border-style:solid;border-width:.2em .2em 0 0;display:inline-block;width:.75em;height:.75em;margin-left:.25em;margin-right:.15em;transform:rotate(-135deg)}.ngb-dp-arrow{display:flex;flex:1 1 auto;padding-right:0;padding-left:0;margin:0;width:2rem;height:2rem}.ngb-dp-arrow.right{justify-content:flex-end}.ngb-dp-arrow.right .ngb-dp-navigation-chevron{transform:rotate(45deg);margin-left:.15em;margin-right:.25em}.ngb-dp-arrow-btn{padding:0 .25rem;margin:0 .5rem;border:none;background-color:transparent;z-index:1}.ngb-dp-arrow-btn:focus{outline-width:1px;outline-style:auto}@media all and (-ms-high-contrast: none),(-ms-high-contrast: active){.ngb-dp-arrow-btn:focus{outline-style:solid}}.ngb-dp-month-name{font-size:larger;height:2rem;line-height:2rem;text-align:center}.ngb-dp-navigation-select{display:flex;flex:1 1 9rem}\n"],encapsulation:2,changeDetection:0}),c})();var yi=(()=>{return(c=yi||(yi={}))[c.Tab=9]="Tab",c[c.Enter=13]="Enter",c[c.Escape=27]="Escape",c[c.Space=32]="Space",c[c.PageUp=33]="PageUp",c[c.PageDown=34]="PageDown",c[c.End=35]="End",c[c.Home=36]="Home",c[c.ArrowLeft=37]="ArrowLeft",c[c.ArrowUp=38]="ArrowUp",c[c.ArrowRight=39]="ArrowRight",c[c.ArrowDown=40]="ArrowDown",yi;var c})();let uh=(()=>{class c{processKey(r,p){const{state:M,calendar:N}=p;switch(r.which){case yi.PageUp:p.focusDate(N.getPrev(M.focusedDate,r.shiftKey?"y":"m",1));break;case yi.PageDown:p.focusDate(N.getNext(M.focusedDate,r.shiftKey?"y":"m",1));break;case yi.End:p.focusDate(r.shiftKey?M.maxDate:M.lastDate);break;case yi.Home:p.focusDate(r.shiftKey?M.minDate:M.firstDate);break;case yi.ArrowLeft:p.focusDate(N.getPrev(M.focusedDate,"d",1));break;case yi.ArrowUp:p.focusDate(N.getPrev(M.focusedDate,"d",N.getDaysPerWeek()));break;case yi.ArrowRight:p.focusDate(N.getNext(M.focusedDate,"d",1));break;case yi.ArrowDown:p.focusDate(N.getNext(M.focusedDate,"d",N.getDaysPerWeek()));break;case yi.Enter:case yi.Space:p.focusSelect();break;default:return}r.preventDefault(),r.stopPropagation()}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275prov=a.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),Bf=(()=>{class c{constructor(){this.displayMonths=1,this.firstDayOfWeek=1,this.navigation="select",this.outsideDays="visible",this.showWeekNumbers=!1,this.weekdays=lt.Tn.Short}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275prov=a.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),hu=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275prov=a.Yz7({token:c,factory:function(){return function jf(){return new wc}()},providedIn:"root"}),c})(),wc=(()=>{class c extends hu{fromModel(r){return r&&dr(r.year)&&dr(r.month)&&dr(r.day)?{year:r.year,month:r.month,day:r.day}:null}toModel(r){return r&&dr(r.year)&&dr(r.month)&&dr(r.day)?{year:r.year,month:r.month,day:r.day}:null}}return c.\u0275fac=function(){let f;return function(p){return(f||(f=a.n5z(c)))(p||c)}}(),c.\u0275prov=a.Yz7({token:c,factory:c.\u0275fac}),c})(),kf=(()=>{class c{constructor(r){this.templateRef=r}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(a.Rgc))},c.\u0275dir=a.lG2({type:c,selectors:[["ng-template","ngbDatepickerContent",""]],standalone:!0}),c})(),ad=(()=>{class c{constructor(r,p,M,N){this.i18n=r,this.datepicker=p,this._keyboardService=M,this._service=N}set month(r){this.viewModel=this._service.getMonth(r)}onKeyDown(r){this._keyboardService.processKey(r,this.datepicker)}doSelect(r){!r.context.disabled&&!r.hidden&&this.datepicker.onDateSelect(r.date)}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(Ml),a.Y36((0,a.Gpc)(()=>dh)),a.Y36(uh),a.Y36(od))},c.\u0275cmp=a.Xpm({type:c,selectors:[["ngb-datepicker-month"]],hostAttrs:["role","grid"],hostBindings:function(r,p){1&r&&a.NdJ("keydown",function(N){return p.onKeyDown(N)})},inputs:{month:"month"},standalone:!0,features:[a.jDz],decls:2,vars:2,consts:[["class","ngb-dp-week ngb-dp-weekdays","role","row",4,"ngIf"],["ngFor","",3,"ngForOf"],["role","row",1,"ngb-dp-week","ngb-dp-weekdays"],["class","ngb-dp-weekday ngb-dp-showweek small",4,"ngIf"],["class","ngb-dp-weekday small","role","columnheader",4,"ngFor","ngForOf"],[1,"ngb-dp-weekday","ngb-dp-showweek","small"],["role","columnheader",1,"ngb-dp-weekday","small"],["class","ngb-dp-week","role","row",4,"ngIf"],["role","row",1,"ngb-dp-week"],["class","ngb-dp-week-number small text-muted",4,"ngIf"],["class","ngb-dp-day","role","gridcell",3,"disabled","tabindex","hidden","ngb-dp-today","click",4,"ngFor","ngForOf"],[1,"ngb-dp-week-number","small","text-muted"],["role","gridcell",1,"ngb-dp-day",3,"tabindex","click"],[3,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(r,p){1&r&&(a.YNc(0,bg,3,2,"div",0),a.YNc(1,Dg,1,1,"ng-template",1)),2&r&&(a.Q6J("ngIf",p.viewModel.weekdays.length>0),a.xp6(1),a.Q6J("ngForOf",p.viewModel.weeks))},dependencies:[lt.O5,lt.ax,lt.tP],styles:['ngb-datepicker-month{display:block}.ngb-dp-weekday,.ngb-dp-week-number{line-height:2rem;text-align:center;font-style:italic}.ngb-dp-weekday{color:var(--bs-info)}.ngb-dp-week{border-radius:.25rem;display:flex}.ngb-dp-weekdays{border-bottom:1px solid var(--bs-border-color);border-radius:0;background-color:var(--bs-light)}.ngb-dp-day,.ngb-dp-weekday,.ngb-dp-week-number{width:2rem;height:2rem}.ngb-dp-day{cursor:pointer}.ngb-dp-day.disabled,.ngb-dp-day.hidden{cursor:default;pointer-events:none}.ngb-dp-day[tabindex="0"]{z-index:1}\n'],encapsulation:2}),c})(),dh=(()=>{class c{constructor(r,p,M,N,ie,he,me,De){this._service=r,this._calendar=p,this.i18n=M,this._elementRef=he,this._ngbDateAdapter=me,this._ngZone=De,this._controlValue=null,this._destroyed$=new xe.x,this._publicState={},this.navigate=new a.vpe,this.dateSelect=new a.vpe,this.onChange=Le=>{},this.onTouched=()=>{},["dayTemplate","dayTemplateData","displayMonths","firstDayOfWeek","footerTemplate","markDisabled","minDate","maxDate","navigation","outsideDays","showWeekNumbers","startDate","weekdays"].forEach(Le=>this[Le]=N[Le]),r.dateSelect$.pipe((0,Mn.R)(this._destroyed$)).subscribe(Le=>{this.dateSelect.emit(Le)}),r.model$.pipe((0,Mn.R)(this._destroyed$)).subscribe(Le=>{const Dt=Le.firstDate,St=this.model?this.model.firstDate:null;this._publicState={maxDate:Le.maxDate,minDate:Le.minDate,firstDate:Le.firstDate,lastDate:Le.lastDate,focusedDate:Le.focusDate,months:Le.months.map($n=>$n.firstDate)};let Jt=!1;if(!Dt.equals(St)&&(this.navigate.emit({current:St?{year:St.year,month:St.month}:null,next:{year:Dt.year,month:Dt.month},preventDefault:()=>Jt=!0}),Jt&&null!==St))return void this._service.open(St);const Nn=Le.selectedDate,Tn=Le.focusDate,Dn=this.model?this.model.focusDate:null;this.model=Le,ql(Nn,this._controlValue)&&(this._controlValue=Nn,this.onTouched(),this.onChange(this._ngbDateAdapter.toModel(Nn))),ql(Tn,Dn)&&Dn&&Le.focusVisible&&this.focus(),ie.markForCheck()})}get state(){return this._publicState}get calendar(){return this._calendar}focusDate(r){this._service.focus(Kr.from(r))}focusSelect(){this._service.focusSelect()}focus(){this._ngZone.onStable.asObservable().pipe((0,Ci.q)(1)).subscribe(()=>{const r=this._elementRef.nativeElement.querySelector('div.ngb-dp-day[tabindex="0"]');r&&r.focus()})}navigateTo(r){this._service.open(Kr.from(r?r.day?r:{...r,day:1}:null))}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{const r=ze(this._contentEl.nativeElement,"focusin"),p=ze(this._contentEl.nativeElement,"focusout"),{nativeElement:M}=this._elementRef;(0,Si.T)(r,p).pipe((0,xr.h)(({target:N,relatedTarget:ie})=>!(Df(N,"ngb-dp-day")&&Df(ie,"ngb-dp-day")&&M.contains(N)&&M.contains(ie))),(0,Mn.R)(this._destroyed$)).subscribe(({type:N})=>this._ngZone.run(()=>this._service.set({focusVisible:"focusin"===N})))})}ngOnDestroy(){this._destroyed$.next()}ngOnInit(){if(void 0===this.model){const r={};["dayTemplateData","displayMonths","markDisabled","firstDayOfWeek","navigation","minDate","maxDate","outsideDays","weekdays"].forEach(p=>r[p]=this[p]),this._service.set(r),this.navigateTo(this.startDate)}this.dayTemplate||(this.dayTemplate=this._defaultDayTemplate)}ngOnChanges(r){const p={};if(["dayTemplateData","displayMonths","markDisabled","firstDayOfWeek","navigation","minDate","maxDate","outsideDays","weekdays"].filter(M=>M in r).forEach(M=>p[M]=this[M]),this._service.set(p),"startDate"in r){const{currentValue:M,previousValue:N}=r.startDate;Ff(N,M)&&this.navigateTo(this.startDate)}}onDateSelect(r){this._service.focus(r),this._service.select(r,{emitEvent:!0})}onNavigateDateSelect(r){this._service.open(r)}onNavigateEvent(r){switch(r){case xc.PREV:this._service.open(this._calendar.getPrev(this.model.firstDate,"m",1));break;case xc.NEXT:this._service.open(this._calendar.getNext(this.model.firstDate,"m",1))}}registerOnChange(r){this.onChange=r}registerOnTouched(r){this.onTouched=r}setDisabledState(r){this._service.set({disabled:r})}writeValue(r){this._controlValue=Kr.from(this._ngbDateAdapter.fromModel(r)),this._service.select(this._controlValue)}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(od),a.Y36(sd),a.Y36(Ml),a.Y36(Bf),a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(hu),a.Y36(a.R0b))},c.\u0275cmp=a.Xpm({type:c,selectors:[["ngb-datepicker"]],contentQueries:function(r,p,M){if(1&r&&a.Suo(M,kf,7),2&r){let N;a.iGM(N=a.CRH())&&(p.contentTemplate=N.first)}},viewQuery:function(r,p){if(1&r&&(a.Gf(wg,7),a.Gf(Np,7)),2&r){let M;a.iGM(M=a.CRH())&&(p._defaultDayTemplate=M.first),a.iGM(M=a.CRH())&&(p._contentEl=M.first)}},hostVars:2,hostBindings:function(r,p){2&r&&a.ekj("disabled",p.model.disabled)},inputs:{dayTemplate:"dayTemplate",dayTemplateData:"dayTemplateData",displayMonths:"displayMonths",firstDayOfWeek:"firstDayOfWeek",footerTemplate:"footerTemplate",markDisabled:"markDisabled",maxDate:"maxDate",minDate:"minDate",navigation:"navigation",outsideDays:"outsideDays",showWeekNumbers:"showWeekNumbers",startDate:"startDate",weekdays:"weekdays"},outputs:{navigate:"navigate",dateSelect:"dateSelect"},exportAs:["ngbDatepicker"],standalone:!0,features:[a._Bn([{provide:Wn,useExisting:(0,a.Gpc)(()=>c),multi:!0},od]),a.TTD,a.jDz],decls:10,vars:5,consts:[["defaultDayTemplate",""],["defaultContentTemplate",""],[1,"ngb-dp-header"],[3,"date","months","disabled","showSelect","prevDisabled","nextDisabled","selectBoxes","navigate","select",4,"ngIf"],[1,"ngb-dp-content"],["content",""],[3,"ngTemplateOutlet"],["ngbDatepickerDayView","",3,"date","currentMonth","selected","disabled","focused"],["class","ngb-dp-month",4,"ngFor","ngForOf"],[1,"ngb-dp-month"],["class","ngb-dp-month-name",4,"ngIf"],[3,"month"],[1,"ngb-dp-month-name"],[3,"date","months","disabled","showSelect","prevDisabled","nextDisabled","selectBoxes","navigate","select"]],template:function(r,p){if(1&r&&(a.YNc(0,Rg,1,5,"ng-template",null,0,a.W1O),a.YNc(2,ff,1,1,"ng-template",null,1,a.W1O),a.TgZ(4,"div",2),a.YNc(5,Fp,1,7,"ngb-datepicker-navigation",3),a.qZA(),a.TgZ(6,"div",4,5),a.YNc(8,pf,0,0,"ng-template",6),a.qZA(),a.YNc(9,Zs,0,0,"ng-template",6)),2&r){const M=a.MAs(3);a.xp6(5),a.Q6J("ngIf","none"!==p.navigation),a.xp6(1),a.ekj("ngb-dp-months",!p.contentTemplate),a.xp6(2),a.Q6J("ngTemplateOutlet",(null==p.contentTemplate?null:p.contentTemplate.templateRef)||M),a.xp6(1),a.Q6J("ngTemplateOutlet",p.footerTemplate)}},dependencies:[lt.O5,lt.ax,lt.tP,fm,ad,a_],styles:["ngb-datepicker{border:1px solid var(--bs-border-color);border-radius:.25rem;display:inline-block}ngb-datepicker-month{pointer-events:auto}ngb-datepicker.dropdown-menu{padding:0}ngb-datepicker.disabled .ngb-dp-weekday,ngb-datepicker.disabled .ngb-dp-week-number,ngb-datepicker.disabled .ngb-dp-month-name{color:var(--bs-text-muted)}.ngb-dp-body{z-index:1055}.ngb-dp-header{border-bottom:0;border-radius:.25rem .25rem 0 0;padding-top:.25rem;background-color:var(--bs-light)}.ngb-dp-months{display:flex}.ngb-dp-month{pointer-events:none}.ngb-dp-month-name{font-size:larger;height:2rem;line-height:2rem;text-align:center;background-color:var(--bs-light)}.ngb-dp-month+.ngb-dp-month .ngb-dp-month-name,.ngb-dp-month+.ngb-dp-month .ngb-dp-week{padding-left:1rem}.ngb-dp-month:last-child .ngb-dp-week{padding-right:.25rem}.ngb-dp-month:first-child .ngb-dp-week{padding-left:.25rem}.ngb-dp-month .ngb-dp-week:last-child{padding-bottom:.25rem}\n"],encapsulation:2,changeDetection:0}),c})();typeof navigator<"u"&&navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));const mm=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function fh(c){const f=Array.from(c.querySelectorAll(mm)).filter(r=>-1!==r.tabIndex);return[f[0],f[f.length-1]]}new Date(1882,10,12),new Date(2174,10,25);let Ql=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=a.oAB({type:c}),c.\u0275inj=a.cJS({imports:[dh,ad]}),c})(),Tu=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=a.oAB({type:c}),c.\u0275inj=a.cJS({}),c})();class Da{constructor(f,r,p){this.nodes=f,this.viewRef=r,this.componentRef=p}}let Xf=(()=>{class c{constructor(r,p){this._el=r,this._zone=p}ngOnInit(){this._zone.onStable.asObservable().pipe((0,Ci.q)(1)).subscribe(()=>{Rs(this._zone,this._el.nativeElement,(r,p)=>{p&&uu(r),r.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return Rs(this._zone,this._el.nativeElement,({classList:r})=>r.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(a.SBq),a.Y36(a.R0b))},c.\u0275cmp=a.Xpm({type:c,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(r,p){2&r&&(a.Tol("modal-backdrop"+(p.backdropClass?" "+p.backdropClass:"")),a.ekj("show",!p.animation)("fade",p.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},standalone:!0,features:[a.jDz],decls:0,vars:0,template:function(r,p){},encapsulation:2}),c})();class Mu{close(f){}dismiss(f){}}class R_{constructor(f,r,p,M){this._windowCmptRef=f,this._contentRef=r,this._backdropCmptRef=p,this._beforeDismiss=M,this._closed=new xe.x,this._dismissed=new xe.x,this._hidden=new xe.x,f.instance.dismissEvent.subscribe(N=>{this.dismiss(N)}),this.result=new Promise((N,ie)=>{this._resolve=N,this._reject=ie}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe((0,Mn.R)(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe((0,Mn.R)(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(f){this._windowCmptRef&&(this._closed.next(f),this._resolve(f),this._removeModalElements())}_dismiss(f){this._dismissed.next(f),this._reject(f),this._removeModalElements()}dismiss(f){if(this._windowCmptRef)if(this._beforeDismiss){const r=this._beforeDismiss();!function Jg(c){return c&&c.then}(r)?!1!==r&&this._dismiss(f):r.then(p=>{!1!==p&&this._dismiss(f)},()=>{})}else this._dismiss(f)}_removeModalElements(){const f=this._windowCmptRef.instance.hide(),r=this._backdropCmptRef?this._backdropCmptRef.instance.hide():(0,Se.of)(void 0);f.subscribe(()=>{const{nativeElement:p}=this._windowCmptRef.location;p.parentNode.removeChild(p),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),r.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:p}=this._backdropCmptRef.location;p.parentNode.removeChild(p),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),tn(f,r).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var Ic=(()=>{return(c=Ic||(Ic={}))[c.BACKDROP_CLICK=0]="BACKDROP_CLICK",c[c.ESC=1]="ESC",Ic;var c})();let xh=(()=>{class c{constructor(r,p,M){this._document=r,this._elRef=p,this._zone=M,this._closed$=new xe.x,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new a.vpe,this.shown=new xe.x,this.hidden=new xe.x}get fullscreenClass(){return!0===this.fullscreen?" modal-fullscreen":Zl(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(r){this.dismissEvent.emit(r)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe((0,Ci.q)(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:r}=this._elRef,p={animation:this.animation,runningTransition:"stop"},ie=tn(Rs(this._zone,r,()=>r.classList.remove("show"),p),Rs(this._zone,this._dialogEl.nativeElement,()=>{},p));return ie.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),ie}_show(){const r={animation:this.animation,runningTransition:"continue"};tn(Rs(this._zone,this._elRef.nativeElement,(N,ie)=>{ie&&uu(N),N.classList.add("show")},r),Rs(this._zone,this._dialogEl.nativeElement,()=>{},r)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:r}=this._elRef;this._zone.runOutsideAngular(()=>{ze(r,"keydown").pipe((0,Mn.R)(this._closed$),(0,xr.h)(M=>M.which===yi.Escape)).subscribe(M=>{this.keyboard?requestAnimationFrame(()=>{M.defaultPrevented||this._zone.run(()=>this.dismiss(Ic.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let p=!1;ze(this._dialogEl.nativeElement,"mousedown").pipe((0,Mn.R)(this._closed$),(0,Li.b)(()=>p=!1),(0,po.w)(()=>ze(r,"mouseup").pipe((0,Mn.R)(this._closed$),(0,Ci.q)(1))),(0,xr.h)(({target:M})=>r===M)).subscribe(()=>{p=!0}),ze(r,"click").pipe((0,Mn.R)(this._closed$)).subscribe(({target:M})=>{r===M&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!p&&this._zone.run(()=>this.dismiss(Ic.BACKDROP_CLICK))),p=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:r}=this._elRef;if(!r.contains(document.activeElement)){const p=r.querySelector("[ngbAutofocus]"),M=fh(r)[0];(p||M||r).focus()}}_restoreFocus(){const r=this._document.body,p=this._elWithFocus;let M;M=p&&p.focus&&r.contains(p)?p:r,this._zone.runOutsideAngular(()=>{setTimeout(()=>M.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&Rs(this._zone,this._elRef.nativeElement,({classList:r})=>(r.add("modal-static"),()=>r.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(lt.K0),a.Y36(a.SBq),a.Y36(a.R0b))},c.\u0275cmp=a.Xpm({type:c,selectors:[["ngb-modal-window"]],viewQuery:function(r,p){if(1&r&&a.Gf(Xu,7),2&r){let M;a.iGM(M=a.CRH())&&(p._dialogEl=M.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(r,p){2&r&&(a.uIk("aria-modal",!0)("aria-labelledby",p.ariaLabelledBy)("aria-describedby",p.ariaDescribedBy),a.Tol("modal d-block"+(p.windowClass?" "+p.windowClass:"")),a.ekj("fade",p.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},standalone:!0,features:[a.jDz],ngContentSelectors:Jd,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(r,p){1&r&&(a.F$t(),a.TgZ(0,"div",0,1)(2,"div",2),a.Hsn(3),a.qZA()()),2&r&&a.Tol("modal-dialog"+(p.size?" modal-"+p.size:"")+(p.centered?" modal-dialog-centered":"")+p.fullscreenClass+(p.scrollable?" modal-dialog-scrollable":"")+(p.modalDialogClass?" "+p.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}\n"],encapsulation:2}),c})(),Qf=(()=>{class c{constructor(r){this._document=r}hide(){const r=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),p=this._document.body,M=p.style,{overflow:N,paddingRight:ie}=M;if(r>0){const he=parseFloat(window.getComputedStyle(p).paddingRight);M.paddingRight=`${he+r}px`}return M.overflow="hidden",()=>{r>0&&(M.paddingRight=ie),M.overflow=N}}}return c.\u0275fac=function(r){return new(r||c)(a.LFG(lt.K0))},c.\u0275prov=a.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),Pc=(()=>{class c{constructor(r,p,M,N,ie,he,me){this._applicationRef=r,this._injector=p,this._environmentInjector=M,this._document=N,this._scrollBar=ie,this._rendererFactory=he,this._ngZone=me,this._activeWindowCmptHasChanged=new xe.x,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._backdropAttributes=["animation","backdropClass"],this._modalRefs=[],this._windowAttributes=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","scrollable","size","windowClass","modalDialogClass"],this._windowCmpts=[],this._activeInstances=new a.vpe,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const De=this._windowCmpts[this._windowCmpts.length-1];((c,f,r,p=!1)=>{c.runOutsideAngular(()=>{const M=ze(f,"focusin").pipe((0,Mn.R)(r),(0,Qi.U)(N=>N.target));ze(f,"keydown").pipe((0,Mn.R)(r),(0,xr.h)(N=>N.which===yi.Tab),wr(M)).subscribe(([N,ie])=>{const[he,me]=fh(f);(ie===he||ie===f)&&N.shiftKey&&(me.focus(),N.preventDefault()),ie===me&&!N.shiftKey&&(he.focus(),N.preventDefault())}),p&&ze(f,"click").pipe((0,Mn.R)(r),wr(M),(0,Qi.U)(N=>N[1])).subscribe(N=>N.focus())})})(this._ngZone,De.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(De.location.nativeElement)}})}_restoreScrollBar(){const r=this._scrollBarRestoreFn;r&&(this._scrollBarRestoreFn=null,r())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(r,p,M){const N=M.container instanceof HTMLElement?M.container:cu(M.container)?this._document.querySelector(M.container):this._document.body,ie=this._rendererFactory.createRenderer(null,null);if(!N)throw new Error(`The specified modal container "${M.container||"body"}" was not found in the DOM.`);this._hideScrollBar();const he=new Mu,me=(r=M.injector||r).get(a.lqb,null)||this._environmentInjector,De=this._getContentRef(r,me,p,he,M);let Le=!1!==M.backdrop?this._attachBackdrop(N):void 0,Dt=this._attachWindowComponent(N,De.nodes),St=new R_(Dt,De,Le,M.beforeDismiss);return this._registerModalRef(St),this._registerWindowCmpt(Dt),St.hidden.pipe((0,Ci.q)(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(ie.removeClass(this._document.body,"modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),he.close=Jt=>{St.close(Jt)},he.dismiss=Jt=>{St.dismiss(Jt)},this._applyWindowOptions(Dt.instance,M),1===this._modalRefs.length&&ie.addClass(this._document.body,"modal-open"),Le&&Le.instance&&(this._applyBackdropOptions(Le.instance,M),Le.changeDetectorRef.detectChanges()),Dt.changeDetectorRef.detectChanges(),St}get activeInstances(){return this._activeInstances}dismissAll(r){this._modalRefs.forEach(p=>p.dismiss(r))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(r){let p=(0,a.LMc)(Xf,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(p.hostView),r.appendChild(p.location.nativeElement),p}_attachWindowComponent(r,p){let M=(0,a.LMc)(xh,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:p});return this._applicationRef.attachView(M.hostView),r.appendChild(M.location.nativeElement),M}_applyWindowOptions(r,p){this._windowAttributes.forEach(M=>{cu(p[M])&&(r[M]=p[M])})}_applyBackdropOptions(r,p){this._backdropAttributes.forEach(M=>{cu(p[M])&&(r[M]=p[M])})}_getContentRef(r,p,M,N,ie){return M?M instanceof a.Rgc?this._createFromTemplateRef(M,N):Zl(M)?this._createFromString(M):this._createFromComponent(r,p,M,N,ie):new Da([])}_createFromTemplateRef(r,p){const N=r.createEmbeddedView({$implicit:p,close(ie){p.close(ie)},dismiss(ie){p.dismiss(ie)}});return this._applicationRef.attachView(N),new Da([N.rootNodes],N)}_createFromString(r){const p=this._document.createTextNode(`${r}`);return new Da([[p]])}_createFromComponent(r,p,M,N,ie){const he=a.zs3.create({providers:[{provide:Mu,useValue:N}],parent:r}),me=(0,a.LMc)(M,{environmentInjector:p,elementInjector:he}),De=me.location.nativeElement;return ie.scrollable&&De.classList.add("component-host-scrollable"),this._applicationRef.attachView(me.hostView),new Da([[De]],me.hostView,me)}_setAriaHidden(r){const p=r.parentElement;p&&r!==this._document.body&&(Array.from(p.children).forEach(M=>{M!==r&&"SCRIPT"!==M.nodeName&&(this._ariaHiddenValues.set(M,M.getAttribute("aria-hidden")),M.setAttribute("aria-hidden","true"))}),this._setAriaHidden(p))}_revertAriaHidden(){this._ariaHiddenValues.forEach((r,p)=>{r?p.setAttribute("aria-hidden",r):p.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(r){const p=()=>{const M=this._modalRefs.indexOf(r);M>-1&&(this._modalRefs.splice(M,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(r),this._activeInstances.emit(this._modalRefs),r.result.then(p,p)}_registerWindowCmpt(r){this._windowCmpts.push(r),this._activeWindowCmptHasChanged.next(),r.onDestroy(()=>{const p=this._windowCmpts.indexOf(r);p>-1&&(this._windowCmpts.splice(p,1),this._activeWindowCmptHasChanged.next())})}}return c.\u0275fac=function(r){return new(r||c)(a.LFG(a.z2F),a.LFG(a.zs3),a.LFG(a.lqb),a.LFG(lt.K0),a.LFG(Qf),a.LFG(a.FYo),a.LFG(a.R0b))},c.\u0275prov=a.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),Em=(()=>{class c{constructor(r){this._ngbConfig=r,this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(r){this._animation=r}}return c.\u0275fac=function(r){return new(r||c)(a.LFG(zo))},c.\u0275prov=a.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),Am=(()=>{class c{constructor(r,p,M){this._injector=r,this._modalStack=p,this._config=M}open(r,p={}){const M={...this._config,animation:this._config.animation,...p};return this._modalStack.open(this._injector,r,M)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(r){this._modalStack.dismissAll(r)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return c.\u0275fac=function(r){return new(r||c)(a.LFG(a.zs3),a.LFG(Pc),a.LFG(Em))},c.\u0275prov=a.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),Dh=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=a.oAB({type:c}),c.\u0275inj=a.cJS({providers:[Am]}),c})();const Sh=({classList:c})=>(c.remove("show"),()=>c.remove("active")),Ch=(c,f)=>{f&&uu(c),c.classList.add("show")};let Lc=(()=>{class c{constructor(r){this.elRef=r}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(a.SBq))},c.\u0275dir=a.lG2({type:c,selectors:[["","ngbNavPane",""]],hostAttrs:[1,"tab-pane"],hostVars:5,hostBindings:function(r,p){2&r&&(a.Ikx("id",p.item.panelDomId),a.uIk("role",p.role?p.role:p.nav.roles?"tabpanel":void 0)("aria-labelledby",p.item.domId),a.ekj("fade",p.nav.animation))},inputs:{item:"item",nav:"nav",role:"role"},standalone:!0}),c})(),Eh=(()=>{class c{constructor(r,p){this._cd=r,this._ngZone=p,this._activePane=null}isPanelTransitioning(r){return this._activePane?.item===r}ngAfterViewInit(){this._updateActivePane(),this.nav.navItemChange$.pipe((0,Mn.R)(this.nav.destroy$),(0,ha.O)(this._activePane?.item||null),Dr(),function Vt(c){return(0,xr.h)((f,r)=>c<=r)}(1)).subscribe(r=>{const p={animation:this.nav.animation,runningTransition:"stop"};this._cd.detectChanges(),this._activePane?Rs(this._ngZone,this._activePane.elRef.nativeElement,Sh,p).subscribe(()=>{const M=this._activePane?.item;this._activePane=this._getPaneForItem(r),this._cd.markForCheck(),this._activePane&&(this._activePane.elRef.nativeElement.classList.add("active"),Rs(this._ngZone,this._activePane.elRef.nativeElement,Ch,p).subscribe(()=>{r&&(r.shown.emit(),this.nav.shown.emit(r.id))})),M&&(M.hidden.emit(),this.nav.hidden.emit(M.id))}):this._updateActivePane()})}_updateActivePane(){this._activePane=this._getActivePane(),this._activePane?.elRef.nativeElement.classList.add("show"),this._activePane?.elRef.nativeElement.classList.add("active")}_getPaneForItem(r){return this._panes&&this._panes.find(p=>p.item===r)||null}_getActivePane(){return this._panes&&this._panes.find(r=>r.item.active)||null}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(a.sBO),a.Y36(a.R0b))},c.\u0275cmp=a.Xpm({type:c,selectors:[["","ngbNavOutlet",""]],viewQuery:function(r,p){if(1&r&&a.Gf(Lc,5),2&r){let M;a.iGM(M=a.CRH())&&(p._panes=M)}},hostVars:2,hostBindings:function(r,p){2&r&&a.ekj("tab-content",!0)},inputs:{paneRole:"paneRole",nav:["ngbNavOutlet","nav"]},standalone:!0,features:[a.jDz],attrs:Lp,decls:1,vars:1,consts:[["ngFor","",3,"ngForOf"],["ngbNavPane","",3,"item","nav","role",4,"ngIf"],["ngbNavPane","",3,"item","nav","role"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(r,p){1&r&&a.YNc(0,Eg,1,1,"ng-template",0),2&r&&a.Q6J("ngForOf",p.nav.items)},dependencies:[Lc,lt.ax,lt.O5,lt.tP],encapsulation:2,changeDetection:0}),c})(),Om=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=a.oAB({type:c}),c.\u0275inj=a.cJS({imports:[Eh]}),c})(),Co=(()=>{class c{constructor(){this.disabled=!1,this.boundaryLinks=!1,this.directionLinks=!0,this.ellipses=!0,this.maxSize=0,this.pageSize=10,this.rotate=!1}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275prov=a.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),ep=(()=>{class c{constructor(r){this.templateRef=r}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(a.Rgc))},c.\u0275dir=a.lG2({type:c,selectors:[["ng-template","ngbPaginationEllipsis",""]],standalone:!0}),c})(),Ih=(()=>{class c{constructor(r){this.templateRef=r}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(a.Rgc))},c.\u0275dir=a.lG2({type:c,selectors:[["ng-template","ngbPaginationFirst",""]],standalone:!0}),c})(),Ph=(()=>{class c{constructor(r){this.templateRef=r}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(a.Rgc))},c.\u0275dir=a.lG2({type:c,selectors:[["ng-template","ngbPaginationLast",""]],standalone:!0}),c})(),Oh=(()=>{class c{constructor(r){this.templateRef=r}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(a.Rgc))},c.\u0275dir=a.lG2({type:c,selectors:[["ng-template","ngbPaginationNext",""]],standalone:!0}),c})(),pd=(()=>{class c{constructor(r){this.templateRef=r}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(a.Rgc))},c.\u0275dir=a.lG2({type:c,selectors:[["ng-template","ngbPaginationNumber",""]],standalone:!0}),c})(),ms=(()=>{class c{constructor(r){this.templateRef=r}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(a.Rgc))},c.\u0275dir=a.lG2({type:c,selectors:[["ng-template","ngbPaginationPrevious",""]],standalone:!0}),c})(),tp=(()=>{class c{constructor(r){this.templateRef=r}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(a.Rgc))},c.\u0275dir=a.lG2({type:c,selectors:[["ng-template","ngbPaginationPages",""]],standalone:!0}),c})(),np=(()=>{class c{constructor(r){this.pageCount=0,this.pages=[],this.page=1,this.pageChange=new a.vpe(!0),this.disabled=r.disabled,this.boundaryLinks=r.boundaryLinks,this.directionLinks=r.directionLinks,this.ellipses=r.ellipses,this.maxSize=r.maxSize,this.pageSize=r.pageSize,this.rotate=r.rotate,this.size=r.size}hasPrevious(){return this.page>1}hasNext(){return this.page<this.pageCount}nextDisabled(){return!this.hasNext()||this.disabled}previousDisabled(){return!this.hasPrevious()||this.disabled}selectPage(r){this._updatePages(r)}ngOnChanges(r){this._updatePages(this.page)}isEllipsis(r){return-1===r}_applyEllipses(r,p){this.ellipses&&(r>0&&(r>2?this.pages.unshift(-1):2===r&&this.pages.unshift(2),this.pages.unshift(1)),p<this.pageCount&&(p<this.pageCount-2?this.pages.push(-1):p===this.pageCount-2&&this.pages.push(this.pageCount-1),this.pages.push(this.pageCount)))}_applyRotation(){let r=0,p=this.pageCount,M=Math.floor(this.maxSize/2);return this.page<=M?p=this.maxSize:this.pageCount-this.page<M?r=this.pageCount-this.maxSize:(r=this.page-M-1,p=this.page+(this.maxSize%2==0?M-1:M)),[r,p]}_applyPagination(){let p=(Math.ceil(this.page/this.maxSize)-1)*this.maxSize;return[p,p+this.maxSize]}_setPageInRange(r){const p=this.page;this.page=eh(r,this.pageCount,1),this.page!==p&&Nr(this.collectionSize)&&this.pageChange.emit(this.page)}_updatePages(r){this.pageCount=Math.ceil(this.collectionSize/this.pageSize),Nr(this.pageCount)||(this.pageCount=0),this.pages.length=0;for(let p=1;p<=this.pageCount;p++)this.pages.push(p);if(this._setPageInRange(r),this.maxSize>0&&this.pageCount>this.maxSize){let p=0,M=this.pageCount;[p,M]=this.rotate?this._applyRotation():this._applyPagination(),this.pages=this.pages.slice(p,M),this._applyEllipses(p,M)}}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(Co))},c.\u0275cmp=a.Xpm({type:c,selectors:[["ngb-pagination"]],contentQueries:function(r,p,M){if(1&r&&(a.Suo(M,ep,5),a.Suo(M,Ih,5),a.Suo(M,Ph,5),a.Suo(M,Oh,5),a.Suo(M,pd,5),a.Suo(M,ms,5),a.Suo(M,tp,5)),2&r){let N;a.iGM(N=a.CRH())&&(p.tplEllipsis=N.first),a.iGM(N=a.CRH())&&(p.tplFirst=N.first),a.iGM(N=a.CRH())&&(p.tplLast=N.first),a.iGM(N=a.CRH())&&(p.tplNext=N.first),a.iGM(N=a.CRH())&&(p.tplNumber=N.first),a.iGM(N=a.CRH())&&(p.tplPrevious=N.first),a.iGM(N=a.CRH())&&(p.tplPages=N.first)}},hostAttrs:["role","navigation"],inputs:{disabled:"disabled",boundaryLinks:"boundaryLinks",directionLinks:"directionLinks",ellipses:"ellipses",rotate:"rotate",collectionSize:"collectionSize",maxSize:"maxSize",page:"page",pageSize:"pageSize",size:"size"},outputs:{pageChange:"pageChange"},standalone:!0,features:[a.TTD,a.jDz],decls:20,vars:12,consts:function(){let f,r,p,M,N,ie,he,me;return f=$localize`:@@ngb.pagination.first:««`,r=$localize`:@@ngb.pagination.previous:«`,p=$localize`:@@ngb.pagination.next:»`,M=$localize`:@@ngb.pagination.last:»»`,N=$localize`:@@ngb.pagination.first-aria:First`,ie=$localize`:@@ngb.pagination.previous-aria:Previous`,he=$localize`:@@ngb.pagination.next-aria:Next`,me=$localize`:@@ngb.pagination.last-aria:Last`,[["first",""],["previous",""],["next",""],["last",""],["ellipsis",""],["defaultNumber",""],["defaultPages",""],["class","page-item",3,"disabled",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["aria-hidden","true"],f,r,p,M,["class","visually-hidden",4,"ngIf"],[1,"visually-hidden"],["class","page-item",3,"active","disabled",4,"ngFor","ngForOf"],[1,"page-item"],["class","page-link","tabindex","-1","aria-disabled","true",4,"ngIf"],["class","page-link","href","",3,"click",4,"ngIf"],["tabindex","-1","aria-disabled","true",1,"page-link"],["href","",1,"page-link",3,"click"],["aria-label",N,"href","",1,"page-link",3,"click"],["aria-label",ie,"href","",1,"page-link",3,"click"],["aria-label",he,"href","",1,"page-link",3,"click"],["aria-label",me,"href","",1,"page-link",3,"click"]]},template:function(r,p){if(1&r&&(a.YNc(0,kp,2,0,"ng-template",null,0,a.W1O),a.YNc(2,Ag,2,0,"ng-template",null,1,a.W1O),a.YNc(4,Gp,2,0,"ng-template",null,2,a.W1O),a.YNc(6,Ig,2,0,"ng-template",null,3,a.W1O),a.YNc(8,Pg,1,0,"ng-template",null,4,a.W1O),a.YNc(10,gf,2,2,"ng-template",null,5,a.W1O),a.YNc(12,lu,1,1,"ng-template",null,6,a.W1O),a.TgZ(14,"ul"),a.YNc(15,Lg,3,9,"li",7),a.YNc(16,jg,3,8,"li",7),a.YNc(17,kg,0,0,"ng-template",8),a.YNc(18,Vg,3,9,"li",7),a.YNc(19,Up,3,9,"li",7),a.qZA()),2&r){const M=a.MAs(13);a.xp6(14),a.Tol("pagination"+(p.size?" pagination-"+p.size:"")),a.xp6(1),a.Q6J("ngIf",p.boundaryLinks),a.xp6(1),a.Q6J("ngIf",p.directionLinks),a.xp6(1),a.Q6J("ngTemplateOutlet",(null==p.tplPages?null:p.tplPages.templateRef)||M)("ngTemplateOutletContext",a.kEZ(8,Tf,p.page,p.pages,p.disabled)),a.xp6(1),a.Q6J("ngIf",p.directionLinks),a.xp6(1),a.Q6J("ngIf",p.boundaryLinks)}},dependencies:[lt.O5,lt.ax,lt.tP],encapsulation:2,changeDetection:0}),c})(),Nh=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=a.oAB({type:c}),c.\u0275inj=a.cJS({imports:[np]}),c})(),E_=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=a.oAB({type:c}),c.\u0275inj=a.cJS({}),c})(),Za=(()=>{class c{constructor(){this.max=100,this.animated=!1,this.ariaLabel="progress bar",this.striped=!1,this.showValue=!1}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275prov=a.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),la=(()=>{class c{constructor(r){this.value=0,this.max=r.max,this.animated=r.animated,this.ariaLabel=r.ariaLabel,this.striped=r.striped,this.textType=r.textType,this.type=r.type,this.showValue=r.showValue,this.height=r.height}set max(r){this._max=!Nr(r)||r<=0?100:r}get max(){return this._max}getValue(){return eh(this.value,this.max)}getPercentValue(){return 100*this.getValue()/this.max}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(Za))},c.\u0275cmp=a.Xpm({type:c,selectors:[["ngb-progressbar"]],hostAttrs:["role","progressbar","aria-valuemin","0",1,"progress"],hostVars:5,hostBindings:function(r,p){2&r&&(a.uIk("aria-valuenow",p.getValue())("aria-valuemax",p.max)("aria-label",p.ariaLabel),a.Udp("height",p.height))},inputs:{max:"max",animated:"animated",ariaLabel:"ariaLabel",striped:"striped",showValue:"showValue",textType:"textType",type:"type",value:"value",height:"height"},standalone:!0,features:[a.jDz],ngContentSelectors:Jd,decls:3,vars:11,consts:function(){let f;return f=$localize`:@@ngb.progressbar.value:${"\ufffd0\ufffd"}:INTERPOLATION:`,[[4,"ngIf"],f]},template:function(r,p){1&r&&(a.F$t(),a.TgZ(0,"div"),a.YNc(1,Hg,3,3,"span",0),a.Hsn(2),a.qZA()),2&r&&(a.MT6("progress-bar",p.type?p.textType?" bg-"+p.type:" text-bg-"+p.type:"","",p.textType?" text-"+p.textType:"",""),a.Udp("width",p.getPercentValue(),"%"),a.ekj("progress-bar-animated",p.animated)("progress-bar-striped",p.striped),a.xp6(1),a.Q6J("ngIf",p.showValue))},dependencies:[lt.O5,lt.Zx],encapsulation:2,changeDetection:0}),c})(),Lh=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=a.oAB({type:c}),c.\u0275inj=a.cJS({imports:[la]}),c})(),sp=(()=>{class c{constructor(){this.max=10,this.readonly=!1,this.resettable=!1,this.tabindex=0}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275prov=a.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),Bh=(()=>{class c{constructor(r,p){this._changeDetectorRef=p,this.contexts=[],this.disabled=!1,this.hover=new a.vpe,this.leave=new a.vpe,this.rateChange=new a.vpe(!0),this.onChange=M=>{},this.onTouched=()=>{},this.max=r.max,this.readonly=r.readonly,this.tabindex=r.tabindex}ariaValueText(r,p){return`${r} out of ${p}`}isInteractive(){return!this.readonly&&!this.disabled}enter(r){this.isInteractive()&&this._updateState(r),this.hover.emit(r)}handleBlur(){this.onTouched()}handleClick(r){this.isInteractive()&&this.update(this.resettable&&this.rate===r?0:r)}handleKeyDown(r){switch(r.which){case yi.ArrowDown:case yi.ArrowLeft:this.update(this.rate-1);break;case yi.ArrowUp:case yi.ArrowRight:this.update(this.rate+1);break;case yi.Home:this.update(0);break;case yi.End:this.update(this.max);break;default:return}r.preventDefault()}ngOnChanges(r){r.rate&&this.update(this.rate),r.max&&this._updateMax()}ngOnInit(){this._setupContexts(),this._updateState(this.rate)}registerOnChange(r){this.onChange=r}registerOnTouched(r){this.onTouched=r}reset(){this.leave.emit(this.nextRate),this._updateState(this.rate)}setDisabledState(r){this.disabled=r}update(r,p=!0){const M=eh(r,this.max,0);this.isInteractive()&&this.rate!==M&&(this.rate=M,this.rateChange.emit(this.rate)),p&&(this.onChange(this.rate),this.onTouched()),this._updateState(this.rate)}writeValue(r){this.update(r,!1),this._changeDetectorRef.markForCheck()}_updateState(r){this.nextRate=r,this.contexts.forEach((p,M)=>p.fill=Math.round(100*eh(r-M,1,0)))}_updateMax(){this.max>0&&(this._setupContexts(),this.update(this.rate))}_setupContexts(){this.contexts=Array.from({length:this.max},(r,p)=>({fill:0,index:p}))}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(sp),a.Y36(a.sBO))},c.\u0275cmp=a.Xpm({type:c,selectors:[["ngb-rating"]],contentQueries:function(r,p,M){if(1&r&&a.Suo(M,a.Rgc,5),2&r){let N;a.iGM(N=a.CRH())&&(p.starTemplateFromContent=N.first)}},hostAttrs:["role","slider","aria-valuemin","0",1,"d-inline-flex"],hostVars:5,hostBindings:function(r,p){1&r&&a.NdJ("blur",function(){return p.handleBlur()})("keydown",function(N){return p.handleKeyDown(N)})("mouseleave",function(){return p.reset()}),2&r&&(a.Ikx("tabindex",p.disabled?-1:p.tabindex),a.uIk("aria-valuemax",p.max)("aria-valuenow",p.nextRate)("aria-valuetext",p.ariaValueText(p.nextRate,p.max))("aria-disabled",!!p.readonly||null))},inputs:{max:"max",rate:"rate",readonly:"readonly",resettable:"resettable",starTemplate:"starTemplate",tabindex:"tabindex",ariaValueText:"ariaValueText"},outputs:{hover:"hover",leave:"leave",rateChange:"rateChange"},standalone:!0,features:[a._Bn([{provide:Wn,useExisting:(0,a.Gpc)(()=>c),multi:!0}]),a.TTD,a.jDz],decls:3,vars:1,consts:[["t",""],["ngFor","",3,"ngForOf"],[1,"visually-hidden"],[3,"mouseenter","click"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(r,p){1&r&&(a.YNc(0,zp,1,1,"ng-template",null,0,a.W1O),a.YNc(2,bc,4,5,"ng-template",1)),2&r&&(a.xp6(2),a.Q6J("ngForOf",p.contexts))},dependencies:[lt.ax,lt.tP],encapsulation:2,changeDetection:0}),c})(),md=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=a.oAB({type:c}),c.\u0275inj=a.cJS({imports:[Bh]}),c})();class jh{constructor(f,r,p){this.hour=Ks(f),this.minute=Ks(r),this.second=Ks(p)}changeHour(f=1){this.updateHour((isNaN(this.hour)?0:this.hour)+f)}updateHour(f){this.hour=Nr(f)?(f<0?24+f:f)%24:NaN}changeMinute(f=1){this.updateMinute((isNaN(this.minute)?0:this.minute)+f)}updateMinute(f){Nr(f)?(this.minute=f%60<0?60+f%60:f%60,this.changeHour(Math.floor(f/60))):this.minute=NaN}changeSecond(f=1){this.updateSecond((isNaN(this.second)?0:this.second)+f)}updateSecond(f){Nr(f)?(this.second=f<0?60+f%60:f%60,this.changeMinute(Math.floor(f/60))):this.second=NaN}isValid(f=!0){return Nr(this.hour)&&Nr(this.minute)&&(!f||Nr(this.second))}toString(){return`${this.hour||0}:${this.minute||0}:${this.second||0}`}}let op=(()=>{class c{constructor(){this.meridian=!1,this.spinners=!0,this.seconds=!1,this.hourStep=1,this.minuteStep=1,this.secondStep=1,this.disabled=!1,this.readonlyInputs=!1,this.size="medium"}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275prov=a.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),gd=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275prov=a.Yz7({token:c,factory:function(){return function A_(){return new I_}()},providedIn:"root"}),c})(),I_=(()=>{class c extends gd{fromModel(r){return r&&dr(r.hour)&&dr(r.minute)?{hour:r.hour,minute:r.minute,second:dr(r.second)?r.second:null}:null}toModel(r){return r&&dr(r.hour)&&dr(r.minute)?{hour:r.hour,minute:r.minute,second:dr(r.second)?r.second:null}:null}}return c.\u0275fac=function(){let f;return function(p){return(f||(f=a.n5z(c)))(p||c)}}(),c.\u0275prov=a.Yz7({token:c,factory:c.\u0275fac}),c})(),_d=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275prov=a.Yz7({token:c,factory:function(r){let p=null;return p=r?new r:function P_(c){return new tc(c)}(a.LFG(a.soG)),p},providedIn:"root"}),c})(),tc=(()=>{class c extends _d{constructor(r){super(),this._periods=(0,lt.ol)(r,lt.x.Standalone,lt.Tn.Narrow)}getMorningPeriod(){return this._periods[0]}getAfternoonPeriod(){return this._periods[1]}}return c.\u0275fac=function(r){return new(r||c)(a.LFG(a.soG))},c.\u0275prov=a.Yz7({token:c,factory:c.\u0275fac}),c})();const kh=/[^0-9]/g;let Fv=(()=>{class c{constructor(r,p,M,N){this._config=r,this._ngbTimeAdapter=p,this._cd=M,this.i18n=N,this.onChange=ie=>{},this.onTouched=()=>{},this.meridian=r.meridian,this.spinners=r.spinners,this.seconds=r.seconds,this.hourStep=r.hourStep,this.minuteStep=r.minuteStep,this.secondStep=r.secondStep,this.disabled=r.disabled,this.readonlyInputs=r.readonlyInputs,this.size=r.size}set hourStep(r){this._hourStep=dr(r)?r:this._config.hourStep}get hourStep(){return this._hourStep}set minuteStep(r){this._minuteStep=dr(r)?r:this._config.minuteStep}get minuteStep(){return this._minuteStep}set secondStep(r){this._secondStep=dr(r)?r:this._config.secondStep}get secondStep(){return this._secondStep}writeValue(r){const p=this._ngbTimeAdapter.fromModel(r);this.model=p?new jh(p.hour,p.minute,p.second):new jh,!this.seconds&&(!p||!Nr(p.second))&&(this.model.second=0),this._cd.markForCheck()}registerOnChange(r){this.onChange=r}registerOnTouched(r){this.onTouched=r}setDisabledState(r){this.disabled=r}changeHour(r){this.model?.changeHour(r),this.propagateModelChange()}changeMinute(r){this.model?.changeMinute(r),this.propagateModelChange()}changeSecond(r){this.model?.changeSecond(r),this.propagateModelChange()}updateHour(r){const p=!!this.model&&this.model.hour>=12,M=Ks(r);this.model?.updateHour(this.meridian&&(p&&M<12||!p&&12===M)?M+12:M),this.propagateModelChange()}updateMinute(r){this.model?.updateMinute(Ks(r)),this.propagateModelChange()}updateSecond(r){this.model?.updateSecond(Ks(r)),this.propagateModelChange()}toggleMeridian(){this.meridian&&this.changeHour(12)}formatInput(r){r.value=r.value.replace(kh,"")}formatHour(r){return Nr(r)?th(this.meridian?r%12==0?12:r%12:r%24):th(NaN)}formatMinSec(r){return th(Nr(r)?r:NaN)}handleBlur(){this.onTouched()}get isSmallSize(){return"small"===this.size}get isLargeSize(){return"large"===this.size}ngOnChanges(r){r.seconds&&!this.seconds&&this.model&&!Nr(this.model.second)&&(this.model.second=0,this.propagateModelChange(!1))}propagateModelChange(r=!0){r&&this.onTouched(),this.model?.isValid(this.seconds)?this.onChange(this._ngbTimeAdapter.toModel({hour:this.model.hour,minute:this.model.minute,second:this.model.second})):this.onChange(this._ngbTimeAdapter.toModel(null))}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(op),a.Y36(gd),a.Y36(a.sBO),a.Y36(_d))},c.\u0275cmp=a.Xpm({type:c,selectors:[["ngb-timepicker"]],inputs:{meridian:"meridian",spinners:"spinners",seconds:"seconds",hourStep:"hourStep",minuteStep:"minuteStep",secondStep:"secondStep",readonlyInputs:"readonlyInputs",size:"size"},exportAs:["ngbTimepicker"],standalone:!0,features:[a._Bn([{provide:Wn,useExisting:(0,a.Gpc)(()=>c),multi:!0}]),a.TTD,a.jDz],decls:16,vars:25,consts:function(){let f,r,p,M,N,ie,he,me,De,Le,Dt,St,Jt,Nn;return f=$localize`:@@ngb.timepicker.HH:HH`,r=$localize`:@@ngb.timepicker.hours:Hours`,p=$localize`:@@ngb.timepicker.MM:MM`,M=$localize`:@@ngb.timepicker.minutes:Minutes`,N=$localize`:@@ngb.timepicker.increment-hours:Increment hours`,ie=$localize`:@@ngb.timepicker.decrement-hours:Decrement hours`,he=$localize`:@@ngb.timepicker.increment-minutes:Increment minutes`,me=$localize`:@@ngb.timepicker.decrement-minutes:Decrement minutes`,De=$localize`:@@ngb.timepicker.SS:SS`,Le=$localize`:@@ngb.timepicker.seconds:Seconds`,Dt=$localize`:@@ngb.timepicker.increment-seconds:Increment seconds`,St=$localize`:@@ngb.timepicker.decrement-seconds:Decrement seconds`,Jt=$localize`:@@ngb.timepicker.PM:${"\ufffd0\ufffd"}:INTERPOLATION:`,Nn=$localize`:@@ngb.timepicker.AM:${"\ufffd0\ufffd"}:INTERPOLATION:`,[[3,"disabled"],[1,"ngb-tp"],[1,"ngb-tp-input-container","ngb-tp-hour"],["tabindex","-1","type","button","class","btn btn-link",3,"btn-sm","btn-lg","disabled","click",4,"ngIf"],["type","text","maxlength","2","inputmode","numeric","placeholder",f,"aria-label",r,1,"ngb-tp-input","form-control",3,"value","readOnly","disabled","change","blur","input","keydown.ArrowUp","keydown.ArrowDown"],[1,"ngb-tp-spacer"],[1,"ngb-tp-input-container","ngb-tp-minute"],["type","text","maxlength","2","inputmode","numeric","placeholder",p,"aria-label",M,1,"ngb-tp-input","form-control",3,"value","readOnly","disabled","change","blur","input","keydown.ArrowUp","keydown.ArrowDown"],["class","ngb-tp-spacer",4,"ngIf"],["class","ngb-tp-input-container ngb-tp-second",4,"ngIf"],["class","ngb-tp-meridian",4,"ngIf"],["tabindex","-1","type","button",1,"btn","btn-link",3,"disabled","click"],[1,"chevron","ngb-tp-chevron"],[1,"visually-hidden"],N,[1,"chevron","ngb-tp-chevron","bottom"],ie,he,me,[1,"ngb-tp-input-container","ngb-tp-second"],["type","text","maxlength","2","inputmode","numeric","placeholder",De,"aria-label",Le,1,"ngb-tp-input","form-control",3,"value","readOnly","disabled","change","blur","input","keydown.ArrowUp","keydown.ArrowDown"],Dt,St,[1,"ngb-tp-meridian"],["type","button",1,"btn","btn-outline-primary",3,"disabled","click"],[4,"ngIf","ngIfElse"],["am",""],Jt,Nn]},template:function(r,p){1&r&&(a.TgZ(0,"fieldset",0)(1,"div",1)(2,"div",2),a.YNc(3,$p,4,7,"button",3),a.TgZ(4,"input",4),a.NdJ("change",function(N){return p.updateHour(N.target.value)})("blur",function(){return p.handleBlur()})("input",function(N){return p.formatInput(N.target)})("keydown.ArrowUp",function(N){return p.changeHour(p.hourStep),N.preventDefault()})("keydown.ArrowDown",function(N){return p.changeHour(-p.hourStep),N.preventDefault()}),a.qZA(),a.YNc(5,Yp,4,7,"button",3),a.qZA(),a.TgZ(6,"div",5),a._uU(7,":"),a.qZA(),a.TgZ(8,"div",6),a.YNc(9,zg,4,7,"button",3),a.TgZ(10,"input",7),a.NdJ("change",function(N){return p.updateMinute(N.target.value)})("blur",function(){return p.handleBlur()})("input",function(N){return p.formatInput(N.target)})("keydown.ArrowUp",function(N){return p.changeMinute(p.minuteStep),N.preventDefault()})("keydown.ArrowDown",function(N){return p.changeMinute(-p.minuteStep),N.preventDefault()}),a.qZA(),a.YNc(11,fv,4,7,"button",3),a.qZA(),a.YNc(12,Kd,2,0,"div",8),a.YNc(13,Zp,4,9,"div",9),a.YNc(14,Kp,1,0,"div",8),a.YNc(15,qd,5,9,"div",10),a.qZA()()),2&r&&(a.ekj("disabled",p.disabled),a.Q6J("disabled",p.disabled),a.xp6(3),a.Q6J("ngIf",p.spinners),a.xp6(1),a.ekj("form-control-sm",p.isSmallSize)("form-control-lg",p.isLargeSize),a.Q6J("value",p.formatHour(null==p.model?null:p.model.hour))("readOnly",p.readonlyInputs)("disabled",p.disabled),a.xp6(1),a.Q6J("ngIf",p.spinners),a.xp6(4),a.Q6J("ngIf",p.spinners),a.xp6(1),a.ekj("form-control-sm",p.isSmallSize)("form-control-lg",p.isLargeSize),a.Q6J("value",p.formatMinSec(null==p.model?null:p.model.minute))("readOnly",p.readonlyInputs)("disabled",p.disabled),a.xp6(1),a.Q6J("ngIf",p.spinners),a.xp6(1),a.Q6J("ngIf",p.seconds),a.xp6(1),a.Q6J("ngIf",p.seconds),a.xp6(1),a.Q6J("ngIf",p.meridian),a.xp6(1),a.Q6J("ngIf",p.meridian))},dependencies:[lt.O5],styles:['ngb-timepicker{font-size:1rem}.ngb-tp{display:flex;align-items:center}.ngb-tp-input-container{width:4em}.ngb-tp-chevron:before{border-style:solid;border-width:.29em .29em 0 0;content:"";display:inline-block;height:.69em;left:.05em;position:relative;top:.15em;transform:rotate(-45deg);vertical-align:middle;width:.69em}.ngb-tp-chevron.bottom:before{top:-.3em;transform:rotate(135deg)}.ngb-tp-input{text-align:center}.ngb-tp-hour,.ngb-tp-minute,.ngb-tp-second,.ngb-tp-meridian{display:flex;flex-direction:column;align-items:center;justify-content:space-around}.ngb-tp-spacer{width:1em;text-align:center}\n'],encapsulation:2}),c})(),Gh=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=a.oAB({type:c}),c.\u0275inj=a.cJS({imports:[Fv]}),c})();const Lv=(c,f)=>{const{classList:r}=c;if(f)return r.add("fade"),uu(c),r.add("show","showing"),()=>{r.remove("showing")};r.add("show")},Du=({classList:c})=>(c.add("showing"),()=>{c.remove("show","showing")});let ap=(()=>{class c{constructor(r){this._ngbConfig=r,this.autohide=!0,this.delay=5e3,this.ariaLive="polite"}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(r){this._animation=r}}return c.\u0275fac=function(r){return new(r||c)(a.LFG(zo))},c.\u0275prov=a.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),Bm=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275dir=a.lG2({type:c,selectors:[["","ngbToastHeader",""]],standalone:!0}),c})(),Vh=(()=>{class c{constructor(r,p,M,N){this.ariaLive=r,this._zone=M,this._element=N,this.contentHeaderTpl=null,this.shown=new a.vpe,this.hidden=new a.vpe,null==this.ariaLive&&(this.ariaLive=p.ariaLive),this.delay=p.delay,this.autohide=p.autohide,this.animation=p.animation}ngAfterContentInit(){this._zone.onStable.asObservable().pipe((0,Ci.q)(1)).subscribe(()=>{this._init(),this.show()})}ngOnChanges(r){"autohide"in r&&(this._clearTimeout(),this._init())}hide(){this._clearTimeout();const r=Rs(this._zone,this._element.nativeElement,Du,{animation:this.animation,runningTransition:"stop"});return r.subscribe(()=>{this.hidden.emit()}),r}show(){const r=Rs(this._zone,this._element.nativeElement,Lv,{animation:this.animation,runningTransition:"continue"});return r.subscribe(()=>{this.shown.emit()}),r}_init(){this.autohide&&!this._timeoutID&&(this._timeoutID=setTimeout(()=>this.hide(),this.delay))}_clearTimeout(){this._timeoutID&&(clearTimeout(this._timeoutID),this._timeoutID=null)}}return c.\u0275fac=function(r){return new(r||c)(a.$8M("aria-live"),a.Y36(ap),a.Y36(a.R0b),a.Y36(a.SBq))},c.\u0275cmp=a.Xpm({type:c,selectors:[["ngb-toast"]],contentQueries:function(r,p,M){if(1&r&&a.Suo(M,Bm,7,a.Rgc),2&r){let N;a.iGM(N=a.CRH())&&(p.contentHeaderTpl=N.first)}},hostAttrs:["role","alert","aria-atomic","true",1,"toast"],hostVars:3,hostBindings:function(r,p){2&r&&(a.uIk("aria-live",p.ariaLive),a.ekj("fade",p.animation))},inputs:{animation:"animation",delay:"delay",autohide:"autohide",header:"header"},outputs:{shown:"shown",hidden:"hidden"},exportAs:["ngbToast"],standalone:!0,features:[a.TTD,a.jDz],ngContentSelectors:Jd,decls:5,vars:1,consts:function(){let f;return f=$localize`:@@ngb.toast.close-aria:Close`,[["headerTpl",""],[3,"ngIf"],[1,"toast-body"],[1,"me-auto"],[1,"toast-header"],[3,"ngTemplateOutlet"],["type","button","aria-label",f,1,"btn-close",3,"click"]]},template:function(r,p){1&r&&(a.F$t(),a.YNc(0,Xd,2,1,"ng-template",null,0,a.W1O),a.YNc(2,Xp,3,1,"ng-template",1),a.TgZ(3,"div",2),a.Hsn(4),a.qZA()),2&r&&(a.xp6(2),a.Q6J("ngIf",p.contentHeaderTpl||p.header))},dependencies:[lt.O5,lt.tP],styles:["ngb-toast{display:block}ngb-toast .toast-header .close{margin-left:auto;margin-bottom:.25rem}\n"],encapsulation:2}),c})(),Uh=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=a.oAB({type:c}),c.\u0275inj=a.cJS({imports:[Vh]}),c})(),jm=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=a.oAB({type:c}),c.\u0275inj=a.cJS({}),c})(),vd=(()=>{class c{constructor(){this.highlightClass="ngb-highlight",this.accentSensitive=!0}ngOnChanges(r){!this.accentSensitive&&!String.prototype.normalize&&(console.warn("The `accentSensitive` input in `ngb-highlight` cannot be set to `false` in a browser that does not implement the `String.normalize` function. You will have to include a polyfill in your application to use this feature in the current browser."),this.accentSensitive=!0);const p=tm(this.result),M=Array.isArray(this.term)?this.term:[this.term],N=De=>this.accentSensitive?De:Rf(De),ie=M.map(De=>function mv(c){return c.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}(N(tm(De)))).filter(De=>De),he=this.accentSensitive?p:Rf(p),me=ie.length?he.split(new RegExp(`(${ie.join("|")})`,"gmi")):[p];if(this.accentSensitive)this.parts=me;else{let De=0;this.parts=me.map(Le=>p.substring(De,De+=Le.length))}}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=a.Xpm({type:c,selectors:[["ngb-highlight"]],inputs:{highlightClass:"highlightClass",result:"result",term:"term",accentSensitive:"accentSensitive"},standalone:!0,features:[a.TTD,a.jDz],decls:1,vars:1,consts:[["ngFor","",3,"ngForOf"],[3,"class",4,"ngIf","ngIfElse"],["even",""]],template:function(r,p){1&r&&a.YNc(0,Qd,3,2,"ng-template",0),2&r&&a.Q6J("ngForOf",p.parts)},dependencies:[lt.O5,lt.ax],styles:[".ngb-highlight{font-weight:700}\n"],encapsulation:2,changeDetection:0}),c})();new a.OlP("live announcer delay",{providedIn:"root",factory:function Rl(){return 100}});let bd=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=a.oAB({type:c}),c.\u0275inj=a.cJS({imports:[vd]}),c})(),zm=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=a.oAB({type:c}),c.\u0275inj=a.cJS({}),c})();const N_=[sm,e_,am,Nf,Ql,Tu,Dh,Om,zm,Nh,E_,Lh,md,Gh,Uh,jm,bd];let Wm=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=a.oAB({type:c}),c.\u0275inj=a.cJS({imports:[N_,sm,e_,am,Nf,Ql,Tu,Dh,Om,zm,Nh,E_,Lh,md,Gh,Uh,jm,bd]}),c})(),F_=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=a.oAB({type:c}),c.\u0275inj=a.cJS({imports:[lt.ez,Wm,lt.ez,Wm]}),c})()},984:(pn,Ze,te)=>{te.d(Ze,{S:()=>ge});var a=te(9694),K=te(1571);let ge=(()=>{class Se{}return Se.\u0275fac=function(Re){return new(Re||Se)},Se.\u0275mod=K.oAB({type:Se}),Se.\u0275inj=K.cJS({imports:[a.HLk,a.HLk]}),Se})()},5966:(pn,Ze,te)=>{te.d(Ze,{d:()=>Se});var a=te(9694),K=te(6682),ge=te(1571);let Se=(()=>{class xe{constructor(){this.config={unit:{position:new K.Pa4(0,0,0),radius:.01,padding:.5},size:{x:10,y:10},animation:{count:0,speed:.05,amplitude:.2,inflate:.05}}}set position(Oe){Oe instanceof K.Pa4?this.config.unit.position.set(Oe.x,Oe.y,Oe.z):this.config.unit.position.set(Oe[0],Oe[1],Oe[2])}set padding(Oe){this.config.unit.padding=Oe}set size(Oe){this.config.size.x=Oe[0],this.config.size.y=Oe[1]}ngAfterContentInit(){}ngAfterViewInit(){console.log("ngAfterViewInit","th-grid",this.geometry),this.setGeometryAttributes()}setGeometryAttributes(){const Oe=this.config.unit.padding,_t=this.config.size.x,Je=this.config.size.y,Fe=_t*Je,ke=new Float32Array(3*Fe),Ke=new Float32Array(Fe);let Lt=0,ze=0;for(let Mt=0;Mt<_t;Mt++)for(let dt=0;dt<Je;dt++)ke[Lt]=this.config.unit.position.x+Mt*Oe-_t*Oe/2,ke[Lt+1]=this.config.unit.position.y,ke[Lt+2]=this.config.unit.position.z+dt*Oe-Je*Oe/2,Ke[ze]=.05,Lt+=3,ze++;this.geometry&&(this.geometry.objRef.setAttribute("position",new K.TlE(ke,3)),this.geometry.objRef.setAttribute("scale",new K.TlE(Ke,1)))}getVertexShader(){return"\n        attribute float scale;\n\n        void main() {\n            vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\n            gl_PointSize = scale * ( 300.0 / - mvPosition.z );\n            gl_Position = projectionMatrix * mvPosition;\n        }\n        "}getFragmentShader(){return"\n        uniform vec3 color;\n\n        void main() {\n\n            if ( length( gl_PointCoord - vec2( 0.5, 0.5 ) ) > 0.475 )\n                discard;\n\n            gl_FragColor = vec4( color, 1.0 );\n\n        }\n        "}getUniforms(){return{color:{value:new K.Ilk(16777215)}}}onBeforeRender(Oe){if(this.geometry){const _t=this.geometry.objRef.attributes.position.array,Je=this.geometry.objRef.attributes.scale.array,ke=this.config.size.x,Ke=this.config.size.y;let Lt=0,ze=0;for(let Mt=0;Mt<ke;Mt++)for(let dt=0;dt<Ke;dt++)_t[Lt+1]=Math.sin(.3*(Mt+this.config.animation.count))*this.config.animation.amplitude+Math.sin(.5*(dt+this.config.animation.count))*this.config.animation.amplitude,Je[ze]=(Math.sin(.3*(Mt+this.config.animation.count))+1)*this.config.animation.inflate+(Math.sin(.5*(dt+this.config.animation.count))+1)*this.config.animation.inflate,Lt+=3,ze++;this.geometry.objRef.attributes.position.needsUpdate=!0,this.geometry.objRef.attributes.scale.needsUpdate=!0}this.config.animation.count+=this.config.animation.speed}}return xe.\u0275fac=function(Oe){return new(Oe||xe)},xe.\u0275cmp=ge.Xpm({type:xe,selectors:[["th-prefab-wave"]],viewQuery:function(Oe,_t){if(1&Oe&&(ge.Gf(a.XHp,7),ge.Gf(a.sI,7)),2&Oe){let Je;ge.iGM(Je=ge.CRH())&&(_t.points=Je.first),ge.iGM(Je=ge.CRH())&&(_t.geometry=Je.first)}},inputs:{position:"position",padding:"padding",size:"size"},decls:3,vars:3,consts:[[3,"beforeRender"],[3,"vertexShader","fragmentShader","uniforms"]],template:function(Oe,_t){1&Oe&&(ge.TgZ(0,"th-points",0),ge.NdJ("beforeRender",function(Fe){return _t.onBeforeRender(Fe)}),ge._UZ(1,"th-bufferGeometry")(2,"th-shaderMaterial",1),ge.qZA()),2&Oe&&(ge.xp6(2),ge.Q6J("vertexShader",_t.getVertexShader())("fragmentShader",_t.getFragmentShader())("uniforms",_t.getUniforms()))},dependencies:[a.XHp,a.DOm,a.sI,a.VIe],encapsulation:2}),xe})()},9203:(pn,Ze,te)=>{te.d(Ze,{M:()=>ge});var a=te(9694),K=te(1571);let ge=(()=>{class Se extends a.pN9{ngOnInit(){super.ngOnInit(),this.scene&&(this.scene.objRef=this.objRef),this.fixCanvasInit()}fixCanvasInit(){let Re=this.parent;Re.contentScene=this,Re.contentCamera=this.camera}}return Se.\u0275fac=function(){let xe;return function(Oe){return(xe||(xe=K.n5z(Se)))(Oe||Se)}}(),Se.\u0275cmp=K.Xpm({type:Se,selectors:[["ng-component"]],viewQuery:function(Re,Oe){if(1&Re&&(K.Gf(a.pN9,7),K.Gf(a.Pts,7)),2&Re){let _t;K.iGM(_t=K.CRH())&&(Oe.scene=_t.first),K.iGM(_t=K.CRH())&&(Oe.camera=_t.first)}},features:[K.qOj],decls:0,vars:0,template:function(Re,Oe){},encapsulation:2}),Se})()},1001:(pn,Ze,te)=>{te.d(Ze,{Z:()=>_t});var a=te(1571),K=te(2655),ge=te(9694),Se=te(6895);function xe(Je,Fe){1&Je&&(a.ynx(0),a.Hsn(1),a.BQk())}function Re(Je,Fe){1&Je&&(a.TgZ(0,"th-canvas"),a._UZ(1,"router-outlet"),a.qZA())}const Oe=["*"];let _t=(()=>{class Je{constructor(){this.withContent=!1}}return Je.\u0275fac=function(ke){return new(ke||Je)},Je.\u0275cmp=a.Xpm({type:Je,selectors:[["jn-website-th"]],inputs:{withContent:"withContent"},ngContentSelectors:Oe,decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["routing",""]],template:function(ke,Ke){if(1&ke&&(a.F$t(),a.YNc(0,xe,2,0,"ng-container",0),a.YNc(1,Re,2,0,"ng-template",null,1,a.W1O)),2&ke){const Lt=a.MAs(2);a.Q6J("ngIf",Ke.withContent)("ngIfElse",Lt)}},dependencies:[K.lC,ge.lFy,Se.O5],encapsulation:2}),Je})()},2089:(pn,Ze,te)=>{te.r(Ze),te.d(Ze,{JnWebsiteThreeModule:()=>Ne});var a=te(984),K=te(2655),ge=te(1001),Se=te(9590),xe=te(9203),Re=te(1571),Oe=te(9694),_t=te(6682),Je=te(5861);function Fe($e){return(Fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(mt){return typeof mt}:function(mt){return mt&&"function"==typeof Symbol&&mt.constructor===Symbol&&mt!==Symbol.prototype?"symbol":typeof mt})($e)}let ze=(()=>{class $e{static createButton(Et){const Rt=document.createElement("button");function kt(){Rt.style.display="",Rt.style.cursor="auto",Rt.style.left="calc(50% - 75px)",Rt.style.width="150px",Rt.onmouseenter=null,Rt.onmouseleave=null,Rt.onclick=null}function Ge(Me){Me.style.position="absolute",Me.style.bottom="20px",Me.style.padding="12px 6px",Me.style.border="1px solid #fff",Me.style.borderRadius="4px",Me.style.background="rgba(0,0,0,0.1)",Me.style.color="#fff",Me.style.font="normal 13px sans-serif",Me.style.textAlign="center",Me.style.opacity="0.5",Me.style.outline="none",Me.style.zIndex="999"}if("xr"in navigator)return Rt.id="VRButton",Rt.style.display="none",Ge(Rt),navigator.xr.isSessionSupported("immersive-vr").then(function(Me){Me?function Zt(){let Me=null;function qe(xt){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,Je.Z)(function*(xt){xt.addEventListener("end",At),yield Et.xr.setSession(xt),Rt.textContent="EXIT VR",Me=xt})).apply(this,arguments)}function At(){Me.removeEventListener("end",At),Rt.textContent="ENTER VR",Me=null}Rt.style.display="",Rt.style.cursor="pointer",Rt.style.left="calc(50% - 50px)",Rt.style.width="100px",Rt.textContent="ENTER VR",Rt.onmouseenter=function(){Rt.style.opacity="1.0"},Rt.onmouseleave=function(){Rt.style.opacity="0.5"},Rt.onclick=function(){null===Me?navigator.xr.requestSession("immersive-vr",{optionalFeatures:["local-floor","bounded-floor","hand-tracking","layers"]}).then(qe):Me.end()}}():function cn(){kt(),Rt.textContent="VR NOT SUPPORTED"}(),Me&&$e.xrSessionIsGranted&&Rt.click()}).catch(function on(Me){kt(),console.warn("Exception when trying to call xr.isSessionSupported",Me),Rt.textContent="VR NOT ALLOWED"}),Rt;{const Me=document.createElement("a");return!1===window.isSecureContext?(Me.href=document.location.href.replace(/^http:/,"https:"),Me.innerHTML="WEBXR NEEDS HTTPS"):(Me.href="https://immersiveweb.dev/",Me.innerHTML="WEBXR NOT AVAILABLE"),Me.style.left="calc(50% - 90px)",Me.style.width="180px",Me.style.textDecoration="none",Ge(Me),Me}}static registerSessionGrantedListener(){if("xr"in navigator){if(/WebXRViewer\//i.test(navigator.userAgent))return;navigator.xr.addEventListener("sessiongranted",()=>{$e.xrSessionIsGranted=!0})}}}return function Lt($e,mt,Et){(mt=function Ke($e){var mt=function ke($e,mt){if("object"!==Fe($e)||null===$e)return $e;var Et=$e[Symbol.toPrimitive];if(void 0!==Et){var Rt=Et.call($e,mt||"default");if("object"!==Fe(Rt))return Rt;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===mt?String:Number)($e)}($e,"string");return"symbol"===Fe(mt)?mt:String(mt)}(mt))in $e?Object.defineProperty($e,mt,{value:Et,enumerable:!0,configurable:!0,writable:!0}):$e[mt]=Et}($e,"xrSessionIsGranted",!1),$e})();ze.registerSessionGrantedListener();let Mt=(()=>{class $e extends Oe.JO{constructor(Et,Rt){super(Rt),this.engine=Et}ngAfterViewInit(){console.log(this.engine),this.initPrefab(),console.log(this.parent)}initPrefab(){let Et=new _t.Mig(16777215,1);this.objRef.add(Et);let Rt=new _t.xo$(6,256,.56),Zt=new _t.Wid({side:_t._Li,displacementScale:-4}),kt=new _t.Kj0(Rt,Zt),cn=new _t.lLk,on=new _t.dpR(cn);on.load("https://threejs.org/examples/textures/kandao3.jpg",Ge=>{Ge.minFilter=_t.TyD,Ge.generateMipmaps=!1,kt.material.map=Ge}),on.load("https://threejs.org/examples/textures/kandao3_depthmap.jpg",Ge=>{Ge.minFilter=_t.TyD,Ge.generateMipmaps=!1,kt.material.displacementMap=Ge}),cn.onLoad=()=>{this.objRef.add(kt)},this.engine.renderer.xr.enabled=!0,document.body.append(ze.createButton(this.engine.renderer)),this.engine.beforeRender$.subscribe(Ge=>{this.engine.renderer.xr.isPresenting||(kt.rotation.y+=.001,kt.rotation.x=.2*Math.sin(Ge.delta),kt.rotation.z=.2*Math.cos(Ge.delta))}),this.engine.renderer.setAnimationLoop(()=>{this.engine.render()})}}return $e.\u0275fac=function(Et){return new(Et||$e)(Re.Y36(Oe.D9c),Re.Y36(Oe.EZf))},$e.\u0275cmp=Re.Xpm({type:$e,selectors:[["th-prefab-panorama-vr"]],features:[Re.qOj],decls:0,vars:0,template:function(Et,Rt){},encapsulation:2}),$e})();const dt=function($e){return[$e,0,0]},jt=function(){return[2e3,2e3]},_n=function(){return{color:"#222222",depthWrite:!1}},ui=function(){return[200,40,"#ffffff","#aaaaaa"]},Ie=[{path:"",component:ge.Z,children:[{path:"scenes",children:[{path:"environment",component:Se.v},{path:"vr",component:(()=>{class $e extends xe.M{constructor(){super(...arguments),this.Math=Math}}return $e.\u0275fac=function(){let mt;return function(Rt){return(mt||(mt=Re.n5z($e)))(Rt||$e)}}(),$e.\u0275cmp=Re.Xpm({type:$e,selectors:[["jn-website-th-scene-vr"]],features:[Re.qOj],decls:8,vars:10,consts:[[3,"rotation","receiveShadow"],[3,"args"]],template:function(Et,Rt){1&Et&&(Re.TgZ(0,"th-scene"),Re._UZ(1,"th-ambientLight")(2,"th-perspectiveCamera")(3,"th-prefab-panorama-vr"),Re.TgZ(4,"th-mesh",0),Re._UZ(5,"th-planeGeometry",1)(6,"th-meshPhongMaterial",1),Re.qZA(),Re._UZ(7,"th-gridHelper",1),Re.qZA()),2&Et&&(Re.xp6(4),Re.Q6J("rotation",Re.VKq(5,dt,-.5*Rt.Math.PI))("receiveShadow",!0),Re.xp6(1),Re.Q6J("args",Re.DdM(7,jt)),Re.xp6(1),Re.Q6J("args",Re.DdM(8,_n)),Re.xp6(1),Re.Q6J("args",Re.DdM(9,ui)))},dependencies:[Oe.RjQ,Oe.UG5,Oe.ITp,Oe.YRQ,Oe.pN9,Oe.o8H,Oe.TfJ,Mt],encapsulation:2,changeDetection:0}),$e})()}]}]}];let We=(()=>{class $e{}return $e.\u0275fac=function(Et){return new(Et||$e)},$e.\u0275mod=Re.oAB({type:$e}),$e.\u0275inj=Re.cJS({imports:[K.Bz.forChild(Ie),K.Bz]}),$e})(),Ne=(()=>{class $e{}return $e.\u0275fac=function(Et){return new(Et||$e)},$e.\u0275mod=Re.oAB({type:$e}),$e.\u0275inj=Re.cJS({imports:[We,a.S]}),$e})()},9590:(pn,Ze,te)=>{te.d(Ze,{v:()=>Lt});var a=te(9203),K=te(1571),ge=te(9694),Se=te(5966);const xe=function(){return[5,5,5]},Re=function(ze){return[0,ze,0]},Oe=function(){return[0,.2,0]},_t=function(){return[50,50]},Je=function(ze){return[ze,0,0]},Fe=function(){return[2e3,2e3]},ke=function(){return{color:"#222222",depthWrite:!1}},Ke=function(){return[200,40,"#ffffff","#aaaaaa"]};let Lt=(()=>{class ze extends a.M{constructor(){super(...arguments),this.Math=Math}}return ze.\u0275fac=function(){let Mt;return function(jt){return(Mt||(Mt=K.n5z(ze)))(jt||ze)}}(),ze.\u0275cmp=K.Xpm({type:ze,selectors:[["jn-website-th-scene-environment"]],features:[K.qOj],decls:8,vars:20,consts:[[3,"position","lookAt"],[3,"position","size","padding"],[3,"rotation","receiveShadow"],[3,"args"]],template:function(dt,jt){1&dt&&(K.TgZ(0,"th-scene"),K._UZ(1,"th-ambientLight")(2,"th-perspectiveCamera",0)(3,"th-prefab-wave",1),K.TgZ(4,"th-mesh",2),K._UZ(5,"th-planeGeometry",3)(6,"th-meshPhongMaterial",3),K.qZA(),K._UZ(7,"th-gridHelper",3),K.qZA()),2&dt&&(K.xp6(2),K.Q6J("position",K.DdM(10,xe))("lookAt",K.VKq(11,Re,-2)),K.xp6(1),K.Q6J("position",K.DdM(13,Oe))("size",K.DdM(14,_t))("padding",.5),K.xp6(1),K.Q6J("rotation",K.VKq(15,Je,-.5*jt.Math.PI))("receiveShadow",!0),K.xp6(1),K.Q6J("args",K.DdM(17,Fe)),K.xp6(1),K.Q6J("args",K.DdM(18,ke)),K.xp6(1),K.Q6J("args",K.DdM(19,Ke)))},dependencies:[ge.RjQ,ge.UG5,ge.ITp,ge.YRQ,ge.pN9,ge.o8H,ge.TfJ,Se.d],encapsulation:2,changeDetection:0}),ze})()},8014:(pn,Ze,te)=>{var a=te(1481),K=te(1571),ge=te(2655);const Se=["jn-website-app",""];let xe=(()=>{class We{}return We.\u0275fac=function($e){return new($e||We)},We.\u0275cmp=K.Xpm({type:We,selectors:[["","jn-website-app",""]],attrs:Se,decls:1,vars:0,template:function($e,mt){1&$e&&K._UZ(0,"router-outlet")},dependencies:[ge.lC],styles:["main{width:100%;height:100%;color:#fff;font-family:fantasy}router-outlet{display:none}router-outlet+*{display:contents}ng-component{display:contents}\n"],encapsulation:2}),We})();var Re=te(7832),Oe=te(1001),_t=te(9590),Je=te(6895),Fe=te(5874),ke=te(5361);let Ke=(()=>{class We extends ke.v{constructor(){super(...arguments),this.title="< building />",this.subtitle="Content under development."}}return We.\u0275fac=function(){let Ne;return function(mt){return(Ne||(Ne=K.n5z(We)))(mt||We)}}(),We.\u0275cmp=K.Xpm({type:We,selectors:[["jn-not-implemented-error"]],features:[K.qOj],decls:15,vars:4,consts:[[1,"error","d-flex","flex-column","justify-content-center"],[1,"stack","text-center",2,"--stacks","3"],[2,"--index","0"],[2,"--index","1"],[2,"--index","2"],[1,"stack","text-center",2,"--stacks","1"]],template:function($e,mt){1&$e&&(K.TgZ(0,"div",0)(1,"div",1)(2,"span",2)(3,"h1"),K._uU(4),K.qZA()(),K.TgZ(5,"span",3)(6,"h1"),K._uU(7),K.qZA()(),K.TgZ(8,"span",4)(9,"h1"),K._uU(10),K.qZA()()(),K.TgZ(11,"div",5)(12,"span",2)(13,"h6"),K._uU(14),K.qZA()()()()),2&$e&&(K.xp6(4),K.Oqu(mt.title),K.xp6(3),K.Oqu(mt.title),K.xp6(3),K.Oqu(mt.title),K.xp6(4),K.Oqu(mt.subtitle))},styles:[".error[_ngcontent-%COMP%]{color:var(--color)}.error[_ngcontent-%COMP%]   .stack[_ngcontent-%COMP%]{display:grid}.error[_ngcontent-%COMP%]   .stack[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{grid-row-start:1;grid-column-start:1;--stack-height: calc(100% /var(--stacks) - 1px);--inverse-index: calc(calc(var(--stacks) - 1) - var(--index));--clip-top: calc(var(--stack-height) * var(--index));--clip-bottom: calc(var(--stack-height) * var(--inverse-index));clip-path:inset(var(--clip-top) 0 var(--clip-bottom) 0);animation-name:_ngcontent-%COMP%_stack,_ngcontent-%COMP%_glitch;animation-duration:.34s,2s;animation-timing-function:cubic-bezier(.46,.29,0,1.24),ease;animation-iteration-count:1,infinite;animation-delay:calc(var(--index) * .12s),2s;animation-fill-mode:backwards,none;animation-direction:normal,alternate-reverse}.error[_ngcontent-%COMP%]   .stack[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(odd){--glitch-translate: 8px}.error[_ngcontent-%COMP%]   .stack[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(even){--glitch-translate: -8px}@keyframes _ngcontent-%COMP%_stack{0%{opacity:0;transform:translate(-50%);text-shadow:-2px 3px 0 red,2px -3px 0 blue}60%{opacity:.5;transform:translate(50%)}80%{transform:none;opacity:1;text-shadow:2px -3px 0 red,-2px 3px 0 blue}to{text-shadow:none}}@keyframes _ngcontent-%COMP%_glitch{0%{text-shadow:-2px 3px 0 red,2px -3px 0 blue;transform:translate(var(--glitch-translate))}2%{text-shadow:2px -3px 0 red,-2px 3px 0 blue}4%,to{text-shadow:none;transform:none}}"]}),We})();var Lt=te(9694);function ze(We,Ne){1&We&&(K.ynx(0),K._UZ(1,"jn-not-found-error",5),K.BQk())}function Mt(We,Ne){1&We&&K._UZ(0,"jn-not-implemented-error",5)}let dt=(()=>{class We{constructor($e){this.router=$e}isNotFound(){return"/"!==this.router.routerState.snapshot.url}}return We.\u0275fac=function($e){return new($e||We)(K.Y36(ge.F0))},We.\u0275cmp=K.Xpm({type:We,selectors:[["jn-website-page-building"]],decls:8,vars:3,consts:[[1,"position-absolute","w-100","h-100",2,"z-index","-1"],[3,"withContent"],[1,"position-absolute","w-100","h-100","d-flex","justify-content-around",2,"z-index","0"],[4,"ngIf","ngIfElse"],["notImplemented",""],[2,"display","contents"]],template:function($e,mt){if(1&$e&&(K.TgZ(0,"div",0)(1,"jn-website-th",1)(2,"th-canvas"),K._UZ(3,"jn-website-th-scene-environment"),K.qZA()()(),K.TgZ(4,"div",2),K.YNc(5,ze,2,0,"ng-container",3),K.YNc(6,Mt,1,0,"ng-template",null,4,K.W1O),K.qZA()),2&$e){const Et=K.MAs(7);K.xp6(1),K.Q6J("withContent",!0),K.xp6(4),K.Q6J("ngIf",mt.isNotFound())("ngIfElse",Et)}},dependencies:[Oe.Z,_t.v,Je.O5,Fe.u,Ke,Lt.lFy],encapsulation:2}),We})();const jt=[{path:"",pathMatch:"full",component:dt},{path:"",children:[{path:"webgl/three",loadChildren:()=>Promise.resolve().then(te.bind(te,2089)).then(We=>We.JnWebsiteThreeModule)},{path:"projects",children:[{path:"streaming",loadChildren:()=>te.e(512).then(te.bind(te,4512)).then(We=>We.JnStreamingAppModule)}]}]},{path:"**",component:dt}];let _n=(()=>{class We{}return We.\u0275fac=function($e){return new($e||We)},We.\u0275mod=K.oAB({type:We}),We.\u0275inj=K.cJS({imports:[ge.Bz.forRoot(jt,{enableTracing:!1}),ge.Bz]}),We})();var ui=te(2089);let Ri=(()=>{class We{}return We.\u0275fac=function($e){return new($e||We)},We.\u0275mod=K.oAB({type:We,bootstrap:[xe]}),We.\u0275inj=K.cJS({imports:[_n,ui.JnWebsiteThreeModule,Re.l,a.b2,Lt.HLk]}),We})();a.q6().bootstrapModule(Ri).catch(We=>console.error(We))},1135:(pn,Ze,te)=>{te.d(Ze,{X:()=>K});var a=te(7579);class K extends a.x{constructor(Se){super(),this._value=Se}get value(){return this.getValue()}_subscribe(Se){const xe=super._subscribe(Se);return!xe.closed&&Se.next(this._value),xe}getValue(){const{hasError:Se,thrownError:xe,_value:Re}=this;if(Se)throw xe;return this._throwIfClosed(),Re}next(Se){super.next(this._value=Se)}}},9751:(pn,Ze,te)=>{te.d(Ze,{y:()=>_t});var a=te(930),K=te(727),ge=te(8822),Se=te(9635),xe=te(2416),Re=te(576),Oe=te(2806);let _t=(()=>{class Ke{constructor(ze){ze&&(this._subscribe=ze)}lift(ze){const Mt=new Ke;return Mt.source=this,Mt.operator=ze,Mt}subscribe(ze,Mt,dt){const jt=function ke(Ke){return Ke&&Ke instanceof a.Lv||function Fe(Ke){return Ke&&(0,Re.m)(Ke.next)&&(0,Re.m)(Ke.error)&&(0,Re.m)(Ke.complete)}(Ke)&&(0,K.Nn)(Ke)}(ze)?ze:new a.Hp(ze,Mt,dt);return(0,Oe.x)(()=>{const{operator:_n,source:ui}=this;jt.add(_n?_n.call(jt,ui):ui?this._subscribe(jt):this._trySubscribe(jt))}),jt}_trySubscribe(ze){try{return this._subscribe(ze)}catch(Mt){ze.error(Mt)}}forEach(ze,Mt){return new(Mt=Je(Mt))((dt,jt)=>{const _n=new a.Hp({next:ui=>{try{ze(ui)}catch(Ri){jt(Ri),_n.unsubscribe()}},error:jt,complete:dt});this.subscribe(_n)})}_subscribe(ze){var Mt;return null===(Mt=this.source)||void 0===Mt?void 0:Mt.subscribe(ze)}[ge.L](){return this}pipe(...ze){return(0,Se.U)(ze)(this)}toPromise(ze){return new(ze=Je(ze))((Mt,dt)=>{let jt;this.subscribe(_n=>jt=_n,_n=>dt(_n),()=>Mt(jt))})}}return Ke.create=Lt=>new Ke(Lt),Ke})();function Je(Ke){var Lt;return null!==(Lt=Ke??xe.v.Promise)&&void 0!==Lt?Lt:Promise}},7579:(pn,Ze,te)=>{te.d(Ze,{x:()=>Oe});var a=te(9751),K=te(727);const Se=(0,te(3888).d)(Je=>function(){Je(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var xe=te(8737),Re=te(2806);let Oe=(()=>{class Je extends a.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(ke){const Ke=new _t(this,this);return Ke.operator=ke,Ke}_throwIfClosed(){if(this.closed)throw new Se}next(ke){(0,Re.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Ke of this.currentObservers)Ke.next(ke)}})}error(ke){(0,Re.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=ke;const{observers:Ke}=this;for(;Ke.length;)Ke.shift().error(ke)}})}complete(){(0,Re.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:ke}=this;for(;ke.length;)ke.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var ke;return(null===(ke=this.observers)||void 0===ke?void 0:ke.length)>0}_trySubscribe(ke){return this._throwIfClosed(),super._trySubscribe(ke)}_subscribe(ke){return this._throwIfClosed(),this._checkFinalizedStatuses(ke),this._innerSubscribe(ke)}_innerSubscribe(ke){const{hasError:Ke,isStopped:Lt,observers:ze}=this;return Ke||Lt?K.Lc:(this.currentObservers=null,ze.push(ke),new K.w0(()=>{this.currentObservers=null,(0,xe.P)(ze,ke)}))}_checkFinalizedStatuses(ke){const{hasError:Ke,thrownError:Lt,isStopped:ze}=this;Ke?ke.error(Lt):ze&&ke.complete()}asObservable(){const ke=new a.y;return ke.source=this,ke}}return Je.create=(Fe,ke)=>new _t(Fe,ke),Je})();class _t extends Oe{constructor(Fe,ke){super(),this.destination=Fe,this.source=ke}next(Fe){var ke,Ke;null===(Ke=null===(ke=this.destination)||void 0===ke?void 0:ke.next)||void 0===Ke||Ke.call(ke,Fe)}error(Fe){var ke,Ke;null===(Ke=null===(ke=this.destination)||void 0===ke?void 0:ke.error)||void 0===Ke||Ke.call(ke,Fe)}complete(){var Fe,ke;null===(ke=null===(Fe=this.destination)||void 0===Fe?void 0:Fe.complete)||void 0===ke||ke.call(Fe)}_subscribe(Fe){var ke,Ke;return null!==(Ke=null===(ke=this.source)||void 0===ke?void 0:ke.subscribe(Fe))&&void 0!==Ke?Ke:K.Lc}}},930:(pn,Ze,te)=>{te.d(Ze,{Hp:()=>dt,Lv:()=>Ke});var a=te(576),K=te(727),ge=te(2416),Se=te(7849),xe=te(5032);const Re=Je("C",void 0,void 0);function Je(Ie,We,Ne){return{kind:Ie,value:We,error:Ne}}var Fe=te(3410),ke=te(2806);class Ke extends K.w0{constructor(We){super(),this.isStopped=!1,We?(this.destination=We,(0,K.Nn)(We)&&We.add(this)):this.destination=Ri}static create(We,Ne,$e){return new dt(We,Ne,$e)}next(We){this.isStopped?ui(function _t(Ie){return Je("N",Ie,void 0)}(We),this):this._next(We)}error(We){this.isStopped?ui(function Oe(Ie){return Je("E",void 0,Ie)}(We),this):(this.isStopped=!0,this._error(We))}complete(){this.isStopped?ui(Re,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(We){this.destination.next(We)}_error(We){try{this.destination.error(We)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Lt=Function.prototype.bind;function ze(Ie,We){return Lt.call(Ie,We)}class Mt{constructor(We){this.partialObserver=We}next(We){const{partialObserver:Ne}=this;if(Ne.next)try{Ne.next(We)}catch($e){jt($e)}}error(We){const{partialObserver:Ne}=this;if(Ne.error)try{Ne.error(We)}catch($e){jt($e)}else jt(We)}complete(){const{partialObserver:We}=this;if(We.complete)try{We.complete()}catch(Ne){jt(Ne)}}}class dt extends Ke{constructor(We,Ne,$e){let mt;if(super(),(0,a.m)(We)||!We)mt={next:We??void 0,error:Ne??void 0,complete:$e??void 0};else{let Et;this&&ge.v.useDeprecatedNextContext?(Et=Object.create(We),Et.unsubscribe=()=>this.unsubscribe(),mt={next:We.next&&ze(We.next,Et),error:We.error&&ze(We.error,Et),complete:We.complete&&ze(We.complete,Et)}):mt=We}this.destination=new Mt(mt)}}function jt(Ie){ge.v.useDeprecatedSynchronousErrorHandling?(0,ke.O)(Ie):(0,Se.h)(Ie)}function ui(Ie,We){const{onStoppedNotification:Ne}=ge.v;Ne&&Fe.z.setTimeout(()=>Ne(Ie,We))}const Ri={closed:!0,next:xe.Z,error:function _n(Ie){throw Ie},complete:xe.Z}},727:(pn,Ze,te)=>{te.d(Ze,{Lc:()=>Re,w0:()=>xe,Nn:()=>Oe});var a=te(576);const ge=(0,te(3888).d)(Je=>function(ke){Je(this),this.message=ke?`${ke.length} errors occurred during unsubscription:\n${ke.map((Ke,Lt)=>`${Lt+1}) ${Ke.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ke});var Se=te(8737);class xe{constructor(Fe){this.initialTeardown=Fe,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let Fe;if(!this.closed){this.closed=!0;const{_parentage:ke}=this;if(ke)if(this._parentage=null,Array.isArray(ke))for(const ze of ke)ze.remove(this);else ke.remove(this);const{initialTeardown:Ke}=this;if((0,a.m)(Ke))try{Ke()}catch(ze){Fe=ze instanceof ge?ze.errors:[ze]}const{_finalizers:Lt}=this;if(Lt){this._finalizers=null;for(const ze of Lt)try{_t(ze)}catch(Mt){Fe=Fe??[],Mt instanceof ge?Fe=[...Fe,...Mt.errors]:Fe.push(Mt)}}if(Fe)throw new ge(Fe)}}add(Fe){var ke;if(Fe&&Fe!==this)if(this.closed)_t(Fe);else{if(Fe instanceof xe){if(Fe.closed||Fe._hasParent(this))return;Fe._addParent(this)}(this._finalizers=null!==(ke=this._finalizers)&&void 0!==ke?ke:[]).push(Fe)}}_hasParent(Fe){const{_parentage:ke}=this;return ke===Fe||Array.isArray(ke)&&ke.includes(Fe)}_addParent(Fe){const{_parentage:ke}=this;this._parentage=Array.isArray(ke)?(ke.push(Fe),ke):ke?[ke,Fe]:Fe}_removeParent(Fe){const{_parentage:ke}=this;ke===Fe?this._parentage=null:Array.isArray(ke)&&(0,Se.P)(ke,Fe)}remove(Fe){const{_finalizers:ke}=this;ke&&(0,Se.P)(ke,Fe),Fe instanceof xe&&Fe._removeParent(this)}}xe.EMPTY=(()=>{const Je=new xe;return Je.closed=!0,Je})();const Re=xe.EMPTY;function Oe(Je){return Je instanceof xe||Je&&"closed"in Je&&(0,a.m)(Je.remove)&&(0,a.m)(Je.add)&&(0,a.m)(Je.unsubscribe)}function _t(Je){(0,a.m)(Je)?Je():Je.unsubscribe()}},2416:(pn,Ze,te)=>{te.d(Ze,{v:()=>a});const a={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},9841:(pn,Ze,te)=>{te.d(Ze,{a:()=>Fe});var a=te(9751),K=te(4742),ge=te(2076),Se=te(4671),xe=te(3268),Re=te(3269),Oe=te(1810),_t=te(5403),Je=te(9672);function Fe(...Lt){const ze=(0,Re.yG)(Lt),Mt=(0,Re.jO)(Lt),{args:dt,keys:jt}=(0,K.D)(Lt);if(0===dt.length)return(0,ge.D)([],ze);const _n=new a.y(function ke(Lt,ze,Mt=Se.y){return dt=>{Ke(ze,()=>{const{length:jt}=Lt,_n=new Array(jt);let ui=jt,Ri=jt;for(let Ie=0;Ie<jt;Ie++)Ke(ze,()=>{const We=(0,ge.D)(Lt[Ie],ze);let Ne=!1;We.subscribe((0,_t.x)(dt,$e=>{_n[Ie]=$e,Ne||(Ne=!0,Ri--),Ri||dt.next(Mt(_n.slice()))},()=>{--ui||dt.complete()}))},dt)},dt)}}(dt,ze,jt?ui=>(0,Oe.n)(jt,ui):Se.y));return Mt?_n.pipe((0,xe.Z)(Mt)):_n}function Ke(Lt,ze,Mt){Lt?(0,Je.f)(Mt,Lt,ze):ze()}},7272:(pn,Ze,te)=>{te.d(Ze,{z:()=>xe});var a=te(8189),ge=te(3269),Se=te(2076);function xe(...Re){return function K(){return(0,a.J)(1)}()((0,Se.D)(Re,(0,ge.yG)(Re)))}},515:(pn,Ze,te)=>{te.d(Ze,{E:()=>K});const K=new(te(9751).y)(xe=>xe.complete())},2076:(pn,Ze,te)=>{te.d(Ze,{D:()=>$e});var a=te(8421),K=te(9672),ge=te(4482),Se=te(5403);function xe(mt,Et=0){return(0,ge.e)((Rt,Zt)=>{Rt.subscribe((0,Se.x)(Zt,kt=>(0,K.f)(Zt,mt,()=>Zt.next(kt),Et),()=>(0,K.f)(Zt,mt,()=>Zt.complete(),Et),kt=>(0,K.f)(Zt,mt,()=>Zt.error(kt),Et)))})}function Re(mt,Et=0){return(0,ge.e)((Rt,Zt)=>{Zt.add(mt.schedule(()=>Rt.subscribe(Zt),Et))})}var Je=te(9751),ke=te(2202),Ke=te(576);function ze(mt,Et){if(!mt)throw new Error("Iterable cannot be null");return new Je.y(Rt=>{(0,K.f)(Rt,Et,()=>{const Zt=mt[Symbol.asyncIterator]();(0,K.f)(Rt,Et,()=>{Zt.next().then(kt=>{kt.done?Rt.complete():Rt.next(kt.value)})},0,!0)})})}var Mt=te(3670),dt=te(8239),jt=te(1144),_n=te(6495),ui=te(2206),Ri=te(4532),Ie=te(3260);function $e(mt,Et){return Et?function Ne(mt,Et){if(null!=mt){if((0,Mt.c)(mt))return function Oe(mt,Et){return(0,a.Xf)(mt).pipe(Re(Et),xe(Et))}(mt,Et);if((0,jt.z)(mt))return function Fe(mt,Et){return new Je.y(Rt=>{let Zt=0;return Et.schedule(function(){Zt===mt.length?Rt.complete():(Rt.next(mt[Zt++]),Rt.closed||this.schedule())})})}(mt,Et);if((0,dt.t)(mt))return function _t(mt,Et){return(0,a.Xf)(mt).pipe(Re(Et),xe(Et))}(mt,Et);if((0,ui.D)(mt))return ze(mt,Et);if((0,_n.T)(mt))return function Lt(mt,Et){return new Je.y(Rt=>{let Zt;return(0,K.f)(Rt,Et,()=>{Zt=mt[ke.h](),(0,K.f)(Rt,Et,()=>{let kt,cn;try{({value:kt,done:cn}=Zt.next())}catch(on){return void Rt.error(on)}cn?Rt.complete():Rt.next(kt)},0,!0)}),()=>(0,Ke.m)(Zt?.return)&&Zt.return()})}(mt,Et);if((0,Ie.L)(mt))return function We(mt,Et){return ze((0,Ie.Q)(mt),Et)}(mt,Et)}throw(0,Ri.z)(mt)}(mt,Et):(0,a.Xf)(mt)}},8421:(pn,Ze,te)=>{te.d(Ze,{Xf:()=>Lt});var a=te(655),K=te(1144),ge=te(8239),Se=te(9751),xe=te(3670),Re=te(2206),Oe=te(4532),_t=te(6495),Je=te(3260),Fe=te(576),ke=te(7849),Ke=te(8822);function Lt(Ie){if(Ie instanceof Se.y)return Ie;if(null!=Ie){if((0,xe.c)(Ie))return function ze(Ie){return new Se.y(We=>{const Ne=Ie[Ke.L]();if((0,Fe.m)(Ne.subscribe))return Ne.subscribe(We);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ie);if((0,K.z)(Ie))return function Mt(Ie){return new Se.y(We=>{for(let Ne=0;Ne<Ie.length&&!We.closed;Ne++)We.next(Ie[Ne]);We.complete()})}(Ie);if((0,ge.t)(Ie))return function dt(Ie){return new Se.y(We=>{Ie.then(Ne=>{We.closed||(We.next(Ne),We.complete())},Ne=>We.error(Ne)).then(null,ke.h)})}(Ie);if((0,Re.D)(Ie))return _n(Ie);if((0,_t.T)(Ie))return function jt(Ie){return new Se.y(We=>{for(const Ne of Ie)if(We.next(Ne),We.closed)return;We.complete()})}(Ie);if((0,Je.L)(Ie))return function ui(Ie){return _n((0,Je.Q)(Ie))}(Ie)}throw(0,Oe.z)(Ie)}function _n(Ie){return new Se.y(We=>{(function Ri(Ie,We){var Ne,$e,mt,Et;return(0,a.mG)(this,void 0,void 0,function*(){try{for(Ne=(0,a.KL)(Ie);!($e=yield Ne.next()).done;)if(We.next($e.value),We.closed)return}catch(Rt){mt={error:Rt}}finally{try{$e&&!$e.done&&(Et=Ne.return)&&(yield Et.call(Ne))}finally{if(mt)throw mt.error}}We.complete()})})(Ie,We).catch(Ne=>We.error(Ne))})}},6451:(pn,Ze,te)=>{te.d(Ze,{T:()=>Re});var a=te(8189),K=te(8421),ge=te(515),Se=te(3269),xe=te(2076);function Re(...Oe){const _t=(0,Se.yG)(Oe),Je=(0,Se._6)(Oe,1/0),Fe=Oe;return Fe.length?1===Fe.length?(0,K.Xf)(Fe[0]):(0,a.J)(Je)((0,xe.D)(Fe,_t)):ge.E}},9646:(pn,Ze,te)=>{te.d(Ze,{of:()=>ge});var a=te(3269),K=te(2076);function ge(...Se){const xe=(0,a.yG)(Se);return(0,K.D)(Se,xe)}},5403:(pn,Ze,te)=>{te.d(Ze,{x:()=>K});var a=te(930);function K(Se,xe,Re,Oe,_t){return new ge(Se,xe,Re,Oe,_t)}class ge extends a.Lv{constructor(xe,Re,Oe,_t,Je,Fe){super(xe),this.onFinalize=Je,this.shouldUnsubscribe=Fe,this._next=Re?function(ke){try{Re(ke)}catch(Ke){xe.error(Ke)}}:super._next,this._error=_t?function(ke){try{_t(ke)}catch(Ke){xe.error(Ke)}finally{this.unsubscribe()}}:super._error,this._complete=Oe?function(){try{Oe()}catch(ke){xe.error(ke)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var xe;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Re}=this;super.unsubscribe(),!Re&&(null===(xe=this.onFinalize)||void 0===xe||xe.call(this))}}}},9300:(pn,Ze,te)=>{te.d(Ze,{h:()=>ge});var a=te(4482),K=te(5403);function ge(Se,xe){return(0,a.e)((Re,Oe)=>{let _t=0;Re.subscribe((0,K.x)(Oe,Je=>Se.call(xe,Je,_t++)&&Oe.next(Je)))})}},4004:(pn,Ze,te)=>{te.d(Ze,{U:()=>ge});var a=te(4482),K=te(5403);function ge(Se,xe){return(0,a.e)((Re,Oe)=>{let _t=0;Re.subscribe((0,K.x)(Oe,Je=>{Oe.next(Se.call(xe,Je,_t++))}))})}},9718:(pn,Ze,te)=>{te.d(Ze,{h:()=>K});var a=te(4004);function K(ge){return(0,a.U)(()=>ge)}},8189:(pn,Ze,te)=>{te.d(Ze,{J:()=>ge});var a=te(5577),K=te(4671);function ge(Se=1/0){return(0,a.z)(K.y,Se)}},5577:(pn,Ze,te)=>{te.d(Ze,{z:()=>_t});var a=te(4004),K=te(8421),ge=te(4482),Se=te(9672),xe=te(5403),Oe=te(576);function _t(Je,Fe,ke=1/0){return(0,Oe.m)(Fe)?_t((Ke,Lt)=>(0,a.U)((ze,Mt)=>Fe(Ke,ze,Lt,Mt))((0,K.Xf)(Je(Ke,Lt))),ke):("number"==typeof Fe&&(ke=Fe),(0,ge.e)((Ke,Lt)=>function Re(Je,Fe,ke,Ke,Lt,ze,Mt,dt){const jt=[];let _n=0,ui=0,Ri=!1;const Ie=()=>{Ri&&!jt.length&&!_n&&Fe.complete()},We=$e=>_n<Ke?Ne($e):jt.push($e),Ne=$e=>{ze&&Fe.next($e),_n++;let mt=!1;(0,K.Xf)(ke($e,ui++)).subscribe((0,xe.x)(Fe,Et=>{Lt?.(Et),ze?We(Et):Fe.next(Et)},()=>{mt=!0},void 0,()=>{if(mt)try{for(_n--;jt.length&&_n<Ke;){const Et=jt.shift();Mt?(0,Se.f)(Fe,Mt,()=>Ne(Et)):Ne(Et)}Ie()}catch(Et){Fe.error(Et)}}))};return Je.subscribe((0,xe.x)(Fe,We,()=>{Ri=!0,Ie()})),()=>{dt?.()}}(Ke,Lt,Je,ke)))}},8675:(pn,Ze,te)=>{te.d(Ze,{O:()=>Se});var a=te(7272),K=te(3269),ge=te(4482);function Se(...xe){const Re=(0,K.yG)(xe);return(0,ge.e)((Oe,_t)=>{(Re?(0,a.z)(xe,Oe,Re):(0,a.z)(xe,Oe)).subscribe(_t)})}},3900:(pn,Ze,te)=>{te.d(Ze,{w:()=>Se});var a=te(8421),K=te(4482),ge=te(5403);function Se(xe,Re){return(0,K.e)((Oe,_t)=>{let Je=null,Fe=0,ke=!1;const Ke=()=>ke&&!Je&&_t.complete();Oe.subscribe((0,ge.x)(_t,Lt=>{Je?.unsubscribe();let ze=0;const Mt=Fe++;(0,a.Xf)(xe(Lt,Mt)).subscribe(Je=(0,ge.x)(_t,dt=>_t.next(Re?Re(Lt,dt,Mt,ze++):dt),()=>{Je=null,Ke()}))},()=>{ke=!0,Ke()}))})}},5698:(pn,Ze,te)=>{te.d(Ze,{q:()=>Se});var a=te(515),K=te(4482),ge=te(5403);function Se(xe){return xe<=0?()=>a.E:(0,K.e)((Re,Oe)=>{let _t=0;Re.subscribe((0,ge.x)(Oe,Je=>{++_t<=xe&&(Oe.next(Je),xe<=_t&&Oe.complete())}))})}},2722:(pn,Ze,te)=>{te.d(Ze,{R:()=>xe});var a=te(4482),K=te(5403),ge=te(8421),Se=te(5032);function xe(Re){return(0,a.e)((Oe,_t)=>{(0,ge.Xf)(Re).subscribe((0,K.x)(_t,()=>_t.complete(),Se.Z)),!_t.closed&&Oe.subscribe(_t)})}},8505:(pn,Ze,te)=>{te.d(Ze,{b:()=>xe});var a=te(576),K=te(4482),ge=te(5403),Se=te(4671);function xe(Re,Oe,_t){const Je=(0,a.m)(Re)||Oe||_t?{next:Re,error:Oe,complete:_t}:Re;return Je?(0,K.e)((Fe,ke)=>{var Ke;null===(Ke=Je.subscribe)||void 0===Ke||Ke.call(Je);let Lt=!0;Fe.subscribe((0,ge.x)(ke,ze=>{var Mt;null===(Mt=Je.next)||void 0===Mt||Mt.call(Je,ze),ke.next(ze)},()=>{var ze;Lt=!1,null===(ze=Je.complete)||void 0===ze||ze.call(Je),ke.complete()},ze=>{var Mt;Lt=!1,null===(Mt=Je.error)||void 0===Mt||Mt.call(Je,ze),ke.error(ze)},()=>{var ze,Mt;Lt&&(null===(ze=Je.unsubscribe)||void 0===ze||ze.call(Je)),null===(Mt=Je.finalize)||void 0===Mt||Mt.call(Je)}))}):Se.y}},6063:(pn,Ze,te)=>{te.d(Ze,{l:()=>a});const a={now:()=>(a.delegate||Date).now(),delegate:void 0}},3410:(pn,Ze,te)=>{te.d(Ze,{z:()=>a});const a={setTimeout(K,ge,...Se){const{delegate:xe}=a;return xe?.setTimeout?xe.setTimeout(K,ge,...Se):setTimeout(K,ge,...Se)},clearTimeout(K){const{delegate:ge}=a;return(ge?.clearTimeout||clearTimeout)(K)},delegate:void 0}},2202:(pn,Ze,te)=>{te.d(Ze,{h:()=>K});const K=function a(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(pn,Ze,te)=>{te.d(Ze,{L:()=>a});const a="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(pn,Ze,te)=>{te.d(Ze,{_6:()=>Re,jO:()=>Se,yG:()=>xe});var a=te(576),K=te(3532);function ge(Oe){return Oe[Oe.length-1]}function Se(Oe){return(0,a.m)(ge(Oe))?Oe.pop():void 0}function xe(Oe){return(0,K.K)(ge(Oe))?Oe.pop():void 0}function Re(Oe,_t){return"number"==typeof ge(Oe)?Oe.pop():_t}},4742:(pn,Ze,te)=>{te.d(Ze,{D:()=>xe});const{isArray:a}=Array,{getPrototypeOf:K,prototype:ge,keys:Se}=Object;function xe(Oe){if(1===Oe.length){const _t=Oe[0];if(a(_t))return{args:_t,keys:null};if(function Re(Oe){return Oe&&"object"==typeof Oe&&K(Oe)===ge}(_t)){const Je=Se(_t);return{args:Je.map(Fe=>_t[Fe]),keys:Je}}}return{args:Oe,keys:null}}},8737:(pn,Ze,te)=>{function a(K,ge){if(K){const Se=K.indexOf(ge);0<=Se&&K.splice(Se,1)}}te.d(Ze,{P:()=>a})},3888:(pn,Ze,te)=>{function a(K){const Se=K(xe=>{Error.call(xe),xe.stack=(new Error).stack});return Se.prototype=Object.create(Error.prototype),Se.prototype.constructor=Se,Se}te.d(Ze,{d:()=>a})},1810:(pn,Ze,te)=>{function a(K,ge){return K.reduce((Se,xe,Re)=>(Se[xe]=ge[Re],Se),{})}te.d(Ze,{n:()=>a})},2806:(pn,Ze,te)=>{te.d(Ze,{O:()=>Se,x:()=>ge});var a=te(2416);let K=null;function ge(xe){if(a.v.useDeprecatedSynchronousErrorHandling){const Re=!K;if(Re&&(K={errorThrown:!1,error:null}),xe(),Re){const{errorThrown:Oe,error:_t}=K;if(K=null,Oe)throw _t}}else xe()}function Se(xe){a.v.useDeprecatedSynchronousErrorHandling&&K&&(K.errorThrown=!0,K.error=xe)}},9672:(pn,Ze,te)=>{function a(K,ge,Se,xe=0,Re=!1){const Oe=ge.schedule(function(){Se(),Re?K.add(this.schedule(null,xe)):this.unsubscribe()},xe);if(K.add(Oe),!Re)return Oe}te.d(Ze,{f:()=>a})},4671:(pn,Ze,te)=>{function a(K){return K}te.d(Ze,{y:()=>a})},1144:(pn,Ze,te)=>{te.d(Ze,{z:()=>a});const a=K=>K&&"number"==typeof K.length&&"function"!=typeof K},2206:(pn,Ze,te)=>{te.d(Ze,{D:()=>K});var a=te(576);function K(ge){return Symbol.asyncIterator&&(0,a.m)(ge?.[Symbol.asyncIterator])}},576:(pn,Ze,te)=>{function a(K){return"function"==typeof K}te.d(Ze,{m:()=>a})},3670:(pn,Ze,te)=>{te.d(Ze,{c:()=>ge});var a=te(8822),K=te(576);function ge(Se){return(0,K.m)(Se[a.L])}},6495:(pn,Ze,te)=>{te.d(Ze,{T:()=>ge});var a=te(2202),K=te(576);function ge(Se){return(0,K.m)(Se?.[a.h])}},8239:(pn,Ze,te)=>{te.d(Ze,{t:()=>K});var a=te(576);function K(ge){return(0,a.m)(ge?.then)}},3260:(pn,Ze,te)=>{te.d(Ze,{L:()=>Se,Q:()=>ge});var a=te(655),K=te(576);function ge(xe){return(0,a.FC)(this,arguments,function*(){const Oe=xe.getReader();try{for(;;){const{value:_t,done:Je}=yield(0,a.qq)(Oe.read());if(Je)return yield(0,a.qq)(void 0);yield yield(0,a.qq)(_t)}}finally{Oe.releaseLock()}})}function Se(xe){return(0,K.m)(xe?.getReader)}},3532:(pn,Ze,te)=>{te.d(Ze,{K:()=>K});var a=te(576);function K(ge){return ge&&(0,a.m)(ge.schedule)}},4482:(pn,Ze,te)=>{te.d(Ze,{A:()=>K,e:()=>ge});var a=te(576);function K(Se){return(0,a.m)(Se?.lift)}function ge(Se){return xe=>{if(K(xe))return xe.lift(function(Re){try{return Se(Re,this)}catch(Oe){this.error(Oe)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(pn,Ze,te)=>{te.d(Ze,{Z:()=>Se});var a=te(4004);const{isArray:K}=Array;function Se(xe){return(0,a.U)(Re=>function ge(xe,Re){return K(Re)?xe(...Re):xe(Re)}(xe,Re))}},5032:(pn,Ze,te)=>{function a(){}te.d(Ze,{Z:()=>a})},9635:(pn,Ze,te)=>{te.d(Ze,{U:()=>ge,z:()=>K});var a=te(4671);function K(...Se){return ge(Se)}function ge(Se){return 0===Se.length?a.y:1===Se.length?Se[0]:function(Re){return Se.reduce((Oe,_t)=>_t(Oe),Re)}}},7849:(pn,Ze,te)=>{te.d(Ze,{h:()=>ge});var a=te(2416),K=te(3410);function ge(Se){K.z.setTimeout(()=>{const{onUnhandledError:xe}=a.v;if(!xe)throw Se;xe(Se)})}},4532:(pn,Ze,te)=>{function a(K){return new TypeError(`You provided ${null!==K&&"object"==typeof K?"an invalid object":`'${K}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}te.d(Ze,{z:()=>a})},655:(pn,Ze,te)=>{function Ke(Ge,Me,qe,Qe){return new(qe||(qe=Promise))(function(xt,Rn){function pi(jn){try{En(Qe.next(jn))}catch(tn){Rn(tn)}}function lr(jn){try{En(Qe.throw(jn))}catch(tn){Rn(tn)}}function En(jn){jn.done?xt(jn.value):function At(xt){return xt instanceof qe?xt:new qe(function(Rn){Rn(xt)})}(jn.value).then(pi,lr)}En((Qe=Qe.apply(Ge,Me||[])).next())})}function Ie(Ge){return this instanceof Ie?(this.v=Ge,this):new Ie(Ge)}function We(Ge,Me,qe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var At,Qe=qe.apply(Ge,Me||[]),xt=[];return At={},Rn("next"),Rn("throw"),Rn("return"),At[Symbol.asyncIterator]=function(){return this},At;function Rn(Si){Qe[Si]&&(At[Si]=function(Es){return new Promise(function(wn,Mn){xt.push([Si,Es,wn,Mn])>1||pi(Si,Es)})})}function pi(Si,Es){try{!function lr(Si){Si.value instanceof Ie?Promise.resolve(Si.value.v).then(En,jn):tn(xt[0][2],Si)}(Qe[Si](Es))}catch(wn){tn(xt[0][3],wn)}}function En(Si){pi("next",Si)}function jn(Si){pi("throw",Si)}function tn(Si,Es){Si(Es),xt.shift(),xt.length&&pi(xt[0][0],xt[0][1])}}function $e(Ge){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var qe,Me=Ge[Symbol.asyncIterator];return Me?Me.call(Ge):(Ge=function dt(Ge){var Me="function"==typeof Symbol&&Symbol.iterator,qe=Me&&Ge[Me],Qe=0;if(qe)return qe.call(Ge);if(Ge&&"number"==typeof Ge.length)return{next:function(){return Ge&&Qe>=Ge.length&&(Ge=void 0),{value:Ge&&Ge[Qe++],done:!Ge}}};throw new TypeError(Me?"Object is not iterable.":"Symbol.iterator is not defined.")}(Ge),qe={},Qe("next"),Qe("throw"),Qe("return"),qe[Symbol.asyncIterator]=function(){return this},qe);function Qe(xt){qe[xt]=Ge[xt]&&function(Rn){return new Promise(function(pi,lr){!function At(xt,Rn,pi,lr){Promise.resolve(lr).then(function(En){xt({value:En,done:pi})},Rn)}(pi,lr,(Rn=Ge[xt](Rn)).done,Rn.value)})}}}te.d(Ze,{FC:()=>We,KL:()=>$e,mG:()=>Ke,qq:()=>Ie})},6895:(pn,Ze,te)=>{te.d(Ze,{Do:()=>ui,EM:()=>No,HT:()=>Se,JF:()=>Qo,K0:()=>Re,Mn:()=>Qe,Mx:()=>Ii,NF:()=>jd,O5:()=>bs,S$:()=>dt,Tn:()=>kt,UT:()=>At,V_:()=>Je,Ye:()=>Ri,Zx:()=>Xo,ax:()=>An,b0:()=>_n,bD:()=>La,ez:()=>Ld,ol:()=>qe,p6:()=>sr,q:()=>ge,tP:()=>Sr,w_:()=>xe,x:()=>Zt});var a=te(1571);let K=null;function ge(){return K}function Se(O){K||(K=O)}class xe{}const Re=new a.OlP("DocumentToken");let Oe=(()=>{class O{historyGo(B){throw new Error("Not implemented")}}return O.\u0275fac=function(B){return new(B||O)},O.\u0275prov=a.Yz7({token:O,factory:function(){return function _t(){return(0,a.LFG)(Fe)}()},providedIn:"platform"}),O})();const Je=new a.OlP("Location Initialized");let Fe=(()=>{class O extends Oe{constructor(B){super(),this._doc=B,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ge().getBaseHref(this._doc)}onPopState(B){const Q=ge().getGlobalEventTarget(this._doc,"window");return Q.addEventListener("popstate",B,!1),()=>Q.removeEventListener("popstate",B)}onHashChange(B){const Q=ge().getGlobalEventTarget(this._doc,"window");return Q.addEventListener("hashchange",B,!1),()=>Q.removeEventListener("hashchange",B)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(B){this._location.pathname=B}pushState(B,Q,ue){ke()?this._history.pushState(B,Q,ue):this._location.hash=ue}replaceState(B,Q,ue){ke()?this._history.replaceState(B,Q,ue):this._location.hash=ue}forward(){this._history.forward()}back(){this._history.back()}historyGo(B=0){this._history.go(B)}getState(){return this._history.state}}return O.\u0275fac=function(B){return new(B||O)(a.LFG(Re))},O.\u0275prov=a.Yz7({token:O,factory:function(){return function Ke(){return new Fe((0,a.LFG)(Re))}()},providedIn:"platform"}),O})();function ke(){return!!window.history.pushState}function Lt(O,W){if(0==O.length)return W;if(0==W.length)return O;let B=0;return O.endsWith("/")&&B++,W.startsWith("/")&&B++,2==B?O+W.substring(1):1==B?O+W:O+"/"+W}function ze(O){const W=O.match(/#|\?|$/),B=W&&W.index||O.length;return O.slice(0,B-("/"===O[B-1]?1:0))+O.slice(B)}function Mt(O){return O&&"?"!==O[0]?"?"+O:O}let dt=(()=>{class O{historyGo(B){throw new Error("Not implemented")}}return O.\u0275fac=function(B){return new(B||O)},O.\u0275prov=a.Yz7({token:O,factory:function(){return(0,a.f3M)(_n)},providedIn:"root"}),O})();const jt=new a.OlP("appBaseHref");let _n=(()=>{class O extends dt{constructor(B,Q){super(),this._platformLocation=B,this._removeListenerFns=[],this._baseHref=Q??this._platformLocation.getBaseHrefFromDOM()??(0,a.f3M)(Re).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(B){this._removeListenerFns.push(this._platformLocation.onPopState(B),this._platformLocation.onHashChange(B))}getBaseHref(){return this._baseHref}prepareExternalUrl(B){return Lt(this._baseHref,B)}path(B=!1){const Q=this._platformLocation.pathname+Mt(this._platformLocation.search),ue=this._platformLocation.hash;return ue&&B?`${Q}${ue}`:Q}pushState(B,Q,ue,je){const it=this.prepareExternalUrl(ue+Mt(je));this._platformLocation.pushState(B,Q,it)}replaceState(B,Q,ue,je){const it=this.prepareExternalUrl(ue+Mt(je));this._platformLocation.replaceState(B,Q,it)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(B=0){this._platformLocation.historyGo?.(B)}}return O.\u0275fac=function(B){return new(B||O)(a.LFG(Oe),a.LFG(jt,8))},O.\u0275prov=a.Yz7({token:O,factory:O.\u0275fac,providedIn:"root"}),O})(),ui=(()=>{class O extends dt{constructor(B,Q){super(),this._platformLocation=B,this._baseHref="",this._removeListenerFns=[],null!=Q&&(this._baseHref=Q)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(B){this._removeListenerFns.push(this._platformLocation.onPopState(B),this._platformLocation.onHashChange(B))}getBaseHref(){return this._baseHref}path(B=!1){let Q=this._platformLocation.hash;return null==Q&&(Q="#"),Q.length>0?Q.substring(1):Q}prepareExternalUrl(B){const Q=Lt(this._baseHref,B);return Q.length>0?"#"+Q:Q}pushState(B,Q,ue,je){let it=this.prepareExternalUrl(ue+Mt(je));0==it.length&&(it=this._platformLocation.pathname),this._platformLocation.pushState(B,Q,it)}replaceState(B,Q,ue,je){let it=this.prepareExternalUrl(ue+Mt(je));0==it.length&&(it=this._platformLocation.pathname),this._platformLocation.replaceState(B,Q,it)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(B=0){this._platformLocation.historyGo?.(B)}}return O.\u0275fac=function(B){return new(B||O)(a.LFG(Oe),a.LFG(jt,8))},O.\u0275prov=a.Yz7({token:O,factory:O.\u0275fac}),O})(),Ri=(()=>{class O{constructor(B){this._subject=new a.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=B;const Q=this._locationStrategy.getBaseHref();this._basePath=function $e(O){if(new RegExp("^(https?:)?//").test(O)){const[,B]=O.split(/\/\/[^\/]+/);return B}return O}(ze(Ne(Q))),this._locationStrategy.onPopState(ue=>{this._subject.emit({url:this.path(!0),pop:!0,state:ue.state,type:ue.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(B=!1){return this.normalize(this._locationStrategy.path(B))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(B,Q=""){return this.path()==this.normalize(B+Mt(Q))}normalize(B){return O.stripTrailingSlash(function We(O,W){if(!O||!W.startsWith(O))return W;const B=W.substring(O.length);return""===B||["/",";","?","#"].includes(B[0])?B:W}(this._basePath,Ne(B)))}prepareExternalUrl(B){return B&&"/"!==B[0]&&(B="/"+B),this._locationStrategy.prepareExternalUrl(B)}go(B,Q="",ue=null){this._locationStrategy.pushState(ue,"",B,Q),this._notifyUrlChangeListeners(this.prepareExternalUrl(B+Mt(Q)),ue)}replaceState(B,Q="",ue=null){this._locationStrategy.replaceState(ue,"",B,Q),this._notifyUrlChangeListeners(this.prepareExternalUrl(B+Mt(Q)),ue)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(B=0){this._locationStrategy.historyGo?.(B)}onUrlChange(B){return this._urlChangeListeners.push(B),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(Q=>{this._notifyUrlChangeListeners(Q.url,Q.state)})),()=>{const Q=this._urlChangeListeners.indexOf(B);this._urlChangeListeners.splice(Q,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(B="",Q){this._urlChangeListeners.forEach(ue=>ue(B,Q))}subscribe(B,Q,ue){return this._subject.subscribe({next:B,error:Q,complete:ue})}}return O.normalizeQueryParams=Mt,O.joinWithSlash=Lt,O.stripTrailingSlash=ze,O.\u0275fac=function(B){return new(B||O)(a.LFG(dt))},O.\u0275prov=a.Yz7({token:O,factory:function(){return function Ie(){return new Ri((0,a.LFG)(dt))}()},providedIn:"root"}),O})();function Ne(O){return O.replace(/\/index.html$/,"")}var Et=(()=>((Et=Et||{})[Et.Decimal=0]="Decimal",Et[Et.Percent=1]="Percent",Et[Et.Currency=2]="Currency",Et[Et.Scientific=3]="Scientific",Et))(),Zt=(()=>((Zt=Zt||{})[Zt.Format=0]="Format",Zt[Zt.Standalone=1]="Standalone",Zt))(),kt=(()=>((kt=kt||{})[kt.Narrow=0]="Narrow",kt[kt.Abbreviated=1]="Abbreviated",kt[kt.Wide=2]="Wide",kt[kt.Short=3]="Short",kt))(),cn=(()=>((cn=cn||{})[cn.Short=0]="Short",cn[cn.Medium=1]="Medium",cn[cn.Long=2]="Long",cn[cn.Full=3]="Full",cn))(),on=(()=>((on=on||{})[on.Decimal=0]="Decimal",on[on.Group=1]="Group",on[on.List=2]="List",on[on.PercentSign=3]="PercentSign",on[on.PlusSign=4]="PlusSign",on[on.MinusSign=5]="MinusSign",on[on.Exponential=6]="Exponential",on[on.SuperscriptingExponent=7]="SuperscriptingExponent",on[on.PerMille=8]="PerMille",on[on.Infinity=9]="Infinity",on[on.NaN=10]="NaN",on[on.TimeSeparator=11]="TimeSeparator",on[on.CurrencyDecimal=12]="CurrencyDecimal",on[on.CurrencyGroup=13]="CurrencyGroup",on))();function qe(O,W,B){const Q=(0,a.cg1)(O),je=Dr([Q[a.wAp.DayPeriodsFormat],Q[a.wAp.DayPeriodsStandalone]],W);return Dr(je,B)}function Qe(O,W,B){const Q=(0,a.cg1)(O),je=Dr([Q[a.wAp.DaysFormat],Q[a.wAp.DaysStandalone]],W);return Dr(je,B)}function At(O,W,B){const Q=(0,a.cg1)(O),je=Dr([Q[a.wAp.MonthsFormat],Q[a.wAp.MonthsStandalone]],W);return Dr(je,B)}function lr(O,W){return Dr((0,a.cg1)(O)[a.wAp.DateFormat],W)}function En(O,W){return Dr((0,a.cg1)(O)[a.wAp.TimeFormat],W)}function jn(O,W){return Dr((0,a.cg1)(O)[a.wAp.DateTimeFormat],W)}function tn(O,W){const B=(0,a.cg1)(O),Q=B[a.wAp.NumberSymbols][W];if(typeof Q>"u"){if(W===on.CurrencyDecimal)return B[a.wAp.NumberSymbols][on.Decimal];if(W===on.CurrencyGroup)return B[a.wAp.NumberSymbols][on.Group]}return Q}function Qi(O){if(!O[a.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${O[a.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Dr(O,W){for(let B=W;B>-1;B--)if(typeof O[B]<"u")return O[B];throw new Error("Locale data API: locale data undefined")}function fo(O){const[W,B]=O.split(":");return{hours:+W,minutes:+B}}const mo=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,bn={},As=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Wi=(()=>((Wi=Wi||{})[Wi.Short=0]="Short",Wi[Wi.ShortGMT=1]="ShortGMT",Wi[Wi.Long=2]="Long",Wi[Wi.Extended=3]="Extended",Wi))(),Vt=(()=>((Vt=Vt||{})[Vt.FullYear=0]="FullYear",Vt[Vt.Month=1]="Month",Vt[Vt.Date=2]="Date",Vt[Vt.Hours=3]="Hours",Vt[Vt.Minutes=4]="Minutes",Vt[Vt.Seconds=5]="Seconds",Vt[Vt.FractionalSeconds=6]="FractionalSeconds",Vt[Vt.Day=7]="Day",Vt))(),lt=(()=>((lt=lt||{})[lt.DayPeriods=0]="DayPeriods",lt[lt.Days=1]="Days",lt[lt.Months=2]="Months",lt[lt.Eras=3]="Eras",lt))();function sr(O,W,B,Q){let ue=function tl(O){if(Pe(O))return O;if("number"==typeof O&&!isNaN(O))return new Date(O);if("string"==typeof O){if(O=O.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(O)){const[ue,je=1,it=1]=O.split("-").map(un=>+un);return ki(ue,je-1,it)}const B=parseFloat(O);if(!isNaN(O-B))return new Date(B);let Q;if(Q=O.match(mo))return function as(O){const W=new Date(0);let B=0,Q=0;const ue=O[8]?W.setUTCFullYear:W.setFullYear,je=O[8]?W.setUTCHours:W.setHours;O[9]&&(B=Number(O[9]+O[10]),Q=Number(O[9]+O[11])),ue.call(W,Number(O[1]),Number(O[2])-1,Number(O[3]));const it=Number(O[4]||0)-B,un=Number(O[5]||0)-Q,si=Number(O[6]||0),Gt=Math.floor(1e3*parseFloat("0."+(O[7]||0)));return je.call(W,it,un,si,Gt),W}(Q)}const W=new Date(O);if(!Pe(W))throw new Error(`Unable to convert "${O}" into a date`);return W}(O);W=vs(B,W)||W;let un,it=[];for(;W;){if(un=As.exec(W),!un){it.push(W);break}{it=it.concat(un.slice(1));const Gn=it.pop();if(!Gn)break;W=Gn}}let si=ue.getTimezoneOffset();Q&&(si=Jo(Q,si),ue=function el(O,W,B){const Q=B?-1:1,ue=O.getTimezoneOffset();return function ys(O,W){return(O=new Date(O.getTime())).setMinutes(O.getMinutes()+W),O}(O,Q*(Jo(W,ue)-ue))}(ue,Q,!0));let Gt="";return it.forEach(Gn=>{const Ln=function Yo(O){if(Hr[O])return Hr[O];let W;switch(O){case"G":case"GG":case"GGG":W=Yn(lt.Eras,kt.Abbreviated);break;case"GGGG":W=Yn(lt.Eras,kt.Wide);break;case"GGGGG":W=Yn(lt.Eras,kt.Narrow);break;case"y":W=Wn(Vt.FullYear,1,0,!1,!0);break;case"yy":W=Wn(Vt.FullYear,2,0,!0,!0);break;case"yyy":W=Wn(Vt.FullYear,3,0,!1,!0);break;case"yyyy":W=Wn(Vt.FullYear,4,0,!1,!0);break;case"Y":W=vi(1);break;case"YY":W=vi(2,!0);break;case"YYY":W=vi(3);break;case"YYYY":W=vi(4);break;case"M":case"L":W=Wn(Vt.Month,1,1);break;case"MM":case"LL":W=Wn(Vt.Month,2,1);break;case"MMM":W=Yn(lt.Months,kt.Abbreviated);break;case"MMMM":W=Yn(lt.Months,kt.Wide);break;case"MMMMM":W=Yn(lt.Months,kt.Narrow);break;case"LLL":W=Yn(lt.Months,kt.Abbreviated,Zt.Standalone);break;case"LLLL":W=Yn(lt.Months,kt.Wide,Zt.Standalone);break;case"LLLLL":W=Yn(lt.Months,kt.Narrow,Zt.Standalone);break;case"w":W=xi(1);break;case"ww":W=xi(2);break;case"W":W=xi(1,!0);break;case"d":W=Wn(Vt.Date,1);break;case"dd":W=Wn(Vt.Date,2);break;case"c":case"cc":W=Wn(Vt.Day,1);break;case"ccc":W=Yn(lt.Days,kt.Abbreviated,Zt.Standalone);break;case"cccc":W=Yn(lt.Days,kt.Wide,Zt.Standalone);break;case"ccccc":W=Yn(lt.Days,kt.Narrow,Zt.Standalone);break;case"cccccc":W=Yn(lt.Days,kt.Short,Zt.Standalone);break;case"E":case"EE":case"EEE":W=Yn(lt.Days,kt.Abbreviated);break;case"EEEE":W=Yn(lt.Days,kt.Wide);break;case"EEEEE":W=Yn(lt.Days,kt.Narrow);break;case"EEEEEE":W=Yn(lt.Days,kt.Short);break;case"a":case"aa":case"aaa":W=Yn(lt.DayPeriods,kt.Abbreviated);break;case"aaaa":W=Yn(lt.DayPeriods,kt.Wide);break;case"aaaaa":W=Yn(lt.DayPeriods,kt.Narrow);break;case"b":case"bb":case"bbb":W=Yn(lt.DayPeriods,kt.Abbreviated,Zt.Standalone,!0);break;case"bbbb":W=Yn(lt.DayPeriods,kt.Wide,Zt.Standalone,!0);break;case"bbbbb":W=Yn(lt.DayPeriods,kt.Narrow,Zt.Standalone,!0);break;case"B":case"BB":case"BBB":W=Yn(lt.DayPeriods,kt.Abbreviated,Zt.Format,!0);break;case"BBBB":W=Yn(lt.DayPeriods,kt.Wide,Zt.Format,!0);break;case"BBBBB":W=Yn(lt.DayPeriods,kt.Narrow,Zt.Format,!0);break;case"h":W=Wn(Vt.Hours,1,-12);break;case"hh":W=Wn(Vt.Hours,2,-12);break;case"H":W=Wn(Vt.Hours,1);break;case"HH":W=Wn(Vt.Hours,2);break;case"m":W=Wn(Vt.Minutes,1);break;case"mm":W=Wn(Vt.Minutes,2);break;case"s":W=Wn(Vt.Seconds,1);break;case"ss":W=Wn(Vt.Seconds,2);break;case"S":W=Wn(Vt.FractionalSeconds,1);break;case"SS":W=Wn(Vt.FractionalSeconds,2);break;case"SSS":W=Wn(Vt.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":W=ts(Wi.Short);break;case"ZZZZZ":W=ts(Wi.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":W=ts(Wi.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":W=ts(Wi.Long);break;default:return null}return Hr[O]=W,W}(Gn);Gt+=Ln?Ln(ue,B,si):"''"===Gn?"'":Gn.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),Gt}function ki(O,W,B){const Q=new Date(0);return Q.setFullYear(O,W,B),Q.setHours(0,0,0),Q}function vs(O,W){const B=function Me(O){return(0,a.cg1)(O)[a.wAp.LocaleId]}(O);if(bn[B]=bn[B]||{},bn[B][W])return bn[B][W];let Q="";switch(W){case"shortDate":Q=lr(O,cn.Short);break;case"mediumDate":Q=lr(O,cn.Medium);break;case"longDate":Q=lr(O,cn.Long);break;case"fullDate":Q=lr(O,cn.Full);break;case"shortTime":Q=En(O,cn.Short);break;case"mediumTime":Q=En(O,cn.Medium);break;case"longTime":Q=En(O,cn.Long);break;case"fullTime":Q=En(O,cn.Full);break;case"short":const ue=vs(O,"shortTime"),je=vs(O,"shortDate");Q=es(jn(O,cn.Short),[ue,je]);break;case"medium":const it=vs(O,"mediumTime"),un=vs(O,"mediumDate");Q=es(jn(O,cn.Medium),[it,un]);break;case"long":const si=vs(O,"longTime"),Gt=vs(O,"longDate");Q=es(jn(O,cn.Long),[si,Gt]);break;case"full":const Gn=vs(O,"fullTime"),Ln=vs(O,"fullDate");Q=es(jn(O,cn.Full),[Gn,Ln])}return Q&&(bn[B][W]=Q),Q}function es(O,W){return W&&(O=O.replace(/\{([^}]+)}/g,function(B,Q){return null!=W&&Q in W?W[Q]:B})),O}function Rr(O,W,B="-",Q,ue){let je="";(O<0||ue&&O<=0)&&(ue?O=1-O:(O=-O,je=B));let it=String(O);for(;it.length<W;)it="0"+it;return Q&&(it=it.slice(it.length-W)),je+it}function Wn(O,W,B=0,Q=!1,ue=!1){return function(je,it){let un=function Aa(O,W){switch(O){case Vt.FullYear:return W.getFullYear();case Vt.Month:return W.getMonth();case Vt.Date:return W.getDate();case Vt.Hours:return W.getHours();case Vt.Minutes:return W.getMinutes();case Vt.Seconds:return W.getSeconds();case Vt.FractionalSeconds:return W.getMilliseconds();case Vt.Day:return W.getDay();default:throw new Error(`Unknown DateType value "${O}".`)}}(O,je);if((B>0||un>-B)&&(un+=B),O===Vt.Hours)0===un&&-12===B&&(un=12);else if(O===Vt.FractionalSeconds)return function nn(O,W){return Rr(O,3).substring(0,W)}(un,W);const si=tn(it,on.MinusSign);return Rr(un,W,si,Q,ue)}}function Yn(O,W,B=Zt.Format,Q=!1){return function(ue,je){return function Wc(O,W,B,Q,ue,je){switch(B){case lt.Months:return At(W,ue,Q)[O.getMonth()];case lt.Days:return Qe(W,ue,Q)[O.getDay()];case lt.DayPeriods:const it=O.getHours(),un=O.getMinutes();if(je){const Gt=function ha(O){const W=(0,a.cg1)(O);return Qi(W),(W[a.wAp.ExtraData][2]||[]).map(Q=>"string"==typeof Q?fo(Q):[fo(Q[0]),fo(Q[1])])}(W),Gn=function Qr(O,W,B){const Q=(0,a.cg1)(O);Qi(Q);const je=Dr([Q[a.wAp.ExtraData][0],Q[a.wAp.ExtraData][1]],W)||[];return Dr(je,B)||[]}(W,ue,Q),Ln=Gt.findIndex(ur=>{if(Array.isArray(ur)){const[U,C]=ur,u=it>=U.hours&&un>=U.minutes,V=it<C.hours||it===C.hours&&un<C.minutes;if(U.hours<C.hours){if(u&&V)return!0}else if(u||V)return!0}else if(ur.hours===it&&ur.minutes===un)return!0;return!1});if(-1!==Ln)return Gn[Ln]}return qe(W,ue,Q)[it<12?0:1];case lt.Eras:return function xt(O,W){return Dr((0,a.cg1)(O)[a.wAp.Eras],W)}(W,Q)[O.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${B}`)}}(ue,je,O,W,B,Q)}}function ts(O){return function(W,B,Q){const ue=-1*Q,je=tn(B,on.MinusSign),it=ue>0?Math.floor(ue/60):Math.ceil(ue/60);switch(O){case Wi.Short:return(ue>=0?"+":"")+Rr(it,2,je)+Rr(Math.abs(ue%60),2,je);case Wi.ShortGMT:return"GMT"+(ue>=0?"+":"")+Rr(it,1,je);case Wi.Long:return"GMT"+(ue>=0?"+":"")+Rr(it,2,je)+":"+Rr(Math.abs(ue%60),2,je);case Wi.Extended:return 0===Q?"Z":(ue>=0?"+":"")+Rr(it,2,je)+":"+Rr(Math.abs(ue%60),2,je);default:throw new Error(`Unknown zone width "${O}"`)}}}const Ia=0,Bs=4;function os(O){return ki(O.getFullYear(),O.getMonth(),O.getDate()+(Bs-O.getDay()))}function xi(O,W=!1){return function(B,Q){let ue;if(W){const je=new Date(B.getFullYear(),B.getMonth(),1).getDay()-1,it=B.getDate();ue=1+Math.floor((it+je)/7)}else{const je=os(B),it=function Is(O){const W=ki(O,Ia,1).getDay();return ki(O,0,1+(W<=Bs?Bs:Bs+7)-W)}(je.getFullYear()),un=je.getTime()-it.getTime();ue=1+Math.round(un/6048e5)}return Rr(ue,O,tn(Q,on.MinusSign))}}function vi(O,W=!1){return function(B,Q){return Rr(os(B).getFullYear(),O,tn(Q,on.MinusSign),W)}}const Hr={};function Jo(O,W){O=O.replace(/:/g,"");const B=Date.parse("Jan 01, 1970 00:00:00 "+O)/6e4;return isNaN(B)?W:B}function Pe(O){return O instanceof Date&&!isNaN(O.valueOf())}const ve=/^(\d+)?\.((\d+)(-(\d+))?)?$/,ae=22,Ce=".",Ve="0",en=";",Vn=",",Gi="#";function Ps(O){const W=parseInt(O);if(isNaN(W))throw new Error("Invalid integer literal when parsing "+O);return W}function Ii(O,W){W=encodeURIComponent(W);for(const B of O.split(";")){const Q=B.indexOf("="),[ue,je]=-1==Q?[B,""]:[B.slice(0,Q),B.slice(Q+1)];if(ue.trim()===W)return decodeURIComponent(je)}return null}class Yt{constructor(W,B,Q,ue){this.$implicit=W,this.ngForOf=B,this.index=Q,this.count=ue}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let An=(()=>{class O{set ngForOf(B){this._ngForOf=B,this._ngForOfDirty=!0}set ngForTrackBy(B){this._trackByFn=B}get ngForTrackBy(){return this._trackByFn}constructor(B,Q,ue){this._viewContainer=B,this._template=Q,this._differs=ue,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(B){B&&(this._template=B)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const B=this._ngForOf;!this._differ&&B&&(this._differ=this._differs.find(B).create(this.ngForTrackBy))}if(this._differ){const B=this._differ.diff(this._ngForOf);B&&this._applyChanges(B)}}_applyChanges(B){const Q=this._viewContainer;B.forEachOperation((ue,je,it)=>{if(null==ue.previousIndex)Q.createEmbeddedView(this._template,new Yt(ue.item,this._ngForOf,-1,-1),null===it?void 0:it);else if(null==it)Q.remove(null===je?void 0:je);else if(null!==je){const un=Q.get(je);Q.move(un,it),Pi(un,ue)}});for(let ue=0,je=Q.length;ue<je;ue++){const un=Q.get(ue).context;un.index=ue,un.count=je,un.ngForOf=this._ngForOf}B.forEachIdentityChange(ue=>{Pi(Q.get(ue.currentIndex),ue)})}static ngTemplateContextGuard(B,Q){return!0}}return O.\u0275fac=function(B){return new(B||O)(a.Y36(a.s_b),a.Y36(a.Rgc),a.Y36(a.ZZ4))},O.\u0275dir=a.lG2({type:O,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),O})();function Pi(O,W){O.context.$implicit=W.item}let bs=(()=>{class O{constructor(B,Q){this._viewContainer=B,this._context=new er,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=Q}set ngIf(B){this._context.$implicit=this._context.ngIf=B,this._updateView()}set ngIfThen(B){Po("ngIfThen",B),this._thenTemplateRef=B,this._thenViewRef=null,this._updateView()}set ngIfElse(B){Po("ngIfElse",B),this._elseTemplateRef=B,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(B,Q){return!0}}return O.\u0275fac=function(B){return new(B||O)(a.Y36(a.s_b),a.Y36(a.Rgc))},O.\u0275dir=a.lG2({type:O,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),O})();class er{constructor(){this.$implicit=null,this.ngIf=null}}function Po(O,W){if(W&&!W.createEmbeddedView)throw new Error(`${O} must be a TemplateRef, but received '${(0,a.AaK)(W)}'.`)}let Sr=(()=>{class O{constructor(B){this._viewContainerRef=B,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(B){if(B.ngTemplateOutlet||B.ngTemplateOutletInjector){const Q=this._viewContainerRef;if(this._viewRef&&Q.remove(Q.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:ue,ngTemplateOutletContext:je,ngTemplateOutletInjector:it}=this;this._viewRef=Q.createEmbeddedView(ue,je,it?{injector:it}:void 0)}else this._viewRef=null}else this._viewRef&&B.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return O.\u0275fac=function(B){return new(B||O)(a.Y36(a.s_b))},O.\u0275dir=a.lG2({type:O,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[a.TTD]}),O})();let Xo=(()=>{class O{constructor(B){this._locale=B}transform(B,Q,ue){if(!function kl(O){return!(null==O||""===O||O!=O)}(B))return null;ue=ue||this._locale;try{return function Pa(O,W,B){return function vr(O,W,B,Q,ue,je,it=!1){let un="",si=!1;if(isFinite(O)){let Gt=function go(O){let Q,ue,je,it,un,W=Math.abs(O)+"",B=0;for((ue=W.indexOf(Ce))>-1&&(W=W.replace(Ce,"")),(je=W.search(/e/i))>0?(ue<0&&(ue=je),ue+=+W.slice(je+1),W=W.substring(0,je)):ue<0&&(ue=W.length),je=0;W.charAt(je)===Ve;je++);if(je===(un=W.length))Q=[0],ue=1;else{for(un--;W.charAt(un)===Ve;)un--;for(ue-=je,Q=[],it=0;je<=un;je++,it++)Q[it]=Number(W.charAt(je))}return ue>ae&&(Q=Q.splice(0,ae-1),B=ue-1,ue=1),{digits:Q,exponent:B,integerLen:ue}}(O);it&&(Gt=function Ol(O){if(0===O.digits[0])return O;const W=O.digits.length-O.integerLen;return O.exponent?O.exponent+=2:(0===W?O.digits.push(0,0):1===W&&O.digits.push(0),O.integerLen+=2),O}(Gt));let Gn=W.minInt,Ln=W.minFrac,ur=W.maxFrac;if(je){const sn=je.match(ve);if(null===sn)throw new Error(`${je} is not a valid digit info`);const ai=sn[1],qi=sn[3],yr=sn[5];null!=ai&&(Gn=Ps(ai)),null!=qi&&(Ln=Ps(qi)),null!=yr?ur=Ps(yr):null!=qi&&Ln>ur&&(ur=Ln)}!function pa(O,W,B){if(W>B)throw new Error(`The minimum number of digits after fraction (${W}) is higher than the maximum (${B}).`);let Q=O.digits,ue=Q.length-O.integerLen;const je=Math.min(Math.max(W,ue),B);let it=je+O.integerLen,un=Q[it];if(it>0){Q.splice(Math.max(O.integerLen,it));for(let Ln=it;Ln<Q.length;Ln++)Q[Ln]=0}else{ue=Math.max(0,ue),O.integerLen=1,Q.length=Math.max(1,it=je+1),Q[0]=0;for(let Ln=1;Ln<it;Ln++)Q[Ln]=0}if(un>=5)if(it-1<0){for(let Ln=0;Ln>it;Ln--)Q.unshift(0),O.integerLen++;Q.unshift(1),O.integerLen++}else Q[it-1]++;for(;ue<Math.max(0,je);ue++)Q.push(0);let si=0!==je;const Gt=W+O.integerLen,Gn=Q.reduceRight(function(Ln,ur,U,C){return C[U]=(ur+=Ln)<10?ur:ur-10,si&&(0===C[U]&&U>=Gt?C.pop():si=!1),ur>=10?1:0},0);Gn&&(Q.unshift(Gn),O.integerLen++)}(Gt,Ln,ur);let U=Gt.digits,C=Gt.integerLen;const u=Gt.exponent;let V=[];for(si=U.every(sn=>!sn);C<Gn;C++)U.unshift(0);for(;C<0;C++)U.unshift(0);C>0?V=U.splice(C,U.length):(V=U,U=[0]);const Xe=[];for(U.length>=W.lgSize&&Xe.unshift(U.splice(-W.lgSize,U.length).join(""));U.length>W.gSize;)Xe.unshift(U.splice(-W.gSize,U.length).join(""));U.length&&Xe.unshift(U.join("")),un=Xe.join(tn(B,Q)),V.length&&(un+=tn(B,ue)+V.join("")),u&&(un+=tn(B,on.Exponential)+"+"+u)}else un=tn(B,on.Infinity);return un=O<0&&!si?W.negPre+un+W.negSuf:W.posPre+un+W.posSuf,un}(O,function Zo(O,W="-"){const B={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},Q=O.split(en),ue=Q[0],je=Q[1],it=-1!==ue.indexOf(Ce)?ue.split(Ce):[ue.substring(0,ue.lastIndexOf(Ve)+1),ue.substring(ue.lastIndexOf(Ve)+1)],un=it[0],si=it[1]||"";B.posPre=un.substring(0,un.indexOf(Gi));for(let Gn=0;Gn<si.length;Gn++){const Ln=si.charAt(Gn);Ln===Ve?B.minFrac=B.maxFrac=Gn+1:Ln===Gi?B.maxFrac=Gn+1:B.posSuf+=Ln}const Gt=un.split(Vn);if(B.gSize=Gt[1]?Gt[1].length:0,B.lgSize=Gt[2]||Gt[1]?(Gt[2]||Gt[1]).length:0,je){const Gn=ue.length-B.posPre.length-B.posSuf.length,Ln=je.indexOf(Gi);B.negPre=je.substring(0,Ln).replace(/'/g,""),B.negSuf=je.slice(Ln+Gn).replace(/'/g,"")}else B.negPre=W+B.posPre,B.negSuf=B.posSuf;return B}(function Si(O,W){return(0,a.cg1)(O)[a.wAp.NumberFormats][W]}(W,Et.Percent),tn(W,on.MinusSign)),W,on.Group,on.Decimal,B,!0).replace(new RegExp("%","g"),tn(W,on.PercentSign))}(function ol(O){if("string"==typeof O&&!isNaN(Number(O)-parseFloat(O)))return Number(O);if("number"!=typeof O)throw new Error(`${O} is not a number`);return O}(B),ue,Q)}catch(je){throw function kr(O,W){return new a.vHH(2100,!1)}()}}}return O.\u0275fac=function(B){return new(B||O)(a.Y36(a.soG,16))},O.\u0275pipe=a.Yjl({name:"percent",type:O,pure:!0,standalone:!0}),O})();let Ld=(()=>{class O{}return O.\u0275fac=function(B){return new(B||O)},O.\u0275mod=a.oAB({type:O}),O.\u0275inj=a.cJS({}),O})();const La="browser";function jd(O){return O===La}let No=(()=>{class O{}return O.\u0275prov=(0,a.Yz7)({token:O,providedIn:"root",factory:()=>new Fo((0,a.LFG)(Re),window)}),O})();class Fo{constructor(W,B){this.document=W,this.window=B,this.offset=()=>[0,0]}setOffset(W){this.offset=Array.isArray(W)?()=>W:W}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(W){this.supportsScrolling()&&this.window.scrollTo(W[0],W[1])}scrollToAnchor(W){if(!this.supportsScrolling())return;const B=function cl(O,W){const B=O.getElementById(W)||O.getElementsByName(W)[0];if(B)return B;if("function"==typeof O.createTreeWalker&&O.body&&(O.body.createShadowRoot||O.body.attachShadow)){const Q=O.createTreeWalker(O.body,NodeFilter.SHOW_ELEMENT);let ue=Q.currentNode;for(;ue;){const je=ue.shadowRoot;if(je){const it=je.getElementById(W)||je.querySelector(`[name="${W}"]`);if(it)return it}ue=Q.nextNode()}}return null}(this.document,W);B&&(this.scrollToElement(B),B.focus())}setHistoryScrollRestoration(W){if(this.supportScrollRestoration()){const B=this.window.history;B&&B.scrollRestoration&&(B.scrollRestoration=W)}}scrollToElement(W){const B=W.getBoundingClientRect(),Q=B.left+this.window.pageXOffset,ue=B.top+this.window.pageYOffset,je=this.offset();this.window.scrollTo(Q-je[0],ue-je[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const W=$i(this.window.history)||$i(Object.getPrototypeOf(this.window.history));return!(!W||!W.writable&&!W.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function $i(O){return Object.getOwnPropertyDescriptor(O,"scrollRestoration")}class Qo{}},1571:(pn,Ze,te)=>{te.d(Ze,{tb:()=>Kb,AFp:()=>kb,ip1:()=>jb,CZH:()=>yy,hGG:()=>PM,z2F:()=>Ty,sBO:()=>gM,Sil:()=>XT,_Vd:()=>ld,EJc:()=>KT,Xts:()=>qr,SBq:()=>cd,lqb:()=>wc,qLn:()=>gh,vpe:()=>Io,XFs:()=>bn,OlP:()=>mi,zs3:()=>vu,ZZ4:()=>G0,aQg:()=>V0,soG:()=>by,YKP:()=>oi,h0i:()=>Xt,PXZ:()=>dM,R0b:()=>sc,FiY:()=>Ku,Lbi:()=>YT,g9A:()=>Vb,Qsj:()=>ph,FYo:()=>Vf,JOm:()=>$a,tp0:()=>Wa,Rgc:()=>Pd,dDg:()=>aM,eoX:()=>Jb,GfV:()=>mu,s_b:()=>rf,ifc:()=>ae,LMc:()=>FM,MMx:()=>re,Lck:()=>Un,eFA:()=>Xb,Gpc:()=>Mt,f3M:()=>Hr,$WT:()=>zr,_c5:()=>IM,c2e:()=>JT,zSh:()=>yi,wAp:()=>Pn,vHH:()=>Ie,lri:()=>$b,rWj:()=>Yb,D6c:()=>OM,cg1:()=>vp,kL8:()=>K_,dqk:()=>ki,Z0I:()=>ha,eJc:()=>D0,CqO:()=>kc,QGY:()=>wd,F4k:()=>Cl,RDi:()=>gv,AaK:()=>Ke,zW0:()=>r,qOj:()=>up,TTD:()=>Lo,_Bn:()=>xn,jDz:()=>Ot,xp6:()=>Dm,uIk:()=>Ti,Tol:()=>Kv,MT6:()=>qm,ekj:()=>gp,Suo:()=>mb,Xpm:()=>Pa,lG2:()=>no,Yz7:()=>Mn,cJS:()=>Ci,oAB:()=>go,Yjl:()=>Ko,Y36:()=>Pc,_UZ:()=>Yh,BQk:()=>Dd,ynx:()=>Jh,qZA:()=>$h,TgZ:()=>jc,EpF:()=>ic,n5z:()=>ps,Ikx:()=>Qm,SDv:()=>rt,QtT:()=>zt,pQV:()=>$t,LFG:()=>xi,$8M:()=>mc,$Z:()=>Em,NdJ:()=>Ou,CRH:()=>gb,oxw:()=>Zh,ALo:()=>pt,lcZ:()=>Mi,Hsn:()=>Rd,F$t:()=>El,Q6J:()=>Sl,s9C:()=>Ym,MGl:()=>Sd,DdM:()=>Cn,VKq:()=>rr,WLB:()=>Fs,kEZ:()=>ho,iGM:()=>fb,MAs:()=>xd,KtG:()=>xs,CHM:()=>Ki,P3R:()=>nd,Udp:()=>V_,YNc:()=>qa,W1O:()=>bb,_uU:()=>Bu,Oqu:()=>ny,hij:()=>W_,Gf:()=>pb});var a=te(7579),K=te(727),ge=te(9751),Se=te(6451),xe=te(8421),Re=te(930),Oe=te(4482);function Je(n,i,...o){if(!0===i)return void n();if(!1===i)return;const d=new Re.Hp({next:()=>{d.unsubscribe(),n()}});return(0,xe.Xf)(i(...o)).subscribe(d)}function Fe(n){for(let i in n)if(n[i]===Fe)return i;throw Error("Could not find renamed property on target object.")}function ke(n,i){for(const o in i)i.hasOwnProperty(o)&&!n.hasOwnProperty(o)&&(n[o]=i[o])}function Ke(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Ke).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const i=n.toString();if(null==i)return""+i;const o=i.indexOf("\n");return-1===o?i:i.substring(0,o)}function Lt(n,i){return null==n||""===n?null===i?"":i:null==i||""===i?n:n+" "+i}const ze=Fe({__forward_ref__:Fe});function Mt(n){return n.__forward_ref__=Mt,n.toString=function(){return Ke(this())},n}function dt(n){return jt(n)?n():n}function jt(n){return"function"==typeof n&&n.hasOwnProperty(ze)&&n.__forward_ref__===Mt}function _n(n){return n&&!!n.\u0275providers}const Ri="https://g.co/ng/security#xss";class Ie extends Error{constructor(i,o){super(We(i,o)),this.code=i}}function We(n,i){return`NG0${Math.abs(n)}${i?": "+i.trim():""}`}function Ne(n){return"string"==typeof n?n:null==n?"":String(n)}function Zt(n,i){throw new Ie(-201,!1)}function tn(n,i,o,d){throw new Error(`ASSERTION ERROR: ${n}`+(null==d?"":` [Expected=> ${o} ${d} ${i} <=Actual]`))}function Mn(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Ci(n){return{providers:n.providers||[],imports:n.imports||[]}}function Qi(n){return Qr(n,po)||Qr(n,wr)}function ha(n){return null!==Qi(n)}function Qr(n,i){return n.hasOwnProperty(i)?n[i]:null}function fo(n){return n&&(n.hasOwnProperty(Li)||n.hasOwnProperty(mo))?n[Li]:null}const po=Fe({\u0275prov:Fe}),Li=Fe({\u0275inj:Fe}),wr=Fe({ngInjectableDef:Fe}),mo=Fe({ngInjectorDef:Fe});var bn=(()=>((bn=bn||{})[bn.Default=0]="Default",bn[bn.Host=1]="Host",bn[bn.Self=2]="Self",bn[bn.SkipSelf=4]="SkipSelf",bn[bn.Optional=8]="Optional",bn))();let As;function Vt(n){const i=As;return As=n,i}function lt(n,i,o){const d=Qi(n);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:o&bn.Optional?null:void 0!==i?i:void Zt(Ke(n))}const ki=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),nn={},Wn="__NG_DI_FLAG__",Aa="ngTempTokenPath",Yn="ngTokenPath",Wc=/\n/gm,ts="\u0275",Ia="__source";let Bs;function Is(n){const i=Bs;return Bs=n,i}function os(n,i=bn.Default){if(void 0===Bs)throw new Ie(-203,!1);return null===Bs?lt(n,void 0,i):Bs.get(n,i&bn.Optional?null:void 0,i)}function xi(n,i=bn.Default){return(function Wi(){return As}()||os)(dt(n),i)}function Hr(n,i=bn.Default){return xi(n,Yo(i))}function Yo(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Jo(n){const i=[];for(let o=0;o<n.length;o++){const d=dt(n[o]);if(Array.isArray(d)){if(0===d.length)throw new Ie(900,!1);let m,y=bn.Default;for(let D=0;D<d.length;D++){const I=d[D],F=el(I);"number"==typeof F?-1===F?m=I.token:y|=F:m=I}i.push(xi(m,y))}else i.push(xi(d))}return i}function ys(n,i){return n[Wn]=i,n.prototype[Wn]=i,n}function el(n){return n[Wn]}function Pe(n){return{toString:n}.toString()}var ve=(()=>((ve=ve||{})[ve.OnPush=0]="OnPush",ve[ve.Default=1]="Default",ve))(),ae=(()=>{return(n=ae||(ae={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",ae;var n})();const Ce={},Ve=[],en=Fe({\u0275cmp:Fe}),Vn=Fe({\u0275dir:Fe}),Gi=Fe({\u0275pipe:Fe}),or=Fe({\u0275mod:Fe}),ls=Fe({\u0275fac:Fe}),vr=Fe({__NG_ELEMENT_ID__:Fe});let fa=0;function Pa(n){return Pe(()=>{const i=oc(n),o={...i,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===ve.OnPush,directiveDefs:null,pipeDefs:null,dependencies:i.standalone&&n.dependencies||null,getStandaloneInjector:null,data:n.data||{},encapsulation:n.encapsulation||ae.Emulated,id:"c"+fa++,styles:n.styles||Ve,_:null,schemas:n.schemas||null,tView:null};Oa(o);const d=n.dependencies;return o.directiveDefs=js(d,!1),o.pipeDefs=js(d,!0),o})}function Zo(n){return gi(n)||cr(n)}function Ol(n){return null!==n}function go(n){return Pe(()=>({type:n.type,bootstrap:n.bootstrap||Ve,declarations:n.declarations||Ve,imports:n.imports||Ve,exports:n.exports||Ve,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Ps(n,i){if(null==n)return Ce;const o={};for(const d in n)if(n.hasOwnProperty(d)){let m=n[d],y=m;Array.isArray(m)&&(y=m[1],m=m[0]),o[m]=d,i&&(i[m]=y)}return o}function no(n){return Pe(()=>{const i=oc(n);return Oa(i),i})}function Ko(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function gi(n){return n[en]||null}function cr(n){return n[Vn]||null}function Ii(n){return n[Gi]||null}function zr(n){const i=gi(n)||cr(n)||Ii(n);return null!==i&&i.standalone}function jr(n,i){const o=n[or]||null;if(!o&&!0===i)throw new Error(`Type ${Ke(n)} does not have '\u0275mod' property.`);return o}function oc(n){const i={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:i,exportAs:n.exportAs||null,standalone:!0===n.standalone,selectors:n.selectors||Ve,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Ps(n.inputs,i),outputs:Ps(n.outputs)}}function Oa(n){n.features?.forEach(i=>i(n))}function js(n,i){if(!n)return null;const o=i?Ii:Zo;return()=>("function"==typeof n?n():n).map(d=>o(d)).filter(Ol)}const ks=0,Yt=1,An=2,Pi=3,ns=4,bs=5,er=6,Po=7,Bi=8,Gs=9,_o=10,kn=11,ma=12,Vs=13,ga=14,Oo=15,Sr=16,Nl=17,kr=18,cs=19,us=20,Di=21,Oi=22,vo=1,il=2,Ll=7,Gr=8,Us=9,Wr=10;function $r(n){return Array.isArray(n)&&"object"==typeof n[vo]}function Cr(n){return Array.isArray(n)&&!0===n[vo]}function _a(n){return 0!=(4&n.flags)}function Fa(n){return n.componentOffset>-1}function Bl(n){return 1==(1&n.flags)}function is(n){return!!n.template}function qo(n){return 0!=(256&n[An])}function $i(n,i){return n.hasOwnProperty(ls)?n[ls]:null}class cl{constructor(i,o,d){this.previousValue=i,this.currentValue=o,this.firstChange=d}isFirstChange(){return this.firstChange}}function Lo(){return Qo}function Qo(n){return n.type.prototype.ngOnChanges&&(n.setInput=Yi),Ts}function Ts(){const n=ac(this),i=n?.current;if(i){const o=n.previous;if(o===Ce)n.previous=i;else for(let d in i)o[d]=i[d];n.current=null,this.ngOnChanges(i)}}function Yi(n,i,o,d){const m=this.declaredInputs[o],y=ac(n)||function Yc(n,i){return n[ul]=i}(n,{previous:Ce,current:null}),D=y.current||(y.current={}),I=y.previous,F=I[m];D[m]=new cl(F&&F.currentValue,i,I===Ce),n[d]=i}Lo.ngInherit=!0;const ul="__ngSimpleChanges__";function ac(n){return n[ul]||null}const ds=function(n,i,o){};function Vi(n){for(;Array.isArray(n);)n=n[ks];return n}function ea(n,i){return Vi(i[n])}function Ms(n,i){return Vi(i[n.index])}function Hl(n,i){return n.data[i]}function Hs(n,i){return n[i]}function Yr(n,i){const o=i[n];return $r(o)?o:o[ks]}function yo(n){return 64==(64&n[An])}function _i(n,i){return null==i?null:n[i]}function zu(n){n[kr]=0}function ht(n,i){n[bs]+=i;let o=n,d=n[Pi];for(;null!==d&&(1===i&&1===o[bs]||-1===i&&0===o[bs]);)d[bs]+=i,o=d,d=d[Pi]}const mn={lFrame:na(null),bindingsEnabled:!0};function Bo(){return mn.bindingsEnabled}function et(){return mn.lFrame.lView}function ei(){return mn.lFrame.tView}function Ki(n){return mn.lFrame.contextLView=n,n[Bi]}function xs(n){return mn.lFrame.contextLView=null,n}function pr(){let n=zl();for(;null!==n&&64===n.type;)n=n.parent;return n}function zl(){return mn.lFrame.currentTNode}function ro(){const n=mn.lFrame,i=n.currentTNode;return n.isParent?i:i.parent}function Wt(n,i){const o=mn.lFrame;o.currentTNode=n,o.isParent=i}function bo(){return mn.lFrame.isParent}function ya(){mn.lFrame.isParent=!1}function tr(){const n=mn.lFrame;let i=n.bindingRootIndex;return-1===i&&(i=n.bindingRootIndex=n.tView.bindingStartIndex),i}function Jn(){return mn.lFrame.bindingIndex}function zs(){return mn.lFrame.bindingIndex++}function Ws(n){const i=mn.lFrame,o=i.bindingIndex;return i.bindingIndex=i.bindingIndex+n,o}function Zc(n){mn.lFrame.inI18n=n}function ja(n,i){const o=mn.lFrame;o.bindingIndex=o.bindingRootIndex=n,le(i)}function le(n){mn.lFrame.currentDirectiveIndex=n}function ml(){return mn.lFrame.currentQueryIndex}function so(n){mn.lFrame.currentQueryIndex=n}function $s(n){const i=n[Yt];return 2===i.type?i.declTNode:1===i.type?n[er]:null}function oo(n,i,o){if(o&bn.SkipSelf){let m=i,y=n;for(;!(m=m.parent,null!==m||o&bn.Host||(m=$s(y),null===m||(y=y[Oo],10&m.type))););if(null===m)return!1;i=m,n=y}const d=mn.lFrame=jo();return d.currentTNode=i,d.lView=n,!0}function To(n){const i=jo(),o=n[Yt];mn.lFrame=i,i.currentTNode=o.firstChild,i.lView=n,i.tView=o,i.contextLView=n,i.bindingIndex=o.bindingStartIndex,i.inI18n=!1}function jo(){const n=mn.lFrame,i=null===n?null:n.child;return null===i?na(n):i}function na(n){const i={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=i),i}function ia(){const n=mn.lFrame;return mn.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const ao=ia;function Mo(){const n=ia();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Er(){return mn.lFrame.selectedIndex}function Ds(n){mn.lFrame.selectedIndex=n}function Ei(){const n=mn.lFrame;return Hl(n.tView,n.selectedIndex)}function B(n,i){for(let o=i.directiveStart,d=i.directiveEnd;o<d;o++){const y=n.data[o].type.prototype,{ngAfterContentInit:D,ngAfterContentChecked:I,ngAfterViewInit:F,ngAfterViewChecked:z,ngOnDestroy:ee}=y;D&&(n.contentHooks??(n.contentHooks=[])).push(-o,D),I&&((n.contentHooks??(n.contentHooks=[])).push(o,I),(n.contentCheckHooks??(n.contentCheckHooks=[])).push(o,I)),F&&(n.viewHooks??(n.viewHooks=[])).push(-o,F),z&&((n.viewHooks??(n.viewHooks=[])).push(o,z),(n.viewCheckHooks??(n.viewCheckHooks=[])).push(o,z)),null!=ee&&(n.destroyHooks??(n.destroyHooks=[])).push(o,ee)}}function Q(n,i,o){it(n,i,3,o)}function ue(n,i,o,d){(3&n[An])===o&&it(n,i,o,d)}function je(n,i){let o=n[An];(3&o)===i&&(o&=2047,o+=1,n[An]=o)}function it(n,i,o,d){const y=d??-1,D=i.length-1;let I=0;for(let F=void 0!==d?65535&n[kr]:0;F<D;F++)if("number"==typeof i[F+1]){if(I=i[F],null!=d&&I>=d)break}else i[F]<0&&(n[kr]+=65536),(I<y||-1==y)&&(un(n,o,i,F),n[kr]=(4294901760&n[kr])+F+2),F++}function un(n,i,o,d){const m=o[d]<0,y=o[d+1],I=n[m?-o[d]:o[d]];if(m){if(n[An]>>11<n[kr]>>16&&(3&n[An])===i){n[An]+=2048,ds(4,I,y);try{y.call(I)}finally{ds(5,I,y)}}}else{ds(4,I,y);try{y.call(I)}finally{ds(5,I,y)}}}const si=-1;class Gt{constructor(i,o,d){this.factory=i,this.resolving=!1,this.canSeeViewProviders=o,this.injectImpl=d}}function sn(n,i,o){let d=0;for(;d<o.length;){const m=o[d];if("number"==typeof m){if(0!==m)break;d++;const y=o[d++],D=o[d++],I=o[d++];n.setAttribute(i,D,I,y)}else{const y=m,D=o[++d];qi(y)?n.setProperty(i,y,D):n.setAttribute(i,y,D),d++}}return d}function ai(n){return 3===n||4===n||6===n}function qi(n){return 64===n.charCodeAt(0)}function yr(n,i){if(null!==i&&0!==i.length)if(null===n||0===n.length)n=i.slice();else{let o=-1;for(let d=0;d<i.length;d++){const m=i[d];"number"==typeof m?o=m:0===o||ba(n,o,m,null,-1===o||2===o?i[++d]:null)}}return n}function ba(n,i,o,d,m){let y=0,D=n.length;if(-1===i)D=-1;else for(;y<n.length;){const I=n[y++];if("number"==typeof I){if(I===i){D=-1;break}if(I>i){D=y-1;break}}}for(;y<n.length;){const I=n[y];if("number"==typeof I)break;if(I===o){if(null===d)return void(null!==m&&(n[y+1]=m));if(d===n[y+1])return void(n[y+2]=m)}y++,null!==d&&y++,null!==m&&y++}-1!==D&&(n.splice(D,0,i),y=D+1),n.splice(y++,0,o),null!==d&&n.splice(y++,0,d),null!==m&&n.splice(y++,0,m)}function Jr(n){return n!==si}function lo(n){return 32767&n}function sa(n,i){let o=function Wl(n){return n>>16}(n),d=i;for(;o>0;)d=d[Oo],o--;return d}let qc=!0;function fc(n){const i=qc;return qc=n,i}const Xc=255,Qc=5;let eu=0;const xo={};function Ys(n,i){const o=Ji(n,i);if(-1!==o)return o;const d=i[Yt];d.firstCreatePass&&(n.injectorIndex=i.length,ko(d.data,n),ko(i,null),ko(d.blueprint,null));const m=fs(n,i),y=n.injectorIndex;if(Jr(m)){const D=lo(m),I=sa(m,i),F=I[Yt].data;for(let z=0;z<8;z++)i[y+z]=I[D+z]|F[D+z]}return i[y+8]=m,y}function ko(n,i){n.push(0,0,0,0,0,0,0,0,i)}function Ji(n,i){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===i[n.injectorIndex+8]?-1:n.injectorIndex}function fs(n,i){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let o=0,d=null,m=i;for(;null!==m;){if(d=$u(m),null===d)return si;if(o++,m=m[Oo],-1!==d.injectorIndex)return d.injectorIndex|o<<16}return si}function Ar(n,i,o){!function ws(n,i,o){let d;"string"==typeof o?d=o.charCodeAt(0)||0:o.hasOwnProperty(vr)&&(d=o[vr]),null==d&&(d=o[vr]=eu++);const m=d&Xc;i.data[n+(m>>Qc)]|=1<<m}(n,i,o)}function oa(n,i,o){if(o&bn.Optional||void 0!==n)return n;Zt()}function Go(n,i,o,d){if(o&bn.Optional&&void 0===d&&(d=null),!(o&(bn.Self|bn.Host))){const m=n[Gs],y=Vt(void 0);try{return m?m.get(i,d,o&bn.Optional):lt(i,d,o&bn.Optional)}finally{Vt(y)}}return oa(d,0,o)}function $l(n,i,o,d=bn.Default,m){if(null!==n){if(1024&i[An]){const D=function Ud(n,i,o,d,m){let y=n,D=i;for(;null!==y&&null!==D&&1024&D[An]&&!(256&D[An]);){const I=Ua(y,D,o,d|bn.Self,xo);if(I!==xo)return I;let F=y.parent;if(!F){const z=D[Di];if(z){const ee=z.get(o,xo,d);if(ee!==xo)return ee}F=$u(D),D=D[Oo]}y=F}return m}(n,i,o,d,xo);if(D!==xo)return D}const y=Ua(n,i,o,d,xo);if(y!==xo)return y}return Go(i,o,d,m)}function Ua(n,i,o,d,m){const y=function Ir(n){if("string"==typeof n)return n.charCodeAt(0)||0;const i=n.hasOwnProperty(vr)?n[vr]:void 0;return"number"==typeof i?i>=0?i&Xc:af:i}(o);if("function"==typeof y){if(!oo(i,n,d))return d&bn.Host?oa(m,0,d):Go(i,o,d,m);try{const D=y(d);if(null!=D||d&bn.Optional)return D;Zt()}finally{ao()}}else if("number"==typeof y){let D=null,I=Ji(n,i),F=si,z=d&bn.Host?i[Sr][er]:null;for((-1===I||d&bn.SkipSelf)&&(F=-1===I?fs(n,i):i[I+8],F!==si&&aa(d,!1)?(D=i[Yt],I=lo(F),i=sa(F,i)):I=-1);-1!==I;){const ee=i[Yt];if(mr(y,I,ee.data)){const oe=co(I,i,o,D,d,z);if(oe!==xo)return oe}F=i[I+8],F!==si&&aa(d,i[Yt].data[I+8]===z)&&mr(y,I,i)?(D=ee,I=lo(F),i=sa(F,i)):I=-1}}return m}function co(n,i,o,d,m,y){const D=i[Yt],I=D.data[n+8],ee=_l(I,D,o,null==d?Fa(I)&&qc:d!=D&&0!=(3&I.type),m&bn.Host&&y===I);return null!==ee?br(i,D,ee,I):xo}function _l(n,i,o,d,m){const y=n.providerIndexes,D=i.data,I=1048575&y,F=n.directiveStart,ee=y>>20,ye=m?I+ee:n.directiveEnd;for(let Ae=d?I:I+ee;Ae<ye;Ae++){const st=D[Ae];if(Ae<F&&o===st||Ae>=F&&st.type===o)return Ae}if(m){const Ae=D[F];if(Ae&&is(Ae)&&Ae.type===o)return F}return null}function br(n,i,o,d){let m=n[o];const y=i.data;if(function Gn(n){return n instanceof Gt}(m)){const D=m;D.resolving&&function mt(n,i){const o=i?`. Dependency path: ${i.join(" > ")} > ${n}`:"";throw new Ie(-200,`Circular dependency in DI detected for ${n}${o}`)}(function $e(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Ne(n)}(y[o]));const I=fc(D.canSeeViewProviders);D.resolving=!0;const F=D.injectImpl?Vt(D.injectImpl):null;oo(n,d,bn.Default);try{m=n[o]=D.factory(void 0,y,n,d),i.firstCreatePass&&o>=d.directiveStart&&function W(n,i,o){const{ngOnChanges:d,ngOnInit:m,ngDoCheck:y}=i.type.prototype;if(d){const D=Qo(i);(o.preOrderHooks??(o.preOrderHooks=[])).push(n,D),(o.preOrderCheckHooks??(o.preOrderCheckHooks=[])).push(n,D)}m&&(o.preOrderHooks??(o.preOrderHooks=[])).push(0-n,m),y&&((o.preOrderHooks??(o.preOrderHooks=[])).push(n,y),(o.preOrderCheckHooks??(o.preOrderCheckHooks=[])).push(n,y))}(o,y[o],i)}finally{null!==F&&Vt(F),fc(I),D.resolving=!1,ao()}}return m}function mr(n,i,o){return!!(o[i+(n>>Qc)]&1<<n)}function aa(n,i){return!(n&bn.Self||n&bn.Host&&i)}class ji{constructor(i,o){this._tNode=i,this._lView=o}get(i,o,d){return $l(this._tNode,this._lView,i,Yo(d),o)}}function af(){return new ji(pr(),et())}function ps(n){return Pe(()=>{const i=n.prototype.constructor,o=i[ls]||vl(i),d=Object.prototype;let m=Object.getPrototypeOf(n.prototype).constructor;for(;m&&m!==d;){const y=m[ls]||vl(m);if(y&&y!==o)return y;m=Object.getPrototypeOf(m)}return y=>new y})}function vl(n){return jt(n)?()=>{const i=vl(dt(n));return i&&i()}:$i(n)}function $u(n){const i=n[Yt],o=i.type;return 2===o?i.declTNode:1===o?n[er]:null}function mc(n){return function Va(n,i){if("class"===i)return n.classes;if("style"===i)return n.styles;const o=n.attrs;if(o){const d=o.length;let m=0;for(;m<d;){const y=o[m];if(ai(y))break;if(0===y)m+=2;else if("number"==typeof y)for(m++;m<d&&"string"==typeof o[m];)m++;else{if(y===i)return o[m+1];m+=2}}}return null}(pr(),n)}const yl="__parameters__";function Zr(n,i,o){return Pe(()=>{const d=function tu(n){return function(...o){if(n){const d=n(...o);for(const m in d)this[m]=d[m]}}}(i);function m(...y){if(this instanceof m)return d.apply(this,y),this;const D=new m(...y);return I.annotation=D,I;function I(F,z,ee){const oe=F.hasOwnProperty(yl)?F[yl]:Object.defineProperty(F,yl,{value:[]})[yl];for(;oe.length<=ee;)oe.push(null);return(oe[ee]=oe[ee]||[]).push(D),F}}return o&&(m.prototype=Object.create(o.prototype)),m.prototype.ngMetadataName=n,m.annotationCls=m,m})}class mi{constructor(i,o){this._desc=i,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof o?this.__NG_ELEMENT_ID__=o:void 0!==o&&(this.\u0275prov=Mn({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Uo(n,i){n.forEach(o=>Array.isArray(o)?Uo(o,i):i(o))}function w(n,i,o){i>=n.length?n.push(o):n.splice(i,0,o)}function R(n,i){return i>=n.length-1?n.pop():n.splice(i,1)[0]}function T(n,i){const o=[];for(let d=0;d<n;d++)o.push(i);return o}function be(n,i,o){let d=Ut(n,i);return d>=0?n[1|d]=o:(d=~d,function J(n,i,o,d){let m=n.length;if(m==i)n.push(o,d);else if(1===m)n.push(d,n[0]),n[0]=o;else{for(m--,n.push(n[m-1],n[m]);m>i;)n[m]=n[m-2],m--;n[i]=o,n[i+1]=d}}(n,d,i,o)),d}function nt(n,i){const o=Ut(n,i);if(o>=0)return n[1|o]}function Ut(n,i){return function Kn(n,i,o){let d=0,m=n.length>>o;for(;m!==d;){const y=d+(m-d>>1),D=n[y<<o];if(i===D)return y<<o;D>i?m=y:d=y+1}return~(m<<o)}(n,i,1)}const Ku=ys(Zr("Optional"),8),Wa=ys(Zr("SkipSelf"),4);var $a=(()=>(($a=$a||{})[$a.Important=1]="Important",$a[$a.DashCase=2]="DashCase",$a))();const bg=/^>|^->|<!--|-->|--!>|<!-$/g,Tg=/(<|>)/,Mg="\u200b$1\u200b";const hf=new Map;let xg=0;const pf="__ngContext__";function Zs(n,i){$r(i)?(n[pf]=i[us],function wg(n){hf.set(n[us],n)}(i)):n[pf]=i}let mf;function gf(n,i){return mf(n,i)}function Qu(n){const i=n[Pi];return Cr(i)?i[Pi]:i}function _f(n){return Vp(n[Vs])}function vf(n){return Vp(n[ns])}function Vp(n){for(;null!==n&&!Cr(n);)n=n[ns];return n}function lu(n,i,o,d,m){if(null!=d){let y,D=!1;Cr(d)?y=d:$r(d)&&(D=!0,d=d[ks]);const I=Vi(d);0===n&&null!==o?null==m?$p(i,o,I):bc(i,o,I,m||null,!0):1===n&&null!==o?bc(i,o,I,m||null,!0):2===n?Qp(i,I,D):3===n&&i.destroyNode(I),null!=y&&function pv(n,i,o,d,m){const y=o[Ll];y!==Vi(o)&&lu(i,n,d,y,m);for(let I=Wr;I<o.length;I++){const F=o[I];Qd(F[Yt],F,n,i,d,y)}}(i,n,y,o,m)}}function yf(n,i){return n.createText(i)}function Zd(n,i,o){n.setValue(i,o)}function Lg(n,i){return n.createComment(function Op(n){return n.replace(bg,i=>i.replace(Tg,Mg))}(i))}function bf(n,i,o){return n.createElement(i,o)}function Up(n,i){const o=n[Us],d=o.indexOf(i),m=i[Pi];512&i[An]&&(i[An]&=-513,ht(m,-1)),o.splice(d,1)}function Tf(n,i){if(n.length<=Wr)return;const o=Wr+i,d=n[o];if(d){const m=d[Nl];null!==m&&m!==n&&Up(m,d),i>0&&(n[o-1][ns]=d[ns]);const y=R(n,Wr+i);!function Bg(n,i){Qd(n,i,i[kn],2,null,null),i[ks]=null,i[er]=null}(d[Yt],d);const D=y[cs];null!==D&&D.detachView(y[Yt]),d[Pi]=null,d[ns]=null,d[An]&=-65}return d}function Hp(n,i){if(!(128&i[An])){const o=i[kn];o.destroyNode&&Qd(n,i,o,3,null,null),function Gg(n){let i=n[Vs];if(!i)return Mf(n[Yt],n);for(;i;){let o=null;if($r(i))o=i[Vs];else{const d=i[Wr];d&&(o=d)}if(!o){for(;i&&!i[ns]&&i!==n;)$r(i)&&Mf(i[Yt],i),i=i[Pi];null===i&&(i=n),$r(i)&&Mf(i[Yt],i),o=i&&i[ns]}i=o}}(i)}}function Mf(n,i){if(!(128&i[An])){i[An]&=-65,i[An]|=128,function Hg(n,i){let o;if(null!=n&&null!=(o=n.destroyHooks))for(let d=0;d<o.length;d+=2){const m=i[o[d]];if(!(m instanceof Gt)){const y=o[d+1];if(Array.isArray(y))for(let D=0;D<y.length;D+=2){const I=m[y[D]],F=y[D+1];ds(4,I,F);try{F.call(I)}finally{ds(5,I,F)}}else{ds(4,m,y);try{y.call(m)}finally{ds(5,m,y)}}}}}(n,i),function hv(n,i){const o=n.cleanup,d=i[Po];let m=-1;if(null!==o)for(let y=0;y<o.length-1;y+=2)if("string"==typeof o[y]){const D=o[y+3];D>=0?d[m=D]():d[m=-D].unsubscribe(),y+=2}else{const D=d[m=o[y+1]];o[y].call(D)}if(null!==d){for(let y=m+1;y<d.length;y++)(0,d[y])();i[Po]=null}}(n,i),1===i[Yt].type&&i[kn].destroy();const o=i[Nl];if(null!==o&&Cr(i[Pi])){o!==i[Pi]&&Up(o,i);const d=i[cs];null!==d&&d.detachView(n)}!function Rg(n){hf.delete(n[us])}(i)}}function zp(n,i,o){return Wp(n,i.parent,o)}function Wp(n,i,o){let d=i;for(;null!==d&&40&d.type;)d=(i=d).parent;if(null===d)return o[ks];{const{componentOffset:m}=d;if(m>-1){const{encapsulation:y}=n.data[d.directiveStart+m];if(y===ae.None||y===ae.Emulated)return null}return Ms(d,o)}}function bc(n,i,o,d,m){n.insertBefore(i,o,d,m)}function $p(n,i,o){n.appendChild(i,o)}function Yp(n,i,o,d,m){null!==d?bc(n,i,o,d,m):$p(n,i,o)}function Kd(n,i){return n.parentNode(i)}function Jp(n,i,o){return Kp(n,i,o)}function Zp(n,i,o){return 40&n.type?Ms(n,o):null}let xf,Zl,Df,wf,Kp=Zp;function qp(n,i){Kp=n,xf=i}function qd(n,i,o,d){const m=zp(n,d,i),y=i[kn],I=Jp(d.parent||i[er],d,i);if(null!=m)if(Array.isArray(o))for(let F=0;F<o.length;F++)Yp(y,m,o[F],I,!1);else Yp(y,m,o,I,!1);void 0!==xf&&xf(y,d,i,o,m)}function Xd(n,i){if(null!==i){const o=i.type;if(3&o)return Ms(i,n);if(4&o)return Xp(-1,n[i.index]);if(8&o){const d=i.child;if(null!==d)return Xd(n,d);{const m=n[i.index];return Cr(m)?Xp(-1,m):Vi(m)}}if(32&o)return gf(i,n)()||Vi(n[i.index]);{const d=$g(n,i);return null!==d?Array.isArray(d)?d[0]:Xd(Qu(n[Sr]),d):Xd(n,i.next)}}return null}function $g(n,i){return null!==i?n[Sr][er].projection[i.projection]:null}function Xp(n,i){const o=Wr+n+1;if(o<i.length){const d=i[o],m=d[Yt].firstChild;if(null!==m)return Xd(d,m)}return i[Ll]}function Qp(n,i,o){const d=Kd(n,i);d&&function zg(n,i,o,d){n.removeChild(i,o,d)}(n,d,i,o)}function em(n,i,o,d,m,y,D){for(;null!=o;){const I=d[o.index],F=o.type;if(D&&0===i&&(I&&Zs(Vi(I),d),o.flags|=2),32!=(32&o.flags))if(8&F)em(n,i,o.child,d,m,y,!1),lu(i,n,m,I,y);else if(32&F){const z=gf(o,d);let ee;for(;ee=z();)lu(i,n,m,ee,y);lu(i,n,m,I,y)}else 16&F?Yg(n,i,d,o,m,y):lu(i,n,m,I,y);o=D?o.projectionNext:o.next}}function Qd(n,i,o,d,m,y){em(o,d,n.firstChild,i,m,y,!1)}function Yg(n,i,o,d,m,y){const D=o[Sr],F=D[er].projection[d.projection];if(Array.isArray(F))for(let z=0;z<F.length;z++)lu(i,n,m,F[z],y);else em(n,i,F,D[Pi],m,y,!0)}function tm(n,i,o){""===o?n.removeAttribute(i,"class"):n.setAttribute(i,"class",o)}function eh(n,i,o){const{mergedAttrs:d,classes:m,styles:y}=o;null!==d&&sn(n,i,d),null!==m&&tm(n,i,m),null!==y&&function Ks(n,i,o){n.setAttribute(i,"style",o)}(n,i,y)}function dr(n){return function Nr(){if(void 0===Zl&&(Zl=null,ki.trustedTypes))try{Zl=ki.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Zl}()?.createHTML(n)||n}function gv(n){Df=n}function Kg(n){return function Rf(){if(void 0===wf&&(wf=null,ki.trustedTypes))try{wf=ki.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return wf}()?.createScriptURL(n)||n}class qg{constructor(i){this.changingThisBreaksApplicationSecurity=i}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Ri})`}}function zo(n){return n instanceof qg?n.changingThisBreaksApplicationSecurity:n}function ti(n,i){const o=function Kt(n){return n instanceof qg&&n.getTypeName()||null}(n);if(null!=o&&o!==i){if("ResourceURL"===o&&"URL"===i)return!0;throw new Error(`Required a safe ${i}, got a ${o} (see ${Ri})`)}return o===i}class Cf{constructor(i){this.inertDocumentHelper=i}getInertBodyElement(i){i="<body><remove></remove>"+i;try{const o=(new window.DOMParser).parseFromString(dr(i),"text/html").body;return null===o?this.inertDocumentHelper.getInertBodyElement(i):(o.removeChild(o.firstChild),o)}catch{return null}}}class Qg{constructor(i){this.defaultDoc=i,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(i){const o=this.inertDocument.createElement("template");return o.innerHTML=dr(i),o}}const du=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function ed(n){return(n=String(n)).match(du)?n:"unsafe:"+n}function qs(n){const i={};for(const o of n.split(","))i[o]=!0;return i}function Kl(...n){const i={};for(const o of n)for(const d in o)o.hasOwnProperty(d)&&(i[d]=!0);return i}const Ef=qs("area,br,col,hr,img,wbr"),sh=qs("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Ro=qs("rp,rt"),Af=Kl(Ef,Kl(sh,qs("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Kl(Ro,qs("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Kl(Ro,sh)),oh=qs("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Ya=Kl(oh,qs("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),qs("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"));var fr=(()=>((fr=fr||{})[fr.NONE=0]="NONE",fr[fr.HTML=1]="HTML",fr[fr.STYLE=2]="STYLE",fr[fr.SCRIPT=3]="SCRIPT",fr[fr.URL=4]="URL",fr[fr.RESOURCE_URL=5]="RESOURCE_URL",fr))();function Kr(n){const i=Fr();return i?i.sanitize(fr.URL,n)||"":ti(n,"URL")?zo(n):ed(Ne(n))}function ql(n){const i=Fr();if(i)return Kg(i.sanitize(fr.RESOURCE_URL,n)||"");if(ti(n,"ResourceURL"))return Kg(zo(n));throw new Ie(904,!1)}function nd(n,i,o){return function td(n,i){return"src"===i&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===i&&("base"===n||"link"===n)?ql:Kr}(i,o)(n)}function Fr(){const n=et();return n&&n[ma]}const qr=new mi("ENVIRONMENT_INITIALIZER"),rd=new mi("INJECTOR",-1),um=new mi("INJECTOR_DEF_TYPES");class dm{get(i,o=nn){if(o===nn){const d=new Error(`NullInjectorError: No provider for ${Ke(i)}!`);throw d.name="NullInjectorError",d}return o}}function ch(...n){return{\u0275providers:hm(0,n),\u0275fromNgModule:!0}}function hm(n,...i){const o=[],d=new Set;let m;return Uo(i,y=>{const D=y;Lf(D,o,[],d)&&(m||(m=[]),m.push(D))}),void 0!==m&&sd(m,o),o}function sd(n,i){for(let o=0;o<n.length;o++){const{providers:m}=n[o];Ml(m,y=>{i.push(y)})}}function Lf(n,i,o,d){if(!(n=dt(n)))return!1;let m=null,y=fo(n);const D=!y&&gi(n);if(y||D){if(D&&!D.standalone)return!1;m=n}else{const F=n.ngModule;if(y=fo(F),!y)return!1;m=F}const I=d.has(m);if(D){if(I)return!1;if(d.add(m),D.dependencies){const F="function"==typeof D.dependencies?D.dependencies():D.dependencies;for(const z of F)Lf(z,i,o,d)}}else{if(!y)return!1;{if(null!=y.imports&&!I){let z;d.add(m);try{Uo(y.imports,ee=>{Lf(ee,i,o,d)&&(z||(z=[]),z.push(ee))})}finally{}void 0!==z&&sd(z,i)}if(!I){const z=$i(m)||(()=>new m);i.push({provide:m,useFactory:z,deps:Ve},{provide:um,useValue:m,multi:!0},{provide:qr,useValue:()=>xi(m),multi:!0})}const F=y.providers;null==F||I||Ml(F,ee=>{i.push(ee)})}}return m!==n&&void 0!==n.providers}function Ml(n,i){for(let o of n)_n(o)&&(o=o.\u0275providers),Array.isArray(o)?Ml(o,i):i(o)}const o_=Fe({provide:String,useValue:Fe});function od(n){return null!==n&&"object"==typeof n&&o_ in n}function Dc(n){return"function"==typeof n}const yi=new mi("Set Injector scope."),uh={},Bf={};let jf;function hu(){return void 0===jf&&(jf=new dm),jf}class wc{}class kf extends wc{get destroyed(){return this._destroyed}constructor(i,o,d,m){super(),this.parent=o,this.source=d,this.scopes=m,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,fh(i,D=>this.processProvider(D)),this.records.set(rd,fu(void 0,this)),m.has("environment")&&this.records.set(wc,fu(void 0,this));const y=this.records.get(yi);null!=y&&"string"==typeof y.value&&this.scopes.add(y.value),this.injectorDefTypes=new Set(this.get(um.multi,Ve,bn.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const i of this._ngOnDestroyHooks)i.ngOnDestroy();for(const i of this._onDestroyHooks)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(i){this._onDestroyHooks.push(i)}runInContext(i){this.assertNotDestroyed();const o=Is(this),d=Vt(void 0);try{return i()}finally{Is(o),Vt(d)}}get(i,o=nn,d=bn.Default){this.assertNotDestroyed(),d=Yo(d);const m=Is(this),y=Vt(void 0);try{if(!(d&bn.SkipSelf)){let I=this.records.get(i);if(void 0===I){const F=function mm(n){return"function"==typeof n||"object"==typeof n&&n instanceof mi}(i)&&Qi(i);I=F&&this.injectableDefInScope(F)?fu(ad(i),uh):null,this.records.set(i,I)}if(null!=I)return this.hydrate(i,I)}return(d&bn.Self?hu():this.parent).get(i,o=d&bn.Optional&&o===nn?null:o)}catch(D){if("NullInjectorError"===D.name){if((D[Aa]=D[Aa]||[]).unshift(Ke(i)),m)throw D;return function tl(n,i,o,d){const m=n[Aa];throw i[Ia]&&m.unshift(i[Ia]),n.message=function as(n,i,o,d=null){n=n&&"\n"===n.charAt(0)&&n.charAt(1)==ts?n.slice(2):n;let m=Ke(i);if(Array.isArray(i))m=i.map(Ke).join(" -> ");else if("object"==typeof i){let y=[];for(let D in i)if(i.hasOwnProperty(D)){let I=i[D];y.push(D+":"+("string"==typeof I?JSON.stringify(I):Ke(I)))}m=`{${y.join(", ")}}`}return`${o}${d?"("+d+")":""}[${m}]: ${n.replace(Wc,"\n  ")}`}("\n"+n.message,m,o,d),n[Yn]=m,n[Aa]=null,n}(D,i,"R3InjectorError",this.source)}throw D}finally{Vt(y),Is(m)}}resolveInjectorInitializers(){const i=Is(this),o=Vt(void 0);try{const d=this.get(qr.multi,Ve,bn.Self);for(const m of d)m()}finally{Is(i),Vt(o)}}toString(){const i=[],o=this.records;for(const d of o.keys())i.push(Ke(d));return`R3Injector[${i.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ie(205,!1)}processProvider(i){let o=Dc(i=dt(i))?i:dt(i&&i.provide);const d=function hh(n){return od(n)?fu(void 0,n.useValue):fu(Gf(n),uh)}(i);if(Dc(i)||!0!==i.multi)this.records.get(o);else{let m=this.records.get(o);m||(m=fu(void 0,uh,!0),m.factory=()=>Jo(m.multi),this.records.set(o,m)),o=i,m.multi.push(i)}this.records.set(o,d)}hydrate(i,o){return o.value===uh&&(o.value=Bf,o.value=o.factory()),"object"==typeof o.value&&o.value&&function pm(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(o.value)&&this._ngOnDestroyHooks.add(o.value),o.value}injectableDefInScope(i){if(!i.providedIn)return!1;const o=dt(i.providedIn);return"string"==typeof o?"any"===o||this.scopes.has(o):this.injectorDefTypes.has(o)}}function ad(n){const i=Qi(n),o=null!==i?i.factory:$i(n);if(null!==o)return o;if(n instanceof mi)throw new Ie(204,!1);if(n instanceof Function)return function dh(n){const i=n.length;if(i>0)throw T(i,"?"),new Ie(204,!1);const o=function Ea(n){const i=n&&(n[po]||n[wr]);return i?(function Dr(n){if(n.hasOwnProperty("name"))return n.name;(""+n).match(/^function\s*([^\s(]+)/)}(n),i):null}(n);return null!==o?()=>o.factory(n):()=>new n}(n);throw new Ie(204,!1)}function Gf(n,i,o){let d;if(Dc(n)){const m=dt(n);return $i(m)||ad(m)}if(od(n))d=()=>dt(n.useValue);else if(function fm(n){return!(!n||!n.useFactory)}(n))d=()=>n.useFactory(...Jo(n.deps||[]));else if(function xc(n){return!(!n||!n.useExisting)}(n))d=()=>xi(dt(n.useExisting));else{const m=dt(n&&(n.useClass||n.provide));if(!function l_(n){return!!n.deps}(n))return $i(m)||ad(m);d=()=>new m(...Jo(n.deps))}return d}function fu(n,i,o=!1){return{factory:n,value:i,multi:o?[]:void 0}}function fh(n,i){for(const o of n)Array.isArray(o)?fh(o,i):o&&_n(o)?fh(o.\u0275providers,i):i(o)}class gm{}class _m{}class u_{resolveComponentFactory(i){throw function c_(n){const i=Error(`No component factory found for ${Ke(n)}. Did you add it to @NgModule.entryComponents?`);return i.ngComponent=n,i}(i)}}let ld=(()=>{class n{}return n.NULL=new u_,n})();function d_(){return pu(pr(),et())}function pu(n,i){return new cd(Ms(n,i))}let cd=(()=>{class n{constructor(o){this.nativeElement=o}}return n.__NG_ELEMENT_ID__=d_,n})();function h_(n){return n instanceof cd?n.nativeElement:n}class Vf{}let ph=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function Uf(){const n=et(),o=Yr(pr().index,n);return($r(o)?o:n)[kn]}(),n})(),ym=(()=>{class n{}return n.\u0275prov=Mn({token:n,providedIn:"root",factory:()=>null}),n})();class mu{constructor(i){this.full=i,this.major=i.split(".")[0],this.minor=i.split(".")[1],this.patch=i.split(".").slice(2).join(".")}}const bm=new mu("15.2.7"),mh={},Hf="ngOriginalError";function zf(n){return n[Hf]}class gh{constructor(){this._console=console}handleError(i){const o=this._findOriginalError(i);this._console.error("ERROR",i),o&&this._console.error("ORIGINAL ERROR",o)}_findOriginalError(i){let o=i&&zf(i);for(;o&&zf(o);)o=zf(o);return o||null}}function Ja(n){return n instanceof Function?n():n}function __(n,i,o){let d=n.length;for(;;){const m=n.indexOf(i,o);if(-1===m)return m;if(0===m||n.charCodeAt(m-1)<=32){const y=i.length;if(m+y===d||n.charCodeAt(m+y)<=32)return m}o=m+1}}const v_="ng-template";function Ev(n,i,o){let d=0,m=!0;for(;d<n.length;){let y=n[d++];if("string"==typeof y&&m){const D=n[d++];if(o&&"class"===y&&-1!==__(D.toLowerCase(),i,0))return!0}else{if(1===y){for(;d<n.length&&"string"==typeof(y=n[d++]);)if(y.toLowerCase()===i)return!0;return!1}"number"==typeof y&&(m=!1)}}return!1}function Wf(n){return 4===n.type&&n.value!==v_}function Av(n,i,o){return i===(4!==n.type||o?n.value:v_)}function xa(n,i,o){let d=4;const m=n.attrs||[],y=function y_(n){for(let i=0;i<n.length;i++)if(ai(n[i]))return i;return n.length}(m);let D=!1;for(let I=0;I<i.length;I++){const F=i[I];if("number"!=typeof F){if(!D)if(4&d){if(d=2|1&d,""!==F&&!Av(n,F,o)||""===F&&1===i.length){if(Ni(d))return!1;D=!0}}else{const z=8&d?F:i[++I];if(8&d&&null!==n.attrs){if(!Ev(n.attrs,z,o)){if(Ni(d))return!1;D=!0}continue}const oe=$f(8&d?"class":F,m,Wf(n),o);if(-1===oe){if(Ni(d))return!1;D=!0;continue}if(""!==z){let ye;ye=oe>y?"":m[oe+1].toLowerCase();const Ae=8&d?ye:null;if(Ae&&-1!==__(Ae,z,0)||2&d&&z!==ye){if(Ni(d))return!1;D=!0}}}}else{if(!D&&!Ni(d)&&!Ni(F))return!1;if(D&&Ni(F))continue;D=!1,d=F|1&d}}return Ni(d)||D}function Ni(n){return 0==(1&n)}function $f(n,i,o,d){if(null===i)return-1;let m=0;if(d||!o){let y=!1;for(;m<i.length;){const D=i[m];if(D===n)return m;if(3===D||6===D)y=!0;else{if(1===D||2===D){let I=i[++m];for(;"string"==typeof I;)I=i[++m];continue}if(4===D)break;if(0===D){m+=4;continue}}m+=y?1:2}return-1}return function Mm(n,i){let o=n.indexOf(4);if(o>-1)for(o++;o<n.length;){const d=n[o];if("number"==typeof d)return-1;if(d===i)return o;o++}return-1}(i,n)}function Yf(n,i,o=!1){for(let d=0;d<i.length;d++)if(xa(n,i[d],o))return!0;return!1}function vh(n,i){e:for(let o=0;o<i.length;o++){const d=i[o];if(n.length===d.length){for(let m=0;m<n.length;m++)if(n[m]!==d[m])continue e;return!0}}return!1}function b_(n,i){return n?":not("+i.trim()+")":i}function dd(n){let i=n[0],o=1,d=2,m="",y=!1;for(;o<n.length;){let D=n[o];if("string"==typeof D)if(2&d){const I=n[++o];m+="["+D+(I.length>0?'="'+I+'"':"")+"]"}else 8&d?m+="."+D:4&d&&(m+=" "+D);else""!==m&&!Ni(D)&&(i+=b_(y,m),m=""),d=D,y=y||!Ni(d);o++}return""!==m&&(i+=b_(y,m)),i}const ni={};function Dm(n){Zf(ei(),et(),Er()+n,!1)}function Zf(n,i,o,d){if(!d)if(3==(3&i[An])){const y=n.preOrderCheckHooks;null!==y&&Q(i,y,o)}else{const y=n.preOrderHooks;null!==y&&ue(i,y,0,o)}Ds(o)}function M_(n,i=null,o=null,d){const m=_u(n,i,o,d);return m.resolveInjectorInitializers(),m}function _u(n,i=null,o=null,d,m=new Set){const y=[o||Ve,ch(n)];return d=d||("object"==typeof n?void 0:Ke(n)),new kf(y,i||hu(),d||null,m)}let vu=(()=>{class n{static create(o,d){if(Array.isArray(o))return M_({name:""},d,o,"");{const m=o.name??"";return M_({name:m},o.parent,o.providers,m)}}}return n.THROW_IF_NOT_FOUND=nn,n.NULL=new dm,n.\u0275prov=Mn({token:n,providedIn:"any",factory:()=>xi(rd)}),n.__NG_ELEMENT_ID__=-1,n})();function Pc(n,i=bn.Default){const o=et();return null===o?xi(n,i):$l(pr(),o,dt(n),i)}function Em(){throw new Error("invalid")}function Dh(n,i){const o=n.contentQueries;if(null!==o)for(let d=0;d<o.length;d+=2){const y=o[d+1];if(-1!==y){const D=n.data[y];so(o[d]),D.contentQueries(2,i[y],y)}}}function fd(n,i,o,d,m,y,D,I,F,z,ee){const oe=i.blueprint.slice();return oe[ks]=m,oe[An]=76|d,(null!==ee||n&&1024&n[An])&&(oe[An]|=1024),zu(oe),oe[Pi]=oe[Oo]=n,oe[Bi]=o,oe[_o]=D||n&&n[_o],oe[kn]=I||n&&n[kn],oe[ma]=F||n&&n[ma]||null,oe[Gs]=z||n&&n[Gs]||null,oe[er]=y,oe[us]=function Dg(){return xg++}(),oe[Di]=ee,oe[Sr]=2==i.type?n[Sr]:oe,oe}function Oc(n,i,o,d,m){let y=n.data[i];if(null===y)y=wh(n,i,o,d,m),function pl(){return mn.lFrame.inI18n}()&&(y.flags|=32);else if(64&y.type){y.type=o,y.value=d,y.attrs=m;const D=ro();y.injectorIndex=null===D?-1:D.injectorIndex}return Wt(y,!0),y}function wh(n,i,o,d,m){const y=zl(),D=bo(),F=n.data[i]=function ep(n,i,o,d,m,y){return{type:o,index:d,insertBeforeIndex:null,injectorIndex:i?i.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:m,attrs:y,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:i,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,D?y:y&&y.parent,o,i,d,m);return null===n.firstChild&&(n.firstChild=F),null!==y&&(D?null==y.child&&null!==F.parent&&(y.child=F):null===y.next&&(y.next=F,F.prev=y)),F}function Wo(n,i,o,d){if(0===o)return-1;const m=i.length;for(let y=0;y<o;y++)i.push(d),n.blueprint.push(d),n.data.push(null);return m}function Dl(n,i,o){To(i);try{const d=n.viewQuery;null!==d&&Gh(1,d,o);const m=n.template;null!==m&&Rh(n,i,m,1,o),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&Dh(n,i),n.staticViewQueries&&Gh(2,n.viewQuery,o);const y=n.components;null!==y&&function Pm(n,i){for(let o=0;o<i.length;o++)I_(n,i[o])}(i,y)}catch(d){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),d}finally{i[An]&=-5,Mo()}}function Nc(n,i,o,d){const m=i[An];if(128!=(128&m)){To(i);try{zu(i),function ta(n){return mn.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==o&&Rh(n,i,o,2,d);const D=3==(3&m);if(D){const z=n.preOrderCheckHooks;null!==z&&Q(i,z,null)}else{const z=n.preOrderHooks;null!==z&&ue(i,z,0,null),je(i,0)}if(function op(n){for(let i=_f(n);null!==i;i=vf(i)){if(!i[il])continue;const o=i[Us];for(let d=0;d<o.length;d++){const m=o[d];512&m[An]||ht(m[Pi],1),m[An]|=512}}}(i),function jh(n){for(let i=_f(n);null!==i;i=vf(i))for(let o=Wr;o<i.length;o++){const d=i[o],m=d[Yt];yo(d)&&Nc(m,d,m.template,d[Bi])}}(i),null!==n.contentQueries&&Dh(n,i),D){const z=n.contentCheckHooks;null!==z&&Q(i,z)}else{const z=n.contentHooks;null!==z&&ue(i,z,1),je(i,1)}!function Am(n,i){const o=n.hostBindingOpCodes;if(null!==o)try{for(let d=0;d<o.length;d++){const m=o[d];if(m<0)Ds(~m);else{const y=m,D=o[++d],I=o[++d];ja(D,y),I(2,i[y])}}}finally{Ds(-1)}}(n,i);const I=n.components;null!==I&&function Im(n,i){for(let o=0;o<i.length;o++)A_(n,i[o])}(i,I);const F=n.viewQuery;if(null!==F&&Gh(2,F,d),D){const z=n.viewCheckHooks;null!==z&&Q(i,z)}else{const z=n.viewHooks;null!==z&&ue(i,z,2),je(i,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),i[An]&=-41,512&i[An]&&(i[An]&=-513,ht(i[Pi],-1))}finally{Mo()}}}function Rh(n,i,o,d,m){const y=Er(),D=2&d;try{Ds(-1),D&&i.length>Oi&&Zf(n,i,Oi,!1),ds(D?2:0,m),o(d,m)}finally{Ds(y),ds(D?3:1,m)}}function Fc(n,i,o){if(_a(i)){const m=i.directiveEnd;for(let y=i.directiveStart;y<m;y++){const D=n.data[y];D.contentQueries&&D.contentQueries(1,o[y],y)}}}function Sh(n,i,o){Bo()&&(function Fh(n,i,o,d){const m=o.directiveStart,y=o.directiveEnd;Fa(o)&&function Za(n,i,o){const d=Ms(i,n),m=Lc(o),y=n[_o],D=_d(n,fd(n,m,null,o.onPush?32:16,d,i,y,y.createRenderer(d,o),null,null,null));n[i.index]=D}(i,o,n.data[m+o.componentOffset]),n.firstCreatePass||Ys(o,i),Zs(d,i);const D=o.initialInputs;for(let I=m;I<y;I++){const F=n.data[I],z=br(i,n,I,o);Zs(z,i),null!==D&&sp(0,I-m,z,F,0,D),is(F)&&(Yr(o.index,i)[Bi]=br(i,n,I,o))}}(n,i,o,Ms(o,i)),64==(64&o.flags)&&xu(n,i,o))}function Ch(n,i,o=Ms){const d=i.localNames;if(null!==d){let m=i.index+1;for(let y=0;y<d.length;y+=2){const D=d[y+1],I=-1===D?o(i,n):n[D];n[m++]=I}}}function Lc(n){const i=n.tView;return null===i||i.incompleteFirstPass?n.tView=Eh(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):i}function Eh(n,i,o,d,m,y,D,I,F,z){const ee=Oi+d,oe=ee+m,ye=function Ah(n,i){const o=[];for(let d=0;d<i;d++)o.push(d<n?null:ni);return o}(ee,oe),Ae="function"==typeof z?z():z;return ye[Yt]={type:n,blueprint:ye,template:o,queries:null,viewQuery:I,declTNode:i,data:ye.slice().fill(null,ee),bindingStartIndex:ee,expandoStartIndex:oe,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof y?y():y,pipeRegistry:"function"==typeof D?D():D,firstChild:null,schemas:F,consts:Ae,incompleteFirstPass:!1}}function Co(n,i,o,d){const m=Du(i);null===o?m.push(d):(m.push(o),n.firstCreatePass&&ap(n).push(d,m.length-1))}function Ih(n,i,o,d){for(let m in n)if(n.hasOwnProperty(m)){o=null===o?{}:o;const y=n[m];null===d?Ph(o,i,m,y):d.hasOwnProperty(m)&&Ph(o,i,d[m],y)}return o}function Ph(n,i,o,d){n.hasOwnProperty(o)?n[o].push(i,d):n[o]=[i,d]}function ms(n,i,o,d,m,y,D,I){const F=Ms(i,o);let ee,z=i.inputs;!I&&null!=z&&(ee=z[d])?(Uh(n,o,ee,d,m),Fa(i)&&function tp(n,i){const o=Yr(i,n);16&o[An]||(o[An]|=32)}(o,i.index)):3&i.type&&(d=function pd(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(d),m=null!=D?D(m,i.value||"",d):m,y.setProperty(F,d,m))}function Nh(n,i,o,d){if(Bo()){const m=null===d?null:{"":-1},y=function S_(n,i){const o=n.directiveRegistry;let d=null,m=null;if(o)for(let y=0;y<o.length;y++){const D=o[y];if(Yf(i,D.selectors,!1))if(d||(d=[]),is(D))if(null!==D.findHostDirectiveDefs){const I=[];m=m||new Map,D.findHostDirectiveDefs(D,I,m),d.unshift(...I,D),C_(n,i,I.length)}else d.unshift(D),C_(n,i,0);else m=m||new Map,D.findHostDirectiveDefs?.(D,d,m),d.push(D)}return null===d?null:[d,m]}(n,o);let D,I;null===y?D=I=null:[D,I]=y,null!==D&&ip(n,i,o,D,m,I),m&&function Iy(n,i,o){if(i){const d=n.localNames=[];for(let m=0;m<i.length;m+=2){const y=o[i[m+1]];if(null==y)throw new Ie(-301,!1);d.push(i[m],y)}}}(o,d,m)}o.mergedAttrs=yr(o.mergedAttrs,o.attrs)}function ip(n,i,o,d,m,y){for(let z=0;z<d.length;z++)Ar(Ys(o,i),n,d[z].type);!function Py(n,i,o){n.flags|=1,n.directiveStart=i,n.directiveEnd=i+o,n.providerIndexes=i}(o,n.data.length,d.length);for(let z=0;z<d.length;z++){const ee=d[z];ee.providersResolver&&ee.providersResolver(ee)}let D=!1,I=!1,F=Wo(n,i,d.length,null);for(let z=0;z<d.length;z++){const ee=d[z];o.mergedAttrs=yr(o.mergedAttrs,ee.hostAttrs),E_(n,o,i,F,ee),Nv(F,ee,m),null!==ee.contentQueries&&(o.flags|=4),(null!==ee.hostBindings||null!==ee.hostAttrs||0!==ee.hostVars)&&(o.flags|=64);const oe=ee.type.prototype;!D&&(oe.ngOnChanges||oe.ngOnInit||oe.ngDoCheck)&&((n.preOrderHooks??(n.preOrderHooks=[])).push(o.index),D=!0),!I&&(oe.ngOnChanges||oe.ngDoCheck)&&((n.preOrderCheckHooks??(n.preOrderCheckHooks=[])).push(o.index),I=!0),F++}!function Oh(n,i,o){const m=i.directiveEnd,y=n.data,D=i.attrs,I=[];let F=null,z=null;for(let ee=i.directiveStart;ee<m;ee++){const oe=y[ee],ye=o?o.get(oe):null,st=ye?ye.outputs:null;F=Ih(oe.inputs,ee,F,ye?ye.inputs:null),z=Ih(oe.outputs,ee,z,st);const Pt=null===F||null===D||Wf(i)?null:Bh(F,ee,D);I.push(Pt)}null!==F&&(F.hasOwnProperty("class")&&(i.flags|=8),F.hasOwnProperty("style")&&(i.flags|=16)),i.initialInputs=I,i.inputs=F,i.outputs=z}(n,o,y)}function xu(n,i,o){const d=o.directiveStart,m=o.directiveEnd,y=o.index,D=function Ns(){return mn.lFrame.currentDirectiveIndex}();try{Ds(y);for(let I=d;I<m;I++){const F=n.data[I],z=i[I];le(I),(null!==F.hostBindings||0!==F.hostVars||null!==F.hostAttrs)&&Lm(F,z)}}finally{Ds(-1),le(D)}}function Lm(n,i){null!==n.hostBindings&&n.hostBindings(1,i)}function C_(n,i,o){i.componentOffset=o,(n.components??(n.components=[])).push(i.index)}function Nv(n,i,o){if(o){if(i.exportAs)for(let d=0;d<i.exportAs.length;d++)o[i.exportAs[d]]=n;is(i)&&(o[""]=n)}}function E_(n,i,o,d,m){n.data[d]=m;const y=m.factory||(m.factory=$i(m.type)),D=new Gt(y,is(m),Pc);n.blueprint[d]=D,o[d]=D,function Fm(n,i,o,d,m){const y=m.hostBindings;if(y){let D=n.hostBindingOpCodes;null===D&&(D=n.hostBindingOpCodes=[]);const I=~i.index;(function rp(n){let i=n.length;for(;i>0;){const o=n[--i];if("number"==typeof o&&o<0)return o}return 0})(D)!=I&&D.push(I),D.push(o,d,y)}}(n,i,d,Wo(n,o,m.hostVars,ni),m)}function Lh(n,i,o,d,m,y,D){if(null==y)n.removeAttribute(i,m,o);else{const I=null==D?Ne(y):D(y,d||"",m);n.setAttribute(i,m,I,o)}}function sp(n,i,o,d,m,y){const D=y[i];if(null!==D){const I=d.setInput;for(let F=0;F<D.length;){const z=D[F++],ee=D[F++],oe=D[F++];null!==I?d.setInput(o,oe,z,ee):o[ee]=oe}}}function Bh(n,i,o){let d=null,m=0;for(;m<o.length;){const y=o[m];if(0!==y)if(5!==y){if("number"==typeof y)break;if(n.hasOwnProperty(y)){null===d&&(d=[]);const D=n[y];for(let I=0;I<D.length;I+=2)if(D[I]===i){d.push(y,D[I+1],o[m+1]);break}}m+=2}else m+=2;else m+=4}return d}function md(n,i,o,d){return[n,!0,!1,i,null,0,d,o,null,null]}function A_(n,i){const o=Yr(i,n);if(yo(o)){const d=o[Yt];48&o[An]?Nc(d,o,d.template,o[Bi]):o[bs]>0&&gd(o)}}function gd(n){for(let d=_f(n);null!==d;d=vf(d))for(let m=Wr;m<d.length;m++){const y=d[m];if(yo(y))if(512&y[An]){const D=y[Yt];Nc(D,y,D.template,y[Bi])}else y[bs]>0&&gd(y)}const o=n[Yt].components;if(null!==o)for(let d=0;d<o.length;d++){const m=Yr(o[d],n);yo(m)&&m[bs]>0&&gd(m)}}function I_(n,i){const o=Yr(i,n),d=o[Yt];(function P_(n,i){for(let o=i.length;o<n.blueprint.length;o++)i.push(n.blueprint[o])})(d,o),Dl(d,o,o[Bi])}function _d(n,i){return n[Vs]?n[ga][ns]=i:n[Vs]=i,n[ga]=i,i}function tc(n){for(;n;){n[An]|=32;const i=Qu(n);if(qo(n)&&!i)return n;n=i}return null}function kh(n,i,o,d=!0){const m=i[_o];m.begin&&m.begin();try{Nc(n,i,n.template,o)}catch(D){throw d&&Vh(i,D),D}finally{m.end&&m.end()}}function Gh(n,i,o){so(0),i(n,o)}function Du(n){return n[Po]||(n[Po]=[])}function ap(n){return n.cleanup||(n.cleanup=[])}function Vh(n,i){const o=n[Gs],d=o?o.get(gh,null):null;d&&d.handleError(i)}function Uh(n,i,o,d,m){for(let y=0;y<o.length;){const D=o[y++],I=o[y++],F=i[D],z=n.data[D];null!==z.setInput?z.setInput(F,m,d,I):F[I]=m}}function Hh(n,i,o){let d=o?n.styles:null,m=o?n.classes:null,y=0;if(null!==i)for(let D=0;D<i.length;D++){const I=i[D];"number"==typeof I?y=I:1==y?m=Lt(m,I):2==y&&(d=Lt(d,I+": "+i[++D]+";"))}o?n.styles=d:n.stylesWithoutHost=d,o?n.classes=m:n.classesWithoutHost=m}function zh(n,i,o,d,m=!1){for(;null!==o;){const y=i[o.index];if(null!==y&&d.push(Vi(y)),Cr(y))for(let I=Wr;I<y.length;I++){const F=y[I],z=F[Yt].firstChild;null!==z&&zh(F[Yt],F,z,d)}const D=o.type;if(8&D)zh(n,i,o.child,d);else if(32&D){const I=gf(o,i);let F;for(;F=I();)d.push(F)}else if(16&D){const I=$g(i,o);if(Array.isArray(I))d.push(...I);else{const F=Qu(i[Sr]);zh(F[Yt],F,I,d,!0)}}o=m?o.projectionNext:o.next}return d}class wu{get rootNodes(){const i=this._lView,o=i[Yt];return zh(o,i,o.firstChild,[])}constructor(i,o){this._lView=i,this._cdRefInjectingView=o,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Bi]}set context(i){this._lView[Bi]=i}get destroyed(){return 128==(128&this._lView[An])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const i=this._lView[Pi];if(Cr(i)){const o=i[Gr],d=o?o.indexOf(this):-1;d>-1&&(Tf(i,d),R(o,d))}this._attachedToViewContainer=!1}Hp(this._lView[Yt],this._lView)}onDestroy(i){Co(this._lView[Yt],this._lView,null,i)}markForCheck(){tc(this._cdRefInjectingView||this._lView)}detach(){this._lView[An]&=-65}reattach(){this._lView[An]|=64}detectChanges(){kh(this._lView[Yt],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ie(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function kg(n,i){Qd(n,i,i[kn],2,null,null)}(this._lView[Yt],this._lView)}attachToAppRef(i){if(this._attachedToViewContainer)throw new Ie(902,!1);this._appRef=i}}class jm extends wu{constructor(i){super(i),this._view=i}detectChanges(){const i=this._view;kh(i[Yt],i,i[Bi],!1)}checkNoChanges(){}get context(){return null}}class vd extends ld{constructor(i){super(),this.ngModule=i}resolveComponentFactory(i){const o=gi(i);return new Rl(o,this.ngModule)}}function Wh(n){const i=[];for(let o in n)n.hasOwnProperty(o)&&i.push({propName:n[o],templateName:o});return i}class Gm{constructor(i,o){this.injector=i,this.parentInjector=o}get(i,o,d){d=Yo(d);const m=this.injector.get(i,mh,d);return m!==mh||o===mh?m:this.parentInjector.get(i,o,d)}}class Rl extends _m{get inputs(){return Wh(this.componentDef.inputs)}get outputs(){return Wh(this.componentDef.outputs)}constructor(i,o){super(),this.componentDef=i,this.ngModule=o,this.componentType=i.type,this.selector=function yh(n){return n.map(dd).join(",")}(i.selectors),this.ngContentSelectors=i.ngContentSelectors?i.ngContentSelectors:[],this.isBoundToModule=!!o}create(i,o,d,m){let y=(m=m||this.ngModule)instanceof wc?m:m?.injector;y&&null!==this.componentDef.getStandaloneInjector&&(y=this.componentDef.getStandaloneInjector(y)||y);const D=y?new Gm(i,y):i,I=D.get(Vf,null);if(null===I)throw new Ie(407,!1);const F=D.get(ym,null),z=I.createRenderer(null,this.componentDef),ee=this.componentDef.selectors[0][0]||"div",oe=d?function Om(n,i,o){return n.selectRootElement(i,o===ae.ShadowDom)}(z,d,this.componentDef.encapsulation):bf(z,ee,function km(n){const i=n.toLowerCase();return"svg"===i?"svg":"math"===i?"math":null}(ee)),ye=this.componentDef.onPush?288:272,Ae=Eh(0,null,null,1,0,null,null,null,null,null),st=fd(null,Ae,null,ye,null,null,I,z,F,D,null);let Pt,Qt;To(st);try{const gn=this.componentDef;let In,Ct=null;gn.findHostDirectiveDefs?(In=[],Ct=new Map,gn.findHostDirectiveDefs(gn,In,Ct),In.push(gn)):In=[gn];const ci=function Um(n,i){const o=n[Yt],d=Oi;return n[d]=i,Oc(o,d,2,"#host",null)}(st,oe),ss=function lp(n,i,o,d,m,y,D,I){const F=m[Yt];!function bd(n,i,o,d){for(const m of n)i.mergedAttrs=yr(i.mergedAttrs,m.hostAttrs);null!==i.mergedAttrs&&(Hh(i,i.mergedAttrs,!0),null!==o&&eh(d,o,i))}(d,n,i,D);const z=y.createRenderer(i,o),ee=fd(m,Lc(o),null,o.onPush?32:16,m[n.index],n,y,z,I||null,null,null);return F.firstCreatePass&&C_(F,n,d.length-1),_d(m,ee),m[n.index]=ee}(ci,oe,gn,In,st,I,z);Qt=Hl(Ae,Oi),oe&&function cp(n,i,o,d){if(d)sn(n,o,["ng-version",bm.full]);else{const{attrs:m,classes:y}=function xm(n){const i=[],o=[];let d=1,m=2;for(;d<n.length;){let y=n[d];if("string"==typeof y)2===m?""!==y&&i.push(y,n[++d]):8===m&&o.push(y);else{if(!Ni(m))break;m=y}d++}return{attrs:i,classes:o}}(i.selectors[0]);m&&sn(n,o,m),y&&y.length>0&&tm(n,o,y.join(" "))}}(z,gn,oe,d),void 0!==o&&function Bv(n,i,o){const d=n.projection=[];for(let m=0;m<i.length;m++){const y=o[m];d.push(null!=y?Array.from(y):null)}}(Qt,this.ngContentSelectors,o),Pt=function Hm(n,i,o,d,m,y){const D=pr(),I=m[Yt],F=Ms(D,m);ip(I,m,D,o,null,d);for(let ee=0;ee<o.length;ee++)Zs(br(m,I,D.directiveStart+ee,D),m);xu(I,m,D),F&&Zs(F,m);const z=br(m,I,D.directiveStart+D.componentOffset,D);if(n[Bi]=m[Bi]=z,null!==y)for(const ee of y)ee(z,i);return Fc(I,D,n),z}(ss,gn,In,Ct,st,[Td]),Dl(Ae,st,null)}finally{Mo()}return new Vm(this.componentType,Pt,pu(Qt,st),st,Qt)}}class Vm extends gm{constructor(i,o,d,m,y){super(),this.location=d,this._rootLView=m,this._tNode=y,this.instance=o,this.hostView=this.changeDetectorRef=new jm(m),this.componentType=i}setInput(i,o){const d=this._tNode.inputs;let m;if(null!==d&&(m=d[i])){const y=this._rootLView;Uh(y[Yt],y,m,i,o),tc(Yr(this._tNode.index,y))}}get injector(){return new ji(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(i){this.hostView.onDestroy(i)}}function Td(){const n=pr();B(et()[Yt],n)}function up(n){let i=function O_(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),o=!0;const d=[n];for(;i;){let m;if(is(n))m=i.\u0275cmp||i.\u0275dir;else{if(i.\u0275cmp)throw new Ie(903,!1);m=i.\u0275dir}if(m){if(o){d.push(m);const D=n;D.inputs=Su(n.inputs),D.declaredInputs=Su(n.declaredInputs),D.outputs=Su(n.outputs);const I=m.hostBindings;I&&Wm(n,I);const F=m.viewQuery,z=m.contentQueries;if(F&&zm(n,F),z&&N_(n,z),ke(n.inputs,m.inputs),ke(n.declaredInputs,m.declaredInputs),ke(n.outputs,m.outputs),is(m)&&m.data.animation){const ee=n.data;ee.animation=(ee.animation||[]).concat(m.data.animation)}}const y=m.features;if(y)for(let D=0;D<y.length;D++){const I=y[D];I&&I.ngInherit&&I(n),I===up&&(o=!1)}}i=Object.getPrototypeOf(i)}!function Ru(n){let i=0,o=null;for(let d=n.length-1;d>=0;d--){const m=n[d];m.hostVars=i+=m.hostVars,m.hostAttrs=yr(m.hostAttrs,o=yr(o,m.hostAttrs))}}(d)}function Su(n){return n===Ce?{}:n===Ve?[]:n}function zm(n,i){const o=n.viewQuery;n.viewQuery=o?(d,m)=>{i(d,m),o(d,m)}:i}function N_(n,i){const o=n.contentQueries;n.contentQueries=o?(d,m,y)=>{i(d,m,y),o(d,m,y)}:i}function Wm(n,i){const o=n.hostBindings;n.hostBindings=o?(d,m)=>{i(d,m),o(d,m)}:i}function r(n){return i=>{i.findHostDirectiveDefs=p,i.hostDirectives=(Array.isArray(n)?n:n()).map(o=>"function"==typeof o?{directive:dt(o),inputs:Ce,outputs:Ce}:{directive:dt(o.directive),inputs:M(o.inputs),outputs:M(o.outputs)})}}function p(n,i,o){if(null!==n.hostDirectives)for(const d of n.hostDirectives){const m=cr(d.directive);N(m.declaredInputs,d.inputs),p(m,i,o),o.set(m,d),i.push(m)}}function M(n){if(void 0===n||0===n.length)return Ce;const i={};for(let o=0;o<n.length;o+=2)i[n[o]]=n[o+1];return i}function N(n,i){for(const o in i)i.hasOwnProperty(o)&&(n[i[o]]=n[o])}function De(n){return!!St(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function St(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Nn(n,i,o){return n[i]=o}function Dn(n,i,o){return!Object.is(n[i],o)&&(n[i]=o,!0)}function $n(n,i,o,d){const m=Dn(n,i,o);return Dn(n,i+1,d)||m}function Ti(n,i,o,d){const m=et();return Dn(m,zs(),i)&&(ei(),function la(n,i,o,d,m,y){const D=Ms(n,i);Lh(i[kn],D,y,n.value,o,d,m)}(Ei(),m,n,i,o,d)),Ti}function hi(n,i,o,d){return Dn(n,zs(),o)?i+Ne(o)+d:ni}function qa(n,i,o,d,m,y,D,I){const F=et(),z=ei(),ee=n+Oi,oe=z.firstCreatePass?function Au(n,i,o,d,m,y,D,I,F){const z=i.consts,ee=Oc(i,n,4,D||null,_i(z,I));Nh(i,o,ee,_i(z,F)),B(i,ee);const oe=ee.tView=Eh(2,ee,d,m,y,i.directiveRegistry,i.pipeRegistry,null,i.schemas,z);return null!==i.queries&&(i.queries.template(i,ee),oe.queries=i.queries.embeddedTView(ee)),ee}(ee,z,F,i,o,d,m,y,D):z.data[ee];Wt(oe,!1);const ye=F[kn].createComment("");qd(z,F,ye,oe),Zs(ye,F),_d(F,F[ee]=md(ye,F,ye,oe)),Bl(oe)&&Sh(z,F,oe),null!=D&&Ch(F,oe,I)}function xd(n){return Hs(function Os(){return mn.lFrame.contextLView}(),Oi+n)}function Sl(n,i,o){const d=et();return Dn(d,zs(),i)&&ms(ei(),Ei(),d,n,i,d[kn],o,!1),Sl}function Pu(n,i,o,d,m){const D=m?"class":"style";Uh(n,o,i.inputs[D],D,d)}function jc(n,i,o,d){const m=et(),y=ei(),D=Oi+n,I=m[kn],F=y.firstCreatePass?function L_(n,i,o,d,m,y){const D=i.consts,F=Oc(i,n,2,d,_i(D,m));return Nh(i,o,F,_i(D,y)),null!==F.attrs&&Hh(F,F.attrs,!1),null!==F.mergedAttrs&&Hh(F,F.mergedAttrs,!0),null!==i.queries&&i.queries.elementStart(i,F),F}(D,y,m,i,o,d):y.data[D],z=m[D]=bf(I,i,function O(){return mn.lFrame.currentNamespace}()),ee=Bl(F);return Wt(F,!0),eh(I,z,F),32!=(32&F.flags)&&qd(y,m,z,F),0===function cc(){return mn.lFrame.elementDepthCount}()&&Zs(z,m),function Ui(){mn.lFrame.elementDepthCount++}(),ee&&(Sh(y,m,F),Fc(y,F,m)),null!==d&&Ch(m,F),jc}function $h(){let n=pr();bo()?ya():(n=n.parent,Wt(n,!1));const i=n;!function hl(){mn.lFrame.elementDepthCount--}();const o=ei();return o.firstCreatePass&&(B(o,n),_a(n)&&o.queries.elementEnd(n)),null!=i.classesWithoutHost&&function C(n){return 0!=(8&n.flags)}(i)&&Pu(o,i,et(),i.classesWithoutHost,!0),null!=i.stylesWithoutHost&&function u(n){return 0!=(16&n.flags)}(i)&&Pu(o,i,et(),i.stylesWithoutHost,!1),$h}function Yh(n,i,o,d){return jc(n,i,o,d),$h(),Yh}function Jh(n,i,o){const d=et(),m=ei(),y=n+Oi,D=m.firstCreatePass?function B_(n,i,o,d,m){const y=i.consts,D=_i(y,d),I=Oc(i,n,8,"ng-container",D);return null!==D&&Hh(I,D,!0),Nh(i,o,I,_i(y,m)),null!==i.queries&&i.queries.elementStart(i,I),I}(y,m,d,i,o):m.data[y];Wt(D,!0);const I=d[y]=d[kn].createComment("");return qd(m,d,I,D),Zs(I,d),Bl(D)&&(Sh(m,d,D),Fc(m,D,d)),null!=o&&Ch(d,D),Jh}function Dd(){let n=pr();const i=ei();return bo()?ya():(n=n.parent,Wt(n,!1)),i.firstCreatePass&&(B(i,n),_a(n)&&i.queries.elementEnd(n)),Dd}function ic(){return et()}function wd(n){return!!n&&"function"==typeof n.then}function Cl(n){return!!n&&"function"==typeof n.subscribe}const kc=Cl;function Ou(n,i,o,d){const m=et(),y=ei(),D=pr();return function $m(n,i,o,d,m,y,D){const I=Bl(d),z=n.firstCreatePass&&ap(n),ee=i[Bi],oe=Du(i);let ye=!0;if(3&d.type||D){const Pt=Ms(d,i),Qt=D?D(Pt):Pt,gn=oe.length,In=D?ci=>D(Vi(ci[d.index])):d.index;let Ct=null;if(!D&&I&&(Ct=function hp(n,i,o,d){const m=n.cleanup;if(null!=m)for(let y=0;y<m.length-1;y+=2){const D=m[y];if(D===o&&m[y+1]===d){const I=i[Po],F=m[y+2];return I.length>F?I[F]:null}"string"==typeof D&&(y+=2)}return null}(n,i,m,d.index)),null!==Ct)(Ct.__ngLastListenerFn__||Ct).__ngNextListenerFn__=y,Ct.__ngLastListenerFn__=y,ye=!1;else{y=fp(d,i,ee,y,!1);const ci=o.listen(Qt,m,y);oe.push(y,ci),z&&z.push(m,In,gn,gn+1)}}else y=fp(d,i,ee,y,!1);const Ae=d.outputs;let st;if(ye&&null!==Ae&&(st=Ae[m])){const Pt=st.length;if(Pt)for(let Qt=0;Qt<Pt;Qt+=2){const ss=i[st[Qt]][st[Qt+1]].subscribe(y),Ls=oe.length;oe.push(y,ss),z&&z.push(m,d.index,Ls,-(Ls+1))}}}(y,m,m[kn],D,n,i,d),Ou}function Nu(n,i,o,d){try{return ds(6,i,o),!1!==o(d)}catch(m){return Vh(n,m),!1}finally{ds(7,i,o)}}function fp(n,i,o,d,m){return function y(D){if(D===Function)return d;tc(n.componentOffset>-1?Yr(n.index,i):i);let F=Nu(i,o,d,D),z=y.__ngNextListenerFn__;for(;z;)F=Nu(i,o,z,D)&&F,z=z.__ngNextListenerFn__;return m&&!1===F&&(D.preventDefault(),D.returnValue=!1),F}}function Zh(n=1){return function ra(n){return(mn.lFrame.contextLView=function Ga(n,i){for(;n>0;)i=i[Oo],n--;return i}(n,mn.lFrame.contextLView))[Bi]}(n)}function Oy(n,i){let o=null;const d=function Jf(n){const i=n.attrs;if(null!=i){const o=i.indexOf(5);if(!(1&o))return i[o+1]}return null}(n);for(let m=0;m<i.length;m++){const y=i[m];if("*"!==y){if(null===d?Yf(n,y,!0):vh(d,y))return m}else o=m}return o}function El(n){const i=et()[Sr][er];if(!i.projection){const d=i.projection=T(n?n.length:1,null),m=d.slice();let y=i.child;for(;null!==y;){const D=n?Oy(y,n):0;null!==D&&(m[D]?m[D].projectionNext=y:d[D]=y,m[D]=y),y=y.next}}}function Rd(n,i=0,o){const d=et(),m=ei(),y=Oc(m,Oi+n,16,null,o||null);null===y.projection&&(y.projection=i),ya(),32!=(32&y.flags)&&function wy(n,i,o){Yg(i[kn],0,i,o,zp(n,o,i),Jp(o.parent||i[er],o,i))}(m,d,y)}function Ym(n,i,o){return Sd(n,"",i,"",o),Ym}function Sd(n,i,o,d,m){const y=et(),D=hi(y,i,o,d);return D!==ni&&ms(ei(),Ei(),y,n,D,y[kn],m,!1),Sd}function qh(n,i){return n<<17|i<<2}function Fu(n){return n>>17&32767}function j_(n){return 2|n}function ua(n){return(131068&n)>>2}function Uv(n,i){return-131069&n|i<<2}function Xh(n){return 1|n}function zv(n,i,o,d,m){const y=n[o+1],D=null===i;let I=d?Fu(y):ua(y),F=!1;for(;0!==I&&(!1===F||D);){const ee=n[I+1];k_(n[I],i)&&(F=!0,n[I+1]=d?Xh(ee):j_(ee)),I=d?Fu(ee):ua(ee)}F&&(n[o+1]=d?j_(y):Xh(y))}function k_(n,i){return null===n||null==i||(Array.isArray(n)?n[1]:n)===i||!(!Array.isArray(n)||"string"!=typeof i)&&Ut(n,i)>=0}const Ss={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function G_(n){return n.substring(Ss.key,Ss.keyEnd)}function Wv(n,i){const o=Ss.textEnd;return o===i?-1:(i=Ss.keyEnd=function Ly(n,i,o){for(;i<o&&n.charCodeAt(i)>32;)i++;return i}(n,Ss.key=i,o),ef(n,i,o))}function ef(n,i,o){for(;i<o&&n.charCodeAt(i)<=32;)i++;return i}function V_(n,i,o){return Il(n,i,o,!1),V_}function gp(n,i){return Il(n,i,null,!0),gp}function Kv(n){Xa(be,Vc,n,!0)}function Vc(n,i){for(let o=function Fy(n){return function Jm(n){Ss.key=0,Ss.keyEnd=0,Ss.value=0,Ss.valueEnd=0,Ss.textEnd=n.length}(n),Wv(n,ef(n,0,Ss.textEnd))}(i);o>=0;o=Wv(i,o))be(n,G_(i),!0)}function Il(n,i,o,d){const m=et(),y=ei(),D=Ws(2);y.firstUpdatePass&&ky(y,n,D,d),i!==ni&&Dn(m,D,i)&&H_(y,y.data[Er()],m,m[kn],n,m[D+1]=function ey(n,i){return null==n||""===n||("string"==typeof i?n+=i:"object"==typeof n&&(n=Ke(zo(n)))),n}(i,o),d,D)}function Xa(n,i,o,d){const m=ei(),y=Ws(2);m.firstUpdatePass&&ky(m,null,y,d);const D=et();if(o!==ni&&Dn(D,y,o)){const I=m.data[Er()];if(ty(I,d)&&!U_(m,y)){let F=d?I.classesWithoutHost:I.stylesWithoutHost;null!==F&&(o=Lt(F,o||"")),Pu(m,I,D,o,d)}else!function Y0(n,i,o,d,m,y,D,I){m===ni&&(m=Ve);let F=0,z=0,ee=0<m.length?m[0]:null,oe=0<y.length?y[0]:null;for(;null!==ee||null!==oe;){const ye=F<m.length?m[F+1]:void 0,Ae=z<y.length?y[z+1]:void 0;let Pt,st=null;ee===oe?(F+=2,z+=2,ye!==Ae&&(st=oe,Pt=Ae)):null===oe||null!==ee&&ee<oe?(F+=2,st=ee):(z+=2,st=oe,Pt=Ae),null!==st&&H_(n,i,o,d,st,Pt,D,I),ee=F<m.length?m[F]:null,oe=z<y.length?y[z]:null}}(m,I,D,D[kn],D[y+1],D[y+1]=function Qv(n,i,o){if(null==o||""===o)return Ve;const d=[],m=zo(o);if(Array.isArray(m))for(let y=0;y<m.length;y++)n(d,m[y],!0);else if("object"==typeof m)for(const y in m)m.hasOwnProperty(y)&&n(d,y,m[y]);else"string"==typeof m&&i(d,m);return d}(n,i,o),d,y)}}function U_(n,i){return i>=n.expandoStartIndex}function ky(n,i,o,d){const m=n.data;if(null===m[o+1]){const y=m[Er()],D=U_(n,o);ty(y,d)&&null===i&&!D&&(i=!1),i=function Zm(n,i,o,d){const m=function ka(n){const i=mn.lFrame.currentDirectiveIndex;return-1===i?null:n[i]}(n);let y=d?i.residualClasses:i.residualStyles;if(null===m)0===(d?i.classBindings:i.styleBindings)&&(o=tf(o=Xv(null,n,i,o,d),i.attrs,d),y=null);else{const D=i.directiveStylingLast;if(-1===D||n[D]!==m)if(o=Xv(m,n,i,o,d),null===y){let F=function qv(n,i,o){const d=o?i.classBindings:i.styleBindings;if(0!==ua(d))return n[Fu(d)]}(n,i,d);void 0!==F&&Array.isArray(F)&&(F=Xv(null,n,i,F[1],d),F=tf(F,i.attrs,d),function W0(n,i,o,d){n[Fu(o?i.classBindings:i.styleBindings)]=d}(n,i,d,F))}else y=function $0(n,i,o){let d;const m=i.directiveEnd;for(let y=1+i.directiveStylingLast;y<m;y++)d=tf(d,n[y].hostAttrs,o);return tf(d,i.attrs,o)}(n,i,d)}return void 0!==y&&(d?i.residualClasses=y:i.residualStyles=y),o}(m,y,i,d),function Ny(n,i,o,d,m,y){let D=y?i.classBindings:i.styleBindings,I=Fu(D),F=ua(D);n[d]=o;let ee,z=!1;if(Array.isArray(o)?(ee=o[1],(null===ee||Ut(o,ee)>0)&&(z=!0)):ee=o,m)if(0!==F){const ye=Fu(n[I+1]);n[d+1]=qh(ye,I),0!==ye&&(n[ye+1]=Uv(n[ye+1],d)),n[I+1]=function Gc(n,i){return 131071&n|i<<17}(n[I+1],d)}else n[d+1]=qh(I,0),0!==I&&(n[I+1]=Uv(n[I+1],d)),I=d;else n[d+1]=qh(F,0),0===I?I=d:n[F+1]=Uv(n[F+1],d),F=d;z&&(n[d+1]=j_(n[d+1])),zv(n,ee,d,!0),zv(n,ee,d,!1),function Hv(n,i,o,d,m){const y=m?n.residualClasses:n.residualStyles;null!=y&&"string"==typeof i&&Ut(y,i)>=0&&(o[d+1]=Xh(o[d+1]))}(i,ee,n,d,y),D=qh(I,F),y?i.classBindings=D:i.styleBindings=D}(m,y,i,o,D,d)}}function Xv(n,i,o,d,m){let y=null;const D=o.directiveEnd;let I=o.directiveStylingLast;for(-1===I?I=o.directiveStart:I++;I<D&&(y=i[I],d=tf(d,y.hostAttrs,m),y!==n);)I++;return null!==n&&(o.directiveStylingLast=I),d}function tf(n,i,o){const d=o?1:2;let m=-1;if(null!==i)for(let y=0;y<i.length;y++){const D=i[y];"number"==typeof D?m=D:m===d&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),be(n,D,!!o||i[++y]))}return void 0===n?null:n}function H_(n,i,o,d,m,y,D,I){if(!(3&i.type))return;const F=n.data,z=F[I+1],ee=function U0(n){return 1==(1&n)}(z)?z_(F,i,o,m,ua(z),D):void 0;rc(ee)||(rc(y)||function Vv(n){return 2==(2&n)}(z)&&(y=z_(F,null,o,m,I,D)),function Ry(n,i,o,d,m){if(i)m?n.addClass(o,d):n.removeClass(o,d);else{let y=-1===d.indexOf("-")?void 0:$a.DashCase;null==m?n.removeStyle(o,d,y):("string"==typeof m&&m.endsWith("!important")&&(m=m.slice(0,-10),y|=$a.Important),n.setStyle(o,d,m,y))}}(d,D,ea(Er(),o),m,y))}function z_(n,i,o,d,m,y){const D=null===i;let I;for(;m>0;){const F=n[m],z=Array.isArray(F),ee=z?F[1]:F,oe=null===ee;let ye=o[m+1];ye===ni&&(ye=oe?Ve:void 0);let Ae=oe?nt(ye,d):ee===d?ye:void 0;if(z&&!rc(Ae)&&(Ae=nt(F,d)),rc(Ae)&&(I=Ae,D))return I;const st=n[m+1];m=D?Fu(st):ua(st)}if(null!==i){let F=y?i.residualClasses:i.residualStyles;null!=F&&(I=nt(F,d))}return I}function rc(n){return void 0!==n}function ty(n,i){return 0!=(n.flags&(i?8:16))}function Bu(n,i=""){const o=et(),d=ei(),m=n+Oi,y=d.firstCreatePass?Oc(d,m,1,i,null):d.data[m],D=o[m]=yf(o[kn],i);qd(d,o,D,y),Wt(y,!1)}function ny(n){return W_("",n,""),ny}function W_(n,i,o){const d=et(),m=hi(d,n,i,o);return m!==ni&&function wl(n,i,o){const d=ea(i,n);Zd(n[kn],d,o)}(d,Er(),m),W_}function qm(n,i,o,d,m){Xa(be,Vc,function Zi(n,i,o,d,m,y){const I=$n(n,Jn(),o,m);return Ws(2),I?i+Ne(o)+d+Ne(m)+y:ni}(et(),n,i,o,d,m),!0)}function Qm(n,i,o){const d=et();return Dn(d,zs(),i)&&ms(ei(),Ei(),d,n,i,d[kn],o,!0),Qm}const nf=void 0;var q0=["en",[["a","p"],["AM","PM"],nf],[["AM","PM"],nf,nf],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],nf,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],nf,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",nf,"{1} 'at' {0}",nf],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function ay(n){const o=Math.floor(Math.abs(n)),d=n.toString().replace(/^[^.]*\.?/,"").length;return 1===o&&0===d?1:5}];let Ra={};function vp(n){const i=function ly(n){return n.toLowerCase().replace(/_/g,"-")}(n);let o=o0(i);if(o)return o;const d=i.split("-")[0];if(o=o0(d),o)return o;if("en"===d)return q0;throw new Ie(701,!1)}function K_(n){return vp(n)[Pn.PluralCase]}function o0(n){return n in Ra||(Ra[n]=ki.ng&&ki.ng.common&&ki.ng.common.locales&&ki.ng.common.locales[n]),Ra[n]}var Pn=(()=>((Pn=Pn||{})[Pn.LocaleId=0]="LocaleId",Pn[Pn.DayPeriodsFormat=1]="DayPeriodsFormat",Pn[Pn.DayPeriodsStandalone=2]="DayPeriodsStandalone",Pn[Pn.DaysFormat=3]="DaysFormat",Pn[Pn.DaysStandalone=4]="DaysStandalone",Pn[Pn.MonthsFormat=5]="MonthsFormat",Pn[Pn.MonthsStandalone=6]="MonthsStandalone",Pn[Pn.Eras=7]="Eras",Pn[Pn.FirstDayOfWeek=8]="FirstDayOfWeek",Pn[Pn.WeekendRange=9]="WeekendRange",Pn[Pn.DateFormat=10]="DateFormat",Pn[Pn.TimeFormat=11]="TimeFormat",Pn[Pn.DateTimeFormat=12]="DateTimeFormat",Pn[Pn.NumberSymbols=13]="NumberSymbols",Pn[Pn.NumberFormats=14]="NumberFormats",Pn[Pn.CurrencyCode=15]="CurrencyCode",Pn[Pn.CurrencySymbol=16]="CurrencySymbol",Pn[Pn.CurrencyName=17]="CurrencyName",Pn[Pn.Currencies=18]="Currencies",Pn[Pn.Directionality=19]="Directionality",Pn[Pn.PluralCase=20]="PluralCase",Pn[Pn.ExtraData=21]="ExtraData",Pn))();const Q0=["zero","one","two","few","many"],yp="en-US",Ad={marker:"element"},bp={marker:"ICU"};var gs=(()=>((gs=gs||{})[gs.SHIFT=2]="SHIFT",gs[gs.APPEND_EAGERLY=1]="APPEND_EAGERLY",gs[gs.COMMENT=2]="COMMENT",gs))();let Xr=yp;function l0(n){(function jn(n,i){null==n&&tn(i,n,null,"!=")})(n,"Expected localeId to be defined"),"string"==typeof n&&(Xr=n.toLowerCase().replace(/_/g,"-"))}function Tp(n,i,o){const d=i.insertBeforeIndex,m=Array.isArray(d)?d[0]:d;return null===m?Zp(n,0,o):Vi(o[m])}function c0(n,i,o,d,m){const y=i.insertBeforeIndex;if(Array.isArray(y)){let D=d,I=null;if(3&i.type||(I=D,D=m),null!==D&&-1===i.componentOffset)for(let F=1;F<y.length;F++)bc(n,D,o[y[F]],I,!1)}}function u0(n,i){if(n.push(i),n.length>1)for(let o=n.length-2;o>=0;o--){const d=n[o];d0(d)||uy(d,i)&&null===eg(d)&&X_(d,i.index)}}function d0(n){return!(64&n.type)}function uy(n,i){return d0(i)||n.index>i.index}function eg(n){const i=n.insertBeforeIndex;return Array.isArray(i)?i[0]:i}function X_(n,i){const o=n.insertBeforeIndex;Array.isArray(o)?o[0]=i:(qp(Tp,c0),n.insertBeforeIndex=i)}function tg(n,i){const o=n.data[i];return null===o||"string"==typeof o?null:o.hasOwnProperty("currentCaseLViewIndex")?o:o.value}function Uc(n,i,o){const d=wh(n,o,64,null,null);return u0(i,d),d}function ng(n,i){const o=i[n.currentCaseLViewIndex];return null===o?o:o<0?~o:o}function dy(n){return n>>>17}function hy(n){return(131070&n)>>>1}let ig=0,rg=0;function f0(n,i,o,d){const m=o[kn];let D,y=null;for(let I=0;I<i.length;I++){const F=i[I];if("string"==typeof F){const z=i[++I];null===o[z]&&(o[z]=yf(m,F))}else if("number"==typeof F)switch(1&F){case 0:const z=dy(F);let ee,oe;if(null===y&&(y=z,D=Kd(m,d)),z===y?(ee=d,oe=D):(ee=null,oe=Vi(o[z])),null!==oe){const Pt=hy(F);bc(m,oe,o[Pt],ee,!1);const gn=tg(n,Pt);if(null!==gn&&"object"==typeof gn){const In=ng(gn,o);null!==In&&f0(n,gn.create[In],o,o[gn.anchorIdx])}}break;case 1:const Ae=i[++I],st=i[++I];Lh(m,ea(F>>>1,o),null,null,Ae,st,null)}else switch(F){case bp:const z=i[++I],ee=i[++I];null===o[ee]&&Zs(o[ee]=Lg(m,z),o);break;case Ad:const oe=i[++I],ye=i[++I];null===o[ye]&&Zs(o[ye]=bf(m,oe,null),o)}}}function p0(n,i,o,d,m){for(let y=0;y<o.length;y++){const D=o[y],I=o[++y];if(D&m){let F="";for(let z=y+1;z<=y+I;z++){const ee=o[z];if("string"==typeof ee)F+=ee;else if("number"==typeof ee)if(ee<0)F+=Ne(i[d-ee]);else{const oe=ee>>>2;switch(3&ee){case 1:const ye=o[++z],Ae=o[++z],st=n.data[oe];"string"==typeof st?Lh(i[kn],i[oe],null,st,ye,F,Ae):ms(n,st,i,ye,F,i[kn],Ae,!1);break;case 0:const Pt=i[oe];null!==Pt&&Zd(i[kn],Pt,F);break;case 2:ob(n,tg(n,oe),i,F);break;case 3:m0(n,tg(n,oe),d,i)}}}}else{const F=o[y+1];if(F>0&&3==(3&F)){const ee=tg(n,F>>>2);i[ee.currentCaseLViewIndex]<0&&m0(n,ee,d,i)}}y+=I}}function m0(n,i,o,d){let m=d[i.currentCaseLViewIndex];if(null!==m){let y=ig;m<0&&(m=d[i.currentCaseLViewIndex]=~m,y=-1),p0(n,d,i.update[m],o,y)}}function ob(n,i,o,d){const m=function ab(n,i){let o=n.cases.indexOf(i);if(-1===o)switch(n.type){case 1:{const d=function a0(n,i){const o=K_(i)(parseInt(n,10)),d=Q0[o];return void 0!==d?d:"other"}(i,function _s(){return Xr}());o=n.cases.indexOf(d),-1===o&&"other"!==d&&(o=n.cases.indexOf("other"));break}case 0:o=n.cases.indexOf("other")}return-1===o?null:o}(i,d);if(ng(i,o)!==m&&(g0(n,i,o),o[i.currentCaseLViewIndex]=null===m?null:~m,null!==m)){const D=o[i.anchorIdx];D&&f0(n,i.create[m],o,D)}}function g0(n,i,o){let d=ng(i,o);if(null!==d){const m=i.remove[d];for(let y=0;y<m.length;y++){const D=m[y];if(D>0){const I=ea(D,o);null!==I&&Qp(o[kn],I)}else g0(n,tg(n,~D),o)}}}function lb(){const n=[];let o,d,i=-1;function y(I,F){i=0;const z=ng(I,F);d=null!==z?I.remove[z]:Ve}function D(){if(i<d.length){const I=d[i++];return I>0?o[I]:(n.push(i,d),y(o[Yt].data[~I],o),D())}return 0===n.length?null:(d=n.pop(),i=n.pop(),D())}return function m(I,F){for(o=F;n.length;)n.pop();return y(I.value,F),D}}const Q_=/\ufffd(\d+):?\d*\ufffd/gi,ub=/\ufffd(\d+)\ufffd/,v0=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,sg="\ufffd",v=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,e=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,t=/\uE500/g;function g(n,i,o,d,m,y,D){const I=Wo(n,d,1,null);let F=I<<gs.SHIFT,z=ro();i===z&&(z=null),null===z&&(F|=gs.APPEND_EAGERLY),D&&(F|=gs.COMMENT,function Og(n){void 0===mf&&(mf=n())}(lb)),m.push(F,null===y?"":y);const ee=wh(n,I,D?32:1,null===y?"":y,null);u0(o,ee);const oe=ee.index;return Wt(ee,!1),null!==z&&i!==z&&function tb(n,i){let o=n.insertBeforeIndex;null===o?(qp(Tp,c0),o=n.insertBeforeIndex=[null,i]):(function Me(n,i,o){n!=i&&tn(o,n,i,"==")}(Array.isArray(o),!0,"Expecting array here"),o.push(i))}(z,oe),ee}function _(n,i,o,d,m,y,D){const I=D.match(Q_),F=g(n,i,o,y,d,I?null:D,!1);I&&x(m,D,F.index,null,0,null)}function x(n,i,o,d,m,y){const D=n.length,I=D+1;n.push(null,null);const F=D+2,z=i.split(Q_);let ee=0;for(let oe=0;oe<z.length;oe++){const ye=z[oe];if(1&oe){const Ae=m+parseInt(ye,10);n.push(-1-Ae),ee|=A(Ae)}else""!==ye&&n.push(ye)}return n.push(o<<2|(d?1:0)),d&&n.push(d,y),n[D]=ee,n[I]=n.length-F,ee}function A(n){return 1<<Math.min(n,31)}function L(n){let i,y,o="",d=0,m=!1;for(;null!==(i=v.exec(n));)m?i[0]===`${sg}/*${y}${sg}`&&(d=i.index,m=!1):(o+=n.substring(d,i.index+i[0].length),y=i[1],m=!0);return o+=n.slice(d),o}function j(n,i,o,d,m,y){let D=0;const I={type:m.type,currentCaseLViewIndex:Wo(n,i,1,null),anchorIdx:y,cases:[],create:[],remove:[],update:[]};(function de(n,i,o){n.push(A(i.mainBinding),2,-1-i.mainBinding,o<<2|2)})(o,m,y),function eb(n,i,o){const d=n.data[i];null===d?n.data[i]=o:d.value=o}(n,y,I);const F=m.values;for(let z=0;z<F.length;z++){const ee=F[z],oe=[];for(let ye=0;ye<ee.length;ye++){const Ae=ee[ye];if("string"!=typeof Ae){const st=oe.push(Ae)-1;ee[ye]=`\x3c!--\ufffd${st}\ufffd--\x3e`}}D=q(n,I,i,o,d,m.cases[z],ee.join(""),oe)|D}D&&function _e(n,i,o){n.push(i,1,o<<2|3)}(o,D,y)}function k(n){const i=[],o=[];let d=1,m=0;const y=Y(n=n.replace(v0,function(D,I,F){return d="select"===F?0:1,m=parseInt(I.slice(1),10),""}));for(let D=0;D<y.length;){let I=y[D++].trim();1===d&&(I=I.replace(/\s*(?:=)?(\w+)\s*/,"$1")),I.length&&i.push(I);const F=Y(y[D++]);i.length>o.length&&o.push(F)}return{type:d,mainBinding:m,cases:i,values:o}}function Y(n){if(!n)return[];let i=0;const o=[],d=[],m=/[{}]/g;let y;for(m.lastIndex=0;y=m.exec(n);){const I=y.index;if("}"==y[0]){if(o.pop(),0==o.length){const F=n.substring(i,I);v0.test(F)?d.push(k(F)):d.push(F),i=I+1}}else{if(0==o.length){const F=n.substring(i,I);d.push(F),i=I+1}o.push("{")}}const D=n.substring(i);return d.push(D),d}function q(n,i,o,d,m,y,D,I){const F=[],z=[],ee=[];i.cases.push(y),i.create.push(F),i.remove.push(z),i.update.push(ee);const ye=function Sf(n){const i=new Qg(n);return function rh(){try{return!!(new window.DOMParser).parseFromString(dr(""),"text/html")}catch{return!1}}()?new Cf(i):i}(function uu(){return void 0!==Df?Df:typeof document<"u"?document:void 0}()).getInertBodyElement(D),Ae=function Of(n){return"content"in n&&function i_(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}(ye)||ye;return Ae?$(n,i,o,d,F,z,ee,Ae,m,I,0):0}function $(n,i,o,d,m,y,D,I,F,z,ee){let oe=0,ye=I.firstChild;for(;ye;){const Ae=Wo(n,o,1,null);switch(ye.nodeType){case Node.ELEMENT_NODE:const st=ye,Pt=st.tagName.toLowerCase();if(Af.hasOwnProperty(Pt)){X(m,Ad,Pt,F,Ae),n.data[Ae]=Pt;const Ct=st.attributes;for(let ci=0;ci<Ct.length;ci++){const ss=Ct.item(ci),Ls=ss.name.toLowerCase();ss.value.match(Q_)?Ya.hasOwnProperty(Ls)&&x(D,ss.value,Ae,ss.name,0,oh[Ls]?ed:null):fe(m,Ae,ss)}oe=$(n,i,o,d,m,y,D,ye,Ae,z,ee+1)|oe,Z(y,Ae,ee)}break;case Node.TEXT_NODE:const Qt=ye.textContent||"",gn=Qt.match(Q_);X(m,null,gn?"":Qt,F,Ae),Z(y,Ae,ee),gn&&(oe=x(D,Qt,Ae,null,0,null)|oe);break;case Node.COMMENT_NODE:const In=ub.exec(ye.textContent||"");if(In){const ci=z[parseInt(In[1],10)];X(m,bp,"",F,Ae),j(n,o,d,F,ci,Ae),se(y,Ae,ee)}}ye=ye.nextSibling}return oe}function Z(n,i,o){0===o&&n.push(i)}function se(n,i,o){0===o&&(n.push(~i),n.push(i))}function X(n,i,o,d,m){null!==i&&n.push(i),n.push(o,m,function nb(n,i,o){return n|i<<17|o<<1}(0,d,m))}function fe(n,i,o){n.push(i<<1|1,o.name,o.value)}function Bt(n,i,o=-1){const d=ei(),m=et(),y=Oi+n,D=_i(d.consts,i),I=ro();d.firstCreatePass&&function h(n,i,o,d,m,y){const D=ro(),I=[],F=[],z=[[]];m=function G(n,i){if(function E(n){return-1===n}(i))return L(n);{const o=n.indexOf(`:${i}${sg}`)+2+i.toString().length,d=n.search(new RegExp(`${sg}\\/\\*\\d+:${i}${sg}`));return L(n.substring(o,d))}}(m,y);const ee=function s(n){return n.replace(t," ")}(m).split(e);for(let oe=0;oe<ee.length;oe++){let ye=ee[oe];if(1&oe){const Ae=47===ye.charCodeAt(0),Pt=(ye.charCodeAt(Ae?1:0),Oi+Number.parseInt(ye.substring(Ae?2:1)));if(Ae)z.shift(),Wt(ro(),!1);else{const Qt=Uc(n,z[0],Pt);z.unshift([]),Wt(Qt,!0)}}else{const Ae=Y(ye);for(let st=0;st<Ae.length;st++){let Pt=Ae[st];if(1&st){const Qt=Pt;if("object"!=typeof Qt)throw new Error(`Unable to parse ICU expression in "${m}" message.`);j(n,o,F,i,Qt,g(n,D,z[0],o,I,"",!0).index)}else""!==Pt&&_(n,D,z[0],I,F,o,Pt)}}}n.data[d]={create:I,update:F}}(d,null===I?0:I.index,m,y,D,o);const F=d.data[y],ee=Wp(d,I===m[er]?null:I,m);(function sb(n,i,o,d){const m=n[kn];for(let y=0;y<i.length;y++){const D=i[y++],I=i[y],z=(D&gs.APPEND_EAGERLY)===gs.APPEND_EAGERLY,ee=D>>>gs.SHIFT;let oe=n[ee];null===oe&&(oe=n[ee]=(D&gs.COMMENT)===gs.COMMENT?m.createComment(I):yf(m,I)),z&&null!==o&&bc(m,o,oe,d,!1)}})(m,F.create,ee,I&&8&I.type?m[I.index]:null),Zc(!0)}function rt(n,i,o){Bt(n,i,o),function It(){Zc(!1)}()}function $t(n){return function ib(n){n&&(ig|=1<<Math.min(rg,31)),rg++}(Dn(et(),zs(),n)),$t}function zt(n){!function rb(n,i,o){if(rg>0){const d=n.data[o];p0(n,i,Array.isArray(d)?d:d.update,Jn()-rg-1,ig)}ig=0,rg=0}(ei(),et(),n+Oi)}function qn(n,i,o,d,m){if(n=dt(n),Array.isArray(n))for(let y=0;y<n.length;y++)qn(n[y],i,o,d,m);else{const y=ei(),D=et();let I=Dc(n)?n:dt(n.provide),F=Gf(n);const z=pr(),ee=1048575&z.providerIndexes,oe=z.directiveStart,ye=z.providerIndexes>>20;if(Dc(n)||!n.multi){const Ae=new Gt(F,m,Pc),st=ln(I,i,m?ee:ee+ye,oe);-1===st?(Ar(Ys(z,D),y,I),yn(y,n,i.length),i.push(I),z.directiveStart++,z.directiveEnd++,m&&(z.providerIndexes+=1048576),o.push(Ae),D.push(Ae)):(o[st]=Ae,D[st]=Ae)}else{const Ae=ln(I,i,ee+ye,oe),st=ln(I,i,ee,ee+ye),Qt=st>=0&&o[st];if(m&&!Qt||!m&&!(Ae>=0&&o[Ae])){Ar(Ys(z,D),y,I);const gn=function qt(n,i,o,d,m){const y=new Gt(n,o,Pc);return y.multi=[],y.index=i,y.componentProviders=0,Xn(y,m,d&&!o),y}(m?Tt:wi,o.length,m,d,F);!m&&Qt&&(o[st].providerFactory=gn),yn(y,n,i.length,0),i.push(I),z.directiveStart++,z.directiveEnd++,m&&(z.providerIndexes+=1048576),o.push(gn),D.push(gn)}else yn(y,n,Ae>-1?Ae:st,Xn(o[m?st:Ae],F,!m&&d));!m&&d&&Qt&&o[st].componentProviders++}}}function yn(n,i,o,d){const m=Dc(i),y=function a_(n){return!!n.useClass}(i);if(m||y){const F=(y?dt(i.useClass):i).prototype.ngOnDestroy;if(F){const z=n.destroyHooks||(n.destroyHooks=[]);if(!m&&i.multi){const ee=z.indexOf(o);-1===ee?z.push(o,[d,F]):z[ee+1].push(d,F)}else z.push(o,F)}}}function Xn(n,i,o){return o&&n.componentProviders++,n.multi.push(i)-1}function ln(n,i,o,d){for(let m=o;m<d;m++)if(i[m]===n)return m;return-1}function wi(n,i,o,d){return vt(this.multi,[])}function Tt(n,i,o,d){const m=this.multi;let y;if(this.providerFactory){const D=this.providerFactory.componentProviders,I=br(o,o[Yt],this.providerFactory.index,d);y=I.slice(0,D),vt(m,y);for(let F=D;F<I.length;F++)y.push(I[F])}else y=[],vt(m,y);return y}function vt(n,i){for(let o=0;o<n.length;o++)i.push((0,n[o])());return i}function xn(n,i=[]){return o=>{o.providersResolver=(d,m)=>function ft(n,i,o){const d=ei();if(d.firstCreatePass){const m=is(n);qn(o,d.data,d.blueprint,m,!0),qn(i,d.data,d.blueprint,m,!1)}}(d,m?m(n):n,i)}}class Xt{}class oi{}function Un(n,i){return new Mr(n,i??null)}class Mr extends Xt{constructor(i,o){super(),this._parent=o,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new vd(this);const d=jr(i);this._bootstrapComponents=Ja(d.bootstrap),this._r3Injector=_u(i,o,[{provide:Xt,useValue:this},{provide:ld,useValue:this.componentFactoryResolver}],Ke(i),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(i)}get injector(){return this._r3Injector}destroy(){const i=this._r3Injector;!i.destroyed&&i.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(i){this.destroyCbs.push(i)}}class nr extends oi{constructor(i){super(),this.moduleType=i}create(i){return new Mr(this.moduleType,i)}}class pe extends Xt{constructor(i,o,d){super(),this.componentFactoryResolver=new vd(this),this.instance=null;const m=new kf([...i,{provide:Xt,useValue:this},{provide:ld,useValue:this.componentFactoryResolver}],o||hu(),d,new Set(["environment"]));this.injector=m,m.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(i){this.injector.onDestroy(i)}}function re(n,i,o=null){return new pe(n,i,o).injector}let tt=(()=>{class n{constructor(o){this._injector=o,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(o){if(!o.standalone)return null;if(!this.cachedInjectors.has(o.id)){const d=hm(0,o.type),m=d.length>0?re([d],this._injector,`Standalone[${o.type.name}]`):null;this.cachedInjectors.set(o.id,m)}return this.cachedInjectors.get(o.id)}ngOnDestroy(){try{for(const o of this.cachedInjectors.values())null!==o&&o.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=Mn({token:n,providedIn:"environment",factory:()=>new n(xi(wc))}),n})();function Ot(n){n.getStandaloneInjector=i=>i.get(tt).getOrCreateStandaloneInjector(n)}function Cn(n,i,o){const d=tr()+n,m=et();return m[d]===ni?Nn(m,d,o?i.call(o):i()):function Tn(n,i){return n[i]}(m,d)}function rr(n,i,o,d){return py(et(),tr(),n,i,o,d)}function Fs(n,i,o,d,m){return function ce(n,i,o,d,m,y,D){const I=i+o;return $n(n,I,m,y)?Nn(n,I+2,D?d.call(D,m,y):d(m,y)):Mp(n,I+2)}(et(),tr(),n,i,o,d,m)}function ho(n,i,o,d,m,y){return function Ue(n,i,o,d,m,y,D,I){const F=i+o;return function di(n,i,o,d,m){const y=$n(n,i,o,d);return Dn(n,i+2,m)||y}(n,F,m,y,D)?Nn(n,F+3,I?d.call(I,m,y,D):d(m,y,D)):Mp(n,F+3)}(et(),tr(),n,i,o,d,m,y)}function Mp(n,i){const o=n[i];return o===ni?void 0:o}function py(n,i,o,d,m,y){const D=i+o;return Dn(n,D,m)?Nn(n,D+1,y?d.call(y,m):d(m)):Mp(n,D+1)}function pt(n,i){const o=ei();let d;const m=n+Oi;o.firstCreatePass?(d=function Bn(n,i){if(i)for(let o=i.length-1;o>=0;o--){const d=i[o];if(n===d.name)return d}}(i,o.pipeRegistry),o.data[m]=d,d.onDestroy&&(o.destroyHooks??(o.destroyHooks=[])).push(m,d.onDestroy)):d=o.data[m];const y=d.factory||(d.factory=$i(d.type)),D=Vt(Pc);try{const I=fc(!1),F=y();return fc(I),function Iu(n,i,o,d){o>=n.data.length&&(n.data[o]=null,n.blueprint[o]=null),i[o]=d}(o,et(),m,F),F}finally{Vt(D)}}function Mi(n,i,o){const d=n+Oi,m=et(),y=Hs(m,d);return function Ur(n,i){return n[Yt].data[i].pure}(m,d)?py(m,tr(),i,y.transform,o,y):y.transform(o)}function Pl(n){return i=>{setTimeout(n,void 0,i)}}const Io=class Sa extends a.x{constructor(i=!1){super(),this.__isAsync=i}emit(i){super.next(i)}subscribe(i,o,d){let m=i,y=o||(()=>null),D=d;if(i&&"object"==typeof i){const F=i;m=F.next?.bind(F),y=F.error?.bind(F),D=F.complete?.bind(F)}this.__isAsync&&(y=Pl(y),m&&(m=Pl(m)),D&&(D=Pl(D)));const I=super.subscribe({next:m,error:y,complete:D});return i instanceof K.w0&&i.add(I),I}};function Cs(){return this._results[Symbol.iterator]()}class Fi{get changes(){return this._changes||(this._changes=new Io)}constructor(i=!1){this._emitDistinctChangesOnly=i,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const o=Fi.prototype;o[Symbol.iterator]||(o[Symbol.iterator]=Cs)}get(i){return this._results[i]}map(i){return this._results.map(i)}filter(i){return this._results.filter(i)}find(i){return this._results.find(i)}reduce(i,o){return this._results.reduce(i,o)}forEach(i){this._results.forEach(i)}some(i){return this._results.some(i)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(i,o){const d=this;d.dirty=!1;const m=function Js(n){return n.flat(Number.POSITIVE_INFINITY)}(i);(this._changesDetected=!function Ta(n,i,o){if(n.length!==i.length)return!1;for(let d=0;d<n.length;d++){let m=n[d],y=i[d];if(o&&(m=o(m),y=o(y)),y!==m)return!1}return!0}(d._results,m,o))&&(d._results=m,d.length=m.length,d.last=m[this.length-1],d.first=m[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Pd=(()=>{class n{}return n.__NG_ELEMENT_ID__=my,n})();const to=Pd,Od=class extends to{constructor(i,o,d){super(),this._declarationLView=i,this._declarationTContainer=o,this.elementRef=d}createEmbeddedView(i,o){const d=this._declarationTContainer.tView,m=fd(this._declarationLView,d,i,16,null,d.declTNode,null,null,null,null,o||null);m[Nl]=this._declarationLView[this._declarationTContainer.index];const D=this._declarationLView[cs];return null!==D&&(m[cs]=D.createEmbeddedView(d)),Dl(d,m,i),new wu(m)}};function my(){return Gu(pr(),et())}function Gu(n,i){return 4&n.type?new Od(i,n,pu(n,i)):null}let rf=(()=>{class n{}return n.__NG_ELEMENT_ID__=$o,n})();function $o(){return gy(pr(),et())}const Nd=rf,og=class extends Nd{constructor(i,o,d){super(),this._lContainer=i,this._hostTNode=o,this._hostLView=d}get element(){return pu(this._hostTNode,this._hostLView)}get injector(){return new ji(this._hostTNode,this._hostLView)}get parentInjector(){const i=fs(this._hostTNode,this._hostLView);if(Jr(i)){const o=sa(i,this._hostLView),d=lo(i);return new ji(o[Yt].data[d+8],o)}return new ji(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(i){const o=da(this._lContainer);return null!==o&&o[i]||null}get length(){return this._lContainer.length-Wr}createEmbeddedView(i,o,d){let m,y;"number"==typeof d?m=d:null!=d&&(m=d.index,y=d.injector);const D=i.createEmbeddedView(o||{},y);return this.insert(D,m),D}createComponent(i,o,d,m,y){const D=i&&!function za(n){return"function"==typeof n}(i);let I;if(D)I=o;else{const oe=o||{};I=oe.index,d=oe.injector,m=oe.projectableNodes,y=oe.environmentInjector||oe.ngModuleRef}const F=D?i:new Rl(gi(i)),z=d||this.parentInjector;if(!y&&null==F.ngModule){const ye=(D?z:this.parentInjector).get(wc,null);ye&&(y=ye)}const ee=F.create(z,m,void 0,y);return this.insert(ee.hostView,I),ee}insert(i,o){const d=i._lView,m=d[Yt];if(function hs(n){return Cr(n[Pi])}(d)){const ee=this.indexOf(i);if(-1!==ee)this.detach(ee);else{const oe=d[Pi],ye=new og(oe,oe[er],oe[Pi]);ye.detach(ye.indexOf(i))}}const y=this._adjustIndex(o),D=this._lContainer;!function Vg(n,i,o,d){const m=Wr+d,y=o.length;d>0&&(o[m-1][ns]=i),d<y-Wr?(i[ns]=o[m],w(o,Wr+d,i)):(o.push(i),i[ns]=null),i[Pi]=o;const D=i[Nl];null!==D&&o!==D&&function Ug(n,i){const o=n[Us];i[Sr]!==i[Pi][Pi][Sr]&&(n[il]=!0),null===o?n[Us]=[i]:o.push(i)}(D,i);const I=i[cs];null!==I&&I.insertView(n),i[An]|=64}(m,d,D,y);const I=Xp(y,D),F=d[kn],z=Kd(F,D[Ll]);return null!==z&&function jg(n,i,o,d,m,y){d[ks]=m,d[er]=i,Qd(n,d,o,1,m,y)}(m,D[er],F,d,z,I),i.attachToViewContainerRef(),w(xp(D),y,i),i}move(i,o){return this.insert(i,o)}indexOf(i){const o=da(this._lContainer);return null!==o?o.indexOf(i):-1}remove(i){const o=this._adjustIndex(i,-1),d=Tf(this._lContainer,o);d&&(R(xp(this._lContainer),o),Hp(d[Yt],d))}detach(i){const o=this._adjustIndex(i,-1),d=Tf(this._lContainer,o);return d&&null!=R(xp(this._lContainer),o)?new wu(d):null}_adjustIndex(i,o=0){return i??this.length+o}};function da(n){return n[Gr]}function xp(n){return n[Gr]||(n[Gr]=[])}function gy(n,i){let o;const d=i[n.index];if(Cr(d))o=d;else{let m;if(8&n.type)m=Vi(d);else{const y=i[kn];m=y.createComment("");const D=Ms(n,i);bc(y,Kd(y,D),m,function Wg(n,i){return n.nextSibling(i)}(y,D),!1)}i[n.index]=o=md(d,i,m,n),_d(i,o)}return new og(o,n,i)}class ag{constructor(i){this.queryList=i,this.matches=null}clone(){return new ag(this.queryList)}setDirty(){this.queryList.setDirty()}}class b0{constructor(i=[]){this.queries=i}createEmbeddedView(i){const o=i.queries;if(null!==o){const d=null!==i.contentQueries?i.contentQueries[0]:o.length,m=[];for(let y=0;y<d;y++){const D=o.getByIndex(y);m.push(this.queries[D.indexInDeclarationView].clone())}return new b0(m)}return null}insertView(i){this.dirtyQueriesWithMatches(i)}detachView(i){this.dirtyQueriesWithMatches(i)}dirtyQueriesWithMatches(i){for(let o=0;o<this.queries.length;o++)null!==yb(i,o).matches&&this.queries[o].setDirty()}}class db{constructor(i,o,d=null){this.predicate=i,this.flags=o,this.read=d}}class T0{constructor(i=[]){this.queries=i}elementStart(i,o){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(i,o)}elementEnd(i){for(let o=0;o<this.queries.length;o++)this.queries[o].elementEnd(i)}embeddedTView(i){let o=null;for(let d=0;d<this.length;d++){const m=null!==o?o.length:0,y=this.getByIndex(d).embeddedTView(i,m);y&&(y.indexInDeclarationView=d,null!==o?o.push(y):o=[y])}return null!==o?new T0(o):null}template(i,o){for(let d=0;d<this.queries.length;d++)this.queries[d].template(i,o)}getByIndex(i){return this.queries[i]}get length(){return this.queries.length}track(i){this.queries.push(i)}}class M0{constructor(i,o=-1){this.metadata=i,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=o}elementStart(i,o){this.isApplyingToNode(o)&&this.matchTNode(i,o)}elementEnd(i){this._declarationNodeIndex===i.index&&(this._appliesToNextNode=!1)}template(i,o){this.elementStart(i,o)}embeddedTView(i,o){return this.isApplyingToNode(i)?(this.crossesNgTemplate=!0,this.addMatch(-i.index,o),new M0(this.metadata)):null}isApplyingToNode(i){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const o=this._declarationNodeIndex;let d=i.parent;for(;null!==d&&8&d.type&&d.index!==o;)d=d.parent;return o===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(i,o){const d=this.metadata.predicate;if(Array.isArray(d))for(let m=0;m<d.length;m++){const y=d[m];this.matchTNodeWithReadOption(i,o,MT(o,y)),this.matchTNodeWithReadOption(i,o,_l(o,i,y,!1,!1))}else d===Pd?4&o.type&&this.matchTNodeWithReadOption(i,o,-1):this.matchTNodeWithReadOption(i,o,_l(o,i,d,!1,!1))}matchTNodeWithReadOption(i,o,d){if(null!==d){const m=this.metadata.read;if(null!==m)if(m===cd||m===rf||m===Pd&&4&o.type)this.addMatch(o.index,-2);else{const y=_l(o,i,m,!1,!1);null!==y&&this.addMatch(o.index,y)}else this.addMatch(o.index,d)}}addMatch(i,o){null===this.matches?this.matches=[i,o]:this.matches.push(i,o)}}function MT(n,i){const o=n.localNames;if(null!==o)for(let d=0;d<o.length;d+=2)if(o[d]===i)return o[d+1];return null}function DT(n,i,o,d){return-1===o?function xT(n,i){return 11&n.type?pu(n,i):4&n.type?Gu(n,i):null}(i,n):-2===o?function wT(n,i,o){return o===cd?pu(i,n):o===Pd?Gu(i,n):o===rf?gy(i,n):void 0}(n,i,d):br(n,n[Yt],o,i)}function hb(n,i,o,d){const m=i[cs].queries[d];if(null===m.matches){const y=n.data,D=o.matches,I=[];for(let F=0;F<D.length;F+=2){const z=D[F];I.push(z<0?null:DT(i,y[z],D[F+1],o.metadata.read))}m.matches=I}return m.matches}function x0(n,i,o,d){const m=n.queries.getByIndex(o),y=m.matches;if(null!==y){const D=hb(n,i,m,o);for(let I=0;I<y.length;I+=2){const F=y[I];if(F>0)d.push(D[I/2]);else{const z=y[I+1],ee=i[-F];for(let oe=Wr;oe<ee.length;oe++){const ye=ee[oe];ye[Nl]===ye[Pi]&&x0(ye[Yt],ye,z,d)}if(null!==ee[Us]){const oe=ee[Us];for(let ye=0;ye<oe.length;ye++){const Ae=oe[ye];x0(Ae[Yt],Ae,z,d)}}}}}return d}function fb(n){const i=et(),o=ei(),d=ml();so(d+1);const m=yb(o,d);if(n.dirty&&function dl(n){return 4==(4&n[An])}(i)===(2==(2&m.metadata.flags))){if(null===m.matches)n.reset([]);else{const y=m.crossesNgTemplate?x0(o,i,d,[]):hb(o,i,m,d);n.reset(y,h_),n.notifyOnChanges()}return!0}return!1}function pb(n,i,o){const d=ei();d.firstCreatePass&&(vb(d,new db(n,i,o),-1),2==(2&i)&&(d.staticViewQueries=!0)),_b(d,et(),i)}function mb(n,i,o,d){const m=ei();if(m.firstCreatePass){const y=pr();vb(m,new db(i,o,d),y.index),function ST(n,i){const o=n.contentQueries||(n.contentQueries=[]);i!==(o.length?o[o.length-1]:-1)&&o.push(n.queries.length-1,i)}(m,n),2==(2&o)&&(m.staticContentQueries=!0)}_b(m,et(),o)}function gb(){return function RT(n,i){return n[cs].queries[i].queryList}(et(),ml())}function _b(n,i,o){const d=new Fi(4==(4&o));Co(n,i,d,d.destroy),null===i[cs]&&(i[cs]=new b0),i[cs].queries.push(new ag(d))}function vb(n,i,o){null===n.queries&&(n.queries=new T0),n.queries.track(new M0(i,o))}function yb(n,i){return n.queries.getByIndex(i)}function bb(n,i){return Gu(n,i)}function D0(n){return!!jr(n)}function vy(...n){}const jb=new mi("Application Initializer");let yy=(()=>{class n{constructor(o){this.appInits=o,this.resolve=vy,this.reject=vy,this.initialized=!1,this.done=!1,this.donePromise=new Promise((d,m)=>{this.resolve=d,this.reject=m})}runInitializers(){if(this.initialized)return;const o=[],d=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let m=0;m<this.appInits.length;m++){const y=this.appInits[m]();if(wd(y))o.push(y);else if(kc(y)){const D=new Promise((I,F)=>{y.subscribe({complete:I,error:F})});o.push(D)}}Promise.all(o).then(()=>{d()}).catch(m=>{this.reject(m)}),0===o.length&&d(),this.initialized=!0}}return n.\u0275fac=function(o){return new(o||n)(xi(jb,8))},n.\u0275prov=Mn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const kb=new mi("AppId",{providedIn:"root",factory:function Gb(){return`${E0()}${E0()}${E0()}`}});function E0(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Vb=new mi("Platform Initializer"),YT=new mi("Platform ID",{providedIn:"platform",factory:()=>"unknown"});let JT=(()=>{class n{log(o){console.log(o)}warn(o){console.warn(o)}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=Mn({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const by=new mi("LocaleId",{providedIn:"root",factory:()=>Hr(by,bn.Optional|bn.SkipSelf)||function ZT(){return typeof $localize<"u"&&$localize.locale||yp}()}),KT=new mi("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class qT{constructor(i,o){this.ngModuleFactory=i,this.componentFactories=o}}let XT=(()=>{class n{compileModuleSync(o){return new nr(o)}compileModuleAsync(o){return Promise.resolve(this.compileModuleSync(o))}compileModuleAndAllComponentsSync(o){const d=this.compileModuleSync(o),y=Ja(jr(o).declarations).reduce((D,I)=>{const F=gi(I);return F&&D.push(new Rl(F)),D},[]);return new qT(d,y)}compileModuleAndAllComponentsAsync(o){return Promise.resolve(this.compileModuleAndAllComponentsSync(o))}clearCache(){}clearCacheFor(o){}getModuleId(o){}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=Mn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const tM=(()=>Promise.resolve(0))();function A0(n){typeof Zone>"u"?tM.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class sc{constructor({enableLongStackTrace:i=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Io(!1),this.onMicrotaskEmpty=new Io(!1),this.onStable=new Io(!1),this.onError=new Io(!1),typeof Zone>"u")throw new Ie(908,!1);Zone.assertZonePatched();const m=this;m._nesting=0,m._outer=m._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(m._inner=m._inner.fork(new Zone.TaskTrackingZoneSpec)),i&&Zone.longStackTraceZoneSpec&&(m._inner=m._inner.fork(Zone.longStackTraceZoneSpec)),m.shouldCoalesceEventChangeDetection=!d&&o,m.shouldCoalesceRunChangeDetection=d,m.lastRequestAnimationFrameId=-1,m.nativeRequestAnimationFrame=function nM(){let n=ki.requestAnimationFrame,i=ki.cancelAnimationFrame;if(typeof Zone<"u"&&n&&i){const o=n[Zone.__symbol__("OriginalDelegate")];o&&(n=o);const d=i[Zone.__symbol__("OriginalDelegate")];d&&(i=d)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:i}}().nativeRequestAnimationFrame,function sM(n){const i=()=>{!function rM(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(ki,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,P0(n),n.isCheckStableRunning=!0,I0(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),P0(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(o,d,m,y,D,I)=>{try{return zb(n),o.invokeTask(m,y,D,I)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===y.type||n.shouldCoalesceRunChangeDetection)&&i(),Wb(n)}},onInvoke:(o,d,m,y,D,I,F)=>{try{return zb(n),o.invoke(m,y,D,I,F)}finally{n.shouldCoalesceRunChangeDetection&&i(),Wb(n)}},onHasTask:(o,d,m,y)=>{o.hasTask(m,y),d===m&&("microTask"==y.change?(n._hasPendingMicrotasks=y.microTask,P0(n),I0(n)):"macroTask"==y.change&&(n.hasPendingMacrotasks=y.macroTask))},onHandleError:(o,d,m,y)=>(o.handleError(m,y),n.runOutsideAngular(()=>n.onError.emit(y)),!1)})}(m)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!sc.isInAngularZone())throw new Ie(909,!1)}static assertNotInAngularZone(){if(sc.isInAngularZone())throw new Ie(909,!1)}run(i,o,d){return this._inner.run(i,o,d)}runTask(i,o,d,m){const y=this._inner,D=y.scheduleEventTask("NgZoneEvent: "+m,i,iM,vy,vy);try{return y.runTask(D,o,d)}finally{y.cancelTask(D)}}runGuarded(i,o,d){return this._inner.runGuarded(i,o,d)}runOutsideAngular(i){return this._outer.run(i)}}const iM={};function I0(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function P0(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function zb(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function Wb(n){n._nesting--,I0(n)}class oM{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Io,this.onMicrotaskEmpty=new Io,this.onStable=new Io,this.onError=new Io}run(i,o,d){return i.apply(o,d)}runGuarded(i,o,d){return i.apply(o,d)}runOutsideAngular(i){return i()}runTask(i,o,d,m){return i.apply(o,d)}}const $b=new mi(""),Yb=new mi("");let O0,aM=(()=>{class n{constructor(o,d,m){this._ngZone=o,this.registry=d,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,O0||(function lM(n){O0=n}(m),m.addToWindow(d)),this._watchAngularEvents(),o.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{sc.assertNotInAngularZone(),A0(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())A0(()=>{for(;0!==this._callbacks.length;){let o=this._callbacks.pop();clearTimeout(o.timeoutId),o.doneCb(this._didWork)}this._didWork=!1});else{let o=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(o)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(o=>({source:o.source,creationLocation:o.creationLocation,data:o.data})):[]}addCallback(o,d,m){let y=-1;d&&d>0&&(y=setTimeout(()=>{this._callbacks=this._callbacks.filter(D=>D.timeoutId!==y),o(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:o,timeoutId:y,updateCb:m})}whenStable(o,d,m){if(m&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(o,d,m),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(o){this.registry.registerApplication(o,this)}unregisterApplication(o){this.registry.unregisterApplication(o)}findProviders(o,d,m){return[]}}return n.\u0275fac=function(o){return new(o||n)(xi(sc),xi(Jb),xi(Yb))},n.\u0275prov=Mn({token:n,factory:n.\u0275fac}),n})(),Jb=(()=>{class n{constructor(){this._applications=new Map}registerApplication(o,d){this._applications.set(o,d)}unregisterApplication(o){this._applications.delete(o)}unregisterAllApplications(){this._applications.clear()}getTestability(o){return this._applications.get(o)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(o,d=!0){return O0?.findTestabilityInTree(this,o,d)??null}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=Mn({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const Fd=!1;let sf=null;const Zb=new mi("AllowMultipleToken"),N0=new mi("PlatformDestroyListeners"),Kb=new mi("appBootstrapListener");class dM{constructor(i,o){this.name=i,this.token=o}}function Xb(n,i,o=[]){const d=`Platform: ${i}`,m=new mi(d);return(y=[])=>{let D=F0();if(!D||D.injector.get(Zb,!1)){const I=[...o,...y,{provide:m,useValue:!0}];n?n(I):function hM(n){if(sf&&!sf.get(Zb,!1))throw new Ie(400,!1);sf=n;const i=n.get(eT);(function qb(n){const i=n.get(Vb,null);i&&i.forEach(o=>o())})(n)}(function Qb(n=[],i){return vu.create({name:i,providers:[{provide:yi,useValue:"platform"},{provide:N0,useValue:new Set([()=>sf=null])},...n]})}(I,d))}return function pM(n){const i=F0();if(!i)throw new Ie(401,!1);return i}()}}function F0(){return sf?.get(eT)??null}let eT=(()=>{class n{constructor(o){this._injector=o,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(o,d){const m=function nT(n,i){let o;return o="noop"===n?new oM:("zone.js"===n?void 0:n)||new sc(i),o}(d?.ngZone,function tT(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(d)),y=[{provide:sc,useValue:m}];return m.run(()=>{const D=vu.create({providers:y,parent:this.injector,name:o.moduleType.name}),I=o.create(D),F=I.injector.get(gh,null);if(!F)throw new Ie(402,!1);return m.runOutsideAngular(()=>{const z=m.onError.subscribe({next:ee=>{F.handleError(ee)}});I.onDestroy(()=>{My(this._modules,I),z.unsubscribe()})}),function iT(n,i,o){try{const d=o();return wd(d)?d.catch(m=>{throw i.runOutsideAngular(()=>n.handleError(m)),m}):d}catch(d){throw i.runOutsideAngular(()=>n.handleError(d)),d}}(F,m,()=>{const z=I.injector.get(yy);return z.runInitializers(),z.donePromise.then(()=>(l0(I.injector.get(by,yp)||yp),this._moduleDoBootstrap(I),I))})})}bootstrapModule(o,d=[]){const m=rT({},d);return function cM(n,i,o){const d=new nr(o);return Promise.resolve(d)}(0,0,o).then(y=>this.bootstrapModuleFactory(y,m))}_moduleDoBootstrap(o){const d=o.injector.get(Ty);if(o._bootstrapComponents.length>0)o._bootstrapComponents.forEach(m=>d.bootstrap(m));else{if(!o.instance.ngDoBootstrap)throw new Ie(-403,!1);o.instance.ngDoBootstrap(d)}this._modules.push(o)}onDestroy(o){this._destroyListeners.push(o)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ie(404,!1);this._modules.slice().forEach(d=>d.destroy()),this._destroyListeners.forEach(d=>d());const o=this._injector.get(N0,null);o&&(o.forEach(d=>d()),o.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(o){return new(o||n)(xi(vu))},n.\u0275prov=Mn({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function rT(n,i){return Array.isArray(i)?i.reduce(rT,n):{...n,...i}}let Ty=(()=>{class n{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(o,d,m){this._zone=o,this._injector=d,this._exceptionHandler=m,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const y=new ge.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),D=new ge.y(I=>{let F;this._zone.runOutsideAngular(()=>{F=this._zone.onStable.subscribe(()=>{sc.assertNotInAngularZone(),A0(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const z=this._zone.onUnstable.subscribe(()=>{sc.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{F.unsubscribe(),z.unsubscribe()}});this.isStable=(0,Se.T)(y,D.pipe(function _t(n={}){const{connector:i=(()=>new a.x),resetOnError:o=!0,resetOnComplete:d=!0,resetOnRefCountZero:m=!0}=n;return y=>{let D,I,F,z=0,ee=!1,oe=!1;const ye=()=>{I?.unsubscribe(),I=void 0},Ae=()=>{ye(),D=F=void 0,ee=oe=!1},st=()=>{const Pt=D;Ae(),Pt?.unsubscribe()};return(0,Oe.e)((Pt,Qt)=>{z++,!oe&&!ee&&ye();const gn=F=F??i();Qt.add(()=>{z--,0===z&&!oe&&!ee&&(I=Je(st,m))}),gn.subscribe(Qt),!D&&z>0&&(D=new Re.Hp({next:In=>gn.next(In),error:In=>{oe=!0,ye(),I=Je(Ae,o,In),gn.error(In)},complete:()=>{ee=!0,ye(),I=Je(Ae,d),gn.complete()}}),(0,xe.Xf)(Pt).subscribe(D))})(y)}}()))}bootstrap(o,d){const m=o instanceof _m;if(!this._injector.get(yy).done){!m&&zr(o);throw new Ie(405,Fd)}let D;D=m?o:this._injector.get(ld).resolveComponentFactory(o),this.componentTypes.push(D.componentType);const I=function uM(n){return n.isBoundToModule}(D)?void 0:this._injector.get(Xt),z=D.create(vu.NULL,[],d||D.selector,I),ee=z.location.nativeElement,oe=z.injector.get($b,null);return oe?.registerApplication(ee),z.onDestroy(()=>{this.detachView(z.hostView),My(this.components,z),oe?.unregisterApplication(ee)}),this._loadComponent(z),z}tick(){if(this._runningTick)throw new Ie(101,!1);try{this._runningTick=!0;for(let o of this._views)o.detectChanges()}catch(o){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(o))}finally{this._runningTick=!1}}attachView(o){const d=o;this._views.push(d),d.attachToAppRef(this)}detachView(o){const d=o;My(this._views,d),d.detachFromAppRef()}_loadComponent(o){this.attachView(o.hostView),this.tick(),this.components.push(o);const d=this._injector.get(Kb,[]);d.push(...this._bootstrapListeners),d.forEach(m=>m(o))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(o=>o()),this._views.slice().forEach(o=>o.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(o){return this._destroyListeners.push(o),()=>My(this._destroyListeners,o)}destroy(){if(this._destroyed)throw new Ie(406,!1);const o=this._injector;o.destroy&&!o.destroyed&&o.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(o){return new(o||n)(xi(sc),xi(wc),xi(gh))},n.\u0275prov=Mn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function My(n,i){const o=n.indexOf(i);o>-1&&n.splice(o,1)}let gM=(()=>{class n{}return n.__NG_ELEMENT_ID__=_M,n})();function _M(n){return function vM(n,i,o){if(Fa(n)&&!o){const d=Yr(n.index,i);return new wu(d,d)}return 47&n.type?new wu(i[Sr],i):null}(pr(),et(),16==(16&n))}class cT{constructor(){}supports(i){return De(i)}create(i){return new DM(i)}}const xM=(n,i)=>i;class DM{constructor(i){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=i||xM}forEachItem(i){let o;for(o=this._itHead;null!==o;o=o._next)i(o)}forEachOperation(i){let o=this._itHead,d=this._removalsHead,m=0,y=null;for(;o||d;){const D=!d||o&&o.currentIndex<dT(d,m,y)?o:d,I=dT(D,m,y),F=D.currentIndex;if(D===d)m--,d=d._nextRemoved;else if(o=o._next,null==D.previousIndex)m++;else{y||(y=[]);const z=I-m,ee=F-m;if(z!=ee){for(let ye=0;ye<z;ye++){const Ae=ye<y.length?y[ye]:y[ye]=0,st=Ae+ye;ee<=st&&st<z&&(y[ye]=Ae+1)}y[D.previousIndex]=ee-z}}I!==F&&i(D,I,F)}}forEachPreviousItem(i){let o;for(o=this._previousItHead;null!==o;o=o._nextPrevious)i(o)}forEachAddedItem(i){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)i(o)}forEachMovedItem(i){let o;for(o=this._movesHead;null!==o;o=o._nextMoved)i(o)}forEachRemovedItem(i){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)i(o)}forEachIdentityChange(i){let o;for(o=this._identityChangesHead;null!==o;o=o._nextIdentityChange)i(o)}diff(i){if(null==i&&(i=[]),!De(i))throw new Ie(900,!1);return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let m,y,D,o=this._itHead,d=!1;if(Array.isArray(i)){this.length=i.length;for(let I=0;I<this.length;I++)y=i[I],D=this._trackByFn(I,y),null!==o&&Object.is(o.trackById,D)?(d&&(o=this._verifyReinsertion(o,y,D,I)),Object.is(o.item,y)||this._addIdentityChange(o,y)):(o=this._mismatch(o,y,D,I),d=!0),o=o._next}else m=0,function Dt(n,i){if(Array.isArray(n))for(let o=0;o<n.length;o++)i(n[o]);else{const o=n[Symbol.iterator]();let d;for(;!(d=o.next()).done;)i(d.value)}}(i,I=>{D=this._trackByFn(m,I),null!==o&&Object.is(o.trackById,D)?(d&&(o=this._verifyReinsertion(o,I,D,m)),Object.is(o.item,I)||this._addIdentityChange(o,I)):(o=this._mismatch(o,I,D,m),d=!0),o=o._next,m++}),this.length=m;return this._truncate(o),this.collection=i,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let i;for(i=this._previousItHead=this._itHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._additionsHead;null!==i;i=i._nextAdded)i.previousIndex=i.currentIndex;for(this._additionsHead=this._additionsTail=null,i=this._movesHead;null!==i;i=i._nextMoved)i.previousIndex=i.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(i,o,d,m){let y;return null===i?y=this._itTail:(y=i._prev,this._remove(i)),null!==(i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(i.item,o)||this._addIdentityChange(i,o),this._reinsertAfter(i,y,m)):null!==(i=null===this._linkedRecords?null:this._linkedRecords.get(d,m))?(Object.is(i.item,o)||this._addIdentityChange(i,o),this._moveAfter(i,y,m)):i=this._addAfter(new wM(o,d),y,m),i}_verifyReinsertion(i,o,d,m){let y=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==y?i=this._reinsertAfter(y,i._prev,m):i.currentIndex!=m&&(i.currentIndex=m,this._addToMoves(i,m)),i}_truncate(i){for(;null!==i;){const o=i._next;this._addToRemovals(this._unlink(i)),i=o}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(i,o,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(i);const m=i._prevRemoved,y=i._nextRemoved;return null===m?this._removalsHead=y:m._nextRemoved=y,null===y?this._removalsTail=m:y._prevRemoved=m,this._insertAfter(i,o,d),this._addToMoves(i,d),i}_moveAfter(i,o,d){return this._unlink(i),this._insertAfter(i,o,d),this._addToMoves(i,d),i}_addAfter(i,o,d){return this._insertAfter(i,o,d),this._additionsTail=null===this._additionsTail?this._additionsHead=i:this._additionsTail._nextAdded=i,i}_insertAfter(i,o,d){const m=null===o?this._itHead:o._next;return i._next=m,i._prev=o,null===m?this._itTail=i:m._prev=i,null===o?this._itHead=i:o._next=i,null===this._linkedRecords&&(this._linkedRecords=new uT),this._linkedRecords.put(i),i.currentIndex=d,i}_remove(i){return this._addToRemovals(this._unlink(i))}_unlink(i){null!==this._linkedRecords&&this._linkedRecords.remove(i);const o=i._prev,d=i._next;return null===o?this._itHead=d:o._next=d,null===d?this._itTail=o:d._prev=o,i}_addToMoves(i,o){return i.previousIndex===o||(this._movesTail=null===this._movesTail?this._movesHead=i:this._movesTail._nextMoved=i),i}_addToRemovals(i){return null===this._unlinkedRecords&&(this._unlinkedRecords=new uT),this._unlinkedRecords.put(i),i.currentIndex=null,i._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=i,i._prevRemoved=null):(i._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=i),i}_addIdentityChange(i,o){return i.item=o,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=i:this._identityChangesTail._nextIdentityChange=i,i}}class wM{constructor(i,o){this.item=i,this.trackById=o,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class RM{constructor(){this._head=null,this._tail=null}add(i){null===this._head?(this._head=this._tail=i,i._nextDup=null,i._prevDup=null):(this._tail._nextDup=i,i._prevDup=this._tail,i._nextDup=null,this._tail=i)}get(i,o){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===o||o<=d.currentIndex)&&Object.is(d.trackById,i))return d;return null}remove(i){const o=i._prevDup,d=i._nextDup;return null===o?this._head=d:o._nextDup=d,null===d?this._tail=o:d._prevDup=o,null===this._head}}class uT{constructor(){this.map=new Map}put(i){const o=i.trackById;let d=this.map.get(o);d||(d=new RM,this.map.set(o,d)),d.add(i)}get(i,o){const m=this.map.get(i);return m?m.get(i,o):null}remove(i){const o=i.trackById;return this.map.get(o).remove(i)&&this.map.delete(o),i}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function dT(n,i,o){const d=n.previousIndex;if(null===d)return d;let m=0;return o&&d<o.length&&(m=o[d]),d+i+m}class hT{constructor(){}supports(i){return i instanceof Map||St(i)}create(){return new SM}}class SM{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(i){let o;for(o=this._mapHead;null!==o;o=o._next)i(o)}forEachPreviousItem(i){let o;for(o=this._previousMapHead;null!==o;o=o._nextPrevious)i(o)}forEachChangedItem(i){let o;for(o=this._changesHead;null!==o;o=o._nextChanged)i(o)}forEachAddedItem(i){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)i(o)}forEachRemovedItem(i){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)i(o)}diff(i){if(i){if(!(i instanceof Map||St(i)))throw new Ie(900,!1)}else i=new Map;return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let o=this._mapHead;if(this._appendAfter=null,this._forEach(i,(d,m)=>{if(o&&o.key===m)this._maybeAddToChanges(o,d),this._appendAfter=o,o=o._next;else{const y=this._getOrCreateRecordForKey(m,d);o=this._insertBeforeOrAppend(o,y)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(let d=o;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(i,o){if(i){const d=i._prev;return o._next=i,o._prev=d,i._prev=o,d&&(d._next=o),i===this._mapHead&&(this._mapHead=o),this._appendAfter=i,i}return this._appendAfter?(this._appendAfter._next=o,o._prev=this._appendAfter):this._mapHead=o,this._appendAfter=o,null}_getOrCreateRecordForKey(i,o){if(this._records.has(i)){const m=this._records.get(i);this._maybeAddToChanges(m,o);const y=m._prev,D=m._next;return y&&(y._next=D),D&&(D._prev=y),m._next=null,m._prev=null,m}const d=new CM(i);return this._records.set(i,d),d.currentValue=o,this._addToAdditions(d),d}_reset(){if(this.isDirty){let i;for(this._previousMapHead=this._mapHead,i=this._previousMapHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._changesHead;null!==i;i=i._nextChanged)i.previousValue=i.currentValue;for(i=this._additionsHead;null!=i;i=i._nextAdded)i.previousValue=i.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(i,o){Object.is(o,i.currentValue)||(i.previousValue=i.currentValue,i.currentValue=o,this._addToChanges(i))}_addToAdditions(i){null===this._additionsHead?this._additionsHead=this._additionsTail=i:(this._additionsTail._nextAdded=i,this._additionsTail=i)}_addToChanges(i){null===this._changesHead?this._changesHead=this._changesTail=i:(this._changesTail._nextChanged=i,this._changesTail=i)}_forEach(i,o){i instanceof Map?i.forEach(o):Object.keys(i).forEach(d=>o(i[d],d))}}class CM{constructor(i){this.key=i,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function fT(){return new G0([new cT])}let G0=(()=>{class n{constructor(o){this.factories=o}static create(o,d){if(null!=d){const m=d.factories.slice();o=o.concat(m)}return new n(o)}static extend(o){return{provide:n,useFactory:d=>n.create(o,d||fT()),deps:[[n,new Wa,new Ku]]}}find(o){const d=this.factories.find(m=>m.supports(o));if(null!=d)return d;throw new Ie(901,!1)}}return n.\u0275prov=Mn({token:n,providedIn:"root",factory:fT}),n})();function pT(){return new V0([new hT])}let V0=(()=>{class n{constructor(o){this.factories=o}static create(o,d){if(d){const m=d.factories.slice();o=o.concat(m)}return new n(o)}static extend(o){return{provide:n,useFactory:d=>n.create(o,d||pT()),deps:[[n,new Wa,new Ku]]}}find(o){const d=this.factories.find(m=>m.supports(o));if(d)return d;throw new Ie(901,!1)}}return n.\u0275prov=Mn({token:n,providedIn:"root",factory:pT}),n})();const IM=Xb(null,"core",[]);let PM=(()=>{class n{constructor(o){}}return n.\u0275fac=function(o){return new(o||n)(xi(Ty))},n.\u0275mod=go({type:n}),n.\u0275inj=Ci({}),n})();function OM(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}function FM(n,i){const o=gi(n),d=i.elementInjector||hu();return new Rl(o).create(d,i.projectableNodes,i.hostElement,i.environmentInjector)}},1481:(pn,Ze,te)=>{te.d(Ze,{Dx:()=>Wi,b2:()=>Li,q6:()=>Ea});var a=te(6895),K=te(1571);class ge extends a.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Se extends ge{static makeCurrent(){(0,a.HT)(new Se)}onAndCancel(ve,ae,Ce){return ve.addEventListener(ae,Ce,!1),()=>{ve.removeEventListener(ae,Ce,!1)}}dispatchEvent(ve,ae){ve.dispatchEvent(ae)}remove(ve){ve.parentNode&&ve.parentNode.removeChild(ve)}createElement(ve,ae){return(ae=ae||this.getDefaultDocument()).createElement(ve)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(ve){return ve.nodeType===Node.ELEMENT_NODE}isShadowRoot(ve){return ve instanceof DocumentFragment}getGlobalEventTarget(ve,ae){return"window"===ae?window:"document"===ae?ve:"body"===ae?ve.body:null}getBaseHref(ve){const ae=function Re(){return xe=xe||document.querySelector("base"),xe?xe.getAttribute("href"):null}();return null==ae?null:function _t(Pe){Oe=Oe||document.createElement("a"),Oe.setAttribute("href",Pe);const ve=Oe.pathname;return"/"===ve.charAt(0)?ve:`/${ve}`}(ae)}resetBaseElement(){xe=null}getUserAgent(){return window.navigator.userAgent}getCookie(ve){return(0,a.Mx)(document.cookie,ve)}}let Oe,xe=null;const Je=new K.OlP("TRANSITION_ID"),ke=[{provide:K.ip1,useFactory:function Fe(Pe,ve,ae){return()=>{ae.get(K.CZH).donePromise.then(()=>{const Ce=(0,a.q)(),Ve=ve.querySelectorAll(`style[ng-transition="${Pe}"]`);for(let en=0;en<Ve.length;en++)Ce.remove(Ve[en])})}},deps:[Je,a.K0,K.zs3],multi:!0}];let Lt=(()=>{class Pe{build(){return new XMLHttpRequest}}return Pe.\u0275fac=function(ae){return new(ae||Pe)},Pe.\u0275prov=K.Yz7({token:Pe,factory:Pe.\u0275fac}),Pe})();const ze=new K.OlP("EventManagerPlugins");let Mt=(()=>{class Pe{constructor(ae,Ce){this._zone=Ce,this._eventNameToPlugin=new Map,ae.forEach(Ve=>{Ve.manager=this}),this._plugins=ae.slice().reverse()}addEventListener(ae,Ce,Ve){return this._findPluginFor(Ce).addEventListener(ae,Ce,Ve)}addGlobalEventListener(ae,Ce,Ve){return this._findPluginFor(Ce).addGlobalEventListener(ae,Ce,Ve)}getZone(){return this._zone}_findPluginFor(ae){const Ce=this._eventNameToPlugin.get(ae);if(Ce)return Ce;const Ve=this._plugins;for(let en=0;en<Ve.length;en++){const Vn=Ve[en];if(Vn.supports(ae))return this._eventNameToPlugin.set(ae,Vn),Vn}throw new Error(`No event manager plugin found for event ${ae}`)}}return Pe.\u0275fac=function(ae){return new(ae||Pe)(K.LFG(ze),K.LFG(K.R0b))},Pe.\u0275prov=K.Yz7({token:Pe,factory:Pe.\u0275fac}),Pe})();class dt{constructor(ve){this._doc=ve}addGlobalEventListener(ve,ae,Ce){const Ve=(0,a.q)().getGlobalEventTarget(this._doc,ve);if(!Ve)throw new Error(`Unsupported event target ${Ve} for event ${ae}`);return this.addEventListener(Ve,ae,Ce)}}let jt=(()=>{class Pe{constructor(){this.usageCount=new Map}addStyles(ae){for(const Ce of ae)1===this.changeUsageCount(Ce,1)&&this.onStyleAdded(Ce)}removeStyles(ae){for(const Ce of ae)0===this.changeUsageCount(Ce,-1)&&this.onStyleRemoved(Ce)}onStyleRemoved(ae){}onStyleAdded(ae){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(ae,Ce){const Ve=this.usageCount;let en=Ve.get(ae)??0;return en+=Ce,en>0?Ve.set(ae,en):Ve.delete(ae),en}ngOnDestroy(){for(const ae of this.getAllStyles())this.onStyleRemoved(ae);this.usageCount.clear()}}return Pe.\u0275fac=function(ae){return new(ae||Pe)},Pe.\u0275prov=K.Yz7({token:Pe,factory:Pe.\u0275fac}),Pe})(),_n=(()=>{class Pe extends jt{constructor(ae){super(),this.doc=ae,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(ae){for(const Ce of this.hostNodes)this.addStyleToHost(Ce,ae)}onStyleRemoved(ae){const Ce=this.styleRef;Ce.get(ae)?.forEach(en=>en.remove()),Ce.delete(ae)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(ae){this.hostNodes.add(ae);for(const Ce of this.getAllStyles())this.addStyleToHost(ae,Ce)}removeHost(ae){this.hostNodes.delete(ae)}addStyleToHost(ae,Ce){const Ve=this.doc.createElement("style");Ve.textContent=Ce,ae.appendChild(Ve);const en=this.styleRef.get(Ce);en?en.push(Ve):this.styleRef.set(Ce,[Ve])}resetHostNodes(){const ae=this.hostNodes;ae.clear(),ae.add(this.doc.head)}}return Pe.\u0275fac=function(ae){return new(ae||Pe)(K.LFG(a.K0))},Pe.\u0275prov=K.Yz7({token:Pe,factory:Pe.\u0275fac}),Pe})();const ui={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ri=/%COMP%/g,Et=new K.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function kt(Pe,ve){return ve.flat(100).map(ae=>ae.replace(Ri,Pe))}function cn(Pe){return ve=>{if("__ngUnwrap__"===ve)return Pe;!1===Pe(ve)&&(ve.preventDefault(),ve.returnValue=!1)}}let on=(()=>{class Pe{constructor(ae,Ce,Ve,en){this.eventManager=ae,this.sharedStylesHost=Ce,this.appId=Ve,this.removeStylesOnCompDestory=en,this.rendererByCompId=new Map,this.defaultRenderer=new Ge(ae)}createRenderer(ae,Ce){if(!ae||!Ce)return this.defaultRenderer;const Ve=this.getOrCreateRenderer(ae,Ce);return Ve instanceof Rn?Ve.applyToHost(ae):Ve instanceof xt&&Ve.applyStyles(),Ve}getOrCreateRenderer(ae,Ce){const Ve=this.rendererByCompId;let en=Ve.get(Ce.id);if(!en){const Vn=this.eventManager,Gi=this.sharedStylesHost,or=this.removeStylesOnCompDestory;switch(Ce.encapsulation){case K.ifc.Emulated:en=new Rn(Vn,Gi,Ce,this.appId,or);break;case K.ifc.ShadowDom:return new At(Vn,Gi,ae,Ce);default:en=new xt(Vn,Gi,Ce,or)}en.onDestroy=()=>Ve.delete(Ce.id),Ve.set(Ce.id,en)}return en}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return Pe.\u0275fac=function(ae){return new(ae||Pe)(K.LFG(Mt),K.LFG(_n),K.LFG(K.AFp),K.LFG(Et))},Pe.\u0275prov=K.Yz7({token:Pe,factory:Pe.\u0275fac}),Pe})();class Ge{constructor(ve){this.eventManager=ve,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(ve,ae){return ae?document.createElementNS(ui[ae]||ae,ve):document.createElement(ve)}createComment(ve){return document.createComment(ve)}createText(ve){return document.createTextNode(ve)}appendChild(ve,ae){(Qe(ve)?ve.content:ve).appendChild(ae)}insertBefore(ve,ae,Ce){ve&&(Qe(ve)?ve.content:ve).insertBefore(ae,Ce)}removeChild(ve,ae){ve&&ve.removeChild(ae)}selectRootElement(ve,ae){let Ce="string"==typeof ve?document.querySelector(ve):ve;if(!Ce)throw new Error(`The selector "${ve}" did not match any elements`);return ae||(Ce.textContent=""),Ce}parentNode(ve){return ve.parentNode}nextSibling(ve){return ve.nextSibling}setAttribute(ve,ae,Ce,Ve){if(Ve){ae=Ve+":"+ae;const en=ui[Ve];en?ve.setAttributeNS(en,ae,Ce):ve.setAttribute(ae,Ce)}else ve.setAttribute(ae,Ce)}removeAttribute(ve,ae,Ce){if(Ce){const Ve=ui[Ce];Ve?ve.removeAttributeNS(Ve,ae):ve.removeAttribute(`${Ce}:${ae}`)}else ve.removeAttribute(ae)}addClass(ve,ae){ve.classList.add(ae)}removeClass(ve,ae){ve.classList.remove(ae)}setStyle(ve,ae,Ce,Ve){Ve&(K.JOm.DashCase|K.JOm.Important)?ve.style.setProperty(ae,Ce,Ve&K.JOm.Important?"important":""):ve.style[ae]=Ce}removeStyle(ve,ae,Ce){Ce&K.JOm.DashCase?ve.style.removeProperty(ae):ve.style[ae]=""}setProperty(ve,ae,Ce){ve[ae]=Ce}setValue(ve,ae){ve.nodeValue=ae}listen(ve,ae,Ce){return"string"==typeof ve?this.eventManager.addGlobalEventListener(ve,ae,cn(Ce)):this.eventManager.addEventListener(ve,ae,cn(Ce))}}function Qe(Pe){return"TEMPLATE"===Pe.tagName&&void 0!==Pe.content}class At extends Ge{constructor(ve,ae,Ce,Ve){super(ve),this.sharedStylesHost=ae,this.hostEl=Ce,this.shadowRoot=Ce.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const en=kt(Ve.id,Ve.styles);for(const Vn of en){const Gi=document.createElement("style");Gi.textContent=Vn,this.shadowRoot.appendChild(Gi)}}nodeOrShadowRoot(ve){return ve===this.hostEl?this.shadowRoot:ve}appendChild(ve,ae){return super.appendChild(this.nodeOrShadowRoot(ve),ae)}insertBefore(ve,ae,Ce){return super.insertBefore(this.nodeOrShadowRoot(ve),ae,Ce)}removeChild(ve,ae){return super.removeChild(this.nodeOrShadowRoot(ve),ae)}parentNode(ve){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(ve)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class xt extends Ge{constructor(ve,ae,Ce,Ve,en=Ce.id){super(ve),this.sharedStylesHost=ae,this.removeStylesOnCompDestory=Ve,this.rendererUsageCount=0,this.styles=kt(en,Ce.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class Rn extends xt{constructor(ve,ae,Ce,Ve,en){const Vn=Ve+"-"+Ce.id;super(ve,ae,Ce,en,Vn),this.contentAttr=function Rt(Pe){return"_ngcontent-%COMP%".replace(Ri,Pe)}(Vn),this.hostAttr=function Zt(Pe){return"_nghost-%COMP%".replace(Ri,Pe)}(Vn)}applyToHost(ve){this.applyStyles(),this.setAttribute(ve,this.hostAttr,"")}createElement(ve,ae){const Ce=super.createElement(ve,ae);return super.setAttribute(Ce,this.contentAttr,""),Ce}}let pi=(()=>{class Pe extends dt{constructor(ae){super(ae)}supports(ae){return!0}addEventListener(ae,Ce,Ve){return ae.addEventListener(Ce,Ve,!1),()=>this.removeEventListener(ae,Ce,Ve)}removeEventListener(ae,Ce,Ve){return ae.removeEventListener(Ce,Ve)}}return Pe.\u0275fac=function(ae){return new(ae||Pe)(K.LFG(a.K0))},Pe.\u0275prov=K.Yz7({token:Pe,factory:Pe.\u0275fac}),Pe})();const lr=["alt","control","meta","shift"],En={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},jn={alt:Pe=>Pe.altKey,control:Pe=>Pe.ctrlKey,meta:Pe=>Pe.metaKey,shift:Pe=>Pe.shiftKey};let tn=(()=>{class Pe extends dt{constructor(ae){super(ae)}supports(ae){return null!=Pe.parseEventName(ae)}addEventListener(ae,Ce,Ve){const en=Pe.parseEventName(Ce),Vn=Pe.eventCallback(en.fullKey,Ve,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,a.q)().onAndCancel(ae,en.domEventName,Vn))}static parseEventName(ae){const Ce=ae.toLowerCase().split("."),Ve=Ce.shift();if(0===Ce.length||"keydown"!==Ve&&"keyup"!==Ve)return null;const en=Pe._normalizeKey(Ce.pop());let Vn="",Gi=Ce.indexOf("code");if(Gi>-1&&(Ce.splice(Gi,1),Vn="code."),lr.forEach(ls=>{const vr=Ce.indexOf(ls);vr>-1&&(Ce.splice(vr,1),Vn+=ls+".")}),Vn+=en,0!=Ce.length||0===en.length)return null;const or={};return or.domEventName=Ve,or.fullKey=Vn,or}static matchEventFullKeyCode(ae,Ce){let Ve=En[ae.key]||ae.key,en="";return Ce.indexOf("code.")>-1&&(Ve=ae.code,en="code."),!(null==Ve||!Ve)&&(Ve=Ve.toLowerCase()," "===Ve?Ve="space":"."===Ve&&(Ve="dot"),lr.forEach(Vn=>{Vn!==Ve&&(0,jn[Vn])(ae)&&(en+=Vn+".")}),en+=Ve,en===Ce)}static eventCallback(ae,Ce,Ve){return en=>{Pe.matchEventFullKeyCode(en,ae)&&Ve.runGuarded(()=>Ce(en))}}static _normalizeKey(ae){return"esc"===ae?"escape":ae}}return Pe.\u0275fac=function(ae){return new(ae||Pe)(K.LFG(a.K0))},Pe.\u0275prov=K.Yz7({token:Pe,factory:Pe.\u0275fac}),Pe})();const Ea=(0,K.eFA)(K._c5,"browser",[{provide:K.Lbi,useValue:a.bD},{provide:K.g9A,useValue:function Ci(){Se.makeCurrent()},multi:!0},{provide:a.K0,useFactory:function ha(){return(0,K.RDi)(document),document},deps:[]}]),Dr=new K.OlP(""),fo=[{provide:K.rWj,useClass:class Ke{addToWindow(ve){K.dqk.getAngularTestability=(Ce,Ve=!0)=>{const en=ve.findTestabilityInTree(Ce,Ve);if(null==en)throw new Error("Could not find testability for element.");return en},K.dqk.getAllAngularTestabilities=()=>ve.getAllTestabilities(),K.dqk.getAllAngularRootElements=()=>ve.getAllRootElements(),K.dqk.frameworkStabilizers||(K.dqk.frameworkStabilizers=[]),K.dqk.frameworkStabilizers.push(Ce=>{const Ve=K.dqk.getAllAngularTestabilities();let en=Ve.length,Vn=!1;const Gi=function(or){Vn=Vn||or,en--,0==en&&Ce(Vn)};Ve.forEach(function(or){or.whenStable(Gi)})})}findTestabilityInTree(ve,ae,Ce){return null==ae?null:ve.getTestability(ae)??(Ce?(0,a.q)().isShadowRoot(ae)?this.findTestabilityInTree(ve,ae.host,!0):this.findTestabilityInTree(ve,ae.parentElement,!0):null)}},deps:[]},{provide:K.lri,useClass:K.dDg,deps:[K.R0b,K.eoX,K.rWj]},{provide:K.dDg,useClass:K.dDg,deps:[K.R0b,K.eoX,K.rWj]}],po=[{provide:K.zSh,useValue:"root"},{provide:K.qLn,useFactory:function Qi(){return new K.qLn},deps:[]},{provide:ze,useClass:pi,multi:!0,deps:[a.K0,K.R0b,K.Lbi]},{provide:ze,useClass:tn,multi:!0,deps:[a.K0]},{provide:on,useClass:on,deps:[Mt,_n,K.AFp,Et]},{provide:K.FYo,useExisting:on},{provide:jt,useExisting:_n},{provide:_n,useClass:_n,deps:[a.K0]},{provide:Mt,useClass:Mt,deps:[ze,K.R0b]},{provide:a.JF,useClass:Lt,deps:[]},[]];let Li=(()=>{class Pe{constructor(ae){}static withServerTransition(ae){return{ngModule:Pe,providers:[{provide:K.AFp,useValue:ae.appId},{provide:Je,useExisting:K.AFp},ke]}}}return Pe.\u0275fac=function(ae){return new(ae||Pe)(K.LFG(Dr,12))},Pe.\u0275mod=K.oAB({type:Pe}),Pe.\u0275inj=K.cJS({providers:[...po,...fo],imports:[a.ez,K.hGG]}),Pe})(),Wi=(()=>{class Pe{constructor(ae){this._doc=ae}getTitle(){return this._doc.title}setTitle(ae){this._doc.title=ae||""}}return Pe.\u0275fac=function(ae){return new(ae||Pe)(K.LFG(a.K0))},Pe.\u0275prov=K.Yz7({token:Pe,factory:function(ae){let Ce=null;return Ce=ae?new ae:function As(){return new Wi((0,K.LFG)(a.K0))}(),Ce},providedIn:"root"}),Pe})();typeof window<"u"&&window},2655:(pn,Ze,te)=>{te.d(Ze,{F0:()=>Ji,Bz:()=>Vo,lC:()=>$i});var a=te(1571),K=te(2076),ge=te(9646),Se=te(1135);const Re=(0,te(3888).d)(w=>function(){w(this),this.name="EmptyError",this.message="no elements in sequence"});var Oe=te(9841),_t=te(7272),Je=te(9751),Fe=te(8421);function ke(w){return new Je.y(R=>{(0,Fe.Xf)(w()).subscribe(R)})}var Ke=te(9635),Lt=te(576);function ze(w,R){const T=(0,Lt.m)(w)?w:()=>w,P=H=>H.error(T());return new Je.y(R?H=>R.schedule(P,0,H):P)}var Mt=te(515),dt=te(727),jt=te(4482),_n=te(5403);function ui(){return(0,jt.e)((w,R)=>{let T=null;w._refCount++;const P=(0,_n.x)(R,void 0,void 0,void 0,()=>{if(!w||w._refCount<=0||0<--w._refCount)return void(T=null);const H=w._connection,J=T;T=null,H&&(!J||H===J)&&H.unsubscribe(),R.unsubscribe()});w.subscribe(P),P.closed||(T=w.connect())})}class Ri extends Je.y{constructor(R,T){super(),this.source=R,this.subjectFactory=T,this._subject=null,this._refCount=0,this._connection=null,(0,jt.A)(R)&&(this.lift=R.lift)}_subscribe(R){return this.getSubject().subscribe(R)}getSubject(){const R=this._subject;return(!R||R.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:R}=this;this._subject=this._connection=null,R?.unsubscribe()}connect(){let R=this._connection;if(!R){R=this._connection=new dt.w0;const T=this.getSubject();R.add(this.source.subscribe((0,_n.x)(T,void 0,()=>{this._teardown(),T.complete()},P=>{this._teardown(),T.error(P)},()=>this._teardown()))),R.closed&&(this._connection=null,R=dt.w0.EMPTY)}return R}refCount(){return ui()(this)}}var Ie=te(7579),We=te(6895),Ne=te(4004),$e=te(3900),mt=te(5698),Et=te(8675),Rt=te(9300),Zt=te(5577);function kt(w){return(0,jt.e)((R,T)=>{let P=!1;R.subscribe((0,_n.x)(T,H=>{P=!0,T.next(H)},()=>{P||T.next(w),T.complete()}))})}function cn(w=on){return(0,jt.e)((R,T)=>{let P=!1;R.subscribe((0,_n.x)(T,H=>{P=!0,T.next(H)},()=>P?T.complete():T.error(w())))})}function on(){return new Re}var Ge=te(4671);function Me(w,R){const T=arguments.length>=2;return P=>P.pipe(w?(0,Rt.h)((H,J)=>w(H,J,P)):Ge.y,(0,mt.q)(1),T?kt(R):cn(()=>new Re))}function qe(w,R){return(0,Lt.m)(R)?(0,Zt.z)(w,R,1):(0,Zt.z)(w,1)}var Qe=te(8505);function At(w){return(0,jt.e)((R,T)=>{let J,P=null,H=!1;P=R.subscribe((0,_n.x)(T,void 0,void 0,ne=>{J=(0,Fe.Xf)(w(ne,At(w)(R))),P?(P.unsubscribe(),P=null,J.subscribe(T)):H=!0})),H&&(P.unsubscribe(),P=null,J.subscribe(T))})}function Rn(w,R){return(0,jt.e)(function xt(w,R,T,P,H){return(J,ne)=>{let be=T,nt=R,Ut=0;J.subscribe((0,_n.x)(ne,rn=>{const Kn=Ut++;nt=be?w(nt,rn,Kn):(be=!0,rn),P&&ne.next(nt)},H&&(()=>{be&&ne.next(nt),ne.complete()})))}}(w,R,arguments.length>=2,!0))}function pi(w){return w<=0?()=>Mt.E:(0,jt.e)((R,T)=>{let P=[];R.subscribe((0,_n.x)(T,H=>{P.push(H),w<P.length&&P.shift()},()=>{for(const H of P)T.next(H);T.complete()},void 0,()=>{P=null}))})}function lr(w,R){const T=arguments.length>=2;return P=>P.pipe(w?(0,Rt.h)((H,J)=>w(H,J,P)):Ge.y,pi(1),T?kt(R):cn(()=>new Re))}var jn=te(9718);function tn(w){return(0,jt.e)((R,T)=>{try{R.subscribe(T)}finally{T.add(w)}})}var Si=te(8189),Es=te(1481);const wn="primary",Mn=Symbol("RouteTitle");class xr{constructor(R){this.params=R||{}}has(R){return Object.prototype.hasOwnProperty.call(this.params,R)}get(R){if(this.has(R)){const T=this.params[R];return Array.isArray(T)?T[0]:T}return null}getAll(R){if(this.has(R)){const T=this.params[R];return Array.isArray(T)?T:[T]}return[]}get keys(){return Object.keys(this.params)}}function Ci(w){return new xr(w)}function Qi(w,R,T){const P=T.path.split("/");if(P.length>w.length||"full"===T.pathMatch&&(R.hasChildren()||P.length<w.length))return null;const H={};for(let J=0;J<P.length;J++){const ne=P[J],be=w[J];if(ne.startsWith(":"))H[ne.substring(1)]=be;else if(ne!==be.path)return null}return{consumed:w.slice(0,P.length),posParams:H}}function Qr(w,R){const T=w?Object.keys(w):void 0,P=R?Object.keys(R):void 0;if(!T||!P||T.length!=P.length)return!1;let H;for(let J=0;J<T.length;J++)if(H=T[J],!Ea(w[H],R[H]))return!1;return!0}function Ea(w,R){if(Array.isArray(w)&&Array.isArray(R)){if(w.length!==R.length)return!1;const T=[...w].sort(),P=[...R].sort();return T.every((H,J)=>P[J]===H)}return w===R}function Dr(w){return Array.prototype.concat.apply([],w)}function fo(w){return w.length>0?w[w.length-1]:null}function Li(w,R){for(const T in w)w.hasOwnProperty(T)&&R(w[T],T)}function wr(w){return(0,a.CqO)(w)?w:(0,a.QGY)(w)?(0,K.D)(Promise.resolve(w)):(0,ge.of)(w)}const mo=!1,bn={exact:function lt(w,R,T){if(!Yn(w.segments,R.segments)||!es(w.segments,R.segments,T)||w.numberOfChildren!==R.numberOfChildren)return!1;for(const P in R.children)if(!w.children[P]||!lt(w.children[P],R.children[P],T))return!1;return!0},subset:ki},As={exact:function Vt(w,R){return Qr(w,R)},subset:function sr(w,R){return Object.keys(R).length<=Object.keys(w).length&&Object.keys(R).every(T=>Ea(w[T],R[T]))},ignored:()=>!0};function Wi(w,R,T){return bn[T.paths](w.root,R.root,T.matrixParams)&&As[T.queryParams](w.queryParams,R.queryParams)&&!("exact"===T.fragment&&w.fragment!==R.fragment)}function ki(w,R,T){return vs(w,R,R.segments,T)}function vs(w,R,T,P){if(w.segments.length>T.length){const H=w.segments.slice(0,T.length);return!(!Yn(H,T)||R.hasChildren()||!es(H,T,P))}if(w.segments.length===T.length){if(!Yn(w.segments,T)||!es(w.segments,T,P))return!1;for(const H in R.children)if(!w.children[H]||!ki(w.children[H],R.children[H],P))return!1;return!0}{const H=T.slice(0,w.segments.length),J=T.slice(w.segments.length);return!!(Yn(w.segments,H)&&es(w.segments,H,P)&&w.children[wn])&&vs(w.children[wn],R,J,P)}}function es(w,R,T){return R.every((P,H)=>As[T](w[H].parameters,P.parameters))}class Rr{constructor(R=new nn([],{}),T={},P=null){this.root=R,this.queryParams=T,this.fragment=P}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ci(this.queryParams)),this._queryParamMap}toString(){return Bs.serialize(this)}}class nn{constructor(R,T){this.segments=R,this.children=T,this.parent=null,Li(T,(P,H)=>P.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Is(this)}}class Wn{constructor(R,T){this.path=R,this.parameters=T}get parameterMap(){return this._parameterMap||(this._parameterMap=Ci(this.parameters)),this._parameterMap}toString(){return el(this)}}function Yn(w,R){return w.length===R.length&&w.every((T,P)=>T.path===R[P].path)}let ts=(()=>{class w{}return w.\u0275fac=function(T){return new(T||w)},w.\u0275prov=a.Yz7({token:w,factory:function(){return new Ia},providedIn:"root"}),w})();class Ia{parse(R){const T=new Vn(R);return new Rr(T.parseRootSegment(),T.parseQueryParams(),T.parseFragment())}serialize(R){const T=`/${os(R.root,!0)}`,P=function as(w){const R=Object.keys(w).map(T=>{const P=w[T];return Array.isArray(P)?P.map(H=>`${vi(T)}=${vi(H)}`).join("&"):`${vi(T)}=${vi(P)}`}).filter(T=>!!T);return R.length?`?${R.join("&")}`:""}(R.queryParams);return`${T}${P}${"string"==typeof R.fragment?`#${function Hr(w){return encodeURI(w)}(R.fragment)}`:""}`}}const Bs=new Ia;function Is(w){return w.segments.map(R=>el(R)).join("/")}function os(w,R){if(!w.hasChildren())return Is(w);if(R){const T=w.children[wn]?os(w.children[wn],!1):"",P=[];return Li(w.children,(H,J)=>{J!==wn&&P.push(`${J}:${os(H,!1)}`)}),P.length>0?`${T}(${P.join("//")})`:T}{const T=function Wc(w,R){let T=[];return Li(w.children,(P,H)=>{H===wn&&(T=T.concat(R(P,H)))}),Li(w.children,(P,H)=>{H!==wn&&(T=T.concat(R(P,H)))}),T}(w,(P,H)=>H===wn?[os(w.children[wn],!1)]:[`${H}:${os(P,!1)}`]);return 1===Object.keys(w.children).length&&null!=w.children[wn]?`${Is(w)}/${T[0]}`:`${Is(w)}/(${T.join("//")})`}}function xi(w){return encodeURIComponent(w).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function vi(w){return xi(w).replace(/%3B/gi,";")}function Yo(w){return xi(w).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Jo(w){return decodeURIComponent(w)}function ys(w){return Jo(w.replace(/\+/g,"%20"))}function el(w){return`${Yo(w.path)}${function tl(w){return Object.keys(w).map(R=>`;${Yo(R)}=${Yo(w[R])}`).join("")}(w.parameters)}`}const Pe=/^[^\/()?;=#]+/;function ve(w){const R=w.match(Pe);return R?R[0]:""}const ae=/^[^=?&#]+/,Ve=/^[^&#]+/;class Vn{constructor(R){this.url=R,this.remaining=R}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new nn([],{}):new nn([],this.parseChildren())}parseQueryParams(){const R={};if(this.consumeOptional("?"))do{this.parseQueryParam(R)}while(this.consumeOptional("&"));return R}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const R=[];for(this.peekStartsWith("(")||R.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),R.push(this.parseSegment());let T={};this.peekStartsWith("/(")&&(this.capture("/"),T=this.parseParens(!0));let P={};return this.peekStartsWith("(")&&(P=this.parseParens(!1)),(R.length>0||Object.keys(T).length>0)&&(P[wn]=new nn(R,T)),P}parseSegment(){const R=ve(this.remaining);if(""===R&&this.peekStartsWith(";"))throw new a.vHH(4009,mo);return this.capture(R),new Wn(Jo(R),this.parseMatrixParams())}parseMatrixParams(){const R={};for(;this.consumeOptional(";");)this.parseParam(R);return R}parseParam(R){const T=ve(this.remaining);if(!T)return;this.capture(T);let P="";if(this.consumeOptional("=")){const H=ve(this.remaining);H&&(P=H,this.capture(P))}R[Jo(T)]=Jo(P)}parseQueryParam(R){const T=function Ce(w){const R=w.match(ae);return R?R[0]:""}(this.remaining);if(!T)return;this.capture(T);let P="";if(this.consumeOptional("=")){const ne=function en(w){const R=w.match(Ve);return R?R[0]:""}(this.remaining);ne&&(P=ne,this.capture(P))}const H=ys(T),J=ys(P);if(R.hasOwnProperty(H)){let ne=R[H];Array.isArray(ne)||(ne=[ne],R[H]=ne),ne.push(J)}else R[H]=J}parseParens(R){const T={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const P=ve(this.remaining),H=this.remaining[P.length];if("/"!==H&&")"!==H&&";"!==H)throw new a.vHH(4010,mo);let J;P.indexOf(":")>-1?(J=P.slice(0,P.indexOf(":")),this.capture(J),this.capture(":")):R&&(J=wn);const ne=this.parseChildren();T[J]=1===Object.keys(ne).length?ne[wn]:new nn([],ne),this.consumeOptional("//")}return T}peekStartsWith(R){return this.remaining.startsWith(R)}consumeOptional(R){return!!this.peekStartsWith(R)&&(this.remaining=this.remaining.substring(R.length),!0)}capture(R){if(!this.consumeOptional(R))throw new a.vHH(4011,mo)}}function Gi(w){return w.segments.length>0?new nn([],{[wn]:w}):w}function or(w){const R={};for(const P of Object.keys(w.children)){const J=or(w.children[P]);(J.segments.length>0||J.hasChildren())&&(R[P]=J)}return function ls(w){if(1===w.numberOfChildren&&w.children[wn]){const R=w.children[wn];return new nn(w.segments.concat(R.segments),R.children)}return w}(new nn(w.segments,R))}function vr(w){return w instanceof Rr}const fa=!1;function Ol(w,R,T,P,H){if(0===T.length)return Ps(R.root,R.root,R.root,P,H);const J=function gi(w){if("string"==typeof w[0]&&1===w.length&&"/"===w[0])return new Ko(!0,0,w);let R=0,T=!1;const P=w.reduce((H,J,ne)=>{if("object"==typeof J&&null!=J){if(J.outlets){const be={};return Li(J.outlets,(nt,Ut)=>{be[Ut]="string"==typeof nt?nt.split("/"):nt}),[...H,{outlets:be}]}if(J.segmentPath)return[...H,J.segmentPath]}return"string"!=typeof J?[...H,J]:0===ne?(J.split("/").forEach((be,nt)=>{0==nt&&"."===be||(0==nt&&""===be?T=!0:".."===be?R++:""!=be&&H.push(be))}),H):[...H,J]},[]);return new Ko(T,R,P)}(T);return J.toRoot()?Ps(R.root,R.root,new nn([],{}),P,H):function ne(nt){const Ut=function zr(w,R,T,P){if(w.isAbsolute)return new cr(R.root,!0,0);if(-1===P)return new cr(T,T===R.root,0);return function jr(w,R,T){let P=w,H=R,J=T;for(;J>H;){if(J-=H,P=P.parent,!P)throw new a.vHH(4005,fa&&"Invalid number of '../'");H=P.segments.length}return new cr(P,!1,H-J)}(T,P+(go(w.commands[0])?0:1),w.numberOfDoubleDots)}(J,R,w.snapshot?._urlSegment,nt),rn=Ut.processChildren?js(Ut.segmentGroup,Ut.index,J.commands):Oa(Ut.segmentGroup,Ut.index,J.commands);return Ps(R.root,Ut.segmentGroup,rn,P,H)}(w.snapshot?._lastPathIndex)}function go(w){return"object"==typeof w&&null!=w&&!w.outlets&&!w.segmentPath}function pa(w){return"object"==typeof w&&null!=w&&w.outlets}function Ps(w,R,T,P,H){let ne,J={};P&&Li(P,(nt,Ut)=>{J[Ut]=Array.isArray(nt)?nt.map(rn=>`${rn}`):`${nt}`}),ne=w===R?T:no(w,R,T);const be=Gi(or(ne));return new Rr(be,J,H)}function no(w,R,T){const P={};return Li(w.children,(H,J)=>{P[J]=H===R?T:no(H,R,T)}),new nn(w.segments,P)}class Ko{constructor(R,T,P){if(this.isAbsolute=R,this.numberOfDoubleDots=T,this.commands=P,R&&P.length>0&&go(P[0]))throw new a.vHH(4003,fa&&"Root segment cannot have matrix parameters");const H=P.find(pa);if(H&&H!==fo(P))throw new a.vHH(4004,fa&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class cr{constructor(R,T,P){this.segmentGroup=R,this.processChildren=T,this.index=P}}function Oa(w,R,T){if(w||(w=new nn([],{})),0===w.segments.length&&w.hasChildren())return js(w,R,T);const P=function ks(w,R,T){let P=0,H=R;const J={match:!1,pathIndex:0,commandIndex:0};for(;H<w.segments.length;){if(P>=T.length)return J;const ne=w.segments[H],be=T[P];if(pa(be))break;const nt=`${be}`,Ut=P<T.length-1?T[P+1]:null;if(H>0&&void 0===nt)break;if(nt&&Ut&&"object"==typeof Ut&&void 0===Ut.outlets){if(!ns(nt,Ut,ne))return J;P+=2}else{if(!ns(nt,{},ne))return J;P++}H++}return{match:!0,pathIndex:H,commandIndex:P}}(w,R,T),H=T.slice(P.commandIndex);if(P.match&&P.pathIndex<w.segments.length){const J=new nn(w.segments.slice(0,P.pathIndex),{});return J.children[wn]=new nn(w.segments.slice(P.pathIndex),w.children),js(J,0,H)}return P.match&&0===H.length?new nn(w.segments,{}):P.match&&!w.hasChildren()?Yt(w,R,T):P.match?js(w,0,H):Yt(w,R,T)}function js(w,R,T){if(0===T.length)return new nn(w.segments,{});{const P=function oc(w){return pa(w[0])?w[0].outlets:{[wn]:w}}(T),H={};if(!P[wn]&&w.children[wn]&&1===w.numberOfChildren&&0===w.children[wn].segments.length){const J=js(w.children[wn],R,T);return new nn(w.segments,J.children)}return Li(P,(J,ne)=>{"string"==typeof J&&(J=[J]),null!==J&&(H[ne]=Oa(w.children[ne],R,J))}),Li(w.children,(J,ne)=>{void 0===P[ne]&&(H[ne]=J)}),new nn(w.segments,H)}}function Yt(w,R,T){const P=w.segments.slice(0,R);let H=0;for(;H<T.length;){const J=T[H];if(pa(J)){const nt=An(J.outlets);return new nn(P,nt)}if(0===H&&go(T[0])){P.push(new Wn(w.segments[R].path,Pi(T[0]))),H++;continue}const ne=pa(J)?J.outlets[wn]:`${J}`,be=H<T.length-1?T[H+1]:null;ne&&be&&go(be)?(P.push(new Wn(ne,Pi(be))),H+=2):(P.push(new Wn(ne,{})),H++)}return new nn(P,{})}function An(w){const R={};return Li(w,(T,P)=>{"string"==typeof T&&(T=[T]),null!==T&&(R[P]=Yt(new nn([],{}),0,T))}),R}function Pi(w){const R={};return Li(w,(T,P)=>R[P]=`${T}`),R}function ns(w,R,T){return w==T.path&&Qr(R,T.parameters)}const bs="imperative";class er{constructor(R,T){this.id=R,this.url=T}}class Po extends er{constructor(R,T,P="imperative",H=null){super(R,T),this.type=0,this.navigationTrigger=P,this.restoredState=H}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Bi extends er{constructor(R,T,P){super(R,T),this.urlAfterRedirects=P,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Gs extends er{constructor(R,T,P,H){super(R,T),this.reason=P,this.code=H,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class _o extends er{constructor(R,T,P,H){super(R,T),this.reason=P,this.code=H,this.type=16}}class kn extends er{constructor(R,T,P,H){super(R,T),this.error=P,this.target=H,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class ma extends er{constructor(R,T,P,H){super(R,T),this.urlAfterRedirects=P,this.state=H,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Vs extends er{constructor(R,T,P,H){super(R,T),this.urlAfterRedirects=P,this.state=H,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ga extends er{constructor(R,T,P,H,J){super(R,T),this.urlAfterRedirects=P,this.state=H,this.shouldActivate=J,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Oo extends er{constructor(R,T,P,H){super(R,T),this.urlAfterRedirects=P,this.state=H,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Sr extends er{constructor(R,T,P,H){super(R,T),this.urlAfterRedirects=P,this.state=H,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Nl{constructor(R){this.route=R,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class kr{constructor(R){this.route=R,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class cs{constructor(R){this.snapshot=R,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class us{constructor(R){this.snapshot=R,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Di{constructor(R){this.snapshot=R,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Oi{constructor(R){this.snapshot=R,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Fl{constructor(R,T,P){this.routerEvent=R,this.position=T,this.anchor=P,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let Ll=(()=>{class w{createUrlTree(T,P,H,J,ne,be){return Ol(T||P.root,H,J,ne,be)}}return w.\u0275fac=function(T){return new(T||w)},w.\u0275prov=a.Yz7({token:w,factory:w.\u0275fac}),w})(),Us=(()=>{class w{}return w.\u0275fac=function(T){return new(T||w)},w.\u0275prov=a.Yz7({token:w,factory:function(R){return Ll.\u0275fac(R)},providedIn:"root"}),w})();class Wr{constructor(R){this._root=R}get root(){return this._root.value}parent(R){const T=this.pathFromRoot(R);return T.length>1?T[T.length-2]:null}children(R){const T=Na(R,this._root);return T?T.children.map(P=>P.value):[]}firstChild(R){const T=Na(R,this._root);return T&&T.children.length>0?T.children[0].value:null}siblings(R){const T=$r(R,this._root);return T.length<2?[]:T[T.length-2].children.map(H=>H.value).filter(H=>H!==R)}pathFromRoot(R){return $r(R,this._root).map(T=>T.value)}}function Na(w,R){if(w===R.value)return R;for(const T of R.children){const P=Na(w,T);if(P)return P}return null}function $r(w,R){if(w===R.value)return[R];for(const T of R.children){const P=$r(w,T);if(P.length)return P.unshift(R),P}return[]}class Cr{constructor(R,T){this.value=R,this.children=T}toString(){return`TreeNode(${this.value})`}}function _a(w){const R={};return w&&w.children.forEach(T=>R[T.value.outlet]=T),R}class Fa extends Wr{constructor(R,T){super(R),this.snapshot=T,kl(this,R)}toString(){return this.snapshot.toString()}}function Bl(w,R){const T=function is(w,R){const ne=new Xo([],{},{},"",{},wn,R,null,w.root,-1,{});return new jl("",new Cr(ne,[]))}(w,R),P=new Se.X([new Wn("",{})]),H=new Se.X({}),J=new Se.X({}),ne=new Se.X({}),be=new Se.X(""),nt=new qo(P,H,ne,be,J,wn,R,T.root);return nt.snapshot=T.root,new Fa(new Cr(nt,[]),T)}class qo{constructor(R,T,P,H,J,ne,be,nt){this.url=R,this.params=T,this.queryParams=P,this.fragment=H,this.data=J,this.outlet=ne,this.component=be,this.title=this.data?.pipe((0,Ne.U)(Ut=>Ut[Mn]))??(0,ge.of)(void 0),this._futureSnapshot=nt}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Ne.U)(R=>Ci(R)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Ne.U)(R=>Ci(R)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function rl(w,R="emptyOnly"){const T=w.pathFromRoot;let P=0;if("always"!==R)for(P=T.length-1;P>=1;){const H=T[P],J=T[P-1];if(H.routeConfig&&""===H.routeConfig.path)P--;else{if(J.component)break;P--}}return function sl(w){return w.reduce((R,T)=>({params:{...R.params,...T.params},data:{...R.data,...T.data},resolve:{...T.data,...R.resolve,...T.routeConfig?.data,...T._resolvedData}}),{params:{},data:{},resolve:{}})}(T.slice(P))}class Xo{get title(){return this.data?.[Mn]}constructor(R,T,P,H,J,ne,be,nt,Ut,rn,Kn){this.url=R,this.params=T,this.queryParams=P,this.fragment=H,this.data=J,this.outlet=ne,this.component=be,this.routeConfig=nt,this._urlSegment=Ut,this._lastPathIndex=rn,this._resolve=Kn}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Ci(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ci(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(P=>P.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class jl extends Wr{constructor(R,T){super(T),this.url=R,kl(this,T)}toString(){return ol(this._root)}}function kl(w,R){R.value._routerState=w,R.children.forEach(T=>kl(w,T))}function ol(w){const R=w.children.length>0?` { ${w.children.map(ol).join(", ")} } `:"";return`${w.value}${R}`}function al(w){if(w.snapshot){const R=w.snapshot,T=w._futureSnapshot;w.snapshot=T,Qr(R.queryParams,T.queryParams)||w.queryParams.next(T.queryParams),R.fragment!==T.fragment&&w.fragment.next(T.fragment),Qr(R.params,T.params)||w.params.next(T.params),function ha(w,R){if(w.length!==R.length)return!1;for(let T=0;T<w.length;++T)if(!Qr(w[T],R[T]))return!1;return!0}(R.url,T.url)||w.url.next(T.url),Qr(R.data,T.data)||w.data.next(T.data)}else w.snapshot=w._futureSnapshot,w.data.next(w._futureSnapshot.data)}function ll(w,R){const T=Qr(w.params,R.params)&&function Aa(w,R){return Yn(w,R)&&w.every((T,P)=>Qr(T.parameters,R[P].parameters))}(w.url,R.url);return T&&!(!w.parent!=!R.parent)&&(!w.parent||ll(w.parent,R.parent))}function La(w,R,T){if(T&&w.shouldReuseRoute(R.value,T.value.snapshot)){const P=T.value;P._futureSnapshot=R.value;const H=function Bd(w,R,T){return R.children.map(P=>{for(const H of T.children)if(w.shouldReuseRoute(P.value,H.value.snapshot))return La(w,P,H);return La(w,P)})}(w,R,T);return new Cr(P,H)}{if(w.shouldAttach(R.value)){const J=w.retrieve(R.value);if(null!==J){const ne=J.route;return ne.value._futureSnapshot=R.value,ne.children=R.children.map(be=>La(w,be)),ne}}const P=function Vu(w){return new qo(new Se.X(w.url),new Se.X(w.params),new Se.X(w.queryParams),new Se.X(w.fragment),new Se.X(w.data),w.outlet,w.component,w)}(R.value),H=R.children.map(J=>La(w,J));return new Cr(P,H)}}const $c="ngNavigationCancelingError";function jd(w,R){const{redirectTo:T,navigationBehaviorOptions:P}=vr(R)?{redirectTo:R,navigationBehaviorOptions:void 0}:R,H=kd(!1,0,R);return H.url=T,H.navigationBehaviorOptions=P,H}function kd(w,R,T){const P=new Error("NavigationCancelingError: "+(w||""));return P[$c]=!0,P.cancellationCode=R,T&&(P.url=T),P}function Gl(w){return Uu(w)&&vr(w.url)}function Uu(w){return w&&w[$c]}class Gd{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new No,this.attachRef=null}}let No=(()=>{class w{constructor(){this.contexts=new Map}onChildOutletCreated(T,P){const H=this.getOrCreateContext(T);H.outlet=P,this.contexts.set(T,H)}onChildOutletDestroyed(T){const P=this.getContext(T);P&&(P.outlet=null,P.attachRef=null)}onOutletDeactivated(){const T=this.contexts;return this.contexts=new Map,T}onOutletReAttached(T){this.contexts=T}getOrCreateContext(T){let P=this.getContext(T);return P||(P=new Gd,this.contexts.set(T,P)),P}getContext(T){return this.contexts.get(T)||null}}return w.\u0275fac=function(T){return new(T||w)},w.\u0275prov=a.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})();const Fo=!1;let $i=(()=>{class w{constructor(){this.activated=null,this._activatedRoute=null,this.name=wn,this.activateEvents=new a.vpe,this.deactivateEvents=new a.vpe,this.attachEvents=new a.vpe,this.detachEvents=new a.vpe,this.parentContexts=(0,a.f3M)(No),this.location=(0,a.f3M)(a.s_b),this.changeDetector=(0,a.f3M)(a.sBO),this.environmentInjector=(0,a.f3M)(a.lqb)}ngOnChanges(T){if(T.name){const{firstChange:P,previousValue:H}=T.name;if(P)return;this.isTrackedInParentContexts(H)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(H)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(T){return this.parentContexts.getContext(T)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const T=this.parentContexts.getContext(this.name);T?.route&&(T.attachRef?this.attach(T.attachRef,T.route):this.activateWith(T.route,T.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new a.vHH(4012,Fo);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new a.vHH(4012,Fo);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new a.vHH(4012,Fo);this.location.detach();const T=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(T.instance),T}attach(T,P){this.activated=T,this._activatedRoute=P,this.location.insert(T.hostView),this.attachEvents.emit(T.instance)}deactivate(){if(this.activated){const T=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(T)}}activateWith(T,P){if(this.isActivated)throw new a.vHH(4013,Fo);this._activatedRoute=T;const H=this.location,ne=T.snapshot.component,be=this.parentContexts.getOrCreateContext(this.name).children,nt=new cl(T,be,H.injector);if(P&&function Lo(w){return!!w.resolveComponentFactory}(P)){const Ut=P.resolveComponentFactory(ne);this.activated=H.createComponent(Ut,H.length,nt)}else this.activated=H.createComponent(ne,{index:H.length,injector:nt,environmentInjector:P??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return w.\u0275fac=function(T){return new(T||w)},w.\u0275dir=a.lG2({type:w,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[a.TTD]}),w})();class cl{constructor(R,T,P){this.route=R,this.childContexts=T,this.parent=P}get(R,T){return R===qo?this.route:R===No?this.childContexts:this.parent.get(R,T)}}let Qo=(()=>{class w{}return w.\u0275fac=function(T){return new(T||w)},w.\u0275cmp=a.Xpm({type:w,selectors:[["ng-component"]],standalone:!0,features:[a.jDz],decls:1,vars:0,template:function(T,P){1&T&&a._UZ(0,"router-outlet")},dependencies:[$i],encapsulation:2}),w})();function Ts(w,R){return w.providers&&!w._injector&&(w._injector=(0,a.MMx)(w.providers,R,`Route: ${w.path}`)),w._injector??R}function Ul(w){const R=w.children&&w.children.map(Ul),T=R?{...w,children:R}:{...w};return!T.component&&!T.loadComponent&&(R||T.loadChildren)&&T.outlet&&T.outlet!==wn&&(T.component=Qo),T}function Vi(w){return w.outlet||wn}function Hu(w,R){const T=w.filter(P=>Vi(P)===R);return T.push(...w.filter(P=>Vi(P)!==R)),T}function ea(w){if(!w)return null;if(w.routeConfig?._injector)return w.routeConfig._injector;for(let R=w.parent;R;R=R.parent){const T=R.routeConfig;if(T?._loadedInjector)return T._loadedInjector;if(T?._injector)return T._injector}return null}class lc{constructor(R,T,P,H){this.routeReuseStrategy=R,this.futureState=T,this.currState=P,this.forwardEvent=H}activate(R){const T=this.futureState._root,P=this.currState?this.currState._root:null;this.deactivateChildRoutes(T,P,R),al(this.futureState.root),this.activateChildRoutes(T,P,R)}deactivateChildRoutes(R,T,P){const H=_a(T);R.children.forEach(J=>{const ne=J.value.outlet;this.deactivateRoutes(J,H[ne],P),delete H[ne]}),Li(H,(J,ne)=>{this.deactivateRouteAndItsChildren(J,P)})}deactivateRoutes(R,T,P){const H=R.value,J=T?T.value:null;if(H===J)if(H.component){const ne=P.getContext(H.outlet);ne&&this.deactivateChildRoutes(R,T,ne.children)}else this.deactivateChildRoutes(R,T,P);else J&&this.deactivateRouteAndItsChildren(T,P)}deactivateRouteAndItsChildren(R,T){R.value.component&&this.routeReuseStrategy.shouldDetach(R.value.snapshot)?this.detachAndStoreRouteSubtree(R,T):this.deactivateRouteAndOutlet(R,T)}detachAndStoreRouteSubtree(R,T){const P=T.getContext(R.value.outlet),H=P&&R.value.component?P.children:T,J=_a(R);for(const ne of Object.keys(J))this.deactivateRouteAndItsChildren(J[ne],H);if(P&&P.outlet){const ne=P.outlet.detach(),be=P.children.onOutletDeactivated();this.routeReuseStrategy.store(R.value.snapshot,{componentRef:ne,route:R,contexts:be})}}deactivateRouteAndOutlet(R,T){const P=T.getContext(R.value.outlet),H=P&&R.value.component?P.children:T,J=_a(R);for(const ne of Object.keys(J))this.deactivateRouteAndItsChildren(J[ne],H);P&&(P.outlet&&(P.outlet.deactivate(),P.children.onOutletDeactivated()),P.attachRef=null,P.resolver=null,P.route=null)}activateChildRoutes(R,T,P){const H=_a(T);R.children.forEach(J=>{this.activateRoutes(J,H[J.value.outlet],P),this.forwardEvent(new Oi(J.value.snapshot))}),R.children.length&&this.forwardEvent(new us(R.value.snapshot))}activateRoutes(R,T,P){const H=R.value,J=T?T.value:null;if(al(H),H===J)if(H.component){const ne=P.getOrCreateContext(H.outlet);this.activateChildRoutes(R,T,ne.children)}else this.activateChildRoutes(R,T,P);else if(H.component){const ne=P.getOrCreateContext(H.outlet);if(this.routeReuseStrategy.shouldAttach(H.snapshot)){const be=this.routeReuseStrategy.retrieve(H.snapshot);this.routeReuseStrategy.store(H.snapshot,null),ne.children.onOutletReAttached(be.contexts),ne.attachRef=be.componentRef,ne.route=be.route.value,ne.outlet&&ne.outlet.attach(be.componentRef,be.route.value),al(be.route.value),this.activateChildRoutes(R,null,ne.children)}else{const be=ea(H.snapshot),nt=be?.get(a._Vd)??null;ne.attachRef=null,ne.route=H,ne.resolver=nt,ne.injector=be,ne.outlet&&ne.outlet.activateWith(H,ne.injector),this.activateChildRoutes(R,null,ne.children)}}else this.activateChildRoutes(R,null,P)}}class Hl{constructor(R){this.path=R,this.route=this.path[this.path.length-1]}}class Hs{constructor(R,T){this.component=R,this.route=T}}function Yr(w,R,T){const P=w._root;return hs(P,R?R._root:null,T,[P.value])}function yo(w,R){const T=Symbol(),P=R.get(w,T);return P===T?"function"!=typeof w||(0,a.Z0I)(w)?R.get(w):w:P}function hs(w,R,T,P,H={canDeactivateChecks:[],canActivateChecks:[]}){const J=_a(R);return w.children.forEach(ne=>{(function _i(w,R,T,P,H={canDeactivateChecks:[],canActivateChecks:[]}){const J=w.value,ne=R?R.value:null,be=T?T.getContext(w.value.outlet):null;if(ne&&J.routeConfig===ne.routeConfig){const nt=function zu(w,R,T){if("function"==typeof T)return T(w,R);switch(T){case"pathParamsChange":return!Yn(w.url,R.url);case"pathParamsOrQueryParamsChange":return!Yn(w.url,R.url)||!Qr(w.queryParams,R.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ll(w,R)||!Qr(w.queryParams,R.queryParams);default:return!ll(w,R)}}(ne,J,J.routeConfig.runGuardsAndResolvers);nt?H.canActivateChecks.push(new Hl(P)):(J.data=ne.data,J._resolvedData=ne._resolvedData),hs(w,R,J.component?be?be.children:null:T,P,H),nt&&be&&be.outlet&&be.outlet.isActivated&&H.canDeactivateChecks.push(new Hs(be.outlet.component,ne))}else ne&&ht(R,be,H),H.canActivateChecks.push(new Hl(P)),hs(w,null,J.component?be?be.children:null:T,P,H)})(ne,J[ne.value.outlet],T,P.concat([ne.value]),H),delete J[ne.value.outlet]}),Li(J,(ne,be)=>ht(ne,T.getContext(be),H)),H}function ht(w,R,T){const P=_a(w),H=w.value;Li(P,(J,ne)=>{ht(J,H.component?R?R.children.getContext(ne):null:R,T)}),T.canDeactivateChecks.push(new Hs(H.component&&R&&R.outlet&&R.outlet.isActivated?R.outlet.component:null,H))}function mn(w){return"function"==typeof w}function et(w){return w instanceof Re||"EmptyError"===w?.name}const ei=Symbol("INITIAL_VALUE");function Ki(){return(0,$e.w)(w=>(0,Oe.a)(w.map(R=>R.pipe((0,mt.q)(1),(0,Et.O)(ei)))).pipe((0,Ne.U)(R=>{for(const T of R)if(!0!==T){if(T===ei)return ei;if(!1===T||T instanceof Rr)return T}return!0}),(0,Rt.h)(R=>R!==ei),(0,mt.q)(1)))}function dc(w){return(0,Ke.z)((0,Qe.b)(R=>{if(vr(R))throw jd(0,R)}),(0,Ne.U)(R=>!0===R))}const Jn={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function ta(w,R,T,P,H){const J=zs(w,R,T);return J.matched?function tr(w,R,T,P){const H=R.canMatch;if(!H||0===H.length)return(0,ge.of)(!0);const J=H.map(ne=>{const be=yo(ne,w);return wr(function Bo(w){return w&&mn(w.canMatch)}(be)?be.canMatch(R,T):w.runInContext(()=>be(R,T)))});return(0,ge.of)(J).pipe(Ki(),dc())}(P=Ts(R,P),R,T).pipe((0,Ne.U)(ne=>!0===ne?J:{...Jn})):(0,ge.of)(J)}function zs(w,R,T){if(""===R.path)return"full"===R.pathMatch&&(w.hasChildren()||T.length>0)?{...Jn}:{matched:!0,consumedSegments:[],remainingSegments:T,parameters:{},positionalParamSegments:{}};const H=(R.matcher||Qi)(T,w,R);if(!H)return{...Jn};const J={};Li(H.posParams,(be,nt)=>{J[nt]=be.path});const ne=H.consumed.length>0?{...J,...H.consumed[H.consumed.length-1].parameters}:J;return{matched:!0,consumedSegments:H.consumed,remainingSegments:T.slice(H.consumed.length),parameters:ne,positionalParamSegments:H.posParams??{}}}function Ws(w,R,T,P){if(T.length>0&&function ja(w,R,T){return T.some(P=>le(w,R,P)&&Vi(P)!==wn)}(w,T,P)){const J=new nn(R,function Zc(w,R,T,P){const H={};H[wn]=P,P._sourceSegment=w,P._segmentIndexShift=R.length;for(const J of T)if(""===J.path&&Vi(J)!==wn){const ne=new nn([],{});ne._sourceSegment=w,ne._segmentIndexShift=R.length,H[Vi(J)]=ne}return H}(w,R,P,new nn(T,w.children)));return J._sourceSegment=w,J._segmentIndexShift=R.length,{segmentGroup:J,slicedSegments:[]}}if(0===T.length&&function Ns(w,R,T){return T.some(P=>le(w,R,P))}(w,T,P)){const J=new nn(w.segments,function pl(w,R,T,P,H){const J={};for(const ne of P)if(le(w,T,ne)&&!H[Vi(ne)]){const be=new nn([],{});be._sourceSegment=w,be._segmentIndexShift=R.length,J[Vi(ne)]=be}return{...H,...J}}(w,R,T,P,w.children));return J._sourceSegment=w,J._segmentIndexShift=R.length,{segmentGroup:J,slicedSegments:T}}const H=new nn(w.segments,w.children);return H._sourceSegment=w,H._segmentIndexShift=R.length,{segmentGroup:H,slicedSegments:T}}function le(w,R,T){return(!(w.hasChildren()||R.length>0)||"full"!==T.pathMatch)&&""===T.path}function ka(w,R,T,P){return!!(Vi(w)===P||P!==wn&&le(R,T,w))&&("**"===w.path||zs(R,w,T).matched)}function ml(w,R,T){return 0===R.length&&!w.children[T]}const so=!1;class $s{constructor(R){this.segmentGroup=R||null}}class oo{constructor(R){this.urlTree=R}}function To(w){return ze(new $s(w))}function jo(w){return ze(new oo(w))}class Mo{constructor(R,T,P,H,J){this.injector=R,this.configLoader=T,this.urlSerializer=P,this.urlTree=H,this.config=J,this.allowRedirects=!0}apply(){const R=Ws(this.urlTree.root,[],[],this.config).segmentGroup,T=new nn(R.segments,R.children);return this.expandSegmentGroup(this.injector,this.config,T,wn).pipe((0,Ne.U)(J=>this.createUrlTree(or(J),this.urlTree.queryParams,this.urlTree.fragment))).pipe(At(J=>{if(J instanceof oo)return this.allowRedirects=!1,this.match(J.urlTree);throw J instanceof $s?this.noMatchError(J):J}))}match(R){return this.expandSegmentGroup(this.injector,this.config,R.root,wn).pipe((0,Ne.U)(H=>this.createUrlTree(or(H),R.queryParams,R.fragment))).pipe(At(H=>{throw H instanceof $s?this.noMatchError(H):H}))}noMatchError(R){return new a.vHH(4002,so)}createUrlTree(R,T,P){const H=Gi(R);return new Rr(H,T,P)}expandSegmentGroup(R,T,P,H){return 0===P.segments.length&&P.hasChildren()?this.expandChildren(R,T,P).pipe((0,Ne.U)(J=>new nn([],J))):this.expandSegment(R,P,T,P.segments,H,!0)}expandChildren(R,T,P){const H=[];for(const J of Object.keys(P.children))"primary"===J?H.unshift(J):H.push(J);return(0,K.D)(H).pipe(qe(J=>{const ne=P.children[J],be=Hu(T,J);return this.expandSegmentGroup(R,be,ne,J).pipe((0,Ne.U)(nt=>({segment:nt,outlet:J})))}),Rn((J,ne)=>(J[ne.outlet]=ne.segment,J),{}),lr())}expandSegment(R,T,P,H,J,ne){return(0,K.D)(P).pipe(qe(be=>this.expandSegmentAgainstRoute(R,T,P,be,H,J,ne).pipe(At(Ut=>{if(Ut instanceof $s)return(0,ge.of)(null);throw Ut}))),Me(be=>!!be),At((be,nt)=>{if(et(be))return ml(T,H,J)?(0,ge.of)(new nn([],{})):To(T);throw be}))}expandSegmentAgainstRoute(R,T,P,H,J,ne,be){return ka(H,T,J,ne)?void 0===H.redirectTo?this.matchSegmentAgainstRoute(R,T,H,J,ne):be&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(R,T,P,H,J,ne):To(T):To(T)}expandSegmentAgainstRouteUsingRedirect(R,T,P,H,J,ne){return"**"===H.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(R,P,H,ne):this.expandRegularSegmentAgainstRouteUsingRedirect(R,T,P,H,J,ne)}expandWildCardWithParamsAgainstRouteUsingRedirect(R,T,P,H){const J=this.applyRedirectCommands([],P.redirectTo,{});return P.redirectTo.startsWith("/")?jo(J):this.lineralizeSegments(P,J).pipe((0,Zt.z)(ne=>{const be=new nn(ne,{});return this.expandSegment(R,be,T,ne,H,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(R,T,P,H,J,ne){const{matched:be,consumedSegments:nt,remainingSegments:Ut,positionalParamSegments:rn}=zs(T,H,J);if(!be)return To(T);const Kn=this.applyRedirectCommands(nt,H.redirectTo,rn);return H.redirectTo.startsWith("/")?jo(Kn):this.lineralizeSegments(H,Kn).pipe((0,Zt.z)(Or=>this.expandSegment(R,T,P,Or.concat(Ut),ne,!1)))}matchSegmentAgainstRoute(R,T,P,H,J){return"**"===P.path?(R=Ts(P,R),P.loadChildren?(P._loadedRoutes?(0,ge.of)({routes:P._loadedRoutes,injector:P._loadedInjector}):this.configLoader.loadChildren(R,P)).pipe((0,Ne.U)(be=>(P._loadedRoutes=be.routes,P._loadedInjector=be.injector,new nn(H,{})))):(0,ge.of)(new nn(H,{}))):ta(T,P,H,R).pipe((0,$e.w)(({matched:ne,consumedSegments:be,remainingSegments:nt})=>ne?this.getChildConfig(R=P._injector??R,P,H).pipe((0,Zt.z)(rn=>{const Kn=rn.injector??R,Or=rn.routes,{segmentGroup:hr,slicedSegments:uo}=Ws(T,be,nt,Or),Ho=new nn(hr.segments,hr.children);if(0===uo.length&&Ho.hasChildren())return this.expandChildren(Kn,Or,Ho).pipe((0,Ne.U)(yc=>new nn(be,yc)));if(0===Or.length&&0===uo.length)return(0,ge.of)(new nn(be,{}));const Do=Vi(P)===J;return this.expandSegment(Kn,Ho,Or,uo,Do?wn:J,!0).pipe((0,Ne.U)(vc=>new nn(be.concat(vc.segments),vc.children)))})):To(T)))}getChildConfig(R,T,P){return T.children?(0,ge.of)({routes:T.children,injector:R}):T.loadChildren?void 0!==T._loadedRoutes?(0,ge.of)({routes:T._loadedRoutes,injector:T._loadedInjector}):function Jc(w,R,T,P){const H=R.canLoad;if(void 0===H||0===H.length)return(0,ge.of)(!0);const J=H.map(ne=>{const be=yo(ne,w);return wr(function Wu(w){return w&&mn(w.canLoad)}(be)?be.canLoad(R,T):w.runInContext(()=>be(R,T)))});return(0,ge.of)(J).pipe(Ki(),dc())}(R,T,P).pipe((0,Zt.z)(H=>H?this.configLoader.loadChildren(R,T).pipe((0,Qe.b)(J=>{T._loadedRoutes=J.routes,T._loadedInjector=J.injector})):function ia(w){return ze(kd(so,3))}())):(0,ge.of)({routes:[],injector:R})}lineralizeSegments(R,T){let P=[],H=T.root;for(;;){if(P=P.concat(H.segments),0===H.numberOfChildren)return(0,ge.of)(P);if(H.numberOfChildren>1||!H.children[wn])return R.redirectTo,ze(new a.vHH(4e3,so));H=H.children[wn]}}applyRedirectCommands(R,T,P){return this.applyRedirectCreateUrlTree(T,this.urlSerializer.parse(T),R,P)}applyRedirectCreateUrlTree(R,T,P,H){const J=this.createSegmentGroup(R,T.root,P,H);return new Rr(J,this.createQueryParams(T.queryParams,this.urlTree.queryParams),T.fragment)}createQueryParams(R,T){const P={};return Li(R,(H,J)=>{if("string"==typeof H&&H.startsWith(":")){const be=H.substring(1);P[J]=T[be]}else P[J]=H}),P}createSegmentGroup(R,T,P,H){const J=this.createSegments(R,T.segments,P,H);let ne={};return Li(T.children,(be,nt)=>{ne[nt]=this.createSegmentGroup(R,be,P,H)}),new nn(J,ne)}createSegments(R,T,P,H){return T.map(J=>J.path.startsWith(":")?this.findPosParam(R,J,H):this.findOrReturn(J,P))}findPosParam(R,T,P){const H=P[T.path.substring(1)];if(!H)throw new a.vHH(4001,so);return H}findOrReturn(R,T){let P=0;for(const H of T){if(H.path===R.path)return T.splice(P),H;P++}return R}}class Er{}class hc{constructor(R,T,P,H,J,ne,be){this.injector=R,this.rootComponentType=T,this.config=P,this.urlTree=H,this.url=J,this.paramsInheritanceStrategy=ne,this.urlSerializer=be}recognize(){const R=Ws(this.urlTree.root,[],[],this.config.filter(T=>void 0===T.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,R,wn).pipe((0,Ne.U)(T=>{if(null===T)return null;const P=new Xo([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},wn,this.rootComponentType,null,this.urlTree.root,-1,{}),H=new Cr(P,T),J=new jl(this.url,H);return this.inheritParamsAndData(J._root),J}))}inheritParamsAndData(R){const T=R.value,P=rl(T,this.paramsInheritanceStrategy);T.params=Object.freeze(P.params),T.data=Object.freeze(P.data),R.children.forEach(H=>this.inheritParamsAndData(H))}processSegmentGroup(R,T,P,H){return 0===P.segments.length&&P.hasChildren()?this.processChildren(R,T,P):this.processSegment(R,T,P,P.segments,H)}processChildren(R,T,P){return(0,K.D)(Object.keys(P.children)).pipe(qe(H=>{const J=P.children[H],ne=Hu(T,H);return this.processSegmentGroup(R,ne,J,H)}),Rn((H,J)=>H&&J?(H.push(...J),H):null),function En(w,R=!1){return(0,jt.e)((T,P)=>{let H=0;T.subscribe((0,_n.x)(P,J=>{const ne=w(J,H++);(ne||R)&&P.next(J),!ne&&P.complete()}))})}(H=>null!==H),kt(null),lr(),(0,Ne.U)(H=>{if(null===H)return null;const J=O(H);return function Vd(w){w.sort((R,T)=>R.value.outlet===wn?-1:T.value.outlet===wn?1:R.value.outlet.localeCompare(T.value.outlet))}(J),J}))}processSegment(R,T,P,H,J){return(0,K.D)(T).pipe(qe(ne=>this.processSegmentAgainstRoute(ne._injector??R,ne,P,H,J)),Me(ne=>!!ne),At(ne=>{if(et(ne))return ml(P,H,J)?(0,ge.of)([]):(0,ge.of)(null);throw ne}))}processSegmentAgainstRoute(R,T,P,H,J){if(T.redirectTo||!ka(T,P,H,J))return(0,ge.of)(null);let ne;if("**"===T.path){const be=H.length>0?fo(H).parameters:{},nt=Q(P)+H.length,Ut=new Xo(H,be,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,je(T),Vi(T),T.component??T._loadedComponent??null,T,B(P),nt,it(T));ne=(0,ge.of)({snapshot:Ut,consumedSegments:[],remainingSegments:[]})}else ne=ta(P,T,H,R).pipe((0,Ne.U)(({matched:be,consumedSegments:nt,remainingSegments:Ut,parameters:rn})=>{if(!be)return null;const Kn=Q(P)+nt.length;return{snapshot:new Xo(nt,rn,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,je(T),Vi(T),T.component??T._loadedComponent??null,T,B(P),Kn,it(T)),consumedSegments:nt,remainingSegments:Ut}}));return ne.pipe((0,$e.w)(be=>{if(null===be)return(0,ge.of)(null);const{snapshot:nt,consumedSegments:Ut,remainingSegments:rn}=be;R=T._injector??R;const Kn=T._loadedInjector??R,Or=function gl(w){return w.children?w.children:w.loadChildren?w._loadedRoutes:[]}(T),{segmentGroup:hr,slicedSegments:uo}=Ws(P,Ut,rn,Or.filter(Do=>void 0===Do.redirectTo));if(0===uo.length&&hr.hasChildren())return this.processChildren(Kn,Or,hr).pipe((0,Ne.U)(Do=>null===Do?null:[new Cr(nt,Do)]));if(0===Or.length&&0===uo.length)return(0,ge.of)([new Cr(nt,[])]);const Ho=Vi(T)===J;return this.processSegment(Kn,Or,hr,uo,Ho?wn:J).pipe((0,Ne.U)(Do=>null===Do?null:[new Cr(nt,Do)]))}))}}function Kc(w){const R=w.value.routeConfig;return R&&""===R.path&&void 0===R.redirectTo}function O(w){const R=[],T=new Set;for(const P of w){if(!Kc(P)){R.push(P);continue}const H=R.find(J=>P.value.routeConfig===J.value.routeConfig);void 0!==H?(H.children.push(...P.children),T.add(H)):R.push(P)}for(const P of T){const H=O(P.children);R.push(new Cr(P.value,H))}return R.filter(P=>!T.has(P))}function B(w){let R=w;for(;R._sourceSegment;)R=R._sourceSegment;return R}function Q(w){let R=w,T=R._segmentIndexShift??0;for(;R._sourceSegment;)R=R._sourceSegment,T+=R._segmentIndexShift??0;return T-1}function je(w){return w.data||{}}function it(w){return w.resolve||{}}function U(w){return"string"==typeof w.title||null===w.title}function C(w){return(0,$e.w)(R=>{const T=w(R);return T?(0,K.D)(T).pipe((0,Ne.U)(()=>R)):(0,ge.of)(R)})}const V=new a.OlP("ROUTES");let Xe=(()=>{class w{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,a.f3M)(a.Sil)}loadComponent(T){if(this.componentLoaders.get(T))return this.componentLoaders.get(T);if(T._loadedComponent)return(0,ge.of)(T._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(T);const P=wr(T.loadComponent()).pipe((0,Ne.U)(ai),(0,Qe.b)(J=>{this.onLoadEndListener&&this.onLoadEndListener(T),T._loadedComponent=J}),tn(()=>{this.componentLoaders.delete(T)})),H=new Ri(P,()=>new Ie.x).pipe(ui());return this.componentLoaders.set(T,H),H}loadChildren(T,P){if(this.childrenLoaders.get(P))return this.childrenLoaders.get(P);if(P._loadedRoutes)return(0,ge.of)({routes:P._loadedRoutes,injector:P._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(P);const J=this.loadModuleFactoryOrRoutes(P.loadChildren).pipe((0,Ne.U)(be=>{this.onLoadEndListener&&this.onLoadEndListener(P);let nt,Ut,rn=!1;Array.isArray(be)?Ut=be:(nt=be.create(T).injector,Ut=Dr(nt.get(V,[],a.XFs.Self|a.XFs.Optional)));return{routes:Ut.map(Ul),injector:nt}}),tn(()=>{this.childrenLoaders.delete(P)})),ne=new Ri(J,()=>new Ie.x).pipe(ui());return this.childrenLoaders.set(P,ne),ne}loadModuleFactoryOrRoutes(T){return wr(T()).pipe((0,Ne.U)(ai),(0,Zt.z)(P=>P instanceof a.YKP||Array.isArray(P)?(0,ge.of)(P):(0,K.D)(this.compiler.compileModuleAsync(P))))}}return w.\u0275fac=function(T){return new(T||w)},w.\u0275prov=a.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})();function ai(w){return function sn(w){return w&&"object"==typeof w&&"default"in w}(w)?w.default:w}let yr=(()=>{class w{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new Ie.x,this.configLoader=(0,a.f3M)(Xe),this.environmentInjector=(0,a.f3M)(a.lqb),this.urlSerializer=(0,a.f3M)(ts),this.rootContexts=(0,a.f3M)(No),this.navigationId=0,this.afterPreactivation=()=>(0,ge.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=H=>this.events.next(new kr(H)),this.configLoader.onLoadStartListener=H=>this.events.next(new Nl(H))}complete(){this.transitions?.complete()}handleNavigationRequest(T){const P=++this.navigationId;this.transitions?.next({...this.transitions.value,...T,id:P})}setupNavigations(T){return this.transitions=new Se.X({id:0,targetPageId:0,currentUrlTree:T.currentUrlTree,currentRawUrl:T.currentUrlTree,extractedUrl:T.urlHandlingStrategy.extract(T.currentUrlTree),urlAfterRedirects:T.urlHandlingStrategy.extract(T.currentUrlTree),rawUrl:T.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:bs,restoredState:null,currentSnapshot:T.routerState.snapshot,targetSnapshot:null,currentRouterState:T.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,Rt.h)(P=>0!==P.id),(0,Ne.U)(P=>({...P,extractedUrl:T.urlHandlingStrategy.extract(P.rawUrl)})),(0,$e.w)(P=>{let H=!1,J=!1;return(0,ge.of)(P).pipe((0,Qe.b)(ne=>{this.currentNavigation={id:ne.id,initialUrl:ne.rawUrl,extractedUrl:ne.extractedUrl,trigger:ne.source,extras:ne.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,$e.w)(ne=>{const be=T.browserUrlTree.toString(),nt=!T.navigated||ne.extractedUrl.toString()!==be||be!==T.currentUrlTree.toString();if(!nt&&"reload"!==(ne.extras.onSameUrlNavigation??T.onSameUrlNavigation)){const rn="";return this.events.next(new _o(ne.id,T.serializeUrl(P.rawUrl),rn,0)),T.rawUrlTree=ne.rawUrl,ne.resolve(null),Mt.E}if(T.urlHandlingStrategy.shouldProcessUrl(ne.rawUrl))return ba(ne.source)&&(T.browserUrlTree=ne.extractedUrl),(0,ge.of)(ne).pipe((0,$e.w)(rn=>{const Kn=this.transitions?.getValue();return this.events.next(new Po(rn.id,this.urlSerializer.serialize(rn.extractedUrl),rn.source,rn.restoredState)),Kn!==this.transitions?.getValue()?Mt.E:Promise.resolve(rn)}),function ra(w,R,T,P){return(0,$e.w)(H=>function ao(w,R,T,P,H){return new Mo(w,R,T,P,H).apply()}(w,R,T,H.extractedUrl,P).pipe((0,Ne.U)(J=>({...H,urlAfterRedirects:J}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,T.config),(0,Qe.b)(rn=>{this.currentNavigation={...this.currentNavigation,finalUrl:rn.urlAfterRedirects},P.urlAfterRedirects=rn.urlAfterRedirects}),function un(w,R,T,P,H){return(0,Zt.z)(J=>function Ei(w,R,T,P,H,J,ne="emptyOnly"){return new hc(w,R,T,P,H,ne,J).recognize().pipe((0,$e.w)(be=>null===be?function Ds(w){return new Je.y(R=>R.error(w))}(new Er):(0,ge.of)(be)))}(w,R,T,J.urlAfterRedirects,P.serialize(J.urlAfterRedirects),P,H).pipe((0,Ne.U)(ne=>({...J,targetSnapshot:ne}))))}(this.environmentInjector,this.rootComponentType,T.config,this.urlSerializer,T.paramsInheritanceStrategy),(0,Qe.b)(rn=>{if(P.targetSnapshot=rn.targetSnapshot,"eager"===T.urlUpdateStrategy){if(!rn.extras.skipLocationChange){const Or=T.urlHandlingStrategy.merge(rn.urlAfterRedirects,rn.rawUrl);T.setBrowserUrl(Or,rn)}T.browserUrlTree=rn.urlAfterRedirects}const Kn=new ma(rn.id,this.urlSerializer.serialize(rn.extractedUrl),this.urlSerializer.serialize(rn.urlAfterRedirects),rn.targetSnapshot);this.events.next(Kn)}));if(nt&&T.urlHandlingStrategy.shouldProcessUrl(T.rawUrlTree)){const{id:rn,extractedUrl:Kn,source:Or,restoredState:hr,extras:uo}=ne,Ho=new Po(rn,this.urlSerializer.serialize(Kn),Or,hr);this.events.next(Ho);const Do=Bl(Kn,this.rootComponentType).snapshot;return P={...ne,targetSnapshot:Do,urlAfterRedirects:Kn,extras:{...uo,skipLocationChange:!1,replaceUrl:!1}},(0,ge.of)(P)}{const rn="";return this.events.next(new _o(ne.id,T.serializeUrl(P.extractedUrl),rn,1)),T.rawUrlTree=ne.rawUrl,ne.resolve(null),Mt.E}}),(0,Qe.b)(ne=>{const be=new Vs(ne.id,this.urlSerializer.serialize(ne.extractedUrl),this.urlSerializer.serialize(ne.urlAfterRedirects),ne.targetSnapshot);this.events.next(be)}),(0,Ne.U)(ne=>P={...ne,guards:Yr(ne.targetSnapshot,ne.currentSnapshot,this.rootContexts)}),function xs(w,R){return(0,Zt.z)(T=>{const{targetSnapshot:P,currentSnapshot:H,guards:{canActivateChecks:J,canDeactivateChecks:ne}}=T;return 0===ne.length&&0===J.length?(0,ge.of)({...T,guardsResult:!0}):function pr(w,R,T,P){return(0,K.D)(w).pipe((0,Zt.z)(H=>function Os(w,R,T,P,H){const J=R&&R.routeConfig?R.routeConfig.canDeactivate:null;if(!J||0===J.length)return(0,ge.of)(!0);const ne=J.map(be=>{const nt=ea(R)??H,Ut=yo(be,nt);return wr(function hl(w){return w&&mn(w.canDeactivate)}(Ut)?Ut.canDeactivate(w,R,T,P):nt.runInContext(()=>Ut(w,R,T,P))).pipe(Me())});return(0,ge.of)(ne).pipe(Ki())}(H.component,H.route,T,R,P)),Me(H=>!0!==H,!0))}(ne,P,H,w).pipe((0,Zt.z)(be=>be&&function Ba(w){return"boolean"==typeof w}(be)?function zl(w,R,T,P){return(0,K.D)(R).pipe(qe(H=>(0,_t.z)(function Wt(w,R){return null!==w&&R&&R(new cs(w)),(0,ge.of)(!0)}(H.route.parent,P),function ro(w,R){return null!==w&&R&&R(new Di(w)),(0,ge.of)(!0)}(H.route,P),function ya(w,R,T){const P=R[R.length-1],J=R.slice(0,R.length-1).reverse().map(ne=>function dl(w){const R=w.routeConfig?w.routeConfig.canActivateChild:null;return R&&0!==R.length?{node:w,guards:R}:null}(ne)).filter(ne=>null!==ne).map(ne=>ke(()=>{const be=ne.guards.map(nt=>{const Ut=ea(ne.node)??T,rn=yo(nt,Ut);return wr(function Ui(w){return w&&mn(w.canActivateChild)}(rn)?rn.canActivateChild(P,w):Ut.runInContext(()=>rn(P,w))).pipe(Me())});return(0,ge.of)(be).pipe(Ki())}));return(0,ge.of)(J).pipe(Ki())}(w,H.path,T),function bo(w,R,T){const P=R.routeConfig?R.routeConfig.canActivate:null;if(!P||0===P.length)return(0,ge.of)(!0);const H=P.map(J=>ke(()=>{const ne=ea(R)??T,be=yo(J,ne);return wr(function cc(w){return w&&mn(w.canActivate)}(be)?be.canActivate(R,w):ne.runInContext(()=>be(R,w))).pipe(Me())}));return(0,ge.of)(H).pipe(Ki())}(w,H.route,T))),Me(H=>!0!==H,!0))}(P,J,w,R):(0,ge.of)(be)),(0,Ne.U)(be=>({...T,guardsResult:be})))})}(this.environmentInjector,ne=>this.events.next(ne)),(0,Qe.b)(ne=>{if(P.guardsResult=ne.guardsResult,vr(ne.guardsResult))throw jd(0,ne.guardsResult);const be=new ga(ne.id,this.urlSerializer.serialize(ne.extractedUrl),this.urlSerializer.serialize(ne.urlAfterRedirects),ne.targetSnapshot,!!ne.guardsResult);this.events.next(be)}),(0,Rt.h)(ne=>!!ne.guardsResult||(T.restoreHistory(ne),this.cancelNavigationTransition(ne,"",3),!1)),C(ne=>{if(ne.guards.canActivateChecks.length)return(0,ge.of)(ne).pipe((0,Qe.b)(be=>{const nt=new Oo(be.id,this.urlSerializer.serialize(be.extractedUrl),this.urlSerializer.serialize(be.urlAfterRedirects),be.targetSnapshot);this.events.next(nt)}),(0,$e.w)(be=>{let nt=!1;return(0,ge.of)(be).pipe(function si(w,R){return(0,Zt.z)(T=>{const{targetSnapshot:P,guards:{canActivateChecks:H}}=T;if(!H.length)return(0,ge.of)(T);let J=0;return(0,K.D)(H).pipe(qe(ne=>function Gt(w,R,T,P){const H=w.routeConfig,J=w._resolve;return void 0!==H?.title&&!U(H)&&(J[Mn]=H.title),function Gn(w,R,T,P){const H=function Ln(w){return[...Object.keys(w),...Object.getOwnPropertySymbols(w)]}(w);if(0===H.length)return(0,ge.of)({});const J={};return(0,K.D)(H).pipe((0,Zt.z)(ne=>function ur(w,R,T,P){const H=ea(R)??P,J=yo(w,H);return wr(J.resolve?J.resolve(R,T):H.runInContext(()=>J(R,T)))}(w[ne],R,T,P).pipe(Me(),(0,Qe.b)(be=>{J[ne]=be}))),pi(1),(0,jn.h)(J),At(ne=>et(ne)?Mt.E:ze(ne)))}(J,w,R,P).pipe((0,Ne.U)(ne=>(w._resolvedData=ne,w.data=rl(w,T).resolve,H&&U(H)&&(w.data[Mn]=H.title),null)))}(ne.route,P,w,R)),(0,Qe.b)(()=>J++),pi(1),(0,Zt.z)(ne=>J===H.length?(0,ge.of)(T):Mt.E))})}(T.paramsInheritanceStrategy,this.environmentInjector),(0,Qe.b)({next:()=>nt=!0,complete:()=>{nt||(T.restoreHistory(be),this.cancelNavigationTransition(be,"",2))}}))}),(0,Qe.b)(be=>{const nt=new Sr(be.id,this.urlSerializer.serialize(be.extractedUrl),this.urlSerializer.serialize(be.urlAfterRedirects),be.targetSnapshot);this.events.next(nt)}))}),C(ne=>{const be=nt=>{const Ut=[];nt.routeConfig?.loadComponent&&!nt.routeConfig._loadedComponent&&Ut.push(this.configLoader.loadComponent(nt.routeConfig).pipe((0,Qe.b)(rn=>{nt.component=rn}),(0,Ne.U)(()=>{})));for(const rn of nt.children)Ut.push(...be(rn));return Ut};return(0,Oe.a)(be(ne.targetSnapshot.root)).pipe(kt(),(0,mt.q)(1))}),C(()=>this.afterPreactivation()),(0,Ne.U)(ne=>{const be=function Ld(w,R,T){const P=La(w,R._root,T?T._root:void 0);return new Fa(P,R)}(T.routeReuseStrategy,ne.targetSnapshot,ne.currentRouterState);return P={...ne,targetRouterState:be}}),(0,Qe.b)(ne=>{T.currentUrlTree=ne.urlAfterRedirects,T.rawUrlTree=T.urlHandlingStrategy.merge(ne.urlAfterRedirects,ne.rawUrl),T.routerState=ne.targetRouterState,"deferred"===T.urlUpdateStrategy&&(ne.extras.skipLocationChange||T.setBrowserUrl(T.rawUrlTree,ne),T.browserUrlTree=ne.urlAfterRedirects)}),((w,R,T)=>(0,Ne.U)(P=>(new lc(R,P.targetRouterState,P.currentRouterState,T).activate(w),P)))(this.rootContexts,T.routeReuseStrategy,ne=>this.events.next(ne)),(0,mt.q)(1),(0,Qe.b)({next:ne=>{H=!0,this.lastSuccessfulNavigation=this.currentNavigation,T.navigated=!0,this.events.next(new Bi(ne.id,this.urlSerializer.serialize(ne.extractedUrl),this.urlSerializer.serialize(T.currentUrlTree))),T.titleStrategy?.updateTitle(ne.targetRouterState.snapshot),ne.resolve(!0)},complete:()=>{H=!0}}),tn(()=>{H||J||this.cancelNavigationTransition(P,"",1),this.currentNavigation?.id===P.id&&(this.currentNavigation=null)}),At(ne=>{if(J=!0,Uu(ne)){Gl(ne)||(T.navigated=!0,T.restoreHistory(P,!0));const be=new Gs(P.id,this.urlSerializer.serialize(P.extractedUrl),ne.message,ne.cancellationCode);if(this.events.next(be),Gl(ne)){const nt=T.urlHandlingStrategy.merge(ne.url,T.rawUrlTree),Ut={skipLocationChange:P.extras.skipLocationChange,replaceUrl:"eager"===T.urlUpdateStrategy||ba(P.source)};T.scheduleNavigation(nt,bs,null,Ut,{resolve:P.resolve,reject:P.reject,promise:P.promise})}else P.resolve(!1)}else{T.restoreHistory(P,!0);const be=new kn(P.id,this.urlSerializer.serialize(P.extractedUrl),ne,P.targetSnapshot??void 0);this.events.next(be);try{P.resolve(T.errorHandler(ne))}catch(nt){P.reject(nt)}}return Mt.E}))}))}cancelNavigationTransition(T,P,H){const J=new Gs(T.id,this.urlSerializer.serialize(T.extractedUrl),P,H);this.events.next(J),T.resolve(!1)}}return w.\u0275fac=function(T){return new(T||w)},w.\u0275prov=a.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})();function ba(w){return w!==bs}let Jr=(()=>{class w{buildTitle(T){let P,H=T.root;for(;void 0!==H;)P=this.getResolvedTitleForRoute(H)??P,H=H.children.find(J=>J.outlet===wn);return P}getResolvedTitleForRoute(T){return T.data[Mn]}}return w.\u0275fac=function(T){return new(T||w)},w.\u0275prov=a.Yz7({token:w,factory:function(){return(0,a.f3M)(lo)},providedIn:"root"}),w})(),lo=(()=>{class w extends Jr{constructor(T){super(),this.title=T}updateTitle(T){const P=this.buildTitle(T);void 0!==P&&this.title.setTitle(P)}}return w.\u0275fac=function(T){return new(T||w)(a.LFG(Es.Dx))},w.\u0275prov=a.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})(),Wl=(()=>{class w{}return w.\u0275fac=function(T){return new(T||w)},w.\u0275prov=a.Yz7({token:w,factory:function(){return(0,a.f3M)(qc)},providedIn:"root"}),w})();class sa{shouldDetach(R){return!1}store(R,T){}shouldAttach(R){return!1}retrieve(R){return null}shouldReuseRoute(R,T){return R.routeConfig===T.routeConfig}}let qc=(()=>{class w extends sa{}return w.\u0275fac=function(){let R;return function(P){return(R||(R=a.n5z(w)))(P||w)}}(),w.\u0275prov=a.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})();const pc=new a.OlP("",{providedIn:"root",factory:()=>({})});let Xc=(()=>{class w{}return w.\u0275fac=function(T){return new(T||w)},w.\u0275prov=a.Yz7({token:w,factory:function(){return(0,a.f3M)(Qc)},providedIn:"root"}),w})(),Qc=(()=>{class w{shouldProcessUrl(T){return!0}extract(T){return T}merge(T,P){return T}}return w.\u0275fac=function(T){return new(T||w)},w.\u0275prov=a.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})();function xo(w){throw w}function ws(w,R,T){return R.parse("/")}const Ys={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},ko={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Ji=(()=>{class w{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,a.f3M)(a.c2e),this.isNgZoneEnabled=!1,this.options=(0,a.f3M)(pc,{optional:!0})||{},this.errorHandler=this.options.errorHandler||xo,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||ws,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,a.f3M)(Xc),this.routeReuseStrategy=(0,a.f3M)(Wl),this.urlCreationStrategy=(0,a.f3M)(Us),this.titleStrategy=(0,a.f3M)(Jr),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Dr((0,a.f3M)(V,{optional:!0})??[]),this.navigationTransitions=(0,a.f3M)(yr),this.urlSerializer=(0,a.f3M)(ts),this.location=(0,a.f3M)(We.Ye),this.isNgZoneEnabled=(0,a.f3M)(a.R0b)instanceof a.R0b&&a.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Rr,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Bl(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(T=>{this.lastSuccessfulId=T.id,this.currentPageId=T.targetPageId},T=>{this.console.warn(`Unhandled Navigation Error: ${T}`)})}resetRootComponentType(T){this.routerState.root.component=T,this.navigationTransitions.rootComponentType=T}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const T=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),bs,T)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(T=>{const P="popstate"===T.type?"popstate":"hashchange";"popstate"===P&&setTimeout(()=>{this.navigateToSyncWithBrowser(T.url,P,T.state)},0)}))}navigateToSyncWithBrowser(T,P,H){const J={replaceUrl:!0},ne=H?.navigationId?H:null;if(H){const nt={...H};delete nt.navigationId,delete nt.\u0275routerPageId,0!==Object.keys(nt).length&&(J.state=nt)}const be=this.parseUrl(T);this.scheduleNavigation(be,P,ne,J)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(T){this.config=T.map(Ul),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(T,P={}){const{relativeTo:H,queryParams:J,fragment:ne,queryParamsHandling:be,preserveFragment:nt}=P,Ut=nt?this.currentUrlTree.fragment:ne;let rn=null;switch(be){case"merge":rn={...this.currentUrlTree.queryParams,...J};break;case"preserve":rn=this.currentUrlTree.queryParams;break;default:rn=J||null}return null!==rn&&(rn=this.removeEmptyProps(rn)),this.urlCreationStrategy.createUrlTree(H,this.routerState,this.currentUrlTree,T,rn,Ut??null)}navigateByUrl(T,P={skipLocationChange:!1}){const H=vr(T)?T:this.parseUrl(T),J=this.urlHandlingStrategy.merge(H,this.rawUrlTree);return this.scheduleNavigation(J,bs,null,P)}navigate(T,P={skipLocationChange:!1}){return function fs(w){for(let R=0;R<w.length;R++){const T=w[R];if(null==T)throw new a.vHH(4008,false)}}(T),this.navigateByUrl(this.createUrlTree(T,P),P)}serializeUrl(T){return this.urlSerializer.serialize(T)}parseUrl(T){let P;try{P=this.urlSerializer.parse(T)}catch(H){P=this.malformedUriErrorHandler(H,this.urlSerializer,T)}return P}isActive(T,P){let H;if(H=!0===P?{...Ys}:!1===P?{...ko}:P,vr(T))return Wi(this.currentUrlTree,T,H);const J=this.parseUrl(T);return Wi(this.currentUrlTree,J,H)}removeEmptyProps(T){return Object.keys(T).reduce((P,H)=>{const J=T[H];return null!=J&&(P[H]=J),P},{})}scheduleNavigation(T,P,H,J,ne){if(this.disposed)return Promise.resolve(!1);let be,nt,Ut,rn;return ne?(be=ne.resolve,nt=ne.reject,Ut=ne.promise):Ut=new Promise((Kn,Or)=>{be=Kn,nt=Or}),rn="computed"===this.canceledNavigationResolution?H&&H.\u0275routerPageId?H.\u0275routerPageId:J.replaceUrl||J.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:rn,source:P,restoredState:H,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:T,extras:J,resolve:be,reject:nt,promise:Ut,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Ut.catch(Kn=>Promise.reject(Kn))}setBrowserUrl(T,P){const H=this.urlSerializer.serialize(T),J={...P.extras.state,...this.generateNgRouterState(P.id,P.targetPageId)};this.location.isCurrentPathEqualTo(H)||P.extras.replaceUrl?this.location.replaceState(H,"",J):this.location.go(H,"",J)}restoreHistory(T,P=!1){if("computed"===this.canceledNavigationResolution){const H=this.currentPageId-T.targetPageId;"popstate"!==T.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.getCurrentNavigation()?.finalUrl||0===H?this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===H&&(this.resetState(T),this.browserUrlTree=T.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(H)}else"replace"===this.canceledNavigationResolution&&(P&&this.resetState(T),this.resetUrlToCurrentUrlTree())}resetState(T){this.routerState=T.currentRouterState,this.currentUrlTree=T.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,T.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(T,P){return"computed"===this.canceledNavigationResolution?{navigationId:T,\u0275routerPageId:P}:{navigationId:T}}}return w.\u0275fac=function(T){return new(T||w)},w.\u0275prov=a.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})();class Go{}let co=(()=>{class w{constructor(T,P,H,J,ne){this.router=T,this.injector=H,this.preloadingStrategy=J,this.loader=ne}setUpPreloading(){this.subscription=this.router.events.pipe((0,Rt.h)(T=>T instanceof Bi),qe(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(T,P){const H=[];for(const J of P){J.providers&&!J._injector&&(J._injector=(0,a.MMx)(J.providers,T,`Route: ${J.path}`));const ne=J._injector??T,be=J._loadedInjector??ne;(J.loadChildren&&!J._loadedRoutes&&void 0===J.canLoad||J.loadComponent&&!J._loadedComponent)&&H.push(this.preloadConfig(ne,J)),(J.children||J._loadedRoutes)&&H.push(this.processRoutes(be,J.children??J._loadedRoutes))}return(0,K.D)(H).pipe((0,Si.J)())}preloadConfig(T,P){return this.preloadingStrategy.preload(P,()=>{let H;H=P.loadChildren&&void 0===P.canLoad?this.loader.loadChildren(T,P):(0,ge.of)(null);const J=H.pipe((0,Zt.z)(ne=>null===ne?(0,ge.of)(void 0):(P._loadedRoutes=ne.routes,P._loadedInjector=ne.injector,this.processRoutes(ne.injector??T,ne.routes))));if(P.loadComponent&&!P._loadedComponent){const ne=this.loader.loadComponent(P);return(0,K.D)([J,ne]).pipe((0,Si.J)())}return J})}}return w.\u0275fac=function(T){return new(T||w)(a.LFG(Ji),a.LFG(a.Sil),a.LFG(a.lqb),a.LFG(Go),a.LFG(Xe))},w.\u0275prov=a.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})();const _l=new a.OlP("");let br=(()=>{class w{constructor(T,P,H,J,ne={}){this.urlSerializer=T,this.transitions=P,this.viewportScroller=H,this.zone=J,this.options=ne,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},ne.scrollPositionRestoration=ne.scrollPositionRestoration||"disabled",ne.anchorScrolling=ne.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(T=>{T instanceof Po?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=T.navigationTrigger,this.restoredId=T.restoredState?T.restoredState.navigationId:0):T instanceof Bi&&(this.lastId=T.id,this.scheduleScrollEvent(T,this.urlSerializer.parse(T.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(T=>{T instanceof Fl&&(T.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(T.position):T.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(T.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(T,P){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Fl(T,"popstate"===this.lastSource?this.store[this.restoredId]:null,P))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return w.\u0275fac=function(T){a.$Z()},w.\u0275prov=a.Yz7({token:w,factory:w.\u0275fac}),w})();var Ir=(()=>((Ir=Ir||{})[Ir.COMPLETE=0]="COMPLETE",Ir[Ir.FAILED=1]="FAILED",Ir[Ir.REDIRECTING=2]="REDIRECTING",Ir))();const aa=!1;function ps(w,R){return{\u0275kind:w,\u0275providers:R}}const vl=new a.OlP("",{providedIn:"root",factory:()=>!1});function Ha(){const w=(0,a.f3M)(a.zs3);return R=>{const T=w.get(a.z2F);if(R!==T.components[0])return;const P=w.get(Ji),H=w.get(yl);1===w.get(dn)&&P.initialNavigation(),w.get(Yu,null,a.XFs.Optional)?.setUpPreloading(),w.get(_l,null,a.XFs.Optional)?.init(),P.resetRootComponentType(T.componentTypes[0]),H.closed||(H.next(),H.complete(),H.unsubscribe())}}const yl=new a.OlP(aa?"bootstrap done indicator":"",{factory:()=>new Ie.x}),dn=new a.OlP(aa?"initial navigation":"",{providedIn:"root",factory:()=>1});function Zr(){let w=[];return w=aa?[{provide:a.Xts,multi:!0,useFactory:()=>{const R=(0,a.f3M)(Ji);return()=>R.events.subscribe(T=>{console.group?.(`Router Event: ${T.constructor.name}`),console.log(function vo(w){if(!("type"in w))return`Unknown Router Event: ${w.constructor.name}`;switch(w.type){case 14:return`ActivationEnd(path: '${w.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${w.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${w.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${w.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${w.id}, url: '${w.url}', urlAfterRedirects: '${w.urlAfterRedirects}', state: ${w.state}, shouldActivate: ${w.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${w.id}, url: '${w.url}', urlAfterRedirects: '${w.urlAfterRedirects}', state: ${w.state})`;case 2:return`NavigationCancel(id: ${w.id}, url: '${w.url}')`;case 16:return`NavigationSkipped(id: ${w.id}, url: '${w.url}')`;case 1:return`NavigationEnd(id: ${w.id}, url: '${w.url}', urlAfterRedirects: '${w.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${w.id}, url: '${w.url}', error: ${w.error})`;case 0:return`NavigationStart(id: ${w.id}, url: '${w.url}')`;case 6:return`ResolveEnd(id: ${w.id}, url: '${w.url}', urlAfterRedirects: '${w.urlAfterRedirects}', state: ${w.state})`;case 5:return`ResolveStart(id: ${w.id}, url: '${w.url}', urlAfterRedirects: '${w.urlAfterRedirects}', state: ${w.state})`;case 10:return`RouteConfigLoadEnd(path: ${w.route.path})`;case 9:return`RouteConfigLoadStart(path: ${w.route.path})`;case 4:return`RoutesRecognized(id: ${w.id}, url: '${w.url}', urlAfterRedirects: '${w.urlAfterRedirects}', state: ${w.state})`;case 15:return`Scroll(anchor: '${w.anchor}', position: '${w.position?`${w.position[0]}, ${w.position[1]}`:null}')`}}(T)),console.log(T),console.groupEnd?.()})}}]:[],ps(1,w)}const Yu=new a.OlP(aa?"router preloader":"");function bl(w){return ps(0,[{provide:Yu,useExisting:co},{provide:Go,useExisting:w}])}const Zn=!1,Tl=new a.OlP(Zn?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),Zu=[We.Ye,{provide:ts,useClass:Ia},Ji,No,{provide:qo,useFactory:function af(w){return w.routerState.root},deps:[Ji]},Xe,Zn?{provide:vl,useValue:!0}:[]];function _c(){return new a.PXZ("Router",Ji)}let Vo=(()=>{class w{constructor(T){}static forRoot(T,P){return{ngModule:w,providers:[Zu,Zn&&P?.enableTracing?Zr().\u0275providers:[],{provide:V,multi:!0,useValue:T},{provide:Tl,useFactory:Yl,deps:[[Ji,new a.FiY,new a.tp0]]},{provide:pc,useValue:P||{}},P?.useHash?{provide:We.S$,useClass:We.Do}:{provide:We.S$,useClass:We.b0},{provide:_l,useFactory:()=>{const w=(0,a.f3M)(We.EM),R=(0,a.f3M)(a.R0b),T=(0,a.f3M)(pc),P=(0,a.f3M)(yr),H=(0,a.f3M)(ts);return T.scrollOffset&&w.setOffset(T.scrollOffset),new br(H,P,w,R,T)}},P?.preloadingStrategy?bl(P.preloadingStrategy).\u0275providers:[],{provide:a.PXZ,multi:!0,useFactory:_c},P?.initialNavigation?za(P):[],[{provide:Ta,useFactory:Ha},{provide:a.tb,multi:!0,useExisting:Ta}]]}}static forChild(T){return{ngModule:w,providers:[{provide:V,multi:!0,useValue:T}]}}}return w.\u0275fac=function(T){return new(T||w)(a.LFG(Tl,8))},w.\u0275mod=a.oAB({type:w}),w.\u0275inj=a.cJS({imports:[Qo]}),w})();function Yl(w){if(Zn&&w)throw new a.vHH(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function za(w){return["disabled"===w.initialNavigation?ps(3,[{provide:a.ip1,multi:!0,useFactory:()=>{const R=(0,a.f3M)(Ji);return()=>{R.setUpLocationChangeListener()}}},{provide:dn,useValue:2}]).\u0275providers:[],"enabledBlocking"===w.initialNavigation?ps(2,[{provide:dn,useValue:0},{provide:a.ip1,multi:!0,deps:[a.zs3],useFactory:R=>{const T=R.get(We.V_,Promise.resolve());return()=>T.then(()=>new Promise(P=>{const H=R.get(Ji),J=R.get(yl);(function mr(w,R){w.events.pipe((0,Rt.h)(T=>T instanceof Bi||T instanceof Gs||T instanceof kn||T instanceof _o),(0,Ne.U)(T=>T instanceof Bi||T instanceof _o?Ir.COMPLETE:T instanceof Gs&&(0===T.code||1===T.code)?Ir.REDIRECTING:Ir.FAILED),(0,Rt.h)(T=>T!==Ir.REDIRECTING),(0,mt.q)(1)).subscribe(()=>{R()})})(H,()=>{P(!0)}),R.get(yr).afterPreactivation=()=>(P(!0),J.closed?(0,ge.of)(void 0):J),H.initialNavigation()}))}}]).\u0275providers:[]]}const Ta=new a.OlP(Zn?"Router Initializer":"")},9694:(pn,Ze,te)=>{te.d(Ze,{HLk:()=>Gt,ITp:()=>ha,sI:()=>es,Pts:()=>Me,lFy:()=>Si,D9c:()=>At,UG5:()=>no,JO:()=>Ko,YRQ:()=>Oa,o8H:()=>cs,EZf:()=>cn,RjQ:()=>fo,TfJ:()=>Gr,XHp:()=>Cr,VIe:()=>le,pN9:()=>qe,DOm:()=>is});var a=te(1571),K=te(6682),ge=te(7579),Se=te(6063);class xe extends ge.x{constructor(C=1/0,u=1/0,V=Se.l){super(),this._bufferSize=C,this._windowTime=u,this._timestampProvider=V,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=u===1/0,this._bufferSize=Math.max(1,C),this._windowTime=Math.max(1,u)}next(C){const{isStopped:u,_buffer:V,_infiniteTimeWindow:Xe,_timestampProvider:sn,_windowTime:ai}=this;u||(V.push(C),!Xe&&V.push(sn.now()+ai)),this._trimBuffer(),super.next(C)}_subscribe(C){this._throwIfClosed(),this._trimBuffer();const u=this._innerSubscribe(C),{_infiniteTimeWindow:V,_buffer:Xe}=this,sn=Xe.slice();for(let ai=0;ai<sn.length&&!C.closed;ai+=V?1:2)C.next(sn[ai]);return this._checkFinalizedStatuses(C),u}_trimBuffer(){const{_bufferSize:C,_timestampProvider:u,_buffer:V,_infiniteTimeWindow:Xe}=this,sn=(Xe?1:2)*C;if(C<1/0&&sn<V.length&&V.splice(0,V.length-sn),!Xe){const ai=u.now();let qi=0;for(let yr=1;yr<V.length&&V[yr]<=ai;yr+=2)qi=yr;qi&&V.splice(0,qi+1)}}}var Re=te(2722),Oe=te(6895);const _t=["rendererCanvas"];var jt=(()=>{return(U=jt||(jt={})).mouseEnter="mouseEnter",U.mouseExit="mouseExit",U.click="click",U.pointerDown="pointerDown",U.pointerUp="pointerUp",jt;var U})();const _n=new a.OlP("A reference to the raycaster object",{factory:()=>new K.iMs});let ui=(()=>{class U{constructor(){this.raycaster=(0,a.f3M)(_n),this.selected=null,this.enabled=!0,this.groups=[],this.paused=!1,this.maxClickDistance=23,this.nid=U.instanceCnt++,this.onPointerMove=this.onPointerMove.bind(this),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerUp=this.onPointerUp.bind(this)}ngOnDestroy(){this.disable(),this.unsubscribe()}subscribe(){if(!this.canvas)throw new Error("missing canvas");this.canvas.addEventListener("pointermove",this.onPointerMove),this.canvas.addEventListener("pointerdown",this.onPointerDown),this.canvas.addEventListener("pointerup",this.onPointerUp)}unsubscribe(){if(!this.canvas)throw new Error("missing canvas");this.canvas.removeEventListener("pointermove",this.onPointerMove),this.canvas.removeEventListener("pointerdown",this.onPointerDown),this.canvas.removeEventListener("pointerup",this.onPointerUp)}enable(){this.enabled=!0}disable(){this.enabled=!1}pause(){this.paused=!0}resume(){this.paused=!1}get isEnabled(){return this.enabled}init(u,V){this.camera=u,this.canvas=V,this.subscribe()}addEventTarget(u){this.groups.push(u)}removeEventTarget(u){const V=this.groups.indexOf(u);V>=0&&this.groups.splice(V,1)}onPointerMove(u){if(!this.isReady())return;const V=this.getFirstIntersectedGroup(u.layerX,u.layerY,jt.mouseEnter);if((!this.selected||this.selected!==V?.target)&&(this.selected&&(this.selected.host.objRef?.dispatchEvent({type:jt.mouseExit,component:this.selected.host}),this.selected.emitOnMouseExit(),this.selected=null),V&&V.target)){this.selected=V.target;const Xe={type:jt.mouseEnter,component:V.target.host,...V};this.selected.host.objRef?.dispatchEvent(Xe),this.selected.emitOnMouseEnter(Xe)}}onPointerDown(u){if(this.maxClickDistance=u.width,this.pointerDownEvent=u,!this.isReady())return;const V=this.getFirstIntersectedGroup(u.layerX,u.layerY,jt.pointerDown);if(V&&V.target&&V.target.host.objRef){const Xe={type:jt.pointerDown,component:V.target.host,...V};V.target.host.objRef.dispatchEvent(Xe),V.target.emitOnPointerDown(Xe)}}onPointerUp(u){const V=this.pointerDownEvent;if(this.pointerDownEvent=void 0,!this.isReady())return;let Xe=this.getFirstIntersectedGroup(u.layerX,u.layerY,jt.pointerUp);if(Xe&&Xe.target&&Xe.target.host.objRef){const sn={type:jt.pointerUp,component:Xe.target.host,...Xe};Xe.target.host.objRef.dispatchEvent(sn),Xe.target.emitOnPointerUp(sn)}if(!(this.calcPointerDownUpDinstance(u,V)>this.maxClickDistance)&&(Xe=this.getFirstIntersectedGroup(u.layerX,u.layerY,jt.click),Xe&&Xe.target&&Xe.target.host.objRef)){const sn={type:jt.click,component:Xe.target.host,...Xe};Xe.target.host.objRef.dispatchEvent(sn),Xe.target.emitOnClick(sn)}}isReady(u){return!!(this.enabled&&(u||!this.paused)&&this.camera&&this.camera.objRef&&this.groups&&this.groups.length>0)}calcPointerDownUpDinstance(u,V){if(!V)return Number.MAX_VALUE;const Xe=u.layerX-V.layerX,sn=u.layerY-V.layerY;return Math.sqrt(Xe*Xe+sn*sn)}getFirstIntersectedGroup(u,V,Xe){if(!this.camera||!this.canvas||!this.camera.objRef)return;const sn=new K.FM8(u=u/this.canvas.clientWidth*2-1,V=-V/this.canvas.clientHeight*2+1);let ai,qi;this.raycaster.setFromCamera(sn,this.camera.objRef);for(const yr of this.groups){const ba=yr.host.objRef;if(!yr[Xe]||!ba)continue;const Jr=this.raycaster.intersectObject(ba,!0);Jr.length>0&&(!ai||ai.distance>Jr[0].distance)&&(ai=Jr[0],qi=yr)}return qi&&ai?{target:qi,...ai}:void 0}}return U.instanceCnt=0,U.\u0275fac=function(u){return new(u||U)},U.\u0275prov=a.Yz7({token:U,factory:U.\u0275fac}),U})();function Ie(U,C){return function Ri(U){return!(!U||!U.set)}(U)?void 0===C?U:Array.isArray(C)?(U.set(...C),U):U.copy&&C?(U.copy(C),U):void 0!==C?(U.set(C),U):U:C}function Rt(U){return!0===U.__isProxy&&void 0===U.objRef}let Zt=(()=>{class U{set objRef(u){this.applyObjRef(u)}get objRef(){return this._objRef}constructor(){this.autoAddToParent=!0,this.autoDispose=!0}addToParent(){}removeFromParent(){}set threeEvents(u){this.removeEvents(),this.eventListeners=u,this.applyEvents()}get threeEvents(){return this.eventListeners}get onUpdate(){return this.updateEmitter||(this.updateEmitter=new a.vpe),this.updateEmitter}get objRef$(){return this._objRef$||(this._objRef$=new xe(1)),this._objRef$}ngOnInit(){this.objRef||(this.objRef=this.createThreeInstance(this.args))}getType(){throw new Error("derive me")}createThreeInstance(u){return Array.isArray(u)?new(this.getType())(...u):new(this.getType())(u)}ngOnChanges(u){if(!this.objRef||Rt(this.objRef)){u.objRef?.currentValue?this.objRef=u.objRef?.currentValue:this.objRef||(this.objRef=this.createThreeInstance(u.args?.currentValue));for(const V in u)this[V]=u[V].currentValue;this.emitPropertyChanges(u)}else this.emitPropertyChanges(u)}disposeObjRef(){(function We(U){return!(!U||"function"!=typeof U.dispose)})(this.objRef)&&this.objRef.dispose()}ngOnDestroy(){this.removeEvents(),this.removeFromParent(),this.autoDispose&&this.disposeObjRef()}applyObjRef(u){this._objRef!==u&&(this.removeFromParent(),this._objRef=u,this.autoAddToParent&&this.addToParent()),this.emitObjRefChange()}emitObjRefChange(){this._objRef&&!Rt(this._objRef)&&(this._objRef.dispatchEvent?.({type:"loaded",object:this._objRef}),this._objRef$&&this._objRef$.next(this._objRef))}emitPropertyChanges(u){this._objRef&&this._objRef.dispatchEvent?.({type:"changes",changes:u}),this.updateEmitter&&this.updateEmitter.next(u)}removeEvents(){if(this.eventListeners&&this._objRef){for(const u of Object.entries(this.eventListeners))this._objRef.removeEventListener(u[0],u[1]);this.eventListeners=void 0}}applyEvents(){if(this.eventListeners&&this._objRef)for(const u of Object.entries(this.eventListeners))this._objRef.addEventListener(u[0],u[1])}}return U.\u0275fac=function(u){return new(u||U)},U.\u0275cmp=a.Xpm({type:U,selectors:[["th-abs-wrapper"]],inputs:{autoAddToParent:"autoAddToParent",autoDispose:"autoDispose",objRef:"objRef",args:"args",threeEvents:"threeEvents"},outputs:{onUpdate:"onUpdate",objRef$:"objRef$"},features:[a.TTD],decls:0,vars:0,template:function(u,V){},encapsulation:2}),U})(),kt=(()=>{class U extends Zt{constructor(u){super(),this.parent=u}addToParent(){this._objRef&&this.parent.objRef&&(!this._objRef.parent||this._objRef.parent.uuid!==this.parent.objRef.uuid)&&this.parent.objRef.add(this._objRef)}removeFromParent(){this._objRef?.parent?.remove(this._objRef)}applyObjRef(u){(this._objRef!==u||this._objRef?.parent?.uuid!==this.parent.objRef.uuid)&&(this.removeFromParent(),this._objRef=u,this.autoAddToParent&&this.addToParent()),this.emitObjRefChange()}attachToParent(u,V){!this.parent.objRef||u===V&&V?.parent?.uuid===this.parent.objRef.uuid||(V&&V.parent&&V.parent.remove(V),u&&(!u.parent||u.parent&&u.parent.uuid!==this.parent.objRef.uuid)&&this.parent.objRef.add(u))}set lookAt(u){Promise.resolve().then(()=>{this.objRef&&(Array.isArray(u)?this.objRef.lookAt(...u):this.objRef.lookAt(u))})}}return U.\u0275fac=function(u){return new(u||U)(a.Y36(U))},U.\u0275cmp=a.Xpm({type:U,selectors:[["th-abs-object"]],inputs:{lookAt:"lookAt"},features:[a.qOj],decls:0,vars:0,template:function(u,V){},encapsulation:2}),U})(),cn=(()=>{class U extends kt{getType(){return K.Tme}set id(u){this._objRef&&(this._objRef.id=u)}set uuid(u){this._objRef&&(this._objRef.uuid=u)}set name(u){this._objRef&&(this._objRef.name=u)}set type(u){this._objRef&&(this._objRef.type=u)}set children(u){this._objRef&&(this._objRef.children=u)}set up(u){this._objRef&&(this._objRef.up=Ie(this._objRef.up,u))}set position(u){this._objRef&&Ie(this._objRef.position,u)}set rotation(u){this._objRef&&Ie(this._objRef.rotation,u)}set quaternion(u){this._objRef&&Ie(this._objRef.quaternion,u)}set scale(u){this._objRef&&Ie(this._objRef.scale,u)}set modelViewMatrix(u){this._objRef&&Ie(this._objRef.modelViewMatrix,u)}set normalMatrix(u){this._objRef&&Ie(this._objRef.normalMatrix,u)}set matrix(u){this._objRef&&(this._objRef.matrix=Ie(this._objRef.matrix,u))}set matrixWorld(u){this._objRef&&(this._objRef.matrixWorld=Ie(this._objRef.matrixWorld,u))}set matrixAutoUpdate(u){this._objRef&&(this._objRef.matrixAutoUpdate=u)}set matrixWorldAutoUpdate(u){this._objRef&&(this._objRef.matrixWorldAutoUpdate=u)}set matrixWorldNeedsUpdate(u){this._objRef&&(this._objRef.matrixWorldNeedsUpdate=u)}set layers(u){this._objRef&&(this._objRef.layers=Ie(this._objRef.layers,u))}set visible(u){this._objRef&&(this._objRef.visible=u)}set castShadow(u){this._objRef&&(this._objRef.castShadow=u)}set receiveShadow(u){this._objRef&&(this._objRef.receiveShadow=u)}set frustumCulled(u){this._objRef&&(this._objRef.frustumCulled=u)}set renderOrder(u){this._objRef&&(this._objRef.renderOrder=u)}set animations(u){this._objRef&&(this._objRef.animations=u)}set userData(u){this._objRef&&(this._objRef.userData=u)}set customDepthMaterial(u){this._objRef&&(this._objRef.customDepthMaterial=u)}set customDistanceMaterial(u){this._objRef&&(this._objRef.customDistanceMaterial=u)}set onBeforeRender(u){this._objRef&&(this._objRef.onBeforeRender=u)}set onAfterRender(u){this._objRef&&(this._objRef.onAfterRender=u)}constructor(u){super(u)}}return U.\u0275fac=function(u){return new(u||U)(a.Y36(U,4))},U.\u0275cmp=a.Xpm({type:U,selectors:[["th-object3D"]],inputs:{id:"id",uuid:"uuid",name:"name",type:"type",children:"children",up:"up",position:"position",rotation:"rotation",quaternion:"quaternion",scale:"scale",modelViewMatrix:"modelViewMatrix",normalMatrix:"normalMatrix",matrix:"matrix",matrixWorld:"matrixWorld",matrixAutoUpdate:"matrixAutoUpdate",matrixWorldAutoUpdate:"matrixWorldAutoUpdate",matrixWorldNeedsUpdate:"matrixWorldNeedsUpdate",layers:"layers",visible:"visible",castShadow:"castShadow",receiveShadow:"receiveShadow",frustumCulled:"frustumCulled",renderOrder:"renderOrder",animations:"animations",userData:"userData",customDepthMaterial:"customDepthMaterial",customDistanceMaterial:"customDistanceMaterial",onBeforeRender:"onBeforeRender",onAfterRender:"onAfterRender"},features:[a._Bn([]),a.qOj],decls:0,vars:0,template:function(u,V){},encapsulation:2,changeDetection:0}),U})(),Me=(()=>{class U extends cn{getType(){return K.V1s}set matrixWorldInverse(u){this._objRef&&(this._objRef.matrixWorldInverse=Ie(this._objRef.matrixWorldInverse,u))}set projectionMatrix(u){this._objRef&&(this._objRef.projectionMatrix=Ie(this._objRef.projectionMatrix,u))}set projectionMatrixInverse(u){this._objRef&&(this._objRef.projectionMatrixInverse=Ie(this._objRef.projectionMatrixInverse,u))}}return U.\u0275fac=function(){let C;return function(V){return(C||(C=a.n5z(U)))(V||U)}}(),U.\u0275cmp=a.Xpm({type:U,selectors:[["th-camera"]],inputs:{matrixWorldInverse:"matrixWorldInverse",projectionMatrix:"projectionMatrix",projectionMatrixInverse:"projectionMatrixInverse"},features:[a._Bn([{provide:cn,useExisting:(0,a.Gpc)(()=>U)}]),a.qOj],decls:0,vars:0,template:function(u,V){},encapsulation:2,changeDetection:0}),U})(),qe=(()=>{class U extends cn{getType(){return K.xsS}set type(u){this._objRef&&(this._objRef.type=u)}set fog(u){this._objRef&&(this._objRef.fog=u)}set backgroundBlurriness(u){this._objRef&&(this._objRef.backgroundBlurriness=u)}set backgroundIntensity(u){this._objRef&&(this._objRef.backgroundIntensity=u)}set overrideMaterial(u){this._objRef&&(this._objRef.overrideMaterial=u)}set background(u){this._objRef&&(this._objRef.background=Ie(this._objRef.background,u))}set environment(u){this._objRef&&(this._objRef.environment=u)}}return U.\u0275fac=function(){let C;return function(V){return(C||(C=a.n5z(U)))(V||U)}}(),U.\u0275cmp=a.Xpm({type:U,selectors:[["th-scene"]],inputs:{type:"type",fog:"fog",backgroundBlurriness:"backgroundBlurriness",backgroundIntensity:"backgroundIntensity",overrideMaterial:"overrideMaterial",background:"background",environment:"environment"},features:[a._Bn([{provide:cn,useExisting:(0,a.Gpc)(()=>U)}]),a.qOj],decls:0,vars:0,template:function(u,V){},encapsulation:2,changeDetection:0}),U})();const Qe={alpha:!0,antialias:!0,preserveDrawingBuffer:!0};let At=(()=>{class U{get canvas(){return this.rendererParameters?.domElement}constructor(u){this.ngZone=u,this.clock=new K.SUY,this.destroyed$=new ge.x,this.resizeEmitter=new a.vpe,this.beforeRenderEmitter=new a.vpe,this.views=[],this.beforeRender$=this.beforeRenderEmitter.pipe((0,Re.R)(this.destroyed$)),this.resize$=this.resizeEmitter.pipe((0,Re.R)(this.destroyed$))}get renderer(){return this._renderer}ngOnDestroy(){this.resizeObserver&&this.canvas&&this.resizeObserver.unobserve(this.canvas)}initResizeObserver(){this.ngZone.runOutsideAngular(()=>{if(!this.canvas)throw new Error("missing canvas element");this.resize(),this.resizeObserver||(this.resizeObserver=new ResizeObserver(()=>{this.resize()})),this.resizeObserver.observe(this.canvas)})}initRenderer(){this._renderer||(this._renderer=new K.CP7({canvas:this.rendererParameters?.domElement,...Qe}),Object.assign(this._renderer,{...Qe,...this.rendererParameters}),this.resize())}setRenderer(u){this.rendererParameters=u,this.initRenderer(),this.initResizeObserver()}addView(u){this.views.push(u);const V=this.calcRendererSize();V&&this.adjustViewDimensions(u,V.width,V.height)}render(){this.beforeRenderEmitter.emit({engine:this,delta:this.clock.getDelta()});for(const u of this.views)this.renderView(u)}renderView(u){if(!this._renderer)return;const V=u.camera,Xe=u.scene;if(!(V&&Xe&&V.objRef&&Xe.objRef))return;const sn=this._renderer;(function Ne(U){return void 0!==U&&(U.observed||U.observers?.length>0)})(u.onRender)&&this.ngZone.run(()=>u.onRender.emit({renderer:sn,scene:Xe,camera:V})),this.applyRendererParametersFromView(u),u.effectComposer?u.effectComposer.render():this._renderer.render(Xe.objRef,V.objRef)}applyRendererParametersFromView(u){this._renderer&&(u.viewPort&&(u.viewPort instanceof K.Ltg?this._renderer.setViewport(u.viewPort):this._renderer.setViewport(u.viewPort.x,u.viewPort.y,u.viewPort.width,u.viewPort.height)),u.scissor&&(u.scissor instanceof K.Ltg?this._renderer.setScissor(u.scissor):this._renderer.setScissor(u.scissor.x,u.scissor.y,u.scissor.width,u.scissor.height)),void 0!==u.scissorTest&&this._renderer.setScissorTest(u.scissorTest),u.clearColor&&this._renderer.setClearColor(u.clearColor),void 0!==u.clearAlpha&&this._renderer.setClearAlpha(u.clearAlpha),void 0!==u.shadow&&(this._renderer.shadowMap.enabled=!0))}resize(){if(!this._renderer||!this.canvas)return!1;const{width:u,height:V}=this.calcRendererSize();this._renderer.setSize(u,V,!1);for(const Xe of this.views)this.adjustViewDimensions(Xe,u,V);return this.resizeEmitter.emit({width:u,height:V}),!0}calcRendererSize(){if(!this._renderer||!this.canvas)return;const u=window.devicePixelRatio;return{width:(this.canvas.clientWidth??0)*u,height:(this.canvas.clientHeight??0)*u}}adjustViewDimensions(u,V,Xe){u.viewPort||(u.camera&&u.camera.objRef.aspect&&(u.camera.objRef.aspect=V/Xe,u.camera.objRef.updateProjectionMatrix()),u.effectComposer?.setSize(V,Xe))}}return U.\u0275fac=function(u){return new(u||U)(a.LFG(a.R0b))},U.\u0275prov=a.Yz7({token:U,factory:U.\u0275fac}),U})(),xt=(()=>{class U{constructor(u,V){this.engServ=u,this.raycaster=V,this.onRender=new a.vpe}set contentScene(u){u&&(this.scene=u)}set effectComposer(u){this._effectComposer=u,this.configureEffectComposerRenderTarget()}get effectComposer(){return this._effectComposer}set camera(u){this._camera=u,this.initRaycaster()}get camera(){return this._camera}set contentCamera(u){u&&(this.camera=u)}set viewPort(u){this._viewPort=u,this.configureEffectComposerRenderTarget()}get viewPort(){return this._viewPort}ngOnInit(){this.initRaycaster()}initRaycaster(){this.camera&&this.engServ.canvas&&this.raycaster.init(this.camera,this.engServ.canvas)}add(u){}remove(u){}configureEffectComposerRenderTarget(){if(this.viewPort&&this.effectComposer){let u,V;this.viewPort instanceof K.Ltg?(u=this.viewPort.z,V=this.viewPort?.width):(u=this.viewPort.width,V=this.viewPort.height),this.effectComposer.setSize(u,V)}}}return U.\u0275fac=function(u){return new(u||U)(a.Y36(At),a.Y36(ui))},U.\u0275cmp=a.Xpm({type:U,selectors:[["th-view"]],contentQueries:function(u,V,Xe){if(1&u&&(a.Suo(Xe,qe,5),a.Suo(Xe,Me,5)),2&u){let sn;a.iGM(sn=a.CRH())&&(V.contentScene=sn.first),a.iGM(sn=a.CRH())&&(V.contentCamera=sn.first)}},inputs:{scene:"scene",effectComposer:"effectComposer",camera:"camera",shadow:"shadow",viewPort:"viewPort",scissor:"scissor",scissorTest:"scissorTest",clearColor:"clearColor",clearAlpha:"clearAlpha"},outputs:{onRender:"onRender"},features:[a._Bn([{provide:cn,useExisting:(0,a.Gpc)(()=>U)},{provide:_n,useValue:new K.iMs},ui])],decls:0,vars:0,template:function(u,V){},encapsulation:2}),U})(),tn=(()=>{class U{constructor(u,V){this.engineService=u,this.ngZone=V,this.active=!0,this.destroyed$=new ge.x,this.beforeRender$=this.engineService.beforeRender$,this.engineService.resize$.pipe((0,Re.R)(this.destroyed$)).subscribe(()=>this.requestAnimationFrame())}ngOnDestroy(){this.stop(),this.destroyed$.next(),this.destroyed$.complete()}start(){this.active||(this.active=!0,this.requestAnimationFrame())}stop(){this.active=!1,void 0!==this.frameId&&(cancelAnimationFrame(this.frameId),this.frameId=void 0)}isActive(){return this.active}requestAnimationFrame(){void 0===this.frameId&&this.ngZone.runOutsideAngular(()=>this.frameId=requestAnimationFrame(()=>{this.frameId=void 0,this.engineService.render(),this.active&&this.requestAnimationFrame()}))}}return U.\u0275fac=function(u){return new(u||U)(a.LFG(At),a.LFG(a.R0b))},U.\u0275prov=a.Yz7({token:U,factory:U.\u0275fac}),U})(),Si=(()=>{class U extends xt{get obj(){return this}set views(u){u.forEach(V=>this.engServ.addView(V))}set rendererCanvas(u){u&&(this._rendererCanvas=u,u.nativeElement.id+=this.nid)}get rendererCanvas(){return this._rendererCanvas}constructor(u,V,Xe){super(u,Xe),this.engServ=u,this.animationLoop=V,this.raycaster=Xe,this.nid=U.instanceCnt++,this.disableDefaultView=!1}ngAfterContentChecked(){this.animationLoop.requestAnimationFrame()}ngAfterViewInit(){this.animationLoop.requestAnimationFrame()}ngOnInit(){this.applyRendererParameters(),super.ngOnInit(),this.disableDefaultView||this.engServ.addView(this)}applyRendererParameters(){if(!this.rendererCanvas)throw new Error("Missing Canvas");this.engServ.setRenderer({...this.rendererParameters,domElement:this.rendererCanvas.nativeElement})}}return U.instanceCnt=0,U.\u0275fac=function(u){return new(u||U)(a.Y36(At),a.Y36(tn),a.Y36((0,a.Gpc)(()=>ui)))},U.\u0275cmp=a.Xpm({type:U,selectors:[["th-canvas"]],contentQueries:function(u,V,Xe){if(1&u&&a.Suo(Xe,xt,4),2&u){let sn;a.iGM(sn=a.CRH())&&(V.views=sn)}},viewQuery:function(u,V){if(1&u&&a.Gf(_t,7),2&u){let Xe;a.iGM(Xe=a.CRH())&&(V.rendererCanvas=Xe.first)}},inputs:{rendererParameters:"rendererParameters",disableDefaultView:"disableDefaultView"},features:[a._Bn([{provide:cn,useExisting:(0,a.Gpc)(()=>U)},At,tn,{provide:_n,useValue:new K.iMs},(0,a.Gpc)(()=>ui),{provide:xt,useExisting:(0,a.Gpc)(()=>U)}]),a.qOj],decls:2,vars:0,consts:[["id","rendererCanvas"],["rendererCanvas",""]],template:function(u,V){1&u&&a._UZ(0,"canvas",0,1)},styles:["[_nghost-%COMP%]{display:flex;flex:auto;line-height:0;height:100%}canvas[_ngcontent-%COMP%]{flex:auto;outline:none;width:100%;height:100%}"],changeDetection:0}),U})(),Qi=(()=>{class U extends cn{getType(){return K._kC}set type(u){this._objRef&&(this._objRef.type=u)}set color(u){this._objRef&&(this._objRef.color=Ie(this._objRef.color,u))}set intensity(u){this._objRef&&(this._objRef.intensity=u)}set shadow(u){this._objRef&&(this._objRef.shadow=u)}set shadowCameraFov(u){this._objRef&&(this._objRef.shadowCameraFov=u)}set shadowCameraLeft(u){this._objRef&&(this._objRef.shadowCameraLeft=u)}set shadowCameraRight(u){this._objRef&&(this._objRef.shadowCameraRight=u)}set shadowCameraTop(u){this._objRef&&(this._objRef.shadowCameraTop=u)}set shadowCameraBottom(u){this._objRef&&(this._objRef.shadowCameraBottom=u)}set shadowCameraNear(u){this._objRef&&(this._objRef.shadowCameraNear=u)}set shadowCameraFar(u){this._objRef&&(this._objRef.shadowCameraFar=u)}set shadowBias(u){this._objRef&&(this._objRef.shadowBias=u)}set shadowMapWidth(u){this._objRef&&(this._objRef.shadowMapWidth=u)}set shadowMapHeight(u){this._objRef&&(this._objRef.shadowMapHeight=u)}}return U.\u0275fac=function(){let C;return function(V){return(C||(C=a.n5z(U)))(V||U)}}(),U.\u0275cmp=a.Xpm({type:U,selectors:[["th-light"]],inputs:{type:"type",color:"color",intensity:"intensity",shadow:"shadow",shadowCameraFov:"shadowCameraFov",shadowCameraLeft:"shadowCameraLeft",shadowCameraRight:"shadowCameraRight",shadowCameraTop:"shadowCameraTop",shadowCameraBottom:"shadowCameraBottom",shadowCameraNear:"shadowCameraNear",shadowCameraFar:"shadowCameraFar",shadowBias:"shadowBias",shadowMapWidth:"shadowMapWidth",shadowMapHeight:"shadowMapHeight"},features:[a._Bn([{provide:cn,useExisting:(0,a.Gpc)(()=>U)}]),a.qOj],decls:0,vars:0,template:function(u,V){},encapsulation:2,changeDetection:0}),U})(),ha=(()=>{class U extends Qi{getType(){return K.Mig}set type(u){this._objRef&&(this._objRef.type=u)}}return U.\u0275fac=function(){let C;return function(V){return(C||(C=a.n5z(U)))(V||U)}}(),U.\u0275cmp=a.Xpm({type:U,selectors:[["th-ambientLight"]],inputs:{type:"type"},features:[a._Bn([{provide:cn,useExisting:(0,a.Gpc)(()=>U)}]),a.qOj],decls:0,vars:0,template:function(u,V){},encapsulation:2,changeDetection:0}),U})(),fo=(()=>{class U extends Me{getType(){return K.cPb}set type(u){this._objRef&&(this._objRef.type=u)}set zoom(u){this._objRef&&(this._objRef.zoom=u)}set fov(u){this._objRef&&(this._objRef.fov=u)}set aspect(u){this._objRef&&(this._objRef.aspect=u)}set near(u){this._objRef&&(this._objRef.near=u)}set far(u){this._objRef&&(this._objRef.far=u)}set focus(u){this._objRef&&(this._objRef.focus=u)}set view(u){this._objRef&&(this._objRef.view=u)}set filmGauge(u){this._objRef&&(this._objRef.filmGauge=u)}set filmOffset(u){this._objRef&&(this._objRef.filmOffset=u)}}return U.\u0275fac=function(){let C;return function(V){return(C||(C=a.n5z(U)))(V||U)}}(),U.\u0275cmp=a.Xpm({type:U,selectors:[["th-perspectiveCamera"]],inputs:{type:"type",zoom:"zoom",fov:"fov",aspect:"aspect",near:"near",far:"far",focus:"focus",view:"view",filmGauge:"filmGauge",filmOffset:"filmOffset"},features:[a._Bn([{provide:cn,useExisting:(0,a.Gpc)(()=>U)},{provide:Me,useExisting:(0,a.Gpc)(()=>U)}]),a.qOj],decls:0,vars:0,template:function(u,V){},encapsulation:2,changeDetection:0}),U})(),bn=(()=>{class U extends cn{getType(){return K.x12}set geometry(u){this._objRef&&(this._objRef.geometry=u)}set material(u){this._objRef&&(this._objRef.material=u)}set type(u){this._objRef&&(this._objRef.type=u)}set morphTargetInfluences(u){this._objRef&&(this._objRef.morphTargetInfluences=u)}set morphTargetDictionary(u){this._objRef&&(this._objRef.morphTargetDictionary=u)}}return U.\u0275fac=function(){let C;return function(V){return(C||(C=a.n5z(U)))(V||U)}}(),U.\u0275cmp=a.Xpm({type:U,selectors:[["th-line"]],inputs:{geometry:"geometry",material:"material",type:"type",morphTargetInfluences:"morphTargetInfluences",morphTargetDictionary:"morphTargetDictionary"},features:[a._Bn([{provide:cn,useExisting:(0,a.Gpc)(()=>U)}]),a.qOj],decls:0,vars:0,template:function(u,V){},encapsulation:2,changeDetection:0}),U})(),As=(()=>{class U extends bn{getType(){return K.ejS}set type(u){this._objRef&&(this._objRef.type=u)}}return U.\u0275fac=function(){let C;return function(V){return(C||(C=a.n5z(U)))(V||U)}}(),U.\u0275cmp=a.Xpm({type:U,selectors:[["th-lineSegments"]],inputs:{type:"type"},features:[a._Bn([{provide:cn,useExisting:(0,a.Gpc)(()=>U)}]),a.qOj],decls:0,vars:0,template:function(u,V){},encapsulation:2,changeDetection:0}),U})(),vs=(()=>{class U extends Zt{constructor(u){super(),this.parent=u}addToParent(){this.parent.objRef&&(this.parent.objRef.geometry=this.objRef,this.parent.objRef.updateMorphTargets&&this.parent.objRef.updateMorphTargets())}removeFromParent(){this._objRef&&this.parent&&this.parent.objRef&&(this.parent.objRef.geometry=void 0)}}return U.\u0275fac=function(u){return new(u||U)(a.Y36(cn))},U.\u0275cmp=a.Xpm({type:U,selectors:[["th-abs-geometry"]],features:[a.qOj],decls:0,vars:0,template:function(u,V){},encapsulation:2}),U})(),es=(()=>{class U extends vs{getType(){return K.u9r}set id(u){this._objRef&&(this._objRef.id=u)}set uuid(u){this._objRef&&(this._objRef.uuid=u)}set name(u){this._objRef&&(this._objRef.name=u)}set type(u){this._objRef&&(this._objRef.type=u)}set index(u){this._objRef&&(this._objRef.index=Ie(this._objRef.index,u))}set attributes(u){this._objRef&&(this._objRef.attributes=u)}set morphAttributes(u){this._objRef&&(this._objRef.morphAttributes=u)}set morphTargetsRelative(u){this._objRef&&(this._objRef.morphTargetsRelative=u)}set groups(u){this._objRef&&(this._objRef.groups=u)}set boundingBox(u){this._objRef&&(this._objRef.boundingBox=Ie(this._objRef.boundingBox,u))}set boundingSphere(u){this._objRef&&(this._objRef.boundingSphere=Ie(this._objRef.boundingSphere,u))}set drawRange(u){this._objRef&&(this._objRef.drawRange=u)}set userData(u){this._objRef&&(this._objRef.userData=u)}set drawcalls(u){this._objRef&&(this._objRef.drawcalls=u)}set offsets(u){this._objRef&&(this._objRef.offsets=u)}constructor(u){super(u)}}return U.\u0275fac=function(u){return new(u||U)(a.Y36(cn,4))},U.\u0275cmp=a.Xpm({type:U,selectors:[["th-bufferGeometry"]],inputs:{id:"id",uuid:"uuid",name:"name",type:"type",index:"index",attributes:"attributes",morphAttributes:"morphAttributes",morphTargetsRelative:"morphTargetsRelative",groups:"groups",boundingBox:"boundingBox",boundingSphere:"boundingSphere",drawRange:"drawRange",userData:"userData",drawcalls:"drawcalls",offsets:"offsets"},features:[a._Bn([]),a.qOj],decls:0,vars:0,template:function(u,V){},encapsulation:2,changeDetection:0}),U})(),no=(()=>{class U extends As{getType(){return K.VLJ}set type(u){this._objRef&&(this._objRef.type=u)}}return U.\u0275fac=function(){let C;return function(V){return(C||(C=a.n5z(U)))(V||U)}}(),U.\u0275cmp=a.Xpm({type:U,selectors:[["th-gridHelper"]],inputs:{type:"type"},features:[a._Bn([{provide:cn,useExisting:(0,a.Gpc)(()=>U)}]),a.qOj],decls:0,vars:0,template:function(u,V){},encapsulation:2,changeDetection:0}),U})(),Ko=(()=>{class U extends cn{getType(){return K.ZAu}set type(u){this._objRef&&(this._objRef.type=u)}}return U.\u0275fac=function(){let C;return function(V){return(C||(C=a.n5z(U)))(V||U)}}(),U.\u0275cmp=a.Xpm({type:U,selectors:[["th-group"]],inputs:{type:"type"},features:[a._Bn([{provide:cn,useExisting:(0,a.Gpc)(()=>U)}]),a.qOj],decls:0,vars:0,template:function(u,V){},encapsulation:2,changeDetection:0}),U})(),Oa=(()=>{class U extends cn{getType(){return K.Kj0}set geometry(u){this._objRef&&(this._objRef.geometry=u)}set material(u){this._objRef&&(this._objRef.material=u)}set morphTargetInfluences(u){this._objRef&&(this._objRef.morphTargetInfluences=u)}set morphTargetDictionary(u){this._objRef&&(this._objRef.morphTargetDictionary=u)}set type(u){this._objRef&&(this._objRef.type=u)}}return U.\u0275fac=function(){let C;return function(V){return(C||(C=a.n5z(U)))(V||U)}}(),U.\u0275cmp=a.Xpm({type:U,selectors:[["th-mesh"]],inputs:{geometry:"geometry",material:"material",morphTargetInfluences:"morphTargetInfluences",morphTargetDictionary:"morphTargetDictionary",type:"type"},features:[a._Bn([{provide:cn,useExisting:(0,a.Gpc)(()=>U)}]),a.qOj],decls:0,vars:0,template:function(u,V){},encapsulation:2,changeDetection:0}),U})(),An=(()=>{class U extends Zt{constructor(u){super(),this.parent=u}addToParent(){if(!this.parent.objRef)throw new Error("parent object doesn't hold a three js object instance");this.parent.objRef.material=this.objRef}removeFromParent(){this._objRef&&this.parent&&this.parent.objRef&&(this.parent.objRef.material=void 0)}}return U.\u0275fac=function(u){return new(u||U)(a.Y36(cn))},U.\u0275cmp=a.Xpm({type:U,selectors:[["th-abs-material"]],features:[a.qOj],decls:0,vars:0,template:function(u,V){},encapsulation:2}),U})(),Pi=(()=>{class U extends An{getType(){return K.F5T}set alphaTest(u){this._objRef&&(this._objRef.alphaTest=u)}set alphaToCoverage(u){this._objRef&&(this._objRef.alphaToCoverage=u)}set blendDst(u){this._objRef&&(this._objRef.blendDst=u)}set blendDstAlpha(u){this._objRef&&(this._objRef.blendDstAlpha=u)}set blendEquation(u){this._objRef&&(this._objRef.blendEquation=u)}set blendEquationAlpha(u){this._objRef&&(this._objRef.blendEquationAlpha=u)}set blending(u){this._objRef&&(this._objRef.blending=u)}set blendSrc(u){this._objRef&&(this._objRef.blendSrc=u)}set blendSrcAlpha(u){this._objRef&&(this._objRef.blendSrcAlpha=u)}set clipIntersection(u){this._objRef&&(this._objRef.clipIntersection=u)}set clippingPlanes(u){this._objRef&&(this._objRef.clippingPlanes=u)}set clipShadows(u){this._objRef&&(this._objRef.clipShadows=u)}set colorWrite(u){this._objRef&&(this._objRef.colorWrite=u)}set defines(u){this._objRef&&(this._objRef.defines=u)}set depthFunc(u){this._objRef&&(this._objRef.depthFunc=u)}set depthTest(u){this._objRef&&(this._objRef.depthTest=u)}set depthWrite(u){this._objRef&&(this._objRef.depthWrite=u)}set id(u){this._objRef&&(this._objRef.id=u)}set stencilWrite(u){this._objRef&&(this._objRef.stencilWrite=u)}set stencilFunc(u){this._objRef&&(this._objRef.stencilFunc=u)}set stencilRef(u){this._objRef&&(this._objRef.stencilRef=u)}set stencilWriteMask(u){this._objRef&&(this._objRef.stencilWriteMask=u)}set stencilFuncMask(u){this._objRef&&(this._objRef.stencilFuncMask=u)}set stencilFail(u){this._objRef&&(this._objRef.stencilFail=u)}set stencilZFail(u){this._objRef&&(this._objRef.stencilZFail=u)}set stencilZPass(u){this._objRef&&(this._objRef.stencilZPass=u)}set name(u){this._objRef&&(this._objRef.name=u)}set needsUpdate(u){this._objRef&&(this._objRef.needsUpdate=u)}set opacity(u){this._objRef&&(this._objRef.opacity=u)}set polygonOffset(u){this._objRef&&(this._objRef.polygonOffset=u)}set polygonOffsetFactor(u){this._objRef&&(this._objRef.polygonOffsetFactor=u)}set polygonOffsetUnits(u){this._objRef&&(this._objRef.polygonOffsetUnits=u)}set precision(u){this._objRef&&(this._objRef.precision=u)}set premultipliedAlpha(u){this._objRef&&(this._objRef.premultipliedAlpha=u)}set dithering(u){this._objRef&&(this._objRef.dithering=u)}set side(u){this._objRef&&(this._objRef.side=u)}set shadowSide(u){this._objRef&&(this._objRef.shadowSide=u)}set toneMapped(u){this._objRef&&(this._objRef.toneMapped=u)}set transparent(u){this._objRef&&(this._objRef.transparent=u)}set type(u){this._objRef&&(this._objRef.type=u)}set uuid(u){this._objRef&&(this._objRef.uuid=u)}set vertexColors(u){this._objRef&&(this._objRef.vertexColors=u)}set visible(u){this._objRef&&(this._objRef.visible=u)}set userData(u){this._objRef&&(this._objRef.userData=u)}set version(u){this._objRef&&(this._objRef.version=u)}constructor(u){super(u)}}return U.\u0275fac=function(u){return new(u||U)(a.Y36(cn,4))},U.\u0275cmp=a.Xpm({type:U,selectors:[["th-material"]],inputs:{alphaTest:"alphaTest",alphaToCoverage:"alphaToCoverage",blendDst:"blendDst",blendDstAlpha:"blendDstAlpha",blendEquation:"blendEquation",blendEquationAlpha:"blendEquationAlpha",blending:"blending",blendSrc:"blendSrc",blendSrcAlpha:"blendSrcAlpha",clipIntersection:"clipIntersection",clippingPlanes:"clippingPlanes",clipShadows:"clipShadows",colorWrite:"colorWrite",defines:"defines",depthFunc:"depthFunc",depthTest:"depthTest",depthWrite:"depthWrite",id:"id",stencilWrite:"stencilWrite",stencilFunc:"stencilFunc",stencilRef:"stencilRef",stencilWriteMask:"stencilWriteMask",stencilFuncMask:"stencilFuncMask",stencilFail:"stencilFail",stencilZFail:"stencilZFail",stencilZPass:"stencilZPass",name:"name",needsUpdate:"needsUpdate",opacity:"opacity",polygonOffset:"polygonOffset",polygonOffsetFactor:"polygonOffsetFactor",polygonOffsetUnits:"polygonOffsetUnits",precision:"precision",premultipliedAlpha:"premultipliedAlpha",dithering:"dithering",side:"side",shadowSide:"shadowSide",toneMapped:"toneMapped",transparent:"transparent",type:"type",uuid:"uuid",vertexColors:"vertexColors",visible:"visible",userData:"userData",version:"version"},features:[a._Bn([]),a.qOj],decls:0,vars:0,template:function(u,V){},encapsulation:2,changeDetection:0}),U})(),cs=(()=>{class U extends Pi{getType(){return K.xoR}set type(u){this._objRef&&(this._objRef.type=u)}set color(u){this._objRef&&(this._objRef.color=Ie(this._objRef.color,u))}set specular(u){this._objRef&&(this._objRef.specular=Ie(this._objRef.specular,u))}set shininess(u){this._objRef&&(this._objRef.shininess=u)}set map(u){this._objRef&&(this._objRef.map=u)}set lightMap(u){this._objRef&&(this._objRef.lightMap=u)}set lightMapIntensity(u){this._objRef&&(this._objRef.lightMapIntensity=u)}set aoMap(u){this._objRef&&(this._objRef.aoMap=u)}set aoMapIntensity(u){this._objRef&&(this._objRef.aoMapIntensity=u)}set emissive(u){this._objRef&&(this._objRef.emissive=Ie(this._objRef.emissive,u))}set emissiveIntensity(u){this._objRef&&(this._objRef.emissiveIntensity=u)}set emissiveMap(u){this._objRef&&(this._objRef.emissiveMap=u)}set bumpMap(u){this._objRef&&(this._objRef.bumpMap=u)}set bumpScale(u){this._objRef&&(this._objRef.bumpScale=u)}set normalMap(u){this._objRef&&(this._objRef.normalMap=u)}set normalMapType(u){this._objRef&&(this._objRef.normalMapType=u)}set normalScale(u){this._objRef&&(this._objRef.normalScale=Ie(this._objRef.normalScale,u))}set displacementMap(u){this._objRef&&(this._objRef.displacementMap=u)}set displacementScale(u){this._objRef&&(this._objRef.displacementScale=u)}set displacementBias(u){this._objRef&&(this._objRef.displacementBias=u)}set specularMap(u){this._objRef&&(this._objRef.specularMap=u)}set alphaMap(u){this._objRef&&(this._objRef.alphaMap=u)}set envMap(u){this._objRef&&(this._objRef.envMap=u)}set combine(u){this._objRef&&(this._objRef.combine=u)}set reflectivity(u){this._objRef&&(this._objRef.reflectivity=u)}set refractionRatio(u){this._objRef&&(this._objRef.refractionRatio=u)}set wireframe(u){this._objRef&&(this._objRef.wireframe=u)}set wireframeLinewidth(u){this._objRef&&(this._objRef.wireframeLinewidth=u)}set wireframeLinecap(u){this._objRef&&(this._objRef.wireframeLinecap=u)}set wireframeLinejoin(u){this._objRef&&(this._objRef.wireframeLinejoin=u)}set flatShading(u){this._objRef&&(this._objRef.flatShading=u)}set metal(u){this._objRef&&(this._objRef.metal=u)}set fog(u){this._objRef&&(this._objRef.fog=u)}}return U.\u0275fac=function(){let C;return function(V){return(C||(C=a.n5z(U)))(V||U)}}(),U.\u0275cmp=a.Xpm({type:U,selectors:[["th-meshPhongMaterial"]],inputs:{type:"type",color:"color",specular:"specular",shininess:"shininess",map:"map",lightMap:"lightMap",lightMapIntensity:"lightMapIntensity",aoMap:"aoMap",aoMapIntensity:"aoMapIntensity",emissive:"emissive",emissiveIntensity:"emissiveIntensity",emissiveMap:"emissiveMap",bumpMap:"bumpMap",bumpScale:"bumpScale",normalMap:"normalMap",normalMapType:"normalMapType",normalScale:"normalScale",displacementMap:"displacementMap",displacementScale:"displacementScale",displacementBias:"displacementBias",specularMap:"specularMap",alphaMap:"alphaMap",envMap:"envMap",combine:"combine",reflectivity:"reflectivity",refractionRatio:"refractionRatio",wireframe:"wireframe",wireframeLinewidth:"wireframeLinewidth",wireframeLinecap:"wireframeLinecap",wireframeLinejoin:"wireframeLinejoin",flatShading:"flatShading",metal:"metal",fog:"fog"},features:[a._Bn([{provide:Pi,useExisting:(0,a.Gpc)(()=>U)}]),a.qOj],decls:0,vars:0,template:function(u,V){},encapsulation:2,changeDetection:0}),U})(),Gr=(()=>{class U extends es{getType(){return K._12}set type(u){this._objRef&&(this._objRef.type=u)}set parameters(u){this._objRef&&(this._objRef.parameters=u)}}return U.\u0275fac=function(){let C;return function(V){return(C||(C=a.n5z(U)))(V||U)}}(),U.\u0275cmp=a.Xpm({type:U,selectors:[["th-planeGeometry"]],inputs:{type:"type",parameters:"parameters"},features:[a._Bn([{provide:es,useExisting:(0,a.Gpc)(()=>U)}]),a.qOj],decls:0,vars:0,template:function(u,V){},encapsulation:2,changeDetection:0}),U})(),Cr=(()=>{class U extends cn{getType(){return K.woe}set type(u){this._objRef&&(this._objRef.type=u)}set morphTargetInfluences(u){this._objRef&&(this._objRef.morphTargetInfluences=u)}set morphTargetDictionary(u){this._objRef&&(this._objRef.morphTargetDictionary=u)}set geometry(u){this._objRef&&(this._objRef.geometry=u)}set material(u){this._objRef&&(this._objRef.material=u)}}return U.\u0275fac=function(){let C;return function(V){return(C||(C=a.n5z(U)))(V||U)}}(),U.\u0275cmp=a.Xpm({type:U,selectors:[["th-points"]],inputs:{type:"type",morphTargetInfluences:"morphTargetInfluences",morphTargetDictionary:"morphTargetDictionary",geometry:"geometry",material:"material"},features:[a._Bn([{provide:cn,useExisting:(0,a.Gpc)(()=>U)}]),a.qOj],decls:0,vars:0,template:function(u,V){},encapsulation:2,changeDetection:0}),U})(),is=(()=>{class U extends Pi{getType(){return K.jyz}set type(u){this._objRef&&(this._objRef.type=u)}set defines(u){this._objRef&&(this._objRef.defines=u)}set uniforms(u){this._objRef&&(this._objRef.uniforms=u)}set vertexShader(u){this._objRef&&(this._objRef.vertexShader=u)}set fragmentShader(u){this._objRef&&(this._objRef.fragmentShader=u)}set linewidth(u){this._objRef&&(this._objRef.linewidth=u)}set wireframe(u){this._objRef&&(this._objRef.wireframe=u)}set wireframeLinewidth(u){this._objRef&&(this._objRef.wireframeLinewidth=u)}set fog(u){this._objRef&&(this._objRef.fog=u)}set lights(u){this._objRef&&(this._objRef.lights=u)}set clipping(u){this._objRef&&(this._objRef.clipping=u)}set derivatives(u){this._objRef&&(this._objRef.derivatives=u)}set extensions(u){this._objRef&&(this._objRef.extensions=u)}set defaultAttributeValues(u){this._objRef&&(this._objRef.defaultAttributeValues=u)}set index0AttributeName(u){this._objRef&&(this._objRef.index0AttributeName=u)}set uniformsNeedUpdate(u){this._objRef&&(this._objRef.uniformsNeedUpdate=u)}set glslVersion(u){this._objRef&&(this._objRef.glslVersion=u)}set isShaderMaterial(u){this._objRef&&(this._objRef.isShaderMaterial=u)}}return U.\u0275fac=function(){let C;return function(V){return(C||(C=a.n5z(U)))(V||U)}}(),U.\u0275cmp=a.Xpm({type:U,selectors:[["th-shaderMaterial"]],inputs:{type:"type",defines:"defines",uniforms:"uniforms",vertexShader:"vertexShader",fragmentShader:"fragmentShader",linewidth:"linewidth",wireframe:"wireframe",wireframeLinewidth:"wireframeLinewidth",fog:"fog",lights:"lights",clipping:"clipping",derivatives:"derivatives",extensions:"extensions",defaultAttributeValues:"defaultAttributeValues",index0AttributeName:"index0AttributeName",uniformsNeedUpdate:"uniformsNeedUpdate",glslVersion:"glslVersion",isShaderMaterial:"isShaderMaterial"},features:[a._Bn([{provide:Pi,useExisting:(0,a.Gpc)(()=>U)}]),a.qOj],decls:0,vars:0,template:function(u,V){},encapsulation:2,changeDetection:0}),U})(),ds=(()=>{class U{}return U.\u0275fac=function(u){return new(u||U)},U.\u0275mod=a.oAB({type:U}),U.\u0275inj=a.cJS({}),U})(),le=(()=>{class U{constructor(u,V){this.engineService=u,this.animationLoopService=V}get beforeRender(){return this.engineService.beforeRender$}get onResize(){return this.engineService.resize$}set renderOnDemand(u){u?this.animationLoopService.stop():this.animationLoopService.start()}get renderOnDemand(){return!this.animationLoopService.isActive()}}return U.\u0275fac=function(u){return new(u||U)(a.Y36(At),a.Y36(tn))},U.\u0275dir=a.lG2({type:U,selectors:[["","beforeRender",""],["","onResize",""],["","renderOnDemand",""]],inputs:{renderOnDemand:"renderOnDemand"},outputs:{beforeRender:"beforeRender",onResize:"onResize"}}),U})();new K.Pa4,new K.Pa4,new K.Pa4;let Gt=(()=>{class U{}return U.\u0275fac=function(u){return new(u||U)},U.\u0275mod=a.oAB({type:U}),U.\u0275inj=a.cJS({imports:[ds,Oe.ez,ds]}),U})()},6682:(pn,Ze,te)=>{te.d(Ze,{CP7:()=>Pv,F5T:()=>br,FM8:()=>ht,Ilk:()=>Wt,Kj0:()=>w,Ltg:()=>Jn,Mig:()=>Jv,Pa4:()=>le,SUY:()=>H_,TlE:()=>ji,Tme:()=>ws,TyD:()=>sr,V1s:()=>Or,VLJ:()=>a0,Wid:()=>Pu,ZAu:()=>_u,_12:()=>ou,_Li:()=>ze,_kC:()=>Hv,cPb:()=>hr,dpR:()=>Ny,ejS:()=>Nm,iMs:()=>oy,jyz:()=>Kn,lLk:()=>qh,u9r:()=>Zn,woe:()=>Lm,x12:()=>ms,xo$:()=>ca,xoR:()=>jc,xsS:()=>D_});var a=te(5861);const K="148",xe=0,Re=1,Oe=2,Fe=1,ke=2,Ke=3,Lt=0,ze=1,Mt=2,dt=3,jt=0,_n=1,ui=2,Ri=3,Ie=4,We=5,Ne=100,$e=101,mt=102,Et=103,Rt=104,Zt=200,kt=201,cn=202,on=203,Ge=204,Me=205,qe=206,Qe=207,At=208,xt=209,Rn=210,pi=0,lr=1,En=2,jn=3,tn=4,Si=5,Es=6,wn=7,Mn=0,xr=1,Ci=2,Qi=0,ha=1,Qr=2,Ea=3,Dr=4,fo=5,Li=301,wr=302,mo=303,bn=304,As=306,Wi=1e3,Vt=1001,lt=1002,sr=1003,ki=1004,es=1005,nn=1006,Wn=1007,Yn=1008,ts=1009,Ia=1010,Bs=1011,Is=1012,os=1013,xi=1014,vi=1015,Hr=1016,Yo=1017,Jo=1018,ys=1020,el=1021,tl=1022,as=1023,Pe=1024,ve=1025,ae=1026,Ce=1027,Ve=1028,en=1029,Vn=1030,Gi=1031,or=1033,ls=33776,vr=33777,fa=33778,Pa=33779,nl=35840,Zo=35841,Ol=35842,go=35843,pa=36196,Ps=37492,no=37496,Ko=37808,gi=37809,cr=37810,Ii=37811,zr=37812,jr=37813,oc=37814,Oa=37815,js=37816,ks=37817,Yt=37818,An=37819,Pi=37820,ns=37821,bs=36492,us=3e3,Di=3001,Fl=3201,vo=0,il=1,Gr="srgb",Us="srgb-linear",Gd="300 es",No=1035;class Fo{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const s=this._listeners;void 0===s[e]&&(s[e]=[]),-1===s[e].indexOf(t)&&s[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const s=this._listeners;return void 0!==s[e]&&-1!==s[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const l=this._listeners[e];if(void 0!==l){const h=l.indexOf(t);-1!==h&&l.splice(h,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const s=this._listeners[e.type];if(void 0!==s){e.target=this;const l=s.slice(0);for(let h=0,g=l.length;h<g;h++)l[h].call(this,e);e.target=null}}}const $i=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],Lo=Math.PI/180,Qo=180/Math.PI;function Ts(){const v=4294967295*Math.random()|0,e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,s=4294967295*Math.random()|0;return($i[255&v]+$i[v>>8&255]+$i[v>>16&255]+$i[v>>24&255]+"-"+$i[255&e]+$i[e>>8&255]+"-"+$i[e>>16&15|64]+$i[e>>24&255]+"-"+$i[63&t|128]+$i[t>>8&255]+"-"+$i[t>>16&255]+$i[t>>24&255]+$i[255&s]+$i[s>>8&255]+$i[s>>16&255]+$i[s>>24&255]).toLowerCase()}function Yi(v,e,t){return Math.max(e,Math.min(t,v))}function io(v,e,t){return(1-t)*v+t*e}function Hs(v){return 0==(v&v-1)&&0!==v}function dl(v){return Math.pow(2,Math.floor(Math.log(v)/Math.LN2))}function hs(v,e){switch(e.constructor){case Float32Array:return v;case Uint16Array:return v/65535;case Uint8Array:return v/255;case Int16Array:return Math.max(v/32767,-1);case Int8Array:return Math.max(v/127,-1);default:throw new Error("Invalid component type.")}}function _i(v,e){switch(e.constructor){case Float32Array:return v;case Uint16Array:return Math.round(65535*v);case Uint8Array:return Math.round(255*v);case Int16Array:return Math.round(32767*v);case Int8Array:return Math.round(127*v);default:throw new Error("Invalid component type.")}}class ht{constructor(e=0,t=0){ht.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,s=this.y,l=e.elements;return this.x=l[0]*t+l[3]*s+l[6],this.y=l[1]*t+l[4]*s+l[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const s=this.length();return this.divideScalar(s||1).multiplyScalar(Math.max(e,Math.min(t,s)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,s=this.y-e.y;return t*t+s*s}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,s){return this.x=e.x+(t.x-e.x)*s,this.y=e.y+(t.y-e.y)*s,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const s=Math.cos(t),l=Math.sin(t),h=this.x-e.x,g=this.y-e.y;return this.x=h*s-g*l+e.x,this.y=h*l+g*s+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class mn{constructor(){mn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,s,l,h,g,_,b,x){const S=this.elements;return S[0]=e,S[1]=l,S[2]=_,S[3]=t,S[4]=h,S[5]=b,S[6]=s,S[7]=g,S[8]=x,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,s=e.elements;return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],this}extractBasis(e,t,s){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),s.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const s=e.elements,l=t.elements,h=this.elements,g=s[0],_=s[3],b=s[6],x=s[1],S=s[4],A=s[7],E=s[2],L=s[5],G=s[8],j=l[0],k=l[3],Y=l[6],q=l[1],$=l[4],Z=l[7],se=l[2],de=l[5],_e=l[8];return h[0]=g*j+_*q+b*se,h[3]=g*k+_*$+b*de,h[6]=g*Y+_*Z+b*_e,h[1]=x*j+S*q+A*se,h[4]=x*k+S*$+A*de,h[7]=x*Y+S*Z+A*_e,h[2]=E*j+L*q+G*se,h[5]=E*k+L*$+G*de,h[8]=E*Y+L*Z+G*_e,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],s=e[1],l=e[2],h=e[3],g=e[4],_=e[5],b=e[6],x=e[7],S=e[8];return t*g*S-t*_*x-s*h*S+s*_*b+l*h*x-l*g*b}invert(){const e=this.elements,t=e[0],s=e[1],l=e[2],h=e[3],g=e[4],_=e[5],b=e[6],x=e[7],S=e[8],A=S*g-_*x,E=_*b-S*h,L=x*h-g*b,G=t*A+s*E+l*L;if(0===G)return this.set(0,0,0,0,0,0,0,0,0);const j=1/G;return e[0]=A*j,e[1]=(l*x-S*s)*j,e[2]=(_*s-l*g)*j,e[3]=E*j,e[4]=(S*t-l*b)*j,e[5]=(l*h-_*t)*j,e[6]=L*j,e[7]=(s*b-x*t)*j,e[8]=(g*t-s*h)*j,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,s,l,h,g,_){const b=Math.cos(h),x=Math.sin(h);return this.set(s*b,s*x,-s*(b*g+x*_)+g+e,-l*x,l*b,-l*(-x*g+b*_)+_+t,0,0,1),this}scale(e,t){return this.premultiply(Ba.makeScale(e,t)),this}rotate(e){return this.premultiply(Ba.makeRotation(-e)),this}translate(e,t){return this.premultiply(Ba.makeTranslation(e,t)),this}makeTranslation(e,t){return this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),s=Math.sin(e);return this.set(t,-s,0,s,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,s=e.elements;for(let l=0;l<9;l++)if(t[l]!==s[l])return!1;return!0}fromArray(e,t=0){for(let s=0;s<9;s++)this.elements[s]=e[s+t];return this}toArray(e=[],t=0){const s=this.elements;return e[t]=s[0],e[t+1]=s[1],e[t+2]=s[2],e[t+3]=s[3],e[t+4]=s[4],e[t+5]=s[5],e[t+6]=s[6],e[t+7]=s[7],e[t+8]=s[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}const Ba=new mn;function Wu(v){for(let e=v.length-1;e>=0;--e)if(v[e]>=65535)return!0;return!1}function hl(v){return document.createElementNS("http://www.w3.org/1999/xhtml",v)}function Bo(v){return v<.04045?.0773993808*v:Math.pow(.9478672986*v+.0521327014,2.4)}function uc(v){return v<.0031308?12.92*v:1.055*Math.pow(v,.41666)-.055}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const fl={[Gr]:{[Us]:Bo},[Us]:{[Gr]:uc}},et={legacyMode:!0,get workingColorSpace(){return Us},set workingColorSpace(v){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(v,e,t){if(this.legacyMode||e===t||!e||!t)return v;if(fl[e]&&void 0!==fl[e][t]){const s=fl[e][t];return v.r=s(v.r),v.g=s(v.g),v.b=s(v.b),v}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(v,e){return this.convert(v,this.workingColorSpace,e)},toWorkingColorSpace:function(v,e){return this.convert(v,e,this.workingColorSpace)}},ei={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Ki={r:0,g:0,b:0},xs={h:0,s:0,l:0},pr={h:0,s:0,l:0};function zl(v,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?v+6*(e-v)*t:t<.5?e:t<2/3?v+6*(e-v)*(2/3-t):v}function ro(v,e){return e.r=v.r,e.g=v.g,e.b=v.b,e}let bo,Wt=(()=>{class v{constructor(t,s,l){return this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===s&&void 0===l?this.set(t):this.setRGB(t,s,l)}set(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,s=Gr){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,et.toWorkingColorSpace(this,s),this}setRGB(t,s,l,h=et.workingColorSpace){return this.r=t,this.g=s,this.b=l,et.toWorkingColorSpace(this,h),this}setHSL(t,s,l,h=et.workingColorSpace){if(t=function ul(v,e){return(v%e+e)%e}(t,1),s=Yi(s,0,1),l=Yi(l,0,1),0===s)this.r=this.g=this.b=l;else{const g=l<=.5?l*(1+s):l+s-l*s,_=2*l-g;this.r=zl(_,g,t+1/3),this.g=zl(_,g,t),this.b=zl(_,g,t-1/3)}return et.toWorkingColorSpace(this,h),this}setStyle(t,s=Gr){function l(g){void 0!==g&&parseFloat(g)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let h;if(h=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(t)){let g;const b=h[2];switch(h[1]){case"rgb":case"rgba":if(g=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(b))return this.r=Math.min(255,parseInt(g[1],10))/255,this.g=Math.min(255,parseInt(g[2],10))/255,this.b=Math.min(255,parseInt(g[3],10))/255,et.toWorkingColorSpace(this,s),l(g[4]),this;if(g=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(b))return this.r=Math.min(100,parseInt(g[1],10))/100,this.g=Math.min(100,parseInt(g[2],10))/100,this.b=Math.min(100,parseInt(g[3],10))/100,et.toWorkingColorSpace(this,s),l(g[4]),this;break;case"hsl":case"hsla":if(g=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(b)){const x=parseFloat(g[1])/360,S=parseFloat(g[2])/100,A=parseFloat(g[3])/100;return l(g[4]),this.setHSL(x,S,A,s)}}}else if(h=/^\#([A-Fa-f\d]+)$/.exec(t)){const g=h[1],_=g.length;if(3===_)return this.r=parseInt(g.charAt(0)+g.charAt(0),16)/255,this.g=parseInt(g.charAt(1)+g.charAt(1),16)/255,this.b=parseInt(g.charAt(2)+g.charAt(2),16)/255,et.toWorkingColorSpace(this,s),this;if(6===_)return this.r=parseInt(g.charAt(0)+g.charAt(1),16)/255,this.g=parseInt(g.charAt(2)+g.charAt(3),16)/255,this.b=parseInt(g.charAt(4)+g.charAt(5),16)/255,et.toWorkingColorSpace(this,s),this}return t&&t.length>0?this.setColorName(t,s):this}setColorName(t,s=Gr){const l=ei[t.toLowerCase()];return void 0!==l?this.setHex(l,s):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=Bo(t.r),this.g=Bo(t.g),this.b=Bo(t.b),this}copyLinearToSRGB(t){return this.r=uc(t.r),this.g=uc(t.g),this.b=uc(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=Gr){return et.fromWorkingColorSpace(ro(this,Ki),t),Yi(255*Ki.r,0,255)<<16^Yi(255*Ki.g,0,255)<<8^Yi(255*Ki.b,0,255)<<0}getHexString(t=Gr){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,s=et.workingColorSpace){et.fromWorkingColorSpace(ro(this,Ki),s);const l=Ki.r,h=Ki.g,g=Ki.b,_=Math.max(l,h,g),b=Math.min(l,h,g);let x,S;const A=(b+_)/2;if(b===_)x=0,S=0;else{const E=_-b;switch(S=A<=.5?E/(_+b):E/(2-_-b),_){case l:x=(h-g)/E+(h<g?6:0);break;case h:x=(g-l)/E+2;break;case g:x=(l-h)/E+4}x/=6}return t.h=x,t.s=S,t.l=A,t}getRGB(t,s=et.workingColorSpace){return et.fromWorkingColorSpace(ro(this,Ki),s),t.r=Ki.r,t.g=Ki.g,t.b=Ki.b,t}getStyle(t=Gr){return et.fromWorkingColorSpace(ro(this,Ki),t),t!==Gr?`color(${t} ${Ki.r} ${Ki.g} ${Ki.b})`:`rgb(${255*Ki.r|0},${255*Ki.g|0},${255*Ki.b|0})`}offsetHSL(t,s,l){return this.getHSL(xs),xs.h+=t,xs.s+=s,xs.l+=l,this.setHSL(xs.h,xs.s,xs.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,s){return this.r=t.r+s.r,this.g=t.g+s.g,this.b=t.b+s.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,s){return this.r+=(t.r-this.r)*s,this.g+=(t.g-this.g)*s,this.b+=(t.b-this.b)*s,this}lerpColors(t,s,l){return this.r=t.r+(s.r-t.r)*l,this.g=t.g+(s.g-t.g)*l,this.b=t.b+(s.b-t.b)*l,this}lerpHSL(t,s){this.getHSL(xs),t.getHSL(pr);const l=io(xs.h,pr.h,s),h=io(xs.s,pr.s,s),g=io(xs.l,pr.l,s);return this.setHSL(l,h,g),this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,s=0){return this.r=t[s],this.g=t[s+1],this.b=t[s+2],this}toArray(t=[],s=0){return t[s]=this.r,t[s+1]=this.g,t[s+2]=this.b,t}fromBufferAttribute(t,s){return this.r=t.getX(s),this.g=t.getY(s),this.b=t.getZ(s),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}return v.NAMES=ei,v})();class ya{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===bo&&(bo=hl("canvas")),bo.width=e.width,bo.height=e.height;const s=bo.getContext("2d");e instanceof ImageData?s.putImageData(e,0,0):s.drawImage(e,0,0,e.width,e.height),t=bo}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=hl("canvas");t.width=e.width,t.height=e.height;const s=t.getContext("2d");s.drawImage(e,0,0,e.width,e.height);const l=s.getImageData(0,0,e.width,e.height),h=l.data;for(let g=0;g<h.length;g++)h[g]=255*Bo(h[g]/255);return s.putImageData(l,0,0),t}if(e.data){const t=e.data.slice(0);for(let s=0;s<t.length;s++)t[s]=t instanceof Uint8Array||t instanceof Uint8ClampedArray?Math.floor(255*Bo(t[s]/255)):Bo(t[s]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class Os{constructor(e=null){this.isSource=!0,this.uuid=Ts(),this.data=e,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const s={uuid:this.uuid,url:""},l=this.data;if(null!==l){let h;if(Array.isArray(l)){h=[];for(let g=0,_=l.length;g<_;g++)h.push(Jc(l[g].isDataTexture?l[g].image:l[g]))}else h=Jc(l);s.url=h}return t||(e.images[this.uuid]=s),s}}function Jc(v){return typeof HTMLImageElement<"u"&&v instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&v instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&v instanceof ImageBitmap?ya.getDataURL(v):v.data?{data:Array.from(v.data),width:v.width,height:v.height,type:v.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let dc=0,tr=(()=>{class v extends Fo{constructor(t=v.DEFAULT_IMAGE,s=v.DEFAULT_MAPPING,l=Vt,h=Vt,g=nn,_=Yn,b=as,x=ts,S=v.DEFAULT_ANISOTROPY,A=us){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:dc++}),this.uuid=Ts(),this.name="",this.source=new Os(t),this.mipmaps=[],this.mapping=s,this.wrapS=l,this.wrapT=h,this.magFilter=g,this.minFilter=_,this.anisotropy=S,this.format=b,this.internalFormat=null,this.type=x,this.offset=new ht(0,0),this.repeat=new ht(1,1),this.center=new ht(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new mn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=A,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(t){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const s=void 0===t||"string"==typeof t;if(!s&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const l={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(l.userData=this.userData),s||(t.textures[this.uuid]=l),l}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(300!==this.mapping)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case Wi:t.x=t.x-Math.floor(t.x);break;case Vt:t.x=t.x<0?0:1;break;case lt:t.x=1===Math.abs(Math.floor(t.x)%2)?Math.ceil(t.x)-t.x:t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case Wi:t.y=t.y-Math.floor(t.y);break;case Vt:t.y=t.y<0?0:1;break;case lt:t.y=1===Math.abs(Math.floor(t.y)%2)?Math.ceil(t.y)-t.y:t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){!0===t&&(this.version++,this.source.needsUpdate=!0)}}return v.DEFAULT_IMAGE=null,v.DEFAULT_MAPPING=300,v.DEFAULT_ANISOTROPY=1,v})();class Jn{constructor(e=0,t=0,s=0,l=1){Jn.prototype.isVector4=!0,this.x=e,this.y=t,this.z=s,this.w=l}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,s,l){return this.x=e,this.y=t,this.z=s,this.w=l,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,s=this.y,l=this.z,h=this.w,g=e.elements;return this.x=g[0]*t+g[4]*s+g[8]*l+g[12]*h,this.y=g[1]*t+g[5]*s+g[9]*l+g[13]*h,this.z=g[2]*t+g[6]*s+g[10]*l+g[14]*h,this.w=g[3]*t+g[7]*s+g[11]*l+g[15]*h,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,s,l,h;const b=e.elements,x=b[0],S=b[4],A=b[8],E=b[1],L=b[5],G=b[9],j=b[2],k=b[6],Y=b[10];if(Math.abs(S-E)<.01&&Math.abs(A-j)<.01&&Math.abs(G-k)<.01){if(Math.abs(S+E)<.1&&Math.abs(A+j)<.1&&Math.abs(G+k)<.1&&Math.abs(x+L+Y-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const $=(x+1)/2,Z=(L+1)/2,se=(Y+1)/2,de=(S+E)/4,_e=(A+j)/4,X=(G+k)/4;return $>Z&&$>se?$<.01?(s=0,l=.707106781,h=.707106781):(s=Math.sqrt($),l=de/s,h=_e/s):Z>se?Z<.01?(s=.707106781,l=0,h=.707106781):(l=Math.sqrt(Z),s=de/l,h=X/l):se<.01?(s=.707106781,l=.707106781,h=0):(h=Math.sqrt(se),s=_e/h,l=X/h),this.set(s,l,h,t),this}let q=Math.sqrt((k-G)*(k-G)+(A-j)*(A-j)+(E-S)*(E-S));return Math.abs(q)<.001&&(q=1),this.x=(k-G)/q,this.y=(A-j)/q,this.z=(E-S)/q,this.w=Math.acos((x+L+Y-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const s=this.length();return this.divideScalar(s||1).multiplyScalar(Math.max(e,Math.min(t,s)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,s){return this.x=e.x+(t.x-e.x)*s,this.y=e.y+(t.y-e.y)*s,this.z=e.z+(t.z-e.z)*s,this.w=e.w+(t.w-e.w)*s,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class ta extends Fo{constructor(e=1,t=1,s={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Jn(0,0,e,t),this.scissorTest=!1,this.viewport=new Jn(0,0,e,t),this.texture=new tr({width:e,height:t,depth:1},s.mapping,s.wrapS,s.wrapT,s.magFilter,s.minFilter,s.format,s.type,s.anisotropy,s.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==s.generateMipmaps&&s.generateMipmaps,this.texture.internalFormat=void 0!==s.internalFormat?s.internalFormat:null,this.texture.minFilter=void 0!==s.minFilter?s.minFilter:nn,this.depthBuffer=void 0===s.depthBuffer||s.depthBuffer,this.stencilBuffer=void 0!==s.stencilBuffer&&s.stencilBuffer,this.depthTexture=void 0!==s.depthTexture?s.depthTexture:null,this.samples=void 0!==s.samples?s.samples:0}setSize(e,t,s=1){(this.width!==e||this.height!==t||this.depth!==s)&&(this.width=e,this.height=t,this.depth=s,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=s,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new Os(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class zs extends tr{constructor(e=null,t=1,s=1,l=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:s,depth:l},this.magFilter=sr,this.minFilter=sr,this.wrapR=Vt,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class pl extends tr{constructor(e=null,t=1,s=1,l=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:s,depth:l},this.magFilter=sr,this.minFilter=sr,this.wrapR=Vt,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Ns{constructor(e=0,t=0,s=0,l=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=s,this._w=l}static slerpFlat(e,t,s,l,h,g,_){let b=s[l+0],x=s[l+1],S=s[l+2],A=s[l+3];const E=h[g+0],L=h[g+1],G=h[g+2],j=h[g+3];if(0===_)return e[t+0]=b,e[t+1]=x,e[t+2]=S,void(e[t+3]=A);if(1===_)return e[t+0]=E,e[t+1]=L,e[t+2]=G,void(e[t+3]=j);if(A!==j||b!==E||x!==L||S!==G){let k=1-_;const Y=b*E+x*L+S*G+A*j,q=Y>=0?1:-1,$=1-Y*Y;if($>Number.EPSILON){const se=Math.sqrt($),de=Math.atan2(se,Y*q);k=Math.sin(k*de)/se,_=Math.sin(_*de)/se}const Z=_*q;if(b=b*k+E*Z,x=x*k+L*Z,S=S*k+G*Z,A=A*k+j*Z,k===1-_){const se=1/Math.sqrt(b*b+x*x+S*S+A*A);b*=se,x*=se,S*=se,A*=se}}e[t]=b,e[t+1]=x,e[t+2]=S,e[t+3]=A}static multiplyQuaternionsFlat(e,t,s,l,h,g){const _=s[l],b=s[l+1],x=s[l+2],S=s[l+3],A=h[g],E=h[g+1],L=h[g+2],G=h[g+3];return e[t]=_*G+S*A+b*L-x*E,e[t+1]=b*G+S*E+x*A-_*L,e[t+2]=x*G+S*L+_*E-b*A,e[t+3]=S*G-_*A-b*E-x*L,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,s,l){return this._x=e,this._y=t,this._z=s,this._w=l,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const s=e._x,l=e._y,h=e._z,g=e._order,_=Math.cos,b=Math.sin,x=_(s/2),S=_(l/2),A=_(h/2),E=b(s/2),L=b(l/2),G=b(h/2);switch(g){case"XYZ":this._x=E*S*A+x*L*G,this._y=x*L*A-E*S*G,this._z=x*S*G+E*L*A,this._w=x*S*A-E*L*G;break;case"YXZ":this._x=E*S*A+x*L*G,this._y=x*L*A-E*S*G,this._z=x*S*G-E*L*A,this._w=x*S*A+E*L*G;break;case"ZXY":this._x=E*S*A-x*L*G,this._y=x*L*A+E*S*G,this._z=x*S*G+E*L*A,this._w=x*S*A-E*L*G;break;case"ZYX":this._x=E*S*A-x*L*G,this._y=x*L*A+E*S*G,this._z=x*S*G-E*L*A,this._w=x*S*A+E*L*G;break;case"YZX":this._x=E*S*A+x*L*G,this._y=x*L*A+E*S*G,this._z=x*S*G-E*L*A,this._w=x*S*A-E*L*G;break;case"XZY":this._x=E*S*A-x*L*G,this._y=x*L*A-E*S*G,this._z=x*S*G+E*L*A,this._w=x*S*A+E*L*G;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+g)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const s=t/2,l=Math.sin(s);return this._x=e.x*l,this._y=e.y*l,this._z=e.z*l,this._w=Math.cos(s),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,s=t[0],l=t[4],h=t[8],g=t[1],_=t[5],b=t[9],x=t[2],S=t[6],A=t[10],E=s+_+A;if(E>0){const L=.5/Math.sqrt(E+1);this._w=.25/L,this._x=(S-b)*L,this._y=(h-x)*L,this._z=(g-l)*L}else if(s>_&&s>A){const L=2*Math.sqrt(1+s-_-A);this._w=(S-b)/L,this._x=.25*L,this._y=(l+g)/L,this._z=(h+x)/L}else if(_>A){const L=2*Math.sqrt(1+_-s-A);this._w=(h-x)/L,this._x=(l+g)/L,this._y=.25*L,this._z=(b+S)/L}else{const L=2*Math.sqrt(1+A-s-_);this._w=(g-l)/L,this._x=(h+x)/L,this._y=(b+S)/L,this._z=.25*L}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let s=e.dot(t)+1;return s<Number.EPSILON?(s=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=s):(this._x=0,this._y=-e.z,this._z=e.y,this._w=s)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=s),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Yi(this.dot(e),-1,1)))}rotateTowards(e,t){const s=this.angleTo(e);if(0===s)return this;const l=Math.min(1,t/s);return this.slerp(e,l),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const s=e._x,l=e._y,h=e._z,g=e._w,_=t._x,b=t._y,x=t._z,S=t._w;return this._x=s*S+g*_+l*x-h*b,this._y=l*S+g*b+h*_-s*x,this._z=h*S+g*x+s*b-l*_,this._w=g*S-s*_-l*b-h*x,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const s=this._x,l=this._y,h=this._z,g=this._w;let _=g*e._w+s*e._x+l*e._y+h*e._z;if(_<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,_=-_):this.copy(e),_>=1)return this._w=g,this._x=s,this._y=l,this._z=h,this;const b=1-_*_;if(b<=Number.EPSILON){const L=1-t;return this._w=L*g+t*this._w,this._x=L*s+t*this._x,this._y=L*l+t*this._y,this._z=L*h+t*this._z,this.normalize(),this._onChangeCallback(),this}const x=Math.sqrt(b),S=Math.atan2(x,_),A=Math.sin((1-t)*S)/x,E=Math.sin(t*S)/x;return this._w=g*A+this._w*E,this._x=s*A+this._x*E,this._y=l*A+this._y*E,this._z=h*A+this._z*E,this._onChangeCallback(),this}slerpQuaternions(e,t,s){return this.copy(e).slerp(t,s)}random(){const e=Math.random(),t=Math.sqrt(1-e),s=Math.sqrt(e),l=2*Math.PI*Math.random(),h=2*Math.PI*Math.random();return this.set(t*Math.cos(l),s*Math.sin(h),s*Math.cos(h),t*Math.sin(l))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class le{constructor(e=0,t=0,s=0){le.prototype.isVector3=!0,this.x=e,this.y=t,this.z=s}set(e,t,s){return void 0===s&&(s=this.z),this.x=e,this.y=t,this.z=s,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(ml.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(ml.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,s=this.y,l=this.z,h=e.elements;return this.x=h[0]*t+h[3]*s+h[6]*l,this.y=h[1]*t+h[4]*s+h[7]*l,this.z=h[2]*t+h[5]*s+h[8]*l,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,s=this.y,l=this.z,h=e.elements,g=1/(h[3]*t+h[7]*s+h[11]*l+h[15]);return this.x=(h[0]*t+h[4]*s+h[8]*l+h[12])*g,this.y=(h[1]*t+h[5]*s+h[9]*l+h[13])*g,this.z=(h[2]*t+h[6]*s+h[10]*l+h[14])*g,this}applyQuaternion(e){const t=this.x,s=this.y,l=this.z,h=e.x,g=e.y,_=e.z,b=e.w,x=b*t+g*l-_*s,S=b*s+_*t-h*l,A=b*l+h*s-g*t,E=-h*t-g*s-_*l;return this.x=x*b+E*-h+S*-_-A*-g,this.y=S*b+E*-g+A*-h-x*-_,this.z=A*b+E*-_+x*-g-S*-h,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,s=this.y,l=this.z,h=e.elements;return this.x=h[0]*t+h[4]*s+h[8]*l,this.y=h[1]*t+h[5]*s+h[9]*l,this.z=h[2]*t+h[6]*s+h[10]*l,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const s=this.length();return this.divideScalar(s||1).multiplyScalar(Math.max(e,Math.min(t,s)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,s){return this.x=e.x+(t.x-e.x)*s,this.y=e.y+(t.y-e.y)*s,this.z=e.z+(t.z-e.z)*s,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const s=e.x,l=e.y,h=e.z,g=t.x,_=t.y,b=t.z;return this.x=l*b-h*_,this.y=h*g-s*b,this.z=s*_-l*g,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const s=e.dot(this)/t;return this.copy(e).multiplyScalar(s)}projectOnPlane(e){return ka.copy(this).projectOnVector(e),this.sub(ka)}reflect(e){return this.sub(ka.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const s=this.dot(e)/t;return Math.acos(Yi(s,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,s=this.y-e.y,l=this.z-e.z;return t*t+s*s+l*l}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,s){const l=Math.sin(t)*e;return this.x=l*Math.sin(s),this.y=Math.cos(t)*e,this.z=l*Math.cos(s),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,s){return this.x=e*Math.sin(t),this.y=s,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),s=this.setFromMatrixColumn(e,1).length(),l=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=s,this.z=l,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,s=Math.sqrt(1-e**2);return this.x=s*Math.cos(t),this.y=s*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const ka=new le,ml=new Ns;class so{constructor(e=new le(1/0,1/0,1/0),t=new le(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,s=1/0,l=1/0,h=-1/0,g=-1/0,_=-1/0;for(let b=0,x=e.length;b<x;b+=3){const S=e[b],A=e[b+1],E=e[b+2];S<t&&(t=S),A<s&&(s=A),E<l&&(l=E),S>h&&(h=S),A>g&&(g=A),E>_&&(_=E)}return this.min.set(t,s,l),this.max.set(h,g,_),this}setFromBufferAttribute(e){let t=1/0,s=1/0,l=1/0,h=-1/0,g=-1/0,_=-1/0;for(let b=0,x=e.count;b<x;b++){const S=e.getX(b),A=e.getY(b),E=e.getZ(b);S<t&&(t=S),A<s&&(s=A),E<l&&(l=E),S>h&&(h=S),A>g&&(g=A),E>_&&(_=E)}return this.min.set(t,s,l),this.max.set(h,g,_),this}setFromPoints(e){this.makeEmpty();for(let t=0,s=e.length;t<s;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const s=oo.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(s),this.max.copy(e).add(s),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const s=e.geometry;if(void 0!==s)if(t&&null!=s.attributes&&void 0!==s.attributes.position){const h=s.attributes.position;for(let g=0,_=h.count;g<_;g++)oo.fromBufferAttribute(h,g).applyMatrix4(e.matrixWorld),this.expandByPoint(oo)}else null===s.boundingBox&&s.computeBoundingBox(),To.copy(s.boundingBox),To.applyMatrix4(e.matrixWorld),this.union(To);const l=e.children;for(let h=0,g=l.length;h<g;h++)this.expandByObject(l[h],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,oo),oo.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,s;return e.normal.x>0?(t=e.normal.x*this.min.x,s=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,s=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,s+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,s+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,s+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,s+=e.normal.z*this.min.z),t<=-e.constant&&s>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Ga),Er.subVectors(this.max,Ga),jo.subVectors(e.a,Ga),na.subVectors(e.b,Ga),ia.subVectors(e.c,Ga),ao.subVectors(na,jo),Mo.subVectors(ia,na),ra.subVectors(jo,ia);let t=[0,-ao.z,ao.y,0,-Mo.z,Mo.y,0,-ra.z,ra.y,ao.z,0,-ao.x,Mo.z,0,-Mo.x,ra.z,0,-ra.x,-ao.y,ao.x,0,-Mo.y,Mo.x,0,-ra.y,ra.x,0];return!(!hc(t,jo,na,ia,Er)||(t=[1,0,0,0,1,0,0,0,1],!hc(t,jo,na,ia,Er)))&&(Ds.crossVectors(ao,Mo),t=[Ds.x,Ds.y,Ds.z],hc(t,jo,na,ia,Er))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return oo.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=.5*this.getSize(oo).length(),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||($s[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),$s[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),$s[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),$s[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),$s[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),$s[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),$s[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),$s[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints($s)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const $s=[new le,new le,new le,new le,new le,new le,new le,new le],oo=new le,To=new so,jo=new le,na=new le,ia=new le,ao=new le,Mo=new le,ra=new le,Ga=new le,Er=new le,Ds=new le,Ei=new le;function hc(v,e,t,s,l){for(let h=0,g=v.length-3;h<=g;h+=3){Ei.fromArray(v,h);const _=l.x*Math.abs(Ei.x)+l.y*Math.abs(Ei.y)+l.z*Math.abs(Ei.z),b=e.dot(Ei),x=t.dot(Ei),S=s.dot(Ei);if(Math.max(-Math.max(b,x,S),Math.min(b,x,S))>_)return!1}return!0}const Vd=new so,gl=new le,Kc=new le;class O{constructor(e=new le,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const s=this.center;void 0!==t?s.copy(t):Vd.setFromPoints(e).getCenter(s);let l=0;for(let h=0,g=e.length;h<g;h++)l=Math.max(l,s.distanceToSquared(e[h]));return this.radius=Math.sqrt(l),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const s=this.center.distanceToSquared(e);return t.copy(e),s>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;gl.subVectors(e,this.center);const t=gl.lengthSq();if(t>this.radius*this.radius){const s=Math.sqrt(t),l=.5*(s-this.radius);this.center.addScaledVector(gl,l/s),this.radius+=l}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(Kc.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(gl.copy(e.center).add(Kc)),this.expandByPoint(gl.copy(e.center).sub(Kc))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const W=new le,B=new le,Q=new le,ue=new le,je=new le,it=new le,un=new le;class si{constructor(e=new le,t=new le(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,W)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const s=t.dot(this.direction);return s<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(s).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=W.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(W.copy(this.direction).multiplyScalar(t).add(this.origin),W.distanceToSquared(e))}distanceSqToSegment(e,t,s,l){B.copy(e).add(t).multiplyScalar(.5),Q.copy(t).sub(e).normalize(),ue.copy(this.origin).sub(B);const h=.5*e.distanceTo(t),g=-this.direction.dot(Q),_=ue.dot(this.direction),b=-ue.dot(Q),x=ue.lengthSq(),S=Math.abs(1-g*g);let A,E,L,G;if(S>0)if(A=g*b-_,E=g*_-b,G=h*S,A>=0)if(E>=-G)if(E<=G){const j=1/S;A*=j,E*=j,L=A*(A+g*E+2*_)+E*(g*A+E+2*b)+x}else E=h,A=Math.max(0,-(g*E+_)),L=-A*A+E*(E+2*b)+x;else E=-h,A=Math.max(0,-(g*E+_)),L=-A*A+E*(E+2*b)+x;else E<=-G?(A=Math.max(0,-(-g*h+_)),E=A>0?-h:Math.min(Math.max(-h,-b),h),L=-A*A+E*(E+2*b)+x):E<=G?(A=0,E=Math.min(Math.max(-h,-b),h),L=E*(E+2*b)+x):(A=Math.max(0,-(g*h+_)),E=A>0?h:Math.min(Math.max(-h,-b),h),L=-A*A+E*(E+2*b)+x);else E=g>0?-h:h,A=Math.max(0,-(g*E+_)),L=-A*A+E*(E+2*b)+x;return s&&s.copy(this.direction).multiplyScalar(A).add(this.origin),l&&l.copy(Q).multiplyScalar(E).add(B),L}intersectSphere(e,t){W.subVectors(e.center,this.origin);const s=W.dot(this.direction),l=W.dot(W)-s*s,h=e.radius*e.radius;if(l>h)return null;const g=Math.sqrt(h-l),_=s-g,b=s+g;return _<0&&b<0?null:this.at(_<0?b:_,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const s=-(this.origin.dot(e.normal)+e.constant)/t;return s>=0?s:null}intersectPlane(e,t){const s=this.distanceToPlane(e);return null===s?null:this.at(s,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let s,l,h,g,_,b;const x=1/this.direction.x,S=1/this.direction.y,A=1/this.direction.z,E=this.origin;return x>=0?(s=(e.min.x-E.x)*x,l=(e.max.x-E.x)*x):(s=(e.max.x-E.x)*x,l=(e.min.x-E.x)*x),S>=0?(h=(e.min.y-E.y)*S,g=(e.max.y-E.y)*S):(h=(e.max.y-E.y)*S,g=(e.min.y-E.y)*S),s>g||h>l||((h>s||isNaN(s))&&(s=h),(g<l||isNaN(l))&&(l=g),A>=0?(_=(e.min.z-E.z)*A,b=(e.max.z-E.z)*A):(_=(e.max.z-E.z)*A,b=(e.min.z-E.z)*A),s>b||_>l)||((_>s||s!=s)&&(s=_),(b<l||l!=l)&&(l=b),l<0)?null:this.at(s>=0?s:l,t)}intersectsBox(e){return null!==this.intersectBox(e,W)}intersectTriangle(e,t,s,l,h){je.subVectors(t,e),it.subVectors(s,e),un.crossVectors(je,it);let _,g=this.direction.dot(un);if(g>0){if(l)return null;_=1}else{if(!(g<0))return null;_=-1,g=-g}ue.subVectors(this.origin,e);const b=_*this.direction.dot(it.crossVectors(ue,it));if(b<0)return null;const x=_*this.direction.dot(je.cross(ue));if(x<0||b+x>g)return null;const S=-_*ue.dot(un);return S<0?null:this.at(S/g,h)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Gt{constructor(){Gt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,s,l,h,g,_,b,x,S,A,E,L,G,j,k){const Y=this.elements;return Y[0]=e,Y[4]=t,Y[8]=s,Y[12]=l,Y[1]=h,Y[5]=g,Y[9]=_,Y[13]=b,Y[2]=x,Y[6]=S,Y[10]=A,Y[14]=E,Y[3]=L,Y[7]=G,Y[11]=j,Y[15]=k,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Gt).fromArray(this.elements)}copy(e){const t=this.elements,s=e.elements;return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t[9]=s[9],t[10]=s[10],t[11]=s[11],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],this}copyPosition(e){const t=this.elements,s=e.elements;return t[12]=s[12],t[13]=s[13],t[14]=s[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,s){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),s.setFromMatrixColumn(this,2),this}makeBasis(e,t,s){return this.set(e.x,t.x,s.x,0,e.y,t.y,s.y,0,e.z,t.z,s.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,s=e.elements,l=1/Gn.setFromMatrixColumn(e,0).length(),h=1/Gn.setFromMatrixColumn(e,1).length(),g=1/Gn.setFromMatrixColumn(e,2).length();return t[0]=s[0]*l,t[1]=s[1]*l,t[2]=s[2]*l,t[3]=0,t[4]=s[4]*h,t[5]=s[5]*h,t[6]=s[6]*h,t[7]=0,t[8]=s[8]*g,t[9]=s[9]*g,t[10]=s[10]*g,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,s=e.x,l=e.y,h=e.z,g=Math.cos(s),_=Math.sin(s),b=Math.cos(l),x=Math.sin(l),S=Math.cos(h),A=Math.sin(h);if("XYZ"===e.order){const E=g*S,L=g*A,G=_*S,j=_*A;t[0]=b*S,t[4]=-b*A,t[8]=x,t[1]=L+G*x,t[5]=E-j*x,t[9]=-_*b,t[2]=j-E*x,t[6]=G+L*x,t[10]=g*b}else if("YXZ"===e.order){const E=b*S,L=b*A,G=x*S,j=x*A;t[0]=E+j*_,t[4]=G*_-L,t[8]=g*x,t[1]=g*A,t[5]=g*S,t[9]=-_,t[2]=L*_-G,t[6]=j+E*_,t[10]=g*b}else if("ZXY"===e.order){const E=b*S,L=b*A,G=x*S,j=x*A;t[0]=E-j*_,t[4]=-g*A,t[8]=G+L*_,t[1]=L+G*_,t[5]=g*S,t[9]=j-E*_,t[2]=-g*x,t[6]=_,t[10]=g*b}else if("ZYX"===e.order){const E=g*S,L=g*A,G=_*S,j=_*A;t[0]=b*S,t[4]=G*x-L,t[8]=E*x+j,t[1]=b*A,t[5]=j*x+E,t[9]=L*x-G,t[2]=-x,t[6]=_*b,t[10]=g*b}else if("YZX"===e.order){const E=g*b,L=g*x,G=_*b,j=_*x;t[0]=b*S,t[4]=j-E*A,t[8]=G*A+L,t[1]=A,t[5]=g*S,t[9]=-_*S,t[2]=-x*S,t[6]=L*A+G,t[10]=E-j*A}else if("XZY"===e.order){const E=g*b,L=g*x,G=_*b,j=_*x;t[0]=b*S,t[4]=-A,t[8]=x*S,t[1]=E*A+j,t[5]=g*S,t[9]=L*A-G,t[2]=G*A-L,t[6]=_*S,t[10]=j*A+E}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(ur,e,U)}lookAt(e,t,s){const l=this.elements;return V.subVectors(e,t),0===V.lengthSq()&&(V.z=1),V.normalize(),C.crossVectors(s,V),0===C.lengthSq()&&(1===Math.abs(s.z)?V.x+=1e-4:V.z+=1e-4,V.normalize(),C.crossVectors(s,V)),C.normalize(),u.crossVectors(V,C),l[0]=C.x,l[4]=u.x,l[8]=V.x,l[1]=C.y,l[5]=u.y,l[9]=V.y,l[2]=C.z,l[6]=u.z,l[10]=V.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const s=e.elements,l=t.elements,h=this.elements,g=s[0],_=s[4],b=s[8],x=s[12],S=s[1],A=s[5],E=s[9],L=s[13],G=s[2],j=s[6],k=s[10],Y=s[14],q=s[3],$=s[7],Z=s[11],se=s[15],de=l[0],_e=l[4],X=l[8],fe=l[12],Te=l[1],Ye=l[5],bt=l[9],He=l[13],Ee=l[2],at=l[6],wt=l[10],Ft=l[14],yt=l[3],Bt=l[7],It=l[11],rt=l[15];return h[0]=g*de+_*Te+b*Ee+x*yt,h[4]=g*_e+_*Ye+b*at+x*Bt,h[8]=g*X+_*bt+b*wt+x*It,h[12]=g*fe+_*He+b*Ft+x*rt,h[1]=S*de+A*Te+E*Ee+L*yt,h[5]=S*_e+A*Ye+E*at+L*Bt,h[9]=S*X+A*bt+E*wt+L*It,h[13]=S*fe+A*He+E*Ft+L*rt,h[2]=G*de+j*Te+k*Ee+Y*yt,h[6]=G*_e+j*Ye+k*at+Y*Bt,h[10]=G*X+j*bt+k*wt+Y*It,h[14]=G*fe+j*He+k*Ft+Y*rt,h[3]=q*de+$*Te+Z*Ee+se*yt,h[7]=q*_e+$*Ye+Z*at+se*Bt,h[11]=q*X+$*bt+Z*wt+se*It,h[15]=q*fe+$*He+Z*Ft+se*rt,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],s=e[4],l=e[8],h=e[12],g=e[1],_=e[5],b=e[9],x=e[13],S=e[2],A=e[6],E=e[10],L=e[14];return e[3]*(+h*b*A-l*x*A-h*_*E+s*x*E+l*_*L-s*b*L)+e[7]*(+t*b*L-t*x*E+h*g*E-l*g*L+l*x*S-h*b*S)+e[11]*(+t*x*A-t*_*L-h*g*A+s*g*L+h*_*S-s*x*S)+e[15]*(-l*_*S-t*b*A+t*_*E+l*g*A-s*g*E+s*b*S)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,s){const l=this.elements;return e.isVector3?(l[12]=e.x,l[13]=e.y,l[14]=e.z):(l[12]=e,l[13]=t,l[14]=s),this}invert(){const e=this.elements,t=e[0],s=e[1],l=e[2],h=e[3],g=e[4],_=e[5],b=e[6],x=e[7],S=e[8],A=e[9],E=e[10],L=e[11],G=e[12],j=e[13],k=e[14],Y=e[15],q=A*k*x-j*E*x+j*b*L-_*k*L-A*b*Y+_*E*Y,$=G*E*x-S*k*x-G*b*L+g*k*L+S*b*Y-g*E*Y,Z=S*j*x-G*A*x+G*_*L-g*j*L-S*_*Y+g*A*Y,se=G*A*b-S*j*b-G*_*E+g*j*E+S*_*k-g*A*k,de=t*q+s*$+l*Z+h*se;if(0===de)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const _e=1/de;return e[0]=q*_e,e[1]=(j*E*h-A*k*h-j*l*L+s*k*L+A*l*Y-s*E*Y)*_e,e[2]=(_*k*h-j*b*h+j*l*x-s*k*x-_*l*Y+s*b*Y)*_e,e[3]=(A*b*h-_*E*h-A*l*x+s*E*x+_*l*L-s*b*L)*_e,e[4]=$*_e,e[5]=(S*k*h-G*E*h+G*l*L-t*k*L-S*l*Y+t*E*Y)*_e,e[6]=(G*b*h-g*k*h-G*l*x+t*k*x+g*l*Y-t*b*Y)*_e,e[7]=(g*E*h-S*b*h+S*l*x-t*E*x-g*l*L+t*b*L)*_e,e[8]=Z*_e,e[9]=(G*A*h-S*j*h-G*s*L+t*j*L+S*s*Y-t*A*Y)*_e,e[10]=(g*j*h-G*_*h+G*s*x-t*j*x-g*s*Y+t*_*Y)*_e,e[11]=(S*_*h-g*A*h-S*s*x+t*A*x+g*s*L-t*_*L)*_e,e[12]=se*_e,e[13]=(S*j*l-G*A*l+G*s*E-t*j*E-S*s*k+t*A*k)*_e,e[14]=(G*_*l-g*j*l-G*s*b+t*j*b+g*s*k-t*_*k)*_e,e[15]=(g*A*l-S*_*l+S*s*b-t*A*b-g*s*E+t*_*E)*_e,this}scale(e){const t=this.elements,s=e.x,l=e.y,h=e.z;return t[0]*=s,t[4]*=l,t[8]*=h,t[1]*=s,t[5]*=l,t[9]*=h,t[2]*=s,t[6]*=l,t[10]*=h,t[3]*=s,t[7]*=l,t[11]*=h,this}getMaxScaleOnAxis(){const e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))}makeTranslation(e,t,s){return this.set(1,0,0,e,0,1,0,t,0,0,1,s,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),s=Math.sin(e);return this.set(1,0,0,0,0,t,-s,0,0,s,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),s=Math.sin(e);return this.set(t,0,s,0,0,1,0,0,-s,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),s=Math.sin(e);return this.set(t,-s,0,0,s,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const s=Math.cos(t),l=Math.sin(t),h=1-s,g=e.x,_=e.y,b=e.z,x=h*g,S=h*_;return this.set(x*g+s,x*_-l*b,x*b+l*_,0,x*_+l*b,S*_+s,S*b-l*g,0,x*b-l*_,S*b+l*g,h*b*b+s,0,0,0,0,1),this}makeScale(e,t,s){return this.set(e,0,0,0,0,t,0,0,0,0,s,0,0,0,0,1),this}makeShear(e,t,s,l,h,g){return this.set(1,s,h,0,e,1,g,0,t,l,1,0,0,0,0,1),this}compose(e,t,s){const l=this.elements,h=t._x,g=t._y,_=t._z,b=t._w,x=h+h,S=g+g,A=_+_,E=h*x,L=h*S,G=h*A,j=g*S,k=g*A,Y=_*A,q=b*x,$=b*S,Z=b*A,se=s.x,de=s.y,_e=s.z;return l[0]=(1-(j+Y))*se,l[1]=(L+Z)*se,l[2]=(G-$)*se,l[3]=0,l[4]=(L-Z)*de,l[5]=(1-(E+Y))*de,l[6]=(k+q)*de,l[7]=0,l[8]=(G+$)*_e,l[9]=(k-q)*_e,l[10]=(1-(E+j))*_e,l[11]=0,l[12]=e.x,l[13]=e.y,l[14]=e.z,l[15]=1,this}decompose(e,t,s){const l=this.elements;let h=Gn.set(l[0],l[1],l[2]).length();const g=Gn.set(l[4],l[5],l[6]).length(),_=Gn.set(l[8],l[9],l[10]).length();this.determinant()<0&&(h=-h),e.x=l[12],e.y=l[13],e.z=l[14],Ln.copy(this);const x=1/h,S=1/g,A=1/_;return Ln.elements[0]*=x,Ln.elements[1]*=x,Ln.elements[2]*=x,Ln.elements[4]*=S,Ln.elements[5]*=S,Ln.elements[6]*=S,Ln.elements[8]*=A,Ln.elements[9]*=A,Ln.elements[10]*=A,t.setFromRotationMatrix(Ln),s.x=h,s.y=g,s.z=_,this}makePerspective(e,t,s,l,h,g){const _=this.elements,x=2*h/(s-l),S=(t+e)/(t-e),A=(s+l)/(s-l),E=-(g+h)/(g-h),L=-2*g*h/(g-h);return _[0]=2*h/(t-e),_[4]=0,_[8]=S,_[12]=0,_[1]=0,_[5]=x,_[9]=A,_[13]=0,_[2]=0,_[6]=0,_[10]=E,_[14]=L,_[3]=0,_[7]=0,_[11]=-1,_[15]=0,this}makeOrthographic(e,t,s,l,h,g){const _=this.elements,b=1/(t-e),x=1/(s-l),S=1/(g-h),A=(t+e)*b,E=(s+l)*x,L=(g+h)*S;return _[0]=2*b,_[4]=0,_[8]=0,_[12]=-A,_[1]=0,_[5]=2*x,_[9]=0,_[13]=-E,_[2]=0,_[6]=0,_[10]=-2*S,_[14]=-L,_[3]=0,_[7]=0,_[11]=0,_[15]=1,this}equals(e){const t=this.elements,s=e.elements;for(let l=0;l<16;l++)if(t[l]!==s[l])return!1;return!0}fromArray(e,t=0){for(let s=0;s<16;s++)this.elements[s]=e[s+t];return this}toArray(e=[],t=0){const s=this.elements;return e[t]=s[0],e[t+1]=s[1],e[t+2]=s[2],e[t+3]=s[3],e[t+4]=s[4],e[t+5]=s[5],e[t+6]=s[6],e[t+7]=s[7],e[t+8]=s[8],e[t+9]=s[9],e[t+10]=s[10],e[t+11]=s[11],e[t+12]=s[12],e[t+13]=s[13],e[t+14]=s[14],e[t+15]=s[15],e}}const Gn=new le,Ln=new Gt,ur=new le(0,0,0),U=new le(1,1,1),C=new le,u=new le,V=new le,Xe=new Gt,sn=new Ns;let ai=(()=>{class v{constructor(t=0,s=0,l=0,h=v.DefaultOrder){this.isEuler=!0,this._x=t,this._y=s,this._z=l,this._order=h}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,s,l,h=this._order){return this._x=t,this._y=s,this._z=l,this._order=h,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,s=this._order,l=!0){const h=t.elements,g=h[0],_=h[4],b=h[8],x=h[1],S=h[5],A=h[9],E=h[2],L=h[6],G=h[10];switch(s){case"XYZ":this._y=Math.asin(Yi(b,-1,1)),Math.abs(b)<.9999999?(this._x=Math.atan2(-A,G),this._z=Math.atan2(-_,g)):(this._x=Math.atan2(L,S),this._z=0);break;case"YXZ":this._x=Math.asin(-Yi(A,-1,1)),Math.abs(A)<.9999999?(this._y=Math.atan2(b,G),this._z=Math.atan2(x,S)):(this._y=Math.atan2(-E,g),this._z=0);break;case"ZXY":this._x=Math.asin(Yi(L,-1,1)),Math.abs(L)<.9999999?(this._y=Math.atan2(-E,G),this._z=Math.atan2(-_,S)):(this._y=0,this._z=Math.atan2(x,g));break;case"ZYX":this._y=Math.asin(-Yi(E,-1,1)),Math.abs(E)<.9999999?(this._x=Math.atan2(L,G),this._z=Math.atan2(x,g)):(this._x=0,this._z=Math.atan2(-_,S));break;case"YZX":this._z=Math.asin(Yi(x,-1,1)),Math.abs(x)<.9999999?(this._x=Math.atan2(-A,S),this._y=Math.atan2(-E,g)):(this._x=0,this._y=Math.atan2(b,G));break;case"XZY":this._z=Math.asin(-Yi(_,-1,1)),Math.abs(_)<.9999999?(this._x=Math.atan2(L,S),this._y=Math.atan2(b,g)):(this._x=Math.atan2(-A,G),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+s)}return this._order=s,!0===l&&this._onChangeCallback(),this}setFromQuaternion(t,s,l){return Xe.makeRotationFromQuaternion(t),this.setFromRotationMatrix(Xe,s,l)}setFromVector3(t,s=this._order){return this.set(t.x,t.y,t.z,s)}reorder(t){return sn.setFromEuler(this),this.setFromQuaternion(sn,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],s=0){return t[s]=this._x,t[s+1]=this._y,t[s+2]=this._z,t[s+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}return v.DefaultOrder="XYZ",v.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],v})();class qi{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}isEnabled(e){return 0!=(this.mask&(1<<e|0))}}let yr=0;const ba=new le,Jr=new Ns,lo=new Gt,Wl=new le,sa=new le,qc=new le,fc=new Ns,pc=new le(1,0,0),Xc=new le(0,1,0),Qc=new le(0,0,1),eu={type:"added"},xo={type:"removed"};let ws=(()=>{class v extends Fo{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:yr++}),this.uuid=Ts(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=v.DefaultUp.clone();const t=new le,s=new ai,l=new Ns,h=new le(1,1,1);s._onChange(function g(){l.setFromEuler(s,!1)}),l._onChange(function _(){s.setFromQuaternion(l,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:s},quaternion:{configurable:!0,enumerable:!0,value:l},scale:{configurable:!0,enumerable:!0,value:h},modelViewMatrix:{value:new Gt},normalMatrix:{value:new mn}}),this.matrix=new Gt,this.matrixWorld=new Gt,this.matrixAutoUpdate=v.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=v.DefaultMatrixWorldAutoUpdate,this.layers=new qi,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,s){this.quaternion.setFromAxisAngle(t,s)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,s){return Jr.setFromAxisAngle(t,s),this.quaternion.multiply(Jr),this}rotateOnWorldAxis(t,s){return Jr.setFromAxisAngle(t,s),this.quaternion.premultiply(Jr),this}rotateX(t){return this.rotateOnAxis(pc,t)}rotateY(t){return this.rotateOnAxis(Xc,t)}rotateZ(t){return this.rotateOnAxis(Qc,t)}translateOnAxis(t,s){return ba.copy(t).applyQuaternion(this.quaternion),this.position.add(ba.multiplyScalar(s)),this}translateX(t){return this.translateOnAxis(pc,t)}translateY(t){return this.translateOnAxis(Xc,t)}translateZ(t){return this.translateOnAxis(Qc,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(lo.copy(this.matrixWorld).invert())}lookAt(t,s,l){t.isVector3?Wl.copy(t):Wl.set(t,s,l);const h=this.parent;this.updateWorldMatrix(!0,!1),sa.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?lo.lookAt(sa,Wl,this.up):lo.lookAt(Wl,sa,this.up),this.quaternion.setFromRotationMatrix(lo),h&&(lo.extractRotation(h.matrixWorld),Jr.setFromRotationMatrix(lo),this.quaternion.premultiply(Jr.invert()))}add(t){if(arguments.length>1){for(let s=0;s<arguments.length;s++)this.add(arguments[s]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(eu)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let l=0;l<arguments.length;l++)this.remove(arguments[l]);return this}const s=this.children.indexOf(t);return-1!==s&&(t.parent=null,this.children.splice(s,1),t.dispatchEvent(xo)),this}removeFromParent(){const t=this.parent;return null!==t&&t.remove(this),this}clear(){for(let t=0;t<this.children.length;t++){const s=this.children[t];s.parent=null,s.dispatchEvent(xo)}return this.children.length=0,this}attach(t){return this.updateWorldMatrix(!0,!1),lo.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),lo.multiply(t.parent.matrixWorld)),t.applyMatrix4(lo),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,s){if(this[t]===s)return this;for(let l=0,h=this.children.length;l<h;l++){const _=this.children[l].getObjectByProperty(t,s);if(void 0!==_)return _}}getObjectsByProperty(t,s){let l=[];this[t]===s&&l.push(this);for(let h=0,g=this.children.length;h<g;h++){const _=this.children[h].getObjectsByProperty(t,s);_.length>0&&(l=l.concat(_))}return l}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(sa,t,qc),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(sa,fc,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const s=this.matrixWorld.elements;return t.set(s[8],s[9],s[10]).normalize()}raycast(){}traverse(t){t(this);const s=this.children;for(let l=0,h=s.length;l<h;l++)s[l].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);const s=this.children;for(let l=0,h=s.length;l<h;l++)s[l].traverseVisible(t)}traverseAncestors(t){const s=this.parent;null!==s&&(t(s),s.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const s=this.children;for(let l=0,h=s.length;l<h;l++){const g=s[l];(!0===g.matrixWorldAutoUpdate||!0===t)&&g.updateMatrixWorld(t)}}updateWorldMatrix(t,s){const l=this.parent;if(!0===t&&null!==l&&!0===l.matrixWorldAutoUpdate&&l.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===s){const h=this.children;for(let g=0,_=h.length;g<_;g++){const b=h[g];!0===b.matrixWorldAutoUpdate&&b.updateWorldMatrix(!1,!0)}}}toJSON(t){const s=void 0===t||"string"==typeof t,l={};s&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},l.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const h={};function g(b,x){return void 0===b[x.uuid]&&(b[x.uuid]=x.toJSON(t)),x.uuid}if(h.uuid=this.uuid,h.type=this.type,""!==this.name&&(h.name=this.name),!0===this.castShadow&&(h.castShadow=!0),!0===this.receiveShadow&&(h.receiveShadow=!0),!1===this.visible&&(h.visible=!1),!1===this.frustumCulled&&(h.frustumCulled=!1),0!==this.renderOrder&&(h.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(h.userData=this.userData),h.layers=this.layers.mask,h.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(h.matrixAutoUpdate=!1),this.isInstancedMesh&&(h.type="InstancedMesh",h.count=this.count,h.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(h.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?h.background=this.background.toJSON():this.background.isTexture&&(h.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(h.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){h.geometry=g(t.geometries,this.geometry);const b=this.geometry.parameters;if(void 0!==b&&void 0!==b.shapes){const x=b.shapes;if(Array.isArray(x))for(let S=0,A=x.length;S<A;S++)g(t.shapes,x[S]);else g(t.shapes,x)}}if(this.isSkinnedMesh&&(h.bindMode=this.bindMode,h.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(g(t.skeletons,this.skeleton),h.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const b=[];for(let x=0,S=this.material.length;x<S;x++)b.push(g(t.materials,this.material[x]));h.material=b}else h.material=g(t.materials,this.material);if(this.children.length>0){h.children=[];for(let b=0;b<this.children.length;b++)h.children.push(this.children[b].toJSON(t).object)}if(this.animations.length>0){h.animations=[];for(let b=0;b<this.animations.length;b++)h.animations.push(g(t.animations,this.animations[b]))}if(s){const b=_(t.geometries),x=_(t.materials),S=_(t.textures),A=_(t.images),E=_(t.shapes),L=_(t.skeletons),G=_(t.animations),j=_(t.nodes);b.length>0&&(l.geometries=b),x.length>0&&(l.materials=x),S.length>0&&(l.textures=S),A.length>0&&(l.images=A),E.length>0&&(l.shapes=E),L.length>0&&(l.skeletons=L),G.length>0&&(l.animations=G),j.length>0&&(l.nodes=j)}return l.object=h,l;function _(b){const x=[];for(const S in b){const A=b[S];delete A.metadata,x.push(A)}return x}}clone(t){return(new this.constructor).copy(this,t)}copy(t,s=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===s)for(let l=0;l<t.children.length;l++)this.add(t.children[l].clone());return this}}return v.DefaultUp=new le(0,1,0),v.DefaultMatrixAutoUpdate=!0,v.DefaultMatrixWorldAutoUpdate=!0,v})();const Ys=new le,ko=new le,Ji=new le,fs=new le,Ar=new le,Va=new le,oa=new le,Go=new le,$l=new le,Ua=new le;class co{constructor(e=new le,t=new le,s=new le){this.a=e,this.b=t,this.c=s}static getNormal(e,t,s,l){l.subVectors(s,t),Ys.subVectors(e,t),l.cross(Ys);const h=l.lengthSq();return h>0?l.multiplyScalar(1/Math.sqrt(h)):l.set(0,0,0)}static getBarycoord(e,t,s,l,h){Ys.subVectors(l,t),ko.subVectors(s,t),Ji.subVectors(e,t);const g=Ys.dot(Ys),_=Ys.dot(ko),b=Ys.dot(Ji),x=ko.dot(ko),S=ko.dot(Ji),A=g*x-_*_;if(0===A)return h.set(-2,-1,-1);const E=1/A,L=(x*b-_*S)*E,G=(g*S-_*b)*E;return h.set(1-L-G,G,L)}static containsPoint(e,t,s,l){return this.getBarycoord(e,t,s,l,fs),fs.x>=0&&fs.y>=0&&fs.x+fs.y<=1}static getUV(e,t,s,l,h,g,_,b){return this.getBarycoord(e,t,s,l,fs),b.set(0,0),b.addScaledVector(h,fs.x),b.addScaledVector(g,fs.y),b.addScaledVector(_,fs.z),b}static isFrontFacing(e,t,s,l){return Ys.subVectors(s,t),ko.subVectors(e,t),Ys.cross(ko).dot(l)<0}set(e,t,s){return this.a.copy(e),this.b.copy(t),this.c.copy(s),this}setFromPointsAndIndices(e,t,s,l){return this.a.copy(e[t]),this.b.copy(e[s]),this.c.copy(e[l]),this}setFromAttributeAndIndices(e,t,s,l){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,s),this.c.fromBufferAttribute(e,l),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Ys.subVectors(this.c,this.b),ko.subVectors(this.a,this.b),.5*Ys.cross(ko).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return co.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return co.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,s,l,h){return co.getUV(e,this.a,this.b,this.c,t,s,l,h)}containsPoint(e){return co.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return co.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const s=this.a,l=this.b,h=this.c;let g,_;Ar.subVectors(l,s),Va.subVectors(h,s),Go.subVectors(e,s);const b=Ar.dot(Go),x=Va.dot(Go);if(b<=0&&x<=0)return t.copy(s);$l.subVectors(e,l);const S=Ar.dot($l),A=Va.dot($l);if(S>=0&&A<=S)return t.copy(l);const E=b*A-S*x;if(E<=0&&b>=0&&S<=0)return g=b/(b-S),t.copy(s).addScaledVector(Ar,g);Ua.subVectors(e,h);const L=Ar.dot(Ua),G=Va.dot(Ua);if(G>=0&&L<=G)return t.copy(h);const j=L*x-b*G;if(j<=0&&x>=0&&G<=0)return _=x/(x-G),t.copy(s).addScaledVector(Va,_);const k=S*G-L*A;if(k<=0&&A-S>=0&&L-G>=0)return oa.subVectors(h,l),_=(A-S)/(A-S+(L-G)),t.copy(l).addScaledVector(oa,_);const Y=1/(k+j+E);return g=j*Y,_=E*Y,t.copy(s).addScaledVector(Ar,g).addScaledVector(Va,_)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let _l=0;class br extends Fo{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:_l++}),this.uuid=Ts(),this.name="",this.type="Material",this.blending=_n,this.side=Lt,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=Ge,this.blendDst=Me,this.blendEquation=Ne,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=jn,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const s=e[t];if(void 0===s){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}const l=this[t];void 0!==l?l&&l.isColor?l.set(s):l&&l.isVector3&&s&&s.isVector3?l.copy(s):this[t]=s:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const s={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function l(h){const g=[];for(const _ in h){const b=h[_];delete b.metadata,g.push(b)}return g}if(s.uuid=this.uuid,s.type=this.type,""!==this.name&&(s.name=this.name),this.color&&this.color.isColor&&(s.color=this.color.getHex()),void 0!==this.roughness&&(s.roughness=this.roughness),void 0!==this.metalness&&(s.metalness=this.metalness),void 0!==this.sheen&&(s.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(s.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(s.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(s.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(s.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(s.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(s.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(s.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(s.shininess=this.shininess),void 0!==this.clearcoat&&(s.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(s.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(s.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(s.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(s.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,s.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(s.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(s.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(s.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(s.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(s.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(s.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(s.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(s.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(s.lightMap=this.lightMap.toJSON(e).uuid,s.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(s.aoMap=this.aoMap.toJSON(e).uuid,s.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(s.bumpMap=this.bumpMap.toJSON(e).uuid,s.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(s.normalMap=this.normalMap.toJSON(e).uuid,s.normalMapType=this.normalMapType,s.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(s.displacementMap=this.displacementMap.toJSON(e).uuid,s.displacementScale=this.displacementScale,s.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(s.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(s.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(s.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(s.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(s.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(s.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(s.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(s.combine=this.combine)),void 0!==this.envMapIntensity&&(s.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(s.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(s.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(s.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(s.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(s.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(s.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(s.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(s.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(s.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(s.size=this.size),null!==this.shadowSide&&(s.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(s.sizeAttenuation=this.sizeAttenuation),this.blending!==_n&&(s.blending=this.blending),this.side!==Lt&&(s.side=this.side),this.vertexColors&&(s.vertexColors=!0),this.opacity<1&&(s.opacity=this.opacity),!0===this.transparent&&(s.transparent=this.transparent),s.depthFunc=this.depthFunc,s.depthTest=this.depthTest,s.depthWrite=this.depthWrite,s.colorWrite=this.colorWrite,s.stencilWrite=this.stencilWrite,s.stencilWriteMask=this.stencilWriteMask,s.stencilFunc=this.stencilFunc,s.stencilRef=this.stencilRef,s.stencilFuncMask=this.stencilFuncMask,s.stencilFail=this.stencilFail,s.stencilZFail=this.stencilZFail,s.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(s.rotation=this.rotation),!0===this.polygonOffset&&(s.polygonOffset=!0),0!==this.polygonOffsetFactor&&(s.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(s.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(s.linewidth=this.linewidth),void 0!==this.dashSize&&(s.dashSize=this.dashSize),void 0!==this.gapSize&&(s.gapSize=this.gapSize),void 0!==this.scale&&(s.scale=this.scale),!0===this.dithering&&(s.dithering=!0),this.alphaTest>0&&(s.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(s.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(s.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(s.wireframe=this.wireframe),this.wireframeLinewidth>1&&(s.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(s.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(s.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(s.flatShading=this.flatShading),!1===this.visible&&(s.visible=!1),!1===this.toneMapped&&(s.toneMapped=!1),!1===this.fog&&(s.fog=!1),Object.keys(this.userData).length>0&&(s.userData=this.userData),t){const h=l(e.textures),g=l(e.images);h.length>0&&(s.textures=h),g.length>0&&(s.images=g)}return s}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let s=null;if(null!==t){const l=t.length;s=new Array(l);for(let h=0;h!==l;++h)s[h]=t[h].clone()}return this.clippingPlanes=s,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}class Ir extends br{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Wt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Mn,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const mr=new le,aa=new ht;class ji{constructor(e,t,s=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=s,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,s){e*=this.itemSize,s*=t.itemSize;for(let l=0,h=this.itemSize;l<h;l++)this.array[e+l]=t.array[s+l];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,s=this.count;t<s;t++)aa.fromBufferAttribute(this,t),aa.applyMatrix3(e),this.setXY(t,aa.x,aa.y);else if(3===this.itemSize)for(let t=0,s=this.count;t<s;t++)mr.fromBufferAttribute(this,t),mr.applyMatrix3(e),this.setXYZ(t,mr.x,mr.y,mr.z);return this}applyMatrix4(e){for(let t=0,s=this.count;t<s;t++)mr.fromBufferAttribute(this,t),mr.applyMatrix4(e),this.setXYZ(t,mr.x,mr.y,mr.z);return this}applyNormalMatrix(e){for(let t=0,s=this.count;t<s;t++)mr.fromBufferAttribute(this,t),mr.applyNormalMatrix(e),this.setXYZ(t,mr.x,mr.y,mr.z);return this}transformDirection(e){for(let t=0,s=this.count;t<s;t++)mr.fromBufferAttribute(this,t),mr.transformDirection(e),this.setXYZ(t,mr.x,mr.y,mr.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=hs(t,this.array)),t}setX(e,t){return this.normalized&&(t=_i(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=hs(t,this.array)),t}setY(e,t){return this.normalized&&(t=_i(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=hs(t,this.array)),t}setZ(e,t){return this.normalized&&(t=_i(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=hs(t,this.array)),t}setW(e,t){return this.normalized&&(t=_i(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,s){return e*=this.itemSize,this.normalized&&(t=_i(t,this.array),s=_i(s,this.array)),this.array[e+0]=t,this.array[e+1]=s,this}setXYZ(e,t,s,l){return e*=this.itemSize,this.normalized&&(t=_i(t,this.array),s=_i(s,this.array),l=_i(l,this.array)),this.array[e+0]=t,this.array[e+1]=s,this.array[e+2]=l,this}setXYZW(e,t,s,l,h){return e*=this.itemSize,this.normalized&&(t=_i(t,this.array),s=_i(s,this.array),l=_i(l,this.array),h=_i(h,this.array)),this.array[e+0]=t,this.array[e+1]=s,this.array[e+2]=l,this.array[e+3]=h,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),35044!==this.usage&&(e.usage=this.usage),(0!==this.updateRange.offset||-1!==this.updateRange.count)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class $u extends ji{constructor(e,t,s){super(new Uint16Array(e),t,s)}}class Ha extends ji{constructor(e,t,s){super(new Uint32Array(e),t,s)}}class dn extends ji{constructor(e,t,s){super(new Float32Array(e),t,s)}}let tu=0;const Zr=new Gt,Yu=new ws,bl=new le,mi=new so,Ju=new so,Pr=new le;class Zn extends Fo{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:tu++}),this.uuid=Ts(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return this.index=Array.isArray(e)?new(Wu(e)?Ha:$u)(e,1):e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,s=0){this.groups.push({start:e,count:t,materialIndex:s})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const s=this.attributes.normal;if(void 0!==s){const h=(new mn).getNormalMatrix(e);s.applyNormalMatrix(h),s.needsUpdate=!0}const l=this.attributes.tangent;return void 0!==l&&(l.transformDirection(e),l.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return Zr.makeRotationFromQuaternion(e),this.applyMatrix4(Zr),this}rotateX(e){return Zr.makeRotationX(e),this.applyMatrix4(Zr),this}rotateY(e){return Zr.makeRotationY(e),this.applyMatrix4(Zr),this}rotateZ(e){return Zr.makeRotationZ(e),this.applyMatrix4(Zr),this}translate(e,t,s){return Zr.makeTranslation(e,t,s),this.applyMatrix4(Zr),this}scale(e,t,s){return Zr.makeScale(e,t,s),this.applyMatrix4(Zr),this}lookAt(e){return Yu.lookAt(e),Yu.updateMatrix(),this.applyMatrix4(Yu.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(bl).negate(),this.translate(bl.x,bl.y,bl.z),this}setFromPoints(e){const t=[];for(let s=0,l=e.length;s<l;s++){const h=e[s];t.push(h.x,h.y,h.z||0)}return this.setAttribute("position",new dn(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new so);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new le(-1/0,-1/0,-1/0),new le(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let s=0,l=t.length;s<l;s++)mi.setFromBufferAttribute(t[s]),this.morphTargetsRelative?(Pr.addVectors(this.boundingBox.min,mi.min),this.boundingBox.expandByPoint(Pr),Pr.addVectors(this.boundingBox.max,mi.max),this.boundingBox.expandByPoint(Pr)):(this.boundingBox.expandByPoint(mi.min),this.boundingBox.expandByPoint(mi.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new O);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new le,1/0);if(e){const s=this.boundingSphere.center;if(mi.setFromBufferAttribute(e),t)for(let h=0,g=t.length;h<g;h++)Ju.setFromBufferAttribute(t[h]),this.morphTargetsRelative?(Pr.addVectors(mi.min,Ju.min),mi.expandByPoint(Pr),Pr.addVectors(mi.max,Ju.max),mi.expandByPoint(Pr)):(mi.expandByPoint(Ju.min),mi.expandByPoint(Ju.max));mi.getCenter(s);let l=0;for(let h=0,g=e.count;h<g;h++)Pr.fromBufferAttribute(e,h),l=Math.max(l,s.distanceToSquared(Pr));if(t)for(let h=0,g=t.length;h<g;h++){const _=t[h],b=this.morphTargetsRelative;for(let x=0,S=_.count;x<S;x++)Pr.fromBufferAttribute(_,x),b&&(bl.fromBufferAttribute(e,x),Pr.add(bl)),l=Math.max(l,s.distanceToSquared(Pr))}this.boundingSphere.radius=Math.sqrt(l),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const s=e.array,l=t.position.array,h=t.normal.array,g=t.uv.array,_=l.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new ji(new Float32Array(4*_),4));const b=this.getAttribute("tangent").array,x=[],S=[];for(let Te=0;Te<_;Te++)x[Te]=new le,S[Te]=new le;const A=new le,E=new le,L=new le,G=new ht,j=new ht,k=new ht,Y=new le,q=new le;function $(Te,Ye,bt){A.fromArray(l,3*Te),E.fromArray(l,3*Ye),L.fromArray(l,3*bt),G.fromArray(g,2*Te),j.fromArray(g,2*Ye),k.fromArray(g,2*bt),E.sub(A),L.sub(A),j.sub(G),k.sub(G);const He=1/(j.x*k.y-k.x*j.y);isFinite(He)&&(Y.copy(E).multiplyScalar(k.y).addScaledVector(L,-j.y).multiplyScalar(He),q.copy(L).multiplyScalar(j.x).addScaledVector(E,-k.x).multiplyScalar(He),x[Te].add(Y),x[Ye].add(Y),x[bt].add(Y),S[Te].add(q),S[Ye].add(q),S[bt].add(q))}let Z=this.groups;0===Z.length&&(Z=[{start:0,count:s.length}]);for(let Te=0,Ye=Z.length;Te<Ye;++Te){const bt=Z[Te],He=bt.start;for(let at=He,wt=He+bt.count;at<wt;at+=3)$(s[at+0],s[at+1],s[at+2])}const se=new le,de=new le,_e=new le,X=new le;function fe(Te){_e.fromArray(h,3*Te),X.copy(_e);const Ye=x[Te];se.copy(Ye),se.sub(_e.multiplyScalar(_e.dot(Ye))).normalize(),de.crossVectors(X,Ye);const He=de.dot(S[Te])<0?-1:1;b[4*Te]=se.x,b[4*Te+1]=se.y,b[4*Te+2]=se.z,b[4*Te+3]=He}for(let Te=0,Ye=Z.length;Te<Ye;++Te){const bt=Z[Te],He=bt.start;for(let at=He,wt=He+bt.count;at<wt;at+=3)fe(s[at+0]),fe(s[at+1]),fe(s[at+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let s=this.getAttribute("normal");if(void 0===s)s=new ji(new Float32Array(3*t.count),3),this.setAttribute("normal",s);else for(let E=0,L=s.count;E<L;E++)s.setXYZ(E,0,0,0);const l=new le,h=new le,g=new le,_=new le,b=new le,x=new le,S=new le,A=new le;if(e)for(let E=0,L=e.count;E<L;E+=3){const G=e.getX(E+0),j=e.getX(E+1),k=e.getX(E+2);l.fromBufferAttribute(t,G),h.fromBufferAttribute(t,j),g.fromBufferAttribute(t,k),S.subVectors(g,h),A.subVectors(l,h),S.cross(A),_.fromBufferAttribute(s,G),b.fromBufferAttribute(s,j),x.fromBufferAttribute(s,k),_.add(S),b.add(S),x.add(S),s.setXYZ(G,_.x,_.y,_.z),s.setXYZ(j,b.x,b.y,b.z),s.setXYZ(k,x.x,x.y,x.z)}else for(let E=0,L=t.count;E<L;E+=3)l.fromBufferAttribute(t,E+0),h.fromBufferAttribute(t,E+1),g.fromBufferAttribute(t,E+2),S.subVectors(g,h),A.subVectors(l,h),S.cross(A),s.setXYZ(E+0,S.x,S.y,S.z),s.setXYZ(E+1,S.x,S.y,S.z),s.setXYZ(E+2,S.x,S.y,S.z);this.normalizeNormals(),s.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,s=e.count;t<s;t++)Pr.fromBufferAttribute(e,t),Pr.normalize(),e.setXYZ(t,Pr.x,Pr.y,Pr.z)}toNonIndexed(){function e(_,b){const x=_.array,S=_.itemSize,A=_.normalized,E=new x.constructor(b.length*S);let L=0,G=0;for(let j=0,k=b.length;j<k;j++){L=_.isInterleavedBufferAttribute?b[j]*_.data.stride+_.offset:b[j]*S;for(let Y=0;Y<S;Y++)E[G++]=x[L++]}return new ji(E,S,A)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Zn,s=this.index.array,l=this.attributes;for(const _ in l){const x=e(l[_],s);t.setAttribute(_,x)}const h=this.morphAttributes;for(const _ in h){const b=[],x=h[_];for(let S=0,A=x.length;S<A;S++){const L=e(x[S],s);b.push(L)}t.morphAttributes[_]=b}t.morphTargetsRelative=this.morphTargetsRelative;const g=this.groups;for(let _=0,b=g.length;_<b;_++){const x=g[_];t.addGroup(x.start,x.count,x.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const b=this.parameters;for(const x in b)void 0!==b[x]&&(e[x]=b[x]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const s=this.attributes;for(const b in s)e.data.attributes[b]=s[b].toJSON(e.data);const l={};let h=!1;for(const b in this.morphAttributes){const x=this.morphAttributes[b],S=[];for(let A=0,E=x.length;A<E;A++)S.push(x[A].toJSON(e.data));S.length>0&&(l[b]=S,h=!0)}h&&(e.data.morphAttributes=l,e.data.morphTargetsRelative=this.morphTargetsRelative);const g=this.groups;g.length>0&&(e.data.groups=JSON.parse(JSON.stringify(g)));const _=this.boundingSphere;return null!==_&&(e.data.boundingSphere={center:_.center.toArray(),radius:_.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const s=e.index;null!==s&&this.setIndex(s.clone(t));const l=e.attributes;for(const x in l)this.setAttribute(x,l[x].clone(t));const h=e.morphAttributes;for(const x in h){const S=[],A=h[x];for(let E=0,L=A.length;E<L;E++)S.push(A[E].clone(t));this.morphAttributes[x]=S}this.morphTargetsRelative=e.morphTargetsRelative;const g=e.groups;for(let x=0,S=g.length;x<S;x++){const A=g[x];this.addGroup(A.start,A.count,A.materialIndex)}const _=e.boundingBox;null!==_&&(this.boundingBox=_.clone());const b=e.boundingSphere;return null!==b&&(this.boundingSphere=b.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,void 0!==e.parameters&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const lf=new Gt,Tl=new si,Zu=new O,_c=new le,Vo=new le,nu=new le,Hd=new le,Tr=new le,Yl=new ht,za=new ht,Ta=new ht,Js=new le,Uo=new le;class w extends ws{constructor(e=new Zn,t=new Ir){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,s=Object.keys(t);if(s.length>0){const l=t[s[0]];if(void 0!==l){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let h=0,g=l.length;h<g;h++){const _=l[h].name||String(h);this.morphTargetInfluences.push(0),this.morphTargetDictionary[_]=h}}}}getVertexPosition(e,t){const s=this.geometry,h=s.morphAttributes.position,g=s.morphTargetsRelative;t.fromBufferAttribute(s.attributes.position,e);const _=this.morphTargetInfluences;if(h&&_){Tr.set(0,0,0);for(let b=0,x=h.length;b<x;b++){const S=_[b];0!==S&&(Hd.fromBufferAttribute(h[b],e),Tr.addScaledVector(g?Hd:Hd.sub(t),S))}t.add(Tr)}return this.isSkinnedMesh&&this.boneTransform(e,t),t}raycast(e,t){const s=this.geometry,l=this.material,h=this.matrixWorld;if(void 0===l||(null===s.boundingSphere&&s.computeBoundingSphere(),Zu.copy(s.boundingSphere),Zu.applyMatrix4(h),!1===e.ray.intersectsSphere(Zu))||(lf.copy(h).invert(),Tl.copy(e.ray).applyMatrix4(lf),null!==s.boundingBox&&!1===Tl.intersectsBox(s.boundingBox)))return;let g;const _=s.index,b=s.attributes.position,x=s.attributes.uv,S=s.attributes.uv2,A=s.groups,E=s.drawRange;if(null!==_)if(Array.isArray(l))for(let L=0,G=A.length;L<G;L++){const j=A[L],k=l[j.materialIndex];for(let $=Math.max(j.start,E.start),Z=Math.min(_.count,Math.min(j.start+j.count,E.start+E.count));$<Z;$+=3){const se=_.getX($),de=_.getX($+1),_e=_.getX($+2);g=T(this,k,e,Tl,x,S,se,de,_e),g&&(g.faceIndex=Math.floor($/3),g.face.materialIndex=j.materialIndex,t.push(g))}}else for(let j=Math.max(0,E.start),k=Math.min(_.count,E.start+E.count);j<k;j+=3){const Y=_.getX(j),q=_.getX(j+1),$=_.getX(j+2);g=T(this,l,e,Tl,x,S,Y,q,$),g&&(g.faceIndex=Math.floor(j/3),t.push(g))}else if(void 0!==b)if(Array.isArray(l))for(let L=0,G=A.length;L<G;L++){const j=A[L],k=l[j.materialIndex];for(let $=Math.max(j.start,E.start),Z=Math.min(b.count,Math.min(j.start+j.count,E.start+E.count));$<Z;$+=3)g=T(this,k,e,Tl,x,S,$,$+1,$+2),g&&(g.faceIndex=Math.floor($/3),g.face.materialIndex=j.materialIndex,t.push(g))}else for(let j=Math.max(0,E.start),k=Math.min(b.count,E.start+E.count);j<k;j+=3)g=T(this,l,e,Tl,x,S,j,j+1,j+2),g&&(g.faceIndex=Math.floor(j/3),t.push(g))}}function T(v,e,t,s,l,h,g,_,b){v.getVertexPosition(g,_c),v.getVertexPosition(_,Vo),v.getVertexPosition(b,nu);const x=function R(v,e,t,s,l,h,g,_){let b;if(b=e.side===ze?s.intersectTriangle(g,h,l,!0,_):s.intersectTriangle(l,h,g,e.side===Lt,_),null===b)return null;Uo.copy(_),Uo.applyMatrix4(v.matrixWorld);const x=t.ray.origin.distanceTo(Uo);return x<t.near||x>t.far?null:{distance:x,point:Uo.clone(),object:v}}(v,e,t,s,_c,Vo,nu,Js);if(x){l&&(Yl.fromBufferAttribute(l,g),za.fromBufferAttribute(l,_),Ta.fromBufferAttribute(l,b),x.uv=co.getUV(Js,_c,Vo,nu,Yl,za,Ta,new ht)),h&&(Yl.fromBufferAttribute(h,g),za.fromBufferAttribute(h,_),Ta.fromBufferAttribute(h,b),x.uv2=co.getUV(Js,_c,Vo,nu,Yl,za,Ta,new ht));const S={a:g,b:_,c:b,normal:new le,materialIndex:0};co.getNormal(_c,Vo,nu,S.normal),x.face=S}return x}class P extends Zn{constructor(e=1,t=1,s=1,l=1,h=1,g=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:s,widthSegments:l,heightSegments:h,depthSegments:g};const _=this;l=Math.floor(l),h=Math.floor(h),g=Math.floor(g);const b=[],x=[],S=[],A=[];let E=0,L=0;function G(j,k,Y,q,$,Z,se,de,_e,X,fe){const Te=Z/_e,Ye=se/X,bt=Z/2,He=se/2,Ee=de/2,at=_e+1,wt=X+1;let Ft=0,yt=0;const Bt=new le;for(let It=0;It<wt;It++){const rt=It*Ye-He;for(let ot=0;ot<at;ot++)Bt[j]=(ot*Te-bt)*q,Bt[k]=rt*$,Bt[Y]=Ee,x.push(Bt.x,Bt.y,Bt.z),Bt[j]=0,Bt[k]=0,Bt[Y]=de>0?1:-1,S.push(Bt.x,Bt.y,Bt.z),A.push(ot/_e),A.push(1-It/X),Ft+=1}for(let It=0;It<X;It++)for(let rt=0;rt<_e;rt++){const $t=E+rt+at*(It+1),zt=E+(rt+1)+at*(It+1),an=E+(rt+1)+at*It;b.push(E+rt+at*It,$t,an),b.push($t,zt,an),yt+=6}_.addGroup(L,yt,fe),L+=yt,E+=Ft}G("z","y","x",-1,-1,s,t,e,g,h,0),G("z","y","x",1,-1,s,t,-e,g,h,1),G("x","z","y",1,1,e,s,t,l,g,2),G("x","z","y",1,-1,e,s,-t,l,g,3),G("x","y","z",1,-1,e,t,s,l,h,4),G("x","y","z",-1,-1,e,t,-s,l,h,5),this.setIndex(b),this.setAttribute("position",new dn(x,3)),this.setAttribute("normal",new dn(S,3)),this.setAttribute("uv",new dn(A,2))}static fromJSON(e){return new P(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function H(v){const e={};for(const t in v){e[t]={};for(const s in v[t]){const l=v[t][s];e[t][s]=l&&(l.isColor||l.isMatrix3||l.isMatrix4||l.isVector2||l.isVector3||l.isVector4||l.isTexture||l.isQuaternion)?l.clone():Array.isArray(l)?l.slice():l}}return e}function J(v){const e={};for(let t=0;t<v.length;t++){const s=H(v[t]);for(const l in s)e[l]=s[l]}return e}function be(v){return null===v.getRenderTarget()&&v.outputEncoding===Di?Gr:Us}const nt={clone:H,merge:J};class Kn extends br{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=H(e.uniforms),this.uniformsGroups=function ne(v){const e=[];for(let t=0;t<v.length;t++)e.push(v[t].clone());return e}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const l in this.uniforms){const g=this.uniforms[l].value;t.uniforms[l]=g&&g.isTexture?{type:"t",value:g.toJSON(e).uuid}:g&&g.isColor?{type:"c",value:g.getHex()}:g&&g.isVector2?{type:"v2",value:g.toArray()}:g&&g.isVector3?{type:"v3",value:g.toArray()}:g&&g.isVector4?{type:"v4",value:g.toArray()}:g&&g.isMatrix3?{type:"m3",value:g.toArray()}:g&&g.isMatrix4?{type:"m4",value:g.toArray()}:{value:g}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const s={};for(const l in this.extensions)!0===this.extensions[l]&&(s[l]=!0);return Object.keys(s).length>0&&(t.extensions=s),t}}class Or extends ws{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Gt,this.projectionMatrix=new Gt,this.projectionMatrixInverse=new Gt}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class hr extends Or{constructor(e=50,t=1,s=.1,l=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=s,this.far=l,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*Qo*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*Lo*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*Qo*Math.atan(Math.tan(.5*Lo*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,s,l,h,g){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=s,this.view.offsetY=l,this.view.width=h,this.view.height=g,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*Lo*this.fov)/this.zoom,s=2*t,l=this.aspect*s,h=-.5*l;const g=this.view;if(null!==this.view&&this.view.enabled){const b=g.fullWidth,x=g.fullHeight;h+=g.offsetX*l/b,t-=g.offsetY*s/x,l*=g.width/b,s*=g.height/x}const _=this.filmOffset;0!==_&&(h+=e*_/this.getFilmWidth()),this.projectionMatrix.makePerspective(h,h+l,t,t-s,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}class Do extends ws{constructor(e,t,s){super(),this.type="CubeCamera",this.renderTarget=s;const l=new hr(-90,1,e,t);l.layers=this.layers,l.up.set(0,1,0),l.lookAt(1,0,0),this.add(l);const h=new hr(-90,1,e,t);h.layers=this.layers,h.up.set(0,1,0),h.lookAt(-1,0,0),this.add(h);const g=new hr(-90,1,e,t);g.layers=this.layers,g.up.set(0,0,-1),g.lookAt(0,1,0),this.add(g);const _=new hr(-90,1,e,t);_.layers=this.layers,_.up.set(0,0,1),_.lookAt(0,-1,0),this.add(_);const b=new hr(-90,1,e,t);b.layers=this.layers,b.up.set(0,1,0),b.lookAt(0,0,1),this.add(b);const x=new hr(-90,1,e,t);x.layers=this.layers,x.up.set(0,1,0),x.lookAt(0,0,-1),this.add(x)}update(e,t){null===this.parent&&this.updateMatrixWorld();const s=this.renderTarget,[l,h,g,_,b,x]=this.children,S=e.getRenderTarget(),A=e.toneMapping,E=e.xr.enabled;e.toneMapping=Qi,e.xr.enabled=!1;const L=s.texture.generateMipmaps;s.texture.generateMipmaps=!1,e.setRenderTarget(s,0),e.render(t,l),e.setRenderTarget(s,1),e.render(t,h),e.setRenderTarget(s,2),e.render(t,g),e.setRenderTarget(s,3),e.render(t,_),e.setRenderTarget(s,4),e.render(t,b),s.texture.generateMipmaps=L,e.setRenderTarget(s,5),e.render(t,x),e.setRenderTarget(S),e.toneMapping=A,e.xr.enabled=E,s.texture.needsPMREMUpdate=!0}}class iu extends tr{constructor(e,t,s,l,h,g,_,b,x,S){super(e=void 0!==e?e:[],t=void 0!==t?t:Li,s,l,h,g,_,b,x,S),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class vc extends ta{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const s={width:e,height:e,depth:1};this.texture=new iu([s,s,s,s,s,s],t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:nn}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const s_uniforms={tEquirect:{value:null}},s_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",s_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",l=new P(5,5,5),h=new Kn({name:"CubemapFromEquirect",uniforms:H(s_uniforms),vertexShader:s_vertexShader,fragmentShader:s_fragmentShader,side:ze,blending:jt});h.uniforms.tEquirect.value=t;const g=new w(l,h),_=t.minFilter;return t.minFilter===Yn&&(t.minFilter=nn),new Do(1,10,this).update(e,g),t.minFilter=_,g.geometry.dispose(),g.material.dispose(),this}clear(e,t,s,l){const h=e.getRenderTarget();for(let g=0;g<6;g++)e.setRenderTarget(this,g),e.clear(t,s,l);e.setRenderTarget(h)}}const yc=new le,ru=new le,Ku=new mn;class Jl{constructor(e=new le(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,s,l){return this.normal.set(e,t,s),this.constant=l,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,s){const l=yc.subVectors(s,t).cross(ru.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(l,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const s=e.delta(yc),l=this.normal.dot(s);if(0===l)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const h=-(e.start.dot(this.normal)+this.constant)/l;return h<0||h>1?null:t.copy(s).multiplyScalar(h).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),s=this.distanceToPoint(e.end);return t<0&&s>0||s<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const s=t||Ku.getNormalMatrix(e),l=this.coplanarPoint(yc).applyMatrix4(e),h=this.normal.applyMatrix3(s).normalize();return this.constant=-l.dot(h),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const Wa=new O,zd=new le;class Wd{constructor(e=new Jl,t=new Jl,s=new Jl,l=new Jl,h=new Jl,g=new Jl){this.planes=[e,t,s,l,h,g]}set(e,t,s,l,h,g){const _=this.planes;return _[0].copy(e),_[1].copy(t),_[2].copy(s),_[3].copy(l),_[4].copy(h),_[5].copy(g),this}copy(e){const t=this.planes;for(let s=0;s<6;s++)t[s].copy(e.planes[s]);return this}setFromProjectionMatrix(e){const t=this.planes,s=e.elements,l=s[0],h=s[1],g=s[2],_=s[3],b=s[4],x=s[5],S=s[6],A=s[7],E=s[8],L=s[9],G=s[10],j=s[11],k=s[12],Y=s[13],q=s[14],$=s[15];return t[0].setComponents(_-l,A-b,j-E,$-k).normalize(),t[1].setComponents(_+l,A+b,j+E,$+k).normalize(),t[2].setComponents(_+h,A+x,j+L,$+Y).normalize(),t[3].setComponents(_-h,A-x,j-L,$-Y).normalize(),t[4].setComponents(_-g,A-S,j-G,$-q).normalize(),t[5].setComponents(_+g,A+S,j+G,$+q).normalize(),this}intersectsObject(e){const t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),Wa.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(Wa)}intersectsSprite(e){return Wa.center.set(0,0,0),Wa.radius=.7071067811865476,Wa.applyMatrix4(e.matrixWorld),this.intersectsSphere(Wa)}intersectsSphere(e){const t=this.planes,s=e.center,l=-e.radius;for(let h=0;h<6;h++)if(t[h].distanceToPoint(s)<l)return!1;return!0}intersectsBox(e){const t=this.planes;for(let s=0;s<6;s++){const l=t[s];if(zd.x=l.normal.x>0?e.max.x:e.min.x,zd.y=l.normal.y>0?e.max.y:e.min.y,zd.z=l.normal.z>0?e.max.z:e.min.z,l.distanceToPoint(zd)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let s=0;s<6;s++)if(t[s].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function su(){let v=null,e=!1,t=null,s=null;function l(h,g){t(h,g),s=v.requestAnimationFrame(l)}return{start:function(){!0!==e&&null!==t&&(s=v.requestAnimationFrame(l),e=!0)},stop:function(){v.cancelAnimationFrame(s),e=!1},setAnimationLoop:function(h){t=h},setContext:function(h){v=h}}}function qu(v,e){const t=e.isWebGL2,s=new WeakMap;return{get:function g(x){return x.isInterleavedBufferAttribute&&(x=x.data),s.get(x)},remove:function _(x){x.isInterleavedBufferAttribute&&(x=x.data);const S=s.get(x);S&&(v.deleteBuffer(S.buffer),s.delete(x))},update:function b(x,S){if(x.isGLBufferAttribute){const E=s.get(x);return void((!E||E.version<x.version)&&s.set(x,{buffer:x.buffer,type:x.type,bytesPerElement:x.elementSize,version:x.version}))}x.isInterleavedBufferAttribute&&(x=x.data);const A=s.get(x);void 0===A?s.set(x,function l(x,S){const A=x.array,E=x.usage,L=v.createBuffer();let G;if(v.bindBuffer(S,L),v.bufferData(S,A,E),x.onUploadCallback(),A instanceof Float32Array)G=5126;else if(A instanceof Uint16Array)if(x.isFloat16BufferAttribute){if(!t)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");G=5131}else G=5123;else if(A instanceof Int16Array)G=5122;else if(A instanceof Uint32Array)G=5125;else if(A instanceof Int32Array)G=5124;else if(A instanceof Int8Array)G=5120;else if(A instanceof Uint8Array)G=5121;else{if(!(A instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+A);G=5121}return{buffer:L,type:G,bytesPerElement:A.BYTES_PER_ELEMENT,version:x.version}}(x,S)):A.version<x.version&&(function h(x,S,A){const E=S.array,L=S.updateRange;v.bindBuffer(A,x),-1===L.count?v.bufferSubData(A,0,E):(t?v.bufferSubData(A,L.offset*E.BYTES_PER_ELEMENT,E,L.offset,L.count):v.bufferSubData(A,L.offset*E.BYTES_PER_ELEMENT,E.subarray(L.offset,L.offset+L.count)),L.count=-1),S.onUploadCallback()}(A.buffer,x,S),A.version=x.version)}}}class ou extends Zn{constructor(e=1,t=1,s=1,l=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:s,heightSegments:l};const h=e/2,g=t/2,_=Math.floor(s),b=Math.floor(l),x=_+1,S=b+1,A=e/_,E=t/b,L=[],G=[],j=[],k=[];for(let Y=0;Y<S;Y++){const q=Y*E-g;for(let $=0;$<x;$++)G.push($*A-h,-q,0),j.push(0,0,1),k.push($/_),k.push(1-Y/b)}for(let Y=0;Y<b;Y++)for(let q=0;q<_;q++){const Z=q+x*(Y+1),se=q+1+x*(Y+1),de=q+1+x*Y;L.push(q+x*Y,Z,de),L.push(Z,se,de)}this.setIndex(L),this.setAttribute("position",new dn(G,3)),this.setAttribute("normal",new dn(j,3)),this.setAttribute("uv",new dn(k,2))}static fromJSON(e){return new ou(e.width,e.height,e.widthSegments,e.heightSegments)}}const ti={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\n#ifdef USE_IRIDESCENCE\n\tvec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\t return vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat R21 = R12;\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );\n\t#else\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if defined( USE_SHADOWMAP ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_COORDS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef texture2DLodEXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},Kt={common:{diffuse:{value:new Wt(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new mn},uv2Transform:{value:new mn},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new ht(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Wt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Wt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new mn}},sprite:{diffuse:{value:new Wt(16777215)},opacity:{value:1},center:{value:new ht(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new mn}}},Ma={basic:{uniforms:J([Kt.common,Kt.specularmap,Kt.envmap,Kt.aomap,Kt.lightmap,Kt.fog]),vertexShader:ti.meshbasic_vert,fragmentShader:ti.meshbasic_frag},lambert:{uniforms:J([Kt.common,Kt.specularmap,Kt.envmap,Kt.aomap,Kt.lightmap,Kt.emissivemap,Kt.bumpmap,Kt.normalmap,Kt.displacementmap,Kt.fog,Kt.lights,{emissive:{value:new Wt(0)}}]),vertexShader:ti.meshlambert_vert,fragmentShader:ti.meshlambert_frag},phong:{uniforms:J([Kt.common,Kt.specularmap,Kt.envmap,Kt.aomap,Kt.lightmap,Kt.emissivemap,Kt.bumpmap,Kt.normalmap,Kt.displacementmap,Kt.fog,Kt.lights,{emissive:{value:new Wt(0)},specular:{value:new Wt(1118481)},shininess:{value:30}}]),vertexShader:ti.meshphong_vert,fragmentShader:ti.meshphong_frag},standard:{uniforms:J([Kt.common,Kt.envmap,Kt.aomap,Kt.lightmap,Kt.emissivemap,Kt.bumpmap,Kt.normalmap,Kt.displacementmap,Kt.roughnessmap,Kt.metalnessmap,Kt.fog,Kt.lights,{emissive:{value:new Wt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ti.meshphysical_vert,fragmentShader:ti.meshphysical_frag},toon:{uniforms:J([Kt.common,Kt.aomap,Kt.lightmap,Kt.emissivemap,Kt.bumpmap,Kt.normalmap,Kt.displacementmap,Kt.gradientmap,Kt.fog,Kt.lights,{emissive:{value:new Wt(0)}}]),vertexShader:ti.meshtoon_vert,fragmentShader:ti.meshtoon_frag},matcap:{uniforms:J([Kt.common,Kt.bumpmap,Kt.normalmap,Kt.displacementmap,Kt.fog,{matcap:{value:null}}]),vertexShader:ti.meshmatcap_vert,fragmentShader:ti.meshmatcap_frag},points:{uniforms:J([Kt.points,Kt.fog]),vertexShader:ti.points_vert,fragmentShader:ti.points_frag},dashed:{uniforms:J([Kt.common,Kt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ti.linedashed_vert,fragmentShader:ti.linedashed_frag},depth:{uniforms:J([Kt.common,Kt.displacementmap]),vertexShader:ti.depth_vert,fragmentShader:ti.depth_frag},normal:{uniforms:J([Kt.common,Kt.bumpmap,Kt.normalmap,Kt.displacementmap,{opacity:{value:1}}]),vertexShader:ti.meshnormal_vert,fragmentShader:ti.meshnormal_frag},sprite:{uniforms:J([Kt.sprite,Kt.fog]),vertexShader:ti.sprite_vert,fragmentShader:ti.sprite_frag},background:{uniforms:{uvTransform:{value:new mn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:ti.background_vert,fragmentShader:ti.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:ti.backgroundCube_vert,fragmentShader:ti.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:ti.cube_vert,fragmentShader:ti.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ti.equirect_vert,fragmentShader:ti.equirect_frag},distanceRGBA:{uniforms:J([Kt.common,Kt.displacementmap,{referencePosition:{value:new le},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ti.distanceRGBA_vert,fragmentShader:ti.distanceRGBA_frag},shadow:{uniforms:J([Kt.lights,Kt.fog,{color:{value:new Wt(0)},opacity:{value:1}}]),vertexShader:ti.shadow_vert,fragmentShader:ti.shadow_frag}};Ma.physical={uniforms:J([Ma.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new ht(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new Wt(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new ht},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Wt(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new Wt(1,1,1)},specularColorMap:{value:null}}]),vertexShader:ti.meshphysical_vert,fragmentShader:ti.meshphysical_frag};const ih={r:0,b:0,g:0};function Xg(v,e,t,s,l,h,g){const _=new Wt(0);let x,S,b=!0===h?0:1,A=null,E=0,L=null;function j(k,Y){k.getRGB(ih,be(v)),s.buffers.color.setClear(ih.r,ih.g,ih.b,Y,g)}return{getClearColor:function(){return _},setClearColor:function(k,Y=1){_.set(k),b=Y,j(_,b)},getClearAlpha:function(){return b},setClearAlpha:function(k){b=k,j(_,b)},render:function G(k,Y){let q=!1,$=!0===Y.isScene?Y.background:null;$&&$.isTexture&&($=(Y.backgroundBlurriness>0?t:e).get($));const Z=v.xr,se=Z.getSession&&Z.getSession();se&&"additive"===se.environmentBlendMode&&($=null),null===$?j(_,b):$&&$.isColor&&(j($,1),q=!0),(v.autoClear||q)&&v.clear(v.autoClearColor,v.autoClearDepth,v.autoClearStencil),$&&($.isCubeTexture||$.mapping===As)?(void 0===S&&(S=new w(new P(1,1,1),new Kn({name:"BackgroundCubeMaterial",uniforms:H(Ma.backgroundCube.uniforms),vertexShader:Ma.backgroundCube.vertexShader,fragmentShader:Ma.backgroundCube.fragmentShader,side:ze,depthTest:!1,depthWrite:!1,fog:!1})),S.geometry.deleteAttribute("normal"),S.geometry.deleteAttribute("uv"),S.onBeforeRender=function(de,_e,X){this.matrixWorld.copyPosition(X.matrixWorld)},Object.defineProperty(S.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),l.update(S)),S.material.uniforms.envMap.value=$,S.material.uniforms.flipEnvMap.value=$.isCubeTexture&&!1===$.isRenderTargetTexture?-1:1,S.material.uniforms.backgroundBlurriness.value=Y.backgroundBlurriness,S.material.uniforms.backgroundIntensity.value=Y.backgroundIntensity,S.material.toneMapped=$.encoding!==Di,(A!==$||E!==$.version||L!==v.toneMapping)&&(S.material.needsUpdate=!0,A=$,E=$.version,L=v.toneMapping),S.layers.enableAll(),k.unshift(S,S.geometry,S.material,0,0,null)):$&&$.isTexture&&(void 0===x&&(x=new w(new ou(2,2),new Kn({name:"BackgroundMaterial",uniforms:H(Ma.background.uniforms),vertexShader:Ma.background.vertexShader,fragmentShader:Ma.background.fragmentShader,side:Lt,depthTest:!1,depthWrite:!1,fog:!1})),x.geometry.deleteAttribute("normal"),Object.defineProperty(x.material,"map",{get:function(){return this.uniforms.t2D.value}}),l.update(x)),x.material.uniforms.t2D.value=$,x.material.uniforms.backgroundIntensity.value=Y.backgroundIntensity,x.material.toneMapped=$.encoding!==Di,!0===$.matrixAutoUpdate&&$.updateMatrix(),x.material.uniforms.uvTransform.value.copy($.matrix),(A!==$||E!==$.version||L!==v.toneMapping)&&(x.material.needsUpdate=!0,A=$,E=$.version,L=v.toneMapping),x.layers.enableAll(),k.unshift(x,x.geometry,x.material,0,0,null))}}}function rm(v,e,t,s){const l=v.getParameter(34921),h=s.isWebGL2?null:e.get("OES_vertex_array_object"),g=s.isWebGL2||null!==h,_={},b=k(null);let x=b,S=!1;function L(Ee){return s.isWebGL2?v.bindVertexArray(Ee):h.bindVertexArrayOES(Ee)}function G(Ee){return s.isWebGL2?v.deleteVertexArray(Ee):h.deleteVertexArrayOES(Ee)}function k(Ee){const at=[],wt=[],Ft=[];for(let yt=0;yt<l;yt++)at[yt]=0,wt[yt]=0,Ft[yt]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:at,enabledAttributes:wt,attributeDivisors:Ft,object:Ee,attributes:{},index:null}}function $(){const Ee=x.newAttributes;for(let at=0,wt=Ee.length;at<wt;at++)Ee[at]=0}function Z(Ee){se(Ee,0)}function se(Ee,at){const Ft=x.enabledAttributes,yt=x.attributeDivisors;x.newAttributes[Ee]=1,0===Ft[Ee]&&(v.enableVertexAttribArray(Ee),Ft[Ee]=1),yt[Ee]!==at&&((s.isWebGL2?v:e.get("ANGLE_instanced_arrays"))[s.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](Ee,at),yt[Ee]=at)}function de(){const Ee=x.newAttributes,at=x.enabledAttributes;for(let wt=0,Ft=at.length;wt<Ft;wt++)at[wt]!==Ee[wt]&&(v.disableVertexAttribArray(wt),at[wt]=0)}function _e(Ee,at,wt,Ft,yt,Bt){!0!==s.isWebGL2||5124!==wt&&5125!==wt?v.vertexAttribPointer(Ee,at,wt,Ft,yt,Bt):v.vertexAttribIPointer(Ee,at,wt,yt,Bt)}function bt(){He(),S=!0,x!==b&&(x=b,L(x.object))}function He(){b.geometry=null,b.program=null,b.wireframe=!1}return{setup:function A(Ee,at,wt,Ft,yt){let Bt=!1;if(g){const It=function j(Ee,at,wt){const Ft=!0===wt.wireframe;let yt=_[Ee.id];void 0===yt&&(yt={},_[Ee.id]=yt);let Bt=yt[at.id];void 0===Bt&&(Bt={},yt[at.id]=Bt);let It=Bt[Ft];return void 0===It&&(It=k(function E(){return s.isWebGL2?v.createVertexArray():h.createVertexArrayOES()}()),Bt[Ft]=It),It}(Ft,wt,at);x!==It&&(x=It,L(x.object)),Bt=function Y(Ee,at,wt,Ft){const yt=x.attributes,Bt=at.attributes;let It=0;const rt=wt.getAttributes();for(const ot in rt)if(rt[ot].location>=0){const zt=yt[ot];let an=Bt[ot];if(void 0===an&&("instanceMatrix"===ot&&Ee.instanceMatrix&&(an=Ee.instanceMatrix),"instanceColor"===ot&&Ee.instanceColor&&(an=Ee.instanceColor)),void 0===zt||zt.attribute!==an||an&&zt.data!==an.data)return!0;It++}return x.attributesNum!==It||x.index!==Ft}(Ee,Ft,wt,yt),Bt&&function q(Ee,at,wt,Ft){const yt={},Bt=at.attributes;let It=0;const rt=wt.getAttributes();for(const ot in rt)if(rt[ot].location>=0){let zt=Bt[ot];void 0===zt&&("instanceMatrix"===ot&&Ee.instanceMatrix&&(zt=Ee.instanceMatrix),"instanceColor"===ot&&Ee.instanceColor&&(zt=Ee.instanceColor));const an={};an.attribute=zt,zt&&zt.data&&(an.data=zt.data),yt[ot]=an,It++}x.attributes=yt,x.attributesNum=It,x.index=Ft}(Ee,Ft,wt,yt)}else{const It=!0===at.wireframe;(x.geometry!==Ft.id||x.program!==wt.id||x.wireframe!==It)&&(x.geometry=Ft.id,x.program=wt.id,x.wireframe=It,Bt=!0)}null!==yt&&t.update(yt,34963),(Bt||S)&&(S=!1,function X(Ee,at,wt,Ft){if(!1===s.isWebGL2&&(Ee.isInstancedMesh||Ft.isInstancedBufferGeometry)&&null===e.get("ANGLE_instanced_arrays"))return;$();const yt=Ft.attributes,Bt=wt.getAttributes(),It=at.defaultAttributeValues;for(const rt in Bt){const ot=Bt[rt];if(ot.location>=0){let $t=yt[rt];if(void 0===$t&&("instanceMatrix"===rt&&Ee.instanceMatrix&&($t=Ee.instanceMatrix),"instanceColor"===rt&&Ee.instanceColor&&($t=Ee.instanceColor)),void 0!==$t){const zt=$t.normalized,an=$t.itemSize,ft=t.get($t);if(void 0===ft)continue;const qn=ft.buffer,yn=ft.type,Xn=ft.bytesPerElement;if($t.isInterleavedBufferAttribute){const ln=$t.data,wi=ln.stride,Tt=$t.offset;if(ln.isInstancedInterleavedBuffer){for(let vt=0;vt<ot.locationSize;vt++)se(ot.location+vt,ln.meshPerAttribute);!0!==Ee.isInstancedMesh&&void 0===Ft._maxInstanceCount&&(Ft._maxInstanceCount=ln.meshPerAttribute*ln.count)}else for(let vt=0;vt<ot.locationSize;vt++)Z(ot.location+vt);v.bindBuffer(34962,qn);for(let vt=0;vt<ot.locationSize;vt++)_e(ot.location+vt,an/ot.locationSize,yn,zt,wi*Xn,(Tt+an/ot.locationSize*vt)*Xn)}else{if($t.isInstancedBufferAttribute){for(let ln=0;ln<ot.locationSize;ln++)se(ot.location+ln,$t.meshPerAttribute);!0!==Ee.isInstancedMesh&&void 0===Ft._maxInstanceCount&&(Ft._maxInstanceCount=$t.meshPerAttribute*$t.count)}else for(let ln=0;ln<ot.locationSize;ln++)Z(ot.location+ln);v.bindBuffer(34962,qn);for(let ln=0;ln<ot.locationSize;ln++)_e(ot.location+ln,an/ot.locationSize,yn,zt,an*Xn,an/ot.locationSize*ln*Xn)}}else if(void 0!==It){const zt=It[rt];if(void 0!==zt)switch(zt.length){case 2:v.vertexAttrib2fv(ot.location,zt);break;case 3:v.vertexAttrib3fv(ot.location,zt);break;case 4:v.vertexAttrib4fv(ot.location,zt);break;default:v.vertexAttrib1fv(ot.location,zt)}}}}de()}(Ee,at,wt,Ft),null!==yt&&v.bindBuffer(34963,t.get(yt).buffer))},reset:bt,resetDefaultState:He,dispose:function fe(){bt();for(const Ee in _){const at=_[Ee];for(const wt in at){const Ft=at[wt];for(const yt in Ft)G(Ft[yt].object),delete Ft[yt];delete at[wt]}delete _[Ee]}},releaseStatesOfGeometry:function Te(Ee){if(void 0===_[Ee.id])return;const at=_[Ee.id];for(const wt in at){const Ft=at[wt];for(const yt in Ft)G(Ft[yt].object),delete Ft[yt];delete at[wt]}delete _[Ee.id]},releaseStatesOfProgram:function Ye(Ee){for(const at in _){const wt=_[at];if(void 0===wt[Ee.id])continue;const Ft=wt[Ee.id];for(const yt in Ft)G(Ft[yt].object),delete Ft[yt];delete wt[Ee.id]}},initAttributes:$,enableAttribute:Z,disableUnusedAttributes:de}}function yv(v,e,t,s){const l=s.isWebGL2;let h;this.setMode=function g(x){h=x},this.render=function _(x,S){v.drawArrays(h,x,S),t.update(S,h,1)},this.renderInstances=function b(x,S,A){if(0===A)return;let E,L;if(l)E=v,L="drawArraysInstanced";else if(E=e.get("ANGLE_instanced_arrays"),L="drawArraysInstancedANGLE",null===E)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");E[L](h,x,S,A),t.update(S,h,A)}}function Sf(v,e,t){let s;function h(_e){if("highp"===_e){if(v.getShaderPrecisionFormat(35633,36338).precision>0&&v.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";_e="mediump"}return"mediump"===_e&&v.getShaderPrecisionFormat(35633,36337).precision>0&&v.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const g=typeof WebGL2RenderingContext<"u"&&v instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&v instanceof WebGL2ComputeRenderingContext;let _=void 0!==t.precision?t.precision:"highp";const b=h(_);b!==_&&(console.warn("THREE.WebGLRenderer:",_,"not supported, using",b,"instead."),_=b);const x=g||e.has("WEBGL_draw_buffers"),S=!0===t.logarithmicDepthBuffer,A=v.getParameter(34930),E=v.getParameter(35660),L=v.getParameter(3379),G=v.getParameter(34076),j=v.getParameter(34921),k=v.getParameter(36347),Y=v.getParameter(36348),q=v.getParameter(36349),$=E>0,Z=g||e.has("OES_texture_float");return{isWebGL2:g,drawBuffers:x,getMaxAnisotropy:function l(){if(void 0!==s)return s;if(!0===e.has("EXT_texture_filter_anisotropic")){const _e=e.get("EXT_texture_filter_anisotropic");s=v.getParameter(_e.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else s=0;return s},getMaxPrecision:h,precision:_,logarithmicDepthBuffer:S,maxTextures:A,maxVertexTextures:E,maxTextureSize:L,maxCubemapSize:G,maxAttributes:j,maxVertexUniforms:k,maxVaryings:Y,maxFragmentUniforms:q,vertexTextures:$,floatFragmentTextures:Z,floatVertexTextures:$&&Z,maxSamples:g?v.getParameter(36183):0}}function Cf(v){const e=this;let t=null,s=0,l=!1,h=!1;const g=new Jl,_=new mn,b={value:null,needsUpdate:!1};function x(){b.value!==t&&(b.value=t,b.needsUpdate=s>0),e.numPlanes=s,e.numIntersection=0}function S(A,E,L,G){const j=null!==A?A.length:0;let k=null;if(0!==j){if(k=b.value,!0!==G||null===k){const Y=L+4*j,q=E.matrixWorldInverse;_.getNormalMatrix(q),(null===k||k.length<Y)&&(k=new Float32Array(Y));for(let $=0,Z=L;$!==j;++$,Z+=4)g.copy(A[$]).applyMatrix4(q,_),g.normal.toArray(k,Z),k[Z+3]=g.constant}b.value=k,b.needsUpdate=!0}return e.numPlanes=j,e.numIntersection=0,k}this.uniform=b,this.numPlanes=0,this.numIntersection=0,this.init=function(A,E,L){const G=0!==A.length||E||0!==s||l;return l=E,t=S(A,L,0),s=A.length,G},this.beginShadows=function(){h=!0,S(null)},this.endShadows=function(){h=!1,x()},this.setState=function(A,E,L){const G=A.clippingPlanes,j=A.clipIntersection,k=A.clipShadows,Y=v.get(A);if(!l||null===G||0===G.length||h&&!k)h?S(null):x();else{const q=h?0:s,$=4*q;let Z=Y.clippingState||null;b.value=Z,Z=S(G,E,$,L);for(let se=0;se!==$;++se)Z[se]=t[se];Y.clippingState=Z,this.numIntersection=j?this.numPlanes:0,this.numPlanes+=q}}}function Qg(v){let e=new WeakMap;function t(g,_){return _===mo?g.mapping=Li:_===bn&&(g.mapping=wr),g}function l(g){const _=g.target;_.removeEventListener("dispose",l);const b=e.get(_);void 0!==b&&(e.delete(_),b.dispose())}return{get:function s(g){if(g&&g.isTexture&&!1===g.isRenderTargetTexture){const _=g.mapping;if(_===mo||_===bn){if(e.has(g))return t(e.get(g).texture,g.mapping);{const b=g.image;if(b&&b.height>0){const x=new vc(b.height/2);return x.fromEquirectangularTexture(v,g),e.set(g,x),g.addEventListener("dispose",l),t(x.texture,g.mapping)}return null}}}return g},dispose:function h(){e=new WeakMap}}}class rh extends Or{constructor(e=-1,t=1,s=1,l=-1,h=.1,g=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=s,this.bottom=l,this.near=h,this.far=g,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,s,l,h,g){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=s,this.view.offsetY=l,this.view.width=h,this.view.height=g,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),s=(this.right+this.left)/2,l=(this.top+this.bottom)/2;let h=s-e,g=s+e,_=l+t,b=l-t;if(null!==this.view&&this.view.enabled){const x=(this.right-this.left)/this.view.fullWidth/this.zoom,S=(this.top-this.bottom)/this.view.fullHeight/this.zoom;h+=x*this.view.offsetX,g=h+x*this.view.width,_-=S*this.view.offsetY,b=_-S*this.view.height}this.projectionMatrix.makeOrthographic(h,g,_,b,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}const ed=[.125,.215,.35,.446,.526,.582],Kl=new rh,Ef=new Wt;let sh=null;const Ro=(1+Math.sqrt(5))/2,Tc=1/Ro,bv=[new le(1,1,1),new le(-1,1,1),new le(1,1,-1),new le(-1,1,-1),new le(0,Ro,Tc),new le(0,Ro,-Tc),new le(Tc,0,Ro),new le(-Tc,0,Ro),new le(Ro,Tc,0),new le(-Ro,Tc,0)];class sm{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,s=.1,l=100){sh=this._renderer.getRenderTarget(),this._setSize(256);const h=this._allocateTargets();return h.depthBuffer=!0,this._sceneToCubeUV(e,s,l,h),t>0&&this._blur(h,0,0,t),this._applyPMREM(h),this._cleanup(h),h}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=Pf(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=Ya(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(sh),e.scissorTest=!1,If(e,0,0,e.width,e.height)}_fromTexture(e,t){this._setSize(e.mapping===Li||e.mapping===wr?0===e.image.length?16:e.image[0].width||e.image[0].image.width:e.image.width/4),sh=this._renderer.getRenderTarget();const s=t||this._allocateTargets();return this._textureToCubeUV(e,s),this._applyPMREM(s),this._cleanup(s),s}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,s={magFilter:nn,minFilter:nn,generateMipmaps:!1,type:Hr,format:as,encoding:us,depthBuffer:!1},l=oh(e,t,s);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=oh(e,t,s);const{_lodMax:h}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function Af(v){const e=[],t=[],s=[];let l=v;const h=v-4+1+ed.length;for(let g=0;g<h;g++){const _=Math.pow(2,l);t.push(_);let b=1/_;g>v-4?b=ed[g-v+4-1]:0===g&&(b=0),s.push(b);const x=1/(_-2),S=-x,A=1+x,E=[S,S,A,S,A,A,S,S,A,A,S,A],L=6,G=6,j=3,k=2,Y=1,q=new Float32Array(j*G*L),$=new Float32Array(k*G*L),Z=new Float32Array(Y*G*L);for(let de=0;de<L;de++){const _e=de%3*2/3-1,X=de>2?0:-1;q.set([_e,X,0,_e+2/3,X,0,_e+2/3,X+1,0,_e,X,0,_e+2/3,X+1,0,_e,X+1,0],j*G*de),$.set(E,k*G*de),Z.set([de,de,de,de,de,de],Y*G*de)}const se=new Zn;se.setAttribute("position",new ji(q,j)),se.setAttribute("uv",new ji($,k)),se.setAttribute("faceIndex",new ji(Z,Y)),e.push(se),l>4&&l--}return{lodPlanes:e,sizeLods:t,sigmas:s}}(h)),this._blurMaterial=function e_(v,e,t){const s=new Float32Array(20),l=new le(0,1,0);return new Kn({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${v}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:s},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:l}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:jt,depthTest:!1,depthWrite:!1})}(h,e,t)}return l}_compileMaterial(e){const t=new w(this._lodPlanes[0],e);this._renderer.compile(t,Kl)}_sceneToCubeUV(e,t,s,l){const _=new hr(90,1,t,s),b=[1,-1,1,1,1,1],x=[1,1,1,-1,-1,-1],S=this._renderer,A=S.autoClear,E=S.toneMapping;S.getClearColor(Ef),S.toneMapping=Qi,S.autoClear=!1;const L=new Ir({name:"PMREM.Background",side:ze,depthWrite:!1,depthTest:!1}),G=new w(new P,L);let j=!1;const k=e.background;k?k.isColor&&(L.color.copy(k),e.background=null,j=!0):(L.color.copy(Ef),j=!0);for(let Y=0;Y<6;Y++){const q=Y%3;0===q?(_.up.set(0,b[Y],0),_.lookAt(x[Y],0,0)):1===q?(_.up.set(0,0,b[Y]),_.lookAt(0,x[Y],0)):(_.up.set(0,b[Y],0),_.lookAt(0,0,x[Y]));const $=this._cubeSize;If(l,q*$,Y>2?$:0,$,$),S.setRenderTarget(l),j&&S.render(G,_),S.render(e,_)}G.geometry.dispose(),G.material.dispose(),S.toneMapping=E,S.autoClear=A,e.background=k}_textureToCubeUV(e,t){const s=this._renderer,l=e.mapping===Li||e.mapping===wr;l?(null===this._cubemapMaterial&&(this._cubemapMaterial=Pf()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=Ya());const h=l?this._cubemapMaterial:this._equirectMaterial,g=new w(this._lodPlanes[0],h);h.uniforms.envMap.value=e;const b=this._cubeSize;If(t,0,0,3*b,2*b),s.setRenderTarget(t),s.render(g,Kl)}_applyPMREM(e){const t=this._renderer,s=t.autoClear;t.autoClear=!1;for(let l=1;l<this._lodPlanes.length;l++){const h=Math.sqrt(this._sigmas[l]*this._sigmas[l]-this._sigmas[l-1]*this._sigmas[l-1]);this._blur(e,l-1,l,h,bv[(l-1)%bv.length])}t.autoClear=s}_blur(e,t,s,l,h){const g=this._pingPongRenderTarget;this._halfBlur(e,g,t,s,l,"latitudinal",h),this._halfBlur(g,e,s,s,l,"longitudinal",h)}_halfBlur(e,t,s,l,h,g,_){const b=this._renderer,x=this._blurMaterial;"latitudinal"!==g&&"longitudinal"!==g&&console.error("blur direction must be either latitudinal or longitudinal!");const A=new w(this._lodPlanes[l],x),E=x.uniforms,L=this._sizeLods[s]-1,G=isFinite(h)?Math.PI/(2*L):2*Math.PI/39,j=h/G,k=isFinite(h)?1+Math.floor(3*j):20;k>20&&console.warn(`sigmaRadians, ${h}, is too large and will clip, as it requested ${k} samples when the maximum is set to 20`);const Y=[];let q=0;for(let _e=0;_e<20;++_e){const X=_e/j,fe=Math.exp(-X*X/2);Y.push(fe),0===_e?q+=fe:_e<k&&(q+=2*fe)}for(let _e=0;_e<Y.length;_e++)Y[_e]=Y[_e]/q;E.envMap.value=e.texture,E.samples.value=k,E.weights.value=Y,E.latitudinal.value="latitudinal"===g,_&&(E.poleAxis.value=_);const{_lodMax:$}=this;E.dTheta.value=G,E.mipInt.value=$-s;const Z=this._sizeLods[l];If(t,3*Z*(l>$-4?l-$+4:0),4*(this._cubeSize-Z),3*Z,2*Z),b.setRenderTarget(t),b.render(A,Kl)}}function oh(v,e,t){const s=new ta(v,e,t);return s.texture.mapping=As,s.texture.name="PMREM.cubeUv",s.scissorTest=!0,s}function If(v,e,t,s,l){v.viewport.set(e,t,s,l),v.scissor.set(e,t,s,l)}function Ya(){return new Kn({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:jt,depthTest:!1,depthWrite:!1})}function Pf(){return new Kn({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:jt,depthTest:!1,depthWrite:!1})}function ah(v){let e=new WeakMap,t=null;function h(_){const b=_.target;b.removeEventListener("dispose",h);const x=e.get(b);void 0!==x&&(e.delete(b),x.dispose())}return{get:function s(_){if(_&&_.isTexture){const b=_.mapping,x=b===mo||b===bn,S=b===Li||b===wr;if(x||S){if(_.isRenderTargetTexture&&!0===_.needsPMREMUpdate){_.needsPMREMUpdate=!1;let A=e.get(_);return null===t&&(t=new sm(v)),A=x?t.fromEquirectangular(_,A):t.fromCubemap(_,A),e.set(_,A),A.texture}if(e.has(_))return e.get(_).texture;{const A=_.image;if(x&&A&&A.height>0||S&&A&&function l(_){let b=0;for(let S=0;S<6;S++)void 0!==_[S]&&b++;return 6===b}(A)){null===t&&(t=new sm(v));const E=x?t.fromEquirectangular(_):t.fromCubemap(_);return e.set(_,E),_.addEventListener("dispose",h),E.texture}return null}}}return _},dispose:function g(){e=new WeakMap,null!==t&&(t.dispose(),t=null)}}}function t_(v){const e={};function t(s){if(void 0!==e[s])return e[s];let l;switch(s){case"WEBGL_depth_texture":l=v.getExtension("WEBGL_depth_texture")||v.getExtension("MOZ_WEBGL_depth_texture")||v.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":l=v.getExtension("EXT_texture_filter_anisotropic")||v.getExtension("MOZ_EXT_texture_filter_anisotropic")||v.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":l=v.getExtension("WEBGL_compressed_texture_s3tc")||v.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||v.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":l=v.getExtension("WEBGL_compressed_texture_pvrtc")||v.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:l=v.getExtension(s)}return e[s]=l,l}return{has:function(s){return null!==t(s)},init:function(s){s.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(s){const l=t(s);return null===l&&console.warn("THREE.WebGLRenderer: "+s+" extension not supported."),l}}}function om(v,e,t,s){const l={},h=new WeakMap;function g(A){const E=A.target;null!==E.index&&e.remove(E.index);for(const G in E.attributes)e.remove(E.attributes[G]);E.removeEventListener("dispose",g),delete l[E.id];const L=h.get(E);L&&(e.remove(L),h.delete(E)),s.releaseStatesOfGeometry(E),!0===E.isInstancedBufferGeometry&&delete E._maxInstanceCount,t.memory.geometries--}function x(A){const E=[],L=A.index,G=A.attributes.position;let j=0;if(null!==L){const q=L.array;j=L.version;for(let $=0,Z=q.length;$<Z;$+=3){const se=q[$+0],de=q[$+1],_e=q[$+2];E.push(se,de,de,_e,_e,se)}}else{j=G.version;for(let $=0,Z=G.array.length/3-1;$<Z;$+=3){const se=$+0,de=$+1,_e=$+2;E.push(se,de,de,_e,_e,se)}}const k=new(Wu(E)?Ha:$u)(E,1);k.version=j;const Y=h.get(A);Y&&e.remove(Y),h.set(A,k)}return{get:function _(A,E){return!0===l[E.id]||(E.addEventListener("dispose",g),l[E.id]=!0,t.memory.geometries++),E},update:function b(A){const E=A.attributes;for(const G in E)e.update(E[G],34962);const L=A.morphAttributes;for(const G in L){const j=L[G];for(let k=0,Y=j.length;k<Y;k++)e.update(j[k],34962)}},getWireframeAttribute:function S(A){const E=h.get(A);if(E){const L=A.index;null!==L&&E.version<L.version&&x(A)}else x(A);return h.get(A)}}}function lh(v,e,t,s){const l=s.isWebGL2;let h,_,b;this.setMode=function g(E){h=E},this.setIndex=function x(E){_=E.type,b=E.bytesPerElement},this.render=function S(E,L){v.drawElements(h,L,_,E*b),t.update(L,h,1)},this.renderInstances=function A(E,L,G){if(0===G)return;let j,k;if(l)j=v,k="drawElementsInstanced";else if(j=e.get("ANGLE_instanced_arrays"),k="drawElementsInstancedANGLE",null===j)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");j[k](h,L,_,E*b,G),t.update(L,h,G)}}function n_(v){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function l(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function s(h,g,_){switch(t.calls++,g){case 4:t.triangles+=_*(h/3);break;case 1:t.lines+=_*(h/2);break;case 3:t.lines+=_*(h-1);break;case 2:t.lines+=_*h;break;case 0:t.points+=_*h;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",g)}}}}function Of(v,e){return v[0]-e[0]}function i_(v,e){return Math.abs(e[1])-Math.abs(v[1])}function fr(v,e,t){const s={},l=new Float32Array(8),h=new WeakMap,g=new Jn,_=[];for(let x=0;x<8;x++)_[x]=[x,0];return{update:function b(x,S,A,E){const L=x.morphTargetInfluences;if(!0===e.isWebGL2){const G=S.morphAttributes.position||S.morphAttributes.normal||S.morphAttributes.color,j=void 0!==G?G.length:0;let k=h.get(S);if(void 0===k||k.count!==j){let at=function(){He.dispose(),h.delete(S),S.removeEventListener("dispose",at)};void 0!==k&&k.texture.dispose();const $=void 0!==S.morphAttributes.position,Z=void 0!==S.morphAttributes.normal,se=void 0!==S.morphAttributes.color,de=S.morphAttributes.position||[],_e=S.morphAttributes.normal||[],X=S.morphAttributes.color||[];let fe=0;!0===$&&(fe=1),!0===Z&&(fe=2),!0===se&&(fe=3);let Te=S.attributes.position.count*fe,Ye=1;Te>e.maxTextureSize&&(Ye=Math.ceil(Te/e.maxTextureSize),Te=e.maxTextureSize);const bt=new Float32Array(Te*Ye*4*j),He=new zs(bt,Te,Ye,j);He.type=vi,He.needsUpdate=!0;const Ee=4*fe;for(let wt=0;wt<j;wt++){const Ft=de[wt],yt=_e[wt],Bt=X[wt],It=Te*Ye*4*wt;for(let rt=0;rt<Ft.count;rt++){const ot=rt*Ee;!0===$&&(g.fromBufferAttribute(Ft,rt),bt[It+ot+0]=g.x,bt[It+ot+1]=g.y,bt[It+ot+2]=g.z,bt[It+ot+3]=0),!0===Z&&(g.fromBufferAttribute(yt,rt),bt[It+ot+4]=g.x,bt[It+ot+5]=g.y,bt[It+ot+6]=g.z,bt[It+ot+7]=0),!0===se&&(g.fromBufferAttribute(Bt,rt),bt[It+ot+8]=g.x,bt[It+ot+9]=g.y,bt[It+ot+10]=g.z,bt[It+ot+11]=4===Bt.itemSize?g.w:1)}}k={count:j,texture:He,size:new ht(Te,Ye)},h.set(S,k),S.addEventListener("dispose",at)}let Y=0;for(let $=0;$<L.length;$++)Y+=L[$];const q=S.morphTargetsRelative?1:1-Y;E.getUniforms().setValue(v,"morphTargetBaseInfluence",q),E.getUniforms().setValue(v,"morphTargetInfluences",L),E.getUniforms().setValue(v,"morphTargetsTexture",k.texture,t),E.getUniforms().setValue(v,"morphTargetsTextureSize",k.size)}else{const G=void 0===L?0:L.length;let j=s[S.id];if(void 0===j||j.length!==G){j=[];for(let Z=0;Z<G;Z++)j[Z]=[Z,0];s[S.id]=j}for(let Z=0;Z<G;Z++){const se=j[Z];se[0]=Z,se[1]=L[Z]}j.sort(i_);for(let Z=0;Z<8;Z++)Z<G&&j[Z][1]?(_[Z][0]=j[Z][0],_[Z][1]=j[Z][1]):(_[Z][0]=Number.MAX_SAFE_INTEGER,_[Z][1]=0);_.sort(Of);const k=S.morphAttributes.position,Y=S.morphAttributes.normal;let q=0;for(let Z=0;Z<8;Z++){const se=_[Z],de=se[0],_e=se[1];de!==Number.MAX_SAFE_INTEGER&&_e?(k&&S.getAttribute("morphTarget"+Z)!==k[de]&&S.setAttribute("morphTarget"+Z,k[de]),Y&&S.getAttribute("morphNormal"+Z)!==Y[de]&&S.setAttribute("morphNormal"+Z,Y[de]),l[Z]=_e,q+=_e):(k&&!0===S.hasAttribute("morphTarget"+Z)&&S.deleteAttribute("morphTarget"+Z),Y&&!0===S.hasAttribute("morphNormal"+Z)&&S.deleteAttribute("morphNormal"+Z),l[Z]=0)}const $=S.morphTargetsRelative?1:1-q;E.getUniforms().setValue(v,"morphTargetBaseInfluence",$),E.getUniforms().setValue(v,"morphTargetInfluences",l)}}}}function am(v,e,t,s){let l=new WeakMap;function _(b){const x=b.target;x.removeEventListener("dispose",_),t.remove(x.instanceMatrix),null!==x.instanceColor&&t.remove(x.instanceColor)}return{update:function h(b){const x=s.render.frame,A=e.get(b,b.geometry);return l.get(A)!==x&&(e.update(A),l.set(A,x)),b.isInstancedMesh&&(!1===b.hasEventListener("dispose",_)&&b.addEventListener("dispose",_),t.update(b.instanceMatrix,34962),null!==b.instanceColor&&t.update(b.instanceColor,34962)),A},dispose:function g(){l=new WeakMap}}}const Nf=new tr,Kr=new zs,ql=new pl,Ff=new iu,lm=[],cm=[],td=new Float32Array(16),nd=new Float32Array(9),r_=new Float32Array(4);function id(v,e,t){const s=v[0];if(s<=0||s>0)return v;const l=e*t;let h=lm[l];if(void 0===h&&(h=new Float32Array(l),lm[l]=h),0!==e){s.toArray(h,0);for(let g=1,_=0;g!==e;++g)_+=t,v[g].toArray(h,_)}return h}function Fr(v,e){if(v.length!==e.length)return!1;for(let t=0,s=v.length;t<s;t++)if(v[t]!==e[t])return!1;return!0}function qr(v,e){for(let t=0,s=e.length;t<s;t++)v[t]=e[t]}function rd(v,e){let t=cm[e];void 0===t&&(t=new Int32Array(e),cm[e]=t);for(let s=0;s!==e;++s)t[s]=v.allocateTextureUnit();return t}function um(v,e){const t=this.cache;t[0]!==e&&(v.uniform1f(this.addr,e),t[0]=e)}function dm(v,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(v.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Fr(t,e))return;v.uniform2fv(this.addr,e),qr(t,e)}}function s_(v,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(v.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(void 0!==e.r)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(v.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Fr(t,e))return;v.uniform3fv(this.addr,e),qr(t,e)}}function ch(v,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(v.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Fr(t,e))return;v.uniform4fv(this.addr,e),qr(t,e)}}function hm(v,e){const t=this.cache,s=e.elements;if(void 0===s){if(Fr(t,e))return;v.uniformMatrix2fv(this.addr,!1,e),qr(t,e)}else{if(Fr(t,s))return;r_.set(s),v.uniformMatrix2fv(this.addr,!1,r_),qr(t,s)}}function sd(v,e){const t=this.cache,s=e.elements;if(void 0===s){if(Fr(t,e))return;v.uniformMatrix3fv(this.addr,!1,e),qr(t,e)}else{if(Fr(t,s))return;nd.set(s),v.uniformMatrix3fv(this.addr,!1,nd),qr(t,s)}}function Lf(v,e){const t=this.cache,s=e.elements;if(void 0===s){if(Fr(t,e))return;v.uniformMatrix4fv(this.addr,!1,e),qr(t,e)}else{if(Fr(t,s))return;td.set(s),v.uniformMatrix4fv(this.addr,!1,td),qr(t,s)}}function Tv(v,e){const t=this.cache;t[0]!==e&&(v.uniform1i(this.addr,e),t[0]=e)}function Ml(v,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(v.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Fr(t,e))return;v.uniform2iv(this.addr,e),qr(t,e)}}function o_(v,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(v.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Fr(t,e))return;v.uniform3iv(this.addr,e),qr(t,e)}}function od(v,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(v.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Fr(t,e))return;v.uniform4iv(this.addr,e),qr(t,e)}}function xc(v,e){const t=this.cache;t[0]!==e&&(v.uniform1ui(this.addr,e),t[0]=e)}function fm(v,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(v.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Fr(t,e))return;v.uniform2uiv(this.addr,e),qr(t,e)}}function Dc(v,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(v.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Fr(t,e))return;v.uniform3uiv(this.addr,e),qr(t,e)}}function a_(v,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(v.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Fr(t,e))return;v.uniform4uiv(this.addr,e),qr(t,e)}}function yi(v,e,t){const s=this.cache,l=t.allocateTextureUnit();s[0]!==l&&(v.uniform1i(this.addr,l),s[0]=l),t.setTexture2D(e||Nf,l)}function uh(v,e,t){const s=this.cache,l=t.allocateTextureUnit();s[0]!==l&&(v.uniform1i(this.addr,l),s[0]=l),t.setTexture3D(e||ql,l)}function Bf(v,e,t){const s=this.cache,l=t.allocateTextureUnit();s[0]!==l&&(v.uniform1i(this.addr,l),s[0]=l),t.setTextureCube(e||Ff,l)}function jf(v,e,t){const s=this.cache,l=t.allocateTextureUnit();s[0]!==l&&(v.uniform1i(this.addr,l),s[0]=l),t.setTexture2DArray(e||Kr,l)}function wc(v,e){v.uniform1fv(this.addr,e)}function kf(v,e){const t=id(e,this.size,2);v.uniform2fv(this.addr,t)}function ad(v,e){const t=id(e,this.size,3);v.uniform3fv(this.addr,t)}function dh(v,e){const t=id(e,this.size,4);v.uniform4fv(this.addr,t)}function hh(v,e){const t=id(e,this.size,4);v.uniformMatrix2fv(this.addr,!1,t)}function Gf(v,e){const t=id(e,this.size,9);v.uniformMatrix3fv(this.addr,!1,t)}function fu(v,e){const t=id(e,this.size,16);v.uniformMatrix4fv(this.addr,!1,t)}function l_(v,e){v.uniform1iv(this.addr,e)}function pm(v,e){v.uniform2iv(this.addr,e)}function mm(v,e){v.uniform3iv(this.addr,e)}function fh(v,e){v.uniform4iv(this.addr,e)}function gm(v,e){v.uniform1uiv(this.addr,e)}function _m(v,e){v.uniform2uiv(this.addr,e)}function c_(v,e){v.uniform3uiv(this.addr,e)}function vm(v,e){v.uniform4uiv(this.addr,e)}function Mv(v,e,t){const s=this.cache,l=e.length,h=rd(t,l);Fr(s,h)||(v.uniform1iv(this.addr,h),qr(s,h));for(let g=0;g!==l;++g)t.setTexture2D(e[g]||Nf,h[g])}function u_(v,e,t){const s=this.cache,l=e.length,h=rd(t,l);Fr(s,h)||(v.uniform1iv(this.addr,h),qr(s,h));for(let g=0;g!==l;++g)t.setTexture3D(e[g]||ql,h[g])}function ld(v,e,t){const s=this.cache,l=e.length,h=rd(t,l);Fr(s,h)||(v.uniform1iv(this.addr,h),qr(s,h));for(let g=0;g!==l;++g)t.setTextureCube(e[g]||Ff,h[g])}function d_(v,e,t){const s=this.cache,l=e.length,h=rd(t,l);Fr(s,h)||(v.uniform1iv(this.addr,h),qr(s,h));for(let g=0;g!==l;++g)t.setTexture2DArray(e[g]||Kr,h[g])}class cd{constructor(e,t,s){this.id=e,this.addr=s,this.cache=[],this.setValue=function hu(v){switch(v){case 5126:return um;case 35664:return dm;case 35665:return s_;case 35666:return ch;case 35674:return hm;case 35675:return sd;case 35676:return Lf;case 5124:case 35670:return Tv;case 35667:case 35671:return Ml;case 35668:case 35672:return o_;case 35669:case 35673:return od;case 5125:return xc;case 36294:return fm;case 36295:return Dc;case 36296:return a_;case 35678:case 36198:case 36298:case 36306:case 35682:return yi;case 35679:case 36299:case 36307:return uh;case 35680:case 36300:case 36308:case 36293:return Bf;case 36289:case 36303:case 36311:case 36292:return jf}}(t.type)}}class h_{constructor(e,t,s){this.id=e,this.addr=s,this.cache=[],this.size=t.size,this.setValue=function pu(v){switch(v){case 5126:return wc;case 35664:return kf;case 35665:return ad;case 35666:return dh;case 35674:return hh;case 35675:return Gf;case 35676:return fu;case 5124:case 35670:return l_;case 35667:case 35671:return pm;case 35668:case 35672:return mm;case 35669:case 35673:return fh;case 5125:return gm;case 36294:return _m;case 36295:return c_;case 36296:return vm;case 35678:case 36198:case 36298:case 36306:case 35682:return Mv;case 35679:case 36299:case 36307:return u_;case 35680:case 36300:case 36308:case 36293:return ld;case 36289:case 36303:case 36311:case 36292:return d_}}(t.type)}}class Vf{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,s){const l=this.seq;for(let h=0,g=l.length;h!==g;++h){const _=l[h];_.setValue(e,t[_.id],s)}}}const ph=/(\w+)(\])?(\[|\.)?/g;function Uf(v,e){v.seq.push(e),v.map[e.id]=e}function ym(v,e,t){const s=v.name,l=s.length;for(ph.lastIndex=0;;){const h=ph.exec(s);let _=h[1];const x=h[3];if("]"===h[2]&&(_|=0),void 0===x||"["===x&&ph.lastIndex+2===l){Uf(t,void 0===x?new cd(_,v,e):new h_(_,v,e));break}{let A=t.map[_];void 0===A&&(A=new Vf(_),Uf(t,A)),t=A}}}class mu{constructor(e,t){this.seq=[],this.map={};const s=e.getProgramParameter(t,35718);for(let l=0;l<s;++l){const h=e.getActiveUniform(t,l);ym(h,e.getUniformLocation(t,h.name),this)}}setValue(e,t,s,l){const h=this.map[t];void 0!==h&&h.setValue(e,s,l)}setOptional(e,t,s){const l=t[s];void 0!==l&&this.setValue(e,s,l)}static upload(e,t,s,l){for(let h=0,g=t.length;h!==g;++h){const _=t[h],b=s[_.id];!1!==b.needsUpdate&&_.setValue(e,b.value,l)}}static seqWithValue(e,t){const s=[];for(let l=0,h=e.length;l!==h;++l){const g=e[l];g.id in t&&s.push(g)}return s}}function bm(v,e,t){const s=v.createShader(e);return v.shaderSource(s,t),v.compileShader(s),s}let mh=0;function zf(v,e,t){const s=v.getShaderParameter(e,35713),l=v.getShaderInfoLog(e).trim();if(s&&""===l)return"";const h=/ERROR: 0:(\d+)/.exec(l);if(h){const g=parseInt(h[1]);return t.toUpperCase()+"\n\n"+l+"\n\n"+function Hf(v,e){const t=v.split("\n"),s=[],l=Math.max(e-6,0),h=Math.min(e+6,t.length);for(let g=l;g<h;g++){const _=g+1;s.push(`${_===e?">":" "} ${_}: ${t[g]}`)}return s.join("\n")}(v.getShaderSource(e),g)}return l}function gh(v,e){const t=function f_(v){switch(v){case us:return["Linear","( value )"];case Di:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",v),["Linear","( value )"]}}(e);return"vec4 "+v+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function xv(v,e){let t;switch(e){case ha:t="Linear";break;case Qr:t="Reinhard";break;case Ea:t="OptimizedCineon";break;case Dr:t="ACESFilmic";break;case fo:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+v+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function _h(v){return""!==v}function p_(v,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return v.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function m_(v,e){return v.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const ud=/^[ \t]*#include +<([\w\d./]+)>/gm;function Ja(v){return v.replace(ud,Sv)}function Sv(v,e){const t=ti[e];if(void 0===t)throw new Error("Can not resolve #include <"+e+">");return Ja(t)}const Cv=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function g_(v){return v.replace(Cv,Sy)}function Sy(v,e,t,s){let l="";for(let h=parseInt(e);h<parseInt(t);h++)l+=s.replace(/\[\s*i\s*\]/g,"[ "+h+" ]").replace(/UNROLLED_LOOP_INDEX/g,h);return l}function Tm(v){let e="precision "+v.precision+" float;\nprecision "+v.precision+" int;";return"highp"===v.precision?e+="\n#define HIGH_PRECISION":"mediump"===v.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===v.precision&&(e+="\n#define LOW_PRECISION"),e}function Av(v,e,t,s){const l=v.getContext(),h=t.defines;let g=t.vertexShader,_=t.fragmentShader;const b=function Cy(v){let e="SHADOWMAP_TYPE_BASIC";return v.shadowMapType===Fe?e="SHADOWMAP_TYPE_PCF":v.shadowMapType===ke?e="SHADOWMAP_TYPE_PCF_SOFT":v.shadowMapType===Ke&&(e="SHADOWMAP_TYPE_VSM"),e}(t),x=function __(v){let e="ENVMAP_TYPE_CUBE";if(v.envMap)switch(v.envMapMode){case Li:case wr:e="ENVMAP_TYPE_CUBE";break;case As:e="ENVMAP_TYPE_CUBE_UV"}return e}(t),S=function v_(v){let e="ENVMAP_MODE_REFLECTION";return v.envMap&&v.envMapMode===wr&&(e="ENVMAP_MODE_REFRACTION"),e}(t),A=function Ev(v){let e="ENVMAP_BLENDING_NONE";if(v.envMap)switch(v.combine){case Mn:e="ENVMAP_BLENDING_MULTIPLY";break;case xr:e="ENVMAP_BLENDING_MIX";break;case Ci:e="ENVMAP_BLENDING_ADD"}return e}(t),E=function Wf(v){const e=v.envMapCubeUVHeight;if(null===e)return null;const t=Math.log2(e)-2,s=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:s,maxMip:t}}(t),L=t.isWebGL2?"":function Dv(v){return[v.extensionDerivatives||v.envMapCubeUVHeight||v.bumpMap||v.tangentSpaceNormalMap||v.clearcoatNormalMap||v.flatShading||"physical"===v.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(v.extensionFragDepth||v.logarithmicDepthBuffer)&&v.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",v.extensionDrawBuffers&&v.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(v.extensionShaderTextureLOD||v.envMap||v.transmission)&&v.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(_h).join("\n")}(t),G=function wv(v){const e=[];for(const t in v){const s=v[t];!1!==s&&e.push("#define "+t+" "+s)}return e.join("\n")}(h),j=l.createProgram();let k,Y,q=t.glslVersion?"#version "+t.glslVersion+"\n":"";t.isRawShaderMaterial?(k=[G].filter(_h).join("\n"),k.length>0&&(k+="\n"),Y=[L,G].filter(_h).join("\n"),Y.length>0&&(Y+="\n")):(k=[Tm(t),"#define SHADER_NAME "+t.shaderName,G,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+S:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&!1===t.flatShading?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+b:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(_h).join("\n"),Y=[L,Tm(t),"#define SHADER_NAME "+t.shaderName,G,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+x:"",t.envMap?"#define "+S:"",t.envMap?"#define "+A:"",E?"#define CUBEUV_TEXEL_WIDTH "+E.texelWidth:"",E?"#define CUBEUV_TEXEL_HEIGHT "+E.texelHeight:"",E?"#define CUBEUV_MAX_MIP "+E.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+b:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Qi?"#define TONE_MAPPING":"",t.toneMapping!==Qi?ti.tonemapping_pars_fragment:"",t.toneMapping!==Qi?xv("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",ti.encodings_pars_fragment,gh("linearToOutputTexel",t.outputEncoding),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"","\n"].filter(_h).join("\n")),g=Ja(g),g=p_(g,t),g=m_(g,t),_=Ja(_),_=p_(_,t),_=m_(_,t),g=g_(g),_=g_(_),t.isWebGL2&&!0!==t.isRawShaderMaterial&&(q="#version 300 es\n",k=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+k,Y=["#define varying in",t.glslVersion===Gd?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===Gd?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+Y);const Z=q+Y+_,se=bm(l,35633,q+k+g),de=bm(l,35632,Z);if(l.attachShader(j,se),l.attachShader(j,de),void 0!==t.index0AttributeName?l.bindAttribLocation(j,0,t.index0AttributeName):!0===t.morphTargets&&l.bindAttribLocation(j,0,"position"),l.linkProgram(j),v.debug.checkShaderErrors){const fe=l.getProgramInfoLog(j).trim(),Te=l.getShaderInfoLog(se).trim(),Ye=l.getShaderInfoLog(de).trim();let bt=!0,He=!0;if(!1===l.getProgramParameter(j,35714)){bt=!1;const Ee=zf(l,se,"vertex"),at=zf(l,de,"fragment");console.error("THREE.WebGLProgram: Shader Error "+l.getError()+" - VALIDATE_STATUS "+l.getProgramParameter(j,35715)+"\n\nProgram Info Log: "+fe+"\n"+Ee+"\n"+at)}else""!==fe?console.warn("THREE.WebGLProgram: Program Info Log:",fe):(""===Te||""===Ye)&&(He=!1);He&&(this.diagnostics={runnable:bt,programLog:fe,vertexShader:{log:Te,prefix:k},fragmentShader:{log:Ye,prefix:Y}})}let _e,X;return l.deleteShader(se),l.deleteShader(de),this.getUniforms=function(){return void 0===_e&&(_e=new mu(l,j)),_e},this.getAttributes=function(){return void 0===X&&(X=function Rv(v,e){const t={},s=v.getProgramParameter(e,35721);for(let l=0;l<s;l++){const h=v.getActiveAttrib(e,l),g=h.name;let _=1;35674===h.type&&(_=2),35675===h.type&&(_=3),35676===h.type&&(_=4),t[g]={type:h.type,location:v.getAttribLocation(e,g),locationSize:_}}return t}(l,j)),X},this.destroy=function(){s.releaseStatesOfProgram(this),l.deleteProgram(j),this.program=void 0},this.name=t.shaderName,this.id=mh++,this.cacheKey=e,this.usedTimes=1,this.program=j,this.vertexShader=se,this.fragmentShader=de,this}let xa=0;class Ni{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const s=e.fragmentShader,l=this._getShaderStage(e.vertexShader),h=this._getShaderStage(s),g=this._getShaderCacheForMaterial(e);return!1===g.has(l)&&(g.add(l),l.usedTimes++),!1===g.has(h)&&(g.add(h),h.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const s of t)s.usedTimes--,0===s.usedTimes&&this.shaderCache.delete(s.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let s=t.get(e);return void 0===s&&(s=new Set,t.set(e,s)),s}_getShaderStage(e){const t=this.shaderCache;let s=t.get(e);return void 0===s&&(s=new $f(e),t.set(e,s)),s}}class $f{constructor(e){this.id=xa++,this.code=e,this.usedTimes=0}}function Yf(v,e,t,s,l,h,g){const _=new qi,b=new Ni,x=[],S=l.isWebGL2,A=l.logarithmicDepthBuffer,E=l.vertexTextures;let L=l.precision;const G={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function j(X,fe,Te,Ye,bt){const He=Ye.fog,Ee=bt.geometry,wt=(X.isMeshStandardMaterial?t:e).get(X.envMap||(X.isMeshStandardMaterial?Ye.environment:null)),Ft=wt&&wt.mapping===As?wt.image.height:null,yt=G[X.type];null!==X.precision&&(L=l.getMaxPrecision(X.precision),L!==X.precision&&console.warn("THREE.WebGLProgram.getParameters:",X.precision,"not supported, using",L,"instead."));const Bt=Ee.morphAttributes.position||Ee.morphAttributes.normal||Ee.morphAttributes.color,It=void 0!==Bt?Bt.length:0;let ot,$t,zt,an,rt=0;if(void 0!==Ee.morphAttributes.position&&(rt=1),void 0!==Ee.morphAttributes.normal&&(rt=2),void 0!==Ee.morphAttributes.color&&(rt=3),yt){const wi=Ma[yt];ot=wi.vertexShader,$t=wi.fragmentShader}else ot=X.vertexShader,$t=X.fragmentShader,b.update(X),zt=b.getVertexShaderID(X),an=b.getFragmentShaderID(X);const ft=v.getRenderTarget(),yn=X.clearcoat>0,Xn=X.iridescence>0;return{isWebGL2:S,shaderID:yt,shaderName:X.type,vertexShader:ot,fragmentShader:$t,defines:X.defines,customVertexShaderID:zt,customFragmentShaderID:an,isRawShaderMaterial:!0===X.isRawShaderMaterial,glslVersion:X.glslVersion,precision:L,instancing:!0===bt.isInstancedMesh,instancingColor:!0===bt.isInstancedMesh&&null!==bt.instanceColor,supportsVertexTextures:E,outputEncoding:null===ft?v.outputEncoding:!0===ft.isXRRenderTarget?ft.texture.encoding:us,map:!!X.map,matcap:!!X.matcap,envMap:!!wt,envMapMode:wt&&wt.mapping,envMapCubeUVHeight:Ft,lightMap:!!X.lightMap,aoMap:!!X.aoMap,emissiveMap:!!X.emissiveMap,bumpMap:!!X.bumpMap,normalMap:!!X.normalMap,objectSpaceNormalMap:X.normalMapType===il,tangentSpaceNormalMap:X.normalMapType===vo,decodeVideoTexture:!!X.map&&!0===X.map.isVideoTexture&&X.map.encoding===Di,clearcoat:yn,clearcoatMap:yn&&!!X.clearcoatMap,clearcoatRoughnessMap:yn&&!!X.clearcoatRoughnessMap,clearcoatNormalMap:yn&&!!X.clearcoatNormalMap,iridescence:Xn,iridescenceMap:Xn&&!!X.iridescenceMap,iridescenceThicknessMap:Xn&&!!X.iridescenceThicknessMap,displacementMap:!!X.displacementMap,roughnessMap:!!X.roughnessMap,metalnessMap:!!X.metalnessMap,specularMap:!!X.specularMap,specularIntensityMap:!!X.specularIntensityMap,specularColorMap:!!X.specularColorMap,opaque:!1===X.transparent&&X.blending===_n,alphaMap:!!X.alphaMap,alphaTest:X.alphaTest>0,gradientMap:!!X.gradientMap,sheen:X.sheen>0,sheenColorMap:!!X.sheenColorMap,sheenRoughnessMap:!!X.sheenRoughnessMap,transmission:X.transmission>0,transmissionMap:!!X.transmissionMap,thicknessMap:!!X.thicknessMap,combine:X.combine,vertexTangents:!!X.normalMap&&!!Ee.attributes.tangent,vertexColors:X.vertexColors,vertexAlphas:!0===X.vertexColors&&!!Ee.attributes.color&&4===Ee.attributes.color.itemSize,vertexUvs:!!(X.map||X.bumpMap||X.normalMap||X.specularMap||X.alphaMap||X.emissiveMap||X.roughnessMap||X.metalnessMap||X.clearcoatMap||X.clearcoatRoughnessMap||X.clearcoatNormalMap||X.iridescenceMap||X.iridescenceThicknessMap||X.displacementMap||X.transmissionMap||X.thicknessMap||X.specularIntensityMap||X.specularColorMap||X.sheenColorMap||X.sheenRoughnessMap),uvsVertexOnly:!(X.map||X.bumpMap||X.normalMap||X.specularMap||X.alphaMap||X.emissiveMap||X.roughnessMap||X.metalnessMap||X.clearcoatNormalMap||X.iridescenceMap||X.iridescenceThicknessMap||X.transmission>0||X.transmissionMap||X.thicknessMap||X.specularIntensityMap||X.specularColorMap||X.sheen>0||X.sheenColorMap||X.sheenRoughnessMap||!X.displacementMap),fog:!!He,useFog:!0===X.fog,fogExp2:He&&He.isFogExp2,flatShading:!!X.flatShading,sizeAttenuation:X.sizeAttenuation,logarithmicDepthBuffer:A,skinning:!0===bt.isSkinnedMesh,morphTargets:void 0!==Ee.morphAttributes.position,morphNormals:void 0!==Ee.morphAttributes.normal,morphColors:void 0!==Ee.morphAttributes.color,morphTargetsCount:It,morphTextureStride:rt,numDirLights:fe.directional.length,numPointLights:fe.point.length,numSpotLights:fe.spot.length,numSpotLightMaps:fe.spotLightMap.length,numRectAreaLights:fe.rectArea.length,numHemiLights:fe.hemi.length,numDirLightShadows:fe.directionalShadowMap.length,numPointLightShadows:fe.pointShadowMap.length,numSpotLightShadows:fe.spotShadowMap.length,numSpotLightShadowsWithMaps:fe.numSpotLightShadowsWithMaps,numClippingPlanes:g.numPlanes,numClipIntersection:g.numIntersection,dithering:X.dithering,shadowMapEnabled:v.shadowMap.enabled&&Te.length>0,shadowMapType:v.shadowMap.type,toneMapping:X.toneMapped?v.toneMapping:Qi,physicallyCorrectLights:v.physicallyCorrectLights,premultipliedAlpha:X.premultipliedAlpha,doubleSided:X.side===Mt,flipSided:X.side===ze,useDepthPacking:!!X.depthPacking,depthPacking:X.depthPacking||0,index0AttributeName:X.index0AttributeName,extensionDerivatives:X.extensions&&X.extensions.derivatives,extensionFragDepth:X.extensions&&X.extensions.fragDepth,extensionDrawBuffers:X.extensions&&X.extensions.drawBuffers,extensionShaderTextureLOD:X.extensions&&X.extensions.shaderTextureLOD,rendererExtensionFragDepth:S||s.has("EXT_frag_depth"),rendererExtensionDrawBuffers:S||s.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:S||s.has("EXT_shader_texture_lod"),customProgramCacheKey:X.customProgramCacheKey()}},getProgramCacheKey:function k(X){const fe=[];if(X.shaderID?fe.push(X.shaderID):(fe.push(X.customVertexShaderID),fe.push(X.customFragmentShaderID)),void 0!==X.defines)for(const Te in X.defines)fe.push(Te),fe.push(X.defines[Te]);return!1===X.isRawShaderMaterial&&(function Y(X,fe){X.push(fe.precision),X.push(fe.outputEncoding),X.push(fe.envMapMode),X.push(fe.envMapCubeUVHeight),X.push(fe.combine),X.push(fe.vertexUvs),X.push(fe.fogExp2),X.push(fe.sizeAttenuation),X.push(fe.morphTargetsCount),X.push(fe.morphAttributeCount),X.push(fe.numDirLights),X.push(fe.numPointLights),X.push(fe.numSpotLights),X.push(fe.numSpotLightMaps),X.push(fe.numHemiLights),X.push(fe.numRectAreaLights),X.push(fe.numDirLightShadows),X.push(fe.numPointLightShadows),X.push(fe.numSpotLightShadows),X.push(fe.numSpotLightShadowsWithMaps),X.push(fe.shadowMapType),X.push(fe.toneMapping),X.push(fe.numClippingPlanes),X.push(fe.numClipIntersection),X.push(fe.depthPacking)}(fe,X),function q(X,fe){_.disableAll(),fe.isWebGL2&&_.enable(0),fe.supportsVertexTextures&&_.enable(1),fe.instancing&&_.enable(2),fe.instancingColor&&_.enable(3),fe.map&&_.enable(4),fe.matcap&&_.enable(5),fe.envMap&&_.enable(6),fe.lightMap&&_.enable(7),fe.aoMap&&_.enable(8),fe.emissiveMap&&_.enable(9),fe.bumpMap&&_.enable(10),fe.normalMap&&_.enable(11),fe.objectSpaceNormalMap&&_.enable(12),fe.tangentSpaceNormalMap&&_.enable(13),fe.clearcoat&&_.enable(14),fe.clearcoatMap&&_.enable(15),fe.clearcoatRoughnessMap&&_.enable(16),fe.clearcoatNormalMap&&_.enable(17),fe.iridescence&&_.enable(18),fe.iridescenceMap&&_.enable(19),fe.iridescenceThicknessMap&&_.enable(20),fe.displacementMap&&_.enable(21),fe.specularMap&&_.enable(22),fe.roughnessMap&&_.enable(23),fe.metalnessMap&&_.enable(24),fe.gradientMap&&_.enable(25),fe.alphaMap&&_.enable(26),fe.alphaTest&&_.enable(27),fe.vertexColors&&_.enable(28),fe.vertexAlphas&&_.enable(29),fe.vertexUvs&&_.enable(30),fe.vertexTangents&&_.enable(31),fe.uvsVertexOnly&&_.enable(32),X.push(_.mask),_.disableAll(),fe.fog&&_.enable(0),fe.useFog&&_.enable(1),fe.flatShading&&_.enable(2),fe.logarithmicDepthBuffer&&_.enable(3),fe.skinning&&_.enable(4),fe.morphTargets&&_.enable(5),fe.morphNormals&&_.enable(6),fe.morphColors&&_.enable(7),fe.premultipliedAlpha&&_.enable(8),fe.shadowMapEnabled&&_.enable(9),fe.physicallyCorrectLights&&_.enable(10),fe.doubleSided&&_.enable(11),fe.flipSided&&_.enable(12),fe.useDepthPacking&&_.enable(13),fe.dithering&&_.enable(14),fe.specularIntensityMap&&_.enable(15),fe.specularColorMap&&_.enable(16),fe.transmission&&_.enable(17),fe.transmissionMap&&_.enable(18),fe.thicknessMap&&_.enable(19),fe.sheen&&_.enable(20),fe.sheenColorMap&&_.enable(21),fe.sheenRoughnessMap&&_.enable(22),fe.decodeVideoTexture&&_.enable(23),fe.opaque&&_.enable(24),X.push(_.mask)}(fe,X),fe.push(v.outputEncoding)),fe.push(X.customProgramCacheKey),fe.join()},getUniforms:function $(X){const fe=G[X.type];let Te;return Te=fe?nt.clone(Ma[fe].uniforms):X.uniforms,Te},acquireProgram:function Z(X,fe){let Te;for(let Ye=0,bt=x.length;Ye<bt;Ye++){const He=x[Ye];if(He.cacheKey===fe){Te=He,++Te.usedTimes;break}}return void 0===Te&&(Te=new Av(v,fe,X,h),x.push(Te)),Te},releaseProgram:function se(X){if(0==--X.usedTimes){const fe=x.indexOf(X);x[fe]=x[x.length-1],x.pop(),X.destroy()}},releaseShaderCache:function de(X){b.remove(X)},programs:x,dispose:function _e(){b.dispose()}}}function Jf(){let v=new WeakMap;return{get:function e(h){let g=v.get(h);return void 0===g&&(g={},v.set(h,g)),g},remove:function t(h){v.delete(h)},update:function s(h,g,_){v.get(h)[g]=_},dispose:function l(){v=new WeakMap}}}function y_(v,e){return v.groupOrder!==e.groupOrder?v.groupOrder-e.groupOrder:v.renderOrder!==e.renderOrder?v.renderOrder-e.renderOrder:v.material.id!==e.material.id?v.material.id-e.material.id:v.z!==e.z?v.z-e.z:v.id-e.id}function Mm(v,e){return v.groupOrder!==e.groupOrder?v.groupOrder-e.groupOrder:v.renderOrder!==e.renderOrder?v.renderOrder-e.renderOrder:v.z!==e.z?e.z-v.z:v.id-e.id}function vh(){const v=[];let e=0;const t=[],s=[],l=[];function g(A,E,L,G,j,k){let Y=v[e];return void 0===Y?(Y={id:A.id,object:A,geometry:E,material:L,groupOrder:G,renderOrder:A.renderOrder,z:j,group:k},v[e]=Y):(Y.id=A.id,Y.object=A,Y.geometry=E,Y.material=L,Y.groupOrder=G,Y.renderOrder=A.renderOrder,Y.z=j,Y.group=k),e++,Y}return{opaque:t,transmissive:s,transparent:l,init:function h(){e=0,t.length=0,s.length=0,l.length=0},push:function _(A,E,L,G,j,k){const Y=g(A,E,L,G,j,k);L.transmission>0?s.push(Y):!0===L.transparent?l.push(Y):t.push(Y)},unshift:function b(A,E,L,G,j,k){const Y=g(A,E,L,G,j,k);L.transmission>0?s.unshift(Y):!0===L.transparent?l.unshift(Y):t.unshift(Y)},finish:function S(){for(let A=e,E=v.length;A<E;A++){const L=v[A];if(null===L.id)break;L.id=null,L.object=null,L.geometry=null,L.material=null,L.group=null}},sort:function x(A,E){t.length>1&&t.sort(A||y_),s.length>1&&s.sort(E||Mm),l.length>1&&l.sort(E||Mm)}}}function b_(){let v=new WeakMap;return{get:function e(s,l){const h=v.get(s);let g;return void 0===h?(g=new vh,v.set(s,[g])):l>=h.length?(g=new vh,h.push(g)):g=h[l],g},dispose:function t(){v=new WeakMap}}}function dd(){const v={};return{get:function(e){if(void 0!==v[e.id])return v[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new le,color:new Wt};break;case"SpotLight":t={position:new le,direction:new le,color:new Wt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new le,color:new Wt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new le,skyColor:new Wt,groundColor:new Wt};break;case"RectAreaLight":t={color:new Wt,position:new le,halfWidth:new le,halfHeight:new le}}return v[e.id]=t,t}}}let xm=0;function ni(v,e){return(e.castShadow?2:0)-(v.castShadow?2:0)+(e.map?1:0)-(v.map?1:0)}function Dm(v,e){const t=new dd,s=function yh(){const v={};return{get:function(e){if(void 0!==v[e.id])return v[e.id];let t;switch(e.type){case"DirectionalLight":case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ht};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ht,shadowCameraNear:1,shadowCameraFar:1e3}}return v[e.id]=t,t}}}(),l={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let S=0;S<9;S++)l.probe.push(new le);const h=new le,g=new Gt,_=new Gt;return{setup:function b(S,A){let E=0,L=0,G=0;for(let Ye=0;Ye<9;Ye++)l.probe[Ye].set(0,0,0);let j=0,k=0,Y=0,q=0,$=0,Z=0,se=0,de=0,_e=0,X=0;S.sort(ni);const fe=!0!==A?Math.PI:1;for(let Ye=0,bt=S.length;Ye<bt;Ye++){const He=S[Ye],Ee=He.color,at=He.intensity,wt=He.distance,Ft=He.shadow&&He.shadow.map?He.shadow.map.texture:null;if(He.isAmbientLight)E+=Ee.r*at*fe,L+=Ee.g*at*fe,G+=Ee.b*at*fe;else if(He.isLightProbe)for(let yt=0;yt<9;yt++)l.probe[yt].addScaledVector(He.sh.coefficients[yt],at);else if(He.isDirectionalLight){const yt=t.get(He);if(yt.color.copy(He.color).multiplyScalar(He.intensity*fe),He.castShadow){const Bt=He.shadow,It=s.get(He);It.shadowBias=Bt.bias,It.shadowNormalBias=Bt.normalBias,It.shadowRadius=Bt.radius,It.shadowMapSize=Bt.mapSize,l.directionalShadow[j]=It,l.directionalShadowMap[j]=Ft,l.directionalShadowMatrix[j]=He.shadow.matrix,Z++}l.directional[j]=yt,j++}else if(He.isSpotLight){const yt=t.get(He);yt.position.setFromMatrixPosition(He.matrixWorld),yt.color.copy(Ee).multiplyScalar(at*fe),yt.distance=wt,yt.coneCos=Math.cos(He.angle),yt.penumbraCos=Math.cos(He.angle*(1-He.penumbra)),yt.decay=He.decay,l.spot[Y]=yt;const Bt=He.shadow;if(He.map&&(l.spotLightMap[_e]=He.map,_e++,Bt.updateMatrices(He),He.castShadow&&X++),l.spotLightMatrix[Y]=Bt.matrix,He.castShadow){const It=s.get(He);It.shadowBias=Bt.bias,It.shadowNormalBias=Bt.normalBias,It.shadowRadius=Bt.radius,It.shadowMapSize=Bt.mapSize,l.spotShadow[Y]=It,l.spotShadowMap[Y]=Ft,de++}Y++}else if(He.isRectAreaLight){const yt=t.get(He);yt.color.copy(Ee).multiplyScalar(at),yt.halfWidth.set(.5*He.width,0,0),yt.halfHeight.set(0,.5*He.height,0),l.rectArea[q]=yt,q++}else if(He.isPointLight){const yt=t.get(He);if(yt.color.copy(He.color).multiplyScalar(He.intensity*fe),yt.distance=He.distance,yt.decay=He.decay,He.castShadow){const Bt=He.shadow,It=s.get(He);It.shadowBias=Bt.bias,It.shadowNormalBias=Bt.normalBias,It.shadowRadius=Bt.radius,It.shadowMapSize=Bt.mapSize,It.shadowCameraNear=Bt.camera.near,It.shadowCameraFar=Bt.camera.far,l.pointShadow[k]=It,l.pointShadowMap[k]=Ft,l.pointShadowMatrix[k]=He.shadow.matrix,se++}l.point[k]=yt,k++}else if(He.isHemisphereLight){const yt=t.get(He);yt.skyColor.copy(He.color).multiplyScalar(at*fe),yt.groundColor.copy(He.groundColor).multiplyScalar(at*fe),l.hemi[$]=yt,$++}}q>0&&(e.isWebGL2||!0===v.has("OES_texture_float_linear")?(l.rectAreaLTC1=Kt.LTC_FLOAT_1,l.rectAreaLTC2=Kt.LTC_FLOAT_2):!0===v.has("OES_texture_half_float_linear")?(l.rectAreaLTC1=Kt.LTC_HALF_1,l.rectAreaLTC2=Kt.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),l.ambient[0]=E,l.ambient[1]=L,l.ambient[2]=G;const Te=l.hash;(Te.directionalLength!==j||Te.pointLength!==k||Te.spotLength!==Y||Te.rectAreaLength!==q||Te.hemiLength!==$||Te.numDirectionalShadows!==Z||Te.numPointShadows!==se||Te.numSpotShadows!==de||Te.numSpotMaps!==_e)&&(l.directional.length=j,l.spot.length=Y,l.rectArea.length=q,l.point.length=k,l.hemi.length=$,l.directionalShadow.length=Z,l.directionalShadowMap.length=Z,l.pointShadow.length=se,l.pointShadowMap.length=se,l.spotShadow.length=de,l.spotShadowMap.length=de,l.directionalShadowMatrix.length=Z,l.pointShadowMatrix.length=se,l.spotLightMatrix.length=de+_e-X,l.spotLightMap.length=_e,l.numSpotLightShadowsWithMaps=X,Te.directionalLength=j,Te.pointLength=k,Te.spotLength=Y,Te.rectAreaLength=q,Te.hemiLength=$,Te.numDirectionalShadows=Z,Te.numPointShadows=se,Te.numSpotShadows=de,Te.numSpotMaps=_e,l.version=xm++)},setupView:function x(S,A){let E=0,L=0,G=0,j=0,k=0;const Y=A.matrixWorldInverse;for(let q=0,$=S.length;q<$;q++){const Z=S[q];if(Z.isDirectionalLight){const se=l.directional[E];se.direction.setFromMatrixPosition(Z.matrixWorld),h.setFromMatrixPosition(Z.target.matrixWorld),se.direction.sub(h),se.direction.transformDirection(Y),E++}else if(Z.isSpotLight){const se=l.spot[G];se.position.setFromMatrixPosition(Z.matrixWorld),se.position.applyMatrix4(Y),se.direction.setFromMatrixPosition(Z.matrixWorld),h.setFromMatrixPosition(Z.target.matrixWorld),se.direction.sub(h),se.direction.transformDirection(Y),G++}else if(Z.isRectAreaLight){const se=l.rectArea[j];se.position.setFromMatrixPosition(Z.matrixWorld),se.position.applyMatrix4(Y),_.identity(),g.copy(Z.matrixWorld),g.premultiply(Y),_.extractRotation(g),se.halfWidth.set(.5*Z.width,0,0),se.halfHeight.set(0,.5*Z.height,0),se.halfWidth.applyMatrix4(_),se.halfHeight.applyMatrix4(_),j++}else if(Z.isPointLight){const se=l.point[L];se.position.setFromMatrixPosition(Z.matrixWorld),se.position.applyMatrix4(Y),L++}else if(Z.isHemisphereLight){const se=l.hemi[k];se.direction.setFromMatrixPosition(Z.matrixWorld),se.direction.transformDirection(Y),k++}}},state:l}}function Zf(v,e){const t=new Dm(v,e),s=[],l=[];return{init:function h(){s.length=0,l.length=0},state:{lightsArray:s,shadowsArray:l,lights:t},setupLights:function b(A){t.setup(s,A)},setupLightsView:function x(A){t.setupView(s,A)},pushLight:function g(A){s.push(A)},pushShadow:function _(A){l.push(A)}}}function wm(v,e){let t=new WeakMap;return{get:function s(h,g=0){const _=t.get(h);let b;return void 0===_?(b=new Zf(v,e),t.set(h,[b])):g>=_.length?(b=new Zf(v,e),_.push(b)):b=_[g],b},dispose:function l(){t=new WeakMap}}}class Rc extends br{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class Xl extends br{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new le,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const gu="void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",bh="uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}";function Kf(v,e,t){let s=new Wd;const l=new ht,h=new ht,g=new Jn,_=new Rc({depthPacking:Fl}),b=new Xl,x={},S=t.maxTextureSize,A={0:ze,1:Lt,2:Mt},E=new Kn({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new ht},radius:{value:4}},vertexShader:gu,fragmentShader:bh}),L=E.clone();L.defines.HORIZONTAL_PASS=1;const G=new Zn;G.setAttribute("position",new ji(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const j=new w(G,E),k=this;function Y(Z,se){const de=e.update(j);E.defines.VSM_SAMPLES!==Z.blurSamples&&(E.defines.VSM_SAMPLES=Z.blurSamples,L.defines.VSM_SAMPLES=Z.blurSamples,E.needsUpdate=!0,L.needsUpdate=!0),null===Z.mapPass&&(Z.mapPass=new ta(l.x,l.y)),E.uniforms.shadow_pass.value=Z.map.texture,E.uniforms.resolution.value=Z.mapSize,E.uniforms.radius.value=Z.radius,v.setRenderTarget(Z.mapPass),v.clear(),v.renderBufferDirect(se,null,de,E,j,null),L.uniforms.shadow_pass.value=Z.mapPass.texture,L.uniforms.resolution.value=Z.mapSize,L.uniforms.radius.value=Z.radius,v.setRenderTarget(Z.map),v.clear(),v.renderBufferDirect(se,null,de,L,j,null)}function q(Z,se,de,_e,X,fe){let Te=null;const Ye=!0===de.isPointLight?Z.customDistanceMaterial:Z.customDepthMaterial;if(void 0!==Ye)Te=Ye;else if(Te=!0===de.isPointLight?b:_,v.localClippingEnabled&&!0===se.clipShadows&&Array.isArray(se.clippingPlanes)&&0!==se.clippingPlanes.length||se.displacementMap&&0!==se.displacementScale||se.alphaMap&&se.alphaTest>0||se.map&&se.alphaTest>0){const bt=Te.uuid,He=se.uuid;let Ee=x[bt];void 0===Ee&&(Ee={},x[bt]=Ee);let at=Ee[He];void 0===at&&(at=Te.clone(),Ee[He]=at),Te=at}return Te.visible=se.visible,Te.wireframe=se.wireframe,Te.side=fe===Ke?null!==se.shadowSide?se.shadowSide:se.side:null!==se.shadowSide?se.shadowSide:A[se.side],Te.alphaMap=se.alphaMap,Te.alphaTest=se.alphaTest,Te.map=se.map,Te.clipShadows=se.clipShadows,Te.clippingPlanes=se.clippingPlanes,Te.clipIntersection=se.clipIntersection,Te.displacementMap=se.displacementMap,Te.displacementScale=se.displacementScale,Te.displacementBias=se.displacementBias,Te.wireframeLinewidth=se.wireframeLinewidth,Te.linewidth=se.linewidth,!0===de.isPointLight&&!0===Te.isMeshDistanceMaterial&&(Te.referencePosition.setFromMatrixPosition(de.matrixWorld),Te.nearDistance=_e,Te.farDistance=X),Te}function $(Z,se,de,_e,X){if(!1===Z.visible)return;if(Z.layers.test(se.layers)&&(Z.isMesh||Z.isLine||Z.isPoints)&&(Z.castShadow||Z.receiveShadow&&X===Ke)&&(!Z.frustumCulled||s.intersectsObject(Z))){Z.modelViewMatrix.multiplyMatrices(de.matrixWorldInverse,Z.matrixWorld);const Ye=e.update(Z),bt=Z.material;if(Array.isArray(bt)){const He=Ye.groups;for(let Ee=0,at=He.length;Ee<at;Ee++){const wt=He[Ee],Ft=bt[wt.materialIndex];if(Ft&&Ft.visible){const yt=q(Z,Ft,_e,de.near,de.far,X);v.renderBufferDirect(de,null,Ye,yt,Z,wt)}}}else if(bt.visible){const He=q(Z,bt,_e,de.near,de.far,X);v.renderBufferDirect(de,null,Ye,He,Z,null)}}const Te=Z.children;for(let Ye=0,bt=Te.length;Ye<bt;Ye++)$(Te[Ye],se,de,_e,X)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Fe,this.render=function(Z,se,de){if(!1===k.enabled||!1===k.autoUpdate&&!1===k.needsUpdate||0===Z.length)return;const _e=v.getRenderTarget(),X=v.getActiveCubeFace(),fe=v.getActiveMipmapLevel(),Te=v.state;Te.setBlending(jt),Te.buffers.color.setClear(1,1,1,1),Te.buffers.depth.setTest(!0),Te.setScissorTest(!1);for(let Ye=0,bt=Z.length;Ye<bt;Ye++){const He=Z[Ye],Ee=He.shadow;if(void 0===Ee){console.warn("THREE.WebGLShadowMap:",He,"has no shadow.");continue}if(!1===Ee.autoUpdate&&!1===Ee.needsUpdate)continue;l.copy(Ee.mapSize);const at=Ee.getFrameExtents();l.multiply(at),h.copy(Ee.mapSize),(l.x>S||l.y>S)&&(l.x>S&&(h.x=Math.floor(S/at.x),l.x=h.x*at.x,Ee.mapSize.x=h.x),l.y>S&&(h.y=Math.floor(S/at.y),l.y=h.y*at.y,Ee.mapSize.y=h.y)),null===Ee.map&&(Ee.map=new ta(l.x,l.y,this.type!==Ke?{minFilter:sr,magFilter:sr}:{}),Ee.map.texture.name=He.name+".shadowMap",Ee.camera.updateProjectionMatrix()),v.setRenderTarget(Ee.map),v.clear();const wt=Ee.getViewportCount();for(let Ft=0;Ft<wt;Ft++){const yt=Ee.getViewport(Ft);g.set(h.x*yt.x,h.y*yt.y,h.x*yt.z,h.y*yt.w),Te.viewport(g),Ee.updateMatrices(He,Ft),s=Ee.getFrustum(),$(se,de,Ee.camera,He,this.type)}!0!==Ee.isPointLightShadow&&this.type===Ke&&Y(Ee,de),Ee.needsUpdate=!1}k.needsUpdate=!1,v.setRenderTarget(_e,X,fe)}}function Th(v,e,t){const s=t.isWebGL2,_=new function l(){let we=!1;const ut=new Jn;let Nt=null;const vn=new Jn(0,0,0,0);return{setMask:function(Cn){Nt!==Cn&&!we&&(v.colorMask(Cn,Cn,Cn,Cn),Nt=Cn)},setLocked:function(Cn){we=Cn},setClear:function(Cn,rr,Fs,ho,Id){!0===Id&&(Cn*=ho,rr*=ho,Fs*=ho),ut.set(Cn,rr,Fs,ho),!1===vn.equals(ut)&&(v.clearColor(Cn,rr,Fs,ho),vn.copy(ut))},reset:function(){we=!1,Nt=null,vn.set(-1,0,0,0)}}},b=new function h(){let we=!1,ut=null,Nt=null,vn=null;return{setTest:function(Cn){Cn?qn(2929):yn(2929)},setMask:function(Cn){ut!==Cn&&!we&&(v.depthMask(Cn),ut=Cn)},setFunc:function(Cn){if(Nt!==Cn){switch(Cn){case pi:v.depthFunc(512);break;case lr:v.depthFunc(519);break;case En:v.depthFunc(513);break;case jn:v.depthFunc(515);break;case tn:v.depthFunc(514);break;case Si:v.depthFunc(518);break;case Es:v.depthFunc(516);break;case wn:v.depthFunc(517);break;default:v.depthFunc(515)}Nt=Cn}},setLocked:function(Cn){we=Cn},setClear:function(Cn){vn!==Cn&&(v.clearDepth(Cn),vn=Cn)},reset:function(){we=!1,ut=null,Nt=null,vn=null}}},x=new function g(){let we=!1,ut=null,Nt=null,vn=null,Cn=null,rr=null,Fs=null,ho=null,Id=null;return{setTest:function(Vr){we||(Vr?qn(2960):yn(2960))},setMask:function(Vr){ut!==Vr&&!we&&(v.stencilMask(Vr),ut=Vr)},setFunc:function(Vr,Hc,Qa){(Nt!==Vr||vn!==Hc||Cn!==Qa)&&(v.stencilFunc(Vr,Hc,Qa),Nt=Vr,vn=Hc,Cn=Qa)},setOp:function(Vr,Hc,Qa){(rr!==Vr||Fs!==Hc||ho!==Qa)&&(v.stencilOp(Vr,Hc,Qa),rr=Vr,Fs=Hc,ho=Qa)},setLocked:function(Vr){we=Vr},setClear:function(Vr){Id!==Vr&&(v.clearStencil(Vr),Id=Vr)},reset:function(){we=!1,ut=null,Nt=null,vn=null,Cn=null,rr=null,Fs=null,ho=null,Id=null}}},S=new WeakMap,A=new WeakMap;let E={},L={},G=new WeakMap,j=[],k=null,Y=!1,q=null,$=null,Z=null,se=null,de=null,_e=null,X=null,fe=!1,Te=null,Ye=null,bt=null,He=null,Ee=null;const at=v.getParameter(35661);let wt=!1,Ft=0;const yt=v.getParameter(7938);-1!==yt.indexOf("WebGL")?(Ft=parseFloat(/^WebGL (\d)/.exec(yt)[1]),wt=Ft>=1):-1!==yt.indexOf("OpenGL ES")&&(Ft=parseFloat(/^OpenGL ES (\d)/.exec(yt)[1]),wt=Ft>=2);let Bt=null,It={};const rt=v.getParameter(3088),ot=v.getParameter(2978),$t=(new Jn).fromArray(rt),zt=(new Jn).fromArray(ot);function an(we,ut,Nt){const vn=new Uint8Array(4),Cn=v.createTexture();v.bindTexture(we,Cn),v.texParameteri(we,10241,9728),v.texParameteri(we,10240,9728);for(let rr=0;rr<Nt;rr++)v.texImage2D(ut+rr,0,6408,1,1,0,6408,5121,vn);return Cn}const ft={};function qn(we){!0!==E[we]&&(v.enable(we),E[we]=!0)}function yn(we){!1!==E[we]&&(v.disable(we),E[we]=!1)}ft[3553]=an(3553,3553,1),ft[34067]=an(34067,34069,6),_.setClear(0,0,0,1),b.setClear(1),x.setClear(0),qn(2929),b.setFunc(jn),Xt(!1),oi(Re),qn(2884),qt(jt);const Tt={[Ne]:32774,[$e]:32778,[mt]:32779};if(s)Tt[Et]=32775,Tt[Rt]=32776;else{const we=e.get("EXT_blend_minmax");null!==we&&(Tt[Et]=we.MIN_EXT,Tt[Rt]=we.MAX_EXT)}const vt={[Zt]:0,[kt]:1,[cn]:768,[Ge]:770,[Rn]:776,[At]:774,[qe]:772,[on]:769,[Me]:771,[xt]:775,[Qe]:773};function qt(we,ut,Nt,vn,Cn,rr,Fs,ho){if(we!==jt){if(!1===Y&&(qn(3042),Y=!0),we===We)Cn=Cn||ut,rr=rr||Nt,Fs=Fs||vn,(ut!==$||Cn!==de)&&(v.blendEquationSeparate(Tt[ut],Tt[Cn]),$=ut,de=Cn),(Nt!==Z||vn!==se||rr!==_e||Fs!==X)&&(v.blendFuncSeparate(vt[Nt],vt[vn],vt[rr],vt[Fs]),Z=Nt,se=vn,_e=rr,X=Fs),q=we,fe=!1;else if(we!==q||ho!==fe){if(($!==Ne||de!==Ne)&&(v.blendEquation(32774),$=Ne,de=Ne),ho)switch(we){case _n:v.blendFuncSeparate(1,771,1,771);break;case ui:v.blendFunc(1,1);break;case Ri:v.blendFuncSeparate(0,769,0,1);break;case Ie:v.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",we)}else switch(we){case _n:v.blendFuncSeparate(770,771,1,771);break;case ui:v.blendFunc(770,1);break;case Ri:v.blendFuncSeparate(0,769,0,1);break;case Ie:v.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",we)}Z=null,se=null,_e=null,X=null,q=we,fe=ho}}else!0===Y&&(yn(3042),Y=!1)}function Xt(we){Te!==we&&(v.frontFace(we?2304:2305),Te=we)}function oi(we){we!==xe?(qn(2884),we!==Ye&&v.cullFace(we===Re?1029:we===Oe?1028:1032)):yn(2884),Ye=we}function Hn(we,ut,Nt){we?(qn(32823),(He!==ut||Ee!==Nt)&&(v.polygonOffset(ut,Nt),He=ut,Ee=Nt)):yn(32823)}return{buffers:{color:_,depth:b,stencil:x},enable:qn,disable:yn,bindFramebuffer:function Xn(we,ut){return L[we]!==ut&&(v.bindFramebuffer(we,ut),L[we]=ut,s&&(36009===we&&(L[36160]=ut),36160===we&&(L[36009]=ut)),!0)},drawBuffers:function ln(we,ut){let Nt=j,vn=!1;if(we)if(Nt=G.get(ut),void 0===Nt&&(Nt=[],G.set(ut,Nt)),we.isWebGLMultipleRenderTargets){const Cn=we.texture;if(Nt.length!==Cn.length||36064!==Nt[0]){for(let rr=0,Fs=Cn.length;rr<Fs;rr++)Nt[rr]=36064+rr;Nt.length=Cn.length,vn=!0}}else 36064!==Nt[0]&&(Nt[0]=36064,vn=!0);else 1029!==Nt[0]&&(Nt[0]=1029,vn=!0);vn&&(t.isWebGL2?v.drawBuffers(Nt):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(Nt))},useProgram:function wi(we){return k!==we&&(v.useProgram(we),k=we,!0)},setBlending:qt,setMaterial:function xn(we,ut){we.side===Mt?yn(2884):qn(2884);let Nt=we.side===ze;ut&&(Nt=!Nt),Xt(Nt),we.blending===_n&&!1===we.transparent?qt(jt):qt(we.blending,we.blendEquation,we.blendSrc,we.blendDst,we.blendEquationAlpha,we.blendSrcAlpha,we.blendDstAlpha,we.premultipliedAlpha),b.setFunc(we.depthFunc),b.setTest(we.depthTest),b.setMask(we.depthWrite),_.setMask(we.colorWrite);const vn=we.stencilWrite;x.setTest(vn),vn&&(x.setMask(we.stencilWriteMask),x.setFunc(we.stencilFunc,we.stencilRef,we.stencilFuncMask),x.setOp(we.stencilFail,we.stencilZFail,we.stencilZPass)),Hn(we.polygonOffset,we.polygonOffsetFactor,we.polygonOffsetUnits),!0===we.alphaToCoverage?qn(32926):yn(32926)},setFlipSided:Xt,setCullFace:oi,setLineWidth:function Un(we){we!==bt&&(wt&&v.lineWidth(we),bt=we)},setPolygonOffset:Hn,setScissorTest:function Mr(we){we?qn(3089):yn(3089)},activeTexture:function nr(we){void 0===we&&(we=33984+at-1),Bt!==we&&(v.activeTexture(we),Bt=we)},bindTexture:function pe(we,ut,Nt){void 0===Nt&&(Nt=null===Bt?33984+at-1:Bt);let vn=It[Nt];void 0===vn&&(vn={type:void 0,texture:void 0},It[Nt]=vn),(vn.type!==we||vn.texture!==ut)&&(Bt!==Nt&&(v.activeTexture(Nt),Bt=Nt),v.bindTexture(we,ut||ft[we]),vn.type=we,vn.texture=ut)},unbindTexture:function re(){const we=It[Bt];void 0!==we&&void 0!==we.type&&(v.bindTexture(we.type,null),we.type=void 0,we.texture=void 0)},compressedTexImage2D:function tt(){try{v.compressedTexImage2D.apply(v,arguments)}catch(we){console.error("THREE.WebGLState:",we)}},compressedTexImage3D:function Ot(){try{v.compressedTexImage3D.apply(v,arguments)}catch(we){console.error("THREE.WebGLState:",we)}},texImage2D:function Qn(){try{v.texImage2D.apply(v,arguments)}catch(we){console.error("THREE.WebGLState:",we)}},texImage3D:function Sn(){try{v.texImage3D.apply(v,arguments)}catch(we){console.error("THREE.WebGLState:",we)}},updateUBOMapping:function ir(we,ut){let Nt=A.get(ut);void 0===Nt&&(Nt=new WeakMap,A.set(ut,Nt));let vn=Nt.get(we);void 0===vn&&(vn=v.getUniformBlockIndex(ut,we.name),Nt.set(we,vn))},uniformBlockBinding:function Br(we,ut){const vn=A.get(ut).get(we);S.get(ut)!==vn&&(v.uniformBlockBinding(ut,vn,we.__bindingPointIndex),S.set(ut,vn))},texStorage2D:function gt(){try{v.texStorage2D.apply(v,arguments)}catch(we){console.error("THREE.WebGLState:",we)}},texStorage3D:function Fn(){try{v.texStorage3D.apply(v,arguments)}catch(we){console.error("THREE.WebGLState:",we)}},texSubImage2D:function Ht(){try{v.texSubImage2D.apply(v,arguments)}catch(we){console.error("THREE.WebGLState:",we)}},texSubImage3D:function hn(){try{v.texSubImage3D.apply(v,arguments)}catch(we){console.error("THREE.WebGLState:",we)}},compressedTexSubImage2D:function ri(){try{v.compressedTexSubImage2D.apply(v,arguments)}catch(we){console.error("THREE.WebGLState:",we)}},compressedTexSubImage3D:function fn(){try{v.compressedTexSubImage3D.apply(v,arguments)}catch(we){console.error("THREE.WebGLState:",we)}},scissor:function zn(we){!1===$t.equals(we)&&(v.scissor(we.x,we.y,we.z,we.w),$t.copy(we))},viewport:function On(we){!1===zt.equals(we)&&(v.viewport(we.x,we.y,we.z,we.w),zt.copy(we))},reset:function eo(){v.disable(3042),v.disable(2884),v.disable(2929),v.disable(32823),v.disable(3089),v.disable(2960),v.disable(32926),v.blendEquation(32774),v.blendFunc(1,0),v.blendFuncSeparate(1,0,1,0),v.colorMask(!0,!0,!0,!0),v.clearColor(0,0,0,0),v.depthMask(!0),v.depthFunc(513),v.clearDepth(1),v.stencilMask(4294967295),v.stencilFunc(519,0,4294967295),v.stencilOp(7680,7680,7680),v.clearStencil(0),v.cullFace(1029),v.frontFace(2305),v.polygonOffset(0,0),v.activeTexture(33984),v.bindFramebuffer(36160,null),!0===s&&(v.bindFramebuffer(36009,null),v.bindFramebuffer(36008,null)),v.useProgram(null),v.lineWidth(1),v.scissor(0,0,v.canvas.width,v.canvas.height),v.viewport(0,0,v.canvas.width,v.canvas.height),E={},Bt=null,It={},L={},G=new WeakMap,j=[],k=null,Y=!1,q=null,$=null,Z=null,se=null,de=null,_e=null,X=null,fe=!1,Te=null,Ye=null,bt=null,He=null,Ee=null,$t.set(0,0,v.canvas.width,v.canvas.height),zt.set(0,0,v.canvas.width,v.canvas.height),_.reset(),b.reset(),x.reset()}}}function Sc(v,e,t,s,l,h,g){const _=l.isWebGL2,b=l.maxTextures,x=l.maxCubemapSize,S=l.maxTextureSize,A=l.maxSamples,E=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,L=!(typeof navigator>"u")&&/OculusBrowser/g.test(navigator.userAgent),G=new WeakMap;let j;const k=new WeakMap;let Y=!1;try{Y=typeof OffscreenCanvas<"u"&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch{}function q(pe,re){return Y?new OffscreenCanvas(pe,re):hl("canvas")}function $(pe,re,tt,Ot){let Ht=1;if((pe.width>Ot||pe.height>Ot)&&(Ht=Ot/Math.max(pe.width,pe.height)),Ht<1||!0===re){if(typeof HTMLImageElement<"u"&&pe instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&pe instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&pe instanceof ImageBitmap){const hn=re?dl:Math.floor,ri=hn(Ht*pe.width),fn=hn(Ht*pe.height);void 0===j&&(j=q(ri,fn));const gt=tt?q(ri,fn):j;return gt.width=ri,gt.height=fn,gt.getContext("2d").drawImage(pe,0,0,ri,fn),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+pe.width+"x"+pe.height+") to ("+ri+"x"+fn+")."),gt}return"data"in pe&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+pe.width+"x"+pe.height+")."),pe}return pe}function Z(pe){return Hs(pe.width)&&Hs(pe.height)}function de(pe,re){return pe.generateMipmaps&&re&&pe.minFilter!==sr&&pe.minFilter!==nn}function _e(pe){v.generateMipmap(pe)}function X(pe,re,tt,Ot,Ht=!1){if(!1===_)return re;if(null!==pe){if(void 0!==v[pe])return v[pe];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+pe+"'")}let hn=re;return 6403===re&&(5126===tt&&(hn=33326),5131===tt&&(hn=33325),5121===tt&&(hn=33321)),33319===re&&(5126===tt&&(hn=33328),5131===tt&&(hn=33327),5121===tt&&(hn=33323)),6408===re&&(5126===tt&&(hn=34836),5131===tt&&(hn=34842),5121===tt&&(hn=Ot===Di&&!1===Ht?35907:32856),32819===tt&&(hn=32854),32820===tt&&(hn=32855)),(33325===hn||33326===hn||33327===hn||33328===hn||34842===hn||34836===hn)&&e.get("EXT_color_buffer_float"),hn}function fe(pe,re,tt){return!0===de(pe,tt)||pe.isFramebufferTexture&&pe.minFilter!==sr&&pe.minFilter!==nn?Math.log2(Math.max(re.width,re.height))+1:void 0!==pe.mipmaps&&pe.mipmaps.length>0?pe.mipmaps.length:pe.isCompressedTexture&&Array.isArray(pe.image)?re.mipmaps.length:1}function Te(pe){return pe===sr||pe===ki||pe===es?9728:9729}function Ye(pe){const re=pe.target;re.removeEventListener("dispose",Ye),function He(pe){const re=s.get(pe);if(void 0===re.__webglInit)return;const tt=pe.source,Ot=k.get(tt);if(Ot){const Ht=Ot[re.__cacheKey];Ht.usedTimes--,0===Ht.usedTimes&&Ee(pe),0===Object.keys(Ot).length&&k.delete(tt)}s.remove(pe)}(re),re.isVideoTexture&&G.delete(re)}function bt(pe){const re=pe.target;re.removeEventListener("dispose",bt),function at(pe){const re=pe.texture,tt=s.get(pe),Ot=s.get(re);if(void 0!==Ot.__webglTexture&&(v.deleteTexture(Ot.__webglTexture),g.memory.textures--),pe.depthTexture&&pe.depthTexture.dispose(),pe.isWebGLCubeRenderTarget)for(let Ht=0;Ht<6;Ht++)v.deleteFramebuffer(tt.__webglFramebuffer[Ht]),tt.__webglDepthbuffer&&v.deleteRenderbuffer(tt.__webglDepthbuffer[Ht]);else{if(v.deleteFramebuffer(tt.__webglFramebuffer),tt.__webglDepthbuffer&&v.deleteRenderbuffer(tt.__webglDepthbuffer),tt.__webglMultisampledFramebuffer&&v.deleteFramebuffer(tt.__webglMultisampledFramebuffer),tt.__webglColorRenderbuffer)for(let Ht=0;Ht<tt.__webglColorRenderbuffer.length;Ht++)tt.__webglColorRenderbuffer[Ht]&&v.deleteRenderbuffer(tt.__webglColorRenderbuffer[Ht]);tt.__webglDepthRenderbuffer&&v.deleteRenderbuffer(tt.__webglDepthRenderbuffer)}if(pe.isWebGLMultipleRenderTargets)for(let Ht=0,hn=re.length;Ht<hn;Ht++){const ri=s.get(re[Ht]);ri.__webglTexture&&(v.deleteTexture(ri.__webglTexture),g.memory.textures--),s.remove(re[Ht])}s.remove(re),s.remove(pe)}(re)}function Ee(pe){const re=s.get(pe);v.deleteTexture(re.__webglTexture),delete k.get(pe.source)[re.__cacheKey],g.memory.textures--}let wt=0;function It(pe,re){const tt=s.get(pe);if(pe.isVideoTexture&&function Mr(pe){const re=g.render.frame;G.get(pe)!==re&&(G.set(pe,re),pe.update())}(pe),!1===pe.isRenderTargetTexture&&pe.version>0&&tt.__version!==pe.version){const Ot=pe.image;if(null===Ot)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==Ot.complete)return void yn(tt,pe,re);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}t.bindTexture(3553,tt.__webglTexture,33984+re)}const zt={[Wi]:10497,[Vt]:33071,[lt]:33648},an={[sr]:9728,[ki]:9984,[es]:9986,[nn]:9729,[Wn]:9985,[Yn]:9987};function ft(pe,re,tt){if(tt?(v.texParameteri(pe,10242,zt[re.wrapS]),v.texParameteri(pe,10243,zt[re.wrapT]),(32879===pe||35866===pe)&&v.texParameteri(pe,32882,zt[re.wrapR]),v.texParameteri(pe,10240,an[re.magFilter]),v.texParameteri(pe,10241,an[re.minFilter])):(v.texParameteri(pe,10242,33071),v.texParameteri(pe,10243,33071),(32879===pe||35866===pe)&&v.texParameteri(pe,32882,33071),(re.wrapS!==Vt||re.wrapT!==Vt)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),v.texParameteri(pe,10240,Te(re.magFilter)),v.texParameteri(pe,10241,Te(re.minFilter)),re.minFilter!==sr&&re.minFilter!==nn&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===e.has("EXT_texture_filter_anisotropic")){const Ot=e.get("EXT_texture_filter_anisotropic");if(re.magFilter===sr||re.minFilter!==es&&re.minFilter!==Yn||re.type===vi&&!1===e.has("OES_texture_float_linear")||!1===_&&re.type===Hr&&!1===e.has("OES_texture_half_float_linear"))return;(re.anisotropy>1||s.get(re).__currentAnisotropy)&&(v.texParameterf(pe,Ot.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(re.anisotropy,l.getMaxAnisotropy())),s.get(re).__currentAnisotropy=re.anisotropy)}}function qn(pe,re){let tt=!1;void 0===pe.__webglInit&&(pe.__webglInit=!0,re.addEventListener("dispose",Ye));const Ot=re.source;let Ht=k.get(Ot);void 0===Ht&&(Ht={},k.set(Ot,Ht));const hn=function Bt(pe){const re=[];return re.push(pe.wrapS),re.push(pe.wrapT),re.push(pe.wrapR||0),re.push(pe.magFilter),re.push(pe.minFilter),re.push(pe.anisotropy),re.push(pe.internalFormat),re.push(pe.format),re.push(pe.type),re.push(pe.generateMipmaps),re.push(pe.premultiplyAlpha),re.push(pe.flipY),re.push(pe.unpackAlignment),re.push(pe.encoding),re.join()}(re);if(hn!==pe.__cacheKey){void 0===Ht[hn]&&(Ht[hn]={texture:v.createTexture(),usedTimes:0},g.memory.textures++,tt=!0),Ht[hn].usedTimes++;const ri=Ht[pe.__cacheKey];void 0!==ri&&(Ht[pe.__cacheKey].usedTimes--,0===ri.usedTimes&&Ee(re)),pe.__cacheKey=hn,pe.__webglTexture=Ht[hn].texture}return tt}function yn(pe,re,tt){let Ot=3553;(re.isDataArrayTexture||re.isCompressedArrayTexture)&&(Ot=35866),re.isData3DTexture&&(Ot=32879);const Ht=qn(pe,re),hn=re.source;t.bindTexture(Ot,pe.__webglTexture,33984+tt);const ri=s.get(hn);if(hn.version!==ri.__version||!0===Ht){t.activeTexture(33984+tt),v.pixelStorei(37440,re.flipY),v.pixelStorei(37441,re.premultiplyAlpha),v.pixelStorei(3317,re.unpackAlignment),v.pixelStorei(37443,0);const fn=function se(pe){return!_&&(pe.wrapS!==Vt||pe.wrapT!==Vt||pe.minFilter!==sr&&pe.minFilter!==nn)}(re)&&!1===Z(re.image);let gt=$(re.image,fn,!1,S);gt=nr(re,gt);const Fn=Z(gt)||_,Qn=h.convert(re.format,re.encoding);let On,Sn=h.convert(re.type),zn=X(re.internalFormat,Qn,Sn,re.encoding,re.isVideoTexture);ft(Ot,re,Fn);const ir=re.mipmaps,Br=_&&!0!==re.isVideoTexture,eo=void 0===ri.__version||!0===Ht,we=fe(re,gt,Fn);if(re.isDepthTexture)zn=6402,_?zn=re.type===vi?36012:re.type===xi?33190:re.type===ys?35056:33189:re.type===vi&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),re.format===ae&&6402===zn&&re.type!==Is&&re.type!==xi&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),re.type=xi,Sn=h.convert(re.type)),re.format===Ce&&6402===zn&&(zn=34041,re.type!==ys&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),re.type=ys,Sn=h.convert(re.type))),eo&&(Br?t.texStorage2D(3553,1,zn,gt.width,gt.height):t.texImage2D(3553,0,zn,gt.width,gt.height,0,Qn,Sn,null));else if(re.isDataTexture)if(ir.length>0&&Fn){Br&&eo&&t.texStorage2D(3553,we,zn,ir[0].width,ir[0].height);for(let ut=0,Nt=ir.length;ut<Nt;ut++)On=ir[ut],Br?t.texSubImage2D(3553,ut,0,0,On.width,On.height,Qn,Sn,On.data):t.texImage2D(3553,ut,zn,On.width,On.height,0,Qn,Sn,On.data);re.generateMipmaps=!1}else Br?(eo&&t.texStorage2D(3553,we,zn,gt.width,gt.height),t.texSubImage2D(3553,0,0,0,gt.width,gt.height,Qn,Sn,gt.data)):t.texImage2D(3553,0,zn,gt.width,gt.height,0,Qn,Sn,gt.data);else if(re.isCompressedTexture)if(re.isCompressedArrayTexture){Br&&eo&&t.texStorage3D(35866,we,zn,ir[0].width,ir[0].height,gt.depth);for(let ut=0,Nt=ir.length;ut<Nt;ut++)On=ir[ut],re.format!==as?null!==Qn?Br?t.compressedTexSubImage3D(35866,ut,0,0,0,On.width,On.height,gt.depth,Qn,On.data,0,0):t.compressedTexImage3D(35866,ut,zn,On.width,On.height,gt.depth,0,On.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Br?t.texSubImage3D(35866,ut,0,0,0,On.width,On.height,gt.depth,Qn,Sn,On.data):t.texImage3D(35866,ut,zn,On.width,On.height,gt.depth,0,Qn,Sn,On.data)}else{Br&&eo&&t.texStorage2D(3553,we,zn,ir[0].width,ir[0].height);for(let ut=0,Nt=ir.length;ut<Nt;ut++)On=ir[ut],re.format!==as?null!==Qn?Br?t.compressedTexSubImage2D(3553,ut,0,0,On.width,On.height,Qn,On.data):t.compressedTexImage2D(3553,ut,zn,On.width,On.height,0,On.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Br?t.texSubImage2D(3553,ut,0,0,On.width,On.height,Qn,Sn,On.data):t.texImage2D(3553,ut,zn,On.width,On.height,0,Qn,Sn,On.data)}else if(re.isDataArrayTexture)Br?(eo&&t.texStorage3D(35866,we,zn,gt.width,gt.height,gt.depth),t.texSubImage3D(35866,0,0,0,0,gt.width,gt.height,gt.depth,Qn,Sn,gt.data)):t.texImage3D(35866,0,zn,gt.width,gt.height,gt.depth,0,Qn,Sn,gt.data);else if(re.isData3DTexture)Br?(eo&&t.texStorage3D(32879,we,zn,gt.width,gt.height,gt.depth),t.texSubImage3D(32879,0,0,0,0,gt.width,gt.height,gt.depth,Qn,Sn,gt.data)):t.texImage3D(32879,0,zn,gt.width,gt.height,gt.depth,0,Qn,Sn,gt.data);else if(re.isFramebufferTexture){if(eo)if(Br)t.texStorage2D(3553,we,zn,gt.width,gt.height);else{let ut=gt.width,Nt=gt.height;for(let vn=0;vn<we;vn++)t.texImage2D(3553,vn,zn,ut,Nt,0,Qn,Sn,null),ut>>=1,Nt>>=1}}else if(ir.length>0&&Fn){Br&&eo&&t.texStorage2D(3553,we,zn,ir[0].width,ir[0].height);for(let ut=0,Nt=ir.length;ut<Nt;ut++)On=ir[ut],Br?t.texSubImage2D(3553,ut,0,0,Qn,Sn,On):t.texImage2D(3553,ut,zn,Qn,Sn,On);re.generateMipmaps=!1}else Br?(eo&&t.texStorage2D(3553,we,zn,gt.width,gt.height),t.texSubImage2D(3553,0,0,0,Qn,Sn,gt)):t.texImage2D(3553,0,zn,Qn,Sn,gt);de(re,Fn)&&_e(Ot),ri.__version=hn.version,re.onUpdate&&re.onUpdate(re)}pe.__version=re.version}function ln(pe,re,tt,Ot,Ht){const hn=h.convert(tt.format,tt.encoding),ri=h.convert(tt.type),fn=X(tt.internalFormat,hn,ri,tt.encoding);s.get(re).__hasExternalTextures||(32879===Ht||35866===Ht?t.texImage3D(Ht,0,fn,re.width,re.height,re.depth,0,hn,ri,null):t.texImage2D(Ht,0,fn,re.width,re.height,0,hn,ri,null)),t.bindFramebuffer(36160,pe),Hn(re)?E.framebufferTexture2DMultisampleEXT(36160,Ot,Ht,s.get(tt).__webglTexture,0,Un(re)):(3553===Ht||Ht>=34069&&Ht<=34074)&&v.framebufferTexture2D(36160,Ot,Ht,s.get(tt).__webglTexture,0),t.bindFramebuffer(36160,null)}function wi(pe,re,tt){if(v.bindRenderbuffer(36161,pe),re.depthBuffer&&!re.stencilBuffer){let Ot=33189;if(tt||Hn(re)){const Ht=re.depthTexture;Ht&&Ht.isDepthTexture&&(Ht.type===vi?Ot=36012:Ht.type===xi&&(Ot=33190));const hn=Un(re);Hn(re)?E.renderbufferStorageMultisampleEXT(36161,hn,Ot,re.width,re.height):v.renderbufferStorageMultisample(36161,hn,Ot,re.width,re.height)}else v.renderbufferStorage(36161,Ot,re.width,re.height);v.framebufferRenderbuffer(36160,36096,36161,pe)}else if(re.depthBuffer&&re.stencilBuffer){const Ot=Un(re);tt&&!1===Hn(re)?v.renderbufferStorageMultisample(36161,Ot,35056,re.width,re.height):Hn(re)?E.renderbufferStorageMultisampleEXT(36161,Ot,35056,re.width,re.height):v.renderbufferStorage(36161,34041,re.width,re.height),v.framebufferRenderbuffer(36160,33306,36161,pe)}else{const Ot=!0===re.isWebGLMultipleRenderTargets?re.texture:[re.texture];for(let Ht=0;Ht<Ot.length;Ht++){const hn=Ot[Ht],ri=h.convert(hn.format,hn.encoding),fn=h.convert(hn.type),gt=X(hn.internalFormat,ri,fn,hn.encoding),Fn=Un(re);tt&&!1===Hn(re)?v.renderbufferStorageMultisample(36161,Fn,gt,re.width,re.height):Hn(re)?E.renderbufferStorageMultisampleEXT(36161,Fn,gt,re.width,re.height):v.renderbufferStorage(36161,gt,re.width,re.height)}}v.bindRenderbuffer(36161,null)}function vt(pe){const re=s.get(pe),tt=!0===pe.isWebGLCubeRenderTarget;if(pe.depthTexture&&!re.__autoAllocateDepthBuffer){if(tt)throw new Error("target.depthTexture not supported in Cube render targets");!function Tt(pe,re){if(re&&re.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,pe),!re.depthTexture||!re.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!s.get(re.depthTexture).__webglTexture||re.depthTexture.image.width!==re.width||re.depthTexture.image.height!==re.height)&&(re.depthTexture.image.width=re.width,re.depthTexture.image.height=re.height,re.depthTexture.needsUpdate=!0),It(re.depthTexture,0);const Ot=s.get(re.depthTexture).__webglTexture,Ht=Un(re);if(re.depthTexture.format===ae)Hn(re)?E.framebufferTexture2DMultisampleEXT(36160,36096,3553,Ot,0,Ht):v.framebufferTexture2D(36160,36096,3553,Ot,0);else{if(re.depthTexture.format!==Ce)throw new Error("Unknown depthTexture format");Hn(re)?E.framebufferTexture2DMultisampleEXT(36160,33306,3553,Ot,0,Ht):v.framebufferTexture2D(36160,33306,3553,Ot,0)}}(re.__webglFramebuffer,pe)}else if(tt){re.__webglDepthbuffer=[];for(let Ot=0;Ot<6;Ot++)t.bindFramebuffer(36160,re.__webglFramebuffer[Ot]),re.__webglDepthbuffer[Ot]=v.createRenderbuffer(),wi(re.__webglDepthbuffer[Ot],pe,!1)}else t.bindFramebuffer(36160,re.__webglFramebuffer),re.__webglDepthbuffer=v.createRenderbuffer(),wi(re.__webglDepthbuffer,pe,!1);t.bindFramebuffer(36160,null)}function Un(pe){return Math.min(A,pe.samples)}function Hn(pe){const re=s.get(pe);return _&&pe.samples>0&&!0===e.has("WEBGL_multisampled_render_to_texture")&&!1!==re.__useRenderToTexture}function nr(pe,re){const tt=pe.encoding,Ot=pe.format,Ht=pe.type;return!0===pe.isCompressedTexture||!0===pe.isVideoTexture||pe.format===No||tt!==us&&(tt===Di?!1===_?!0===e.has("EXT_sRGB")&&Ot===as?(pe.format=No,pe.minFilter=nn,pe.generateMipmaps=!1):re=ya.sRGBToLinear(re):(Ot!==as||Ht!==ts)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",tt)),re}this.allocateTextureUnit=function yt(){const pe=wt;return pe>=b&&console.warn("THREE.WebGLTextures: Trying to use "+pe+" texture units while this GPU supports only "+b),wt+=1,pe},this.resetTextureUnits=function Ft(){wt=0},this.setTexture2D=It,this.setTexture2DArray=function rt(pe,re){const tt=s.get(pe);pe.version>0&&tt.__version!==pe.version?yn(tt,pe,re):t.bindTexture(35866,tt.__webglTexture,33984+re)},this.setTexture3D=function ot(pe,re){const tt=s.get(pe);pe.version>0&&tt.__version!==pe.version?yn(tt,pe,re):t.bindTexture(32879,tt.__webglTexture,33984+re)},this.setTextureCube=function $t(pe,re){const tt=s.get(pe);pe.version>0&&tt.__version!==pe.version?function Xn(pe,re,tt){if(6!==re.image.length)return;const Ot=qn(pe,re),Ht=re.source;t.bindTexture(34067,pe.__webglTexture,33984+tt);const hn=s.get(Ht);if(Ht.version!==hn.__version||!0===Ot){t.activeTexture(33984+tt),v.pixelStorei(37440,re.flipY),v.pixelStorei(37441,re.premultiplyAlpha),v.pixelStorei(3317,re.unpackAlignment),v.pixelStorei(37443,0);const ri=re.isCompressedTexture||re.image[0].isCompressedTexture,fn=re.image[0]&&re.image[0].isDataTexture,gt=[];for(let ut=0;ut<6;ut++)gt[ut]=ri||fn?fn?re.image[ut].image:re.image[ut]:$(re.image[ut],!1,!0,x),gt[ut]=nr(re,gt[ut]);const Fn=gt[0],Qn=Z(Fn)||_,Sn=h.convert(re.format,re.encoding),zn=h.convert(re.type),On=X(re.internalFormat,Sn,zn,re.encoding),ir=_&&!0!==re.isVideoTexture,Br=void 0===hn.__version||!0===Ot;let we,eo=fe(re,Fn,Qn);if(ft(34067,re,Qn),ri){ir&&Br&&t.texStorage2D(34067,eo,On,Fn.width,Fn.height);for(let ut=0;ut<6;ut++){we=gt[ut].mipmaps;for(let Nt=0;Nt<we.length;Nt++){const vn=we[Nt];re.format!==as?null!==Sn?ir?t.compressedTexSubImage2D(34069+ut,Nt,0,0,vn.width,vn.height,Sn,vn.data):t.compressedTexImage2D(34069+ut,Nt,On,vn.width,vn.height,0,vn.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):ir?t.texSubImage2D(34069+ut,Nt,0,0,vn.width,vn.height,Sn,zn,vn.data):t.texImage2D(34069+ut,Nt,On,vn.width,vn.height,0,Sn,zn,vn.data)}}}else{we=re.mipmaps,ir&&Br&&(we.length>0&&eo++,t.texStorage2D(34067,eo,On,gt[0].width,gt[0].height));for(let ut=0;ut<6;ut++)if(fn){ir?t.texSubImage2D(34069+ut,0,0,0,gt[ut].width,gt[ut].height,Sn,zn,gt[ut].data):t.texImage2D(34069+ut,0,On,gt[ut].width,gt[ut].height,0,Sn,zn,gt[ut].data);for(let Nt=0;Nt<we.length;Nt++){const Cn=we[Nt].image[ut].image;ir?t.texSubImage2D(34069+ut,Nt+1,0,0,Cn.width,Cn.height,Sn,zn,Cn.data):t.texImage2D(34069+ut,Nt+1,On,Cn.width,Cn.height,0,Sn,zn,Cn.data)}}else{ir?t.texSubImage2D(34069+ut,0,0,0,Sn,zn,gt[ut]):t.texImage2D(34069+ut,0,On,Sn,zn,gt[ut]);for(let Nt=0;Nt<we.length;Nt++){const vn=we[Nt];ir?t.texSubImage2D(34069+ut,Nt+1,0,0,Sn,zn,vn.image[ut]):t.texImage2D(34069+ut,Nt+1,On,Sn,zn,vn.image[ut])}}}de(re,Qn)&&_e(34067),hn.__version=Ht.version,re.onUpdate&&re.onUpdate(re)}pe.__version=re.version}(tt,pe,re):t.bindTexture(34067,tt.__webglTexture,33984+re)},this.rebindTextures=function qt(pe,re,tt){const Ot=s.get(pe);void 0!==re&&ln(Ot.__webglFramebuffer,pe,pe.texture,36064,3553),void 0!==tt&&vt(pe)},this.setupRenderTarget=function xn(pe){const re=pe.texture,tt=s.get(pe),Ot=s.get(re);pe.addEventListener("dispose",bt),!0!==pe.isWebGLMultipleRenderTargets&&(void 0===Ot.__webglTexture&&(Ot.__webglTexture=v.createTexture()),Ot.__version=re.version,g.memory.textures++);const Ht=!0===pe.isWebGLCubeRenderTarget,hn=!0===pe.isWebGLMultipleRenderTargets,ri=Z(pe)||_;if(Ht){tt.__webglFramebuffer=[];for(let fn=0;fn<6;fn++)tt.__webglFramebuffer[fn]=v.createFramebuffer()}else{if(tt.__webglFramebuffer=v.createFramebuffer(),hn)if(l.drawBuffers){const fn=pe.texture;for(let gt=0,Fn=fn.length;gt<Fn;gt++){const Qn=s.get(fn[gt]);void 0===Qn.__webglTexture&&(Qn.__webglTexture=v.createTexture(),g.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(_&&pe.samples>0&&!1===Hn(pe)){const fn=hn?re:[re];tt.__webglMultisampledFramebuffer=v.createFramebuffer(),tt.__webglColorRenderbuffer=[],t.bindFramebuffer(36160,tt.__webglMultisampledFramebuffer);for(let gt=0;gt<fn.length;gt++){const Fn=fn[gt];tt.__webglColorRenderbuffer[gt]=v.createRenderbuffer(),v.bindRenderbuffer(36161,tt.__webglColorRenderbuffer[gt]);const Qn=h.convert(Fn.format,Fn.encoding),Sn=h.convert(Fn.type),zn=X(Fn.internalFormat,Qn,Sn,Fn.encoding,!0===pe.isXRRenderTarget),On=Un(pe);v.renderbufferStorageMultisample(36161,On,zn,pe.width,pe.height),v.framebufferRenderbuffer(36160,36064+gt,36161,tt.__webglColorRenderbuffer[gt])}v.bindRenderbuffer(36161,null),pe.depthBuffer&&(tt.__webglDepthRenderbuffer=v.createRenderbuffer(),wi(tt.__webglDepthRenderbuffer,pe,!0)),t.bindFramebuffer(36160,null)}}if(Ht){t.bindTexture(34067,Ot.__webglTexture),ft(34067,re,ri);for(let fn=0;fn<6;fn++)ln(tt.__webglFramebuffer[fn],pe,re,36064,34069+fn);de(re,ri)&&_e(34067),t.unbindTexture()}else if(hn){const fn=pe.texture;for(let gt=0,Fn=fn.length;gt<Fn;gt++){const Qn=fn[gt],Sn=s.get(Qn);t.bindTexture(3553,Sn.__webglTexture),ft(3553,Qn,ri),ln(tt.__webglFramebuffer,pe,Qn,36064+gt,3553),de(Qn,ri)&&_e(3553)}t.unbindTexture()}else{let fn=3553;(pe.isWebGL3DRenderTarget||pe.isWebGLArrayRenderTarget)&&(_?fn=pe.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(fn,Ot.__webglTexture),ft(fn,re,ri),ln(tt.__webglFramebuffer,pe,re,36064,fn),de(re,ri)&&_e(fn),t.unbindTexture()}pe.depthBuffer&&vt(pe)},this.updateRenderTargetMipmap=function Xt(pe){const re=Z(pe)||_,tt=!0===pe.isWebGLMultipleRenderTargets?pe.texture:[pe.texture];for(let Ot=0,Ht=tt.length;Ot<Ht;Ot++){const hn=tt[Ot];if(de(hn,re)){const ri=pe.isWebGLCubeRenderTarget?34067:3553,fn=s.get(hn).__webglTexture;t.bindTexture(ri,fn),_e(ri),t.unbindTexture()}}},this.updateMultisampleRenderTarget=function oi(pe){if(_&&pe.samples>0&&!1===Hn(pe)){const re=pe.isWebGLMultipleRenderTargets?pe.texture:[pe.texture],tt=pe.width,Ot=pe.height;let Ht=16384;const hn=[],ri=pe.stencilBuffer?33306:36096,fn=s.get(pe),gt=!0===pe.isWebGLMultipleRenderTargets;if(gt)for(let Fn=0;Fn<re.length;Fn++)t.bindFramebuffer(36160,fn.__webglMultisampledFramebuffer),v.framebufferRenderbuffer(36160,36064+Fn,36161,null),t.bindFramebuffer(36160,fn.__webglFramebuffer),v.framebufferTexture2D(36009,36064+Fn,3553,null,0);t.bindFramebuffer(36008,fn.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,fn.__webglFramebuffer);for(let Fn=0;Fn<re.length;Fn++){hn.push(36064+Fn),pe.depthBuffer&&hn.push(ri);const Qn=void 0!==fn.__ignoreDepthValues&&fn.__ignoreDepthValues;if(!1===Qn&&(pe.depthBuffer&&(Ht|=256),pe.stencilBuffer&&(Ht|=1024)),gt&&v.framebufferRenderbuffer(36008,36064,36161,fn.__webglColorRenderbuffer[Fn]),!0===Qn&&(v.invalidateFramebuffer(36008,[ri]),v.invalidateFramebuffer(36009,[ri])),gt){const Sn=s.get(re[Fn]).__webglTexture;v.framebufferTexture2D(36009,36064,3553,Sn,0)}v.blitFramebuffer(0,0,tt,Ot,0,0,tt,Ot,Ht,9728),L&&v.invalidateFramebuffer(36008,hn)}if(t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,null),gt)for(let Fn=0;Fn<re.length;Fn++){t.bindFramebuffer(36160,fn.__webglMultisampledFramebuffer),v.framebufferRenderbuffer(36160,36064+Fn,36161,fn.__webglColorRenderbuffer[Fn]);const Qn=s.get(re[Fn]).__webglTexture;t.bindFramebuffer(36160,fn.__webglFramebuffer),v.framebufferTexture2D(36009,36064+Fn,3553,Qn,0)}t.bindFramebuffer(36009,fn.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=vt,this.setupFrameBufferTexture=ln,this.useMultisampledRTT=Hn}function T_(v,e,t){const s=t.isWebGL2;return{convert:function l(h,g=null){let _;if(h===ts)return 5121;if(h===Yo)return 32819;if(h===Jo)return 32820;if(h===Ia)return 5120;if(h===Bs)return 5122;if(h===Is)return 5123;if(h===os)return 5124;if(h===xi)return 5125;if(h===vi)return 5126;if(h===Hr)return s?5131:(_=e.get("OES_texture_half_float"),null!==_?_.HALF_FLOAT_OES:null);if(h===el)return 6406;if(h===as)return 6408;if(h===Pe)return 6409;if(h===ve)return 6410;if(h===ae)return 6402;if(h===Ce)return 34041;if(h===tl)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(h===No)return _=e.get("EXT_sRGB"),null!==_?_.SRGB_ALPHA_EXT:null;if(h===Ve)return 6403;if(h===en)return 36244;if(h===Vn)return 33319;if(h===Gi)return 33320;if(h===or)return 36249;if(h===ls||h===vr||h===fa||h===Pa)if(g===Di){if(_=e.get("WEBGL_compressed_texture_s3tc_srgb"),null===_)return null;if(h===ls)return _.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(h===vr)return _.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(h===fa)return _.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(h===Pa)return _.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(_=e.get("WEBGL_compressed_texture_s3tc"),null===_)return null;if(h===ls)return _.COMPRESSED_RGB_S3TC_DXT1_EXT;if(h===vr)return _.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(h===fa)return _.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(h===Pa)return _.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(h===nl||h===Zo||h===Ol||h===go){if(_=e.get("WEBGL_compressed_texture_pvrtc"),null===_)return null;if(h===nl)return _.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(h===Zo)return _.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(h===Ol)return _.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(h===go)return _.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(h===pa)return _=e.get("WEBGL_compressed_texture_etc1"),null!==_?_.COMPRESSED_RGB_ETC1_WEBGL:null;if(h===Ps||h===no){if(_=e.get("WEBGL_compressed_texture_etc"),null===_)return null;if(h===Ps)return g===Di?_.COMPRESSED_SRGB8_ETC2:_.COMPRESSED_RGB8_ETC2;if(h===no)return g===Di?_.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:_.COMPRESSED_RGBA8_ETC2_EAC}if(h===Ko||h===gi||h===cr||h===Ii||h===zr||h===jr||h===oc||h===Oa||h===js||h===ks||h===Yt||h===An||h===Pi||h===ns){if(_=e.get("WEBGL_compressed_texture_astc"),null===_)return null;if(h===Ko)return g===Di?_.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:_.COMPRESSED_RGBA_ASTC_4x4_KHR;if(h===gi)return g===Di?_.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:_.COMPRESSED_RGBA_ASTC_5x4_KHR;if(h===cr)return g===Di?_.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:_.COMPRESSED_RGBA_ASTC_5x5_KHR;if(h===Ii)return g===Di?_.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:_.COMPRESSED_RGBA_ASTC_6x5_KHR;if(h===zr)return g===Di?_.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:_.COMPRESSED_RGBA_ASTC_6x6_KHR;if(h===jr)return g===Di?_.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:_.COMPRESSED_RGBA_ASTC_8x5_KHR;if(h===oc)return g===Di?_.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:_.COMPRESSED_RGBA_ASTC_8x6_KHR;if(h===Oa)return g===Di?_.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:_.COMPRESSED_RGBA_ASTC_8x8_KHR;if(h===js)return g===Di?_.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:_.COMPRESSED_RGBA_ASTC_10x5_KHR;if(h===ks)return g===Di?_.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:_.COMPRESSED_RGBA_ASTC_10x6_KHR;if(h===Yt)return g===Di?_.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:_.COMPRESSED_RGBA_ASTC_10x8_KHR;if(h===An)return g===Di?_.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:_.COMPRESSED_RGBA_ASTC_10x10_KHR;if(h===Pi)return g===Di?_.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:_.COMPRESSED_RGBA_ASTC_12x10_KHR;if(h===ns)return g===Di?_.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:_.COMPRESSED_RGBA_ASTC_12x12_KHR}if(h===bs){if(_=e.get("EXT_texture_compression_bptc"),null===_)return null;if(h===bs)return g===Di?_.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:_.COMPRESSED_RGBA_BPTC_UNORM_EXT}return h===ys?s?34042:(_=e.get("WEBGL_depth_texture"),null!==_?_.UNSIGNED_INT_24_8_WEBGL:null):void 0!==v[h]?v[h]:null}}}class M_ extends hr{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class _u extends ws{constructor(){super(),this.isGroup=!0,this.type="Group"}}const vu={type:"move"};class Rm{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new _u,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new _u,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new le,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new le),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new _u,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new le,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new le),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const s of e.hand.values())this._getHandJoint(t,s)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,s){let l=null,h=null,g=null;const _=this._targetRay,b=this._grip,x=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(x&&e.hand){g=!0;for(const j of e.hand.values()){const k=t.getJointPose(j,s),Y=this._getHandJoint(x,j);null!==k&&(Y.matrix.fromArray(k.transform.matrix),Y.matrix.decompose(Y.position,Y.rotation,Y.scale),Y.jointRadius=k.radius),Y.visible=null!==k}const E=x.joints["index-finger-tip"].position.distanceTo(x.joints["thumb-tip"].position),L=.02,G=.005;x.inputState.pinching&&E>L+G?(x.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!x.inputState.pinching&&E<=L-G&&(x.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==b&&e.gripSpace&&(h=t.getPose(e.gripSpace,s),null!==h&&(b.matrix.fromArray(h.transform.matrix),b.matrix.decompose(b.position,b.rotation,b.scale),h.linearVelocity?(b.hasLinearVelocity=!0,b.linearVelocity.copy(h.linearVelocity)):b.hasLinearVelocity=!1,h.angularVelocity?(b.hasAngularVelocity=!0,b.angularVelocity.copy(h.angularVelocity)):b.hasAngularVelocity=!1));null!==_&&(l=t.getPose(e.targetRaySpace,s),null===l&&null!==h&&(l=h),null!==l&&(_.matrix.fromArray(l.transform.matrix),_.matrix.decompose(_.position,_.rotation,_.scale),l.linearVelocity?(_.hasLinearVelocity=!0,_.linearVelocity.copy(l.linearVelocity)):_.hasLinearVelocity=!1,l.angularVelocity?(_.hasAngularVelocity=!0,_.angularVelocity.copy(l.angularVelocity)):_.hasAngularVelocity=!1,this.dispatchEvent(vu)))}return null!==_&&(_.visible=null!==l),null!==b&&(b.visible=null!==h),null!==x&&(x.visible=null!==g),this}_getHandJoint(e,t){if(void 0===e.joints[t.jointName]){const s=new _u;s.matrixAutoUpdate=!1,s.visible=!1,e.joints[t.jointName]=s,e.add(s)}return e.joints[t.jointName]}}class Sm extends tr{constructor(e,t,s,l,h,g,_,b,x,S){if((S=void 0!==S?S:ae)!==ae&&S!==Ce)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===s&&S===ae&&(s=xi),void 0===s&&S===Ce&&(s=ys),super(null,l,h,g,_,b,S,s,x),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=void 0!==_?_:sr,this.minFilter=void 0!==b?b:sr,this.flipY=!1,this.generateMipmaps=!1}}class Cm extends Fo{constructor(e,t){super();const s=this;let l=null,h=1,g=null,_="local-floor",b=null,x=null,S=null,A=null,E=null,L=null;const G=t.getContextAttributes();let j=null,k=null;const Y=[],q=[],$=new Set,Z=new Map,se=new hr;se.layers.enable(1),se.viewport=new Jn;const de=new hr;de.layers.enable(2),de.viewport=new Jn;const _e=[se,de],X=new M_;X.layers.enable(1),X.layers.enable(2);let fe=null,Te=null;function Ye(rt){const ot=q.indexOf(rt.inputSource);if(-1===ot)return;const $t=Y[ot];void 0!==$t&&$t.dispatchEvent({type:rt.type,data:rt.inputSource})}function bt(){l.removeEventListener("select",Ye),l.removeEventListener("selectstart",Ye),l.removeEventListener("selectend",Ye),l.removeEventListener("squeeze",Ye),l.removeEventListener("squeezestart",Ye),l.removeEventListener("squeezeend",Ye),l.removeEventListener("end",bt),l.removeEventListener("inputsourceschange",He);for(let rt=0;rt<Y.length;rt++){const ot=q[rt];null!==ot&&(q[rt]=null,Y[rt].disconnect(ot))}fe=null,Te=null,e.setRenderTarget(j),E=null,A=null,S=null,l=null,k=null,It.stop(),s.isPresenting=!1,s.dispatchEvent({type:"sessionend"})}function He(rt){for(let ot=0;ot<rt.removed.length;ot++){const $t=rt.removed[ot],zt=q.indexOf($t);zt>=0&&(q[zt]=null,Y[zt].disconnect($t))}for(let ot=0;ot<rt.added.length;ot++){const $t=rt.added[ot];let zt=q.indexOf($t);if(-1===zt){for(let ft=0;ft<Y.length;ft++){if(ft>=q.length){q.push($t),zt=ft;break}if(null===q[ft]){q[ft]=$t,zt=ft;break}}if(-1===zt)break}const an=Y[zt];an&&an.connect($t)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(rt){let ot=Y[rt];return void 0===ot&&(ot=new Rm,Y[rt]=ot),ot.getTargetRaySpace()},this.getControllerGrip=function(rt){let ot=Y[rt];return void 0===ot&&(ot=new Rm,Y[rt]=ot),ot.getGripSpace()},this.getHand=function(rt){let ot=Y[rt];return void 0===ot&&(ot=new Rm,Y[rt]=ot),ot.getHandSpace()},this.setFramebufferScaleFactor=function(rt){h=rt,!0===s.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(rt){_=rt,!0===s.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return b||g},this.setReferenceSpace=function(rt){b=rt},this.getBaseLayer=function(){return null!==A?A:E},this.getBinding=function(){return S},this.getFrame=function(){return L},this.getSession=function(){return l},this.setSession=function(){var rt=(0,a.Z)(function*(ot){if(l=ot,null!==l){if(j=e.getRenderTarget(),l.addEventListener("select",Ye),l.addEventListener("selectstart",Ye),l.addEventListener("selectend",Ye),l.addEventListener("squeeze",Ye),l.addEventListener("squeezestart",Ye),l.addEventListener("squeezeend",Ye),l.addEventListener("end",bt),l.addEventListener("inputsourceschange",He),!0!==G.xrCompatible&&(yield t.makeXRCompatible()),void 0===l.renderState.layers||!1===e.capabilities.isWebGL2)E=new XRWebGLLayer(l,t,{antialias:void 0!==l.renderState.layers||G.antialias,alpha:G.alpha,depth:G.depth,stencil:G.stencil,framebufferScaleFactor:h}),l.updateRenderState({baseLayer:E}),k=new ta(E.framebufferWidth,E.framebufferHeight,{format:as,type:ts,encoding:e.outputEncoding,stencilBuffer:G.stencil});else{let $t=null,zt=null,an=null;G.depth&&(an=G.stencil?35056:33190,$t=G.stencil?Ce:ae,zt=G.stencil?ys:xi);const ft={colorFormat:32856,depthFormat:an,scaleFactor:h};S=new XRWebGLBinding(l,t),A=S.createProjectionLayer(ft),l.updateRenderState({layers:[A]}),k=new ta(A.textureWidth,A.textureHeight,{format:as,type:ts,depthTexture:new Sm(A.textureWidth,A.textureHeight,zt,void 0,void 0,void 0,void 0,void 0,void 0,$t),stencilBuffer:G.stencil,encoding:e.outputEncoding,samples:G.antialias?4:0}),e.properties.get(k).__ignoreDepthValues=A.ignoreDepthValues}k.isXRRenderTarget=!0,this.setFoveation(1),b=null,g=yield l.requestReferenceSpace(_),It.setContext(l),It.start(),s.isPresenting=!0,s.dispatchEvent({type:"sessionstart"})}});return function(ot){return rt.apply(this,arguments)}}();const Ee=new le,at=new le;function Ft(rt,ot){null===ot?rt.matrixWorld.copy(rt.matrix):rt.matrixWorld.multiplyMatrices(ot.matrixWorld,rt.matrix),rt.matrixWorldInverse.copy(rt.matrixWorld).invert()}this.updateCamera=function(rt){if(null===l)return;X.near=de.near=se.near=rt.near,X.far=de.far=se.far=rt.far,(fe!==X.near||Te!==X.far)&&(l.updateRenderState({depthNear:X.near,depthFar:X.far}),fe=X.near,Te=X.far);const ot=rt.parent,$t=X.cameras;Ft(X,ot);for(let an=0;an<$t.length;an++)Ft($t[an],ot);X.matrixWorld.decompose(X.position,X.quaternion,X.scale),rt.matrix.copy(X.matrix),rt.matrix.decompose(rt.position,rt.quaternion,rt.scale);const zt=rt.children;for(let an=0,ft=zt.length;an<ft;an++)zt[an].updateMatrixWorld(!0);2===$t.length?function wt(rt,ot,$t){Ee.setFromMatrixPosition(ot.matrixWorld),at.setFromMatrixPosition($t.matrixWorld);const zt=Ee.distanceTo(at),an=ot.projectionMatrix.elements,ft=$t.projectionMatrix.elements,qn=an[14]/(an[10]-1),yn=an[14]/(an[10]+1),Xn=(an[9]+1)/an[5],ln=(an[9]-1)/an[5],wi=(an[8]-1)/an[0],Tt=(ft[8]+1)/ft[0],vt=qn*wi,qt=qn*Tt,xn=zt/(-wi+Tt),Xt=xn*-wi;ot.matrixWorld.decompose(rt.position,rt.quaternion,rt.scale),rt.translateX(Xt),rt.translateZ(xn),rt.matrixWorld.compose(rt.position,rt.quaternion,rt.scale),rt.matrixWorldInverse.copy(rt.matrixWorld).invert();const oi=qn+xn,Un=yn+xn;rt.projectionMatrix.makePerspective(vt-Xt,qt+(zt-Xt),Xn*yn/Un*oi,ln*yn/Un*oi,oi,Un)}(X,se,de):X.projectionMatrix.copy(se.projectionMatrix)},this.getCamera=function(){return X},this.getFoveation=function(){return null!==A?A.fixedFoveation:null!==E?E.fixedFoveation:void 0},this.setFoveation=function(rt){null!==A&&(A.fixedFoveation=rt),null!==E&&void 0!==E.fixedFoveation&&(E.fixedFoveation=rt)},this.getPlanes=function(){return $};let yt=null;const It=new su;It.setAnimationLoop(function Bt(rt,ot){if(x=ot.getViewerPose(b||g),L=ot,null!==x){const $t=x.views;null!==E&&(e.setRenderTargetFramebuffer(k,E.framebuffer),e.setRenderTarget(k));let zt=!1;$t.length!==X.cameras.length&&(X.cameras.length=0,zt=!0);for(let an=0;an<$t.length;an++){const ft=$t[an];let qn=null;if(null!==E)qn=E.getViewport(ft);else{const Xn=S.getViewSubImage(A,ft);qn=Xn.viewport,0===an&&(e.setRenderTargetTextures(k,Xn.colorTexture,A.ignoreDepthValues?void 0:Xn.depthStencilTexture),e.setRenderTarget(k))}let yn=_e[an];void 0===yn&&(yn=new hr,yn.layers.enable(an),yn.viewport=new Jn,_e[an]=yn),yn.matrix.fromArray(ft.transform.matrix),yn.projectionMatrix.fromArray(ft.projectionMatrix),yn.viewport.set(qn.x,qn.y,qn.width,qn.height),0===an&&X.matrix.copy(yn.matrix),!0===zt&&X.cameras.push(yn)}}for(let $t=0;$t<Y.length;$t++){const zt=q[$t],an=Y[$t];null!==zt&&void 0!==an&&an.update(zt,ot,b||g)}if(yt&&yt(rt,ot),ot.detectedPlanes){s.dispatchEvent({type:"planesdetected",data:ot.detectedPlanes});let $t=null;for(const zt of $)ot.detectedPlanes.has(zt)||(null===$t&&($t=[]),$t.push(zt));if(null!==$t)for(const zt of $t)$.delete(zt),Z.delete(zt),s.dispatchEvent({type:"planeremoved",data:zt});for(const zt of ot.detectedPlanes)if($.has(zt)){const an=Z.get(zt);zt.lastChangedTime>an&&(Z.set(zt,zt.lastChangedTime),s.dispatchEvent({type:"planechanged",data:zt}))}else $.add(zt),Z.set(zt,ot.lastChangedTime),s.dispatchEvent({type:"planeadded",data:zt})}L=null}),this.setAnimationLoop=function(rt){yt=rt},this.dispose=function(){}}}function Iv(v,e){function l(j,k){j.opacity.value=k.opacity,k.color&&j.diffuse.value.copy(k.color),k.emissive&&j.emissive.value.copy(k.emissive).multiplyScalar(k.emissiveIntensity),k.map&&(j.map.value=k.map),k.alphaMap&&(j.alphaMap.value=k.alphaMap),k.bumpMap&&(j.bumpMap.value=k.bumpMap,j.bumpScale.value=k.bumpScale,k.side===ze&&(j.bumpScale.value*=-1)),k.displacementMap&&(j.displacementMap.value=k.displacementMap,j.displacementScale.value=k.displacementScale,j.displacementBias.value=k.displacementBias),k.emissiveMap&&(j.emissiveMap.value=k.emissiveMap),k.normalMap&&(j.normalMap.value=k.normalMap,j.normalScale.value.copy(k.normalScale),k.side===ze&&j.normalScale.value.negate()),k.specularMap&&(j.specularMap.value=k.specularMap),k.alphaTest>0&&(j.alphaTest.value=k.alphaTest);const Y=e.get(k).envMap;if(Y&&(j.envMap.value=Y,j.flipEnvMap.value=Y.isCubeTexture&&!1===Y.isRenderTargetTexture?-1:1,j.reflectivity.value=k.reflectivity,j.ior.value=k.ior,j.refractionRatio.value=k.refractionRatio),k.lightMap){j.lightMap.value=k.lightMap;const Z=!0!==v.physicallyCorrectLights?Math.PI:1;j.lightMapIntensity.value=k.lightMapIntensity*Z}let q,$;k.aoMap&&(j.aoMap.value=k.aoMap,j.aoMapIntensity.value=k.aoMapIntensity),k.map?q=k.map:k.specularMap?q=k.specularMap:k.displacementMap?q=k.displacementMap:k.normalMap?q=k.normalMap:k.bumpMap?q=k.bumpMap:k.roughnessMap?q=k.roughnessMap:k.metalnessMap?q=k.metalnessMap:k.alphaMap?q=k.alphaMap:k.emissiveMap?q=k.emissiveMap:k.clearcoatMap?q=k.clearcoatMap:k.clearcoatNormalMap?q=k.clearcoatNormalMap:k.clearcoatRoughnessMap?q=k.clearcoatRoughnessMap:k.iridescenceMap?q=k.iridescenceMap:k.iridescenceThicknessMap?q=k.iridescenceThicknessMap:k.specularIntensityMap?q=k.specularIntensityMap:k.specularColorMap?q=k.specularColorMap:k.transmissionMap?q=k.transmissionMap:k.thicknessMap?q=k.thicknessMap:k.sheenColorMap?q=k.sheenColorMap:k.sheenRoughnessMap&&(q=k.sheenRoughnessMap),void 0!==q&&(q.isWebGLRenderTarget&&(q=q.texture),!0===q.matrixAutoUpdate&&q.updateMatrix(),j.uvTransform.value.copy(q.matrix)),k.aoMap?$=k.aoMap:k.lightMap&&($=k.lightMap),void 0!==$&&($.isWebGLRenderTarget&&($=$.texture),!0===$.matrixAutoUpdate&&$.updateMatrix(),j.uv2Transform.value.copy($.matrix))}return{refreshFogUniforms:function t(j,k){k.color.getRGB(j.fogColor.value,be(v)),k.isFog?(j.fogNear.value=k.near,j.fogFar.value=k.far):k.isFogExp2&&(j.fogDensity.value=k.density)},refreshMaterialUniforms:function s(j,k,Y,q,$){k.isMeshBasicMaterial||k.isMeshLambertMaterial?l(j,k):k.isMeshToonMaterial?(l(j,k),function S(j,k){k.gradientMap&&(j.gradientMap.value=k.gradientMap)}(j,k)):k.isMeshPhongMaterial?(l(j,k),function x(j,k){j.specular.value.copy(k.specular),j.shininess.value=Math.max(k.shininess,1e-4)}(j,k)):k.isMeshStandardMaterial?(l(j,k),function A(j,k){j.roughness.value=k.roughness,j.metalness.value=k.metalness,k.roughnessMap&&(j.roughnessMap.value=k.roughnessMap),k.metalnessMap&&(j.metalnessMap.value=k.metalnessMap),e.get(k).envMap&&(j.envMapIntensity.value=k.envMapIntensity)}(j,k),k.isMeshPhysicalMaterial&&function E(j,k,Y){j.ior.value=k.ior,k.sheen>0&&(j.sheenColor.value.copy(k.sheenColor).multiplyScalar(k.sheen),j.sheenRoughness.value=k.sheenRoughness,k.sheenColorMap&&(j.sheenColorMap.value=k.sheenColorMap),k.sheenRoughnessMap&&(j.sheenRoughnessMap.value=k.sheenRoughnessMap)),k.clearcoat>0&&(j.clearcoat.value=k.clearcoat,j.clearcoatRoughness.value=k.clearcoatRoughness,k.clearcoatMap&&(j.clearcoatMap.value=k.clearcoatMap),k.clearcoatRoughnessMap&&(j.clearcoatRoughnessMap.value=k.clearcoatRoughnessMap),k.clearcoatNormalMap&&(j.clearcoatNormalScale.value.copy(k.clearcoatNormalScale),j.clearcoatNormalMap.value=k.clearcoatNormalMap,k.side===ze&&j.clearcoatNormalScale.value.negate())),k.iridescence>0&&(j.iridescence.value=k.iridescence,j.iridescenceIOR.value=k.iridescenceIOR,j.iridescenceThicknessMinimum.value=k.iridescenceThicknessRange[0],j.iridescenceThicknessMaximum.value=k.iridescenceThicknessRange[1],k.iridescenceMap&&(j.iridescenceMap.value=k.iridescenceMap),k.iridescenceThicknessMap&&(j.iridescenceThicknessMap.value=k.iridescenceThicknessMap)),k.transmission>0&&(j.transmission.value=k.transmission,j.transmissionSamplerMap.value=Y.texture,j.transmissionSamplerSize.value.set(Y.width,Y.height),k.transmissionMap&&(j.transmissionMap.value=k.transmissionMap),j.thickness.value=k.thickness,k.thicknessMap&&(j.thicknessMap.value=k.thicknessMap),j.attenuationDistance.value=k.attenuationDistance,j.attenuationColor.value.copy(k.attenuationColor)),j.specularIntensity.value=k.specularIntensity,j.specularColor.value.copy(k.specularColor),k.specularIntensityMap&&(j.specularIntensityMap.value=k.specularIntensityMap),k.specularColorMap&&(j.specularColorMap.value=k.specularColorMap)}(j,k,$)):k.isMeshMatcapMaterial?(l(j,k),function L(j,k){k.matcap&&(j.matcap.value=k.matcap)}(j,k)):k.isMeshDepthMaterial?l(j,k):k.isMeshDistanceMaterial?(l(j,k),function G(j,k){j.referencePosition.value.copy(k.referencePosition),j.nearDistance.value=k.nearDistance,j.farDistance.value=k.farDistance}(j,k)):k.isMeshNormalMaterial?l(j,k):k.isLineBasicMaterial?(function h(j,k){j.diffuse.value.copy(k.color),j.opacity.value=k.opacity}(j,k),k.isLineDashedMaterial&&function g(j,k){j.dashSize.value=k.dashSize,j.totalSize.value=k.dashSize+k.gapSize,j.scale.value=k.scale}(j,k)):k.isPointsMaterial?function _(j,k,Y,q){let $;j.diffuse.value.copy(k.color),j.opacity.value=k.opacity,j.size.value=k.size*Y,j.scale.value=.5*q,k.map&&(j.map.value=k.map),k.alphaMap&&(j.alphaMap.value=k.alphaMap),k.alphaTest>0&&(j.alphaTest.value=k.alphaTest),k.map?$=k.map:k.alphaMap&&($=k.alphaMap),void 0!==$&&(!0===$.matrixAutoUpdate&&$.updateMatrix(),j.uvTransform.value.copy($.matrix))}(j,k,Y,q):k.isSpriteMaterial?function b(j,k){let Y;j.diffuse.value.copy(k.color),j.opacity.value=k.opacity,j.rotation.value=k.rotation,k.map&&(j.map.value=k.map),k.alphaMap&&(j.alphaMap.value=k.alphaMap),k.alphaTest>0&&(j.alphaTest.value=k.alphaTest),k.map?Y=k.map:k.alphaMap&&(Y=k.alphaMap),void 0!==Y&&(!0===Y.matrixAutoUpdate&&Y.updateMatrix(),j.uvTransform.value.copy(Y.matrix))}(j,k):k.isShadowMaterial?(j.color.value.copy(k.color),j.opacity.value=k.opacity):k.isShaderMaterial&&(k.uniformsNeedUpdate=!1)}}}function Ey(v,e,t,s){let l={},h={},g=[];const _=t.isWebGL2?v.getParameter(35375):0;function L(q,$,Z){const se=q.value;if(void 0===Z[$]){if("number"==typeof se)Z[$]=se;else{const de=Array.isArray(se)?se:[se],_e=[];for(let X=0;X<de.length;X++)_e.push(de[X].clone());Z[$]=_e}return!0}if("number"==typeof se){if(Z[$]!==se)return Z[$]=se,!0}else{const de=Array.isArray(Z[$])?Z[$]:[Z[$]],_e=Array.isArray(se)?se:[se];for(let X=0;X<de.length;X++){const fe=de[X];if(!1===fe.equals(_e[X]))return fe.copy(_e[X]),!0}}return!1}function j(q){const $={boundary:0,storage:0};return"number"==typeof q?($.boundary=4,$.storage=4):q.isVector2?($.boundary=8,$.storage=8):q.isVector3||q.isColor?($.boundary=16,$.storage=12):q.isVector4?($.boundary=16,$.storage=16):q.isMatrix3?($.boundary=48,$.storage=48):q.isMatrix4?($.boundary=64,$.storage=64):q.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",q),$}function k(q){const $=q.target;$.removeEventListener("dispose",k);const Z=g.indexOf($.__bindingPointIndex);g.splice(Z,1),v.deleteBuffer(l[$.id]),delete l[$.id],delete h[$.id]}return{bind:function b(q,$){s.uniformBlockBinding(q,$.program)},update:function x(q,$){let Z=l[q.id];void 0===Z&&(function G(q){const $=q.uniforms;let Z=0;let de=0;for(let _e=0,X=$.length;_e<X;_e++){const fe=$[_e],Te={boundary:0,storage:0},Ye=Array.isArray(fe.value)?fe.value:[fe.value];for(let bt=0,He=Ye.length;bt<He;bt++){const at=j(Ye[bt]);Te.boundary+=at.boundary,Te.storage+=at.storage}fe.__data=new Float32Array(Te.storage/Float32Array.BYTES_PER_ELEMENT),fe.__offset=Z,_e>0&&(de=Z%16,0!==de&&16-de-Te.boundary<0&&(Z+=16-de,fe.__offset=Z)),Z+=Te.storage}de=Z%16,de>0&&(Z+=16-de),q.__size=Z,q.__cache={}}(q),Z=function S(q){const $=function A(){for(let q=0;q<_;q++)if(-1===g.indexOf(q))return g.push(q),q;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();q.__bindingPointIndex=$;const Z=v.createBuffer(),se=q.__size,de=q.usage;return v.bindBuffer(35345,Z),v.bufferData(35345,se,de),v.bindBuffer(35345,null),v.bindBufferBase(35345,$,Z),Z}(q),l[q.id]=Z,q.addEventListener("dispose",k)),s.updateUBOMapping(q,$.program);const de=e.render.frame;h[q.id]!==de&&(function E(q){const Z=q.uniforms,se=q.__cache;v.bindBuffer(35345,l[q.id]);for(let de=0,_e=Z.length;de<_e;de++){const X=Z[de];if(!0===L(X,de,se)){const fe=X.__offset,Te=Array.isArray(X.value)?X.value:[X.value];let Ye=0;for(let bt=0;bt<Te.length;bt++){const He=Te[bt],Ee=j(He);"number"==typeof He?(X.__data[0]=He,v.bufferSubData(35345,fe+Ye,X.__data)):He.isMatrix3?(X.__data[0]=He.elements[0],X.__data[1]=He.elements[1],X.__data[2]=He.elements[2],X.__data[3]=He.elements[0],X.__data[4]=He.elements[3],X.__data[5]=He.elements[4],X.__data[6]=He.elements[5],X.__data[7]=He.elements[0],X.__data[8]=He.elements[6],X.__data[9]=He.elements[7],X.__data[10]=He.elements[8],X.__data[11]=He.elements[0]):(He.toArray(X.__data,Ye),Ye+=Ee.storage/Float32Array.BYTES_PER_ELEMENT)}v.bufferSubData(35345,fe,X.__data)}}v.bindBuffer(35345,null)}(q),h[q.id]=de)},dispose:function Y(){for(const q in l)v.deleteBuffer(l[q]);g=[],l={},h={}}}}function Pv(v={}){this.isWebGLRenderer=!0;const e=void 0!==v.canvas?v.canvas:function Ay(){const v=hl("canvas");return v.style.display="block",v}(),t=void 0!==v.context?v.context:null,s=void 0===v.depth||v.depth,l=void 0===v.stencil||v.stencil,h=void 0!==v.antialias&&v.antialias,g=void 0===v.premultipliedAlpha||v.premultipliedAlpha,_=void 0!==v.preserveDrawingBuffer&&v.preserveDrawingBuffer,b=void 0!==v.powerPreference?v.powerPreference:"default",x=void 0!==v.failIfMajorPerformanceCaveat&&v.failIfMajorPerformanceCaveat;let S;S=null!==t?t.getContextAttributes().alpha:void 0!==v.alpha&&v.alpha;let A=null,E=null;const L=[],G=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=us,this.physicallyCorrectLights=!1,this.toneMapping=Qi,this.toneMappingExposure=1;const j=this;let k=!1,Y=0,q=0,$=null,Z=-1,se=null;const de=new Jn,_e=new Jn;let X=null,fe=e.width,Te=e.height,Ye=1,bt=null,He=null;const Ee=new Jn(0,0,fe,Te),at=new Jn(0,0,fe,Te);let wt=!1;const Ft=new Wd;let yt=!1,Bt=!1,It=null;const rt=new Gt,ot=new ht,$t=new le,zt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function an(){return null===$?Ye:1}let yn,Xn,ln,wi,Tt,vt,qt,xn,Xt,oi,Un,Hn,Mr,nr,pe,re,tt,Ot,Ht,hn,ri,fn,gt,Fn,ft=t;function qn(ce,Ue){for(let ct=0;ct<ce.length;ct++){const pt=e.getContext(ce[ct],Ue);if(null!==pt)return pt}return null}try{const ce={alpha:!0,depth:s,stencil:l,antialias:h,premultipliedAlpha:g,preserveDrawingBuffer:_,powerPreference:b,failIfMajorPerformanceCaveat:x};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${K}`),e.addEventListener("webglcontextlost",zn,!1),e.addEventListener("webglcontextrestored",On,!1),e.addEventListener("webglcontextcreationerror",ir,!1),null===ft){const Ue=["webgl2","webgl","experimental-webgl"];if(!0===j.isWebGL1Renderer&&Ue.shift(),ft=qn(Ue,ce),null===ft)throw qn(Ue)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===ft.getShaderPrecisionFormat&&(ft.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(ce){throw console.error("THREE.WebGLRenderer: "+ce.message),ce}function Qn(){yn=new t_(ft),Xn=new Sf(ft,yn,v),yn.init(Xn),fn=new T_(ft,yn,Xn),ln=new Th(ft,yn,Xn),wi=new n_,Tt=new Jf,vt=new Sc(ft,yn,ln,Tt,Xn,fn,wi),qt=new Qg(j),xn=new ah(j),Xt=new qu(ft,Xn),gt=new rm(ft,yn,Xt,Xn),oi=new om(ft,Xt,wi,gt),Un=new am(ft,oi,Xt,wi),Ht=new fr(ft,Xn,vt),re=new Cf(Tt),Hn=new Yf(j,qt,xn,yn,Xn,gt,re),Mr=new Iv(j,Tt),nr=new b_,pe=new wm(yn,Xn),Ot=new Xg(j,qt,xn,ln,Un,S,g),tt=new Kf(j,Un,Xn),Fn=new Ey(ft,wi,Xn,ln),hn=new yv(ft,yn,wi,Xn),ri=new lh(ft,yn,wi,Xn),wi.programs=Hn.programs,j.capabilities=Xn,j.extensions=yn,j.properties=Tt,j.renderLists=nr,j.shadowMap=tt,j.state=ln,j.info=wi}Qn();const Sn=new Cm(j,ft);function zn(ce){ce.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),k=!0}function On(){console.log("THREE.WebGLRenderer: Context Restored."),k=!1;const ce=wi.autoReset,Ue=tt.enabled,ct=tt.autoUpdate,Be=tt.needsUpdate,pt=tt.type;Qn(),wi.autoReset=ce,tt.enabled=Ue,tt.autoUpdate=ct,tt.needsUpdate=Be,tt.type=pt}function ir(ce){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",ce.statusMessage)}function Br(ce){const Ue=ce.target;Ue.removeEventListener("dispose",Br),function eo(ce){(function we(ce){const Ue=Tt.get(ce).programs;void 0!==Ue&&(Ue.forEach(function(ct){Hn.releaseProgram(ct)}),ce.isShaderMaterial&&Hn.releaseShaderCache(ce))})(ce),Tt.remove(ce)}(Ue)}this.xr=Sn,this.getContext=function(){return ft},this.getContextAttributes=function(){return ft.getContextAttributes()},this.forceContextLoss=function(){const ce=yn.get("WEBGL_lose_context");ce&&ce.loseContext()},this.forceContextRestore=function(){const ce=yn.get("WEBGL_lose_context");ce&&ce.restoreContext()},this.getPixelRatio=function(){return Ye},this.setPixelRatio=function(ce){void 0!==ce&&(Ye=ce,this.setSize(fe,Te,!1))},this.getSize=function(ce){return ce.set(fe,Te)},this.setSize=function(ce,Ue,ct){Sn.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(fe=ce,Te=Ue,e.width=Math.floor(ce*Ye),e.height=Math.floor(Ue*Ye),!1!==ct&&(e.style.width=ce+"px",e.style.height=Ue+"px"),this.setViewport(0,0,ce,Ue))},this.getDrawingBufferSize=function(ce){return ce.set(fe*Ye,Te*Ye).floor()},this.setDrawingBufferSize=function(ce,Ue,ct){fe=ce,Te=Ue,Ye=ct,e.width=Math.floor(ce*ct),e.height=Math.floor(Ue*ct),this.setViewport(0,0,ce,Ue)},this.getCurrentViewport=function(ce){return ce.copy(de)},this.getViewport=function(ce){return ce.copy(Ee)},this.setViewport=function(ce,Ue,ct,Be){ce.isVector4?Ee.set(ce.x,ce.y,ce.z,ce.w):Ee.set(ce,Ue,ct,Be),ln.viewport(de.copy(Ee).multiplyScalar(Ye).floor())},this.getScissor=function(ce){return ce.copy(at)},this.setScissor=function(ce,Ue,ct,Be){ce.isVector4?at.set(ce.x,ce.y,ce.z,ce.w):at.set(ce,Ue,ct,Be),ln.scissor(_e.copy(at).multiplyScalar(Ye).floor())},this.getScissorTest=function(){return wt},this.setScissorTest=function(ce){ln.setScissorTest(wt=ce)},this.setOpaqueSort=function(ce){bt=ce},this.setTransparentSort=function(ce){He=ce},this.getClearColor=function(ce){return ce.copy(Ot.getClearColor())},this.setClearColor=function(){Ot.setClearColor.apply(Ot,arguments)},this.getClearAlpha=function(){return Ot.getClearAlpha()},this.setClearAlpha=function(){Ot.setClearAlpha.apply(Ot,arguments)},this.clear=function(ce=!0,Ue=!0,ct=!0){let Be=0;ce&&(Be|=16384),Ue&&(Be|=256),ct&&(Be|=1024),ft.clear(Be)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",zn,!1),e.removeEventListener("webglcontextrestored",On,!1),e.removeEventListener("webglcontextcreationerror",ir,!1),nr.dispose(),pe.dispose(),Tt.dispose(),qt.dispose(),xn.dispose(),Un.dispose(),gt.dispose(),Fn.dispose(),Hn.dispose(),Sn.dispose(),Sn.removeEventListener("sessionstart",vn),Sn.removeEventListener("sessionend",Cn),It&&(It.dispose(),It=null),rr.stop()},this.renderBufferDirect=function(ce,Ue,ct,Be,pt,Bn){null===Ue&&(Ue=zt);const fi=pt.isMesh&&pt.matrixWorld.determinant()<0,Mi=function y0(ce,Ue,ct,Be,pt){!0!==Ue.isScene&&(Ue=zt),vt.resetTextureUnits();const Bn=Ue.fog,Mi=null===$?j.outputEncoding:!0===$.isXRRenderTarget?$.texture.encoding:us,Ai=(Be.isMeshStandardMaterial?xn:qt).get(Be.envMap||(Be.isMeshStandardMaterial?Ue.environment:null)),Xi=!0===Be.vertexColors&&!!ct.attributes.color&&4===ct.attributes.color.itemSize,Hi=!!Be.normalMap&&!!ct.attributes.tangent,zi=!!ct.morphAttributes.position,Ur=!!ct.morphAttributes.normal,Sa=!!ct.morphAttributes.color,Pl=Be.toneMapped?j.toneMapping:Qi,Io=ct.morphAttributes.position||ct.morphAttributes.normal||ct.morphAttributes.color,Cs=void 0!==Io?Io.length:0,Fi=Tt.get(Be),Pd=E.state.lights;!0!==yt||!0!==Bt&&ce===se||re.setState(Be,ce,ce===se&&Be.id===Z);let to=!1;Be.version===Fi.__version?(Fi.needsLights&&Fi.lightsStateVersion!==Pd.state.version||Fi.outputEncoding!==Mi||pt.isInstancedMesh&&!1===Fi.instancing||!pt.isInstancedMesh&&!0===Fi.instancing||pt.isSkinnedMesh&&!1===Fi.skinning||!pt.isSkinnedMesh&&!0===Fi.skinning||Fi.envMap!==Ai||!0===Be.fog&&Fi.fog!==Bn||void 0!==Fi.numClippingPlanes&&(Fi.numClippingPlanes!==re.numPlanes||Fi.numIntersection!==re.numIntersection)||Fi.vertexAlphas!==Xi||Fi.vertexTangents!==Hi||Fi.morphTargets!==zi||Fi.morphNormals!==Ur||Fi.morphColors!==Sa||Fi.toneMapping!==Pl||!0===Xn.isWebGL2&&Fi.morphTargetsCount!==Cs)&&(to=!0):(to=!0,Fi.__version=Be.version);let Od=Fi.currentProgram;!0===to&&(Od=Qa(Be,Ue,pt));let my=!1,Gu=!1,rf=!1;const $o=Od.getUniforms(),Nd=Fi.uniforms;if(ln.useProgram(Od.program)&&(my=!0,Gu=!0,rf=!0),Be.id!==Z&&(Z=Be.id,Gu=!0),my||se!==ce){if($o.setValue(ft,"projectionMatrix",ce.projectionMatrix),Xn.logarithmicDepthBuffer&&$o.setValue(ft,"logDepthBufFC",2/(Math.log(ce.far+1)/Math.LN2)),se!==ce&&(se=ce,Gu=!0,rf=!0),Be.isShaderMaterial||Be.isMeshPhongMaterial||Be.isMeshToonMaterial||Be.isMeshStandardMaterial||Be.envMap){const da=$o.map.cameraPosition;void 0!==da&&da.setValue(ft,$t.setFromMatrixPosition(ce.matrixWorld))}(Be.isMeshPhongMaterial||Be.isMeshToonMaterial||Be.isMeshLambertMaterial||Be.isMeshBasicMaterial||Be.isMeshStandardMaterial||Be.isShaderMaterial)&&$o.setValue(ft,"isOrthographic",!0===ce.isOrthographicCamera),(Be.isMeshPhongMaterial||Be.isMeshToonMaterial||Be.isMeshLambertMaterial||Be.isMeshBasicMaterial||Be.isMeshStandardMaterial||Be.isShaderMaterial||Be.isShadowMaterial||pt.isSkinnedMesh)&&$o.setValue(ft,"viewMatrix",ce.matrixWorldInverse)}if(pt.isSkinnedMesh){$o.setOptional(ft,pt,"bindMatrix"),$o.setOptional(ft,pt,"bindMatrixInverse");const da=pt.skeleton;da&&(Xn.floatVertexTextures?(null===da.boneTexture&&da.computeBoneTexture(),$o.setValue(ft,"boneTexture",da.boneTexture,vt),$o.setValue(ft,"boneTextureSize",da.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const og=ct.morphAttributes;if((void 0!==og.position||void 0!==og.normal||void 0!==og.color&&!0===Xn.isWebGL2)&&Ht.update(pt,ct,Be,Od),(Gu||Fi.receiveShadow!==pt.receiveShadow)&&(Fi.receiveShadow=pt.receiveShadow,$o.setValue(ft,"receiveShadow",pt.receiveShadow)),Be.isMeshGouraudMaterial&&null!==Be.envMap&&(Nd.envMap.value=Ai,Nd.flipEnvMap.value=Ai.isCubeTexture&&!1===Ai.isRenderTargetTexture?-1:1),Gu&&($o.setValue(ft,"toneMappingExposure",j.toneMappingExposure),Fi.needsLights&&function Mp(ce,Ue){ce.ambientLightColor.needsUpdate=Ue,ce.lightProbe.needsUpdate=Ue,ce.directionalLights.needsUpdate=Ue,ce.directionalLightShadows.needsUpdate=Ue,ce.pointLights.needsUpdate=Ue,ce.pointLightShadows.needsUpdate=Ue,ce.spotLights.needsUpdate=Ue,ce.spotLightShadows.needsUpdate=Ue,ce.rectAreaLights.needsUpdate=Ue,ce.hemisphereLights.needsUpdate=Ue}(Nd,rf),Bn&&!0===Be.fog&&Mr.refreshFogUniforms(Nd,Bn),Mr.refreshMaterialUniforms(Nd,Be,Ye,Te,It),mu.upload(ft,Fi.uniformsList,Nd,vt)),Be.isShaderMaterial&&!0===Be.uniformsNeedUpdate&&(mu.upload(ft,Fi.uniformsList,Nd,vt),Be.uniformsNeedUpdate=!1),Be.isSpriteMaterial&&$o.setValue(ft,"center",pt.center),$o.setValue(ft,"modelViewMatrix",pt.modelViewMatrix),$o.setValue(ft,"normalMatrix",pt.normalMatrix),$o.setValue(ft,"modelMatrix",pt.matrixWorld),Be.isShaderMaterial||Be.isRawShaderMaterial){const da=Be.uniformsGroups;for(let xp=0,gy=da.length;xp<gy;xp++)if(Xn.isWebGL2){const ag=da[xp];Fn.update(ag,Od),Fn.bind(ag,Od)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Od}(ce,Ue,ct,Be,pt);ln.setMaterial(Be,fi);let Ai=ct.index,Xi=1;!0===Be.wireframe&&(Ai=oi.getWireframeAttribute(ct),Xi=2);const Hi=ct.drawRange,zi=ct.attributes.position;let Ur=Hi.start*Xi,Sa=(Hi.start+Hi.count)*Xi;null!==Bn&&(Ur=Math.max(Ur,Bn.start*Xi),Sa=Math.min(Sa,(Bn.start+Bn.count)*Xi)),null!==Ai?(Ur=Math.max(Ur,0),Sa=Math.min(Sa,Ai.count)):null!=zi&&(Ur=Math.max(Ur,0),Sa=Math.min(Sa,zi.count));const Pl=Sa-Ur;if(Pl<0||Pl===1/0)return;gt.setup(pt,Be,Mi,ct,Ai);let Io,Cs=hn;if(null!==Ai&&(Io=Xt.get(Ai),Cs=ri,Cs.setIndex(Io)),pt.isMesh)!0===Be.wireframe?(ln.setLineWidth(Be.wireframeLinewidth*an()),Cs.setMode(1)):Cs.setMode(4);else if(pt.isLine){let Fi=Be.linewidth;void 0===Fi&&(Fi=1),ln.setLineWidth(Fi*an()),Cs.setMode(pt.isLineSegments?1:pt.isLineLoop?2:3)}else pt.isPoints?Cs.setMode(0):pt.isSprite&&Cs.setMode(4);if(pt.isInstancedMesh)Cs.renderInstances(Ur,Pl,pt.count);else if(ct.isInstancedBufferGeometry){const Pd=Math.min(ct.instanceCount,void 0!==ct._maxInstanceCount?ct._maxInstanceCount:1/0);Cs.renderInstances(Ur,Pl,Pd)}else Cs.render(Ur,Pl)},this.compile=function(ce,Ue){function ct(Be,pt,Bn){!0===Be.transparent&&Be.side===dt?(Be.side=ze,Be.needsUpdate=!0,Qa(Be,pt,Bn),Be.side=Lt,Be.needsUpdate=!0,Qa(Be,pt,Bn),Be.side=dt):Qa(Be,pt,Bn)}E=pe.get(ce),E.init(),G.push(E),ce.traverseVisible(function(Be){Be.isLight&&Be.layers.test(Ue.layers)&&(E.pushLight(Be),Be.castShadow&&E.pushShadow(Be))}),E.setupLights(j.physicallyCorrectLights),ce.traverse(function(Be){const pt=Be.material;if(pt)if(Array.isArray(pt))for(let Bn=0;Bn<pt.length;Bn++)ct(pt[Bn],ce,Be);else ct(pt,ce,Be)}),G.pop(),E=null};let ut=null;function vn(){rr.stop()}function Cn(){rr.start()}const rr=new su;function Fs(ce,Ue,ct,Be){if(!1===ce.visible)return;if(ce.layers.test(Ue.layers))if(ce.isGroup)ct=ce.renderOrder;else if(ce.isLOD)!0===ce.autoUpdate&&ce.update(Ue);else if(ce.isLight)E.pushLight(ce),ce.castShadow&&E.pushShadow(ce);else if(ce.isSprite){if(!ce.frustumCulled||Ft.intersectsSprite(ce)){Be&&$t.setFromMatrixPosition(ce.matrixWorld).applyMatrix4(rt);const fi=Un.update(ce),Mi=ce.material;Mi.visible&&A.push(ce,fi,Mi,ct,$t.z,null)}}else if((ce.isMesh||ce.isLine||ce.isPoints)&&(ce.isSkinnedMesh&&ce.skeleton.frame!==wi.render.frame&&(ce.skeleton.update(),ce.skeleton.frame=wi.render.frame),!ce.frustumCulled||Ft.intersectsObject(ce))){Be&&$t.setFromMatrixPosition(ce.matrixWorld).applyMatrix4(rt);const fi=Un.update(ce),Mi=ce.material;if(Array.isArray(Mi)){const Ai=fi.groups;for(let Xi=0,Hi=Ai.length;Xi<Hi;Xi++){const zi=Ai[Xi],Ur=Mi[zi.materialIndex];Ur&&Ur.visible&&A.push(ce,fi,Ur,ct,$t.z,zi)}}else Mi.visible&&A.push(ce,fi,Mi,ct,$t.z,null)}const Bn=ce.children;for(let fi=0,Mi=Bn.length;fi<Mi;fi++)Fs(Bn[fi],Ue,ct,Be)}function ho(ce,Ue,ct,Be){const pt=ce.opaque,Bn=ce.transmissive,fi=ce.transparent;E.setupLightsView(ct),Bn.length>0&&function Id(ce,Ue,ct){const Be=Xn.isWebGL2;null===It&&(It=new ta(1,1,{generateMipmaps:!0,type:yn.has("EXT_color_buffer_half_float")?Hr:ts,minFilter:Yn,samples:Be&&!0===h?4:0})),j.getDrawingBufferSize(ot),Be?It.setSize(ot.x,ot.y):It.setSize(dl(ot.x),dl(ot.y));const pt=j.getRenderTarget();j.setRenderTarget(It),j.clear();const Bn=j.toneMapping;j.toneMapping=Qi,Vr(ce,Ue,ct),j.toneMapping=Bn,vt.updateMultisampleRenderTarget(It),vt.updateRenderTargetMipmap(It),j.setRenderTarget(pt)}(pt,Ue,ct),Be&&ln.viewport(de.copy(Be)),pt.length>0&&Vr(pt,Ue,ct),Bn.length>0&&Vr(Bn,Ue,ct),fi.length>0&&Vr(fi,Ue,ct),ln.buffers.depth.setTest(!0),ln.buffers.depth.setMask(!0),ln.buffers.color.setMask(!0),ln.setPolygonOffset(!1)}function Vr(ce,Ue,ct){const Be=!0===Ue.isScene?Ue.overrideMaterial:null;for(let pt=0,Bn=ce.length;pt<Bn;pt++){const fi=ce[pt],Mi=fi.object,Ai=fi.geometry,Xi=null===Be?fi.material:Be,Hi=fi.group;Mi.layers.test(ct.layers)&&Hc(Mi,Ue,ct,Ai,Xi,Hi)}}function Hc(ce,Ue,ct,Be,pt,Bn){ce.onBeforeRender(j,Ue,ct,Be,pt,Bn),ce.modelViewMatrix.multiplyMatrices(ct.matrixWorldInverse,ce.matrixWorld),ce.normalMatrix.getNormalMatrix(ce.modelViewMatrix),pt.onBeforeRender(j,Ue,ct,Be,ce,Bn),!0===pt.transparent&&pt.side===dt?(pt.side=ze,pt.needsUpdate=!0,j.renderBufferDirect(ct,Ue,Be,pt,ce,Bn),pt.side=Lt,pt.needsUpdate=!0,j.renderBufferDirect(ct,Ue,Be,pt,ce,Bn),pt.side=dt):j.renderBufferDirect(ct,Ue,Be,pt,ce,Bn),ce.onAfterRender(j,Ue,ct,Be,pt,Bn)}function Qa(ce,Ue,ct){!0!==Ue.isScene&&(Ue=zt);const Be=Tt.get(ce),pt=E.state.lights,fi=pt.state.version,Mi=Hn.getParameters(ce,pt.state,E.state.shadowsArray,Ue,ct),Ai=Hn.getProgramCacheKey(Mi);let Xi=Be.programs;Be.environment=ce.isMeshStandardMaterial?Ue.environment:null,Be.fog=Ue.fog,Be.envMap=(ce.isMeshStandardMaterial?xn:qt).get(ce.envMap||Be.environment),void 0===Xi&&(ce.addEventListener("dispose",Br),Xi=new Map,Be.programs=Xi);let Hi=Xi.get(Ai);if(void 0!==Hi){if(Be.currentProgram===Hi&&Be.lightsStateVersion===fi)return fy(ce,Mi),Hi}else Mi.uniforms=Hn.getUniforms(ce),ce.onBuild(ct,Mi,j),ce.onBeforeCompile(Mi,j),Hi=Hn.acquireProgram(Mi,Ai),Xi.set(Ai,Hi),Be.uniforms=Mi.uniforms;const zi=Be.uniforms;(!ce.isShaderMaterial&&!ce.isRawShaderMaterial||!0===ce.clipping)&&(zi.clippingPlanes=re.uniform),fy(ce,Mi),Be.needsLights=function py(ce){return ce.isMeshLambertMaterial||ce.isMeshToonMaterial||ce.isMeshPhongMaterial||ce.isMeshStandardMaterial||ce.isShadowMaterial||ce.isShaderMaterial&&!0===ce.lights}(ce),Be.lightsStateVersion=fi,Be.needsLights&&(zi.ambientLightColor.value=pt.state.ambient,zi.lightProbe.value=pt.state.probe,zi.directionalLights.value=pt.state.directional,zi.directionalLightShadows.value=pt.state.directionalShadow,zi.spotLights.value=pt.state.spot,zi.spotLightShadows.value=pt.state.spotShadow,zi.rectAreaLights.value=pt.state.rectArea,zi.ltc_1.value=pt.state.rectAreaLTC1,zi.ltc_2.value=pt.state.rectAreaLTC2,zi.pointLights.value=pt.state.point,zi.pointLightShadows.value=pt.state.pointShadow,zi.hemisphereLights.value=pt.state.hemi,zi.directionalShadowMap.value=pt.state.directionalShadowMap,zi.directionalShadowMatrix.value=pt.state.directionalShadowMatrix,zi.spotShadowMap.value=pt.state.spotShadowMap,zi.spotLightMatrix.value=pt.state.spotLightMatrix,zi.spotLightMap.value=pt.state.spotLightMap,zi.pointShadowMap.value=pt.state.pointShadowMap,zi.pointShadowMatrix.value=pt.state.pointShadowMatrix);const Ur=Hi.getUniforms(),Sa=mu.seqWithValue(Ur.seq,zi);return Be.currentProgram=Hi,Be.uniformsList=Sa,Hi}function fy(ce,Ue){const ct=Tt.get(ce);ct.outputEncoding=Ue.outputEncoding,ct.instancing=Ue.instancing,ct.skinning=Ue.skinning,ct.morphTargets=Ue.morphTargets,ct.morphNormals=Ue.morphNormals,ct.morphColors=Ue.morphColors,ct.morphTargetsCount=Ue.morphTargetsCount,ct.numClippingPlanes=Ue.numClippingPlanes,ct.numIntersection=Ue.numClipIntersection,ct.vertexAlphas=Ue.vertexAlphas,ct.vertexTangents=Ue.vertexTangents,ct.toneMapping=Ue.toneMapping}rr.setAnimationLoop(function Nt(ce){ut&&ut(ce)}),typeof self<"u"&&rr.setContext(self),this.setAnimationLoop=function(ce){ut=ce,Sn.setAnimationLoop(ce),null===ce?rr.stop():rr.start()},Sn.addEventListener("sessionstart",vn),Sn.addEventListener("sessionend",Cn),this.render=function(ce,Ue){if(void 0===Ue||!0===Ue.isCamera){if(!0!==k){if(!0===ce.matrixWorldAutoUpdate&&ce.updateMatrixWorld(),null===Ue.parent&&!0===Ue.matrixWorldAutoUpdate&&Ue.updateMatrixWorld(),!0===Sn.enabled&&!0===Sn.isPresenting&&(!0===Sn.cameraAutoUpdate&&Sn.updateCamera(Ue),Ue=Sn.getCamera()),!0===ce.isScene&&ce.onBeforeRender(j,ce,Ue,$),E=pe.get(ce,G.length),E.init(),G.push(E),rt.multiplyMatrices(Ue.projectionMatrix,Ue.matrixWorldInverse),Ft.setFromProjectionMatrix(rt),Bt=this.localClippingEnabled,yt=re.init(this.clippingPlanes,Bt,Ue),A=nr.get(ce,L.length),A.init(),L.push(A),Fs(ce,Ue,0,j.sortObjects),A.finish(),!0===j.sortObjects&&A.sort(bt,He),!0===yt&&re.beginShadows(),tt.render(E.state.shadowsArray,ce,Ue),!0===yt&&re.endShadows(),!0===this.info.autoReset&&this.info.reset(),Ot.render(A,ce),E.setupLights(j.physicallyCorrectLights),Ue.isArrayCamera){const Be=Ue.cameras;for(let pt=0,Bn=Be.length;pt<Bn;pt++){const fi=Be[pt];ho(A,ce,fi,fi.viewport)}}else ho(A,ce,Ue);null!==$&&(vt.updateMultisampleRenderTarget($),vt.updateRenderTargetMipmap($)),!0===ce.isScene&&ce.onAfterRender(j,ce,Ue),gt.resetDefaultState(),Z=-1,se=null,G.pop(),E=G.length>0?G[G.length-1]:null,L.pop(),A=L.length>0?L[L.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return Y},this.getActiveMipmapLevel=function(){return q},this.getRenderTarget=function(){return $},this.setRenderTargetTextures=function(ce,Ue,ct){Tt.get(ce.texture).__webglTexture=Ue,Tt.get(ce.depthTexture).__webglTexture=ct;const Be=Tt.get(ce);Be.__hasExternalTextures=!0,Be.__hasExternalTextures&&(Be.__autoAllocateDepthBuffer=void 0===ct,Be.__autoAllocateDepthBuffer||!0===yn.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Be.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(ce,Ue){const ct=Tt.get(ce);ct.__webglFramebuffer=Ue,ct.__useDefaultFramebuffer=void 0===Ue},this.setRenderTarget=function(ce,Ue=0,ct=0){$=ce,Y=Ue,q=ct;let Be=!0,pt=null,Bn=!1,fi=!1;if(ce){const Ai=Tt.get(ce);void 0!==Ai.__useDefaultFramebuffer?(ln.bindFramebuffer(36160,null),Be=!1):void 0===Ai.__webglFramebuffer?vt.setupRenderTarget(ce):Ai.__hasExternalTextures&&vt.rebindTextures(ce,Tt.get(ce.texture).__webglTexture,Tt.get(ce.depthTexture).__webglTexture);const Xi=ce.texture;(Xi.isData3DTexture||Xi.isDataArrayTexture||Xi.isCompressedArrayTexture)&&(fi=!0);const Hi=Tt.get(ce).__webglFramebuffer;ce.isWebGLCubeRenderTarget?(pt=Hi[Ue],Bn=!0):pt=Xn.isWebGL2&&ce.samples>0&&!1===vt.useMultisampledRTT(ce)?Tt.get(ce).__webglMultisampledFramebuffer:Hi,de.copy(ce.viewport),_e.copy(ce.scissor),X=ce.scissorTest}else de.copy(Ee).multiplyScalar(Ye).floor(),_e.copy(at).multiplyScalar(Ye).floor(),X=wt;if(ln.bindFramebuffer(36160,pt)&&Xn.drawBuffers&&Be&&ln.drawBuffers(ce,pt),ln.viewport(de),ln.scissor(_e),ln.setScissorTest(X),Bn){const Ai=Tt.get(ce.texture);ft.framebufferTexture2D(36160,36064,34069+Ue,Ai.__webglTexture,ct)}else if(fi){const Ai=Tt.get(ce.texture);ft.framebufferTextureLayer(36160,36064,Ai.__webglTexture,ct||0,Ue||0)}Z=-1},this.readRenderTargetPixels=function(ce,Ue,ct,Be,pt,Bn,fi){if(!ce||!ce.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Mi=Tt.get(ce).__webglFramebuffer;if(ce.isWebGLCubeRenderTarget&&void 0!==fi&&(Mi=Mi[fi]),Mi){ln.bindFramebuffer(36160,Mi);try{const Ai=ce.texture,Xi=Ai.format,Hi=Ai.type;if(Xi!==as&&fn.convert(Xi)!==ft.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const zi=Hi===Hr&&(yn.has("EXT_color_buffer_half_float")||Xn.isWebGL2&&yn.has("EXT_color_buffer_float"));if(!(Hi===ts||fn.convert(Hi)===ft.getParameter(35738)||Hi===vi&&(Xn.isWebGL2||yn.has("OES_texture_float")||yn.has("WEBGL_color_buffer_float"))||zi))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");Ue>=0&&Ue<=ce.width-Be&&ct>=0&&ct<=ce.height-pt&&ft.readPixels(Ue,ct,Be,pt,fn.convert(Xi),fn.convert(Hi),Bn)}finally{const Ai=null!==$?Tt.get($).__webglFramebuffer:null;ln.bindFramebuffer(36160,Ai)}}},this.copyFramebufferToTexture=function(ce,Ue,ct=0){const Be=Math.pow(2,-ct),pt=Math.floor(Ue.image.width*Be),Bn=Math.floor(Ue.image.height*Be);vt.setTexture2D(Ue,0),ft.copyTexSubImage2D(3553,ct,0,0,ce.x,ce.y,pt,Bn),ln.unbindTexture()},this.copyTextureToTexture=function(ce,Ue,ct,Be=0){const pt=Ue.image.width,Bn=Ue.image.height,fi=fn.convert(ct.format),Mi=fn.convert(ct.type);vt.setTexture2D(ct,0),ft.pixelStorei(37440,ct.flipY),ft.pixelStorei(37441,ct.premultiplyAlpha),ft.pixelStorei(3317,ct.unpackAlignment),Ue.isDataTexture?ft.texSubImage2D(3553,Be,ce.x,ce.y,pt,Bn,fi,Mi,Ue.image.data):Ue.isCompressedTexture?ft.compressedTexSubImage2D(3553,Be,ce.x,ce.y,Ue.mipmaps[0].width,Ue.mipmaps[0].height,fi,Ue.mipmaps[0].data):ft.texSubImage2D(3553,Be,ce.x,ce.y,fi,Mi,Ue.image),0===Be&&ct.generateMipmaps&&ft.generateMipmap(3553),ln.unbindTexture()},this.copyTextureToTexture3D=function(ce,Ue,ct,Be,pt=0){if(j.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const Bn=ce.max.x-ce.min.x+1,fi=ce.max.y-ce.min.y+1,Mi=ce.max.z-ce.min.z+1,Ai=fn.convert(Be.format),Xi=fn.convert(Be.type);let Hi;if(Be.isData3DTexture)vt.setTexture3D(Be,0),Hi=32879;else{if(!Be.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");vt.setTexture2DArray(Be,0),Hi=35866}ft.pixelStorei(37440,Be.flipY),ft.pixelStorei(37441,Be.premultiplyAlpha),ft.pixelStorei(3317,Be.unpackAlignment);const zi=ft.getParameter(3314),Ur=ft.getParameter(32878),Sa=ft.getParameter(3316),Pl=ft.getParameter(3315),Io=ft.getParameter(32877),Cs=ct.isCompressedTexture?ct.mipmaps[0]:ct.image;ft.pixelStorei(3314,Cs.width),ft.pixelStorei(32878,Cs.height),ft.pixelStorei(3316,ce.min.x),ft.pixelStorei(3315,ce.min.y),ft.pixelStorei(32877,ce.min.z),ct.isDataTexture||ct.isData3DTexture?ft.texSubImage3D(Hi,pt,Ue.x,Ue.y,Ue.z,Bn,fi,Mi,Ai,Xi,Cs.data):ct.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),ft.compressedTexSubImage3D(Hi,pt,Ue.x,Ue.y,Ue.z,Bn,fi,Mi,Ai,Cs.data)):ft.texSubImage3D(Hi,pt,Ue.x,Ue.y,Ue.z,Bn,fi,Mi,Ai,Xi,Cs),ft.pixelStorei(3314,zi),ft.pixelStorei(32878,Ur),ft.pixelStorei(3316,Sa),ft.pixelStorei(3315,Pl),ft.pixelStorei(32877,Io),0===pt&&Be.generateMipmaps&&ft.generateMipmap(Hi),ln.unbindTexture()},this.initTexture=function(ce){ce.isCubeTexture?vt.setTextureCube(ce,0):ce.isData3DTexture?vt.setTexture3D(ce,0):ce.isDataArrayTexture||ce.isCompressedArrayTexture?vt.setTexture2DArray(ce,0):vt.setTexture2D(ce,0),ln.unbindTexture()},this.resetState=function(){Y=0,q=0,$=null,ln.reset(),gt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}(class Ov extends Pv{}).prototype.isWebGL1Renderer=!0;class D_ extends ws{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(t.backgroundIntensity=this.backgroundIntensity),t}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}class Co extends br{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Wt(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const ep=new le,Ih=new le,Ph=new Gt,Oh=new si,pd=new O;class ms extends ws{constructor(e=new Zn,t=new Co){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,s=[0];for(let l=1,h=t.count;l<h;l++)ep.fromBufferAttribute(t,l-1),Ih.fromBufferAttribute(t,l),s[l]=s[l-1],s[l]+=ep.distanceTo(Ih);e.setAttribute("lineDistance",new dn(s,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const s=this.geometry,l=this.matrixWorld,h=e.params.Line.threshold,g=s.drawRange;if(null===s.boundingSphere&&s.computeBoundingSphere(),pd.copy(s.boundingSphere),pd.applyMatrix4(l),pd.radius+=h,!1===e.ray.intersectsSphere(pd))return;Ph.copy(l).invert(),Oh.copy(e.ray).applyMatrix4(Ph);const _=h/((this.scale.x+this.scale.y+this.scale.z)/3),b=_*_,x=new le,S=new le,A=new le,E=new le,L=this.isLineSegments?2:1,G=s.index,k=s.attributes.position;if(null!==G)for(let $=Math.max(0,g.start),Z=Math.min(G.count,g.start+g.count)-1;$<Z;$+=L){const se=G.getX($),de=G.getX($+1);if(x.fromBufferAttribute(k,se),S.fromBufferAttribute(k,de),Oh.distanceSqToSegment(x,S,E,A)>b)continue;E.applyMatrix4(this.matrixWorld);const X=e.ray.origin.distanceTo(E);X<e.near||X>e.far||t.push({distance:X,point:A.clone().applyMatrix4(this.matrixWorld),index:$,face:null,faceIndex:null,object:this})}else for(let $=Math.max(0,g.start),Z=Math.min(k.count,g.start+g.count)-1;$<Z;$+=L){if(x.fromBufferAttribute(k,$),S.fromBufferAttribute(k,$+1),Oh.distanceSqToSegment(x,S,E,A)>b)continue;E.applyMatrix4(this.matrixWorld);const de=e.ray.origin.distanceTo(E);de<e.near||de>e.far||t.push({distance:de,point:A.clone().applyMatrix4(this.matrixWorld),index:$,face:null,faceIndex:null,object:this})}}updateMorphTargets(){const t=this.geometry.morphAttributes,s=Object.keys(t);if(s.length>0){const l=t[s[0]];if(void 0!==l){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let h=0,g=l.length;h<g;h++){const _=l[h].name||String(h);this.morphTargetInfluences.push(0),this.morphTargetDictionary[_]=h}}}}}const tp=new le,np=new le;class Nm extends ms{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,s=[];for(let l=0,h=t.count;l<h;l+=2)tp.fromBufferAttribute(t,l),np.fromBufferAttribute(t,l+1),s[l]=0===l?0:s[l-1],s[l+1]=s[l]+tp.distanceTo(np);e.setAttribute("lineDistance",new dn(s,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class ip extends br{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Wt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const Fm=new Gt,rp=new si,Fh=new O,xu=new le;class Lm extends ws{constructor(e=new Zn,t=new ip){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const s=this.geometry,l=this.matrixWorld,h=e.params.Points.threshold,g=s.drawRange;if(null===s.boundingSphere&&s.computeBoundingSphere(),Fh.copy(s.boundingSphere),Fh.applyMatrix4(l),Fh.radius+=h,!1===e.ray.intersectsSphere(Fh))return;Fm.copy(l).invert(),rp.copy(e.ray).applyMatrix4(Fm);const _=h/((this.scale.x+this.scale.y+this.scale.z)/3),b=_*_,x=s.index,A=s.attributes.position;if(null!==x)for(let G=Math.max(0,g.start),j=Math.min(x.count,g.start+g.count);G<j;G++){const k=x.getX(G);xu.fromBufferAttribute(A,k),S_(xu,k,b,l,e,t,this)}else for(let G=Math.max(0,g.start),j=Math.min(A.count,g.start+g.count);G<j;G++)xu.fromBufferAttribute(A,G),S_(xu,G,b,l,e,t,this)}updateMorphTargets(){const t=this.geometry.morphAttributes,s=Object.keys(t);if(s.length>0){const l=t[s[0]];if(void 0!==l){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let h=0,g=l.length;h<g;h++){const _=l[h].name||String(h);this.morphTargetInfluences.push(0),this.morphTargetDictionary[_]=h}}}}}function S_(v,e,t,s,l,h,g){const _=rp.distanceSqToPoint(v);if(_<t){const b=new le;rp.closestPointToPoint(v,b),b.applyMatrix4(s);const x=l.ray.origin.distanceTo(b);if(x<l.near||x>l.far)return;h.push({distance:x,distanceToRay:Math.sqrt(_),point:b,index:e,face:null,object:g})}}class ca extends Zn{constructor(e=1,t=32,s=16,l=0,h=2*Math.PI,g=0,_=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:s,phiStart:l,phiLength:h,thetaStart:g,thetaLength:_},t=Math.max(3,Math.floor(t)),s=Math.max(2,Math.floor(s));const b=Math.min(g+_,Math.PI);let x=0;const S=[],A=new le,E=new le,L=[],G=[],j=[],k=[];for(let Y=0;Y<=s;Y++){const q=[],$=Y/s;let Z=0;0==Y&&0==g?Z=.5/t:Y==s&&b==Math.PI&&(Z=-.5/t);for(let se=0;se<=t;se++){const de=se/t;A.x=-e*Math.cos(l+de*h)*Math.sin(g+$*_),A.y=e*Math.cos(g+$*_),A.z=e*Math.sin(l+de*h)*Math.sin(g+$*_),G.push(A.x,A.y,A.z),E.copy(A).normalize(),j.push(E.x,E.y,E.z),k.push(de+Z,1-$),q.push(x++)}S.push(q)}for(let Y=0;Y<s;Y++)for(let q=0;q<t;q++){const Z=S[Y][q],se=S[Y+1][q],de=S[Y+1][q+1];(0!==Y||g>0)&&L.push(S[Y][q+1],Z,de),(Y!==s-1||b<Math.PI)&&L.push(Z,se,de)}this.setIndex(L),this.setAttribute("position",new dn(G,3)),this.setAttribute("normal",new dn(j,3)),this.setAttribute("uv",new dn(k,2))}static fromJSON(e){return new ca(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Pu extends br{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Wt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Wt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=vo,this.normalScale=new ht(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class jc extends br{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Wt(16777215),this.specular=new Wt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Wt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=vo,this.normalScale=new ht(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Mn,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}function Ao(v,e,t){return wd(v)?new v.constructor(v.subarray(e,void 0!==t?t:v.length)):v.slice(e,t)}function ic(v,e,t){return!v||!t&&v.constructor===e?v:"number"==typeof e.BYTES_PER_ELEMENT?new e(v):Array.prototype.slice.call(v)}function wd(v){return ArrayBuffer.isView(v)&&!(v instanceof DataView)}class Nu{constructor(e,t,s,l){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==l?l:new t.constructor(s),this.sampleValues=t,this.valueSize=s,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let s=this._cachedIndex,l=t[s],h=t[s-1];e:{t:{let g;n:{i:if(!(e<l)){for(let _=s+2;;){if(void 0===l){if(e<h)break i;return s=t.length,this._cachedIndex=s,this.copySampleValue_(s-1)}if(s===_)break;if(h=l,l=t[++s],e<l)break t}g=t.length;break n}if(e>=h)break e;{const _=t[1];e<_&&(s=2,h=_);for(let b=s-2;;){if(void 0===h)return this._cachedIndex=0,this.copySampleValue_(0);if(s===b)break;if(l=h,h=t[--s-1],e>=h)break t}g=s,s=0}}for(;s<g;){const _=s+g>>>1;e<t[_]?g=_:s=_+1}if(l=t[s],h=t[s-1],void 0===h)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===l)return s=t.length,this._cachedIndex=s,this.copySampleValue_(s-1)}this._cachedIndex=s,this.intervalChanged_(s,h,l)}return this.interpolate_(s,h,e,l)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,s=this.sampleValues,l=this.valueSize,h=e*l;for(let g=0;g!==l;++g)t[g]=s[h+g];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class fp extends Nu{constructor(e,t,s,l){super(e,t,s,l),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:2400,endingEnd:2400}}intervalChanged_(e,t,s){const l=this.parameterPositions;let h=e-2,g=e+1,_=l[h],b=l[g];if(void 0===_)switch(this.getSettings_().endingStart){case 2401:h=e,_=2*t-s;break;case 2402:h=l.length-2,_=t+l[h]-l[h+1];break;default:h=e,_=s}if(void 0===b)switch(this.getSettings_().endingEnd){case 2401:g=e,b=2*s-t;break;case 2402:g=1,b=s+l[1]-l[0];break;default:g=e-1,b=t}const x=.5*(s-t),S=this.valueSize;this._weightPrev=x/(t-_),this._weightNext=x/(b-s),this._offsetPrev=h*S,this._offsetNext=g*S}interpolate_(e,t,s,l){const h=this.resultBuffer,g=this.sampleValues,_=this.valueSize,b=e*_,x=b-_,S=this._offsetPrev,A=this._offsetNext,E=this._weightPrev,L=this._weightNext,G=(s-t)/(l-t),j=G*G,k=j*G,Y=-E*k+2*E*j-E*G,q=(1+E)*k+(-1.5-2*E)*j+(-.5+E)*G+1,$=(-1-L)*k+(1.5+L)*j+.5*G,Z=L*k-L*j;for(let se=0;se!==_;++se)h[se]=Y*g[S+se]+q*g[x+se]+$*g[b+se]+Z*g[A+se];return h}}class Zh extends Nu{constructor(e,t,s,l){super(e,t,s,l)}interpolate_(e,t,s,l){const h=this.resultBuffer,g=this.sampleValues,_=this.valueSize,b=e*_,x=b-_,S=(s-t)/(l-t),A=1-S;for(let E=0;E!==_;++E)h[E]=g[x+E]*A+g[b+E]*S;return h}}class Oy extends Nu{constructor(e,t,s,l){super(e,t,s,l)}interpolate_(e){return this.copySampleValue_(e-1)}}class El{constructor(e,t,s,l){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=ic(t,this.TimeBufferType),this.values=ic(s,this.ValueBufferType),this.setInterpolation(l||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let s;if(t.toJSON!==this.toJSON)s=t.toJSON(e);else{s={name:e.name,times:ic(e.times,Array),values:ic(e.values,Array)};const l=e.getInterpolation();l!==e.DefaultInterpolation&&(s.interpolation=l)}return s.type=e.ValueTypeName,s}InterpolantFactoryMethodDiscrete(e){return new Oy(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Zh(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new fp(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case 2300:t=this.InterpolantFactoryMethodDiscrete;break;case 2301:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const s="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(s);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",s),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let s=0,l=t.length;s!==l;++s)t[s]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let s=0,l=t.length;s!==l;++s)t[s]*=e}return this}trim(e,t){const s=this.times,l=s.length;let h=0,g=l-1;for(;h!==l&&s[h]<e;)++h;for(;-1!==g&&s[g]>t;)--g;if(++g,0!==h||g!==l){h>=g&&(g=Math.max(g,1),h=g-1);const _=this.getValueSize();this.times=Ao(s,h,g),this.values=Ao(this.values,h*_,g*_)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const s=this.times,l=this.values,h=s.length;0===h&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let g=null;for(let _=0;_!==h;_++){const b=s[_];if("number"==typeof b&&isNaN(b)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,_,b),e=!1;break}if(null!==g&&g>b){console.error("THREE.KeyframeTrack: Out of order keys.",this,_,b,g),e=!1;break}g=b}if(void 0!==l&&wd(l))for(let _=0,b=l.length;_!==b;++_){const x=l[_];if(isNaN(x)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,_,x),e=!1;break}}return e}optimize(){const e=Ao(this.times),t=Ao(this.values),s=this.getValueSize(),l=2302===this.getInterpolation(),h=e.length-1;let g=1;for(let _=1;_<h;++_){let b=!1;const x=e[_];if(x!==e[_+1]&&(1!==_||x!==e[0]))if(l)b=!0;else{const A=_*s,E=A-s,L=A+s;for(let G=0;G!==s;++G){const j=t[A+G];if(j!==t[E+G]||j!==t[L+G]){b=!0;break}}}if(b){if(_!==g){e[g]=e[_];const A=_*s,E=g*s;for(let L=0;L!==s;++L)t[E+L]=t[A+L]}++g}}if(h>0){e[g]=e[h];for(let _=h*s,b=g*s,x=0;x!==s;++x)t[b+x]=t[_+x];++g}return g!==e.length?(this.times=Ao(e,0,g),this.values=Ao(t,0,g*s)):(this.times=e,this.values=t),this}clone(){const e=Ao(this.times,0),t=Ao(this.values,0),l=new(0,this.constructor)(this.name,e,t);return l.createInterpolant=this.createInterpolant,l}}El.prototype.TimeBufferType=Float32Array,El.prototype.ValueBufferType=Float32Array,El.prototype.DefaultInterpolation=2301;class Rd extends El{}Rd.prototype.ValueTypeName="bool",Rd.prototype.ValueBufferType=Array,Rd.prototype.DefaultInterpolation=2300,Rd.prototype.InterpolantFactoryMethodLinear=void 0,Rd.prototype.InterpolantFactoryMethodSmooth=void 0;(class Ym extends El{}).prototype.ValueTypeName="color";(class Sd extends El{}).prototype.ValueTypeName="number";class jv extends Nu{constructor(e,t,s,l){super(e,t,s,l)}interpolate_(e,t,s,l){const h=this.resultBuffer,g=this.sampleValues,_=this.valueSize,b=(s-t)/(l-t);let x=e*_;for(let S=x+_;x!==S;x+=4)Ns.slerpFlat(h,0,g,x-_,g,x,b);return h}}class Kh extends El{InterpolantFactoryMethodLinear(e){return new jv(this.times,this.values,this.getValueSize(),e)}}Kh.prototype.ValueTypeName="quaternion",Kh.prototype.DefaultInterpolation=2301,Kh.prototype.InterpolantFactoryMethodSmooth=void 0;class Cd extends El{}Cd.prototype.ValueTypeName="string",Cd.prototype.ValueBufferType=Array,Cd.prototype.DefaultInterpolation=2300,Cd.prototype.InterpolantFactoryMethodLinear=void 0,Cd.prototype.InterpolantFactoryMethodSmooth=void 0;(class pp extends El{}).prototype.ValueTypeName="vector";const Ed={enabled:!1,files:{},add:function(v,e){!1!==this.enabled&&(this.files[v]=e)},get:function(v){if(!1!==this.enabled)return this.files[v]},remove:function(v){delete this.files[v]},clear:function(){this.files={}}};class qh{constructor(e,t,s){const l=this;let b,h=!1,g=0,_=0;const x=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=s,this.itemStart=function(S){_++,!1===h&&void 0!==l.onStart&&l.onStart(S,g,_),h=!0},this.itemEnd=function(S){g++,void 0!==l.onProgress&&l.onProgress(S,g,_),g===_&&(h=!1,void 0!==l.onLoad&&l.onLoad())},this.itemError=function(S){void 0!==l.onError&&l.onError(S)},this.resolveURL=function(S){return b?b(S):S},this.setURLModifier=function(S){return b=S,this},this.addHandler=function(S,A){return x.push(S,A),this},this.removeHandler=function(S){const A=x.indexOf(S);return-1!==A&&x.splice(A,2),this},this.getHandler=function(S){for(let A=0,E=x.length;A<E;A+=2){const L=x[A],G=x[A+1];if(L.global&&(L.lastIndex=0),L.test(S))return G}return null}}}const Fu=new qh;class Vv{constructor(e){this.manager=void 0!==e?e:Fu,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const s=this;return new Promise(function(l,h){s.load(e,l,t,h)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}class j_ extends Error{constructor(e,t){super(e),this.response=t}}class Xh extends Vv{constructor(e){super(e)}load(e,t,s,l){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const h=this,g=Ed.get(e);if(void 0!==g)return h.manager.itemStart(e),setTimeout(function(){t&&t(g),h.manager.itemEnd(e)},0),g;const _=hl("img");function b(){S(),Ed.add(e,this),t&&t(this),h.manager.itemEnd(e)}function x(A){S(),l&&l(A),h.manager.itemError(e),h.manager.itemEnd(e)}function S(){_.removeEventListener("load",b,!1),_.removeEventListener("error",x,!1)}return _.addEventListener("load",b,!1),_.addEventListener("error",x,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(_.crossOrigin=this.crossOrigin),h.manager.itemStart(e),_.src=e,_}}class Ny extends Vv{constructor(e){super(e)}load(e,t,s,l){const h=new tr,g=new Xh(this.manager);return g.setCrossOrigin(this.crossOrigin),g.setPath(this.path),g.load(e,function(_){h.image=_,h.needsUpdate=!0,void 0!==t&&t(h)},s,l),h}}class Hv extends ws{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Wt(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}class Jv extends Hv{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class H_{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=z_(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=z_();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function z_(){return(typeof performance>"u"?Date:performance).now()}const Km="\\[\\]\\.:\\/",Uy=new RegExp("["+Km+"]","g"),qm="[^"+Km+"]",Hy="[^"+Km.replace("\\.","")+"]",Jy=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",qm)+/(WCOD+)?/.source.replace("WCOD",Hy)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",qm)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",qm)+"$"),Zy=["material","materials","bones","map"];class Ky{constructor(e,t,s){const l=s||Lr.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,l)}getValue(e,t){this.bind();const l=this._bindings[this._targetGroup.nCachedObjects_];void 0!==l&&l.getValue(e,t)}setValue(e,t){const s=this._bindings;for(let l=this._targetGroup.nCachedObjects_,h=s.length;l!==h;++l)s[l].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,s=e.length;t!==s;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,s=e.length;t!==s;++t)e[t].unbind()}}let Lr=(()=>{class v{constructor(t,s,l){this.path=s,this.parsedPath=l||v.parseTrackName(s),this.node=v.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,s,l){return t&&t.isAnimationObjectGroup?new v.Composite(t,s,l):new v(t,s,l)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(Uy,"")}static parseTrackName(t){const s=Jy.exec(t);if(null===s)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const l={nodeName:s[2],objectName:s[3],objectIndex:s[4],propertyName:s[5],propertyIndex:s[6]},h=l.nodeName&&l.nodeName.lastIndexOf(".");if(void 0!==h&&-1!==h){const g=l.nodeName.substring(h+1);-1!==Zy.indexOf(g)&&(l.nodeName=l.nodeName.substring(0,h),l.objectName=g)}if(null===l.propertyName||0===l.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return l}static findNode(t,s){if(void 0===s||""===s||"."===s||-1===s||s===t.name||s===t.uuid)return t;if(t.skeleton){const l=t.skeleton.getBoneByName(s);if(void 0!==l)return l}if(t.children){const l=function(g){for(let _=0;_<g.length;_++){const b=g[_];if(b.name===s||b.uuid===s)return b;const x=l(b.children);if(x)return x}return null},h=l(t.children);if(h)return h}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,s){t[s]=this.targetObject[this.propertyName]}_getValue_array(t,s){const l=this.resolvedProperty;for(let h=0,g=l.length;h!==g;++h)t[s++]=l[h]}_getValue_arrayElement(t,s){t[s]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,s){this.resolvedProperty.toArray(t,s)}_setValue_direct(t,s){this.targetObject[this.propertyName]=t[s]}_setValue_direct_setNeedsUpdate(t,s){this.targetObject[this.propertyName]=t[s],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,s){this.targetObject[this.propertyName]=t[s],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,s){const l=this.resolvedProperty;for(let h=0,g=l.length;h!==g;++h)l[h]=t[s++]}_setValue_array_setNeedsUpdate(t,s){const l=this.resolvedProperty;for(let h=0,g=l.length;h!==g;++h)l[h]=t[s++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,s){const l=this.resolvedProperty;for(let h=0,g=l.length;h!==g;++h)l[h]=t[s++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,s){this.resolvedProperty[this.propertyIndex]=t[s]}_setValue_arrayElement_setNeedsUpdate(t,s){this.resolvedProperty[this.propertyIndex]=t[s],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,s){this.resolvedProperty[this.propertyIndex]=t[s],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,s){this.resolvedProperty.fromArray(t,s)}_setValue_fromArray_setNeedsUpdate(t,s){this.resolvedProperty.fromArray(t,s),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,s){this.resolvedProperty.fromArray(t,s),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,s){this.bind(),this.getValue(t,s)}_setValue_unbound(t,s){this.bind(),this.setValue(t,s)}bind(){let t=this.node;const s=this.parsedPath,l=s.objectName,h=s.propertyName;let g=s.propertyIndex;if(t||(t=v.findNode(this.rootNode,s.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(l){let S=s.objectIndex;switch(l){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let A=0;A<t.length;A++)if(t[A].name===S){S=A;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);t=t.material.map;break;default:if(void 0===t[l])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[l]}if(void 0!==S){if(void 0===t[S])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[S]}}const _=t[h];if(void 0===_)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+s.nodeName+"."+h+" but it wasn't found.",t);let b=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?b=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(b=this.Versioning.MatrixWorldNeedsUpdate);let x=this.BindingType.Direct;if(void 0!==g){if("morphTargetInfluences"===h){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[g]&&(g=t.morphTargetDictionary[g])}x=this.BindingType.ArrayElement,this.resolvedProperty=_,this.propertyIndex=g}else void 0!==_.fromArray&&void 0!==_.toArray?(x=this.BindingType.HasFromToArray,this.resolvedProperty=_):Array.isArray(_)?(x=this.BindingType.EntireArray,this.resolvedProperty=_):this.propertyName=h;this.getValue=this.GetterByBindingType[x],this.setValue=this.SetterByBindingTypeAndVersioning[x][b]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return v.Composite=Ky,v})();Lr.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Lr.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Lr.prototype.GetterByBindingType=[Lr.prototype._getValue_direct,Lr.prototype._getValue_array,Lr.prototype._getValue_arrayElement,Lr.prototype._getValue_toArray],Lr.prototype.SetterByBindingTypeAndVersioning=[[Lr.prototype._setValue_direct,Lr.prototype._setValue_direct_setNeedsUpdate,Lr.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Lr.prototype._setValue_array,Lr.prototype._setValue_array_setNeedsUpdate,Lr.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Lr.prototype._setValue_arrayElement,Lr.prototype._setValue_arrayElement_setNeedsUpdate,Lr.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Lr.prototype._setValue_fromArray,Lr.prototype._setValue_fromArray_setNeedsUpdate,Lr.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]],new Float32Array(1);class oy{constructor(e,t,s=0,l=1/0){this.ray=new si(e,t),this.near=s,this.far=l,this.camera=null,this.layers=new qi,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,s=[]){return Xm(e,this,s,t),s.sort(Y_),s}intersectObjects(e,t=!0,s=[]){for(let l=0,h=e.length;l<h;l++)Xm(e[l],this,s,t);return s.sort(Y_),s}}function Y_(v,e){return v.distance-e.distance}function Xm(v,e,t,s){if(v.layers.test(e.layers)&&v.raycast(e,t),!0===s){const l=v.children;for(let h=0,g=l.length;h<g;h++)Xm(l[h],e,t,!0)}}class a0 extends Nm{constructor(e=10,t=10,s=4473924,l=8947848){s=new Wt(s),l=new Wt(l);const h=t/2,g=e/t,_=e/2,b=[],x=[];for(let E=0,L=0,G=-_;E<=t;E++,G+=g){b.push(-_,0,G,_,0,G),b.push(G,0,-_,G,0,_);const j=E===h?s:l;j.toArray(x,L),L+=3,j.toArray(x,L),L+=3,j.toArray(x,L),L+=3,j.toArray(x,L),L+=3}const S=new Zn;S.setAttribute("position",new dn(b,3)),S.setAttribute("color",new dn(x,3)),super(S,new Co({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:K}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=K)},5861:(pn,Ze,te)=>{function a(ge,Se,xe,Re,Oe,_t,Je){try{var Fe=ge[_t](Je),ke=Fe.value}catch(Ke){return void xe(Ke)}Fe.done?Se(ke):Promise.resolve(ke).then(Re,Oe)}function K(ge){return function(){var Se=this,xe=arguments;return new Promise(function(Re,Oe){var _t=ge.apply(Se,xe);function Je(ke){a(_t,Re,Oe,Je,Fe,"next",ke)}function Fe(ke){a(_t,Re,Oe,Je,Fe,"throw",ke)}Je(void 0)})}}te.d(Ze,{Z:()=>K})}},pn=>{pn(pn.s=8014)}]);