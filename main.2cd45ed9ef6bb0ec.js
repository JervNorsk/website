"use strict";(self.webpackChunkjervnorsk_website_frontend=self.webpackChunkjervnorsk_website_frontend||[]).push([[179],{113:()=>{function Pt(n){return"function"==typeof n}function Pc(n){const e=n(i=>{Error.call(i),i.stack=(new Error).stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}const Xd=Pc(n=>function(e){n(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((i,r)=>`${r+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e});function Na(n,t){if(n){const e=n.indexOf(t);0<=e&&n.splice(e,1)}}class Xi{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;const{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(const s of e)s.remove(this);else e.remove(this);const{initialTeardown:i}=this;if(Pt(i))try{i()}catch(s){t=s instanceof Xd?s.errors:[s]}const{_finalizers:r}=this;if(r){this._finalizers=null;for(const s of r)try{_T(s)}catch(o){t=t??[],o instanceof Xd?t=[...t,...o.errors]:t.push(o)}}if(t)throw new Xd(t)}}add(t){var e;if(t&&t!==this)if(this.closed)_T(t);else{if(t instanceof Xi){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(e=this._finalizers)&&void 0!==e?e:[]).push(t)}}_hasParent(t){const{_parentage:e}=this;return e===t||Array.isArray(e)&&e.includes(t)}_addParent(t){const{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t}_removeParent(t){const{_parentage:e}=this;e===t?this._parentage=null:Array.isArray(e)&&Na(e,t)}remove(t){const{_finalizers:e}=this;e&&Na(e,t),t instanceof Xi&&t._removeParent(this)}}Xi.EMPTY=(()=>{const n=new Xi;return n.closed=!0,n})();const mT=Xi.EMPTY;function gT(n){return n instanceof Xi||n&&"closed"in n&&Pt(n.remove)&&Pt(n.add)&&Pt(n.unsubscribe)}function _T(n){Pt(n)?n():n.unsubscribe()}const Do={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Yd={setTimeout(n,t,...e){const{delegate:i}=Yd;return i?.setTimeout?i.setTimeout(n,t,...e):setTimeout(n,t,...e)},clearTimeout(n){const{delegate:t}=Yd;return(t?.clearTimeout||clearTimeout)(n)},delegate:void 0};function vT(n){Yd.setTimeout(()=>{const{onUnhandledError:t}=Do;if(!t)throw n;t(n)})}function Fa(){}const vN=zm("C",void 0,void 0);function zm(n,t,e){return{kind:n,value:t,error:e}}let Ro=null;function Jd(n){if(Do.useDeprecatedSynchronousErrorHandling){const t=!Ro;if(t&&(Ro={errorThrown:!1,error:null}),n(),t){const{errorThrown:e,error:i}=Ro;if(Ro=null,e)throw i}}else n()}class Wm extends Xi{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,gT(t)&&t.add(this)):this.destination=DN}static create(t,e,i){return new Oc(t,e,i)}next(t){this.isStopped?qm(function bN(n){return zm("N",n,void 0)}(t),this):this._next(t)}error(t){this.isStopped?qm(function yN(n){return zm("E",void 0,n)}(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?qm(vN,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const MN=Function.prototype.bind;function $m(n,t){return MN.call(n,t)}class xN{constructor(t){this.partialObserver=t}next(t){const{partialObserver:e}=this;if(e.next)try{e.next(t)}catch(i){Zd(i)}}error(t){const{partialObserver:e}=this;if(e.error)try{e.error(t)}catch(i){Zd(i)}else Zd(t)}complete(){const{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(e){Zd(e)}}}class Oc extends Wm{constructor(t,e,i){let r;if(super(),Pt(t)||!t)r={next:t??void 0,error:e??void 0,complete:i??void 0};else{let s;this&&Do.useDeprecatedNextContext?(s=Object.create(t),s.unsubscribe=()=>this.unsubscribe(),r={next:t.next&&$m(t.next,s),error:t.error&&$m(t.error,s),complete:t.complete&&$m(t.complete,s)}):r=t}this.destination=new xN(r)}}function Zd(n){Do.useDeprecatedSynchronousErrorHandling?function TN(n){Do.useDeprecatedSynchronousErrorHandling&&Ro&&(Ro.errorThrown=!0,Ro.error=n)}(n):vT(n)}function qm(n,t){const{onStoppedNotification:e}=Do;e&&Yd.setTimeout(()=>e(n,t))}const DN={closed:!0,next:Fa,error:function wN(n){throw n},complete:Fa},Km="function"==typeof Symbol&&Symbol.observable||"@@observable";function ys(n){return n}function yT(n){return 0===n.length?ys:1===n.length?n[0]:function(e){return n.reduce((i,r)=>r(i),e)}}let Qt=(()=>{class n{constructor(e){e&&(this._subscribe=e)}lift(e){const i=new n;return i.source=this,i.operator=e,i}subscribe(e,i,r){const s=function CN(n){return n&&n instanceof Wm||function SN(n){return n&&Pt(n.next)&&Pt(n.error)&&Pt(n.complete)}(n)&&gT(n)}(e)?e:new Oc(e,i,r);return Jd(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(e){try{return this._subscribe(e)}catch(i){e.error(i)}}forEach(e,i){return new(i=bT(i))((r,s)=>{const o=new Oc({next:a=>{try{e(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:r});this.subscribe(o)})}_subscribe(e){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(e)}[Km](){return this}pipe(...e){return yT(e)(this)}toPromise(e){return new(e=bT(e))((i,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>i(s))})}}return n.create=t=>new n(t),n})();function bT(n){var t;return null!==(t=n??Do.Promise)&&void 0!==t?t:Promise}const EN=Pc(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Kt=(()=>{class n extends Qt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){const i=new TT(this,this);return i.operator=e,i}_throwIfClosed(){if(this.closed)throw new EN}next(e){Jd(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const i of this.currentObservers)i.next(e)}})}error(e){Jd(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;const{observers:i}=this;for(;i.length;)i.shift().error(e)}})}complete(){Jd(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){const{hasError:i,isStopped:r,observers:s}=this;return i||r?mT:(this.currentObservers=null,s.push(e),new Xi(()=>{this.currentObservers=null,Na(s,e)}))}_checkFinalizedStatuses(e){const{hasError:i,thrownError:r,isStopped:s}=this;i?e.error(r):s&&e.complete()}asObservable(){const e=new Qt;return e.source=this,e}}return n.create=(t,e)=>new TT(t,e),n})();class TT extends Kt{constructor(t,e){super(),this.destination=t,this.source=e}next(t){var e,i;null===(i=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===i||i.call(e,t)}error(t){var e,i;null===(i=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===i||i.call(e,t)}complete(){var t,e;null===(e=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===e||e.call(t)}_subscribe(t){var e,i;return null!==(i=null===(e=this.source)||void 0===e?void 0:e.subscribe(t))&&void 0!==i?i:mT}}function MT(n){return Pt(n?.lift)}function Tn(n){return t=>{if(MT(t))return t.lift(function(e){try{return n(e,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function en(n,t,e,i,r){return new AN(n,t,e,i,r)}class AN extends Wm{constructor(t,e,i,r,s,o){super(t),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=e?function(a){try{e(a)}catch(l){t.error(l)}}:super._next,this._error=r?function(a){try{r(a)}catch(l){t.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:e}=this;super.unsubscribe(),!e&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}}function tt(n,t){return Tn((e,i)=>{let r=0;e.subscribe(en(i,s=>{i.next(n.call(t,s,r++))}))})}function So(n){return this instanceof So?(this.v=n,this):new So(n)}function NN(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,t=n[Symbol.asyncIterator];return t?t.call(n):(n=function DT(n){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&n[t],i=0;if(e)return e.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e);function i(s){e[s]=n[s]&&function(o){return new Promise(function(a,l){!function r(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}(a,l,(o=n[s](o)).done,o.value)})}}}const Ym=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function RT(n){return Pt(n?.then)}function ST(n){return Pt(n[Km])}function CT(n){return Symbol.asyncIterator&&Pt(n?.[Symbol.asyncIterator])}function ET(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const AT=function LN(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function IT(n){return Pt(n?.[AT])}function PT(n){return function ON(n,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=e.apply(n,t||[]),s=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(h){i[h]&&(r[h]=function(f){return new Promise(function(m,p){s.push([h,f,m,p])>1||a(h,f)})})}function a(h,f){try{!function l(h){h.value instanceof So?Promise.resolve(h.value.v).then(c,u):d(s[0][2],h)}(i[h](f))}catch(m){d(s[0][3],m)}}function c(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),s.shift(),s.length&&a(s[0][0],s[0][1])}}(this,arguments,function*(){const e=n.getReader();try{for(;;){const{value:i,done:r}=yield So(e.read());if(r)return yield So(void 0);yield yield So(i)}}finally{e.releaseLock()}})}function OT(n){return Pt(n?.getReader)}function Hn(n){if(n instanceof Qt)return n;if(null!=n){if(ST(n))return function BN(n){return new Qt(t=>{const e=n[Km]();if(Pt(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(Ym(n))return function jN(n){return new Qt(t=>{for(let e=0;e<n.length&&!t.closed;e++)t.next(n[e]);t.complete()})}(n);if(RT(n))return function kN(n){return new Qt(t=>{n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,vT)})}(n);if(CT(n))return NT(n);if(IT(n))return function GN(n){return new Qt(t=>{for(const e of n)if(t.next(e),t.closed)return;t.complete()})}(n);if(OT(n))return function VN(n){return NT(PT(n))}(n)}throw ET(n)}function NT(n){return new Qt(t=>{(function UN(n,t){var e,i,r,s;return function IN(n,t,e,i){return new(e||(e=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(d){o(d)}}function l(u){try{c(i.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):function r(s){return s instanceof e?s:new e(function(o){o(s)})}(u.value).then(a,l)}c((i=i.apply(n,t||[])).next())})}(this,void 0,void 0,function*(){try{for(e=NN(n);!(i=yield e.next()).done;)if(t.next(i.value),t.closed)return}catch(o){r={error:o}}finally{try{i&&!i.done&&(s=e.return)&&(yield s.call(e))}finally{if(r)throw r.error}}t.complete()})})(n,t).catch(e=>t.error(e))})}function bs(n,t,e,i=0,r=!1){const s=t.schedule(function(){e(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(s),!r)return s}function zn(n,t,e=1/0){return Pt(t)?zn((i,r)=>tt((s,o)=>t(i,s,r,o))(Hn(n(i,r))),e):("number"==typeof t&&(e=t),Tn((i,r)=>function HN(n,t,e,i,r,s,o,a){const l=[];let c=0,u=0,d=!1;const h=()=>{d&&!l.length&&!c&&t.complete()},f=p=>c<i?m(p):l.push(p),m=p=>{s&&t.next(p),c++;let g=!1;Hn(e(p,u++)).subscribe(en(t,v=>{r?.(v),s?f(v):t.next(v)},()=>{g=!0},void 0,()=>{if(g)try{for(c--;l.length&&c<i;){const v=l.shift();o?bs(t,o,()=>m(v)):m(v)}h()}catch(v){t.error(v)}}))};return n.subscribe(en(t,f,()=>{d=!0,h()})),()=>{a?.()}}(i,r,n,e)))}function La(n=1/0){return zn(ys,n)}const vr=new Qt(n=>n.complete());function FT(n){return n&&Pt(n.schedule)}function Jm(n){return n[n.length-1]}function Qd(n){return Pt(Jm(n))?n.pop():void 0}function Nc(n){return FT(Jm(n))?n.pop():void 0}function LT(n,t=0){return Tn((e,i)=>{e.subscribe(en(i,r=>bs(i,n,()=>i.next(r),t),()=>bs(i,n,()=>i.complete(),t),r=>bs(i,n,()=>i.error(r),t)))})}function BT(n,t=0){return Tn((e,i)=>{i.add(n.schedule(()=>e.subscribe(i),t))})}function jT(n,t){if(!n)throw new Error("Iterable cannot be null");return new Qt(e=>{bs(e,t,()=>{const i=n[Symbol.asyncIterator]();bs(e,t,()=>{i.next().then(r=>{r.done?e.complete():e.next(r.value)})},0,!0)})})}function Pn(n,t){return t?function JN(n,t){if(null!=n){if(ST(n))return function $N(n,t){return Hn(n).pipe(BT(t),LT(t))}(n,t);if(Ym(n))return function KN(n,t){return new Qt(e=>{let i=0;return t.schedule(function(){i===n.length?e.complete():(e.next(n[i++]),e.closed||this.schedule())})})}(n,t);if(RT(n))return function qN(n,t){return Hn(n).pipe(BT(t),LT(t))}(n,t);if(CT(n))return jT(n,t);if(IT(n))return function XN(n,t){return new Qt(e=>{let i;return bs(e,t,()=>{i=n[AT](),bs(e,t,()=>{let r,s;try{({value:r,done:s}=i.next())}catch(o){return void e.error(o)}s?e.complete():e.next(r)},0,!0)}),()=>Pt(i?.return)&&i.return()})}(n,t);if(OT(n))return function YN(n,t){return jT(PT(n),t)}(n,t)}throw ET(n)}(n,t):Hn(n)}function kT(...n){const t=Nc(n),e=function WN(n,t){return"number"==typeof Jm(n)?n.pop():t}(n,1/0),i=n;return i.length?1===i.length?Hn(i[0]):La(e)(Pn(i,t)):vr}function Zm(n,t,...e){if(!0===t)return void n();if(!1===t)return;const i=new Oc({next:()=>{i.unsubscribe(),n()}});return Hn(t(...e)).subscribe(i)}function Jt(n){for(let t in n)if(n[t]===Jt)return t;throw Error("Could not find renamed property on target object.")}function Qm(n,t){for(const e in t)t.hasOwnProperty(e)&&!n.hasOwnProperty(e)&&(n[e]=t[e])}function tn(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(tn).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const t=n.toString();if(null==t)return""+t;const e=t.indexOf("\n");return-1===e?t:t.substring(0,e)}function eg(n,t){return null==n||""===n?null===t?"":t:null==t||""===t?n:n+" "+t}const QN=Jt({__forward_ref__:Jt});function Oe(n){return n.__forward_ref__=Oe,n.toString=function(){return tn(this())},n}function We(n){return tg(n)?n():n}function tg(n){return"function"==typeof n&&n.hasOwnProperty(QN)&&n.__forward_ref__===Oe}function ng(n){return n&&!!n.\u0275providers}class oe extends Error{constructor(t,e){super(eh(t,e)),this.code=t}}function eh(n,t){return`NG0${Math.abs(n)}${t?": "+t.trim():""}`}function nt(n){return"string"==typeof n?n:null==n?"":String(n)}function th(n,t){throw new oe(-201,!1)}function Ut(n,t,e,i){throw new Error(`ASSERTION ERROR: ${n}`+(null==i?"":` [Expected=> ${e} ${i} ${t} <=Actual]`))}function de(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function jt(n){return{providers:n.providers||[],imports:n.imports||[]}}function nh(n){return VT(n,ih)||VT(n,HT)}function VT(n,t){return n.hasOwnProperty(t)?n[t]:null}function UT(n){return n&&(n.hasOwnProperty(ig)||n.hasOwnProperty(lF))?n[ig]:null}const ih=Jt({\u0275prov:Jt}),ig=Jt({\u0275inj:Jt}),HT=Jt({ngInjectableDef:Jt}),lF=Jt({ngInjectorDef:Jt});var $e=(()=>(($e=$e||{})[$e.Default=0]="Default",$e[$e.Host=1]="Host",$e[$e.Self=2]="Self",$e[$e.SkipSelf=4]="SkipSelf",$e[$e.Optional=8]="Optional",$e))();let rg;function br(n){const t=rg;return rg=n,t}function zT(n,t,e){const i=nh(n);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:e&$e.Optional?null:void 0!==t?t:void th(tn(n))}const sn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Fc={},sg="__NG_DI_FLAG__",rh="ngTempTokenPath",uF="ngTokenPath",dF=/\n/gm,hF="\u0275",WT="__source";let Lc;function Ba(n){const t=Lc;return Lc=n,t}function fF(n,t=$e.Default){if(void 0===Lc)throw new oe(-203,!1);return null===Lc?zT(n,void 0,t):Lc.get(n,t&$e.Optional?null:void 0,t)}function ye(n,t=$e.Default){return(function cF(){return rg}()||fF)(We(n),t)}function gt(n,t=$e.Default){return ye(n,sh(t))}function sh(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function og(n){const t=[];for(let e=0;e<n.length;e++){const i=We(n[e]);if(Array.isArray(i)){if(0===i.length)throw new oe(900,!1);let r,s=$e.Default;for(let o=0;o<i.length;o++){const a=i[o],l=pF(a);"number"==typeof l?-1===l?r=a.token:s|=l:r=a}t.push(ye(r,s))}else t.push(ye(i))}return t}function Bc(n,t){return n[sg]=t,n.prototype[sg]=t,n}function pF(n){return n[sg]}function Ts(n){return{toString:n}.toString()}var es=(()=>((es=es||{})[es.OnPush=0]="OnPush",es[es.Default=1]="Default",es))(),ts=(()=>{return(n=ts||(ts={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",ts;var n})();const Ms={},kt=[],oh=Jt({\u0275cmp:Jt}),ag=Jt({\u0275dir:Jt}),lg=Jt({\u0275pipe:Jt}),qT=Jt({\u0275mod:Jt}),xs=Jt({\u0275fac:Jt}),jc=Jt({__NG_ELEMENT_ID__:Jt});let _F=0;function Tt(n){return Ts(()=>{const t=XT(n),e={...t,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===es.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&n.dependencies||null,getStandaloneInjector:null,data:n.data||{},encapsulation:n.encapsulation||ts.Emulated,id:"c"+_F++,styles:n.styles||kt,_:null,schemas:n.schemas||null,tView:null};YT(e);const i=n.dependencies;return e.directiveDefs=ah(i,!1),e.pipeDefs=ah(i,!0),e})}function yF(n){return zt(n)||mi(n)}function bF(n){return null!==n}function Ht(n){return Ts(()=>({type:n.type,bootstrap:n.bootstrap||kt,declarations:n.declarations||kt,imports:n.imports||kt,exports:n.exports||kt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function KT(n,t){if(null==n)return Ms;const e={};for(const i in n)if(n.hasOwnProperty(i)){let r=n[i],s=r;Array.isArray(r)&&(s=r[1],r=r[0]),e[r]=i,t&&(t[r]=s)}return e}function he(n){return Ts(()=>{const t=XT(n);return YT(t),t})}function Li(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function zt(n){return n[oh]||null}function mi(n){return n[ag]||null}function Bi(n){return n[lg]||null}function Ji(n,t){const e=n[qT]||null;if(!e&&!0===t)throw new Error(`Type ${tn(n)} does not have '\u0275mod' property.`);return e}function XT(n){const t={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:t,exportAs:n.exportAs||null,standalone:!0===n.standalone,selectors:n.selectors||kt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:KT(n.inputs,t),outputs:KT(n.outputs)}}function YT(n){n.features?.forEach(t=>t(n))}function ah(n,t){if(!n)return null;const e=t?Bi:yF;return()=>("function"==typeof n?n():n).map(i=>e(i)).filter(bF)}const ws=0,Se=1,ct=2,Mn=3,Lr=4,Co=5,gi=6,ka=7,Sn=8,lh=9,ch=10,ht=11,cg=12,kc=13,JT=14,Ga=15,_i=16,Gc=17,Va=18,ns=19,Vc=20,ZT=21,on=22,ug=1,QT=2,uh=7,dh=8,Ua=9,xi=10;function Zi(n){return Array.isArray(n)&&"object"==typeof n[ug]}function Br(n){return Array.isArray(n)&&!0===n[ug]}function dg(n){return 0!=(4&n.flags)}function Uc(n){return n.componentOffset>-1}function hh(n){return 1==(1&n.flags)}function jr(n){return!!n.template}function MF(n){return 0!=(256&n[ct])}function Eo(n,t){return n.hasOwnProperty(xs)?n[xs]:null}class DF{constructor(t,e,i){this.previousValue=t,this.currentValue=e,this.firstChange=i}isFirstChange(){return this.firstChange}}function gn(){return nM}function nM(n){return n.type.prototype.ngOnChanges&&(n.setInput=SF),RF}function RF(){const n=rM(this),t=n?.current;if(t){const e=n.previous;if(e===Ms)n.previous=t;else for(let i in t)e[i]=t[i];n.current=null,this.ngOnChanges(t)}}function SF(n,t,e,i){const r=this.declaredInputs[e],s=rM(n)||function CF(n,t){return n[iM]=t}(n,{previous:Ms,current:null}),o=s.current||(s.current={}),a=s.previous,l=a[r];o[r]=new DF(l&&l.currentValue,t,a===Ms),n[i]=t}gn.ngInherit=!0;const iM="__ngSimpleChanges__";function rM(n){return n[iM]||null}const Tr=function(n,t,e){};function ai(n){for(;Array.isArray(n);)n=n[ws];return n}function fh(n,t){return ai(t[n])}function Qi(n,t){return ai(t[n.index])}function aM(n,t){return n.data[t]}function Ha(n,t){return n[t]}function ji(n,t){const e=t[n];return Zi(e)?e:e[ws]}function ph(n){return 64==(64&n[ct])}function Xs(n,t){return null==t?null:n[t]}function lM(n){n[Va]=0}function fg(n,t){n[Co]+=t;let e=n,i=n[Mn];for(;null!==i&&(1===t&&1===e[Co]||-1===t&&0===e[Co]);)i[Co]+=t,e=i,i=i[Mn]}const it={lFrame:vM(null),bindingsEnabled:!0};function uM(){return it.bindingsEnabled}function Z(){return it.lFrame.lView}function St(){return it.lFrame.tView}function Wt(n){return it.lFrame.contextLView=n,n[Sn]}function $t(n){return it.lFrame.contextLView=null,n}function li(){let n=dM();for(;null!==n&&64===n.type;)n=n.parent;return n}function dM(){return it.lFrame.currentTNode}function Hc(){const n=it.lFrame,t=n.currentTNode;return n.isParent?t:t.parent}function is(n,t){const e=it.lFrame;e.currentTNode=n,e.isParent=t}function pg(){return it.lFrame.isParent}function mg(){it.lFrame.isParent=!1}function wi(){const n=it.lFrame;let t=n.bindingRootIndex;return-1===t&&(t=n.bindingRootIndex=n.tView.bindingStartIndex),t}function Ds(){return it.lFrame.bindingIndex}function za(){return it.lFrame.bindingIndex++}function Rs(n){const t=it.lFrame,e=t.bindingIndex;return t.bindingIndex=t.bindingIndex+n,e}function pM(n){it.lFrame.inI18n=n}function VF(n,t){const e=it.lFrame;e.bindingIndex=e.bindingRootIndex=n,gg(t)}function gg(n){it.lFrame.currentDirectiveIndex=n}function mM(){return it.lFrame.currentQueryIndex}function vg(n){it.lFrame.currentQueryIndex=n}function HF(n){const t=n[Se];return 2===t.type?t.declTNode:1===t.type?n[gi]:null}function gM(n,t,e){if(e&$e.SkipSelf){let r=t,s=n;for(;!(r=r.parent,null!==r||e&$e.Host||(r=HF(s),null===r||(s=s[Ga],10&r.type))););if(null===r)return!1;t=r,n=s}const i=it.lFrame=_M();return i.currentTNode=t,i.lView=n,!0}function yg(n){const t=_M(),e=n[Se];it.lFrame=t,t.currentTNode=e.firstChild,t.lView=n,t.tView=e,t.contextLView=n,t.bindingIndex=e.bindingStartIndex,t.inI18n=!1}function _M(){const n=it.lFrame,t=null===n?null:n.child;return null===t?vM(n):t}function vM(n){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=t),t}function yM(){const n=it.lFrame;return it.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const bM=yM;function bg(){const n=yM();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Di(){return it.lFrame.selectedIndex}function Ao(n){it.lFrame.selectedIndex=n}function _n(){const n=it.lFrame;return aM(n.tView,n.selectedIndex)}function mh(n,t){for(let e=t.directiveStart,i=t.directiveEnd;e<i;e++){const s=n.data[e].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=s;o&&(n.contentHooks??(n.contentHooks=[])).push(-e,o),a&&((n.contentHooks??(n.contentHooks=[])).push(e,a),(n.contentCheckHooks??(n.contentCheckHooks=[])).push(e,a)),l&&(n.viewHooks??(n.viewHooks=[])).push(-e,l),c&&((n.viewHooks??(n.viewHooks=[])).push(e,c),(n.viewCheckHooks??(n.viewCheckHooks=[])).push(e,c)),null!=u&&(n.destroyHooks??(n.destroyHooks=[])).push(e,u)}}function gh(n,t,e){TM(n,t,3,e)}function _h(n,t,e,i){(3&n[ct])===e&&TM(n,t,e,i)}function Tg(n,t){let e=n[ct];(3&e)===t&&(e&=2047,e+=1,n[ct]=e)}function TM(n,t,e,i){const s=i??-1,o=t.length-1;let a=0;for(let l=void 0!==i?65535&n[Va]:0;l<o;l++)if("number"==typeof t[l+1]){if(a=t[l],null!=i&&a>=i)break}else t[l]<0&&(n[Va]+=65536),(a<s||-1==s)&&(ZF(n,e,t,l),n[Va]=(4294901760&n[Va])+l+2),l++}function ZF(n,t,e,i){const r=e[i]<0,s=e[i+1],a=n[r?-e[i]:e[i]];if(r){if(n[ct]>>11<n[Va]>>16&&(3&n[ct])===t){n[ct]+=2048,Tr(4,a,s);try{s.call(a)}finally{Tr(5,a,s)}}}else{Tr(4,a,s);try{s.call(a)}finally{Tr(5,a,s)}}}const Wa=-1;class zc{constructor(t,e,i){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=i}}function xg(n,t,e){let i=0;for(;i<e.length;){const r=e[i];if("number"==typeof r){if(0!==r)break;i++;const s=e[i++],o=e[i++],a=e[i++];n.setAttribute(t,o,a,s)}else{const s=r,o=e[++i];xM(s)?n.setProperty(t,s,o):n.setAttribute(t,s,o),i++}}return i}function MM(n){return 3===n||4===n||6===n}function xM(n){return 64===n.charCodeAt(0)}function Wc(n,t){if(null!==t&&0!==t.length)if(null===n||0===n.length)n=t.slice();else{let e=-1;for(let i=0;i<t.length;i++){const r=t[i];"number"==typeof r?e=r:0===e||wM(n,e,r,null,-1===e||2===e?t[++i]:null)}}return n}function wM(n,t,e,i,r){let s=0,o=n.length;if(-1===t)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===t){o=-1;break}if(a>t){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===e){if(null===i)return void(null!==r&&(n[s+1]=r));if(i===n[s+1])return void(n[s+2]=r)}s++,null!==i&&s++,null!==r&&s++}-1!==o&&(n.splice(o,0,t),s=o+1),n.splice(s++,0,e),null!==i&&n.splice(s++,0,i),null!==r&&n.splice(s++,0,r)}function DM(n){return n!==Wa}function vh(n){return 32767&n}function yh(n,t){let e=function nL(n){return n>>16}(n),i=t;for(;e>0;)i=i[Ga],e--;return i}let wg=!0;function bh(n){const t=wg;return wg=n,t}const RM=255,SM=5;let iL=0;const rs={};function Th(n,t){const e=CM(n,t);if(-1!==e)return e;const i=t[Se];i.firstCreatePass&&(n.injectorIndex=t.length,Dg(i.data,n),Dg(t,null),Dg(i.blueprint,null));const r=Rg(n,t),s=n.injectorIndex;if(DM(r)){const o=vh(r),a=yh(r,t),l=a[Se].data;for(let c=0;c<8;c++)t[s+c]=a[o+c]|l[o+c]}return t[s+8]=r,s}function Dg(n,t){n.push(0,0,0,0,0,0,0,0,t)}function CM(n,t){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===t[n.injectorIndex+8]?-1:n.injectorIndex}function Rg(n,t){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let e=0,i=null,r=t;for(;null!==r;){if(i=FM(r),null===i)return Wa;if(e++,r=r[Ga],-1!==i.injectorIndex)return i.injectorIndex|e<<16}return Wa}function Sg(n,t,e){!function rL(n,t,e){let i;"string"==typeof e?i=e.charCodeAt(0)||0:e.hasOwnProperty(jc)&&(i=e[jc]),null==i&&(i=e[jc]=iL++);const r=i&RM;t.data[n+(r>>SM)]|=1<<r}(n,t,e)}function EM(n,t,e){if(e&$e.Optional||void 0!==n)return n;th()}function AM(n,t,e,i){if(e&$e.Optional&&void 0===i&&(i=null),!(e&($e.Self|$e.Host))){const r=n[lh],s=br(void 0);try{return r?r.get(t,i,e&$e.Optional):zT(t,i,e&$e.Optional)}finally{br(s)}}return EM(i,0,e)}function IM(n,t,e,i=$e.Default,r){if(null!==n){if(1024&t[ct]){const o=function cL(n,t,e,i,r){let s=n,o=t;for(;null!==s&&null!==o&&1024&o[ct]&&!(256&o[ct]);){const a=PM(s,o,e,i|$e.Self,rs);if(a!==rs)return a;let l=s.parent;if(!l){const c=o[ZT];if(c){const u=c.get(e,rs,i);if(u!==rs)return u}l=FM(o),o=o[Ga]}s=l}return r}(n,t,e,i,rs);if(o!==rs)return o}const s=PM(n,t,e,i,rs);if(s!==rs)return s}return AM(t,e,i,r)}function PM(n,t,e,i,r){const s=function aL(n){if("string"==typeof n)return n.charCodeAt(0)||0;const t=n.hasOwnProperty(jc)?n[jc]:void 0;return"number"==typeof t?t>=0?t&RM:lL:t}(e);if("function"==typeof s){if(!gM(t,n,i))return i&$e.Host?EM(r,0,i):AM(t,e,i,r);try{const o=s(i);if(null!=o||i&$e.Optional)return o;th()}finally{bM()}}else if("number"==typeof s){let o=null,a=CM(n,t),l=Wa,c=i&$e.Host?t[_i][gi]:null;for((-1===a||i&$e.SkipSelf)&&(l=-1===a?Rg(n,t):t[a+8],l!==Wa&&NM(i,!1)?(o=t[Se],a=vh(l),t=yh(l,t)):a=-1);-1!==a;){const u=t[Se];if(OM(s,a,u.data)){const d=oL(a,t,e,o,i,c);if(d!==rs)return d}l=t[a+8],l!==Wa&&NM(i,t[Se].data[a+8]===c)&&OM(s,a,t)?(o=u,a=vh(l),t=yh(l,t)):a=-1}}return r}function oL(n,t,e,i,r,s){const o=t[Se],a=o.data[n+8],u=Mh(a,o,e,null==i?Uc(a)&&wg:i!=o&&0!=(3&a.type),r&$e.Host&&s===a);return null!==u?Io(t,o,u,a):rs}function Mh(n,t,e,i,r){const s=n.providerIndexes,o=t.data,a=1048575&s,l=n.directiveStart,u=s>>20,h=r?a+u:n.directiveEnd;for(let f=i?a:a+u;f<h;f++){const m=o[f];if(f<l&&e===m||f>=l&&m.type===e)return f}if(r){const f=o[l];if(f&&jr(f)&&f.type===e)return l}return null}function Io(n,t,e,i){let r=n[e];const s=t.data;if(function QF(n){return n instanceof zc}(r)){const o=r;o.resolving&&function eF(n,t){const e=t?`. Dependency path: ${t.join(" > ")} > ${n}`:"";throw new oe(-200,`Circular dependency in DI detected for ${n}${e}`)}(function Vt(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():nt(n)}(s[e]));const a=bh(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?br(o.injectImpl):null;gM(n,i,$e.Default);try{r=n[e]=o.factory(void 0,s,n,i),t.firstCreatePass&&e>=i.directiveStart&&function JF(n,t,e){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=t.type.prototype;if(i){const o=nM(t);(e.preOrderHooks??(e.preOrderHooks=[])).push(n,o),(e.preOrderCheckHooks??(e.preOrderCheckHooks=[])).push(n,o)}r&&(e.preOrderHooks??(e.preOrderHooks=[])).push(0-n,r),s&&((e.preOrderHooks??(e.preOrderHooks=[])).push(n,s),(e.preOrderCheckHooks??(e.preOrderCheckHooks=[])).push(n,s))}(e,s[e],t)}finally{null!==l&&br(l),bh(a),o.resolving=!1,bM()}}return r}function OM(n,t,e){return!!(e[t+(n>>SM)]&1<<n)}function NM(n,t){return!(n&$e.Self||n&$e.Host&&t)}class $a{constructor(t,e){this._tNode=t,this._lView=e}get(t,e,i){return IM(this._tNode,this._lView,t,sh(i),e)}}function lL(){return new $a(li(),Z())}function Xt(n){return Ts(()=>{const t=n.prototype.constructor,e=t[xs]||Cg(t),i=Object.prototype;let r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){const s=r[xs]||Cg(r);if(s&&s!==e)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function Cg(n){return tg(n)?()=>{const t=Cg(We(n));return t&&t()}:Eo(n)}function FM(n){const t=n[Se],e=t.type;return 2===e?t.declTNode:1===e?n[gi]:null}const Ka="__parameters__";function Ya(n,t,e){return Ts(()=>{const i=function Eg(n){return function(...e){if(n){const i=n(...e);for(const r in i)this[r]=i[r]}}}(t);function r(...s){if(this instanceof r)return i.apply(this,s),this;const o=new r(...s);return a.annotation=o,a;function a(l,c,u){const d=l.hasOwnProperty(Ka)?l[Ka]:Object.defineProperty(l,Ka,{value:[]})[Ka];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(o),l}}return e&&(r.prototype=Object.create(e.prototype)),r.prototype.ngMetadataName=n,r.annotationCls=r,r})}class Ne{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=de({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Po(n,t){n.forEach(e=>Array.isArray(e)?Po(e,t):t(e))}function BM(n,t,e){t>=n.length?n.push(e):n.splice(t,0,e)}function xh(n,t){return t>=n.length-1?n.pop():n.splice(t,1)[0]}function Kc(n,t){const e=[];for(let i=0;i<n;i++)e.push(t);return e}function er(n,t,e){let i=Ja(n,t);return i>=0?n[1|i]=e:(i=~i,function fL(n,t,e,i){let r=n.length;if(r==t)n.push(e,i);else if(1===r)n.push(i,n[0]),n[0]=e;else{for(r--,n.push(n[r-1],n[r]);r>t;)n[r]=n[r-2],r--;n[t]=e,n[t+1]=i}}(n,i,t,e)),i}function Ig(n,t){const e=Ja(n,t);if(e>=0)return n[1|e]}function Ja(n,t){return function jM(n,t,e){let i=0,r=n.length>>e;for(;r!==i;){const s=i+(r-i>>1),o=n[s<<e];if(t===o)return s<<e;o>t?r=s:i=s+1}return~(r<<e)}(n,t,1)}const Xc=Bc(Ya("Optional"),8),Yc=Bc(Ya("SkipSelf"),4);var ki=(()=>((ki=ki||{})[ki.Important=1]="Important",ki[ki.DashCase=2]="DashCase",ki))();const PL=/^>|^->|<!--|-->|--!>|<!-$/g,OL=/(<|>)/,NL="\u200b$1\u200b";const Bg=new Map;let FL=0;const kg="__ngContext__";function vi(n,t){Zi(t)?(n[kg]=t[Vc],function BL(n){Bg.set(n[Vc],n)}(t)):n[kg]=t}let Gg;function Vg(n,t){return Gg(n,t)}function eu(n){const t=n[Mn];return Br(t)?t[Mn]:t}function Ug(n){return rx(n[kc])}function Hg(n){return rx(n[Lr])}function rx(n){for(;null!==n&&!Br(n);)n=n[Lr];return n}function Qa(n,t,e,i,r){if(null!=i){let s,o=!1;Br(i)?s=i:Zi(i)&&(o=!0,i=i[ws]);const a=ai(i);0===n&&null!==e?null==r?ux(t,e,a):Oo(t,e,a,r||null,!0):1===n&&null!==e?Oo(t,e,a,r||null,!0):2===n?Yg(t,a,o):3===n&&t.destroyNode(a),null!=s&&function oB(n,t,e,i,r){const s=e[uh];s!==ai(e)&&Qa(t,n,i,s,r);for(let a=xi;a<e.length;a++){const l=e[a];tu(l[Se],l,n,t,i,s)}}(t,n,s,e,r)}}function zg(n,t){return n.createText(t)}function sx(n,t,e){n.setValue(t,e)}function KL(n,t){return n.createComment(function YM(n){return n.replace(PL,t=>t.replace(OL,NL))}(t))}function Wg(n,t,e){return n.createElement(t,e)}function ox(n,t){const e=n[Ua],i=e.indexOf(t),r=t[Mn];512&t[ct]&&(t[ct]&=-513,fg(r,-1)),e.splice(i,1)}function $g(n,t){if(n.length<=xi)return;const e=xi+t,i=n[e];if(i){const r=i[Gc];null!==r&&r!==n&&ox(r,i),t>0&&(n[e-1][Lr]=i[Lr]);const s=xh(n,xi+t);!function XL(n,t){tu(n,t,t[ht],2,null,null),t[ws]=null,t[gi]=null}(i[Se],i);const o=s[ns];null!==o&&o.detachView(s[Se]),i[Mn]=null,i[Lr]=null,i[ct]&=-65}return i}function ax(n,t){if(!(128&t[ct])){const e=t[ht];e.destroyNode&&tu(n,t,e,3,null,null),function ZL(n){let t=n[kc];if(!t)return qg(n[Se],n);for(;t;){let e=null;if(Zi(t))e=t[kc];else{const i=t[xi];i&&(e=i)}if(!e){for(;t&&!t[Lr]&&t!==n;)Zi(t)&&qg(t[Se],t),t=t[Mn];null===t&&(t=n),Zi(t)&&qg(t[Se],t),e=t&&t[Lr]}t=e}}(t)}}function qg(n,t){if(!(128&t[ct])){t[ct]&=-65,t[ct]|=128,function nB(n,t){let e;if(null!=n&&null!=(e=n.destroyHooks))for(let i=0;i<e.length;i+=2){const r=t[e[i]];if(!(r instanceof zc)){const s=e[i+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=r[s[o]],l=s[o+1];Tr(4,a,l);try{l.call(a)}finally{Tr(5,a,l)}}else{Tr(4,r,s);try{s.call(r)}finally{Tr(5,r,s)}}}}}(n,t),function tB(n,t){const e=n.cleanup,i=t[ka];let r=-1;if(null!==e)for(let s=0;s<e.length-1;s+=2)if("string"==typeof e[s]){const o=e[s+3];o>=0?i[r=o]():i[r=-o].unsubscribe(),s+=2}else{const o=i[r=e[s+1]];e[s].call(o)}if(null!==i){for(let s=r+1;s<i.length;s++)(0,i[s])();t[ka]=null}}(n,t),1===t[Se].type&&t[ht].destroy();const e=t[Gc];if(null!==e&&Br(t[Mn])){e!==t[Mn]&&ox(e,t);const i=t[ns];null!==i&&i.detachView(n)}!function jL(n){Bg.delete(n[Vc])}(t)}}function lx(n,t,e){return cx(n,t.parent,e)}function cx(n,t,e){let i=t;for(;null!==i&&40&i.type;)i=(t=i).parent;if(null===i)return e[ws];{const{componentOffset:r}=i;if(r>-1){const{encapsulation:s}=n.data[i.directiveStart+r];if(s===ts.None||s===ts.Emulated)return null}return Qi(i,e)}}function Oo(n,t,e,i,r){n.insertBefore(t,e,i,r)}function ux(n,t,e){n.appendChild(t,e)}function dx(n,t,e,i,r){null!==i?Oo(n,t,e,i,r):ux(n,t,e)}function Sh(n,t){return n.parentNode(t)}function hx(n,t,e){return px(n,t,e)}function fx(n,t,e){return 40&n.type?Qi(n,e):null}let Kg,Ah,Qg,px=fx;function mx(n,t){px=n,Kg=t}function Ch(n,t,e,i){const r=lx(n,i,t),s=t[ht],a=hx(i.parent||t[gi],i,t);if(null!=r)if(Array.isArray(e))for(let l=0;l<e.length;l++)dx(s,r,e[l],a,!1);else dx(s,r,e,a,!1);void 0!==Kg&&Kg(s,i,t,e,r)}function Eh(n,t){if(null!==t){const e=t.type;if(3&e)return Qi(t,n);if(4&e)return Xg(-1,n[t.index]);if(8&e){const i=t.child;if(null!==i)return Eh(n,i);{const r=n[t.index];return Br(r)?Xg(-1,r):ai(r)}}if(32&e)return Vg(t,n)()||ai(n[t.index]);{const i=gx(n,t);return null!==i?Array.isArray(i)?i[0]:Eh(eu(n[_i]),i):Eh(n,t.next)}}return null}function gx(n,t){return null!==t?n[_i][gi].projection[t.projection]:null}function Xg(n,t){const e=xi+n+1;if(e<t.length){const i=t[e],r=i[Se].firstChild;if(null!==r)return Eh(i,r)}return t[uh]}function Yg(n,t,e){const i=Sh(n,t);i&&function iB(n,t,e,i){n.removeChild(t,e,i)}(n,i,t,e)}function Jg(n,t,e,i,r,s,o){for(;null!=e;){const a=i[e.index],l=e.type;if(o&&0===t&&(a&&vi(ai(a),i),e.flags|=2),32!=(32&e.flags))if(8&l)Jg(n,t,e.child,i,r,s,!1),Qa(t,n,r,a,s);else if(32&l){const c=Vg(e,i);let u;for(;u=c();)Qa(t,n,r,u,s);Qa(t,n,r,a,s)}else 16&l?_x(n,t,i,e,r,s):Qa(t,n,r,a,s);e=o?e.projectionNext:e.next}}function tu(n,t,e,i,r,s){Jg(e,i,n.firstChild,t,r,s,!1)}function _x(n,t,e,i,r,s){const o=e[_i],l=o[gi].projection[i.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)Qa(t,n,r,l[c],s);else Jg(n,t,l,o[Mn],r,s,!0)}function vx(n,t,e){""===e?n.removeAttribute(t,"class"):n.setAttribute(t,"class",e)}function yx(n,t,e){const{mergedAttrs:i,classes:r,styles:s}=e;null!==i&&xg(n,t,i),null!==r&&vx(n,t,r),null!==s&&function lB(n,t,e){n.setAttribute(t,"style",e)}(n,t,s)}function el(n){return function Zg(){if(void 0===Ah&&(Ah=null,sn.trustedTypes))try{Ah=sn.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Ah}()?.createHTML(n)||n}class wx{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Js(n){return n instanceof wx?n.changingThisBreaksApplicationSecurity:n}class yB{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(el(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch{return null}}}class bB{constructor(t){this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(t){const e=this.inertDocument.createElement("template");return e.innerHTML=el(t),e}}const MB=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function t_(n){return(n=String(n)).match(MB)?n:"unsafe:"+n}function Ss(n){const t={};for(const e of n.split(","))t[e]=!0;return t}function iu(...n){const t={};for(const e of n)for(const i in e)e.hasOwnProperty(i)&&(t[i]=!0);return t}const Rx=Ss("area,br,col,hr,img,wbr"),Sx=Ss("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Cx=Ss("rp,rt"),n_=iu(Rx,iu(Sx,Ss("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),iu(Cx,Ss("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),iu(Cx,Sx)),i_=Ss("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Ex=iu(i_,Ss("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Ss("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"));const Oh=new Ne("ENVIRONMENT_INITIALIZER"),Nx=new Ne("INJECTOR",-1),Fx=new Ne("INJECTOR_DEF_TYPES");class Lx{get(t,e=Fc){if(e===Fc){const i=new Error(`NullInjectorError: No provider for ${tn(t)}!`);throw i.name="NullInjectorError",i}return e}}function FB(...n){return{\u0275providers:Bx(0,n),\u0275fromNgModule:!0}}function Bx(n,...t){const e=[],i=new Set;let r;return Po(t,s=>{const o=s;s_(o,e,[],i)&&(r||(r=[]),r.push(o))}),void 0!==r&&jx(r,e),e}function jx(n,t){for(let e=0;e<n.length;e++){const{providers:r}=n[e];o_(r,s=>{t.push(s)})}}function s_(n,t,e,i){if(!(n=We(n)))return!1;let r=null,s=UT(n);const o=!s&&zt(n);if(s||o){if(o&&!o.standalone)return!1;r=n}else{const l=n.ngModule;if(s=UT(l),!s)return!1;r=l}const a=i.has(r);if(o){if(a)return!1;if(i.add(r),o.dependencies){const l="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const c of l)s_(c,t,e,i)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let c;i.add(r);try{Po(s.imports,u=>{s_(u,t,e,i)&&(c||(c=[]),c.push(u))})}finally{}void 0!==c&&jx(c,t)}if(!a){const c=Eo(r)||(()=>new r);t.push({provide:r,useFactory:c,deps:kt},{provide:Fx,useValue:r,multi:!0},{provide:Oh,useValue:()=>ye(r),multi:!0})}const l=s.providers;null==l||a||o_(l,u=>{t.push(u)})}}return r!==n&&void 0!==n.providers}function o_(n,t){for(let e of n)ng(e)&&(e=e.\u0275providers),Array.isArray(e)?o_(e,t):t(e)}const LB=Jt({provide:String,useValue:Jt});function a_(n){return null!==n&&"object"==typeof n&&LB in n}function No(n){return"function"==typeof n}const l_=new Ne("Set Injector scope."),Nh={},jB={};let c_;function Fh(){return void 0===c_&&(c_=new Lx),c_}class kr{}class Vx extends kr{get destroyed(){return this._destroyed}constructor(t,e,i,r){super(),this.parent=e,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,d_(t,o=>this.processProvider(o)),this.records.set(Nx,tl(void 0,this)),r.has("environment")&&this.records.set(kr,tl(void 0,this));const s=this.records.get(l_);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(Fx.multi,kt,$e.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();for(const t of this._onDestroyHooks)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(t){this._onDestroyHooks.push(t)}runInContext(t){this.assertNotDestroyed();const e=Ba(this),i=br(void 0);try{return t()}finally{Ba(e),br(i)}}get(t,e=Fc,i=$e.Default){this.assertNotDestroyed(),i=sh(i);const r=Ba(this),s=br(void 0);try{if(!(i&$e.SkipSelf)){let a=this.records.get(t);if(void 0===a){const l=function HB(n){return"function"==typeof n||"object"==typeof n&&n instanceof Ne}(t)&&nh(t);a=l&&this.injectableDefInScope(l)?tl(u_(t),Nh):null,this.records.set(t,a)}if(null!=a)return this.hydrate(t,a)}return(i&$e.Self?Fh():this.parent).get(t,e=i&$e.Optional&&e===Fc?null:e)}catch(o){if("NullInjectorError"===o.name){if((o[rh]=o[rh]||[]).unshift(tn(t)),r)throw o;return function mF(n,t,e,i){const r=n[rh];throw t[WT]&&r.unshift(t[WT]),n.message=function gF(n,t,e,i=null){n=n&&"\n"===n.charAt(0)&&n.charAt(1)==hF?n.slice(2):n;let r=tn(t);if(Array.isArray(t))r=t.map(tn).join(" -> ");else if("object"==typeof t){let s=[];for(let o in t)if(t.hasOwnProperty(o)){let a=t[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):tn(a)))}r=`{${s.join(", ")}}`}return`${e}${i?"("+i+")":""}[${r}]: ${n.replace(dF,"\n  ")}`}("\n"+n.message,r,e,i),n[uF]=r,n[rh]=null,n}(o,t,"R3InjectorError",this.source)}throw o}finally{br(s),Ba(r)}}resolveInjectorInitializers(){const t=Ba(this),e=br(void 0);try{const i=this.get(Oh.multi,kt,$e.Self);for(const r of i)r()}finally{Ba(t),br(e)}}toString(){const t=[],e=this.records;for(const i of e.keys())t.push(tn(i));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new oe(205,!1)}processProvider(t){let e=No(t=We(t))?t:We(t&&t.provide);const i=function GB(n){return a_(n)?tl(void 0,n.useValue):tl(Ux(n),Nh)}(t);if(No(t)||!0!==t.multi)this.records.get(e);else{let r=this.records.get(e);r||(r=tl(void 0,Nh,!0),r.factory=()=>og(r.multi),this.records.set(e,r)),e=t,r.multi.push(t)}this.records.set(e,i)}hydrate(t,e){return e.value===Nh&&(e.value=jB,e.value=e.factory()),"object"==typeof e.value&&e.value&&function UB(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}injectableDefInScope(t){if(!t.providedIn)return!1;const e=We(t.providedIn);return"string"==typeof e?"any"===e||this.scopes.has(e):this.injectorDefTypes.has(e)}}function u_(n){const t=nh(n),e=null!==t?t.factory:Eo(n);if(null!==e)return e;if(n instanceof Ne)throw new oe(204,!1);if(n instanceof Function)return function kB(n){const t=n.length;if(t>0)throw Kc(t,"?"),new oe(204,!1);const e=function oF(n){const t=n&&(n[ih]||n[HT]);return t?(function aF(n){if(n.hasOwnProperty("name"))return n.name;(""+n).match(/^function\s*([^\s(]+)/)}(n),t):null}(n);return null!==e?()=>e.factory(n):()=>new n}(n);throw new oe(204,!1)}function Ux(n,t,e){let i;if(No(n)){const r=We(n);return Eo(r)||u_(r)}if(a_(n))i=()=>We(n.useValue);else if(function Gx(n){return!(!n||!n.useFactory)}(n))i=()=>n.useFactory(...og(n.deps||[]));else if(function kx(n){return!(!n||!n.useExisting)}(n))i=()=>ye(We(n.useExisting));else{const r=We(n&&(n.useClass||n.provide));if(!function VB(n){return!!n.deps}(n))return Eo(r)||u_(r);i=()=>new r(...og(n.deps))}return i}function tl(n,t,e=!1){return{factory:n,value:t,multi:e?[]:void 0}}function d_(n,t){for(const e of n)Array.isArray(e)?d_(e,t):e&&ng(e)?d_(e.\u0275providers,t):t(e)}class zB{}class Hx{}class $B{resolveComponentFactory(t){throw function WB(n){const t=Error(`No component factory found for ${tn(n)}. Did you add it to @NgModule.entryComponents?`);return t.ngComponent=n,t}(t)}}let su=(()=>{class n{}return n.NULL=new $B,n})();function qB(){return nl(li(),Z())}function nl(n,t){return new Nt(Qi(n,t))}let Nt=(()=>{class n{constructor(e){this.nativeElement=e}}return n.__NG_ELEMENT_ID__=qB,n})();function KB(n){return n instanceof Nt?n.nativeElement:n}class h_{}let Vi=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function XB(){const n=Z(),e=ji(li().index,n);return(Zi(e)?e:n)[ht]}(),n})(),YB=(()=>{class n{}return n.\u0275prov=de({token:n,providedIn:"root",factory:()=>null}),n})();class ou{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const JB=new ou("15.2.7"),f_={},p_="ngOriginalError";function m_(n){return n[p_]}class il{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t);this._console.error("ERROR",t),e&&this._console.error("ORIGINAL ERROR",e)}_findOriginalError(t){let e=t&&m_(t);for(;e&&m_(e);)e=m_(e);return e||null}}function Cs(n){return n instanceof Function?n():n}function $x(n,t,e){let i=n.length;for(;;){const r=n.indexOf(t,e);if(-1===r)return r;if(0===r||n.charCodeAt(r-1)<=32){const s=t.length;if(r+s===i||n.charCodeAt(r+s)<=32)return r}e=r+1}}const qx="ng-template";function l2(n,t,e){let i=0,r=!0;for(;i<n.length;){let s=n[i++];if("string"==typeof s&&r){const o=n[i++];if(e&&"class"===s&&-1!==$x(o.toLowerCase(),t,0))return!0}else{if(1===s){for(;i<n.length&&"string"==typeof(s=n[i++]);)if(s.toLowerCase()===t)return!0;return!1}"number"==typeof s&&(r=!1)}}return!1}function Kx(n){return 4===n.type&&n.value!==qx}function c2(n,t,e){return t===(4!==n.type||e?n.value:qx)}function u2(n,t,e){let i=4;const r=n.attrs||[],s=function f2(n){for(let t=0;t<n.length;t++)if(MM(n[t]))return t;return n.length}(r);let o=!1;for(let a=0;a<t.length;a++){const l=t[a];if("number"!=typeof l){if(!o)if(4&i){if(i=2|1&i,""!==l&&!c2(n,l,e)||""===l&&1===t.length){if(Gr(i))return!1;o=!0}}else{const c=8&i?l:t[++a];if(8&i&&null!==n.attrs){if(!l2(n.attrs,c,e)){if(Gr(i))return!1;o=!0}continue}const d=d2(8&i?"class":l,r,Kx(n),e);if(-1===d){if(Gr(i))return!1;o=!0;continue}if(""!==c){let h;h=d>s?"":r[d+1].toLowerCase();const f=8&i?h:null;if(f&&-1!==$x(f,c,0)||2&i&&c!==h){if(Gr(i))return!1;o=!0}}}}else{if(!o&&!Gr(i)&&!Gr(l))return!1;if(o&&Gr(l))continue;o=!1,i=l|1&i}}return Gr(i)||o}function Gr(n){return 0==(1&n)}function d2(n,t,e,i){if(null===t)return-1;let r=0;if(i||!e){let s=!1;for(;r<t.length;){const o=t[r];if(o===n)return r;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=t[++r];for(;"string"==typeof a;)a=t[++r];continue}if(4===o)break;if(0===o){r+=4;continue}}r+=s?1:2}return-1}return function p2(n,t){let e=n.indexOf(4);if(e>-1)for(e++;e<n.length;){const i=n[e];if("number"==typeof i)return-1;if(i===t)return e;e++}return-1}(t,n)}function Xx(n,t,e=!1){for(let i=0;i<t.length;i++)if(u2(n,t[i],e))return!0;return!1}function m2(n,t){e:for(let e=0;e<t.length;e++){const i=t[e];if(n.length===i.length){for(let r=0;r<n.length;r++)if(n[r]!==i[r])continue e;return!0}}return!1}function Yx(n,t){return n?":not("+t.trim()+")":t}function g2(n){let t=n[0],e=1,i=2,r="",s=!1;for(;e<n.length;){let o=n[e];if("string"==typeof o)if(2&i){const a=n[++e];r+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&i?r+="."+o:4&i&&(r+=" "+o);else""!==r&&!Gr(o)&&(t+=Yx(s,r),r=""),i=o,s=s||!Gr(i);e++}return""!==r&&(t+=Yx(s,r)),t}const rt={};function te(n){Jx(St(),Z(),Di()+n,!1)}function Jx(n,t,e,i){if(!i)if(3==(3&t[ct])){const s=n.preOrderCheckHooks;null!==s&&gh(t,s,e)}else{const s=n.preOrderHooks;null!==s&&_h(t,s,0,e)}Ao(e)}function tw(n,t=null,e=null,i){const r=nw(n,t,e,i);return r.resolveInjectorInitializers(),r}function nw(n,t=null,e=null,i,r=new Set){const s=[e||kt,FB(n)];return i=i||("object"==typeof n?void 0:tn(n)),new Vx(s,t||Fh(),i||null,r)}let tr=(()=>{class n{static create(e,i){if(Array.isArray(e))return tw({name:""},i,e,"");{const r=e.name??"";return tw({name:r},e.parent,e.providers,r)}}}return n.THROW_IF_NOT_FOUND=Fc,n.NULL=new Lx,n.\u0275prov=de({token:n,providedIn:"any",factory:()=>ye(Nx)}),n.__NG_ELEMENT_ID__=-1,n})();function I(n,t=$e.Default){const e=Z();return null===e?ye(n,t):IM(li(),e,We(n),t)}function uw(n,t){const e=n.contentQueries;if(null!==e)for(let i=0;i<e.length;i+=2){const s=e[i+1];if(-1!==s){const o=n.data[s];vg(e[i]),o.contentQueries(2,t[s],s)}}}function Bh(n,t,e,i,r,s,o,a,l,c,u){const d=t.blueprint.slice();return d[ws]=r,d[ct]=76|i,(null!==u||n&&1024&n[ct])&&(d[ct]|=1024),lM(d),d[Mn]=d[Ga]=n,d[Sn]=e,d[ch]=o||n&&n[ch],d[ht]=a||n&&n[ht],d[cg]=l||n&&n[cg]||null,d[lh]=c||n&&n[lh]||null,d[gi]=s,d[Vc]=function LL(){return FL++}(),d[ZT]=u,d[_i]=2==t.type?n[_i]:d,d}function ol(n,t,e,i,r){let s=n.data[t];if(null===s)s=b_(n,t,e,i,r),function GF(){return it.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=e,s.value=i,s.attrs=r;const o=Hc();s.injectorIndex=null===o?-1:o.injectorIndex}return is(s,!0),s}function b_(n,t,e,i,r){const s=dM(),o=pg(),l=n.data[t]=function U2(n,t,e,i,r,s){return{type:e,index:i,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,e,t,i,r);return null===n.firstChild&&(n.firstChild=l),null!==s&&(o?null==s.child&&null!==l.parent&&(s.child=l):null===s.next&&(s.next=l,l.prev=s)),l}function au(n,t,e,i){if(0===e)return-1;const r=t.length;for(let s=0;s<e;s++)t.push(i),n.blueprint.push(i),n.data.push(null);return r}function T_(n,t,e){yg(t);try{const i=n.viewQuery;null!==i&&A_(1,i,e);const r=n.template;null!==r&&dw(n,t,r,1,e),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&uw(n,t),n.staticViewQueries&&A_(2,n.viewQuery,e);const s=n.components;null!==s&&function k2(n,t){for(let e=0;e<t.length;e++)lj(n,t[e])}(t,s)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{t[ct]&=-5,bg()}}function jh(n,t,e,i){const r=t[ct];if(128!=(128&r)){yg(t);try{lM(t),function fM(n){return it.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==e&&dw(n,t,e,2,i);const o=3==(3&r);if(o){const c=n.preOrderCheckHooks;null!==c&&gh(t,c,null)}else{const c=n.preOrderHooks;null!==c&&_h(t,c,0,null),Tg(t,0)}if(function oj(n){for(let t=Ug(n);null!==t;t=Hg(t)){if(!t[QT])continue;const e=t[Ua];for(let i=0;i<e.length;i++){const r=e[i];512&r[ct]||fg(r[Mn],1),r[ct]|=512}}}(t),function sj(n){for(let t=Ug(n);null!==t;t=Hg(t))for(let e=xi;e<t.length;e++){const i=t[e],r=i[Se];ph(i)&&jh(r,i,r.template,i[Sn])}}(t),null!==n.contentQueries&&uw(n,t),o){const c=n.contentCheckHooks;null!==c&&gh(t,c)}else{const c=n.contentHooks;null!==c&&_h(t,c,1),Tg(t,1)}!function B2(n,t){const e=n.hostBindingOpCodes;if(null!==e)try{for(let i=0;i<e.length;i++){const r=e[i];if(r<0)Ao(~r);else{const s=r,o=e[++i],a=e[++i];VF(o,s),a(2,t[s])}}}finally{Ao(-1)}}(n,t);const a=n.components;null!==a&&function j2(n,t){for(let e=0;e<t.length;e++)aj(n,t[e])}(t,a);const l=n.viewQuery;if(null!==l&&A_(2,l,i),o){const c=n.viewCheckHooks;null!==c&&gh(t,c)}else{const c=n.viewHooks;null!==c&&_h(t,c,2),Tg(t,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),t[ct]&=-41,512&t[ct]&&(t[ct]&=-513,fg(t[Mn],-1))}finally{bg()}}}function dw(n,t,e,i,r){const s=Di(),o=2&i;try{Ao(-1),o&&t.length>on&&Jx(n,t,on,!1),Tr(o?2:0,r),e(i,r)}finally{Ao(s),Tr(o?3:1,r)}}function M_(n,t,e){if(dg(t)){const r=t.directiveEnd;for(let s=t.directiveStart;s<r;s++){const o=n.data[s];o.contentQueries&&o.contentQueries(1,e[s],s)}}}function x_(n,t,e){uM()&&(function X2(n,t,e,i){const r=e.directiveStart,s=e.directiveEnd;Uc(e)&&function nj(n,t,e){const i=Qi(t,n),r=hw(e),s=n[ch],o=kh(n,Bh(n,r,null,e.onPush?32:16,i,t,s,s.createRenderer(i,e),null,null,null));n[t.index]=o}(t,e,n.data[r+e.componentOffset]),n.firstCreatePass||Th(e,t),vi(i,t);const o=e.initialInputs;for(let a=r;a<s;a++){const l=n.data[a],c=Io(t,n,a,e);vi(c,t),null!==o&&ij(0,a-r,c,l,0,o),jr(l)&&(ji(e.index,t)[Sn]=Io(t,n,a,e))}}(n,t,e,Qi(e,t)),64==(64&e.flags)&&_w(n,t,e))}function w_(n,t,e=Qi){const i=t.localNames;if(null!==i){let r=t.index+1;for(let s=0;s<i.length;s+=2){const o=i[s+1],a=-1===o?e(t,n):n[o];n[r++]=a}}}function hw(n){const t=n.tView;return null===t||t.incompleteFirstPass?n.tView=D_(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):t}function D_(n,t,e,i,r,s,o,a,l,c){const u=on+i,d=u+r,h=function G2(n,t){const e=[];for(let i=0;i<t;i++)e.push(i<n?null:rt);return e}(u,d),f="function"==typeof c?c():c;return h[Se]={type:n,blueprint:h,template:e,queries:null,viewQuery:a,declTNode:t,data:h.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:d,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:f,incompleteFirstPass:!1}}function fw(n,t,e,i){const r=yw(t);null===e?r.push(i):(r.push(e),n.firstCreatePass&&bw(n).push(i,r.length-1))}function pw(n,t,e,i){for(let r in n)if(n.hasOwnProperty(r)){e=null===e?{}:e;const s=n[r];null===i?mw(e,t,r,s):i.hasOwnProperty(r)&&mw(e,t,i[r],s)}return e}function mw(n,t,e,i){n.hasOwnProperty(e)?n[e].push(t,i):n[e]=[t,i]}function nr(n,t,e,i,r,s,o,a){const l=Qi(t,e);let u,c=t.inputs;!a&&null!=c&&(u=c[i])?(I_(n,e,u,i,r),Uc(t)&&function W2(n,t){const e=ji(t,n);16&e[ct]||(e[ct]|=32)}(e,t.index)):3&t.type&&(i=function z2(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(i),r=null!=o?o(r,t.value||"",i):r,s.setProperty(l,i,r))}function R_(n,t,e,i){if(uM()){const r=null===i?null:{"":-1},s=function J2(n,t){const e=n.directiveRegistry;let i=null,r=null;if(e)for(let s=0;s<e.length;s++){const o=e[s];if(Xx(t,o.selectors,!1))if(i||(i=[]),jr(o))if(null!==o.findHostDirectiveDefs){const a=[];r=r||new Map,o.findHostDirectiveDefs(o,a,r),i.unshift(...a,o),S_(n,t,a.length)}else i.unshift(o),S_(n,t,0);else r=r||new Map,o.findHostDirectiveDefs?.(o,i,r),i.push(o)}return null===i?null:[i,r]}(n,e);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&gw(n,t,e,o,r,a),r&&function Z2(n,t,e){if(t){const i=n.localNames=[];for(let r=0;r<t.length;r+=2){const s=e[t[r+1]];if(null==s)throw new oe(-301,!1);i.push(t[r],s)}}}(e,i,r)}e.mergedAttrs=Wc(e.mergedAttrs,e.attrs)}function gw(n,t,e,i,r,s){for(let c=0;c<i.length;c++)Sg(Th(e,t),n,i[c].type);!function ej(n,t,e){n.flags|=1,n.directiveStart=t,n.directiveEnd=t+e,n.providerIndexes=t}(e,n.data.length,i.length);for(let c=0;c<i.length;c++){const u=i[c];u.providersResolver&&u.providersResolver(u)}let o=!1,a=!1,l=au(n,t,i.length,null);for(let c=0;c<i.length;c++){const u=i[c];e.mergedAttrs=Wc(e.mergedAttrs,u.hostAttrs),tj(n,e,t,l,u),Q2(l,u,r),null!==u.contentQueries&&(e.flags|=4),(null!==u.hostBindings||null!==u.hostAttrs||0!==u.hostVars)&&(e.flags|=64);const d=u.type.prototype;!o&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((n.preOrderHooks??(n.preOrderHooks=[])).push(e.index),o=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((n.preOrderCheckHooks??(n.preOrderCheckHooks=[])).push(e.index),a=!0),l++}!function H2(n,t,e){const r=t.directiveEnd,s=n.data,o=t.attrs,a=[];let l=null,c=null;for(let u=t.directiveStart;u<r;u++){const d=s[u],h=e?e.get(d):null,m=h?h.outputs:null;l=pw(d.inputs,u,l,h?h.inputs:null),c=pw(d.outputs,u,c,m);const p=null===l||null===o||Kx(t)?null:rj(l,u,o);a.push(p)}null!==l&&(l.hasOwnProperty("class")&&(t.flags|=8),l.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=a,t.inputs=l,t.outputs=c}(n,e,s)}function _w(n,t,e){const i=e.directiveStart,r=e.directiveEnd,s=e.index,o=function UF(){return it.lFrame.currentDirectiveIndex}();try{Ao(s);for(let a=i;a<r;a++){const l=n.data[a],c=t[a];gg(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&Y2(l,c)}}finally{Ao(-1),gg(o)}}function Y2(n,t){null!==n.hostBindings&&n.hostBindings(1,t)}function S_(n,t,e){t.componentOffset=e,(n.components??(n.components=[])).push(t.index)}function Q2(n,t,e){if(e){if(t.exportAs)for(let i=0;i<t.exportAs.length;i++)e[t.exportAs[i]]=n;jr(t)&&(e[""]=n)}}function tj(n,t,e,i,r){n.data[i]=r;const s=r.factory||(r.factory=Eo(r.type)),o=new zc(s,jr(r),I);n.blueprint[i]=o,e[i]=o,function q2(n,t,e,i,r){const s=r.hostBindings;if(s){let o=n.hostBindingOpCodes;null===o&&(o=n.hostBindingOpCodes=[]);const a=~t.index;(function K2(n){let t=n.length;for(;t>0;){const e=n[--t];if("number"==typeof e&&e<0)return e}return 0})(o)!=a&&o.push(a),o.push(e,i,s)}}(n,t,i,au(n,e,r.hostVars,rt),r)}function C_(n,t,e,i,r,s,o){if(null==s)n.removeAttribute(t,r,e);else{const a=null==o?nt(s):o(s,i||"",r);n.setAttribute(t,r,a,e)}}function ij(n,t,e,i,r,s){const o=s[t];if(null!==o){const a=i.setInput;for(let l=0;l<o.length;){const c=o[l++],u=o[l++],d=o[l++];null!==a?i.setInput(e,d,c,u):e[u]=d}}}function rj(n,t,e){let i=null,r=0;for(;r<e.length;){const s=e[r];if(0!==s)if(5!==s){if("number"==typeof s)break;if(n.hasOwnProperty(s)){null===i&&(i=[]);const o=n[s];for(let a=0;a<o.length;a+=2)if(o[a]===t){i.push(s,o[a+1],e[r+1]);break}}r+=2}else r+=2;else r+=4}return i}function vw(n,t,e,i){return[n,!0,!1,t,null,0,i,e,null,null]}function aj(n,t){const e=ji(t,n);if(ph(e)){const i=e[Se];48&e[ct]?jh(i,e,i.template,e[Sn]):e[Co]>0&&E_(e)}}function E_(n){for(let i=Ug(n);null!==i;i=Hg(i))for(let r=xi;r<i.length;r++){const s=i[r];if(ph(s))if(512&s[ct]){const o=s[Se];jh(o,s,o.template,s[Sn])}else s[Co]>0&&E_(s)}const e=n[Se].components;if(null!==e)for(let i=0;i<e.length;i++){const r=ji(e[i],n);ph(r)&&r[Co]>0&&E_(r)}}function lj(n,t){const e=ji(t,n),i=e[Se];(function cj(n,t){for(let e=t.length;e<n.blueprint.length;e++)t.push(n.blueprint[e])})(i,e),T_(i,e,e[Sn])}function kh(n,t){return n[kc]?n[JT][Lr]=t:n[kc]=t,n[JT]=t,t}function Gh(n){for(;n;){n[ct]|=32;const t=eu(n);if(MF(n)&&!t)return n;n=t}return null}function Vh(n,t,e,i=!0){const r=t[ch];r.begin&&r.begin();try{jh(n,t,n.template,e)}catch(o){throw i&&Mw(t,o),o}finally{r.end&&r.end()}}function A_(n,t,e){vg(0),t(n,e)}function yw(n){return n[ka]||(n[ka]=[])}function bw(n){return n.cleanup||(n.cleanup=[])}function Mw(n,t){const e=n[lh],i=e?e.get(il,null):null;i&&i.handleError(t)}function I_(n,t,e,i,r){for(let s=0;s<e.length;){const o=e[s++],a=e[s++],l=t[o],c=n.data[o];null!==c.setInput?c.setInput(l,r,i,a):l[a]=r}}function Uh(n,t,e){let i=e?n.styles:null,r=e?n.classes:null,s=0;if(null!==t)for(let o=0;o<t.length;o++){const a=t[o];"number"==typeof a?s=a:1==s?r=eg(r,a):2==s&&(i=eg(i,a+": "+t[++o]+";"))}e?n.styles=i:n.stylesWithoutHost=i,e?n.classes=r:n.classesWithoutHost=r}function Hh(n,t,e,i,r=!1){for(;null!==e;){const s=t[e.index];if(null!==s&&i.push(ai(s)),Br(s))for(let a=xi;a<s.length;a++){const l=s[a],c=l[Se].firstChild;null!==c&&Hh(l[Se],l,c,i)}const o=e.type;if(8&o)Hh(n,t,e.child,i);else if(32&o){const a=Vg(e,t);let l;for(;l=a();)i.push(l)}else if(16&o){const a=gx(t,e);if(Array.isArray(a))i.push(...a);else{const l=eu(t[_i]);Hh(l[Se],l,a,i,!0)}}e=r?e.projectionNext:e.next}return i}class lu{get rootNodes(){const t=this._lView,e=t[Se];return Hh(e,t,e.firstChild,[])}constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Sn]}set context(t){this._lView[Sn]=t}get destroyed(){return 128==(128&this._lView[ct])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[Mn];if(Br(t)){const e=t[dh],i=e?e.indexOf(this):-1;i>-1&&($g(t,i),xh(e,i))}this._attachedToViewContainer=!1}ax(this._lView[Se],this._lView)}onDestroy(t){fw(this._lView[Se],this._lView,null,t)}markForCheck(){Gh(this._cdRefInjectingView||this._lView)}detach(){this._lView[ct]&=-65}reattach(){this._lView[ct]|=64}detectChanges(){Vh(this._lView[Se],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new oe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function JL(n,t){tu(n,t,t[ht],2,null,null)}(this._lView[Se],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new oe(902,!1);this._appRef=t}}class uj extends lu{constructor(t){super(t),this._view=t}detectChanges(){const t=this._view;Vh(t[Se],t,t[Sn],!1)}checkNoChanges(){}get context(){return null}}class xw extends su{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=zt(t);return new cu(e,this.ngModule)}}function ww(n){const t=[];for(let e in n)n.hasOwnProperty(e)&&t.push({propName:n[e],templateName:e});return t}class hj{constructor(t,e){this.injector=t,this.parentInjector=e}get(t,e,i){i=sh(i);const r=this.injector.get(t,f_,i);return r!==f_||e===f_?r:this.parentInjector.get(t,e,i)}}class cu extends Hx{get inputs(){return ww(this.componentDef.inputs)}get outputs(){return ww(this.componentDef.outputs)}constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=function _2(n){return n.map(g2).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}create(t,e,i,r){let s=(r=r||this.ngModule)instanceof kr?r:r?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new hj(t,s):t,a=o.get(h_,null);if(null===a)throw new oe(407,!1);const l=o.get(YB,null),c=a.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",d=i?function V2(n,t,e){return n.selectRootElement(t,e===ts.ShadowDom)}(c,i,this.componentDef.encapsulation):Wg(c,u,function dj(n){const t=n.toLowerCase();return"svg"===t?"svg":"math"===t?"math":null}(u)),h=this.componentDef.onPush?288:272,f=D_(0,null,null,1,0,null,null,null,null,null),m=Bh(null,f,null,h,null,null,a,c,l,o,null);let p,g;yg(m);try{const v=this.componentDef;let y,_=null;v.findHostDirectiveDefs?(y=[],_=new Map,v.findHostDirectiveDefs(v,y,_),y.push(v)):y=[v];const b=function pj(n,t){const e=n[Se],i=on;return n[i]=t,ol(e,i,2,"#host",null)}(m,d),M=function mj(n,t,e,i,r,s,o,a){const l=r[Se];!function gj(n,t,e,i){for(const r of n)t.mergedAttrs=Wc(t.mergedAttrs,r.hostAttrs);null!==t.mergedAttrs&&(Uh(t,t.mergedAttrs,!0),null!==e&&yx(i,e,t))}(i,n,t,o);const c=s.createRenderer(t,e),u=Bh(r,hw(e),null,e.onPush?32:16,r[n.index],n,s,c,a||null,null,null);return l.firstCreatePass&&S_(l,n,i.length-1),kh(r,u),r[n.index]=u}(b,d,v,y,m,a,c);g=aM(f,on),d&&function vj(n,t,e,i){if(i)xg(n,e,["ng-version",JB.full]);else{const{attrs:r,classes:s}=function v2(n){const t=[],e=[];let i=1,r=2;for(;i<n.length;){let s=n[i];if("string"==typeof s)2===r?""!==s&&t.push(s,n[++i]):8===r&&e.push(s);else{if(!Gr(r))break;r=s}i++}return{attrs:t,classes:e}}(t.selectors[0]);r&&xg(n,e,r),s&&s.length>0&&vx(n,e,s.join(" "))}}(c,v,d,i),void 0!==e&&function yj(n,t,e){const i=n.projection=[];for(let r=0;r<t.length;r++){const s=e[r];i.push(null!=s?Array.from(s):null)}}(g,this.ngContentSelectors,e),p=function _j(n,t,e,i,r,s){const o=li(),a=r[Se],l=Qi(o,r);gw(a,r,o,e,null,i);for(let u=0;u<e.length;u++)vi(Io(r,a,o.directiveStart+u,o),r);_w(a,r,o),l&&vi(l,r);const c=Io(r,a,o.directiveStart+o.componentOffset,o);if(n[Sn]=r[Sn]=c,null!==s)for(const u of s)u(c,t);return M_(a,o,n),c}(M,v,y,_,m,[bj]),T_(f,m,null)}finally{bg()}return new fj(this.componentType,p,nl(g,m),m,g)}}class fj extends zB{constructor(t,e,i,r,s){super(),this.location=i,this._rootLView=r,this._tNode=s,this.instance=e,this.hostView=this.changeDetectorRef=new uj(r),this.componentType=t}setInput(t,e){const i=this._tNode.inputs;let r;if(null!==i&&(r=i[t])){const s=this._rootLView;I_(s[Se],s,r,t,e),Gh(ji(this._tNode.index,s))}}get injector(){return new $a(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}function bj(){const n=li();mh(Z()[Se],n)}function ft(n){let t=function Dw(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),e=!0;const i=[n];for(;t;){let r;if(jr(n))r=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new oe(903,!1);r=t.\u0275dir}if(r){if(e){i.push(r);const o=n;o.inputs=P_(n.inputs),o.declaredInputs=P_(n.declaredInputs),o.outputs=P_(n.outputs);const a=r.hostBindings;a&&wj(n,a);const l=r.viewQuery,c=r.contentQueries;if(l&&Mj(n,l),c&&xj(n,c),Qm(n.inputs,r.inputs),Qm(n.declaredInputs,r.declaredInputs),Qm(n.outputs,r.outputs),jr(r)&&r.data.animation){const u=n.data;u.animation=(u.animation||[]).concat(r.data.animation)}}const s=r.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(n),a===ft&&(e=!1)}}t=Object.getPrototypeOf(t)}!function Tj(n){let t=0,e=null;for(let i=n.length-1;i>=0;i--){const r=n[i];r.hostVars=t+=r.hostVars,r.hostAttrs=Wc(r.hostAttrs,e=Wc(e,r.hostAttrs))}}(i)}function P_(n){return n===Ms?{}:n===kt?[]:n}function Mj(n,t){const e=n.viewQuery;n.viewQuery=e?(i,r)=>{t(i,r),e(i,r)}:t}function xj(n,t){const e=n.contentQueries;n.contentQueries=e?(i,r,s)=>{t(i,r,s),e(i,r,s)}:t}function wj(n,t){const e=n.hostBindings;n.hostBindings=e?(i,r)=>{t(i,r),e(i,r)}:t}function uu(n){return t=>{t.findHostDirectiveDefs=Rw,t.hostDirectives=(Array.isArray(n)?n:n()).map(e=>"function"==typeof e?{directive:We(e),inputs:Ms,outputs:Ms}:{directive:We(e.directive),inputs:Sw(e.inputs),outputs:Sw(e.outputs)})}}function Rw(n,t,e){if(null!==n.hostDirectives)for(const i of n.hostDirectives){const r=mi(i.directive);Cj(r.declaredInputs,i.inputs),Rw(r,t,e),e.set(r,i),t.push(r)}}function Sw(n){if(void 0===n||0===n.length)return Ms;const t={};for(let e=0;e<n.length;e+=2)t[n[e]]=n[e+1];return t}function Cj(n,t){for(const e in t)t.hasOwnProperty(e)&&(n[t[e]]=n[e])}function zh(n){return!!function O_(n){return null!==n&&("function"==typeof n||"object"==typeof n)}(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function os(n,t,e){return n[t]=e}function yi(n,t,e){return!Object.is(n[t],e)&&(n[t]=e,!0)}function Fo(n,t,e,i){const r=yi(n,t,e);return yi(n,t+1,i)||r}function wt(n,t,e,i){const r=Z();return yi(r,za(),t)&&(St(),function ss(n,t,e,i,r,s){const o=Qi(n,t);C_(t[ht],o,s,n.value,e,i,r)}(_n(),r,n,t,e,i)),wt}function ll(n,t,e,i){return yi(n,za(),e)?t+nt(e)+i:rt}function pe(n,t,e,i,r,s,o,a){const l=Z(),c=St(),u=n+on,d=c.firstCreatePass?function Oj(n,t,e,i,r,s,o,a,l){const c=t.consts,u=ol(t,n,4,o||null,Xs(c,a));R_(t,e,u,Xs(c,l)),mh(t,u);const d=u.tView=D_(2,u,i,r,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,c);return null!==t.queries&&(t.queries.template(t,u),d.queries=t.queries.embeddedTView(u)),u}(u,c,l,t,e,i,r,s,o):c.data[u];is(d,!1);const h=l[ht].createComment("");Ch(c,l,h,d),vi(h,l),kh(l,l[u]=vw(h,l,h,d)),hh(d)&&x_(c,l,d),null!=o&&w_(l,d,a)}function Ui(n){return Ha(function kF(){return it.lFrame.contextLView}(),on+n)}function ie(n,t,e){const i=Z();return yi(i,za(),t)&&nr(St(),_n(),i,n,t,i[ht],e,!1),ie}function N_(n,t,e,i,r){const o=r?"class":"style";I_(n,e,t.inputs[o],o,i)}function re(n,t,e,i){const r=Z(),s=St(),o=on+n,a=r[ht],l=s.firstCreatePass?function Fj(n,t,e,i,r,s){const o=t.consts,l=ol(t,n,2,i,Xs(o,r));return R_(t,e,l,Xs(o,s)),null!==l.attrs&&Uh(l,l.attrs,!1),null!==l.mergedAttrs&&Uh(l,l.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,l),l}(o,s,r,t,e,i):s.data[o],c=r[o]=Wg(a,t,function YF(){return it.lFrame.currentNamespace}()),u=hh(l);return is(l,!0),yx(a,c,l),32!=(32&l.flags)&&Ch(s,r,c,l),0===function NF(){return it.lFrame.elementDepthCount}()&&vi(c,r),function FF(){it.lFrame.elementDepthCount++}(),u&&(x_(s,r,l),M_(s,l,r)),null!==i&&w_(r,l),re}function ue(){let n=li();pg()?mg():(n=n.parent,is(n,!1));const t=n;!function LF(){it.lFrame.elementDepthCount--}();const e=St();return e.firstCreatePass&&(mh(e,n),dg(n)&&e.queries.elementEnd(n)),null!=t.classesWithoutHost&&function eL(n){return 0!=(8&n.flags)}(t)&&N_(e,t,Z(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function tL(n){return 0!=(16&n.flags)}(t)&&N_(e,t,Z(),t.stylesWithoutHost,!1),ue}function xn(n,t,e,i){return re(n,t,e,i),ue(),xn}function $h(n,t,e){const i=Z(),r=St(),s=n+on,o=r.firstCreatePass?function Lj(n,t,e,i,r){const s=t.consts,o=Xs(s,i),a=ol(t,n,8,"ng-container",o);return null!==o&&Uh(a,o,!0),R_(t,e,a,Xs(s,r)),null!==t.queries&&t.queries.elementStart(t,a),a}(s,r,i,t,e):r.data[s];is(o,!0);const a=i[s]=i[ht].createComment("");return Ch(r,i,a,o),vi(a,i),hh(o)&&(x_(r,i,o),M_(r,o,i)),null!=e&&w_(i,o),$h}function qh(){let n=li();const t=St();return pg()?mg():(n=n.parent,is(n,!1)),t.firstCreatePass&&(mh(t,n),dg(n)&&t.queries.elementEnd(n)),qh}function dn(){return Z()}function hu(n){return!!n&&"function"==typeof n.then}const F_=function kw(n){return!!n&&"function"==typeof n.subscribe};function je(n,t,e,i){const r=Z(),s=St(),o=li();return function Vw(n,t,e,i,r,s,o){const a=hh(i),c=n.firstCreatePass&&bw(n),u=t[Sn],d=yw(t);let h=!0;if(3&i.type||o){const p=Qi(i,t),g=o?o(p):p,v=d.length,y=o?b=>o(ai(b[i.index])):i.index;let _=null;if(!o&&a&&(_=function Bj(n,t,e,i){const r=n.cleanup;if(null!=r)for(let s=0;s<r.length-1;s+=2){const o=r[s];if(o===e&&r[s+1]===i){const a=t[ka],l=r[s+2];return a.length>l?a[l]:null}"string"==typeof o&&(s+=2)}return null}(n,t,r,i.index)),null!==_)(_.__ngLastListenerFn__||_).__ngNextListenerFn__=s,_.__ngLastListenerFn__=s,h=!1;else{s=Hw(i,t,u,s,!1);const b=e.listen(g,r,s);d.push(s,b),c&&c.push(r,y,v,v+1)}}else s=Hw(i,t,u,s,!1);const f=i.outputs;let m;if(h&&null!==f&&(m=f[r])){const p=m.length;if(p)for(let g=0;g<p;g+=2){const M=t[m[g]][m[g+1]].subscribe(s),x=d.length;d.push(s,M),c&&c.push(r,i.index,x,-(x+1))}}}(s,r,r[ht],o,n,t,i),je}function Uw(n,t,e,i){try{return Tr(6,t,e),!1!==e(i)}catch(r){return Mw(n,r),!1}finally{Tr(7,t,e)}}function Hw(n,t,e,i,r){return function s(o){if(o===Function)return i;Gh(n.componentOffset>-1?ji(n.index,t):t);let l=Uw(t,e,i,o),c=s.__ngNextListenerFn__;for(;c;)l=Uw(t,e,c,o)&&l,c=c.__ngNextListenerFn__;return r&&!1===l&&(o.preventDefault(),o.returnValue=!1),l}}function ge(n=1){return function zF(n){return(it.lFrame.contextLView=function WF(n,t){for(;n>0;)t=t[Ga],n--;return t}(n,it.lFrame.contextLView))[Sn]}(n)}function jj(n,t){let e=null;const i=function h2(n){const t=n.attrs;if(null!=t){const e=t.indexOf(5);if(!(1&e))return t[e+1]}return null}(n);for(let r=0;r<t.length;r++){const s=t[r];if("*"!==s){if(null===i?Xx(n,s,!0):m2(i,s))return r}else e=r}return e}function fu(n){const t=Z()[_i][gi];if(!t.projection){const i=t.projection=Kc(n?n.length:1,null),r=i.slice();let s=t.child;for(;null!==s;){const o=n?jj(s,n):0;null!==o&&(r[o]?r[o].projectionNext=s:i[o]=s,r[o]=s),s=s.next}}}function pu(n,t=0,e){const i=Z(),r=St(),s=ol(r,on+n,16,null,e||null);null===s.projection&&(s.projection=t),mg(),32!=(32&s.flags)&&function sB(n,t,e){_x(t[ht],0,t,e,lx(n,e,t),hx(e.parent||t[gi],e,t))}(r,i,s)}function L_(n,t,e){return Kh(n,"",t,"",e),L_}function Kh(n,t,e,i,r){const s=Z(),o=ll(s,t,e,i);return o!==rt&&nr(St(),_n(),s,n,o,s[ht],r,!1),Kh}function Xh(n,t){return n<<17|t<<2}function Zs(n){return n>>17&32767}function B_(n){return 2|n}function Lo(n){return(131068&n)>>2}function j_(n,t){return-131069&n|t<<2}function k_(n){return 1|n}function Zw(n,t,e,i,r){const s=n[e+1],o=null===t;let a=i?Zs(s):Lo(s),l=!1;for(;0!==a&&(!1===l||o);){const u=n[a+1];zj(n[a],t)&&(l=!0,n[a+1]=i?k_(u):B_(u)),a=i?Zs(u):Lo(u)}l&&(n[e+1]=i?B_(s):k_(s))}function zj(n,t){return null===n||null==t||(Array.isArray(n)?n[1]:n)===t||!(!Array.isArray(n)||"string"!=typeof t)&&Ja(n,t)>=0}const $n={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Qw(n){return n.substring($n.key,$n.keyEnd)}function eD(n,t){const e=$n.textEnd;return e===t?-1:(t=$n.keyEnd=function Kj(n,t,e){for(;t<e&&n.charCodeAt(t)>32;)t++;return t}(n,$n.key=t,e),gl(n,t,e))}function gl(n,t,e){for(;t<e&&n.charCodeAt(t)<=32;)t++;return t}function _l(n,t,e){return Vr(n,t,e,!1),_l}function Je(n,t){return Vr(n,t,null,!0),Je}function Qs(n){Ur(er,ls,n,!0)}function ls(n,t){for(let e=function $j(n){return function nD(n){$n.key=0,$n.keyEnd=0,$n.value=0,$n.valueEnd=0,$n.textEnd=n.length}(n),eD(n,gl(n,0,$n.textEnd))}(t);e>=0;e=eD(t,e))er(n,Qw(t),!0)}function Vr(n,t,e,i){const r=Z(),s=St(),o=Rs(2);s.firstUpdatePass&&oD(s,n,o,i),t!==rt&&yi(r,o,t)&&lD(s,s.data[Di()],r,r[ht],n,r[o+1]=function rk(n,t){return null==n||""===n||("string"==typeof t?n+=t:"object"==typeof n&&(n=tn(Js(n)))),n}(t,e),i,o)}function Ur(n,t,e,i){const r=St(),s=Rs(2);r.firstUpdatePass&&oD(r,null,s,i);const o=Z();if(e!==rt&&yi(o,s,e)){const a=r.data[Di()];if(uD(a,i)&&!sD(r,s)){let l=i?a.classesWithoutHost:a.stylesWithoutHost;null!==l&&(e=eg(l,e||"")),N_(r,a,o,e,i)}else!function ik(n,t,e,i,r,s,o,a){r===rt&&(r=kt);let l=0,c=0,u=0<r.length?r[0]:null,d=0<s.length?s[0]:null;for(;null!==u||null!==d;){const h=l<r.length?r[l+1]:void 0,f=c<s.length?s[c+1]:void 0;let p,m=null;u===d?(l+=2,c+=2,h!==f&&(m=d,p=f)):null===d||null!==u&&u<d?(l+=2,m=u):(c+=2,m=d,p=f),null!==m&&lD(n,t,e,i,m,p,o,a),u=l<r.length?r[l]:null,d=c<s.length?s[c]:null}}(r,a,o,o[ht],o[s+1],o[s+1]=function nk(n,t,e){if(null==e||""===e)return kt;const i=[],r=Js(e);if(Array.isArray(r))for(let s=0;s<r.length;s++)n(i,r[s],!0);else if("object"==typeof r)for(const s in r)r.hasOwnProperty(s)&&n(i,s,r[s]);else"string"==typeof r&&t(i,r);return i}(n,t,e),i,s)}}function sD(n,t){return t>=n.expandoStartIndex}function oD(n,t,e,i){const r=n.data;if(null===r[e+1]){const s=r[Di()],o=sD(n,e);uD(s,i)&&null===t&&!o&&(t=!1),t=function Zj(n,t,e,i){const r=function _g(n){const t=it.lFrame.currentDirectiveIndex;return-1===t?null:n[t]}(n);let s=i?t.residualClasses:t.residualStyles;if(null===r)0===(i?t.classBindings:t.styleBindings)&&(e=mu(e=G_(null,n,t,e,i),t.attrs,i),s=null);else{const o=t.directiveStylingLast;if(-1===o||n[o]!==r)if(e=G_(r,n,t,e,i),null===s){let l=function Qj(n,t,e){const i=e?t.classBindings:t.styleBindings;if(0!==Lo(i))return n[Zs(i)]}(n,t,i);void 0!==l&&Array.isArray(l)&&(l=G_(null,n,t,l[1],i),l=mu(l,t.attrs,i),function ek(n,t,e,i){n[Zs(e?t.classBindings:t.styleBindings)]=i}(n,t,i,l))}else s=function tk(n,t,e){let i;const r=t.directiveEnd;for(let s=1+t.directiveStylingLast;s<r;s++)i=mu(i,n[s].hostAttrs,e);return mu(i,t.attrs,e)}(n,t,i)}return void 0!==s&&(i?t.residualClasses=s:t.residualStyles=s),e}(r,s,t,i),function Uj(n,t,e,i,r,s){let o=s?t.classBindings:t.styleBindings,a=Zs(o),l=Lo(o);n[i]=e;let u,c=!1;if(Array.isArray(e)?(u=e[1],(null===u||Ja(e,u)>0)&&(c=!0)):u=e,r)if(0!==l){const h=Zs(n[a+1]);n[i+1]=Xh(h,a),0!==h&&(n[h+1]=j_(n[h+1],i)),n[a+1]=function Gj(n,t){return 131071&n|t<<17}(n[a+1],i)}else n[i+1]=Xh(a,0),0!==a&&(n[a+1]=j_(n[a+1],i)),a=i;else n[i+1]=Xh(l,0),0===a?a=i:n[l+1]=j_(n[l+1],i),l=i;c&&(n[i+1]=B_(n[i+1])),Zw(n,u,i,!0),Zw(n,u,i,!1),function Hj(n,t,e,i,r){const s=r?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof t&&Ja(s,t)>=0&&(e[i+1]=k_(e[i+1]))}(t,u,n,i,s),o=Xh(a,l),s?t.classBindings=o:t.styleBindings=o}(r,s,t,e,o,i)}}function G_(n,t,e,i,r){let s=null;const o=e.directiveEnd;let a=e.directiveStylingLast;for(-1===a?a=e.directiveStart:a++;a<o&&(s=t[a],i=mu(i,s.hostAttrs,r),s!==n);)a++;return null!==n&&(e.directiveStylingLast=a),i}function mu(n,t,e){const i=e?1:2;let r=-1;if(null!==t)for(let s=0;s<t.length;s++){const o=t[s];"number"==typeof o?r=o:r===i&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),er(n,o,!!e||t[++s]))}return void 0===n?null:n}function lD(n,t,e,i,r,s,o,a){if(!(3&t.type))return;const l=n.data,c=l[a+1],u=function Vj(n){return 1==(1&n)}(c)?cD(l,t,e,r,Lo(c),o):void 0;Yh(u)||(Yh(s)||function kj(n){return 2==(2&n)}(c)&&(s=cD(l,null,e,r,a,o)),function aB(n,t,e,i,r){if(t)r?n.addClass(e,i):n.removeClass(e,i);else{let s=-1===i.indexOf("-")?void 0:ki.DashCase;null==r?n.removeStyle(e,i,s):("string"==typeof r&&r.endsWith("!important")&&(r=r.slice(0,-10),s|=ki.Important),n.setStyle(e,i,r,s))}}(i,o,fh(Di(),e),r,s))}function cD(n,t,e,i,r,s){const o=null===t;let a;for(;r>0;){const l=n[r],c=Array.isArray(l),u=c?l[1]:l,d=null===u;let h=e[r+1];h===rt&&(h=d?kt:void 0);let f=d?Ig(h,i):u===i?h:void 0;if(c&&!Yh(f)&&(f=Ig(l,i)),Yh(f)&&(a=f,o))return a;const m=n[r+1];r=o?Zs(m):Lo(m)}if(null!==t){let l=s?t.residualClasses:t.residualStyles;null!=l&&(a=Ig(l,i))}return a}function Yh(n){return void 0!==n}function uD(n,t){return 0!=(n.flags&(t?8:16))}function Ft(n,t=""){const e=Z(),i=St(),r=n+on,s=i.firstCreatePass?ol(i,r,1,t,null):i.data[r],o=e[r]=zg(e[ht],t);Ch(i,e,o,s),is(s,!1)}function hn(n){return eo("",n,""),hn}function eo(n,t,e){const i=Z(),r=ll(i,n,t,e);return r!==rt&&function Es(n,t,e){const i=fh(t,n);sx(n[ht],i,e)}(i,Di(),r),eo}function yD(n,t,e,i,r){Ur(er,ls,function cl(n,t,e,i,r,s){const a=Fo(n,Ds(),e,r);return Rs(2),a?t+nt(e)+i+nt(r)+s:rt}(Z(),n,t,e,i,r),!0)}function ir(n,t,e){const i=Z();return yi(i,za(),t)&&nr(St(),_n(),i,n,t,i[ht],e,!0),ir}const Bo=void 0;var xk=["en",[["a","p"],["AM","PM"],Bo],[["AM","PM"],Bo,Bo],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Bo,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Bo,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Bo,"{1} 'at' {0}",Bo],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Mk(n){const e=Math.floor(Math.abs(n)),i=n.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===i?1:5}];let vl={};function Ri(n){const t=function wk(n){return n.toLowerCase().replace(/_/g,"-")}(n);let e=ID(t);if(e)return e;const i=t.split("-")[0];if(e=ID(i),e)return e;if("en"===i)return xk;throw new oe(701,!1)}function ID(n){return n in vl||(vl[n]=sn.ng&&sn.ng.common&&sn.ng.common.locales&&sn.ng.common.locales[n]),vl[n]}var xe=(()=>((xe=xe||{})[xe.LocaleId=0]="LocaleId",xe[xe.DayPeriodsFormat=1]="DayPeriodsFormat",xe[xe.DayPeriodsStandalone=2]="DayPeriodsStandalone",xe[xe.DaysFormat=3]="DaysFormat",xe[xe.DaysStandalone=4]="DaysStandalone",xe[xe.MonthsFormat=5]="MonthsFormat",xe[xe.MonthsStandalone=6]="MonthsStandalone",xe[xe.Eras=7]="Eras",xe[xe.FirstDayOfWeek=8]="FirstDayOfWeek",xe[xe.WeekendRange=9]="WeekendRange",xe[xe.DateFormat=10]="DateFormat",xe[xe.TimeFormat=11]="TimeFormat",xe[xe.DateTimeFormat=12]="DateTimeFormat",xe[xe.NumberSymbols=13]="NumberSymbols",xe[xe.NumberFormats=14]="NumberFormats",xe[xe.CurrencyCode=15]="CurrencyCode",xe[xe.CurrencySymbol=16]="CurrencySymbol",xe[xe.CurrencyName=17]="CurrencyName",xe[xe.Currencies=18]="Currencies",xe[xe.Directionality=19]="Directionality",xe[xe.PluralCase=20]="PluralCase",xe[xe.ExtraData=21]="ExtraData",xe))();const Dk=["zero","one","two","few","many"],yl="en-US",Jh={marker:"element"},Zh={marker:"ICU"};var wn=(()=>((wn=wn||{})[wn.SHIFT=2]="SHIFT",wn[wn.APPEND_EAGERLY=1]="APPEND_EAGERLY",wn[wn.COMMENT=2]="COMMENT",wn))();let PD=yl;function OD(n){(function yr(n,t){null==n&&Ut(t,n,null,"!=")})(n,"Expected localeId to be defined"),"string"==typeof n&&(PD=n.toLowerCase().replace(/_/g,"-"))}function ND(n,t,e){const i=t.insertBeforeIndex,r=Array.isArray(i)?i[0]:i;return null===r?fx(n,0,e):ai(e[r])}function FD(n,t,e,i,r){const s=t.insertBeforeIndex;if(Array.isArray(s)){let o=i,a=null;if(3&t.type||(a=o,o=r),null!==o&&-1===t.componentOffset)for(let l=1;l<s.length;l++)Oo(n,o,e[s[l]],a,!1)}}function LD(n,t){if(n.push(t),n.length>1)for(let e=n.length-2;e>=0;e--){const i=n[e];BD(i)||Ek(i,t)&&null===Ak(i)&&Ik(i,t.index)}}function BD(n){return!(64&n.type)}function Ek(n,t){return BD(t)||n.index>t.index}function Ak(n){const t=n.insertBeforeIndex;return Array.isArray(t)?t[0]:t}function Ik(n,t){const e=n.insertBeforeIndex;Array.isArray(e)?e[0]=t:(mx(ND,FD),n.insertBeforeIndex=t)}function gu(n,t){const e=n.data[t];return null===e||"string"==typeof e?null:e.hasOwnProperty("currentCaseLViewIndex")?e:e.value}function Nk(n,t,e){const i=b_(n,e,64,null,null);return LD(t,i),i}function Qh(n,t){const e=t[n.currentCaseLViewIndex];return null===e?e:e<0?~e:e}function jD(n){return n>>>17}function kD(n){return(131070&n)>>>1}let _u=0,vu=0;function VD(n,t,e,i){const r=e[ht];let o,s=null;for(let a=0;a<t.length;a++){const l=t[a];if("string"==typeof l){const c=t[++a];null===e[c]&&(e[c]=zg(r,l))}else if("number"==typeof l)switch(1&l){case 0:const c=jD(l);let u,d;if(null===s&&(s=c,o=Sh(r,i)),c===s?(u=i,d=o):(u=null,d=ai(e[c])),null!==d){const p=kD(l);Oo(r,d,e[p],u,!1);const v=gu(n,p);if(null!==v&&"object"==typeof v){const y=Qh(v,e);null!==y&&VD(n,v.create[y],e,e[v.anchorIdx])}}break;case 1:const f=t[++a],m=t[++a];C_(r,fh(l>>>1,e),null,null,f,m,null)}else switch(l){case Zh:const c=t[++a],u=t[++a];null===e[u]&&vi(e[u]=KL(r,c),e);break;case Jh:const d=t[++a],h=t[++a];null===e[h]&&vi(e[h]=Wg(r,d,null),e)}}}function UD(n,t,e,i,r){for(let s=0;s<e.length;s++){const o=e[s],a=e[++s];if(o&r){let l="";for(let c=s+1;c<=s+a;c++){const u=e[c];if("string"==typeof u)l+=u;else if("number"==typeof u)if(u<0)l+=nt(t[i-u]);else{const d=u>>>2;switch(3&u){case 1:const h=e[++c],f=e[++c],m=n.data[d];"string"==typeof m?C_(t[ht],t[d],null,m,h,l,f):nr(n,m,t,h,l,t[ht],f,!1);break;case 0:const p=t[d];null!==p&&sx(t[ht],p,l);break;case 2:kk(n,gu(n,d),t,l);break;case 3:HD(n,gu(n,d),i,t)}}}}else{const l=e[s+1];if(l>0&&3==(3&l)){const u=gu(n,l>>>2);t[u.currentCaseLViewIndex]<0&&HD(n,u,i,t)}}s+=a}}function HD(n,t,e,i){let r=i[t.currentCaseLViewIndex];if(null!==r){let s=_u;r<0&&(r=i[t.currentCaseLViewIndex]=~r,s=-1),UD(n,i,t.update[r],e,s)}}function kk(n,t,e,i){const r=function Gk(n,t){let e=n.cases.indexOf(t);if(-1===e)switch(n.type){case 1:{const i=function Rk(n,t){const e=function AD(n){return Ri(n)[xe.PluralCase]}(t)(parseInt(n,10)),i=Dk[e];return void 0!==i?i:"other"}(t,function Ck(){return PD}());e=n.cases.indexOf(i),-1===e&&"other"!==i&&(e=n.cases.indexOf("other"));break}case 0:e=n.cases.indexOf("other")}return-1===e?null:e}(t,i);if(Qh(t,e)!==r&&(zD(n,t,e),e[t.currentCaseLViewIndex]=null===r?null:~r,null!==r)){const o=e[t.anchorIdx];o&&VD(n,t.create[r],e,o)}}function zD(n,t,e){let i=Qh(t,e);if(null!==i){const r=t.remove[i];for(let s=0;s<r.length;s++){const o=r[s];if(o>0){const a=fh(o,e);null!==a&&Yg(e[ht],a)}else zD(n,gu(n,~o),e)}}}function Vk(){const n=[];let e,i,t=-1;function s(a,l){t=0;const c=Qh(a,l);i=null!==c?a.remove[c]:kt}function o(){if(t<i.length){const a=i[t++];return a>0?e[a]:(n.push(t,i),s(e[Se].data[~a],e),o())}return 0===n.length?null:(i=n.pop(),t=n.pop(),o())}return function r(a,l){for(e=l;n.length;)n.pop();return s(a.value,l),o}}const ef=/\ufffd(\d+):?\d*\ufffd/gi,Hk=/\ufffd(\d+)\ufffd/,$D=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,yu="\ufffd",zk=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,Wk=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,$k=/\uE500/g;function qD(n,t,e,i,r,s,o){const a=au(n,i,1,null);let l=a<<wn.SHIFT,c=Hc();t===c&&(c=null),null===c&&(l|=wn.APPEND_EAGERLY),o&&(l|=wn.COMMENT,function WL(n){void 0===Gg&&(Gg=n())}(Vk)),r.push(l,null===s?"":s);const u=b_(n,a,o?32:1,null===s?"":s,null);LD(e,u);const d=u.index;return is(u,!1),null!==c&&t!==c&&function Ok(n,t){let e=n.insertBeforeIndex;null===e?(mx(ND,FD),e=n.insertBeforeIndex=[null,t]):(function Ks(n,t,e){n!=t&&Ut(e,n,t,"==")}(Array.isArray(e),!0,"Expecting array here"),e.push(t))}(c,d),u}function Xk(n,t,e,i,r,s,o){const a=o.match(ef),l=qD(n,t,e,s,i,a?null:o,!1);a&&bu(r,o,l.index,null,0,null)}function bu(n,t,e,i,r,s){const o=n.length,a=o+1;n.push(null,null);const l=o+2,c=t.split(ef);let u=0;for(let d=0;d<c.length;d++){const h=c[d];if(1&d){const f=r+parseInt(h,10);n.push(-1-f),u|=KD(f)}else""!==h&&n.push(h)}return n.push(e<<2|(i?1:0)),i&&n.push(i,s),n[o]=u,n[a]=n.length-l,u}function KD(n){return 1<<Math.min(n,31)}function XD(n){let t,s,e="",i=0,r=!1;for(;null!==(t=zk.exec(n));)r?t[0]===`${yu}/*${s}${yu}`&&(i=t.index,r=!1):(e+=n.substring(i,t.index+t[0].length),s=t[1],r=!0);return e+=n.slice(i),e}function YD(n,t,e,i,r,s){let o=0;const a={type:r.type,currentCaseLViewIndex:au(n,t,1,null),anchorIdx:s,cases:[],create:[],remove:[],update:[]};(function i3(n,t,e){n.push(KD(t.mainBinding),2,-1-t.mainBinding,e<<2|2)})(e,r,s),function Pk(n,t,e){const i=n.data[t];null===i?n.data[t]=e:i.value=e}(n,s,a);const l=r.values;for(let c=0;c<l.length;c++){const u=l[c],d=[];for(let h=0;h<u.length;h++){const f=u[h];if("string"!=typeof f){const m=d.push(f)-1;u[h]=`\x3c!--\ufffd${m}\ufffd--\x3e`}}o=t3(n,a,t,e,i,r.cases[c],u.join(""),d)|o}o&&function r3(n,t,e){n.push(t,1,e<<2|3)}(e,o,s)}function e3(n){const t=[],e=[];let i=1,r=0;const s=V_(n=n.replace($D,function(o,a,l){return i="select"===l?0:1,r=parseInt(a.slice(1),10),""}));for(let o=0;o<s.length;){let a=s[o++].trim();1===i&&(a=a.replace(/\s*(?:=)?(\w+)\s*/,"$1")),a.length&&t.push(a);const l=V_(s[o++]);t.length>e.length&&e.push(l)}return{type:i,mainBinding:r,cases:t,values:e}}function V_(n){if(!n)return[];let t=0;const e=[],i=[],r=/[{}]/g;let s;for(r.lastIndex=0;s=r.exec(n);){const a=s.index;if("}"==s[0]){if(e.pop(),0==e.length){const l=n.substring(t,a);$D.test(l)?i.push(e3(l)):i.push(l),t=a+1}}else{if(0==e.length){const l=n.substring(t,a);i.push(l),t=a+1}e.push("{")}}const o=n.substring(t);return i.push(o),i}function t3(n,t,e,i,r,s,o,a){const l=[],c=[],u=[];t.cases.push(s),t.create.push(l),t.remove.push(c),t.update.push(u);const h=function Dx(n){const t=new bB(n);return function TB(){try{return!!(new window.DOMParser).parseFromString(el(""),"text/html")}catch{return!1}}()?new yB(t):t}(function bx(){return void 0!==Qg?Qg:typeof document<"u"?document:void 0}()).getInertBodyElement(o),f=function r_(n){return"content"in n&&function CB(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}(h)||h;return f?JD(n,t,e,i,l,c,u,f,r,a,0):0}function JD(n,t,e,i,r,s,o,a,l,c,u){let d=0,h=a.firstChild;for(;h;){const f=au(n,e,1,null);switch(h.nodeType){case Node.ELEMENT_NODE:const m=h,p=m.tagName.toLowerCase();if(n_.hasOwnProperty(p)){U_(r,Jh,p,l,f),n.data[f]=p;const _=m.attributes;for(let b=0;b<_.length;b++){const M=_.item(b),x=M.name.toLowerCase();M.value.match(ef)?Ex.hasOwnProperty(x)&&bu(o,M.value,f,M.name,0,i_[x]?t_:null):s3(r,f,M)}d=JD(n,t,e,i,r,s,o,h,f,c,u+1)|d,ZD(s,f,u)}break;case Node.TEXT_NODE:const g=h.textContent||"",v=g.match(ef);U_(r,null,v?"":g,l,f),ZD(s,f,u),v&&(d=bu(o,g,f,null,0,null)|d);break;case Node.COMMENT_NODE:const y=Hk.exec(h.textContent||"");if(y){const b=c[parseInt(y[1],10)];U_(r,Zh,"",l,f),YD(n,e,i,l,b,f),n3(s,f,u)}}h=h.nextSibling}return d}function ZD(n,t,e){0===e&&n.push(t)}function n3(n,t,e){0===e&&(n.push(~t),n.push(t))}function U_(n,t,e,i,r){null!==t&&n.push(t),n.push(e,r,function Fk(n,t,e){return n|t<<17|e<<1}(0,i,r))}function s3(n,t,e){n.push(t<<1|1,e.name,e.value)}function e1(n,t,e=-1){const i=St(),r=Z(),s=on+n,o=Xs(i.consts,t),a=Hc();i.firstCreatePass&&function Kk(n,t,e,i,r,s){const o=Hc(),a=[],l=[],c=[[]];r=function Qk(n,t){if(function Zk(n){return-1===n}(t))return XD(n);{const e=n.indexOf(`:${t}${yu}`)+2+t.toString().length,i=n.search(new RegExp(`${yu}\\/\\*\\d+:${t}${yu}`));return XD(n.substring(e,i))}}(r,s);const u=function qk(n){return n.replace($k," ")}(r).split(Wk);for(let d=0;d<u.length;d++){let h=u[d];if(1&d){const f=47===h.charCodeAt(0),p=(h.charCodeAt(f?1:0),on+Number.parseInt(h.substring(f?2:1)));if(f)c.shift(),is(Hc(),!1);else{const g=Nk(n,c[0],p);c.unshift([]),is(g,!0)}}else{const f=V_(h);for(let m=0;m<f.length;m++){let p=f[m];if(1&m){const g=p;if("object"!=typeof g)throw new Error(`Unable to parse ICU expression in "${r}" message.`);YD(n,e,l,t,g,qD(n,o,c[0],e,a,"",!0).index)}else""!==p&&Xk(n,o,c[0],a,l,e,p)}}}n.data[i]={create:a,update:l}}(i,null===a?0:a.index,r,s,o,e);const l=i.data[s],u=cx(i,a===r[gi]?null:a,r);(function jk(n,t,e,i){const r=n[ht];for(let s=0;s<t.length;s++){const o=t[s++],a=t[s],c=(o&wn.APPEND_EAGERLY)===wn.APPEND_EAGERLY,u=o>>>wn.SHIFT;let d=n[u];null===d&&(d=n[u]=(o&wn.COMMENT)===wn.COMMENT?r.createComment(a):zg(r,a)),c&&null!==e&&Oo(r,e,d,i,!1)}})(r,l.create,u,a&&8&a.type?r[a.index]:null),pM(!0)}function ci(n,t,e){e1(n,t,e),function t1(){pM(!1)}()}function bl(n){return function Lk(n){n&&(_u|=1<<Math.min(vu,31)),vu++}(yi(Z(),za(),n)),bl}function Tu(n){!function Bk(n,t,e){if(vu>0){const i=n.data[e];UD(n,t,Array.isArray(i)?i:i.update,Ds()-vu-1,_u)}_u=0,vu=0}(St(),Z(),n+on)}function H_(n,t,e,i,r){if(n=We(n),Array.isArray(n))for(let s=0;s<n.length;s++)H_(n[s],t,e,i,r);else{const s=St(),o=Z();let a=No(n)?n:We(n.provide),l=Ux(n);const c=li(),u=1048575&c.providerIndexes,d=c.directiveStart,h=c.providerIndexes>>20;if(No(n)||!n.multi){const f=new zc(l,r,I),m=W_(a,t,r?u:u+h,d);-1===m?(Sg(Th(c,o),s,a),z_(s,n,t.length),t.push(a),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),e.push(f),o.push(f)):(e[m]=f,o[m]=f)}else{const f=W_(a,t,u+h,d),m=W_(a,t,u,u+h),g=m>=0&&e[m];if(r&&!g||!r&&!(f>=0&&e[f])){Sg(Th(c,o),s,a);const v=function y3(n,t,e,i,r){const s=new zc(n,e,I);return s.multi=[],s.index=t,s.componentProviders=0,n1(s,r,i&&!e),s}(r?v3:_3,e.length,r,i,l);!r&&g&&(e[m].providerFactory=v),z_(s,n,t.length,0),t.push(a),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),e.push(v),o.push(v)}else z_(s,n,f>-1?f:m,n1(e[r?m:f],l,!r&&i));!r&&i&&g&&e[m].componentProviders++}}}function z_(n,t,e,i){const r=No(t),s=function BB(n){return!!n.useClass}(t);if(r||s){const l=(s?We(t.useClass):t).prototype.ngOnDestroy;if(l){const c=n.destroyHooks||(n.destroyHooks=[]);if(!r&&t.multi){const u=c.indexOf(e);-1===u?c.push(e,[i,l]):c[u+1].push(i,l)}else c.push(e,l)}}}function n1(n,t,e){return e&&n.componentProviders++,n.multi.push(t)-1}function W_(n,t,e,i){for(let r=e;r<i;r++)if(t[r]===n)return r;return-1}function _3(n,t,e,i){return $_(this.multi,[])}function v3(n,t,e,i){const r=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=Io(e,e[Se],this.providerFactory.index,i);s=a.slice(0,o),$_(r,s);for(let l=o;l<a.length;l++)s.push(a[l])}else s=[],$_(r,s);return s}function $_(n,t){for(let e=0;e<n.length;e++)t.push((0,n[e])());return t}function vt(n,t=[]){return e=>{e.providersResolver=(i,r)=>function g3(n,t,e){const i=St();if(i.firstCreatePass){const r=jr(n);H_(e,i.data,i.blueprint,r,!0),H_(t,i.data,i.blueprint,r,!1)}}(i,r?r(n):n,t)}}class Tl{}class i1{}class r1 extends Tl{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new xw(this);const i=Ji(t);this._bootstrapComponents=Cs(i.bootstrap),this._r3Injector=nw(t,e,[{provide:Tl,useValue:this},{provide:su,useValue:this.componentFactoryResolver}],tn(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(t)}get injector(){return this._r3Injector}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class q_ extends i1{constructor(t){super(),this.moduleType=t}create(t){return new r1(this.moduleType,t)}}class T3 extends Tl{constructor(t,e,i){super(),this.componentFactoryResolver=new xw(this),this.instance=null;const r=new Vx([...t,{provide:Tl,useValue:this},{provide:su,useValue:this.componentFactoryResolver}],e||Fh(),i,new Set(["environment"]));this.injector=r,r.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}}function tf(n,t,e=null){return new T3(n,t,e).injector}let M3=(()=>{class n{constructor(e){this._injector=e,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(e){if(!e.standalone)return null;if(!this.cachedInjectors.has(e.id)){const i=Bx(0,e.type),r=i.length>0?tf([i],this._injector,`Standalone[${e.type.name}]`):null;this.cachedInjectors.set(e.id,r)}return this.cachedInjectors.get(e.id)}ngOnDestroy(){try{for(const e of this.cachedInjectors.values())null!==e&&e.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=de({token:n,providedIn:"environment",factory:()=>new n(ye(kr))}),n})();function Nn(n){n.getStandaloneInjector=t=>t.get(M3).getOrCreateStandaloneInjector(n)}function Mu(n,t,e){const i=wi()+n,r=Z();return r[i]===rt?os(r,i,e?t.call(e):t()):function du(n,t){return n[t]}(r,i)}function nf(n,t,e,i){return d1(Z(),wi(),n,t,e,i)}function xu(n,t,e,i,r){return function h1(n,t,e,i,r,s,o){const a=t+e;return Fo(n,a,r,s)?os(n,a+2,o?i.call(o,r,s):i(r,s)):wu(n,a+2)}(Z(),wi(),n,t,e,i,r)}function X_(n,t,e,i,r,s){return function f1(n,t,e,i,r,s,o,a){const l=t+e;return function Wh(n,t,e,i,r){const s=Fo(n,t,e,i);return yi(n,t+2,r)||s}(n,l,r,s,o)?os(n,l+3,a?i.call(a,r,s,o):i(r,s,o)):wu(n,l+3)}(Z(),wi(),n,t,e,i,r,s)}function wu(n,t){const e=n[t];return e===rt?void 0:e}function d1(n,t,e,i,r,s){const o=t+e;return yi(n,o,r)?os(n,o+1,s?i.call(s,r):i(r)):wu(n,o+1)}function _1(n,t,e){const i=n+on,r=Z(),s=Ha(r,i);return function Du(n,t){return n[Se].data[t].pure}(r,i)?d1(r,wi(),t,s.transform,e,s):s.transform(e)}function Y_(n){return t=>{setTimeout(n,void 0,t)}}const Ce=class U3 extends Kt{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,i){let r=t,s=e||(()=>null),o=i;if(t&&"object"==typeof t){const l=t;r=l.next?.bind(l),s=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(s=Y_(s),r&&(r=Y_(r)),o&&(o=Y_(o)));const a=super.subscribe({next:r,error:s,complete:o});return t instanceof Xi&&t.add(a),a}};function H3(){return this._results[Symbol.iterator]()}class J_{get changes(){return this._changes||(this._changes=new Ce)}constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=J_.prototype;e[Symbol.iterator]||(e[Symbol.iterator]=H3)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const i=this;i.dirty=!1;const r=function Mr(n){return n.flat(Number.POSITIVE_INFINITY)}(t);(this._changesDetected=!function dL(n,t,e){if(n.length!==t.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],s=t[i];if(e&&(r=e(r),s=e(s)),s!==r)return!1}return!0}(i._results,r,e))&&(i._results=r,i.length=r.length,i.last=r[this.length-1],i.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let nn=(()=>{class n{}return n.__NG_ELEMENT_ID__=$3,n})();const z3=nn,W3=class extends z3{constructor(t,e,i){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=i}createEmbeddedView(t,e){const i=this._declarationTContainer.tView,r=Bh(this._declarationLView,i,t,16,null,i.declTNode,null,null,null,null,e||null);r[Gc]=this._declarationLView[this._declarationTContainer.index];const o=this._declarationLView[ns];return null!==o&&(r[ns]=o.createEmbeddedView(i)),T_(i,r,t),new lu(r)}};function $3(){return rf(li(),Z())}function rf(n,t){return 4&n.type?new W3(t,n,nl(n,t)):null}let wr=(()=>{class n{}return n.__NG_ELEMENT_ID__=q3,n})();function q3(){return b1(li(),Z())}const K3=wr,v1=class extends K3{constructor(t,e,i){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=i}get element(){return nl(this._hostTNode,this._hostLView)}get injector(){return new $a(this._hostTNode,this._hostLView)}get parentInjector(){const t=Rg(this._hostTNode,this._hostLView);if(DM(t)){const e=yh(t,this._hostLView),i=vh(t);return new $a(e[Se].data[i+8],e)}return new $a(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=y1(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-xi}createEmbeddedView(t,e,i){let r,s;"number"==typeof i?r=i:null!=i&&(r=i.index,s=i.injector);const o=t.createEmbeddedView(e||{},s);return this.insert(o,r),o}createComponent(t,e,i,r,s){const o=t&&!function qc(n){return"function"==typeof n}(t);let a;if(o)a=e;else{const d=e||{};a=d.index,i=d.injector,r=d.projectableNodes,s=d.environmentInjector||d.ngModuleRef}const l=o?t:new cu(zt(t)),c=i||this.parentInjector;if(!s&&null==l.ngModule){const h=(o?c:this.parentInjector).get(kr,null);h&&(s=h)}const u=l.create(c,r,void 0,s);return this.insert(u.hostView,a),u}insert(t,e){const i=t._lView,r=i[Se];if(function OF(n){return Br(n[Mn])}(i)){const u=this.indexOf(t);if(-1!==u)this.detach(u);else{const d=i[Mn],h=new v1(d,d[gi],d[Mn]);h.detach(h.indexOf(t))}}const s=this._adjustIndex(e),o=this._lContainer;!function QL(n,t,e,i){const r=xi+i,s=e.length;i>0&&(e[r-1][Lr]=t),i<s-xi?(t[Lr]=e[r],BM(e,xi+i,t)):(e.push(t),t[Lr]=null),t[Mn]=e;const o=t[Gc];null!==o&&e!==o&&function eB(n,t){const e=n[Ua];t[_i]!==t[Mn][Mn][_i]&&(n[QT]=!0),null===e?n[Ua]=[t]:e.push(t)}(o,t);const a=t[ns];null!==a&&a.insertView(n),t[ct]|=64}(r,i,o,s);const a=Xg(s,o),l=i[ht],c=Sh(l,o[uh]);return null!==c&&function YL(n,t,e,i,r,s){i[ws]=r,i[gi]=t,tu(n,i,e,1,r,s)}(r,o[gi],l,i,c,a),t.attachToViewContainerRef(),BM(Z_(o),s,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=y1(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),i=$g(this._lContainer,e);i&&(xh(Z_(this._lContainer),e),ax(i[Se],i))}detach(t){const e=this._adjustIndex(t,-1),i=$g(this._lContainer,e);return i&&null!=xh(Z_(this._lContainer),e)?new lu(i):null}_adjustIndex(t,e=0){return t??this.length+e}};function y1(n){return n[dh]}function Z_(n){return n[dh]||(n[dh]=[])}function b1(n,t){let e;const i=t[n.index];if(Br(i))e=i;else{let r;if(8&n.type)r=ai(i);else{const s=t[ht];r=s.createComment("");const o=Qi(n,t);Oo(s,Sh(s,o),r,function rB(n,t){return n.nextSibling(t)}(s,o),!1)}t[n.index]=e=vw(i,t,r,n),kh(t,e)}return new v1(e,n,t)}class Q_{constructor(t){this.queryList=t,this.matches=null}clone(){return new Q_(this.queryList)}setDirty(){this.queryList.setDirty()}}class ev{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const i=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let s=0;s<i;s++){const o=e.getByIndex(s);r.push(this.queries[o.indexInDeclarationView].clone())}return new ev(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==D1(t,e).matches&&this.queries[e].setDirty()}}class T1{constructor(t,e,i=null){this.predicate=t,this.flags=e,this.read=i}}class tv{constructor(t=[]){this.queries=t}elementStart(t,e){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let i=0;i<this.length;i++){const r=null!==e?e.length:0,s=this.getByIndex(i).embeddedTView(t,r);s&&(s.indexInDeclarationView=i,null!==e?e.push(s):e=[s])}return null!==e?new tv(e):null}template(t,e){for(let i=0;i<this.queries.length;i++)this.queries[i].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class nv{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new nv(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let i=t.parent;for(;null!==i&&8&i.type&&i.index!==e;)i=i.parent;return e===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const s=i[r];this.matchTNodeWithReadOption(t,e,X3(e,s)),this.matchTNodeWithReadOption(t,e,Mh(e,t,s,!1,!1))}else i===nn?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,Mh(e,t,i,!1,!1))}matchTNodeWithReadOption(t,e,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===Nt||r===wr||r===nn&&4&e.type)this.addMatch(e.index,-2);else{const s=Mh(e,t,r,!1,!1);null!==s&&this.addMatch(e.index,s)}else this.addMatch(e.index,i)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function X3(n,t){const e=n.localNames;if(null!==e)for(let i=0;i<e.length;i+=2)if(e[i]===t)return e[i+1];return null}function J3(n,t,e,i){return-1===e?function Y3(n,t){return 11&n.type?nl(n,t):4&n.type?rf(n,t):null}(t,n):-2===e?function Z3(n,t,e){return e===Nt?nl(t,n):e===nn?rf(t,n):e===wr?b1(t,n):void 0}(n,t,i):Io(n,n[Se],e,t)}function M1(n,t,e,i){const r=t[ns].queries[i];if(null===r.matches){const s=n.data,o=e.matches,a=[];for(let l=0;l<o.length;l+=2){const c=o[l];a.push(c<0?null:J3(t,s[c],o[l+1],e.metadata.read))}r.matches=a}return r.matches}function iv(n,t,e,i){const r=n.queries.getByIndex(e),s=r.matches;if(null!==s){const o=M1(n,t,r,e);for(let a=0;a<s.length;a+=2){const l=s[a];if(l>0)i.push(o[a/2]);else{const c=s[a+1],u=t[-l];for(let d=xi;d<u.length;d++){const h=u[d];h[Gc]===h[Mn]&&iv(h[Se],h,c,i)}if(null!==u[Ua]){const d=u[Ua];for(let h=0;h<d.length;h++){const f=d[h];iv(f[Se],f,c,i)}}}}}return i}function Mt(n){const t=Z(),e=St(),i=mM();vg(i+1);const r=D1(e,i);if(n.dirty&&function PF(n){return 4==(4&n[ct])}(t)===(2==(2&r.metadata.flags))){if(null===r.matches)n.reset([]);else{const s=r.crossesNgTemplate?iv(e,t,i,[]):M1(e,t,r,i);n.reset(s,KB),n.notifyOnChanges()}return!0}return!1}function to(n,t,e){const i=St();i.firstCreatePass&&(w1(i,new T1(n,t,e),-1),2==(2&t)&&(i.staticViewQueries=!0)),x1(i,Z(),t)}function Yt(n,t,e,i){const r=St();if(r.firstCreatePass){const s=li();w1(r,new T1(t,e,i),s.index),function eG(n,t){const e=n.contentQueries||(n.contentQueries=[]);t!==(e.length?e[e.length-1]:-1)&&e.push(n.queries.length-1,t)}(r,n),2==(2&e)&&(r.staticContentQueries=!0)}x1(r,Z(),e)}function xt(){return function Q3(n,t){return n[ns].queries[t].queryList}(Z(),mM())}function x1(n,t,e){const i=new J_(4==(4&e));fw(n,t,i,i.destroy),null===t[ns]&&(t[ns]=new ev),t[ns].queries.push(new Q_(i))}function w1(n,t,e){null===n.queries&&(n.queries=new tv),n.queries.track(new nv(t,e))}function D1(n,t){return n.queries.getByIndex(t)}function Si(n,t){return rf(n,t)}function af(...n){}const lf=new Ne("Application Initializer");let cf=(()=>{class n{constructor(e){this.appInits=e,this.resolve=af,this.reject=af,this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,r)=>{this.resolve=i,this.reject=r})}runInitializers(){if(this.initialized)return;const e=[],i=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let r=0;r<this.appInits.length;r++){const s=this.appInits[r]();if(hu(s))e.push(s);else if(F_(s)){const o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});e.push(o)}}Promise.all(e).then(()=>{i()}).catch(r=>{this.reject(r)}),0===e.length&&i(),this.initialized=!0}}return n.\u0275fac=function(e){return new(e||n)(ye(lf,8))},n.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Su=new Ne("AppId",{providedIn:"root",factory:function H1(){return`${cv()}${cv()}${cv()}`}});function cv(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const z1=new Ne("Platform Initializer"),uv=new Ne("Platform ID",{providedIn:"platform",factory:()=>"unknown"});let bG=(()=>{class n{log(e){console.log(e)}warn(e){console.warn(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const rr=new Ne("LocaleId",{providedIn:"root",factory:()=>gt(rr,$e.Optional|$e.SkipSelf)||function TG(){return typeof $localize<"u"&&$localize.locale||yl}()});class xG{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}let W1=(()=>{class n{compileModuleSync(e){return new q_(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){const i=this.compileModuleSync(e),s=Cs(Ji(e).declarations).reduce((o,a)=>{const l=zt(a);return l&&o.push(new cu(l)),o},[]);return new xG(i,s)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const RG=(()=>Promise.resolve(0))();function dv(n){typeof Zone>"u"?RG.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class Dt{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ce(!1),this.onMicrotaskEmpty=new Ce(!1),this.onStable=new Ce(!1),this.onError=new Ce(!1),typeof Zone>"u")throw new oe(908,!1);Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&e,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function SG(){let n=sn.requestAnimationFrame,t=sn.cancelAnimationFrame;if(typeof Zone<"u"&&n&&t){const e=n[Zone.__symbol__("OriginalDelegate")];e&&(n=e);const i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function AG(n){const t=()=>{!function EG(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(sn,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,fv(n),n.isCheckStableRunning=!0,hv(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),fv(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(e,i,r,s,o,a)=>{try{return K1(n),e.invokeTask(r,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&t(),X1(n)}},onInvoke:(e,i,r,s,o,a,l)=>{try{return K1(n),e.invoke(r,s,o,a,l)}finally{n.shouldCoalesceRunChangeDetection&&t(),X1(n)}},onHasTask:(e,i,r,s)=>{e.hasTask(r,s),i===r&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,fv(n),hv(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(e,i,r,s)=>(e.handleError(r,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(r)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Dt.isInAngularZone())throw new oe(909,!1)}static assertNotInAngularZone(){if(Dt.isInAngularZone())throw new oe(909,!1)}run(t,e,i){return this._inner.run(t,e,i)}runTask(t,e,i,r){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,t,CG,af,af);try{return s.runTask(o,e,i)}finally{s.cancelTask(o)}}runGuarded(t,e,i){return this._inner.runGuarded(t,e,i)}runOutsideAngular(t){return this._outer.run(t)}}const CG={};function hv(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function fv(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function K1(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function X1(n){n._nesting--,hv(n)}class IG{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ce,this.onMicrotaskEmpty=new Ce,this.onStable=new Ce,this.onError=new Ce}run(t,e,i){return t.apply(e,i)}runGuarded(t,e,i){return t.apply(e,i)}runOutsideAngular(t){return t()}runTask(t,e,i,r){return t.apply(e,i)}}const Y1=new Ne(""),uf=new Ne("");let gv,pv=(()=>{class n{constructor(e,i,r){this._ngZone=e,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,gv||(function PG(n){gv=n}(r),r.addToWindow(i)),this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Dt.assertNotInAngularZone(),dv(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())dv(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(e)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,i,r){let s=-1;i&&i>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),e(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:e,timeoutId:s,updateCb:r})}whenStable(e,i,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,i,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(e){this.registry.registerApplication(e,this)}unregisterApplication(e){this.registry.unregisterApplication(e)}findProviders(e,i,r){return[]}}return n.\u0275fac=function(e){return new(e||n)(ye(Dt),ye(mv),ye(uf))},n.\u0275prov=de({token:n,factory:n.\u0275fac}),n})(),mv=(()=>{class n{constructor(){this._applications=new Map}registerApplication(e,i){this._applications.set(e,i)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,i=!0){return gv?.findTestabilityInTree(this,e,i)??null}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const As=!1;let no=null;const J1=new Ne("AllowMultipleToken"),_v=new Ne("PlatformDestroyListeners"),Z1=new Ne("appBootstrapListener");class Q1{constructor(t,e){this.name=t,this.token=e}}function tR(n,t,e=[]){const i=`Platform: ${t}`,r=new Ne(i);return(s=[])=>{let o=vv();if(!o||o.injector.get(J1,!1)){const a=[...e,...s,{provide:r,useValue:!0}];n?n(a):function FG(n){if(no&&!no.get(J1,!1))throw new oe(400,!1);no=n;const t=n.get(iR);(function eR(n){const t=n.get(z1,null);t&&t.forEach(e=>e())})(n)}(function nR(n=[],t){return tr.create({name:t,providers:[{provide:l_,useValue:"platform"},{provide:_v,useValue:new Set([()=>no=null])},...n]})}(a,i))}return function BG(n){const t=vv();if(!t)throw new oe(401,!1);return t}()}}function vv(){return no?.get(iR)??null}let iR=(()=>{class n{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,i){const r=function sR(n,t){let e;return e="noop"===n?new IG:("zone.js"===n?void 0:n)||new Dt(t),e}(i?.ngZone,function rR(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(i)),s=[{provide:Dt,useValue:r}];return r.run(()=>{const o=tr.create({providers:s,parent:this.injector,name:e.moduleType.name}),a=e.create(o),l=a.injector.get(il,null);if(!l)throw new oe(402,!1);return r.runOutsideAngular(()=>{const c=r.onError.subscribe({next:u=>{l.handleError(u)}});a.onDestroy(()=>{df(this._modules,a),c.unsubscribe()})}),function oR(n,t,e){try{const i=e();return hu(i)?i.catch(r=>{throw t.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw t.runOutsideAngular(()=>n.handleError(i)),i}}(l,r,()=>{const c=a.injector.get(cf);return c.runInitializers(),c.donePromise.then(()=>(OD(a.injector.get(rr,yl)||yl),this._moduleDoBootstrap(a),a))})})}bootstrapModule(e,i=[]){const r=aR({},i);return function OG(n,t,e){const i=new q_(e);return Promise.resolve(i)}(0,0,e).then(s=>this.bootstrapModuleFactory(s,r))}_moduleDoBootstrap(e){const i=e.injector.get(Cu);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(r=>i.bootstrap(r));else{if(!e.instance.ngDoBootstrap)throw new oe(-403,!1);e.instance.ngDoBootstrap(i)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new oe(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());const e=this._injector.get(_v,null);e&&(e.forEach(i=>i()),e.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(e){return new(e||n)(ye(tr))},n.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function aR(n,t){return Array.isArray(t)?t.reduce(aR,n):{...n,...t}}let Cu=(()=>{class n{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(e,i,r){this._zone=e,this._injector=i,this._exceptionHandler=r,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new Qt(a=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{a.next(this._stable),a.complete()})}),o=new Qt(a=>{let l;this._zone.runOutsideAngular(()=>{l=this._zone.onStable.subscribe(()=>{Dt.assertNotInAngularZone(),dv(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,a.next(!0))})})});const c=this._zone.onUnstable.subscribe(()=>{Dt.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{a.next(!1)}))});return()=>{l.unsubscribe(),c.unsubscribe()}});this.isStable=kT(s,o.pipe(function ZN(n={}){const{connector:t=(()=>new Kt),resetOnError:e=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=n;return s=>{let o,a,l,c=0,u=!1,d=!1;const h=()=>{a?.unsubscribe(),a=void 0},f=()=>{h(),o=l=void 0,u=d=!1},m=()=>{const p=o;f(),p?.unsubscribe()};return Tn((p,g)=>{c++,!d&&!u&&h();const v=l=l??t();g.add(()=>{c--,0===c&&!d&&!u&&(a=Zm(m,r))}),v.subscribe(g),!o&&c>0&&(o=new Oc({next:y=>v.next(y),error:y=>{d=!0,h(),a=Zm(f,e,y),v.error(y)},complete:()=>{u=!0,h(),a=Zm(f,i),v.complete()}}),Hn(p).subscribe(o))})(s)}}()))}bootstrap(e,i){const r=e instanceof Hx;if(!this._injector.get(cf).done){!r&&function ja(n){const t=zt(n)||mi(n)||Bi(n);return null!==t&&t.standalone}(e);throw new oe(405,As)}let o;o=r?e:this._injector.get(su).resolveComponentFactory(e),this.componentTypes.push(o.componentType);const a=function NG(n){return n.isBoundToModule}(o)?void 0:this._injector.get(Tl),c=o.create(tr.NULL,[],i||o.selector,a),u=c.location.nativeElement,d=c.injector.get(Y1,null);return d?.registerApplication(u),c.onDestroy(()=>{this.detachView(c.hostView),df(this.components,c),d?.unregisterApplication(u)}),this._loadComponent(c),c}tick(){if(this._runningTick)throw new oe(101,!1);try{this._runningTick=!0;for(let e of this._views)e.detectChanges()}catch(e){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(e))}finally{this._runningTick=!1}}attachView(e){const i=e;this._views.push(i),i.attachToAppRef(this)}detachView(e){const i=e;df(this._views,i),i.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e);const i=this._injector.get(Z1,[]);i.push(...this._bootstrapListeners),i.forEach(r=>r(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>df(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new oe(406,!1);const e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(e){return new(e||n)(ye(Dt),ye(kr),ye(il))},n.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function df(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}let Hi=(()=>{class n{}return n.__NG_ELEMENT_ID__=kG,n})();function kG(n){return function GG(n,t,e){if(Uc(n)&&!e){const i=ji(n.index,t);return new lu(i,i)}return 47&n.type?new lu(t[_i],t):null}(li(),Z(),16==(16&n))}class hR{constructor(){}supports(t){return zh(t)}create(t){return new $G(t)}}const WG=(n,t)=>t;class $G{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||WG}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,i=this._removalsHead,r=0,s=null;for(;e||i;){const o=!i||e&&e.currentIndex<pR(i,r,s)?e:i,a=pR(o,r,s),l=o.currentIndex;if(o===i)r--,i=i._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{s||(s=[]);const c=a-r,u=l-r;if(c!=u){for(let h=0;h<c;h++){const f=h<s.length?s[h]:s[h]=0,m=f+h;u<=m&&m<c&&(s[h]=f+1)}s[o.previousIndex]=u-c}}a!==l&&t(o,a,l)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!zh(t))throw new oe(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let r,s,o,e=this._itHead,i=!1;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)s=t[a],o=this._trackByFn(a,s),null!==e&&Object.is(e.trackById,o)?(i&&(e=this._verifyReinsertion(e,s,o,a)),Object.is(e.item,s)||this._addIdentityChange(e,s)):(e=this._mismatch(e,s,o,a),i=!0),e=e._next}else r=0,function Aj(n,t){if(Array.isArray(n))for(let e=0;e<n.length;e++)t(n[e]);else{const e=n[Symbol.iterator]();let i;for(;!(i=e.next()).done;)t(i.value)}}(t,a=>{o=this._trackByFn(r,a),null!==e&&Object.is(e.trackById,o)?(i&&(e=this._verifyReinsertion(e,a,o,r)),Object.is(e.item,a)||this._addIdentityChange(e,a)):(e=this._mismatch(e,a,o,r),i=!0),e=e._next,r++}),this.length=r;return this._truncate(e),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,i,r){let s;return null===t?s=this._itTail:(s=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,s,r)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(i,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,s,r)):t=this._addAfter(new qG(e,i),s,r),t}_verifyReinsertion(t,e,i,r){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==s?t=this._reinsertAfter(s,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,s=t._nextRemoved;return null===r?this._removalsHead=s:r._nextRemoved=s,null===s?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(t,e,i),this._addToMoves(t,i),t}_moveAfter(t,e,i){return this._unlink(t),this._insertAfter(t,e,i),this._addToMoves(t,i),t}_addAfter(t,e,i){return this._insertAfter(t,e,i),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,i){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new fR),this._linkedRecords.put(t),t.currentIndex=i,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,i=t._next;return null===e?this._itHead=i:e._next=i,null===i?this._itTail=e:i._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new fR),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class qG{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class KG{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===e||e<=i.currentIndex)&&Object.is(i.trackById,t))return i;return null}remove(t){const e=t._prevDup,i=t._nextDup;return null===e?this._head=i:e._nextDup=i,null===i?this._tail=e:i._prevDup=e,null===this._head}}class fR{constructor(){this.map=new Map}put(t){const e=t.trackById;let i=this.map.get(e);i||(i=new KG,this.map.set(e,i)),i.add(t)}get(t,e){const r=this.map.get(t);return r?r.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function pR(n,t,e){const i=n.previousIndex;if(null===i)return i;let r=0;return e&&i<e.length&&(r=e[i]),i+t+r}function gR(){return new pf([new hR])}let pf=(()=>{class n{constructor(e){this.factories=e}static create(e,i){if(null!=i){const r=i.factories.slice();e=e.concat(r)}return new n(e)}static extend(e){return{provide:n,useFactory:i=>n.create(e,i||gR()),deps:[[n,new Yc,new Xc]]}}find(e){const i=this.factories.find(r=>r.supports(e));if(null!=i)return i;throw new oe(901,!1)}}return n.\u0275prov=de({token:n,providedIn:"root",factory:gR}),n})();const QG=tR(null,"core",[]);let eV=(()=>{class n{constructor(e){}}return n.\u0275fac=function(e){return new(e||n)(ye(Cu))},n.\u0275mod=Ht({type:n}),n.\u0275inj=jt({}),n})();function xv(n,t){const e=zt(n),i=t.elementInjector||Fh();return new cu(e).create(i,t.projectableNodes,t.hostElement,t.environmentInjector)}let wv=null;function Is(){return wv}class iV{}const Cn=new Ne("DocumentToken");let Dv=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=de({token:n,factory:function(){return function rV(){return ye(vR)}()},providedIn:"platform"}),n})();const sV=new Ne("Location Initialized");let vR=(()=>{class n extends Dv{constructor(e){super(),this._doc=e,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Is().getBaseHref(this._doc)}onPopState(e){const i=Is().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",e,!1),()=>i.removeEventListener("popstate",e)}onHashChange(e){const i=Is().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",e,!1),()=>i.removeEventListener("hashchange",e)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(e){this._location.pathname=e}pushState(e,i,r){yR()?this._history.pushState(e,i,r):this._location.hash=r}replaceState(e,i,r){yR()?this._history.replaceState(e,i,r):this._location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return n.\u0275fac=function(e){return new(e||n)(ye(Cn))},n.\u0275prov=de({token:n,factory:function(){return function oV(){return new vR(ye(Cn))}()},providedIn:"platform"}),n})();function yR(){return!!window.history.pushState}function Rv(n,t){if(0==n.length)return t;if(0==t.length)return n;let e=0;return n.endsWith("/")&&e++,t.startsWith("/")&&e++,2==e?n+t.substring(1):1==e?n+t:n+"/"+t}function bR(n){const t=n.match(/#|\?|$/),e=t&&t.index||n.length;return n.slice(0,e-("/"===n[e-1]?1:0))+n.slice(e)}function Ps(n){return n&&"?"!==n[0]?"?"+n:n}let ko=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=de({token:n,factory:function(){return gt(MR)},providedIn:"root"}),n})();const TR=new Ne("appBaseHref");let MR=(()=>{class n extends ko{constructor(e,i){super(),this._platformLocation=e,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??gt(Cn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return Rv(this._baseHref,e)}path(e=!1){const i=this._platformLocation.pathname+Ps(this._platformLocation.search),r=this._platformLocation.hash;return r&&e?`${i}${r}`:i}pushState(e,i,r,s){const o=this.prepareExternalUrl(r+Ps(s));this._platformLocation.pushState(e,i,o)}replaceState(e,i,r,s){const o=this.prepareExternalUrl(r+Ps(s));this._platformLocation.replaceState(e,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return n.\u0275fac=function(e){return new(e||n)(ye(Dv),ye(TR,8))},n.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),aV=(()=>{class n extends ko{constructor(e,i){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(e){const i=Rv(this._baseHref,e);return i.length>0?"#"+i:i}pushState(e,i,r,s){let o=this.prepareExternalUrl(r+Ps(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(e,i,o)}replaceState(e,i,r,s){let o=this.prepareExternalUrl(r+Ps(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(e,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return n.\u0275fac=function(e){return new(e||n)(ye(Dv),ye(TR,8))},n.\u0275prov=de({token:n,factory:n.\u0275fac}),n})(),Sv=(()=>{class n{constructor(e){this._subject=new Ce,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=e;const i=this._locationStrategy.getBaseHref();this._basePath=function uV(n){if(new RegExp("^(https?:)?//").test(n)){const[,e]=n.split(/\/\/[^\/]+/);return e}return n}(bR(xR(i))),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,i=""){return this.path()==this.normalize(e+Ps(i))}normalize(e){return n.stripTrailingSlash(function cV(n,t){if(!n||!t.startsWith(n))return t;const e=t.substring(n.length);return""===e||["/",";","?","#"].includes(e[0])?e:t}(this._basePath,xR(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,i="",r=null){this._locationStrategy.pushState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Ps(i)),r)}replaceState(e,i="",r=null){this._locationStrategy.replaceState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Ps(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",i){this._urlChangeListeners.forEach(r=>r(e,i))}subscribe(e,i,r){return this._subject.subscribe({next:e,error:i,complete:r})}}return n.normalizeQueryParams=Ps,n.joinWithSlash=Rv,n.stripTrailingSlash=bR,n.\u0275fac=function(e){return new(e||n)(ye(ko))},n.\u0275prov=de({token:n,factory:function(){return function lV(){return new Sv(ye(ko))}()},providedIn:"root"}),n})();function xR(n){return n.replace(/\/index.html$/,"")}var zi=(()=>((zi=zi||{})[zi.Decimal=0]="Decimal",zi[zi.Percent=1]="Percent",zi[zi.Currency=2]="Currency",zi[zi.Scientific=3]="Scientific",zi))(),an=(()=>((an=an||{})[an.Format=0]="Format",an[an.Standalone=1]="Standalone",an))(),st=(()=>((st=st||{})[st.Narrow=0]="Narrow",st[st.Abbreviated=1]="Abbreviated",st[st.Wide=2]="Wide",st[st.Short=3]="Short",st))(),vn=(()=>((vn=vn||{})[vn.Short=0]="Short",vn[vn.Medium=1]="Medium",vn[vn.Long=2]="Long",vn[vn.Full=3]="Full",vn))(),Ue=(()=>((Ue=Ue||{})[Ue.Decimal=0]="Decimal",Ue[Ue.Group=1]="Group",Ue[Ue.List=2]="List",Ue[Ue.PercentSign=3]="PercentSign",Ue[Ue.PlusSign=4]="PlusSign",Ue[Ue.MinusSign=5]="MinusSign",Ue[Ue.Exponential=6]="Exponential",Ue[Ue.SuperscriptingExponent=7]="SuperscriptingExponent",Ue[Ue.PerMille=8]="PerMille",Ue[Ue.Infinity=9]="Infinity",Ue[Ue.NaN=10]="NaN",Ue[Ue.TimeSeparator=11]="TimeSeparator",Ue[Ue.CurrencyDecimal=12]="CurrencyDecimal",Ue[Ue.CurrencyGroup=13]="CurrencyGroup",Ue))();function DR(n,t,e){const i=Ri(n),s=Rr([i[xe.DayPeriodsFormat],i[xe.DayPeriodsStandalone]],t);return Rr(s,e)}function RR(n,t,e){const i=Ri(n),s=Rr([i[xe.DaysFormat],i[xe.DaysStandalone]],t);return Rr(s,e)}function Cv(n,t,e){const i=Ri(n),s=Rr([i[xe.MonthsFormat],i[xe.MonthsStandalone]],t);return Rr(s,e)}function mf(n,t){return Rr(Ri(n)[xe.DateFormat],t)}function gf(n,t){return Rr(Ri(n)[xe.TimeFormat],t)}function _f(n,t){return Rr(Ri(n)[xe.DateTimeFormat],t)}function Dr(n,t){const e=Ri(n),i=e[xe.NumberSymbols][t];if(typeof i>"u"){if(t===Ue.CurrencyDecimal)return e[xe.NumberSymbols][Ue.Decimal];if(t===Ue.CurrencyGroup)return e[xe.NumberSymbols][Ue.Group]}return i}function SR(n){if(!n[xe.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[xe.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Rr(n,t){for(let e=t;e>-1;e--)if(typeof n[e]<"u")return n[e];throw new Error("Locale data API: locale data undefined")}function Av(n){const[t,e]=n.split(":");return{hours:+t,minutes:+e}}const bV=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Au={},TV=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var qn=(()=>((qn=qn||{})[qn.Short=0]="Short",qn[qn.ShortGMT=1]="ShortGMT",qn[qn.Long=2]="Long",qn[qn.Extended=3]="Extended",qn))(),Xe=(()=>((Xe=Xe||{})[Xe.FullYear=0]="FullYear",Xe[Xe.Month=1]="Month",Xe[Xe.Date=2]="Date",Xe[Xe.Hours=3]="Hours",Xe[Xe.Minutes=4]="Minutes",Xe[Xe.Seconds=5]="Seconds",Xe[Xe.FractionalSeconds=6]="FractionalSeconds",Xe[Xe.Day=7]="Day",Xe))(),ut=(()=>((ut=ut||{})[ut.DayPeriods=0]="DayPeriods",ut[ut.Days=1]="Days",ut[ut.Months=2]="Months",ut[ut.Eras=3]="Eras",ut))();function CR(n,t,e,i){let r=function AV(n){if(IR(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[r,s=1,o=1]=n.split("-").map(a=>+a);return vf(r,s-1,o)}const e=parseFloat(n);if(!isNaN(n-e))return new Date(e);let i;if(i=n.match(bV))return function IV(n){const t=new Date(0);let e=0,i=0;const r=n[8]?t.setUTCFullYear:t.setFullYear,s=n[8]?t.setUTCHours:t.setHours;n[9]&&(e=Number(n[9]+n[10]),i=Number(n[9]+n[11])),r.call(t,Number(n[1]),Number(n[2])-1,Number(n[3]));const o=Number(n[4]||0)-e,a=Number(n[5]||0)-i,l=Number(n[6]||0),c=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return s.call(t,o,a,l,c),t}(i)}const t=new Date(n);if(!IR(t))throw new Error(`Unable to convert "${n}" into a date`);return t}(n);t=Os(e,t)||t;let a,o=[];for(;t;){if(a=TV.exec(t),!a){o.push(t);break}{o=o.concat(a.slice(1));const u=o.pop();if(!u)break;t=u}}let l=r.getTimezoneOffset();i&&(l=AR(i,l),r=function EV(n,t,e){const i=e?-1:1,r=n.getTimezoneOffset();return function CV(n,t){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+t),n}(n,i*(AR(t,r)-r))}(r,i,!0));let c="";return o.forEach(u=>{const d=function SV(n){if(Pv[n])return Pv[n];let t;switch(n){case"G":case"GG":case"GGG":t=rn(ut.Eras,st.Abbreviated);break;case"GGGG":t=rn(ut.Eras,st.Wide);break;case"GGGGG":t=rn(ut.Eras,st.Narrow);break;case"y":t=Ln(Xe.FullYear,1,0,!1,!0);break;case"yy":t=Ln(Xe.FullYear,2,0,!0,!0);break;case"yyy":t=Ln(Xe.FullYear,3,0,!1,!0);break;case"yyyy":t=Ln(Xe.FullYear,4,0,!1,!0);break;case"Y":t=Mf(1);break;case"YY":t=Mf(2,!0);break;case"YYY":t=Mf(3);break;case"YYYY":t=Mf(4);break;case"M":case"L":t=Ln(Xe.Month,1,1);break;case"MM":case"LL":t=Ln(Xe.Month,2,1);break;case"MMM":t=rn(ut.Months,st.Abbreviated);break;case"MMMM":t=rn(ut.Months,st.Wide);break;case"MMMMM":t=rn(ut.Months,st.Narrow);break;case"LLL":t=rn(ut.Months,st.Abbreviated,an.Standalone);break;case"LLLL":t=rn(ut.Months,st.Wide,an.Standalone);break;case"LLLLL":t=rn(ut.Months,st.Narrow,an.Standalone);break;case"w":t=Iv(1);break;case"ww":t=Iv(2);break;case"W":t=Iv(1,!0);break;case"d":t=Ln(Xe.Date,1);break;case"dd":t=Ln(Xe.Date,2);break;case"c":case"cc":t=Ln(Xe.Day,1);break;case"ccc":t=rn(ut.Days,st.Abbreviated,an.Standalone);break;case"cccc":t=rn(ut.Days,st.Wide,an.Standalone);break;case"ccccc":t=rn(ut.Days,st.Narrow,an.Standalone);break;case"cccccc":t=rn(ut.Days,st.Short,an.Standalone);break;case"E":case"EE":case"EEE":t=rn(ut.Days,st.Abbreviated);break;case"EEEE":t=rn(ut.Days,st.Wide);break;case"EEEEE":t=rn(ut.Days,st.Narrow);break;case"EEEEEE":t=rn(ut.Days,st.Short);break;case"a":case"aa":case"aaa":t=rn(ut.DayPeriods,st.Abbreviated);break;case"aaaa":t=rn(ut.DayPeriods,st.Wide);break;case"aaaaa":t=rn(ut.DayPeriods,st.Narrow);break;case"b":case"bb":case"bbb":t=rn(ut.DayPeriods,st.Abbreviated,an.Standalone,!0);break;case"bbbb":t=rn(ut.DayPeriods,st.Wide,an.Standalone,!0);break;case"bbbbb":t=rn(ut.DayPeriods,st.Narrow,an.Standalone,!0);break;case"B":case"BB":case"BBB":t=rn(ut.DayPeriods,st.Abbreviated,an.Format,!0);break;case"BBBB":t=rn(ut.DayPeriods,st.Wide,an.Format,!0);break;case"BBBBB":t=rn(ut.DayPeriods,st.Narrow,an.Format,!0);break;case"h":t=Ln(Xe.Hours,1,-12);break;case"hh":t=Ln(Xe.Hours,2,-12);break;case"H":t=Ln(Xe.Hours,1);break;case"HH":t=Ln(Xe.Hours,2);break;case"m":t=Ln(Xe.Minutes,1);break;case"mm":t=Ln(Xe.Minutes,2);break;case"s":t=Ln(Xe.Seconds,1);break;case"ss":t=Ln(Xe.Seconds,2);break;case"S":t=Ln(Xe.FractionalSeconds,1);break;case"SS":t=Ln(Xe.FractionalSeconds,2);break;case"SSS":t=Ln(Xe.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":t=bf(qn.Short);break;case"ZZZZZ":t=bf(qn.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":t=bf(qn.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":t=bf(qn.Long);break;default:return null}return Pv[n]=t,t}(u);c+=d?d(r,e,l):"''"===u?"'":u.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),c}function vf(n,t,e){const i=new Date(0);return i.setFullYear(n,t,e),i.setHours(0,0,0),i}function Os(n,t){const e=function dV(n){return Ri(n)[xe.LocaleId]}(n);if(Au[e]=Au[e]||{},Au[e][t])return Au[e][t];let i="";switch(t){case"shortDate":i=mf(n,vn.Short);break;case"mediumDate":i=mf(n,vn.Medium);break;case"longDate":i=mf(n,vn.Long);break;case"fullDate":i=mf(n,vn.Full);break;case"shortTime":i=gf(n,vn.Short);break;case"mediumTime":i=gf(n,vn.Medium);break;case"longTime":i=gf(n,vn.Long);break;case"fullTime":i=gf(n,vn.Full);break;case"short":const r=Os(n,"shortTime"),s=Os(n,"shortDate");i=yf(_f(n,vn.Short),[r,s]);break;case"medium":const o=Os(n,"mediumTime"),a=Os(n,"mediumDate");i=yf(_f(n,vn.Medium),[o,a]);break;case"long":const l=Os(n,"longTime"),c=Os(n,"longDate");i=yf(_f(n,vn.Long),[l,c]);break;case"full":const u=Os(n,"fullTime"),d=Os(n,"fullDate");i=yf(_f(n,vn.Full),[u,d])}return i&&(Au[e][t]=i),i}function yf(n,t){return t&&(n=n.replace(/\{([^}]+)}/g,function(e,i){return null!=t&&i in t?t[i]:e})),n}function zr(n,t,e="-",i,r){let s="";(n<0||r&&n<=0)&&(r?n=1-n:(n=-n,s=e));let o=String(n);for(;o.length<t;)o="0"+o;return i&&(o=o.slice(o.length-t)),s+o}function Ln(n,t,e=0,i=!1,r=!1){return function(s,o){let a=function xV(n,t){switch(n){case Xe.FullYear:return t.getFullYear();case Xe.Month:return t.getMonth();case Xe.Date:return t.getDate();case Xe.Hours:return t.getHours();case Xe.Minutes:return t.getMinutes();case Xe.Seconds:return t.getSeconds();case Xe.FractionalSeconds:return t.getMilliseconds();case Xe.Day:return t.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,s);if((e>0||a>-e)&&(a+=e),n===Xe.Hours)0===a&&-12===e&&(a=12);else if(n===Xe.FractionalSeconds)return function MV(n,t){return zr(n,3).substring(0,t)}(a,t);const l=Dr(o,Ue.MinusSign);return zr(a,t,l,i,r)}}function rn(n,t,e=an.Format,i=!1){return function(r,s){return function wV(n,t,e,i,r,s){switch(e){case ut.Months:return Cv(t,r,i)[n.getMonth()];case ut.Days:return RR(t,r,i)[n.getDay()];case ut.DayPeriods:const o=n.getHours(),a=n.getMinutes();if(s){const c=function mV(n){const t=Ri(n);return SR(t),(t[xe.ExtraData][2]||[]).map(i=>"string"==typeof i?Av(i):[Av(i[0]),Av(i[1])])}(t),u=function gV(n,t,e){const i=Ri(n);SR(i);const s=Rr([i[xe.ExtraData][0],i[xe.ExtraData][1]],t)||[];return Rr(s,e)||[]}(t,r,i),d=c.findIndex(h=>{if(Array.isArray(h)){const[f,m]=h,p=o>=f.hours&&a>=f.minutes,g=o<m.hours||o===m.hours&&a<m.minutes;if(f.hours<m.hours){if(p&&g)return!0}else if(p||g)return!0}else if(h.hours===o&&h.minutes===a)return!0;return!1});if(-1!==d)return u[d]}return DR(t,r,i)[o<12?0:1];case ut.Eras:return function hV(n,t){return Rr(Ri(n)[xe.Eras],t)}(t,i)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${e}`)}}(r,s,n,t,e,i)}}function bf(n){return function(t,e,i){const r=-1*i,s=Dr(e,Ue.MinusSign),o=r>0?Math.floor(r/60):Math.ceil(r/60);switch(n){case qn.Short:return(r>=0?"+":"")+zr(o,2,s)+zr(Math.abs(r%60),2,s);case qn.ShortGMT:return"GMT"+(r>=0?"+":"")+zr(o,1,s);case qn.Long:return"GMT"+(r>=0?"+":"")+zr(o,2,s)+":"+zr(Math.abs(r%60),2,s);case qn.Extended:return 0===i?"Z":(r>=0?"+":"")+zr(o,2,s)+":"+zr(Math.abs(r%60),2,s);default:throw new Error(`Unknown zone width "${n}"`)}}}const DV=0,Tf=4;function ER(n){return vf(n.getFullYear(),n.getMonth(),n.getDate()+(Tf-n.getDay()))}function Iv(n,t=!1){return function(e,i){let r;if(t){const s=new Date(e.getFullYear(),e.getMonth(),1).getDay()-1,o=e.getDate();r=1+Math.floor((o+s)/7)}else{const s=ER(e),o=function RV(n){const t=vf(n,DV,1).getDay();return vf(n,0,1+(t<=Tf?Tf:Tf+7)-t)}(s.getFullYear()),a=s.getTime()-o.getTime();r=1+Math.round(a/6048e5)}return zr(r,n,Dr(i,Ue.MinusSign))}}function Mf(n,t=!1){return function(e,i){return zr(ER(e).getFullYear(),n,Dr(i,Ue.MinusSign),t)}}const Pv={};function AR(n,t){n=n.replace(/:/g,"");const e=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(e)?t:e}function IR(n){return n instanceof Date&&!isNaN(n.valueOf())}const PV=/^(\d+)?\.((\d+)(-(\d+))?)?$/,PR=22,xf=".",Iu="0",OV=";",NV=",",Ov="#";function Lv(n){const t=parseInt(n);if(isNaN(t))throw new Error("Invalid integer literal when parsing "+n);return t}class $V{constructor(t,e,i,r){this.$implicit=t,this.ngForOf=e,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Wr=(()=>{class n{set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}constructor(e,i,r){this._viewContainer=e,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const i=this._viewContainer;e.forEachOperation((r,s,o)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new $V(r.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)i.remove(null===s?void 0:s);else if(null!==s){const a=i.get(s);i.move(a,o),jR(a,r)}});for(let r=0,s=i.length;r<s;r++){const a=i.get(r).context;a.index=r,a.count=s,a.ngForOf=this._ngForOf}e.forEachIdentityChange(r=>{jR(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(e,i){return!0}}return n.\u0275fac=function(e){return new(e||n)(I(wr),I(nn),I(pf))},n.\u0275dir=he({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function jR(n,t){n.context.$implicit=t.item}let sr=(()=>{class n{constructor(e,i){this._viewContainer=e,this._context=new KV,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){kR("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){kR("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,i){return!0}}return n.\u0275fac=function(e){return new(e||n)(I(wr),I(nn))},n.\u0275dir=he({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class KV{constructor(){this.$implicit=null,this.ngIf=null}}function kR(n,t){if(t&&!t.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${tn(t)}'.`)}let cs=(()=>{class n{constructor(e){this._viewContainerRef=e,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(e){if(e.ngTemplateOutlet||e.ngTemplateOutletInjector){const i=this._viewContainerRef;if(this._viewRef&&i.remove(i.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:r,ngTemplateOutletContext:s,ngTemplateOutletInjector:o}=this;this._viewRef=i.createEmbeddedView(r,s,o?{injector:o}:void 0)}else this._viewRef=null}else this._viewRef&&e.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return n.\u0275fac=function(e){return new(e||n)(I(wr))},n.\u0275dir=he({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[gn]}),n})();let UR=(()=>{class n{constructor(e){this._locale=e}transform(e,i,r){if(!function Vv(n){return!(null==n||""===n||n!=n)}(e))return null;r=r||this._locale;try{return function BV(n,t,e){return function Nv(n,t,e,i,r,s,o=!1){let a="",l=!1;if(isFinite(n)){let c=function GV(n){let i,r,s,o,a,t=Math.abs(n)+"",e=0;for((r=t.indexOf(xf))>-1&&(t=t.replace(xf,"")),(s=t.search(/e/i))>0?(r<0&&(r=s),r+=+t.slice(s+1),t=t.substring(0,s)):r<0&&(r=t.length),s=0;t.charAt(s)===Iu;s++);if(s===(a=t.length))i=[0],r=1;else{for(a--;t.charAt(a)===Iu;)a--;for(r-=s,i=[],o=0;s<=a;s++,o++)i[o]=Number(t.charAt(s))}return r>PR&&(i=i.splice(0,PR-1),e=r-1,r=1),{digits:i,exponent:e,integerLen:r}}(n);o&&(c=function kV(n){if(0===n.digits[0])return n;const t=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(0===t?n.digits.push(0,0):1===t&&n.digits.push(0),n.integerLen+=2),n}(c));let u=t.minInt,d=t.minFrac,h=t.maxFrac;if(s){const y=s.match(PV);if(null===y)throw new Error(`${s} is not a valid digit info`);const _=y[1],b=y[3],M=y[5];null!=_&&(u=Lv(_)),null!=b&&(d=Lv(b)),null!=M?h=Lv(M):null!=b&&d>h&&(h=d)}!function VV(n,t,e){if(t>e)throw new Error(`The minimum number of digits after fraction (${t}) is higher than the maximum (${e}).`);let i=n.digits,r=i.length-n.integerLen;const s=Math.min(Math.max(t,r),e);let o=s+n.integerLen,a=i[o];if(o>0){i.splice(Math.max(n.integerLen,o));for(let d=o;d<i.length;d++)i[d]=0}else{r=Math.max(0,r),n.integerLen=1,i.length=Math.max(1,o=s+1),i[0]=0;for(let d=1;d<o;d++)i[d]=0}if(a>=5)if(o-1<0){for(let d=0;d>o;d--)i.unshift(0),n.integerLen++;i.unshift(1),n.integerLen++}else i[o-1]++;for(;r<Math.max(0,s);r++)i.push(0);let l=0!==s;const c=t+n.integerLen,u=i.reduceRight(function(d,h,f,m){return m[f]=(h+=d)<10?h:h-10,l&&(0===m[f]&&f>=c?m.pop():l=!1),h>=10?1:0},0);u&&(i.unshift(u),n.integerLen++)}(c,d,h);let f=c.digits,m=c.integerLen;const p=c.exponent;let g=[];for(l=f.every(y=>!y);m<u;m++)f.unshift(0);for(;m<0;m++)f.unshift(0);m>0?g=f.splice(m,f.length):(g=f,f=[0]);const v=[];for(f.length>=t.lgSize&&v.unshift(f.splice(-t.lgSize,f.length).join(""));f.length>t.gSize;)v.unshift(f.splice(-t.gSize,f.length).join(""));f.length&&v.unshift(f.join("")),a=v.join(Dr(e,i)),g.length&&(a+=Dr(e,r)+g.join("")),p&&(a+=Dr(e,Ue.Exponential)+"+"+p)}else a=Dr(e,Ue.Infinity);return a=n<0&&!l?t.negPre+a+t.negSuf:t.posPre+a+t.posSuf,a}(n,function Fv(n,t="-"){const e={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},i=n.split(OV),r=i[0],s=i[1],o=-1!==r.indexOf(xf)?r.split(xf):[r.substring(0,r.lastIndexOf(Iu)+1),r.substring(r.lastIndexOf(Iu)+1)],a=o[0],l=o[1]||"";e.posPre=a.substring(0,a.indexOf(Ov));for(let u=0;u<l.length;u++){const d=l.charAt(u);d===Iu?e.minFrac=e.maxFrac=u+1:d===Ov?e.maxFrac=u+1:e.posSuf+=d}const c=a.split(NV);if(e.gSize=c[1]?c[1].length:0,e.lgSize=c[2]||c[1]?(c[2]||c[1]).length:0,s){const u=r.length-e.posPre.length-e.posSuf.length,d=s.indexOf(Ov);e.negPre=s.substring(0,d).replace(/'/g,""),e.negSuf=s.slice(d+u).replace(/'/g,"")}else e.negPre=t+e.posPre,e.negSuf=e.posSuf;return e}(function Ev(n,t){return Ri(n)[xe.NumberFormats][t]}(t,zi.Percent),Dr(t,Ue.MinusSign)),t,Ue.Group,Ue.Decimal,e,!0).replace(new RegExp("%","g"),Dr(t,Ue.PercentSign))}(function Uv(n){if("string"==typeof n&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if("number"!=typeof n)throw new Error(`${n} is not a number`);return n}(e),r,i)}catch(s){throw function $r(n,t){return new oe(2100,!1)}()}}}return n.\u0275fac=function(e){return new(e||n)(I(rr,16))},n.\u0275pipe=Li({name:"percent",type:n,pure:!0,standalone:!0}),n})();let HR=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ht({type:n}),n.\u0275inj=jt({}),n})();const zR="browser";let wU=(()=>{class n{}return n.\u0275prov=de({token:n,providedIn:"root",factory:()=>new DU(ye(Cn),window)}),n})();class DU{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function RU(n,t){const e=n.getElementById(t)||n.getElementsByName(t)[0];if(e)return e;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const s=r.shadowRoot;if(s){const o=s.getElementById(t)||s.querySelector(`[name="${t}"]`);if(o)return o}r=i.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),i=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(i-s[0],r-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=WR(this.window.history)||WR(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function WR(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class eH extends iV{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Wv extends eH{static makeCurrent(){!function nV(n){wv||(wv=n)}(new Wv)}onAndCancel(t,e,i){return t.addEventListener(e,i,!1),()=>{t.removeEventListener(e,i,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=function tH(){return Ou=Ou||document.querySelector("base"),Ou?Ou.getAttribute("href"):null}();return null==e?null:function nH(n){Rf=Rf||document.createElement("a"),Rf.setAttribute("href",n);const t=Rf.pathname;return"/"===t.charAt(0)?t:`/${t}`}(e)}resetBaseElement(){Ou=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return function HV(n,t){t=encodeURIComponent(t);for(const e of n.split(";")){const i=e.indexOf("="),[r,s]=-1==i?[e,""]:[e.slice(0,i),e.slice(i+1)];if(r.trim()===t)return decodeURIComponent(s)}return null}(document.cookie,t)}}let Rf,Ou=null;const YR=new Ne("TRANSITION_ID"),rH=[{provide:lf,useFactory:function iH(n,t,e){return()=>{e.get(cf).donePromise.then(()=>{const i=Is(),r=t.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<r.length;s++)i.remove(r[s])})}},deps:[YR,Cn,tr],multi:!0}];let oH=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=de({token:n,factory:n.\u0275fac}),n})();const Sf=new Ne("EventManagerPlugins");let Cf=(()=>{class n{constructor(e,i){this._zone=i,this._eventNameToPlugin=new Map,e.forEach(r=>{r.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,i,r){return this._findPluginFor(i).addEventListener(e,i,r)}addGlobalEventListener(e,i,r){return this._findPluginFor(i).addGlobalEventListener(e,i,r)}getZone(){return this._zone}_findPluginFor(e){const i=this._eventNameToPlugin.get(e);if(i)return i;const r=this._plugins;for(let s=0;s<r.length;s++){const o=r[s];if(o.supports(e))return this._eventNameToPlugin.set(e,o),o}throw new Error(`No event manager plugin found for event ${e}`)}}return n.\u0275fac=function(e){return new(e||n)(ye(Sf),ye(Dt))},n.\u0275prov=de({token:n,factory:n.\u0275fac}),n})();class JR{constructor(t){this._doc=t}addGlobalEventListener(t,e,i){const r=Is().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,i)}}let ZR=(()=>{class n{constructor(){this.usageCount=new Map}addStyles(e){for(const i of e)1===this.changeUsageCount(i,1)&&this.onStyleAdded(i)}removeStyles(e){for(const i of e)0===this.changeUsageCount(i,-1)&&this.onStyleRemoved(i)}onStyleRemoved(e){}onStyleAdded(e){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(e,i){const r=this.usageCount;let s=r.get(e)??0;return s+=i,s>0?r.set(e,s):r.delete(e),s}ngOnDestroy(){for(const e of this.getAllStyles())this.onStyleRemoved(e);this.usageCount.clear()}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=de({token:n,factory:n.\u0275fac}),n})(),Nu=(()=>{class n extends ZR{constructor(e){super(),this.doc=e,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(e){for(const i of this.hostNodes)this.addStyleToHost(i,e)}onStyleRemoved(e){const i=this.styleRef;i.get(e)?.forEach(s=>s.remove()),i.delete(e)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(e){this.hostNodes.add(e);for(const i of this.getAllStyles())this.addStyleToHost(e,i)}removeHost(e){this.hostNodes.delete(e)}addStyleToHost(e,i){const r=this.doc.createElement("style");r.textContent=i,e.appendChild(r);const s=this.styleRef.get(i);s?s.push(r):this.styleRef.set(i,[r])}resetHostNodes(){const e=this.hostNodes;e.clear(),e.add(this.doc.head)}}return n.\u0275fac=function(e){return new(e||n)(ye(Cn))},n.\u0275prov=de({token:n,factory:n.\u0275fac}),n})();const $v={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},qv=/%COMP%/g,tS=new Ne("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function nS(n,t){return t.flat(100).map(e=>e.replace(qv,n))}function iS(n){return t=>{if("__ngUnwrap__"===t)return n;!1===n(t)&&(t.preventDefault(),t.returnValue=!1)}}let Kv=(()=>{class n{constructor(e,i,r,s){this.eventManager=e,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestory=s,this.rendererByCompId=new Map,this.defaultRenderer=new Xv(e)}createRenderer(e,i){if(!e||!i)return this.defaultRenderer;const r=this.getOrCreateRenderer(e,i);return r instanceof oS?r.applyToHost(e):r instanceof Yv&&r.applyStyles(),r}getOrCreateRenderer(e,i){const r=this.rendererByCompId;let s=r.get(i.id);if(!s){const o=this.eventManager,a=this.sharedStylesHost,l=this.removeStylesOnCompDestory;switch(i.encapsulation){case ts.Emulated:s=new oS(o,a,i,this.appId,l);break;case ts.ShadowDom:return new fH(o,a,e,i);default:s=new Yv(o,a,i,l)}s.onDestroy=()=>r.delete(i.id),r.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return n.\u0275fac=function(e){return new(e||n)(ye(Cf),ye(Nu),ye(Su),ye(tS))},n.\u0275prov=de({token:n,factory:n.\u0275fac}),n})();class Xv{constructor(t){this.eventManager=t,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,e){return e?document.createElementNS($v[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){(sS(t)?t.content:t).appendChild(e)}insertBefore(t,e,i){t&&(sS(t)?t.content:t).insertBefore(e,i)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let i="string"==typeof t?document.querySelector(t):t;if(!i)throw new Error(`The selector "${t}" did not match any elements`);return e||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,i,r){if(r){e=r+":"+e;const s=$v[r];s?t.setAttributeNS(s,e,i):t.setAttribute(e,i)}else t.setAttribute(e,i)}removeAttribute(t,e,i){if(i){const r=$v[i];r?t.removeAttributeNS(r,e):t.removeAttribute(`${i}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,i,r){r&(ki.DashCase|ki.Important)?t.style.setProperty(e,i,r&ki.Important?"important":""):t.style[e]=i}removeStyle(t,e,i){i&ki.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,i){t[e]=i}setValue(t,e){t.nodeValue=e}listen(t,e,i){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,iS(i)):this.eventManager.addEventListener(t,e,iS(i))}}function sS(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class fH extends Xv{constructor(t,e,i,r){super(t),this.sharedStylesHost=e,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=nS(r.id,r.styles);for(const o of s){const a=document.createElement("style");a.textContent=o,this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,i){return super.insertBefore(this.nodeOrShadowRoot(t),e,i)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Yv extends Xv{constructor(t,e,i,r,s=i.id){super(t),this.sharedStylesHost=e,this.removeStylesOnCompDestory=r,this.rendererUsageCount=0,this.styles=nS(s,i.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class oS extends Yv{constructor(t,e,i,r,s){const o=r+"-"+i.id;super(t,e,i,s,o),this.contentAttr=function uH(n){return"_ngcontent-%COMP%".replace(qv,n)}(o),this.hostAttr=function dH(n){return"_nghost-%COMP%".replace(qv,n)}(o)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){const i=super.createElement(t,e);return super.setAttribute(i,this.contentAttr,""),i}}let pH=(()=>{class n extends JR{constructor(e){super(e)}supports(e){return!0}addEventListener(e,i,r){return e.addEventListener(i,r,!1),()=>this.removeEventListener(e,i,r)}removeEventListener(e,i,r){return e.removeEventListener(i,r)}}return n.\u0275fac=function(e){return new(e||n)(ye(Cn))},n.\u0275prov=de({token:n,factory:n.\u0275fac}),n})();const aS=["alt","control","meta","shift"],mH={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},gH={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let _H=(()=>{class n extends JR{constructor(e){super(e)}supports(e){return null!=n.parseEventName(e)}addEventListener(e,i,r){const s=n.parseEventName(i),o=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Is().onAndCancel(e,s.domEventName,o))}static parseEventName(e){const i=e.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const s=n._normalizeKey(i.pop());let o="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),o="code."),aS.forEach(c=>{const u=i.indexOf(c);u>-1&&(i.splice(u,1),o+=c+".")}),o+=s,0!=i.length||0===s.length)return null;const l={};return l.domEventName=r,l.fullKey=o,l}static matchEventFullKeyCode(e,i){let r=mH[e.key]||e.key,s="";return i.indexOf("code.")>-1&&(r=e.code,s="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),aS.forEach(o=>{o!==r&&(0,gH[o])(e)&&(s+=o+".")}),s+=r,s===i)}static eventCallback(e,i,r){return s=>{n.matchEventFullKeyCode(s,e)&&r.runGuarded(()=>i(s))}}static _normalizeKey(e){return"esc"===e?"escape":e}}return n.\u0275fac=function(e){return new(e||n)(ye(Cn))},n.\u0275prov=de({token:n,factory:n.\u0275fac}),n})();const cS=[{provide:uv,useValue:zR},{provide:z1,useValue:function vH(){Wv.makeCurrent()},multi:!0},{provide:Cn,useFactory:function bH(){return function hB(n){Qg=n}(document),document},deps:[]}],TH=tR(QG,"browser",cS),uS=new Ne(""),dS=[{provide:uf,useClass:class sH{addToWindow(t){sn.getAngularTestability=(i,r=!0)=>{const s=t.findTestabilityInTree(i,r);if(null==s)throw new Error("Could not find testability for element.");return s},sn.getAllAngularTestabilities=()=>t.getAllTestabilities(),sn.getAllAngularRootElements=()=>t.getAllRootElements(),sn.frameworkStabilizers||(sn.frameworkStabilizers=[]),sn.frameworkStabilizers.push(i=>{const r=sn.getAllAngularTestabilities();let s=r.length,o=!1;const a=function(l){o=o||l,s--,0==s&&i(o)};r.forEach(function(l){l.whenStable(a)})})}findTestabilityInTree(t,e,i){return null==e?null:t.getTestability(e)??(i?Is().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null)}},deps:[]},{provide:Y1,useClass:pv,deps:[Dt,mv,uf]},{provide:pv,useClass:pv,deps:[Dt,mv,uf]}],hS=[{provide:l_,useValue:"root"},{provide:il,useFactory:function yH(){return new il},deps:[]},{provide:Sf,useClass:pH,multi:!0,deps:[Cn,Dt,uv]},{provide:Sf,useClass:_H,multi:!0,deps:[Cn]},{provide:Kv,useClass:Kv,deps:[Cf,Nu,Su,tS]},{provide:h_,useExisting:Kv},{provide:ZR,useExisting:Nu},{provide:Nu,useClass:Nu,deps:[Cn]},{provide:Cf,useClass:Cf,deps:[Sf,Dt]},{provide:class SU{},useClass:oH,deps:[]},[]];let fS=(()=>{class n{constructor(e){}static withServerTransition(e){return{ngModule:n,providers:[{provide:Su,useValue:e.appId},{provide:YR,useExisting:Su},rH]}}}return n.\u0275fac=function(e){return new(e||n)(ye(uS,12))},n.\u0275mod=Ht({type:n}),n.\u0275inj=jt({providers:[...hS,...dS],imports:[HR,eV]}),n})(),pS=(()=>{class n{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}}return n.\u0275fac=function(e){return new(e||n)(ye(Cn))},n.\u0275prov=de({token:n,factory:function(e){let i=null;return i=e?new e:function xH(){return new pS(ye(Cn))}(),i},providedIn:"root"}),n})();function Be(...n){return Pn(n,Nc(n))}typeof window<"u"&&window;class Qn extends Kt{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){const{hasError:t,thrownError:e,_value:i}=this;if(t)throw e;return this._throwIfClosed(),i}next(t){super.next(this._value=t)}}const Ef=Pc(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"}),{isArray:EH}=Array,{getPrototypeOf:AH,prototype:IH,keys:PH}=Object;const{isArray:NH}=Array;function Qv(n){return tt(t=>function FH(n,t){return NH(t)?n(...t):n(t)}(n,t))}function Af(...n){const t=Nc(n),e=Qd(n),{args:i,keys:r}=function _S(n){if(1===n.length){const t=n[0];if(EH(t))return{args:t,keys:null};if(function OH(n){return n&&"object"==typeof n&&AH(n)===IH}(t)){const e=PH(t);return{args:e.map(i=>t[i]),keys:e}}}return{args:n,keys:null}}(n);if(0===i.length)return Pn([],t);const s=new Qt(function LH(n,t,e=ys){return i=>{yS(t,()=>{const{length:r}=n,s=new Array(r);let o=r,a=r;for(let l=0;l<r;l++)yS(t,()=>{const c=Pn(n[l],t);let u=!1;c.subscribe(en(i,d=>{s[l]=d,u||(u=!0,a--),a||i.next(e(s.slice()))},()=>{--o||i.complete()}))},i)},i)}}(i,t,r?o=>function vS(n,t){return n.reduce((e,i,r)=>(e[i]=t[r],e),{})}(r,o):ys));return e?s.pipe(Qv(e)):s}function yS(n,t,e){n?bs(e,n,t):t()}function Fu(...n){return function BH(){return La(1)}()(Pn(n,Nc(n)))}function bS(n){return new Qt(t=>{Hn(n()).subscribe(t)})}function Lu(n,t){const e=Pt(n)?n:()=>n,i=r=>r.error(e());return new Qt(t?r=>t.schedule(i,0,r):i)}function ey(){return Tn((n,t)=>{let e=null;n._refCount++;const i=en(t,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(e=null);const r=n._connection,s=e;e=null,r&&(!s||r===s)&&r.unsubscribe(),t.unsubscribe()});n.subscribe(i),i.closed||(e=n.connect())})}class TS extends Qt{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,MT(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new Xi;const e=this.getSubject();t.add(this.source.subscribe(en(e,void 0,()=>{this._teardown(),e.complete()},i=>{this._teardown(),e.error(i)},()=>this._teardown()))),t.closed&&(this._connection=null,t=Xi.EMPTY)}return t}refCount(){return ey()(this)}}function Sr(n,t){return Tn((e,i)=>{let r=null,s=0,o=!1;const a=()=>o&&!r&&i.complete();e.subscribe(en(i,l=>{r?.unsubscribe();let c=0;const u=s++;Hn(n(l,u)).subscribe(r=en(i,d=>i.next(t?t(l,d,u,c++):d),()=>{r=null,a()}))},()=>{o=!0,a()}))})}function Bn(n){return n<=0?()=>vr:Tn((t,e)=>{let i=0;t.subscribe(en(e,r=>{++i<=n&&(e.next(r),n<=i&&e.complete())}))})}function If(...n){const t=Nc(n);return Tn((e,i)=>{(t?Fu(n,e,t):Fu(n,e)).subscribe(i)})}function ei(n,t){return Tn((e,i)=>{let r=0;e.subscribe(en(i,s=>n.call(t,s,r++)&&i.next(s)))})}function Pf(n){return Tn((t,e)=>{let i=!1;t.subscribe(en(e,r=>{i=!0,e.next(r)},()=>{i||e.next(n),e.complete()}))})}function MS(n=jH){return Tn((t,e)=>{let i=!1;t.subscribe(en(e,r=>{i=!0,e.next(r)},()=>i?e.complete():e.error(n())))})}function jH(){return new Ef}function ro(n,t){const e=arguments.length>=2;return i=>i.pipe(n?ei((r,s)=>n(r,s,i)):ys,Bn(1),e?Pf(t):MS(()=>new Ef))}function Go(n,t){return Pt(t)?zn(n,t,1):zn(n,1)}function ti(n,t,e){const i=Pt(n)||t||e?{next:n,error:t,complete:e}:n;return i?Tn((r,s)=>{var o;null===(o=i.subscribe)||void 0===o||o.call(i);let a=!0;r.subscribe(en(s,l=>{var c;null===(c=i.next)||void 0===c||c.call(i,l),s.next(l)},()=>{var l;a=!1,null===(l=i.complete)||void 0===l||l.call(i),s.complete()},l=>{var c;a=!1,null===(c=i.error)||void 0===c||c.call(i,l),s.error(l)},()=>{var l,c;a&&(null===(l=i.unsubscribe)||void 0===l||l.call(i)),null===(c=i.finalize)||void 0===c||c.call(i)}))}):ys}function so(n){return Tn((t,e)=>{let s,i=null,r=!1;i=t.subscribe(en(e,void 0,void 0,o=>{s=Hn(n(o,so(n)(t))),i?(i.unsubscribe(),i=null,s.subscribe(e)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(e))})}function xS(n,t){return Tn(function kH(n,t,e,i,r){return(s,o)=>{let a=e,l=t,c=0;s.subscribe(en(o,u=>{const d=c++;l=a?n(l,u,d):(a=!0,u),i&&o.next(l)},r&&(()=>{a&&o.next(l),o.complete()})))}}(n,t,arguments.length>=2,!0))}function ty(n){return n<=0?()=>vr:Tn((t,e)=>{let i=[];t.subscribe(en(e,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(const r of i)e.next(r);e.complete()},void 0,()=>{i=null}))})}function wS(n,t){const e=arguments.length>=2;return i=>i.pipe(n?ei((r,s)=>n(r,s,i)):ys,ty(1),e?Pf(t):MS(()=>new Ef))}function ny(n){return Tn((t,e)=>{try{t.subscribe(e)}finally{e.add(n)}})}const ot="primary",Bu=Symbol("RouteTitle");class VH{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function Dl(n){return new VH(n)}function UH(n,t,e){const i=e.path.split("/");if(i.length>n.length||"full"===e.pathMatch&&(t.hasChildren()||i.length<n.length))return null;const r={};for(let s=0;s<i.length;s++){const o=i[s],a=n[s];if(o.startsWith(":"))r[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function us(n,t){const e=n?Object.keys(n):void 0,i=t?Object.keys(t):void 0;if(!e||!i||e.length!=i.length)return!1;let r;for(let s=0;s<e.length;s++)if(r=e[s],!RS(n[r],t[r]))return!1;return!0}function RS(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;const e=[...n].sort(),i=[...t].sort();return e.every((r,s)=>i[s]===r)}return n===t}function SS(n){return Array.prototype.concat.apply([],n)}function CS(n){return n.length>0?n[n.length-1]:null}function ui(n,t){for(const e in n)n.hasOwnProperty(e)&&t(n[e],e)}function oo(n){return F_(n)?n:hu(n)?Pn(Promise.resolve(n)):Be(n)}const Of=!1,zH={exact:function IS(n,t,e){if(!Vo(n.segments,t.segments)||!Nf(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(const i in t.children)if(!n.children[i]||!IS(n.children[i],t.children[i],e))return!1;return!0},subset:PS},ES={exact:function WH(n,t){return us(n,t)},subset:function $H(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>RS(n[e],t[e]))},ignored:()=>!0};function AS(n,t,e){return zH[e.paths](n.root,t.root,e.matrixParams)&&ES[e.queryParams](n.queryParams,t.queryParams)&&!("exact"===e.fragment&&n.fragment!==t.fragment)}function PS(n,t,e){return OS(n,t,t.segments,e)}function OS(n,t,e,i){if(n.segments.length>e.length){const r=n.segments.slice(0,e.length);return!(!Vo(r,e)||t.hasChildren()||!Nf(r,e,i))}if(n.segments.length===e.length){if(!Vo(n.segments,e)||!Nf(n.segments,e,i))return!1;for(const r in t.children)if(!n.children[r]||!PS(n.children[r],t.children[r],i))return!1;return!0}{const r=e.slice(0,n.segments.length),s=e.slice(n.segments.length);return!!(Vo(n.segments,r)&&Nf(n.segments,r,i)&&n.children[ot])&&OS(n.children[ot],t,s,i)}}function Nf(n,t,e){return t.every((i,r)=>ES[e](n[r].parameters,i.parameters))}class ao{constructor(t=new pt([],{}),e={},i=null){this.root=t,this.queryParams=e,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Dl(this.queryParams)),this._queryParamMap}toString(){return XH.serialize(this)}}class pt{constructor(t,e){this.segments=t,this.children=e,this.parent=null,ui(e,(i,r)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ff(this)}}class ju{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=Dl(this.parameters)),this._parameterMap}toString(){return LS(this)}}function Vo(n,t){return n.length===t.length&&n.every((e,i)=>e.path===t[i].path)}let ku=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=de({token:n,factory:function(){return new iy},providedIn:"root"}),n})();class iy{parse(t){const e=new rz(t);return new ao(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){const e=`/${Gu(t.root,!0)}`,i=function ZH(n){const t=Object.keys(n).map(e=>{const i=n[e];return Array.isArray(i)?i.map(r=>`${Lf(e)}=${Lf(r)}`).join("&"):`${Lf(e)}=${Lf(i)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(t.queryParams);return`${e}${i}${"string"==typeof t.fragment?`#${function YH(n){return encodeURI(n)}(t.fragment)}`:""}`}}const XH=new iy;function Ff(n){return n.segments.map(t=>LS(t)).join("/")}function Gu(n,t){if(!n.hasChildren())return Ff(n);if(t){const e=n.children[ot]?Gu(n.children[ot],!1):"",i=[];return ui(n.children,(r,s)=>{s!==ot&&i.push(`${s}:${Gu(r,!1)}`)}),i.length>0?`${e}(${i.join("//")})`:e}{const e=function KH(n,t){let e=[];return ui(n.children,(i,r)=>{r===ot&&(e=e.concat(t(i,r)))}),ui(n.children,(i,r)=>{r!==ot&&(e=e.concat(t(i,r)))}),e}(n,(i,r)=>r===ot?[Gu(n.children[ot],!1)]:[`${r}:${Gu(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[ot]?`${Ff(n)}/${e[0]}`:`${Ff(n)}/(${e.join("//")})`}}function NS(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Lf(n){return NS(n).replace(/%3B/gi,";")}function ry(n){return NS(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Bf(n){return decodeURIComponent(n)}function FS(n){return Bf(n.replace(/\+/g,"%20"))}function LS(n){return`${ry(n.path)}${function JH(n){return Object.keys(n).map(t=>`;${ry(t)}=${ry(n[t])}`).join("")}(n.parameters)}`}const QH=/^[^\/()?;=#]+/;function jf(n){const t=n.match(QH);return t?t[0]:""}const ez=/^[^=?&#]+/,nz=/^[^&#]+/;class rz{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new pt([],{}):new pt([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(i[ot]=new pt(t,e)),i}parseSegment(){const t=jf(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new oe(4009,Of);return this.capture(t),new ju(Bf(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=jf(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const r=jf(this.remaining);r&&(i=r,this.capture(i))}t[Bf(e)]=Bf(i)}parseQueryParam(t){const e=function tz(n){const t=n.match(ez);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const o=function iz(n){const t=n.match(nz);return t?t[0]:""}(this.remaining);o&&(i=o,this.capture(i))}const r=FS(e),s=FS(i);if(t.hasOwnProperty(r)){let o=t[r];Array.isArray(o)||(o=[o],t[r]=o),o.push(s)}else t[r]=s}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=jf(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new oe(4010,Of);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):t&&(s=ot);const o=this.parseChildren();e[s]=1===Object.keys(o).length?o[ot]:new pt([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new oe(4011,Of)}}function sy(n){return n.segments.length>0?new pt([],{[ot]:n}):n}function kf(n){const t={};for(const i of Object.keys(n.children)){const s=kf(n.children[i]);(s.segments.length>0||s.hasChildren())&&(t[i]=s)}return function sz(n){if(1===n.numberOfChildren&&n.children[ot]){const t=n.children[ot];return new pt(n.segments.concat(t.segments),t.children)}return n}(new pt(n.segments,t))}function Uo(n){return n instanceof ao}const oy=!1;function oz(n,t,e,i,r){if(0===e.length)return Rl(t.root,t.root,t.root,i,r);const s=function VS(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new GS(!0,0,n);let t=0,e=!1;const i=n.reduce((r,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return ui(s.outlets,(l,c)=>{a[c]="string"==typeof l?l.split("/"):l}),[...r,{outlets:a}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===o?(s.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?e=!0:".."===a?t++:""!=a&&r.push(a))}),r):[...r,s]},[]);return new GS(e,t,i)}(e);return s.toRoot()?Rl(t.root,t.root,new pt([],{}),i,r):function o(l){const c=function lz(n,t,e,i){if(n.isAbsolute)return new Sl(t.root,!0,0);if(-1===i)return new Sl(e,e===t.root,0);return function US(n,t,e){let i=n,r=t,s=e;for(;s>r;){if(s-=r,i=i.parent,!i)throw new oe(4005,oy&&"Invalid number of '../'");r=i.segments.length}return new Sl(i,!1,r-s)}(e,i+(Vu(n.commands[0])?0:1),n.numberOfDoubleDots)}(s,t,n.snapshot?._urlSegment,l),u=c.processChildren?Cl(c.segmentGroup,c.index,s.commands):ay(c.segmentGroup,c.index,s.commands);return Rl(t.root,c.segmentGroup,u,i,r)}(n.snapshot?._lastPathIndex)}function Vu(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Uu(n){return"object"==typeof n&&null!=n&&n.outlets}function Rl(n,t,e,i,r){let o,s={};i&&ui(i,(l,c)=>{s[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`}),o=n===t?e:kS(n,t,e);const a=sy(kf(o));return new ao(a,s,r)}function kS(n,t,e){const i={};return ui(n.children,(r,s)=>{i[s]=r===t?e:kS(r,t,e)}),new pt(n.segments,i)}class GS{constructor(t,e,i){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=i,t&&i.length>0&&Vu(i[0]))throw new oe(4003,oy&&"Root segment cannot have matrix parameters");const r=i.find(Uu);if(r&&r!==CS(i))throw new oe(4004,oy&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Sl{constructor(t,e,i){this.segmentGroup=t,this.processChildren=e,this.index=i}}function ay(n,t,e){if(n||(n=new pt([],{})),0===n.segments.length&&n.hasChildren())return Cl(n,t,e);const i=function uz(n,t,e){let i=0,r=t;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=e.length)return s;const o=n.segments[r],a=e[i];if(Uu(a))break;const l=`${a}`,c=i<e.length-1?e[i+1]:null;if(r>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!zS(l,c,o))return s;i+=2}else{if(!zS(l,{},o))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(n,t,e),r=e.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const s=new pt(n.segments.slice(0,i.pathIndex),{});return s.children[ot]=new pt(n.segments.slice(i.pathIndex),n.children),Cl(s,0,r)}return i.match&&0===r.length?new pt(n.segments,{}):i.match&&!n.hasChildren()?ly(n,t,e):i.match?Cl(n,0,r):ly(n,t,e)}function Cl(n,t,e){if(0===e.length)return new pt(n.segments,{});{const i=function cz(n){return Uu(n[0])?n[0].outlets:{[ot]:n}}(e),r={};if(!i[ot]&&n.children[ot]&&1===n.numberOfChildren&&0===n.children[ot].segments.length){const s=Cl(n.children[ot],t,e);return new pt(n.segments,s.children)}return ui(i,(s,o)=>{"string"==typeof s&&(s=[s]),null!==s&&(r[o]=ay(n.children[o],t,s))}),ui(n.children,(s,o)=>{void 0===i[o]&&(r[o]=s)}),new pt(n.segments,r)}}function ly(n,t,e){const i=n.segments.slice(0,t);let r=0;for(;r<e.length;){const s=e[r];if(Uu(s)){const l=dz(s.outlets);return new pt(i,l)}if(0===r&&Vu(e[0])){i.push(new ju(n.segments[t].path,HS(e[0]))),r++;continue}const o=Uu(s)?s.outlets[ot]:`${s}`,a=r<e.length-1?e[r+1]:null;o&&a&&Vu(a)?(i.push(new ju(o,HS(a))),r+=2):(i.push(new ju(o,{})),r++)}return new pt(i,{})}function dz(n){const t={};return ui(n,(e,i)=>{"string"==typeof e&&(e=[e]),null!==e&&(t[i]=ly(new pt([],{}),0,e))}),t}function HS(n){const t={};return ui(n,(e,i)=>t[i]=`${e}`),t}function zS(n,t,e){return n==e.path&&us(t,e.parameters)}const Hu="imperative";class ds{constructor(t,e){this.id=t,this.url=e}}class cy extends ds{constructor(t,e,i="imperative",r=null){super(t,e),this.type=0,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ho extends ds{constructor(t,e,i){super(t,e),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Gf extends ds{constructor(t,e,i,r){super(t,e),this.reason=i,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Vf extends ds{constructor(t,e,i,r){super(t,e),this.reason=i,this.code=r,this.type=16}}class uy extends ds{constructor(t,e,i,r){super(t,e),this.error=i,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class hz extends ds{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class fz extends ds{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class pz extends ds{constructor(t,e,i,r,s){super(t,e),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class mz extends ds{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class gz extends ds{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class _z{constructor(t){this.route=t,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class vz{constructor(t){this.route=t,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class yz{constructor(t){this.snapshot=t,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class bz{constructor(t){this.snapshot=t,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Tz{constructor(t){this.snapshot=t,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Mz{constructor(t){this.snapshot=t,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class WS{constructor(t,e,i){this.routerEvent=t,this.position=e,this.anchor=i,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let Dz=(()=>{class n{createUrlTree(e,i,r,s,o,a){return oz(e||i.root,r,s,o,a)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=de({token:n,factory:n.\u0275fac}),n})(),Sz=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=de({token:n,factory:function(t){return Dz.\u0275fac(t)},providedIn:"root"}),n})();class $S{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=dy(t,this._root);return e?e.children.map(i=>i.value):[]}firstChild(t){const e=dy(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=hy(t,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return hy(t,this._root).map(e=>e.value)}}function dy(n,t){if(n===t.value)return t;for(const e of t.children){const i=dy(n,e);if(i)return i}return null}function hy(n,t){if(n===t.value)return[t];for(const e of t.children){const i=hy(n,e);if(i.length)return i.unshift(t),i}return[]}class Ns{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function El(n){const t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}class qS extends $S{constructor(t,e){super(t),this.snapshot=e,fy(this,t)}toString(){return this.snapshot.toString()}}function KS(n,t){const e=function Cz(n,t){const o=new Uf([],{},{},"",{},ot,t,null,n.root,-1,{});return new YS("",new Ns(o,[]))}(n,t),i=new Qn([new ju("",{})]),r=new Qn({}),s=new Qn({}),o=new Qn({}),a=new Qn(""),l=new Al(i,r,o,a,s,ot,t,e.root);return l.snapshot=e.root,new qS(new Ns(l,[]),e)}class Al{constructor(t,e,i,r,s,o,a,l){this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.title=this.data?.pipe(tt(c=>c[Bu]))??Be(void 0),this._futureSnapshot=l}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(tt(t=>Dl(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(tt(t=>Dl(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function XS(n,t="emptyOnly"){const e=n.pathFromRoot;let i=0;if("always"!==t)for(i=e.length-1;i>=1;){const r=e[i],s=e[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(s.component)break;i--}}return function Ez(n){return n.reduce((t,e)=>({params:{...t.params,...e.params},data:{...t.data,...e.data},resolve:{...e.data,...t.resolve,...e.routeConfig?.data,...e._resolvedData}}),{params:{},data:{},resolve:{}})}(e.slice(i))}class Uf{get title(){return this.data?.[Bu]}constructor(t,e,i,r,s,o,a,l,c,u,d){this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._urlSegment=c,this._lastPathIndex=u,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Dl(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Dl(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class YS extends $S{constructor(t,e){super(e),this.url=t,fy(this,e)}toString(){return JS(this._root)}}function fy(n,t){t.value._routerState=n,t.children.forEach(e=>fy(n,e))}function JS(n){const t=n.children.length>0?` { ${n.children.map(JS).join(", ")} } `:"";return`${n.value}${t}`}function py(n){if(n.snapshot){const t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,us(t.queryParams,e.queryParams)||n.queryParams.next(e.queryParams),t.fragment!==e.fragment&&n.fragment.next(e.fragment),us(t.params,e.params)||n.params.next(e.params),function HH(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!us(n[e],t[e]))return!1;return!0}(t.url,e.url)||n.url.next(e.url),us(t.data,e.data)||n.data.next(e.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function my(n,t){const e=us(n.params,t.params)&&function qH(n,t){return Vo(n,t)&&n.every((e,i)=>us(e.parameters,t[i].parameters))}(n.url,t.url);return e&&!(!n.parent!=!t.parent)&&(!n.parent||my(n.parent,t.parent))}function zu(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){const i=e.value;i._futureSnapshot=t.value;const r=function Iz(n,t,e){return t.children.map(i=>{for(const r of e.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return zu(n,i,r);return zu(n,i)})}(n,t,e);return new Ns(i,r)}{if(n.shouldAttach(t.value)){const s=n.retrieve(t.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=t.value,o.children=t.children.map(a=>zu(n,a)),o}}const i=function Pz(n){return new Al(new Qn(n.url),new Qn(n.params),new Qn(n.queryParams),new Qn(n.fragment),new Qn(n.data),n.outlet,n.component,n)}(t.value),r=t.children.map(s=>zu(n,s));return new Ns(i,r)}}const gy="ngNavigationCancelingError";function ZS(n,t){const{redirectTo:e,navigationBehaviorOptions:i}=Uo(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,r=QS(!1,0,t);return r.url=e,r.navigationBehaviorOptions=i,r}function QS(n,t,e){const i=new Error("NavigationCancelingError: "+(n||""));return i[gy]=!0,i.cancellationCode=t,e&&(i.url=e),i}function eC(n){return tC(n)&&Uo(n.url)}function tC(n){return n&&n[gy]}class Oz{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Wu,this.attachRef=null}}let Wu=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(e,i){const r=this.getOrCreateContext(e);r.outlet=i,this.contexts.set(e,r)}onChildOutletDestroyed(e){const i=this.getContext(e);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let i=this.getContext(e);return i||(i=new Oz,this.contexts.set(e,i)),i}getContext(e){return this.contexts.get(e)||null}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Hf=!1;let _y=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=ot,this.activateEvents=new Ce,this.deactivateEvents=new Ce,this.attachEvents=new Ce,this.detachEvents=new Ce,this.parentContexts=gt(Wu),this.location=gt(wr),this.changeDetector=gt(Hi),this.environmentInjector=gt(kr)}ngOnChanges(e){if(e.name){const{firstChange:i,previousValue:r}=e.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new oe(4012,Hf);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new oe(4012,Hf);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new oe(4012,Hf);this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,i){this.activated=e,this._activatedRoute=i,this.location.insert(e.hostView),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,i){if(this.isActivated)throw new oe(4013,Hf);this._activatedRoute=e;const r=this.location,o=e.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new Nz(e,a,r.injector);if(i&&function Fz(n){return!!n.resolveComponentFactory}(i)){const c=i.resolveComponentFactory(o);this.activated=r.createComponent(c,r.length,l)}else this.activated=r.createComponent(o,{index:r.length,injector:l,environmentInjector:i??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=he({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[gn]}),n})();class Nz{constructor(t,e,i){this.route=t,this.childContexts=e,this.parent=i}get(t,e){return t===Al?this.route:t===Wu?this.childContexts:this.parent.get(t,e)}}let vy=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=Tt({type:n,selectors:[["ng-component"]],standalone:!0,features:[Nn],decls:1,vars:0,template:function(e,i){1&e&&xn(0,"router-outlet")},dependencies:[_y],encapsulation:2}),n})();function nC(n,t){return n.providers&&!n._injector&&(n._injector=tf(n.providers,t,`Route: ${n.path}`)),n._injector??t}function by(n){const t=n.children&&n.children.map(by),e=t?{...n,children:t}:{...n};return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==ot&&(e.component=vy),e}function Cr(n){return n.outlet||ot}function iC(n,t){const e=n.filter(i=>Cr(i)===t);return e.push(...n.filter(i=>Cr(i)!==t)),e}function $u(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let t=n.parent;t;t=t.parent){const e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}class Gz{constructor(t,e,i,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=i,this.forwardEvent=r}activate(t){const e=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,i,t),py(this.futureState.root),this.activateChildRoutes(e,i,t)}deactivateChildRoutes(t,e,i){const r=El(e);t.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,r[o],i),delete r[o]}),ui(r,(s,o)=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(t,e,i){const r=t.value,s=e?e.value:null;if(r===s)if(r.component){const o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(t,e,o.children)}else this.deactivateChildRoutes(t,e,i);else s&&this.deactivateRouteAndItsChildren(e,i)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,s=El(t);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);if(i&&i.outlet){const o=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:o,route:t,contexts:a})}}deactivateRouteAndOutlet(t,e){const i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,s=El(t);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(t,e,i){const r=El(e);t.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new Mz(s.value.snapshot))}),t.children.length&&this.forwardEvent(new bz(t.value.snapshot))}activateRoutes(t,e,i){const r=t.value,s=e?e.value:null;if(py(r),r===s)if(r.component){const o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,o.children)}else this.activateChildRoutes(t,e,i);else if(r.component){const o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),py(a.route.value),this.activateChildRoutes(t,null,o.children)}else{const a=$u(r.snapshot),l=a?.get(su)??null;o.attachRef=null,o.route=r,o.resolver=l,o.injector=a,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(t,null,o.children)}}else this.activateChildRoutes(t,null,i)}}class rC{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class zf{constructor(t,e){this.component=t,this.route=e}}function Vz(n,t,e){const i=n._root;return qu(i,t?t._root:null,e,[i.value])}function Il(n,t){const e=Symbol(),i=t.get(n,e);return i===e?"function"!=typeof n||function sF(n){return null!==nh(n)}(n)?t.get(n):n:i}function qu(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=El(t);return n.children.forEach(o=>{(function Hz(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=t?t.value:null,a=e?e.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const l=function zz(n,t,e){if("function"==typeof e)return e(n,t);switch(e){case"pathParamsChange":return!Vo(n.url,t.url);case"pathParamsOrQueryParamsChange":return!Vo(n.url,t.url)||!us(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!my(n,t)||!us(n.queryParams,t.queryParams);default:return!my(n,t)}}(o,s,s.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new rC(i)):(s.data=o.data,s._resolvedData=o._resolvedData),qu(n,t,s.component?a?a.children:null:e,i,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new zf(a.outlet.component,o))}else o&&Ku(t,a,r),r.canActivateChecks.push(new rC(i)),qu(n,null,s.component?a?a.children:null:e,i,r)})(o,s[o.value.outlet],e,i.concat([o.value]),r),delete s[o.value.outlet]}),ui(s,(o,a)=>Ku(o,e.getContext(a),r)),r}function Ku(n,t,e){const i=El(n),r=n.value;ui(i,(s,o)=>{Ku(s,r.component?t?t.children.getContext(o):null:t,e)}),e.canDeactivateChecks.push(new zf(r.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,r))}function Xu(n){return"function"==typeof n}function Ty(n){return n instanceof Ef||"EmptyError"===n?.name}const Wf=Symbol("INITIAL_VALUE");function Pl(){return Sr(n=>Af(n.map(t=>t.pipe(Bn(1),If(Wf)))).pipe(tt(t=>{for(const e of t)if(!0!==e){if(e===Wf)return Wf;if(!1===e||e instanceof ao)return e}return!0}),ei(t=>t!==Wf),Bn(1)))}function sC(n){return function RN(...n){return yT(n)}(ti(t=>{if(Uo(t))throw ZS(0,t)}),tt(t=>!0===t))}const My={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function oC(n,t,e,i,r){const s=xy(n,t,e);return s.matched?function l4(n,t,e,i){const r=t.canMatch;return r&&0!==r.length?Be(r.map(o=>{const a=Il(o,n);return oo(function Yz(n){return n&&Xu(n.canMatch)}(a)?a.canMatch(t,e):n.runInContext(()=>a(t,e)))})).pipe(Pl(),sC()):Be(!0)}(i=nC(t,i),t,e).pipe(tt(o=>!0===o?s:{...My})):Be(s)}function xy(n,t,e){if(""===t.path)return"full"===t.pathMatch&&(n.hasChildren()||e.length>0)?{...My}:{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};const r=(t.matcher||UH)(e,n,t);if(!r)return{...My};const s={};ui(r.posParams,(a,l)=>{s[l]=a.path});const o=r.consumed.length>0?{...s,...r.consumed[r.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:e.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function $f(n,t,e,i){if(e.length>0&&function d4(n,t,e){return e.some(i=>qf(n,t,i)&&Cr(i)!==ot)}(n,e,i)){const s=new pt(t,function u4(n,t,e,i){const r={};r[ot]=i,i._sourceSegment=n,i._segmentIndexShift=t.length;for(const s of e)if(""===s.path&&Cr(s)!==ot){const o=new pt([],{});o._sourceSegment=n,o._segmentIndexShift=t.length,r[Cr(s)]=o}return r}(n,t,i,new pt(e,n.children)));return s._sourceSegment=n,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:[]}}if(0===e.length&&function h4(n,t,e){return e.some(i=>qf(n,t,i))}(n,e,i)){const s=new pt(n.segments,function c4(n,t,e,i,r){const s={};for(const o of i)if(qf(n,e,o)&&!r[Cr(o)]){const a=new pt([],{});a._sourceSegment=n,a._segmentIndexShift=t.length,s[Cr(o)]=a}return{...r,...s}}(n,t,e,i,n.children));return s._sourceSegment=n,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:e}}const r=new pt(n.segments,n.children);return r._sourceSegment=n,r._segmentIndexShift=t.length,{segmentGroup:r,slicedSegments:e}}function qf(n,t,e){return(!(n.hasChildren()||t.length>0)||"full"!==e.pathMatch)&&""===e.path}function aC(n,t,e,i){return!!(Cr(n)===i||i!==ot&&qf(t,e,n))&&("**"===n.path||xy(t,n,e).matched)}function lC(n,t,e){return 0===t.length&&!n.children[e]}const Kf=!1;class Xf{constructor(t){this.segmentGroup=t||null}}class cC{constructor(t){this.urlTree=t}}function Yu(n){return Lu(new Xf(n))}function uC(n){return Lu(new cC(n))}class g4{constructor(t,e,i,r,s){this.injector=t,this.configLoader=e,this.urlSerializer=i,this.urlTree=r,this.config=s,this.allowRedirects=!0}apply(){const t=$f(this.urlTree.root,[],[],this.config).segmentGroup,e=new pt(t.segments,t.children);return this.expandSegmentGroup(this.injector,this.config,e,ot).pipe(tt(s=>this.createUrlTree(kf(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(so(s=>{if(s instanceof cC)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof Xf?this.noMatchError(s):s}))}match(t){return this.expandSegmentGroup(this.injector,this.config,t.root,ot).pipe(tt(r=>this.createUrlTree(kf(r),t.queryParams,t.fragment))).pipe(so(r=>{throw r instanceof Xf?this.noMatchError(r):r}))}noMatchError(t){return new oe(4002,Kf)}createUrlTree(t,e,i){const r=sy(t);return new ao(r,e,i)}expandSegmentGroup(t,e,i,r){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(t,e,i).pipe(tt(s=>new pt([],s))):this.expandSegment(t,i,e,i.segments,r,!0)}expandChildren(t,e,i){const r=[];for(const s of Object.keys(i.children))"primary"===s?r.unshift(s):r.push(s);return Pn(r).pipe(Go(s=>{const o=i.children[s],a=iC(e,s);return this.expandSegmentGroup(t,a,o,s).pipe(tt(l=>({segment:l,outlet:s})))}),xS((s,o)=>(s[o.outlet]=o.segment,s),{}),wS())}expandSegment(t,e,i,r,s,o){return Pn(i).pipe(Go(a=>this.expandSegmentAgainstRoute(t,e,i,a,r,s,o).pipe(so(c=>{if(c instanceof Xf)return Be(null);throw c}))),ro(a=>!!a),so((a,l)=>{if(Ty(a))return lC(e,r,s)?Be(new pt([],{})):Yu(e);throw a}))}expandSegmentAgainstRoute(t,e,i,r,s,o,a){return aC(r,e,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,s,o):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,i,r,s,o):Yu(e):Yu(e)}expandSegmentAgainstRouteUsingRedirect(t,e,i,r,s,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,i,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,i,r,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,i,r){const s=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?uC(s):this.lineralizeSegments(i,s).pipe(zn(o=>{const a=new pt(o,{});return this.expandSegment(t,a,e,o,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,i,r,s,o){const{matched:a,consumedSegments:l,remainingSegments:c,positionalParamSegments:u}=xy(e,r,s);if(!a)return Yu(e);const d=this.applyRedirectCommands(l,r.redirectTo,u);return r.redirectTo.startsWith("/")?uC(d):this.lineralizeSegments(r,d).pipe(zn(h=>this.expandSegment(t,e,i,h.concat(c),o,!1)))}matchSegmentAgainstRoute(t,e,i,r,s){return"**"===i.path?(t=nC(i,t),i.loadChildren?(i._loadedRoutes?Be({routes:i._loadedRoutes,injector:i._loadedInjector}):this.configLoader.loadChildren(t,i)).pipe(tt(a=>(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,new pt(r,{})))):Be(new pt(r,{}))):oC(e,i,r,t).pipe(Sr(({matched:o,consumedSegments:a,remainingSegments:l})=>o?this.getChildConfig(t=i._injector??t,i,r).pipe(zn(u=>{const d=u.injector??t,h=u.routes,{segmentGroup:f,slicedSegments:m}=$f(e,a,l,h),p=new pt(f.segments,f.children);if(0===m.length&&p.hasChildren())return this.expandChildren(d,h,p).pipe(tt(_=>new pt(a,_)));if(0===h.length&&0===m.length)return Be(new pt(a,{}));const g=Cr(i)===s;return this.expandSegment(d,p,h,m,g?ot:s,!0).pipe(tt(y=>new pt(a.concat(y.segments),y.children)))})):Yu(e)))}getChildConfig(t,e,i){return e.children?Be({routes:e.children,injector:t}):e.loadChildren?void 0!==e._loadedRoutes?Be({routes:e._loadedRoutes,injector:e._loadedInjector}):function a4(n,t,e,i){const r=t.canLoad;return void 0===r||0===r.length?Be(!0):Be(r.map(o=>{const a=Il(o,n);return oo(function $z(n){return n&&Xu(n.canLoad)}(a)?a.canLoad(t,e):n.runInContext(()=>a(t,e)))})).pipe(Pl(),sC())}(t,e,i).pipe(zn(r=>r?this.configLoader.loadChildren(t,e).pipe(ti(s=>{e._loadedRoutes=s.routes,e._loadedInjector=s.injector})):function p4(n){return Lu(QS(Kf,3))}())):Be({routes:[],injector:t})}lineralizeSegments(t,e){let i=[],r=e.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return Be(i);if(r.numberOfChildren>1||!r.children[ot])return t.redirectTo,Lu(new oe(4e3,Kf));r=r.children[ot]}}applyRedirectCommands(t,e,i){return this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,i)}applyRedirectCreateUrlTree(t,e,i,r){const s=this.createSegmentGroup(t,e.root,i,r);return new ao(s,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const i={};return ui(t,(r,s)=>{if("string"==typeof r&&r.startsWith(":")){const a=r.substring(1);i[s]=e[a]}else i[s]=r}),i}createSegmentGroup(t,e,i,r){const s=this.createSegments(t,e.segments,i,r);let o={};return ui(e.children,(a,l)=>{o[l]=this.createSegmentGroup(t,a,i,r)}),new pt(s,o)}createSegments(t,e,i,r){return e.map(s=>s.path.startsWith(":")?this.findPosParam(t,s,r):this.findOrReturn(s,i))}findPosParam(t,e,i){const r=i[e.path.substring(1)];if(!r)throw new oe(4001,Kf);return r}findOrReturn(t,e){let i=0;for(const r of e){if(r.path===t.path)return e.splice(i),r;i++}return t}}class v4{}class T4{constructor(t,e,i,r,s,o,a){this.injector=t,this.rootComponentType=e,this.config=i,this.urlTree=r,this.url=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a}recognize(){const t=$f(this.urlTree.root,[],[],this.config.filter(e=>void 0===e.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,t,ot).pipe(tt(e=>{if(null===e)return null;const i=new Uf([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},ot,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Ns(i,e),s=new YS(this.url,r);return this.inheritParamsAndData(s._root),s}))}inheritParamsAndData(t){const e=t.value,i=XS(e,this.paramsInheritanceStrategy);e.params=Object.freeze(i.params),e.data=Object.freeze(i.data),t.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(t,e,i,r){return 0===i.segments.length&&i.hasChildren()?this.processChildren(t,e,i):this.processSegment(t,e,i,i.segments,r)}processChildren(t,e,i){return Pn(Object.keys(i.children)).pipe(Go(r=>{const s=i.children[r],o=iC(e,r);return this.processSegmentGroup(t,o,s,r)}),xS((r,s)=>r&&s?(r.push(...s),r):null),function GH(n,t=!1){return Tn((e,i)=>{let r=0;e.subscribe(en(i,s=>{const o=n(s,r++);(o||t)&&i.next(s),!o&&i.complete()}))})}(r=>null!==r),Pf(null),wS(),tt(r=>{if(null===r)return null;const s=hC(r);return function M4(n){n.sort((t,e)=>t.value.outlet===ot?-1:e.value.outlet===ot?1:t.value.outlet.localeCompare(e.value.outlet))}(s),s}))}processSegment(t,e,i,r,s){return Pn(e).pipe(Go(o=>this.processSegmentAgainstRoute(o._injector??t,o,i,r,s)),ro(o=>!!o),so(o=>{if(Ty(o))return lC(i,r,s)?Be([]):Be(null);throw o}))}processSegmentAgainstRoute(t,e,i,r,s){if(e.redirectTo||!aC(e,i,r,s))return Be(null);let o;if("**"===e.path){const a=r.length>0?CS(r).parameters:{},l=pC(i)+r.length;o=Be({snapshot:new Uf(r,a,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,mC(e),Cr(e),e.component??e._loadedComponent??null,e,fC(i),l,gC(e)),consumedSegments:[],remainingSegments:[]})}else o=oC(i,e,r,t).pipe(tt(({matched:a,consumedSegments:l,remainingSegments:c,parameters:u})=>{if(!a)return null;const d=pC(i)+l.length;return{snapshot:new Uf(l,u,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,mC(e),Cr(e),e.component??e._loadedComponent??null,e,fC(i),d,gC(e)),consumedSegments:l,remainingSegments:c}}));return o.pipe(Sr(a=>{if(null===a)return Be(null);const{snapshot:l,consumedSegments:c,remainingSegments:u}=a;t=e._injector??t;const d=e._loadedInjector??t,h=function x4(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(e),{segmentGroup:f,slicedSegments:m}=$f(i,c,u,h.filter(g=>void 0===g.redirectTo));if(0===m.length&&f.hasChildren())return this.processChildren(d,h,f).pipe(tt(g=>null===g?null:[new Ns(l,g)]));if(0===h.length&&0===m.length)return Be([new Ns(l,[])]);const p=Cr(e)===s;return this.processSegment(d,h,f,m,p?ot:s).pipe(tt(g=>null===g?null:[new Ns(l,g)]))}))}}function w4(n){const t=n.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function hC(n){const t=[],e=new Set;for(const i of n){if(!w4(i)){t.push(i);continue}const r=t.find(s=>i.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...i.children),e.add(r)):t.push(i)}for(const i of e){const r=hC(i.children);t.push(new Ns(i.value,r))}return t.filter(i=>!e.has(i))}function fC(n){let t=n;for(;t._sourceSegment;)t=t._sourceSegment;return t}function pC(n){let t=n,e=t._segmentIndexShift??0;for(;t._sourceSegment;)t=t._sourceSegment,e+=t._segmentIndexShift??0;return e-1}function mC(n){return n.data||{}}function gC(n){return n.resolve||{}}function S4(n,t){return zn(e=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=e;if(!r.length)return Be(e);let s=0;return Pn(r).pipe(Go(o=>function C4(n,t,e,i){const r=n.routeConfig,s=n._resolve;return void 0!==r?.title&&!_C(r)&&(s[Bu]=r.title),function E4(n,t,e,i){const r=function A4(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===r.length)return Be({});const s={};return Pn(r).pipe(zn(o=>function I4(n,t,e,i){const r=$u(t)??i,s=Il(n,r);return oo(s.resolve?s.resolve(t,e):r.runInContext(()=>s(t,e)))}(n[o],t,e,i).pipe(ro(),ti(a=>{s[o]=a}))),ty(1),function DS(n){return tt(()=>n)}(s),so(o=>Ty(o)?vr:Lu(o)))}(s,n,t,i).pipe(tt(o=>(n._resolvedData=o,n.data=XS(n,e).resolve,r&&_C(r)&&(n.data[Bu]=r.title),null)))}(o.route,i,n,t)),ti(()=>s++),ty(1),zn(o=>s===r.length?Be(e):vr))})}function _C(n){return"string"==typeof n.title||null===n.title}function wy(n){return Sr(t=>{const e=n(t);return e?Pn(e).pipe(tt(()=>t)):Be(t)})}const Ol=new Ne("ROUTES");let Dy=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=gt(W1)}loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return Be(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);const i=oo(e.loadComponent()).pipe(tt(yC),ti(s=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=s}),ny(()=>{this.componentLoaders.delete(e)})),r=new TS(i,()=>new Kt).pipe(ey());return this.componentLoaders.set(e,r),r}loadChildren(e,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return Be({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const s=this.loadModuleFactoryOrRoutes(i.loadChildren).pipe(tt(a=>{this.onLoadEndListener&&this.onLoadEndListener(i);let l,c,u=!1;Array.isArray(a)?c=a:(l=a.create(e).injector,c=SS(l.get(Ol,[],$e.Self|$e.Optional)));return{routes:c.map(by),injector:l}}),ny(()=>{this.childrenLoaders.delete(i)})),o=new TS(s,()=>new Kt).pipe(ey());return this.childrenLoaders.set(i,o),o}loadModuleFactoryOrRoutes(e){return oo(e()).pipe(tt(yC),zn(i=>i instanceof i1||Array.isArray(i)?Be(i):Pn(this.compiler.compileModuleAsync(i))))}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function yC(n){return function P4(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let Jf=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new Kt,this.configLoader=gt(Dy),this.environmentInjector=gt(kr),this.urlSerializer=gt(ku),this.rootContexts=gt(Wu),this.navigationId=0,this.afterPreactivation=()=>Be(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=r=>this.events.next(new vz(r)),this.configLoader.onLoadStartListener=r=>this.events.next(new _z(r))}complete(){this.transitions?.complete()}handleNavigationRequest(e){const i=++this.navigationId;this.transitions?.next({...this.transitions.value,...e,id:i})}setupNavigations(e){return this.transitions=new Qn({id:0,targetPageId:0,currentUrlTree:e.currentUrlTree,currentRawUrl:e.currentUrlTree,extractedUrl:e.urlHandlingStrategy.extract(e.currentUrlTree),urlAfterRedirects:e.urlHandlingStrategy.extract(e.currentUrlTree),rawUrl:e.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Hu,restoredState:null,currentSnapshot:e.routerState.snapshot,targetSnapshot:null,currentRouterState:e.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(ei(i=>0!==i.id),tt(i=>({...i,extractedUrl:e.urlHandlingStrategy.extract(i.rawUrl)})),Sr(i=>{let r=!1,s=!1;return Be(i).pipe(ti(o=>{this.currentNavigation={id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Sr(o=>{const a=e.browserUrlTree.toString(),l=!e.navigated||o.extractedUrl.toString()!==a||a!==e.currentUrlTree.toString();if(!l&&"reload"!==(o.extras.onSameUrlNavigation??e.onSameUrlNavigation)){const u="";return this.events.next(new Vf(o.id,e.serializeUrl(i.rawUrl),u,0)),e.rawUrlTree=o.rawUrl,o.resolve(null),vr}if(e.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return bC(o.source)&&(e.browserUrlTree=o.extractedUrl),Be(o).pipe(Sr(u=>{const d=this.transitions?.getValue();return this.events.next(new cy(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),d!==this.transitions?.getValue()?vr:Promise.resolve(u)}),function _4(n,t,e,i){return Sr(r=>function m4(n,t,e,i,r){return new g4(n,t,e,i,r).apply()}(n,t,e,r.extractedUrl,i).pipe(tt(s=>({...r,urlAfterRedirects:s}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,e.config),ti(u=>{this.currentNavigation={...this.currentNavigation,finalUrl:u.urlAfterRedirects},i.urlAfterRedirects=u.urlAfterRedirects}),function R4(n,t,e,i,r){return zn(s=>function b4(n,t,e,i,r,s,o="emptyOnly"){return new T4(n,t,e,i,r,o,s).recognize().pipe(Sr(a=>null===a?function y4(n){return new Qt(t=>t.error(n))}(new v4):Be(a)))}(n,t,e,s.urlAfterRedirects,i.serialize(s.urlAfterRedirects),i,r).pipe(tt(o=>({...s,targetSnapshot:o}))))}(this.environmentInjector,this.rootComponentType,e.config,this.urlSerializer,e.paramsInheritanceStrategy),ti(u=>{if(i.targetSnapshot=u.targetSnapshot,"eager"===e.urlUpdateStrategy){if(!u.extras.skipLocationChange){const h=e.urlHandlingStrategy.merge(u.urlAfterRedirects,u.rawUrl);e.setBrowserUrl(h,u)}e.browserUrlTree=u.urlAfterRedirects}const d=new hz(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}));if(l&&e.urlHandlingStrategy.shouldProcessUrl(e.rawUrlTree)){const{id:u,extractedUrl:d,source:h,restoredState:f,extras:m}=o,p=new cy(u,this.urlSerializer.serialize(d),h,f);this.events.next(p);const g=KS(d,this.rootComponentType).snapshot;return Be(i={...o,targetSnapshot:g,urlAfterRedirects:d,extras:{...m,skipLocationChange:!1,replaceUrl:!1}})}{const u="";return this.events.next(new Vf(o.id,e.serializeUrl(i.extractedUrl),u,1)),e.rawUrlTree=o.rawUrl,o.resolve(null),vr}}),ti(o=>{const a=new fz(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(a)}),tt(o=>i={...o,guards:Vz(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),function Zz(n,t){return zn(e=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=e;return 0===o.length&&0===s.length?Be({...e,guardsResult:!0}):function Qz(n,t,e,i){return Pn(n).pipe(zn(r=>function o4(n,t,e,i,r){const s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return s&&0!==s.length?Be(s.map(a=>{const l=$u(t)??r,c=Il(a,l);return oo(function Xz(n){return n&&Xu(n.canDeactivate)}(c)?c.canDeactivate(n,t,e,i):l.runInContext(()=>c(n,t,e,i))).pipe(ro())})).pipe(Pl()):Be(!0)}(r.component,r.route,e,t,i)),ro(r=>!0!==r,!0))}(o,i,r,n).pipe(zn(a=>a&&function Wz(n){return"boolean"==typeof n}(a)?function e4(n,t,e,i){return Pn(t).pipe(Go(r=>Fu(function n4(n,t){return null!==n&&t&&t(new yz(n)),Be(!0)}(r.route.parent,i),function t4(n,t){return null!==n&&t&&t(new Tz(n)),Be(!0)}(r.route,i),function s4(n,t,e){const i=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(o=>function Uz(n){const t=n.routeConfig?n.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:n,guards:t}:null}(o)).filter(o=>null!==o).map(o=>bS(()=>Be(o.guards.map(l=>{const c=$u(o.node)??e,u=Il(l,c);return oo(function Kz(n){return n&&Xu(n.canActivateChild)}(u)?u.canActivateChild(i,n):c.runInContext(()=>u(i,n))).pipe(ro())})).pipe(Pl())));return Be(s).pipe(Pl())}(n,r.path,e),function r4(n,t,e){const i=t.routeConfig?t.routeConfig.canActivate:null;if(!i||0===i.length)return Be(!0);const r=i.map(s=>bS(()=>{const o=$u(t)??e,a=Il(s,o);return oo(function qz(n){return n&&Xu(n.canActivate)}(a)?a.canActivate(t,n):o.runInContext(()=>a(t,n))).pipe(ro())}));return Be(r).pipe(Pl())}(n,r.route,e))),ro(r=>!0!==r,!0))}(i,s,n,t):Be(a)),tt(a=>({...e,guardsResult:a})))})}(this.environmentInjector,o=>this.events.next(o)),ti(o=>{if(i.guardsResult=o.guardsResult,Uo(o.guardsResult))throw ZS(0,o.guardsResult);const a=new pz(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(a)}),ei(o=>!!o.guardsResult||(e.restoreHistory(o),this.cancelNavigationTransition(o,"",3),!1)),wy(o=>{if(o.guards.canActivateChecks.length)return Be(o).pipe(ti(a=>{const l=new mz(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}),Sr(a=>{let l=!1;return Be(a).pipe(S4(e.paramsInheritanceStrategy,this.environmentInjector),ti({next:()=>l=!0,complete:()=>{l||(e.restoreHistory(a),this.cancelNavigationTransition(a,"",2))}}))}),ti(a=>{const l=new gz(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}))}),wy(o=>{const a=l=>{const c=[];l.routeConfig?.loadComponent&&!l.routeConfig._loadedComponent&&c.push(this.configLoader.loadComponent(l.routeConfig).pipe(ti(u=>{l.component=u}),tt(()=>{})));for(const u of l.children)c.push(...a(u));return c};return Af(a(o.targetSnapshot.root)).pipe(Pf(),Bn(1))}),wy(()=>this.afterPreactivation()),tt(o=>{const a=function Az(n,t,e){const i=zu(n,t._root,e?e._root:void 0);return new qS(i,t)}(e.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return i={...o,targetRouterState:a}}),ti(o=>{e.currentUrlTree=o.urlAfterRedirects,e.rawUrlTree=e.urlHandlingStrategy.merge(o.urlAfterRedirects,o.rawUrl),e.routerState=o.targetRouterState,"deferred"===e.urlUpdateStrategy&&(o.extras.skipLocationChange||e.setBrowserUrl(e.rawUrlTree,o),e.browserUrlTree=o.urlAfterRedirects)}),((n,t,e)=>tt(i=>(new Gz(t,i.targetRouterState,i.currentRouterState,e).activate(n),i)))(this.rootContexts,e.routeReuseStrategy,o=>this.events.next(o)),Bn(1),ti({next:o=>{r=!0,this.lastSuccessfulNavigation=this.currentNavigation,e.navigated=!0,this.events.next(new Ho(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(e.currentUrlTree))),e.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{r=!0}}),ny(()=>{r||s||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),so(o=>{if(s=!0,tC(o)){eC(o)||(e.navigated=!0,e.restoreHistory(i,!0));const a=new Gf(i.id,this.urlSerializer.serialize(i.extractedUrl),o.message,o.cancellationCode);if(this.events.next(a),eC(o)){const l=e.urlHandlingStrategy.merge(o.url,e.rawUrlTree),c={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===e.urlUpdateStrategy||bC(i.source)};e.scheduleNavigation(l,Hu,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{e.restoreHistory(i,!0);const a=new uy(i.id,this.urlSerializer.serialize(i.extractedUrl),o,i.targetSnapshot??void 0);this.events.next(a);try{i.resolve(e.errorHandler(o))}catch(l){i.reject(l)}}return vr}))}))}cancelNavigationTransition(e,i,r){const s=new Gf(e.id,this.urlSerializer.serialize(e.extractedUrl),i,r);this.events.next(s),e.resolve(!1)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function bC(n){return n!==Hu}let TC=(()=>{class n{buildTitle(e){let i,r=e.root;for(;void 0!==r;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(s=>s.outlet===ot);return i}getResolvedTitleForRoute(e){return e.data[Bu]}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=de({token:n,factory:function(){return gt(O4)},providedIn:"root"}),n})(),O4=(()=>{class n extends TC{constructor(e){super(),this.title=e}updateTitle(e){const i=this.buildTitle(e);void 0!==i&&this.title.setTitle(i)}}return n.\u0275fac=function(e){return new(e||n)(ye(pS))},n.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),N4=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=de({token:n,factory:function(){return gt(L4)},providedIn:"root"}),n})();class F4{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}let L4=(()=>{class n extends F4{}return n.\u0275fac=function(){let t;return function(i){return(t||(t=Xt(n)))(i||n)}}(),n.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Zf=new Ne("",{providedIn:"root",factory:()=>({})});let j4=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=de({token:n,factory:function(){return gt(k4)},providedIn:"root"}),n})(),k4=(()=>{class n{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,i){return e}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function G4(n){throw n}function V4(n,t,e){return t.parse("/")}const U4={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},H4={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let or=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=gt(bG),this.isNgZoneEnabled=!1,this.options=gt(Zf,{optional:!0})||{},this.errorHandler=this.options.errorHandler||G4,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||V4,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=gt(j4),this.routeReuseStrategy=gt(N4),this.urlCreationStrategy=gt(Sz),this.titleStrategy=gt(TC),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=SS(gt(Ol,{optional:!0})??[]),this.navigationTransitions=gt(Jf),this.urlSerializer=gt(ku),this.location=gt(Sv),this.isNgZoneEnabled=gt(Dt)instanceof Dt&&Dt.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new ao,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=KS(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(e=>{this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const e=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Hu,e)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const i="popstate"===e.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{this.navigateToSyncWithBrowser(e.url,i,e.state)},0)}))}navigateToSyncWithBrowser(e,i,r){const s={replaceUrl:!0},o=r?.navigationId?r:null;if(r){const l={...r};delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(s.state=l)}const a=this.parseUrl(e);this.scheduleNavigation(a,i,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(e){this.config=e.map(by),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,i={}){const{relativeTo:r,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:l}=i,c=l?this.currentUrlTree.fragment:o;let u=null;switch(a){case"merge":u={...this.currentUrlTree.queryParams,...s};break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=s||null}return null!==u&&(u=this.removeEmptyProps(u)),this.urlCreationStrategy.createUrlTree(r,this.routerState,this.currentUrlTree,e,u,c??null)}navigateByUrl(e,i={skipLocationChange:!1}){const r=Uo(e)?e:this.parseUrl(e),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,Hu,null,i)}navigate(e,i={skipLocationChange:!1}){return function z4(n){for(let t=0;t<n.length;t++){const e=n[t];if(null==e)throw new oe(4008,false)}}(e),this.navigateByUrl(this.createUrlTree(e,i),i)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let i;try{i=this.urlSerializer.parse(e)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,e)}return i}isActive(e,i){let r;if(r=!0===i?{...U4}:!1===i?{...H4}:i,Uo(e))return AS(this.currentUrlTree,e,r);const s=this.parseUrl(e);return AS(this.currentUrlTree,s,r)}removeEmptyProps(e){return Object.keys(e).reduce((i,r)=>{const s=e[r];return null!=s&&(i[r]=s),i},{})}scheduleNavigation(e,i,r,s,o){if(this.disposed)return Promise.resolve(!1);let a,l,c,u;return o?(a=o.resolve,l=o.reject,c=o.promise):c=new Promise((d,h)=>{a=d,l=h}),u="computed"===this.canceledNavigationResolution?r&&r.\u0275routerPageId?r.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:u,source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:s,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(d=>Promise.reject(d))}setBrowserUrl(e,i){const r=this.urlSerializer.serialize(e),s={...i.extras.state,...this.generateNgRouterState(i.id,i.targetPageId)};this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl?this.location.replaceState(r,"",s):this.location.go(r,"",s)}restoreHistory(e,i=!1){if("computed"===this.canceledNavigationResolution){const r=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.getCurrentNavigation()?.finalUrl||0===r?this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===r&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(r)}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,i){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:i}:{navigationId:e}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class MC{}let q4=(()=>{class n{constructor(e,i,r,s,o){this.router=e,this.injector=r,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(ei(e=>e instanceof Ho),Go(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,i){const r=[];for(const s of i){s.providers&&!s._injector&&(s._injector=tf(s.providers,e,`Route: ${s.path}`));const o=s._injector??e,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&r.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&r.push(this.processRoutes(a,s.children??s._loadedRoutes))}return Pn(r).pipe(La())}preloadConfig(e,i){return this.preloadingStrategy.preload(i,()=>{let r;r=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(e,i):Be(null);const s=r.pipe(zn(o=>null===o?Be(void 0):(i._loadedRoutes=o.routes,i._loadedInjector=o.injector,this.processRoutes(o.injector??e,o.routes))));return i.loadComponent&&!i._loadedComponent?Pn([s,this.loader.loadComponent(i)]).pipe(La()):s})}}return n.\u0275fac=function(e){return new(e||n)(ye(or),ye(W1),ye(kr),ye(MC),ye(Dy))},n.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Cy=new Ne("");let xC=(()=>{class n{constructor(e,i,r,s,o={}){this.urlSerializer=e,this.transitions=i,this.viewportScroller=r,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof cy?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof Ho&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof WS&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new WS(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(e){!function cw(){throw new Error("invalid")}()},n.\u0275prov=de({token:n,factory:n.\u0275fac}),n})();var ar=(()=>((ar=ar||{})[ar.COMPLETE=0]="COMPLETE",ar[ar.FAILED=1]="FAILED",ar[ar.REDIRECTING=2]="REDIRECTING",ar))();const Nl=!1;function lo(n,t){return{\u0275kind:n,\u0275providers:t}}const Ey=new Ne("",{providedIn:"root",factory:()=>!1});function DC(){const n=gt(tr);return t=>{const e=n.get(Cu);if(t!==e.components[0])return;const i=n.get(or),r=n.get(RC);1===n.get(Ay)&&i.initialNavigation(),n.get(SC,null,$e.Optional)?.setUpPreloading(),n.get(Cy,null,$e.Optional)?.init(),i.resetRootComponentType(e.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}const RC=new Ne(Nl?"bootstrap done indicator":"",{factory:()=>new Kt}),Ay=new Ne(Nl?"initial navigation":"",{providedIn:"root",factory:()=>1});function Z4(){let n=[];return n=Nl?[{provide:Oh,multi:!0,useFactory:()=>{const t=gt(or);return()=>t.events.subscribe(e=>{console.group?.(`Router Event: ${e.constructor.name}`),console.log(function xz(n){if(!("type"in n))return`Unknown Router Event: ${n.constructor.name}`;switch(n.type){case 14:return`ActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state}, shouldActivate: ${n.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 2:return`NavigationCancel(id: ${n.id}, url: '${n.url}')`;case 16:return`NavigationSkipped(id: ${n.id}, url: '${n.url}')`;case 1:return`NavigationEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${n.id}, url: '${n.url}', error: ${n.error})`;case 0:return`NavigationStart(id: ${n.id}, url: '${n.url}')`;case 6:return`ResolveEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 5:return`ResolveStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 10:return`RouteConfigLoadEnd(path: ${n.route.path})`;case 9:return`RouteConfigLoadStart(path: ${n.route.path})`;case 4:return`RoutesRecognized(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 15:return`Scroll(anchor: '${n.anchor}', position: '${n.position?`${n.position[0]}, ${n.position[1]}`:null}')`}}(e)),console.log(e),console.groupEnd?.()})}}]:[],lo(1,n)}const SC=new Ne(Nl?"router preloader":"");function Q4(n){return lo(0,[{provide:SC,useExisting:q4},{provide:MC,useExisting:n}])}const Ju=!1,CC=new Ne(Ju?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),eW=[Sv,{provide:ku,useClass:iy},or,Wu,{provide:Al,useFactory:function wC(n){return n.routerState.root},deps:[or]},Dy,Ju?{provide:Ey,useValue:!0}:[]];function tW(){return new Q1("Router",or)}let EC=(()=>{class n{constructor(e){}static forRoot(e,i){return{ngModule:n,providers:[eW,Ju&&i?.enableTracing?Z4().\u0275providers:[],{provide:Ol,multi:!0,useValue:e},{provide:CC,useFactory:sW,deps:[[or,new Xc,new Yc]]},{provide:Zf,useValue:i||{}},i?.useHash?{provide:ko,useClass:aV}:{provide:ko,useClass:MR},{provide:Cy,useFactory:()=>{const n=gt(wU),t=gt(Dt),e=gt(Zf),i=gt(Jf),r=gt(ku);return e.scrollOffset&&n.setOffset(e.scrollOffset),new xC(r,i,n,t,e)}},i?.preloadingStrategy?Q4(i.preloadingStrategy).\u0275providers:[],{provide:Q1,multi:!0,useFactory:tW},i?.initialNavigation?oW(i):[],[{provide:AC,useFactory:DC},{provide:Z1,multi:!0,useExisting:AC}]]}}static forChild(e){return{ngModule:n,providers:[{provide:Ol,multi:!0,useValue:e}]}}}return n.\u0275fac=function(e){return new(e||n)(ye(CC,8))},n.\u0275mod=Ht({type:n}),n.\u0275inj=jt({imports:[vy]}),n})();function sW(n){if(Ju&&n)throw new oe(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function oW(n){return["disabled"===n.initialNavigation?lo(3,[{provide:lf,multi:!0,useFactory:()=>{const t=gt(or);return()=>{t.setUpLocationChangeListener()}}},{provide:Ay,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?lo(2,[{provide:Ay,useValue:0},{provide:lf,multi:!0,deps:[tr],useFactory:t=>{const e=t.get(sV,Promise.resolve());return()=>e.then(()=>new Promise(i=>{const r=t.get(or),s=t.get(RC);(function K4(n,t){n.events.pipe(ei(e=>e instanceof Ho||e instanceof Gf||e instanceof uy||e instanceof Vf),tt(e=>e instanceof Ho||e instanceof Vf?ar.COMPLETE:e instanceof Gf&&(0===e.code||1===e.code)?ar.REDIRECTING:ar.FAILED),ei(e=>e!==ar.REDIRECTING),Bn(1)).subscribe(()=>{t()})})(r,()=>{i(!0)}),t.get(Jf).afterPreactivation=()=>(i(!0),s.closed?Be(void 0):s),r.initialNavigation()}))}}]).\u0275providers:[]]}const AC=new Ne(Ju?"Router Initializer":"");let IC=(()=>{class n{constructor(){this.title="< error />",this.subtitle=""}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=Tt({type:n,selectors:[["ng-component"]],decls:11,vars:4,consts:[[1,"error"],[1,"stack","title",2,"--stacks","3"],[2,"--index","0"],[2,"--index","1"],[2,"--index","2"],[1,"stack","subtitle",2,"--stacks","1"]],template:function(e,i){1&e&&(re(0,"div",0)(1,"div",1)(2,"span",2),Ft(3),ue(),re(4,"span",3),Ft(5),ue(),re(6,"span",4),Ft(7),ue()(),re(8,"div",5)(9,"span",2),Ft(10),ue()()()),2&e&&(te(3),hn(i.title),te(2),hn(i.title),te(2),hn(i.title),te(3),hn(i.subtitle))},styles:[".error[_ngcontent-%COMP%]{color:var(--color);display:flex;flex-direction:column;justify-content:center;align-items:center}.error[_ngcontent-%COMP%]   .stack[_ngcontent-%COMP%]{display:grid}.error[_ngcontent-%COMP%]   .stack[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{grid-row-start:1;grid-column-start:1;--stack-height: calc(100% /var(--stacks) - 1px);--inverse-index: calc(calc(var(--stacks) - 1) - var(--index));--clip-top: calc(var(--stack-height) * var(--index));--clip-bottom: calc(var(--stack-height) * var(--inverse-index));clip-path:inset(var(--clip-top) 0 var(--clip-bottom) 0);animation-name:_ngcontent-%COMP%_stack,_ngcontent-%COMP%_glitch;animation-duration:.34s,2s;animation-timing-function:cubic-bezier(.46,.29,0,1.24),ease;animation-iteration-count:1,infinite;animation-delay:calc(var(--index) * .12s),2s;animation-fill-mode:backwards,none;animation-direction:normal,alternate-reverse}.error[_ngcontent-%COMP%]   .stack[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(odd){--glitch-translate: 8px}.error[_ngcontent-%COMP%]   .stack[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(even){--glitch-translate: -8px}@keyframes _ngcontent-%COMP%_stack{0%{opacity:0;transform:translate(-50%);text-shadow:-2px 3px 0 red,2px -3px 0 blue}60%{opacity:.5;transform:translate(50%)}80%{transform:none;opacity:1;text-shadow:2px -3px 0 red,-2px 3px 0 blue}to{text-shadow:none}}@keyframes _ngcontent-%COMP%_glitch{0%{text-shadow:-2px 3px 0 red,2px -3px 0 blue;transform:translate(var(--glitch-translate))}2%{text-shadow:2px -3px 0 red,-2px 3px 0 blue}4%,to{text-shadow:none;transform:none}}.error[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:5rem}.error[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:2rem}"]}),n})();const lW=[{path:"",component:(()=>{class n extends IC{constructor(){super(...arguments),this.title="< building />",this.subtitle="Content under development."}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=Xt(n)))(i||n)}}(),n.\u0275cmp=Tt({type:n,selectors:[["ng-component"]],features:[ft],decls:11,vars:4,consts:[[1,"error"],[1,"stack","title",2,"--stacks","3"],[2,"--index","0"],[2,"--index","1"],[2,"--index","2"],[1,"stack","subtitle",2,"--stacks","1"]],template:function(e,i){1&e&&(re(0,"div",0)(1,"div",1)(2,"span",2),Ft(3),ue(),re(4,"span",3),Ft(5),ue(),re(6,"span",4),Ft(7),ue()(),re(8,"div",5)(9,"span",2),Ft(10),ue()()()),2&e&&(te(3),hn(i.title),te(2),hn(i.title),te(2),hn(i.title),te(3),hn(i.subtitle))},styles:[".error[_ngcontent-%COMP%]{color:var(--color);display:flex;flex-direction:column;justify-content:center;align-items:center}.error[_ngcontent-%COMP%]   .stack[_ngcontent-%COMP%]{display:grid}.error[_ngcontent-%COMP%]   .stack[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{grid-row-start:1;grid-column-start:1;--stack-height: calc(100% /var(--stacks) - 1px);--inverse-index: calc(calc(var(--stacks) - 1) - var(--index));--clip-top: calc(var(--stack-height) * var(--index));--clip-bottom: calc(var(--stack-height) * var(--inverse-index));clip-path:inset(var(--clip-top) 0 var(--clip-bottom) 0);animation-name:_ngcontent-%COMP%_stack,_ngcontent-%COMP%_glitch;animation-duration:.34s,2s;animation-timing-function:cubic-bezier(.46,.29,0,1.24),ease;animation-iteration-count:1,infinite;animation-delay:calc(var(--index) * .12s),2s;animation-fill-mode:backwards,none;animation-direction:normal,alternate-reverse}.error[_ngcontent-%COMP%]   .stack[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(odd){--glitch-translate: 8px}.error[_ngcontent-%COMP%]   .stack[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(even){--glitch-translate: -8px}@keyframes _ngcontent-%COMP%_stack{0%{opacity:0;transform:translate(-50%);text-shadow:-2px 3px 0 red,2px -3px 0 blue}60%{opacity:.5;transform:translate(50%)}80%{transform:none;opacity:1;text-shadow:2px -3px 0 red,-2px 3px 0 blue}to{text-shadow:none}}@keyframes _ngcontent-%COMP%_glitch{0%{text-shadow:-2px 3px 0 red,2px -3px 0 blue;transform:translate(var(--glitch-translate))}2%{text-shadow:2px -3px 0 red,-2px 3px 0 blue}4%,to{text-shadow:none;transform:none}}.error[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:5rem}.error[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:2rem}"]}),n})()},{path:"**",component:(()=>{class n extends IC{constructor(){super(...arguments),this.title="< not found />",this.subtitle="Missing something?"}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=Xt(n)))(i||n)}}(),n.\u0275cmp=Tt({type:n,selectors:[["ng-component"]],features:[ft],decls:11,vars:4,consts:[[1,"error"],[1,"stack","title",2,"--stacks","3"],[2,"--index","0"],[2,"--index","1"],[2,"--index","2"],[1,"stack","subtitle",2,"--stacks","1"]],template:function(e,i){1&e&&(re(0,"div",0)(1,"div",1)(2,"span",2),Ft(3),ue(),re(4,"span",3),Ft(5),ue(),re(6,"span",4),Ft(7),ue()(),re(8,"div",5)(9,"span",2),Ft(10),ue()()()),2&e&&(te(3),hn(i.title),te(2),hn(i.title),te(2),hn(i.title),te(3),hn(i.subtitle))},styles:[".error[_ngcontent-%COMP%]{color:var(--color);display:flex;flex-direction:column;justify-content:center;align-items:center}.error[_ngcontent-%COMP%]   .stack[_ngcontent-%COMP%]{display:grid}.error[_ngcontent-%COMP%]   .stack[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{grid-row-start:1;grid-column-start:1;--stack-height: calc(100% /var(--stacks) - 1px);--inverse-index: calc(calc(var(--stacks) - 1) - var(--index));--clip-top: calc(var(--stack-height) * var(--index));--clip-bottom: calc(var(--stack-height) * var(--inverse-index));clip-path:inset(var(--clip-top) 0 var(--clip-bottom) 0);animation-name:_ngcontent-%COMP%_stack,_ngcontent-%COMP%_glitch;animation-duration:.34s,2s;animation-timing-function:cubic-bezier(.46,.29,0,1.24),ease;animation-iteration-count:1,infinite;animation-delay:calc(var(--index) * .12s),2s;animation-fill-mode:backwards,none;animation-direction:normal,alternate-reverse}.error[_ngcontent-%COMP%]   .stack[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(odd){--glitch-translate: 8px}.error[_ngcontent-%COMP%]   .stack[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(even){--glitch-translate: -8px}@keyframes _ngcontent-%COMP%_stack{0%{opacity:0;transform:translate(-50%);text-shadow:-2px 3px 0 red,2px -3px 0 blue}60%{opacity:.5;transform:translate(50%)}80%{transform:none;opacity:1;text-shadow:2px -3px 0 red,-2px 3px 0 blue}to{text-shadow:none}}@keyframes _ngcontent-%COMP%_glitch{0%{text-shadow:-2px 3px 0 red,2px -3px 0 blue;transform:translate(var(--glitch-translate))}2%{text-shadow:2px -3px 0 red,-2px 3px 0 blue}4%,to{text-shadow:none;transform:none}}.error[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:5rem}.error[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:2rem}"]}),n})()}];let cW=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ht({type:n}),n.\u0275inj=jt({imports:[EC.forRoot(lW),EC]}),n})();function PC(n,t,e,i,r,s,o){try{var a=n[s](o),l=a.value}catch(c){return void e(c)}a.done?t(l):Promise.resolve(l).then(i,r)}const Iy="148",dW=0,OC=1,hW=2,NC=1,fW=2,Zu=3,zo=0,Er=1,Py=2,Qf=3,co=0,Fl=1,FC=2,LC=3,BC=4,pW=5,Ll=100,mW=101,gW=102,jC=103,kC=104,_W=200,vW=201,yW=202,bW=203,GC=204,VC=205,TW=206,MW=207,xW=208,wW=209,DW=210,RW=0,SW=1,CW=2,Oy=3,EW=4,AW=5,IW=6,PW=7,ep=0,OW=1,NW=2,Fs=0,FW=1,LW=2,BW=3,jW=4,kW=5,Wo=301,$o=302,tp=303,np=304,Qu=306,ip=1e3,Ei=1001,rp=1002,jn=1003,Fy=1004,sp=1005,kn=1006,UC=1007,qo=1008,Ko=1009,GW=1010,VW=1011,HC=1012,UW=1013,Xo=1014,uo=1015,ed=1016,HW=1017,zW=1018,Bl=1020,WW=1021,$W=1022,Ar=1023,qW=1024,KW=1025,Yo=1026,jl=1027,XW=1028,YW=1029,JW=1030,ZW=1031,QW=1033,Ly=33776,By=33777,jy=33778,ky=33779,zC=35840,WC=35841,$C=35842,qC=35843,e5=36196,KC=37492,XC=37496,YC=37808,JC=37809,ZC=37810,QC=37811,eE=37812,tE=37813,nE=37814,iE=37815,rE=37816,sE=37817,oE=37818,aE=37819,lE=37820,cE=37821,uE=36492,Jo=3e3,ln=3001,s5=3201,Zo=0,o5=1,hs="srgb",td="srgb-linear",hE="300 es",Hy=1035;class Vl{addEventListener(t,e){void 0===this._listeners&&(this._listeners={});const i=this._listeners;void 0===i[t]&&(i[t]=[]),-1===i[t].indexOf(e)&&i[t].push(e)}hasEventListener(t,e){if(void 0===this._listeners)return!1;const i=this._listeners;return void 0!==i[t]&&-1!==i[t].indexOf(e)}removeEventListener(t,e){if(void 0===this._listeners)return;const r=this._listeners[t];if(void 0!==r){const s=r.indexOf(e);-1!==s&&r.splice(s,1)}}dispatchEvent(t){if(void 0===this._listeners)return;const i=this._listeners[t.type];if(void 0!==i){t.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,t);t.target=null}}}const bi=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],Qo=Math.PI/180,nd=180/Math.PI;function lr(){const n=4294967295*Math.random()|0,t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(bi[255&n]+bi[n>>8&255]+bi[n>>16&255]+bi[n>>24&255]+"-"+bi[255&t]+bi[t>>8&255]+"-"+bi[t>>16&15|64]+bi[t>>24&255]+"-"+bi[63&e|128]+bi[e>>8&255]+"-"+bi[e>>16&255]+bi[e>>24&255]+bi[255&i]+bi[i>>8&255]+bi[i>>16&255]+bi[i>>24&255]).toLowerCase()}function An(n,t,e){return Math.max(t,Math.min(e,n))}function id(n,t,e){return(1-e)*n+e*t}function Wy(n){return 0==(n&n-1)&&0!==n}function up(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function Ls(n,t){switch(t.constructor){case Float32Array:return n;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function Zt(n,t){switch(t.constructor){case Float32Array:return n;case Uint16Array:return Math.round(65535*n);case Uint8Array:return Math.round(255*n);case Int16Array:return Math.round(32767*n);case Int8Array:return Math.round(127*n);default:throw new Error("Invalid component type.")}}class Q{constructor(t=0,e=0){Q.prototype.isVector2=!0,this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,i=this.y,r=t.elements;return this.x=r[0]*e+r[3]*i+r[6],this.y=r[1]*e+r[4]*i+r[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}clampLength(t,e){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,i=this.y-t.y;return e*e+i*i}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const i=Math.cos(e),r=Math.sin(e),s=this.x-t.x,o=this.y-t.y;return this.x=s*i-o*r+t.x,this.y=s*r+o*i+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Wi{constructor(){Wi.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(t,e,i,r,s,o,a,l,c){const u=this.elements;return u[0]=t,u[1]=r,u[2]=a,u[3]=e,u[4]=s,u[5]=l,u[6]=i,u[7]=o,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],this}extractBasis(t,e,i){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const i=t.elements,r=e.elements,s=this.elements,o=i[0],a=i[3],l=i[6],c=i[1],u=i[4],d=i[7],h=i[2],f=i[5],m=i[8],p=r[0],g=r[3],v=r[6],y=r[1],_=r[4],b=r[7],M=r[2],x=r[5],E=r[8];return s[0]=o*p+a*y+l*M,s[3]=o*g+a*_+l*x,s[6]=o*v+a*b+l*E,s[1]=c*p+u*y+d*M,s[4]=c*g+u*_+d*x,s[7]=c*v+u*b+d*E,s[2]=h*p+f*y+m*M,s[5]=h*g+f*_+m*x,s[8]=h*v+f*b+m*E,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],i=t[1],r=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],u=t[8];return e*o*u-e*a*c-i*s*u+i*a*l+r*s*c-r*o*l}invert(){const t=this.elements,e=t[0],i=t[1],r=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],u=t[8],d=u*o-a*c,h=a*l-u*s,f=c*s-o*l,m=e*d+i*h+r*f;if(0===m)return this.set(0,0,0,0,0,0,0,0,0);const p=1/m;return t[0]=d*p,t[1]=(r*c-u*i)*p,t[2]=(a*i-r*o)*p,t[3]=h*p,t[4]=(u*e-r*l)*p,t[5]=(r*s-a*e)*p,t[6]=f*p,t[7]=(i*l-c*e)*p,t[8]=(o*e-i*s)*p,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,i,r,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(i*l,i*c,-i*(l*o+c*a)+o+t,-r*c,r*l,-r*(-c*o+l*a)+a+e,0,0,1),this}scale(t,e){return this.premultiply($y.makeScale(t,e)),this}rotate(t){return this.premultiply($y.makeRotation(-t)),this}translate(t,e){return this.premultiply($y.makeTranslation(t,e)),this}makeTranslation(t,e){return this.set(1,0,t,0,1,e,0,0,1),this}makeRotation(t){const e=Math.cos(t),i=Math.sin(t);return this.set(e,-i,0,i,e,0,0,0,1),this}makeScale(t,e){return this.set(t,0,0,0,e,0,0,0,1),this}equals(t){const e=this.elements,i=t.elements;for(let r=0;r<9;r++)if(e[r]!==i[r])return!1;return!0}fromArray(t,e=0){for(let i=0;i<9;i++)this.elements[i]=t[i+e];return this}toArray(t=[],e=0){const i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t}clone(){return(new this.constructor).fromArray(this.elements)}}const $y=new Wi;function mE(n){for(let t=n.length-1;t>=0;--t)if(n[t]>=65535)return!0;return!1}function rd(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function ea(n){return n<.04045?.0773993808*n:Math.pow(.9478672986*n+.0521327014,2.4)}function dp(n){return n<.0031308?12.92*n:1.055*Math.pow(n,.41666)-.055}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const qy={[hs]:{[td]:ea},[td]:{[hs]:dp}},Ai={legacyMode:!0,get workingColorSpace(){return td},set workingColorSpace(n){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(n,t,e){if(this.legacyMode||t===e||!t||!e)return n;if(qy[t]&&void 0!==qy[t][e]){const i=qy[t][e];return n.r=i(n.r),n.g=i(n.g),n.b=i(n.b),n}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(n,t){return this.convert(n,this.workingColorSpace,t)},toWorkingColorSpace:function(n,t){return this.convert(n,t,this.workingColorSpace)}},gE={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Kn={r:0,g:0,b:0},qr={h:0,s:0,l:0},hp={h:0,s:0,l:0};function Ky(n,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?n+6*(t-n)*e:e<.5?t:e<2/3?n+6*(t-n)*(2/3-e):n}function fp(n,t){return t.r=n.r,t.g=n.g,t.b=n.b,t}let Hl,Ae=(()=>{class n{constructor(e,i,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===i&&void 0===r?this.set(e):this.setRGB(e,i,r)}set(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,i=hs){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,Ai.toWorkingColorSpace(this,i),this}setRGB(e,i,r,s=Ai.workingColorSpace){return this.r=e,this.g=i,this.b=r,Ai.toWorkingColorSpace(this,s),this}setHSL(e,i,r,s=Ai.workingColorSpace){if(e=function zy(n,t){return(n%t+t)%t}(e,1),i=An(i,0,1),r=An(r,0,1),0===i)this.r=this.g=this.b=r;else{const o=r<=.5?r*(1+i):r+i-r*i,a=2*r-o;this.r=Ky(a,o,e+1/3),this.g=Ky(a,o,e),this.b=Ky(a,o,e-1/3)}return Ai.toWorkingColorSpace(this,s),this}setStyle(e,i=hs){function r(o){void 0!==o&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let s;if(s=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let o;const l=s[2];switch(s[1]){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return this.r=Math.min(255,parseInt(o[1],10))/255,this.g=Math.min(255,parseInt(o[2],10))/255,this.b=Math.min(255,parseInt(o[3],10))/255,Ai.toWorkingColorSpace(this,i),r(o[4]),this;if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return this.r=Math.min(100,parseInt(o[1],10))/100,this.g=Math.min(100,parseInt(o[2],10))/100,this.b=Math.min(100,parseInt(o[3],10))/100,Ai.toWorkingColorSpace(this,i),r(o[4]),this;break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l)){const c=parseFloat(o[1])/360,u=parseFloat(o[2])/100,d=parseFloat(o[3])/100;return r(o[4]),this.setHSL(c,u,d,i)}}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(e)){const o=s[1],a=o.length;if(3===a)return this.r=parseInt(o.charAt(0)+o.charAt(0),16)/255,this.g=parseInt(o.charAt(1)+o.charAt(1),16)/255,this.b=parseInt(o.charAt(2)+o.charAt(2),16)/255,Ai.toWorkingColorSpace(this,i),this;if(6===a)return this.r=parseInt(o.charAt(0)+o.charAt(1),16)/255,this.g=parseInt(o.charAt(2)+o.charAt(3),16)/255,this.b=parseInt(o.charAt(4)+o.charAt(5),16)/255,Ai.toWorkingColorSpace(this,i),this}return e&&e.length>0?this.setColorName(e,i):this}setColorName(e,i=hs){const r=gE[e.toLowerCase()];return void 0!==r?this.setHex(r,i):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=ea(e.r),this.g=ea(e.g),this.b=ea(e.b),this}copyLinearToSRGB(e){return this.r=dp(e.r),this.g=dp(e.g),this.b=dp(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=hs){return Ai.fromWorkingColorSpace(fp(this,Kn),e),An(255*Kn.r,0,255)<<16^An(255*Kn.g,0,255)<<8^An(255*Kn.b,0,255)<<0}getHexString(e=hs){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,i=Ai.workingColorSpace){Ai.fromWorkingColorSpace(fp(this,Kn),i);const r=Kn.r,s=Kn.g,o=Kn.b,a=Math.max(r,s,o),l=Math.min(r,s,o);let c,u;const d=(l+a)/2;if(l===a)c=0,u=0;else{const h=a-l;switch(u=d<=.5?h/(a+l):h/(2-a-l),a){case r:c=(s-o)/h+(s<o?6:0);break;case s:c=(o-r)/h+2;break;case o:c=(r-s)/h+4}c/=6}return e.h=c,e.s=u,e.l=d,e}getRGB(e,i=Ai.workingColorSpace){return Ai.fromWorkingColorSpace(fp(this,Kn),i),e.r=Kn.r,e.g=Kn.g,e.b=Kn.b,e}getStyle(e=hs){return Ai.fromWorkingColorSpace(fp(this,Kn),e),e!==hs?`color(${e} ${Kn.r} ${Kn.g} ${Kn.b})`:`rgb(${255*Kn.r|0},${255*Kn.g|0},${255*Kn.b|0})`}offsetHSL(e,i,r){return this.getHSL(qr),qr.h+=e,qr.s+=i,qr.l+=r,this.setHSL(qr.h,qr.s,qr.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,i){return this.r=e.r+i.r,this.g=e.g+i.g,this.b=e.b+i.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,i){return this.r+=(e.r-this.r)*i,this.g+=(e.g-this.g)*i,this.b+=(e.b-this.b)*i,this}lerpColors(e,i,r){return this.r=e.r+(i.r-e.r)*r,this.g=e.g+(i.g-e.g)*r,this.b=e.b+(i.b-e.b)*r,this}lerpHSL(e,i){this.getHSL(qr),e.getHSL(hp);const r=id(qr.h,hp.h,i),s=id(qr.s,hp.s,i),o=id(qr.l,hp.l,i);return this.setHSL(r,s,o),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,i=0){return this.r=e[i],this.g=e[i+1],this.b=e[i+2],this}toArray(e=[],i=0){return e[i]=this.r,e[i+1]=this.g,e[i+2]=this.b,e}fromBufferAttribute(e,i){return this.r=e.getX(i),this.g=e.getY(i),this.b=e.getZ(i),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}return n.NAMES=gE,n})();class _E{static getDataURL(t){if(/^data:/i.test(t.src)||typeof HTMLCanvasElement>"u")return t.src;let e;if(t instanceof HTMLCanvasElement)e=t;else{void 0===Hl&&(Hl=rd("canvas")),Hl.width=t.width,Hl.height=t.height;const i=Hl.getContext("2d");t instanceof ImageData?i.putImageData(t,0,0):i.drawImage(t,0,0,t.width,t.height),e=Hl}return e.width>2048||e.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),e.toDataURL("image/jpeg",.6)):e.toDataURL("image/png")}static sRGBToLinear(t){if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap){const e=rd("canvas");e.width=t.width,e.height=t.height;const i=e.getContext("2d");i.drawImage(t,0,0,t.width,t.height);const r=i.getImageData(0,0,t.width,t.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=255*ea(s[o]/255);return i.putImageData(r,0,0),e}if(t.data){const e=t.data.slice(0);for(let i=0;i<e.length;i++)e[i]=e instanceof Uint8Array||e instanceof Uint8ClampedArray?Math.floor(255*ea(e[i]/255)):ea(e[i]);return{data:e,width:t.width,height:t.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}class zl{constructor(t=null){this.isSource=!0,this.uuid=lr(),this.data=t,this.version=0}set needsUpdate(t){!0===t&&this.version++}toJSON(t){const e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.images[this.uuid])return t.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(null!==r){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)s.push(Xy(r[o].isDataTexture?r[o].image:r[o]))}else s=Xy(r);i.url=s}return e||(t.images[this.uuid]=i),i}}function Xy(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?_E.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let M5=0,ho=(()=>{class n extends Vl{constructor(e=n.DEFAULT_IMAGE,i=n.DEFAULT_MAPPING,r=Ei,s=Ei,o=kn,a=qo,l=Ar,c=Ko,u=n.DEFAULT_ANISOTROPY,d=Jo){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:M5++}),this.uuid=lr(),this.name="",this.source=new zl(e),this.mipmaps=[],this.mapping=i,this.wrapS=r,this.wrapT=s,this.magFilter=o,this.minFilter=a,this.anisotropy=u,this.format=l,this.internalFormat=null,this.type=c,this.offset=new Q(0,0),this.repeat=new Q(1,1),this.center=new Q(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Wi,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=d,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const i=void 0===e||"string"==typeof e;if(!i&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),i||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case ip:e.x=e.x-Math.floor(e.x);break;case Ei:e.x=e.x<0?0:1;break;case rp:e.x=1===Math.abs(Math.floor(e.x)%2)?Math.ceil(e.x)-e.x:e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case ip:e.y=e.y-Math.floor(e.y);break;case Ei:e.y=e.y<0?0:1;break;case rp:e.y=1===Math.abs(Math.floor(e.y)%2)?Math.ceil(e.y)-e.y:e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}}return n.DEFAULT_IMAGE=null,n.DEFAULT_MAPPING=300,n.DEFAULT_ANISOTROPY=1,n})();class Gt{constructor(t=0,e=0,i=0,r=1){Gt.prototype.isVector4=!0,this.x=t,this.y=e,this.z=i,this.w=r}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,i,r){return this.x=t,this.y=e,this.z=i,this.w=r,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const e=this.x,i=this.y,r=this.z,s=this.w,o=t.elements;return this.x=o[0]*e+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*e+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*e+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*e+o[7]*i+o[11]*r+o[15]*s,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,i,r,s;const l=t.elements,c=l[0],u=l[4],d=l[8],h=l[1],f=l[5],m=l[9],p=l[2],g=l[6],v=l[10];if(Math.abs(u-h)<.01&&Math.abs(d-p)<.01&&Math.abs(m-g)<.01){if(Math.abs(u+h)<.1&&Math.abs(d+p)<.1&&Math.abs(m+g)<.1&&Math.abs(c+f+v-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;const _=(c+1)/2,b=(f+1)/2,M=(v+1)/2,x=(u+h)/4,E=(d+p)/4,T=(m+g)/4;return _>b&&_>M?_<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(_),r=x/i,s=E/i):b>M?b<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(b),i=x/r,s=T/r):M<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(M),i=E/s,r=T/s),this.set(i,r,s,e),this}let y=Math.sqrt((g-m)*(g-m)+(d-p)*(d-p)+(h-u)*(h-u));return Math.abs(y)<.001&&(y=1),this.x=(g-m)/y,this.y=(d-p)/y,this.z=(h-u)/y,this.w=Math.acos((c+f+v-1)/2),this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this}clampLength(t,e){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this.z=t.z+(e.z-t.z)*i,this.w=t.w+(e.w-t.w)*i,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class ta extends Vl{constructor(t=1,e=1,i={}){super(),this.isWebGLRenderTarget=!0,this.width=t,this.height=e,this.depth=1,this.scissor=new Gt(0,0,t,e),this.scissorTest=!1,this.viewport=new Gt(0,0,t,e),this.texture=new ho({width:t,height:e,depth:1},i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==i.generateMipmaps&&i.generateMipmaps,this.texture.internalFormat=void 0!==i.internalFormat?i.internalFormat:null,this.texture.minFilter=void 0!==i.minFilter?i.minFilter:kn,this.depthBuffer=void 0===i.depthBuffer||i.depthBuffer,this.stencilBuffer=void 0!==i.stencilBuffer&&i.stencilBuffer,this.depthTexture=void 0!==i.depthTexture?i.depthTexture:null,this.samples=void 0!==i.samples?i.samples:0}setSize(t,e,i=1){(this.width!==t||this.height!==e||this.depth!==i)&&(this.width=t,this.height=e,this.depth=i,this.texture.image.width=t,this.texture.image.height=e,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return(new this.constructor).copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.texture.isRenderTargetTexture=!0;const e=Object.assign({},t.texture.image);return this.texture.source=new zl(e),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,null!==t.depthTexture&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Yy extends ho{constructor(t=null,e=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:t,width:e,height:i,depth:r},this.magFilter=jn,this.minFilter=jn,this.wrapR=Ei,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class vE extends ho{constructor(t=null,e=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:e,height:i,depth:r},this.magFilter=jn,this.minFilter=jn,this.wrapR=Ei,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class cr{constructor(t=0,e=0,i=0,r=1){this.isQuaternion=!0,this._x=t,this._y=e,this._z=i,this._w=r}static slerpFlat(t,e,i,r,s,o,a){let l=i[r+0],c=i[r+1],u=i[r+2],d=i[r+3];const h=s[o+0],f=s[o+1],m=s[o+2],p=s[o+3];if(0===a)return t[e+0]=l,t[e+1]=c,t[e+2]=u,void(t[e+3]=d);if(1===a)return t[e+0]=h,t[e+1]=f,t[e+2]=m,void(t[e+3]=p);if(d!==p||l!==h||c!==f||u!==m){let g=1-a;const v=l*h+c*f+u*m+d*p,y=v>=0?1:-1,_=1-v*v;if(_>Number.EPSILON){const M=Math.sqrt(_),x=Math.atan2(M,v*y);g=Math.sin(g*x)/M,a=Math.sin(a*x)/M}const b=a*y;if(l=l*g+h*b,c=c*g+f*b,u=u*g+m*b,d=d*g+p*b,g===1-a){const M=1/Math.sqrt(l*l+c*c+u*u+d*d);l*=M,c*=M,u*=M,d*=M}}t[e]=l,t[e+1]=c,t[e+2]=u,t[e+3]=d}static multiplyQuaternionsFlat(t,e,i,r,s,o){const a=i[r],l=i[r+1],c=i[r+2],u=i[r+3],d=s[o],h=s[o+1],f=s[o+2],m=s[o+3];return t[e]=a*m+u*d+l*f-c*h,t[e+1]=l*m+u*h+c*d-a*f,t[e+2]=c*m+u*f+a*h-l*d,t[e+3]=u*m-a*d-l*h-c*f,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,i,r){return this._x=t,this._y=e,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e){const i=t._x,r=t._y,s=t._z,o=t._order,a=Math.cos,l=Math.sin,c=a(i/2),u=a(r/2),d=a(s/2),h=l(i/2),f=l(r/2),m=l(s/2);switch(o){case"XYZ":this._x=h*u*d+c*f*m,this._y=c*f*d-h*u*m,this._z=c*u*m+h*f*d,this._w=c*u*d-h*f*m;break;case"YXZ":this._x=h*u*d+c*f*m,this._y=c*f*d-h*u*m,this._z=c*u*m-h*f*d,this._w=c*u*d+h*f*m;break;case"ZXY":this._x=h*u*d-c*f*m,this._y=c*f*d+h*u*m,this._z=c*u*m+h*f*d,this._w=c*u*d-h*f*m;break;case"ZYX":this._x=h*u*d-c*f*m,this._y=c*f*d+h*u*m,this._z=c*u*m-h*f*d,this._w=c*u*d+h*f*m;break;case"YZX":this._x=h*u*d+c*f*m,this._y=c*f*d+h*u*m,this._z=c*u*m-h*f*d,this._w=c*u*d-h*f*m;break;case"XZY":this._x=h*u*d-c*f*m,this._y=c*f*d-h*u*m,this._z=c*u*m+h*f*d,this._w=c*u*d+h*f*m;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!1!==e&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const i=e/2,r=Math.sin(i);return this._x=t.x*r,this._y=t.y*r,this._z=t.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,i=e[0],r=e[4],s=e[8],o=e[1],a=e[5],l=e[9],c=e[2],u=e[6],d=e[10],h=i+a+d;if(h>0){const f=.5/Math.sqrt(h+1);this._w=.25/f,this._x=(u-l)*f,this._y=(s-c)*f,this._z=(o-r)*f}else if(i>a&&i>d){const f=2*Math.sqrt(1+i-a-d);this._w=(u-l)/f,this._x=.25*f,this._y=(r+o)/f,this._z=(s+c)/f}else if(a>d){const f=2*Math.sqrt(1+a-i-d);this._w=(s-c)/f,this._x=(r+o)/f,this._y=.25*f,this._z=(l+u)/f}else{const f=2*Math.sqrt(1+d-i-a);this._w=(o-r)/f,this._x=(s+c)/f,this._y=(l+u)/f,this._z=.25*f}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let i=t.dot(e)+1;return i<Number.EPSILON?(i=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=i):(this._x=0,this._y=-t.z,this._z=t.y,this._w=i)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=i),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(An(this.dot(t),-1,1)))}rotateTowards(t,e){const i=this.angleTo(t);if(0===i)return this;const r=Math.min(1,e/i);return this.slerp(t,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const i=t._x,r=t._y,s=t._z,o=t._w,a=e._x,l=e._y,c=e._z,u=e._w;return this._x=i*u+o*a+r*c-s*l,this._y=r*u+o*l+s*a-i*c,this._z=s*u+o*c+i*l-r*a,this._w=o*u-i*a-r*l-s*c,this._onChangeCallback(),this}slerp(t,e){if(0===e)return this;if(1===e)return this.copy(t);const i=this._x,r=this._y,s=this._z,o=this._w;let a=o*t._w+i*t._x+r*t._y+s*t._z;if(a<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,a=-a):this.copy(t),a>=1)return this._w=o,this._x=i,this._y=r,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const f=1-e;return this._w=f*o+e*this._w,this._x=f*i+e*this._x,this._y=f*r+e*this._y,this._z=f*s+e*this._z,this.normalize(),this._onChangeCallback(),this}const c=Math.sqrt(l),u=Math.atan2(c,a),d=Math.sin((1-e)*u)/c,h=Math.sin(e*u)/c;return this._w=o*d+this._w*h,this._x=i*d+this._x*h,this._y=r*d+this._y*h,this._z=s*d+this._z*h,this._onChangeCallback(),this}slerpQuaternions(t,e,i){return this.copy(t).slerp(e,i)}random(){const t=Math.random(),e=Math.sqrt(1-t),i=Math.sqrt(t),r=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(e*Math.cos(r),i*Math.sin(s),i*Math.cos(s),e*Math.sin(r))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class S{constructor(t=0,e=0,i=0){S.prototype.isVector3=!0,this.x=t,this.y=e,this.z=i}set(t,e,i){return void 0===i&&(i=this.z),this.x=t,this.y=e,this.z=i,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return this.applyQuaternion(yE.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(yE.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,i=this.y,r=this.z,s=t.elements;return this.x=s[0]*e+s[3]*i+s[6]*r,this.y=s[1]*e+s[4]*i+s[7]*r,this.z=s[2]*e+s[5]*i+s[8]*r,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,i=this.y,r=this.z,s=t.elements,o=1/(s[3]*e+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*e+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*e+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*e+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(t){const e=this.x,i=this.y,r=this.z,s=t.x,o=t.y,a=t.z,l=t.w,c=l*e+o*r-a*i,u=l*i+a*e-s*r,d=l*r+s*i-o*e,h=-s*e-o*i-a*r;return this.x=c*l+h*-s+u*-a-d*-o,this.y=u*l+h*-o+d*-s-c*-a,this.z=d*l+h*-a+c*-o-u*-s,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,i=this.y,r=this.z,s=t.elements;return this.x=s[0]*e+s[4]*i+s[8]*r,this.y=s[1]*e+s[5]*i+s[9]*r,this.z=s[2]*e+s[6]*i+s[10]*r,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}clampLength(t,e){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this.z=t.z+(e.z-t.z)*i,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,e){const i=t.x,r=t.y,s=t.z,o=e.x,a=e.y,l=e.z;return this.x=r*l-s*a,this.y=s*o-i*l,this.z=i*a-r*o,this}projectOnVector(t){const e=t.lengthSq();if(0===e)return this.set(0,0,0);const i=t.dot(this)/e;return this.copy(t).multiplyScalar(i)}projectOnPlane(t){return Jy.copy(this).projectOnVector(t),this.sub(Jy)}reflect(t){return this.sub(Jy.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const i=this.dot(t)/e;return Math.acos(An(i,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,i=this.y-t.y,r=this.z-t.z;return e*e+i*i+r*r}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,i){const r=Math.sin(e)*t;return this.x=r*Math.sin(i),this.y=Math.cos(e)*t,this.z=r*Math.cos(i),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,i){return this.x=t*Math.sin(e),this.y=i,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),i=this.setFromMatrixColumn(t,1).length(),r=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=i,this.z=r,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,4*e)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,3*e)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=2*(Math.random()-.5),e=Math.random()*Math.PI*2,i=Math.sqrt(1-t**2);return this.x=i*Math.cos(e),this.y=i*Math.sin(e),this.z=t,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Jy=new S,yE=new cr;class Wl{constructor(t=new S(1/0,1/0,1/0),e=new S(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){let e=1/0,i=1/0,r=1/0,s=-1/0,o=-1/0,a=-1/0;for(let l=0,c=t.length;l<c;l+=3){const u=t[l],d=t[l+1],h=t[l+2];u<e&&(e=u),d<i&&(i=d),h<r&&(r=h),u>s&&(s=u),d>o&&(o=d),h>a&&(a=h)}return this.min.set(e,i,r),this.max.set(s,o,a),this}setFromBufferAttribute(t){let e=1/0,i=1/0,r=1/0,s=-1/0,o=-1/0,a=-1/0;for(let l=0,c=t.count;l<c;l++){const u=t.getX(l),d=t.getY(l),h=t.getZ(l);u<e&&(e=u),d<i&&(i=d),h<r&&(r=h),u>s&&(s=u),d>o&&(o=d),h>a&&(a=h)}return this.min.set(e,i,r),this.max.set(s,o,a),this}setFromPoints(t){this.makeEmpty();for(let e=0,i=t.length;e<i;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const i=na.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}setFromObject(t,e=!1){return this.makeEmpty(),this.expandByObject(t,e)}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,e=!1){t.updateWorldMatrix(!1,!1);const i=t.geometry;if(void 0!==i)if(e&&null!=i.attributes&&void 0!==i.attributes.position){const s=i.attributes.position;for(let o=0,a=s.count;o<a;o++)na.fromBufferAttribute(s,o).applyMatrix4(t.matrixWorld),this.expandByPoint(na)}else null===i.boundingBox&&i.computeBoundingBox(),Zy.copy(i.boundingBox),Zy.applyMatrix4(t.matrixWorld),this.union(Zy);const r=t.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],e);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,na),na.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,i;return t.normal.x>0?(e=t.normal.x*this.min.x,i=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,i=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,i+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,i+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,i+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,i+=t.normal.z*this.min.z),e<=-t.constant&&i>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(sd),pp.subVectors(this.max,sd),$l.subVectors(t.a,sd),ql.subVectors(t.b,sd),Kl.subVectors(t.c,sd),fo.subVectors(ql,$l),po.subVectors(Kl,ql),ia.subVectors($l,Kl);let e=[0,-fo.z,fo.y,0,-po.z,po.y,0,-ia.z,ia.y,fo.z,0,-fo.x,po.z,0,-po.x,ia.z,0,-ia.x,-fo.y,fo.x,0,-po.y,po.x,0,-ia.y,ia.x,0];return!(!Qy(e,$l,ql,Kl,pp)||(e=[1,0,0,0,1,0,0,0,1],!Qy(e,$l,ql,Kl,pp)))&&(mp.crossVectors(fo,po),e=[mp.x,mp.y,mp.z],Qy(e,$l,ql,Kl,pp))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return na.copy(t).clamp(this.min,this.max).sub(t).length()}getBoundingSphere(t){return this.getCenter(t.center),t.radius=.5*this.getSize(na).length(),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()||(Bs[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),Bs[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),Bs[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),Bs[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),Bs[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),Bs[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),Bs[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),Bs[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(Bs)),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const Bs=[new S,new S,new S,new S,new S,new S,new S,new S],na=new S,Zy=new Wl,$l=new S,ql=new S,Kl=new S,fo=new S,po=new S,ia=new S,sd=new S,pp=new S,mp=new S,ra=new S;function Qy(n,t,e,i,r){for(let s=0,o=n.length-3;s<=o;s+=3){ra.fromArray(n,s);const a=r.x*Math.abs(ra.x)+r.y*Math.abs(ra.y)+r.z*Math.abs(ra.z),l=t.dot(ra),c=e.dot(ra),u=i.dot(ra);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>a)return!1}return!0}const x5=new Wl,od=new S,e0=new S;class Xl{constructor(t=new S,e=-1){this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const i=this.center;void 0!==e?i.copy(e):x5.setFromPoints(t).getCenter(i);let r=0;for(let s=0,o=t.length;s<o;s++)r=Math.max(r,i.distanceToSquared(t[s]));return this.radius=Math.sqrt(r),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const i=this.center.distanceToSquared(t);return e.copy(t),i>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;od.subVectors(t,this.center);const e=od.lengthSq();if(e>this.radius*this.radius){const i=Math.sqrt(e),r=.5*(i-this.radius);this.center.addScaledVector(od,r/i),this.radius+=r}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(!0===this.center.equals(t.center)?this.radius=Math.max(this.radius,t.radius):(e0.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(od.copy(t.center).add(e0)),this.expandByPoint(od.copy(t.center).sub(e0))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const js=new S,t0=new S,gp=new S,mo=new S,n0=new S,_p=new S,r0=new S;class vp{constructor(t=new S,e=new S(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.direction).multiplyScalar(t).add(this.origin)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,js)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);const i=e.dot(this.direction);return i<0?e.copy(this.origin):e.copy(this.direction).multiplyScalar(i).add(this.origin)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=js.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(js.copy(this.direction).multiplyScalar(e).add(this.origin),js.distanceToSquared(t))}distanceSqToSegment(t,e,i,r){t0.copy(t).add(e).multiplyScalar(.5),gp.copy(e).sub(t).normalize(),mo.copy(this.origin).sub(t0);const s=.5*t.distanceTo(e),o=-this.direction.dot(gp),a=mo.dot(this.direction),l=-mo.dot(gp),c=mo.lengthSq(),u=Math.abs(1-o*o);let d,h,f,m;if(u>0)if(d=o*l-a,h=o*a-l,m=s*u,d>=0)if(h>=-m)if(h<=m){const p=1/u;d*=p,h*=p,f=d*(d+o*h+2*a)+h*(o*d+h+2*l)+c}else h=s,d=Math.max(0,-(o*h+a)),f=-d*d+h*(h+2*l)+c;else h=-s,d=Math.max(0,-(o*h+a)),f=-d*d+h*(h+2*l)+c;else h<=-m?(d=Math.max(0,-(-o*s+a)),h=d>0?-s:Math.min(Math.max(-s,-l),s),f=-d*d+h*(h+2*l)+c):h<=m?(d=0,h=Math.min(Math.max(-s,-l),s),f=h*(h+2*l)+c):(d=Math.max(0,-(o*s+a)),h=d>0?s:Math.min(Math.max(-s,-l),s),f=-d*d+h*(h+2*l)+c);else h=o>0?-s:s,d=Math.max(0,-(o*h+a)),f=-d*d+h*(h+2*l)+c;return i&&i.copy(this.direction).multiplyScalar(d).add(this.origin),r&&r.copy(gp).multiplyScalar(h).add(t0),f}intersectSphere(t,e){js.subVectors(t.center,this.origin);const i=js.dot(this.direction),r=js.dot(js)-i*i,s=t.radius*t.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=i-o,l=i+o;return a<0&&l<0?null:this.at(a<0?l:a,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;const i=-(this.origin.dot(t.normal)+t.constant)/e;return i>=0?i:null}intersectPlane(t,e){const i=this.distanceToPlane(t);return null===i?null:this.at(i,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);return 0===e||t.normal.dot(this.direction)*e<0}intersectBox(t,e){let i,r,s,o,a,l;const c=1/this.direction.x,u=1/this.direction.y,d=1/this.direction.z,h=this.origin;return c>=0?(i=(t.min.x-h.x)*c,r=(t.max.x-h.x)*c):(i=(t.max.x-h.x)*c,r=(t.min.x-h.x)*c),u>=0?(s=(t.min.y-h.y)*u,o=(t.max.y-h.y)*u):(s=(t.max.y-h.y)*u,o=(t.min.y-h.y)*u),i>o||s>r||((s>i||isNaN(i))&&(i=s),(o<r||isNaN(r))&&(r=o),d>=0?(a=(t.min.z-h.z)*d,l=(t.max.z-h.z)*d):(a=(t.max.z-h.z)*d,l=(t.min.z-h.z)*d),i>l||a>r)||((a>i||i!=i)&&(i=a),(l<r||r!=r)&&(r=l),r<0)?null:this.at(i>=0?i:r,e)}intersectsBox(t){return null!==this.intersectBox(t,js)}intersectTriangle(t,e,i,r,s){n0.subVectors(e,t),_p.subVectors(i,t),r0.crossVectors(n0,_p);let a,o=this.direction.dot(r0);if(o>0){if(r)return null;a=1}else{if(!(o<0))return null;a=-1,o=-o}mo.subVectors(this.origin,t);const l=a*this.direction.dot(_p.crossVectors(mo,_p));if(l<0)return null;const c=a*this.direction.dot(n0.cross(mo));if(c<0||l+c>o)return null;const u=-a*mo.dot(r0);return u<0?null:this.at(u/o,s)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class dt{constructor(){dt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(t,e,i,r,s,o,a,l,c,u,d,h,f,m,p,g){const v=this.elements;return v[0]=t,v[4]=e,v[8]=i,v[12]=r,v[1]=s,v[5]=o,v[9]=a,v[13]=l,v[2]=c,v[6]=u,v[10]=d,v[14]=h,v[3]=f,v[7]=m,v[11]=p,v[15]=g,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new dt).fromArray(this.elements)}copy(t){const e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],e[9]=i[9],e[10]=i[10],e[11]=i[11],e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15],this}copyPosition(t){const e=this.elements,i=t.elements;return e[12]=i[12],e[13]=i[13],e[14]=i[14],this}setFromMatrix3(t){const e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,i){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(t,e,i){return this.set(t.x,e.x,i.x,0,t.y,e.y,i.y,0,t.z,e.z,i.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,i=t.elements,r=1/Yl.setFromMatrixColumn(t,0).length(),s=1/Yl.setFromMatrixColumn(t,1).length(),o=1/Yl.setFromMatrixColumn(t,2).length();return e[0]=i[0]*r,e[1]=i[1]*r,e[2]=i[2]*r,e[3]=0,e[4]=i[4]*s,e[5]=i[5]*s,e[6]=i[6]*s,e[7]=0,e[8]=i[8]*o,e[9]=i[9]*o,e[10]=i[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){const e=this.elements,i=t.x,r=t.y,s=t.z,o=Math.cos(i),a=Math.sin(i),l=Math.cos(r),c=Math.sin(r),u=Math.cos(s),d=Math.sin(s);if("XYZ"===t.order){const h=o*u,f=o*d,m=a*u,p=a*d;e[0]=l*u,e[4]=-l*d,e[8]=c,e[1]=f+m*c,e[5]=h-p*c,e[9]=-a*l,e[2]=p-h*c,e[6]=m+f*c,e[10]=o*l}else if("YXZ"===t.order){const h=l*u,f=l*d,m=c*u,p=c*d;e[0]=h+p*a,e[4]=m*a-f,e[8]=o*c,e[1]=o*d,e[5]=o*u,e[9]=-a,e[2]=f*a-m,e[6]=p+h*a,e[10]=o*l}else if("ZXY"===t.order){const h=l*u,f=l*d,m=c*u,p=c*d;e[0]=h-p*a,e[4]=-o*d,e[8]=m+f*a,e[1]=f+m*a,e[5]=o*u,e[9]=p-h*a,e[2]=-o*c,e[6]=a,e[10]=o*l}else if("ZYX"===t.order){const h=o*u,f=o*d,m=a*u,p=a*d;e[0]=l*u,e[4]=m*c-f,e[8]=h*c+p,e[1]=l*d,e[5]=p*c+h,e[9]=f*c-m,e[2]=-c,e[6]=a*l,e[10]=o*l}else if("YZX"===t.order){const h=o*l,f=o*c,m=a*l,p=a*c;e[0]=l*u,e[4]=p-h*d,e[8]=m*d+f,e[1]=d,e[5]=o*u,e[9]=-a*u,e[2]=-c*u,e[6]=f*d+m,e[10]=h-p*d}else if("XZY"===t.order){const h=o*l,f=o*c,m=a*l,p=a*c;e[0]=l*u,e[4]=-d,e[8]=c*u,e[1]=h*d+p,e[5]=o*u,e[9]=f*d-m,e[2]=m*d-f,e[6]=a*u,e[10]=p*d+h}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(w5,t,D5)}lookAt(t,e,i){const r=this.elements;return ur.subVectors(t,e),0===ur.lengthSq()&&(ur.z=1),ur.normalize(),go.crossVectors(i,ur),0===go.lengthSq()&&(1===Math.abs(i.z)?ur.x+=1e-4:ur.z+=1e-4,ur.normalize(),go.crossVectors(i,ur)),go.normalize(),yp.crossVectors(ur,go),r[0]=go.x,r[4]=yp.x,r[8]=ur.x,r[1]=go.y,r[5]=yp.y,r[9]=ur.y,r[2]=go.z,r[6]=yp.z,r[10]=ur.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const i=t.elements,r=e.elements,s=this.elements,o=i[0],a=i[4],l=i[8],c=i[12],u=i[1],d=i[5],h=i[9],f=i[13],m=i[2],p=i[6],g=i[10],v=i[14],y=i[3],_=i[7],b=i[11],M=i[15],x=r[0],E=r[4],T=r[8],D=r[12],A=r[1],F=r[5],H=r[9],N=r[13],O=r[2],k=r[6],$=r[10],ne=r[14],q=r[3],se=r[7],ee=r[11],V=r[15];return s[0]=o*x+a*A+l*O+c*q,s[4]=o*E+a*F+l*k+c*se,s[8]=o*T+a*H+l*$+c*ee,s[12]=o*D+a*N+l*ne+c*V,s[1]=u*x+d*A+h*O+f*q,s[5]=u*E+d*F+h*k+f*se,s[9]=u*T+d*H+h*$+f*ee,s[13]=u*D+d*N+h*ne+f*V,s[2]=m*x+p*A+g*O+v*q,s[6]=m*E+p*F+g*k+v*se,s[10]=m*T+p*H+g*$+v*ee,s[14]=m*D+p*N+g*ne+v*V,s[3]=y*x+_*A+b*O+M*q,s[7]=y*E+_*F+b*k+M*se,s[11]=y*T+_*H+b*$+M*ee,s[15]=y*D+_*N+b*ne+M*V,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],i=t[4],r=t[8],s=t[12],o=t[1],a=t[5],l=t[9],c=t[13],u=t[2],d=t[6],h=t[10],f=t[14];return t[3]*(+s*l*d-r*c*d-s*a*h+i*c*h+r*a*f-i*l*f)+t[7]*(+e*l*f-e*c*h+s*o*h-r*o*f+r*c*u-s*l*u)+t[11]*(+e*c*d-e*a*f-s*o*d+i*o*f+s*a*u-i*c*u)+t[15]*(-r*a*u-e*l*d+e*a*h+r*o*d-i*o*h+i*l*u)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,i){const r=this.elements;return t.isVector3?(r[12]=t.x,r[13]=t.y,r[14]=t.z):(r[12]=t,r[13]=e,r[14]=i),this}invert(){const t=this.elements,e=t[0],i=t[1],r=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],u=t[8],d=t[9],h=t[10],f=t[11],m=t[12],p=t[13],g=t[14],v=t[15],y=d*g*c-p*h*c+p*l*f-a*g*f-d*l*v+a*h*v,_=m*h*c-u*g*c-m*l*f+o*g*f+u*l*v-o*h*v,b=u*p*c-m*d*c+m*a*f-o*p*f-u*a*v+o*d*v,M=m*d*l-u*p*l-m*a*h+o*p*h+u*a*g-o*d*g,x=e*y+i*_+r*b+s*M;if(0===x)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const E=1/x;return t[0]=y*E,t[1]=(p*h*s-d*g*s-p*r*f+i*g*f+d*r*v-i*h*v)*E,t[2]=(a*g*s-p*l*s+p*r*c-i*g*c-a*r*v+i*l*v)*E,t[3]=(d*l*s-a*h*s-d*r*c+i*h*c+a*r*f-i*l*f)*E,t[4]=_*E,t[5]=(u*g*s-m*h*s+m*r*f-e*g*f-u*r*v+e*h*v)*E,t[6]=(m*l*s-o*g*s-m*r*c+e*g*c+o*r*v-e*l*v)*E,t[7]=(o*h*s-u*l*s+u*r*c-e*h*c-o*r*f+e*l*f)*E,t[8]=b*E,t[9]=(m*d*s-u*p*s-m*i*f+e*p*f+u*i*v-e*d*v)*E,t[10]=(o*p*s-m*a*s+m*i*c-e*p*c-o*i*v+e*a*v)*E,t[11]=(u*a*s-o*d*s-u*i*c+e*d*c+o*i*f-e*a*f)*E,t[12]=M*E,t[13]=(u*p*r-m*d*r+m*i*h-e*p*h-u*i*g+e*d*g)*E,t[14]=(m*a*r-o*p*r-m*i*l+e*p*l+o*i*g-e*a*g)*E,t[15]=(o*d*r-u*a*r+u*i*l-e*d*l-o*i*h+e*a*h)*E,this}scale(t){const e=this.elements,i=t.x,r=t.y,s=t.z;return e[0]*=i,e[4]*=r,e[8]*=s,e[1]*=i,e[5]*=r,e[9]*=s,e[2]*=i,e[6]*=r,e[10]*=s,e[3]*=i,e[7]*=r,e[11]*=s,this}getMaxScaleOnAxis(){const t=this.elements;return Math.sqrt(Math.max(t[0]*t[0]+t[1]*t[1]+t[2]*t[2],t[4]*t[4]+t[5]*t[5]+t[6]*t[6],t[8]*t[8]+t[9]*t[9]+t[10]*t[10]))}makeTranslation(t,e,i){return this.set(1,0,0,t,0,1,0,e,0,0,1,i,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),i=Math.sin(t);return this.set(1,0,0,0,0,e,-i,0,0,i,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),i=Math.sin(t);return this.set(e,0,i,0,0,1,0,0,-i,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),i=Math.sin(t);return this.set(e,-i,0,0,i,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const i=Math.cos(e),r=Math.sin(e),s=1-i,o=t.x,a=t.y,l=t.z,c=s*o,u=s*a;return this.set(c*o+i,c*a-r*l,c*l+r*a,0,c*a+r*l,u*a+i,u*l-r*o,0,c*l-r*a,u*l+r*o,s*l*l+i,0,0,0,0,1),this}makeScale(t,e,i){return this.set(t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1),this}makeShear(t,e,i,r,s,o){return this.set(1,i,s,0,t,1,o,0,e,r,1,0,0,0,0,1),this}compose(t,e,i){const r=this.elements,s=e._x,o=e._y,a=e._z,l=e._w,c=s+s,u=o+o,d=a+a,h=s*c,f=s*u,m=s*d,p=o*u,g=o*d,v=a*d,y=l*c,_=l*u,b=l*d,M=i.x,x=i.y,E=i.z;return r[0]=(1-(p+v))*M,r[1]=(f+b)*M,r[2]=(m-_)*M,r[3]=0,r[4]=(f-b)*x,r[5]=(1-(h+v))*x,r[6]=(g+y)*x,r[7]=0,r[8]=(m+_)*E,r[9]=(g-y)*E,r[10]=(1-(h+p))*E,r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,this}decompose(t,e,i){const r=this.elements;let s=Yl.set(r[0],r[1],r[2]).length();const o=Yl.set(r[4],r[5],r[6]).length(),a=Yl.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),t.x=r[12],t.y=r[13],t.z=r[14],Kr.copy(this);const c=1/s,u=1/o,d=1/a;return Kr.elements[0]*=c,Kr.elements[1]*=c,Kr.elements[2]*=c,Kr.elements[4]*=u,Kr.elements[5]*=u,Kr.elements[6]*=u,Kr.elements[8]*=d,Kr.elements[9]*=d,Kr.elements[10]*=d,e.setFromRotationMatrix(Kr),i.x=s,i.y=o,i.z=a,this}makePerspective(t,e,i,r,s,o){const a=this.elements,c=2*s/(i-r),u=(e+t)/(e-t),d=(i+r)/(i-r),h=-(o+s)/(o-s),f=-2*o*s/(o-s);return a[0]=2*s/(e-t),a[4]=0,a[8]=u,a[12]=0,a[1]=0,a[5]=c,a[9]=d,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=f,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(t,e,i,r,s,o){const a=this.elements,l=1/(e-t),c=1/(i-r),u=1/(o-s),d=(e+t)*l,h=(i+r)*c,f=(o+s)*u;return a[0]=2*l,a[4]=0,a[8]=0,a[12]=-d,a[1]=0,a[5]=2*c,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*u,a[14]=-f,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(t){const e=this.elements,i=t.elements;for(let r=0;r<16;r++)if(e[r]!==i[r])return!1;return!0}fromArray(t,e=0){for(let i=0;i<16;i++)this.elements[i]=t[i+e];return this}toArray(t=[],e=0){const i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t[e+9]=i[9],t[e+10]=i[10],t[e+11]=i[11],t[e+12]=i[12],t[e+13]=i[13],t[e+14]=i[14],t[e+15]=i[15],t}}const Yl=new S,Kr=new dt,w5=new S(0,0,0),D5=new S(1,1,1),go=new S,yp=new S,ur=new S,bE=new dt,TE=new cr;let R5=(()=>{class n{constructor(e=0,i=0,r=0,s=n.DefaultOrder){this.isEuler=!0,this._x=e,this._y=i,this._z=r,this._order=s}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,i,r,s=this._order){return this._x=e,this._y=i,this._z=r,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,i=this._order,r=!0){const s=e.elements,o=s[0],a=s[4],l=s[8],c=s[1],u=s[5],d=s[9],h=s[2],f=s[6],m=s[10];switch(i){case"XYZ":this._y=Math.asin(An(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-d,m),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(f,u),this._z=0);break;case"YXZ":this._x=Math.asin(-An(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(l,m),this._z=Math.atan2(c,u)):(this._y=Math.atan2(-h,o),this._z=0);break;case"ZXY":this._x=Math.asin(An(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-h,m),this._z=Math.atan2(-a,u)):(this._y=0,this._z=Math.atan2(c,o));break;case"ZYX":this._y=Math.asin(-An(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(f,m),this._z=Math.atan2(c,o)):(this._x=0,this._z=Math.atan2(-a,u));break;case"YZX":this._z=Math.asin(An(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-d,u),this._y=Math.atan2(-h,o)):(this._x=0,this._y=Math.atan2(l,m));break;case"XZY":this._z=Math.asin(-An(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(f,u),this._y=Math.atan2(l,o)):(this._x=Math.atan2(-d,m),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+i)}return this._order=i,!0===r&&this._onChangeCallback(),this}setFromQuaternion(e,i,r){return bE.makeRotationFromQuaternion(e),this.setFromRotationMatrix(bE,i,r)}setFromVector3(e,i=this._order){return this.set(e.x,e.y,e.z,i)}reorder(e){return TE.setFromEuler(this),this.setFromQuaternion(TE,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],i=0){return e[i]=this._x,e[i+1]=this._y,e[i+2]=this._z,e[i+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}return n.DefaultOrder="XYZ",n.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],n})();class s0{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return 0!=(this.mask&t.mask)}isEnabled(t){return 0!=(this.mask&(1<<t|0))}}let S5=0;const ME=new S,Jl=new cr,ks=new dt,bp=new S,ad=new S,C5=new S,E5=new cr,xE=new S(1,0,0),wE=new S(0,1,0),DE=new S(0,0,1),A5={type:"added"},RE={type:"removed"};let $i=(()=>{class n extends Vl{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:S5++}),this.uuid=lr(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=n.DefaultUp.clone();const e=new S,i=new R5,r=new cr,s=new S(1,1,1);i._onChange(function o(){r.setFromEuler(i,!1)}),r._onChange(function a(){i.setFromQuaternion(r,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:i},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new dt},normalMatrix:{value:new Wi}}),this.matrix=new dt,this.matrixWorld=new dt,this.matrixAutoUpdate=n.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=n.DefaultMatrixWorldAutoUpdate,this.layers=new s0,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,i){this.quaternion.setFromAxisAngle(e,i)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,i){return Jl.setFromAxisAngle(e,i),this.quaternion.multiply(Jl),this}rotateOnWorldAxis(e,i){return Jl.setFromAxisAngle(e,i),this.quaternion.premultiply(Jl),this}rotateX(e){return this.rotateOnAxis(xE,e)}rotateY(e){return this.rotateOnAxis(wE,e)}rotateZ(e){return this.rotateOnAxis(DE,e)}translateOnAxis(e,i){return ME.copy(e).applyQuaternion(this.quaternion),this.position.add(ME.multiplyScalar(i)),this}translateX(e){return this.translateOnAxis(xE,e)}translateY(e){return this.translateOnAxis(wE,e)}translateZ(e){return this.translateOnAxis(DE,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(ks.copy(this.matrixWorld).invert())}lookAt(e,i,r){e.isVector3?bp.copy(e):bp.set(e,i,r);const s=this.parent;this.updateWorldMatrix(!0,!1),ad.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?ks.lookAt(ad,bp,this.up):ks.lookAt(bp,ad,this.up),this.quaternion.setFromRotationMatrix(ks),s&&(ks.extractRotation(s.matrixWorld),Jl.setFromRotationMatrix(ks),this.quaternion.premultiply(Jl.invert()))}add(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.add(arguments[i]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(A5)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const i=this.children.indexOf(e);return-1!==i&&(e.parent=null,this.children.splice(i,1),e.dispatchEvent(RE)),this}removeFromParent(){const e=this.parent;return null!==e&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const i=this.children[e];i.parent=null,i.dispatchEvent(RE)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),ks.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),ks.multiply(e.parent.matrixWorld)),e.applyMatrix4(ks),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,i){if(this[e]===i)return this;for(let r=0,s=this.children.length;r<s;r++){const a=this.children[r].getObjectByProperty(e,i);if(void 0!==a)return a}}getObjectsByProperty(e,i){let r=[];this[e]===i&&r.push(this);for(let s=0,o=this.children.length;s<o;s++){const a=this.children[s].getObjectsByProperty(e,i);a.length>0&&(r=r.concat(a))}return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(ad,e,C5),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(ad,E5,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const i=this.matrixWorld.elements;return e.set(i[8],i[9],i[10]).normalize()}raycast(){}traverse(e){e(this);const i=this.children;for(let r=0,s=i.length;r<s;r++)i[r].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);const i=this.children;for(let r=0,s=i.length;r<s;r++)i[r].traverseVisible(e)}traverseAncestors(e){const i=this.parent;null!==i&&(e(i),i.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const i=this.children;for(let r=0,s=i.length;r<s;r++){const o=i[r];(!0===o.matrixWorldAutoUpdate||!0===e)&&o.updateMatrixWorld(e)}}updateWorldMatrix(e,i){const r=this.parent;if(!0===e&&null!==r&&!0===r.matrixWorldAutoUpdate&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===i){const s=this.children;for(let o=0,a=s.length;o<a;o++){const l=s[o];!0===l.matrixWorldAutoUpdate&&l.updateWorldMatrix(!1,!0)}}}toJSON(e){const i=void 0===e||"string"==typeof e,r={};i&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const s={};function o(l,c){return void 0===l[c.uuid]&&(l[c.uuid]=c.toJSON(e)),c.uuid}if(s.uuid=this.uuid,s.type=this.type,""!==this.name&&(s.name=this.name),!0===this.castShadow&&(s.castShadow=!0),!0===this.receiveShadow&&(s.receiveShadow=!0),!1===this.visible&&(s.visible=!1),!1===this.frustumCulled&&(s.frustumCulled=!1),0!==this.renderOrder&&(s.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(s.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(s.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=o(e.geometries,this.geometry);const l=this.geometry.parameters;if(void 0!==l&&void 0!==l.shapes){const c=l.shapes;if(Array.isArray(c))for(let u=0,d=c.length;u<d;u++)o(e.shapes,c[u]);else o(e.shapes,c)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(o(e.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const l=[];for(let c=0,u=this.material.length;c<u;c++)l.push(o(e.materials,this.material[c]));s.material=l}else s.material=o(e.materials,this.material);if(this.children.length>0){s.children=[];for(let l=0;l<this.children.length;l++)s.children.push(this.children[l].toJSON(e).object)}if(this.animations.length>0){s.animations=[];for(let l=0;l<this.animations.length;l++)s.animations.push(o(e.animations,this.animations[l]))}if(i){const l=a(e.geometries),c=a(e.materials),u=a(e.textures),d=a(e.images),h=a(e.shapes),f=a(e.skeletons),m=a(e.animations),p=a(e.nodes);l.length>0&&(r.geometries=l),c.length>0&&(r.materials=c),u.length>0&&(r.textures=u),d.length>0&&(r.images=d),h.length>0&&(r.shapes=h),f.length>0&&(r.skeletons=f),m.length>0&&(r.animations=m),p.length>0&&(r.nodes=p)}return r.object=s,r;function a(l){const c=[];for(const u in l){const d=l[u];delete d.metadata,c.push(d)}return c}}clone(e){return(new this.constructor).copy(this,e)}copy(e,i=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===i)for(let r=0;r<e.children.length;r++)this.add(e.children[r].clone());return this}}return n.DefaultUp=new S(0,1,0),n.DefaultMatrixAutoUpdate=!0,n.DefaultMatrixWorldAutoUpdate=!0,n})();const Xr=new S,Gs=new S,o0=new S,Vs=new S,Zl=new S,Ql=new S,SE=new S,a0=new S,l0=new S,c0=new S;class Yr{constructor(t=new S,e=new S,i=new S){this.a=t,this.b=e,this.c=i}static getNormal(t,e,i,r){r.subVectors(i,e),Xr.subVectors(t,e),r.cross(Xr);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(t,e,i,r,s){Xr.subVectors(r,e),Gs.subVectors(i,e),o0.subVectors(t,e);const o=Xr.dot(Xr),a=Xr.dot(Gs),l=Xr.dot(o0),c=Gs.dot(Gs),u=Gs.dot(o0),d=o*c-a*a;if(0===d)return s.set(-2,-1,-1);const h=1/d,f=(c*l-a*u)*h,m=(o*u-a*l)*h;return s.set(1-f-m,m,f)}static containsPoint(t,e,i,r){return this.getBarycoord(t,e,i,r,Vs),Vs.x>=0&&Vs.y>=0&&Vs.x+Vs.y<=1}static getUV(t,e,i,r,s,o,a,l){return this.getBarycoord(t,e,i,r,Vs),l.set(0,0),l.addScaledVector(s,Vs.x),l.addScaledVector(o,Vs.y),l.addScaledVector(a,Vs.z),l}static isFrontFacing(t,e,i,r){return Xr.subVectors(i,e),Gs.subVectors(t,e),Xr.cross(Gs).dot(r)<0}set(t,e,i){return this.a.copy(t),this.b.copy(e),this.c.copy(i),this}setFromPointsAndIndices(t,e,i,r){return this.a.copy(t[e]),this.b.copy(t[i]),this.c.copy(t[r]),this}setFromAttributeAndIndices(t,e,i,r){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,i),this.c.fromBufferAttribute(t,r),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return Xr.subVectors(this.c,this.b),Gs.subVectors(this.a,this.b),.5*Xr.cross(Gs).length()}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return Yr.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return Yr.getBarycoord(t,this.a,this.b,this.c,e)}getUV(t,e,i,r,s){return Yr.getUV(t,this.a,this.b,this.c,e,i,r,s)}containsPoint(t){return Yr.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return Yr.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){const i=this.a,r=this.b,s=this.c;let o,a;Zl.subVectors(r,i),Ql.subVectors(s,i),a0.subVectors(t,i);const l=Zl.dot(a0),c=Ql.dot(a0);if(l<=0&&c<=0)return e.copy(i);l0.subVectors(t,r);const u=Zl.dot(l0),d=Ql.dot(l0);if(u>=0&&d<=u)return e.copy(r);const h=l*d-u*c;if(h<=0&&l>=0&&u<=0)return o=l/(l-u),e.copy(i).addScaledVector(Zl,o);c0.subVectors(t,s);const f=Zl.dot(c0),m=Ql.dot(c0);if(m>=0&&f<=m)return e.copy(s);const p=f*c-l*m;if(p<=0&&c>=0&&m<=0)return a=c/(c-m),e.copy(i).addScaledVector(Ql,a);const g=u*m-f*d;if(g<=0&&d-u>=0&&f-m>=0)return SE.subVectors(s,r),a=(d-u)/(d-u+(f-m)),e.copy(r).addScaledVector(SE,a);const v=1/(g+p+h);return o=p*v,a=h*v,e.copy(i).addScaledVector(Zl,o).addScaledVector(Ql,a)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}let I5=0;class ld extends Vl{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:I5++}),this.uuid=lr(),this.name="",this.type="Material",this.blending=Fl,this.side=zo,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=GC,this.blendDst=VC,this.blendEquation=Ll,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Oy,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(void 0!==t)for(const e in t){const i=t[e];if(void 0===i){console.warn("THREE.Material: '"+e+"' parameter is undefined.");continue}const r=this[e];void 0!==r?r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[e]=i:console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.")}}toJSON(t){const e=void 0===t||"string"==typeof t;e&&(t={textures:{},images:{}});const i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),void 0!==this.roughness&&(i.roughness=this.roughness),void 0!==this.metalness&&(i.metalness=this.metalness),void 0!==this.sheen&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(i.shininess=this.shininess),void 0!==this.clearcoat&&(i.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(i.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(i.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(t).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(t).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(t).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(t).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(t).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(t).uuid,void 0!==this.combine&&(i.combine=this.combine)),void 0!==this.envMapIntensity&&(i.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(i.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.transmission&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(t).uuid),void 0!==this.thickness&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(t).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(i.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(i.size=this.size),null!==this.shadowSide&&(i.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Fl&&(i.blending=this.blending),this.side!==zo&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),!0===this.transparent&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(i.rotation=this.rotation),!0===this.polygonOffset&&(i.polygonOffset=!0),0!==this.polygonOffsetFactor&&(i.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(i.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(i.linewidth=this.linewidth),void 0!==this.dashSize&&(i.dashSize=this.dashSize),void 0!==this.gapSize&&(i.gapSize=this.gapSize),void 0!==this.scale&&(i.scale=this.scale),!0===this.dithering&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(i.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(i.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(i.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(i.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(i.flatShading=this.flatShading),!1===this.visible&&(i.visible=!1),!1===this.toneMapped&&(i.toneMapped=!1),!1===this.fog&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData),e){const s=r(t.textures),o=r(t.images);s.length>0&&(i.textures=s),o.length>0&&(i.images=o)}return i}clone(){return(new this.constructor).copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let i=null;if(null!==e){const r=e.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=e[s].clone()}return this.clippingPlanes=i,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){!0===t&&this.version++}}class fs extends ld{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Ae(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=ep,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}const Gn=new S,Tp=new Q;class ni{constructor(t,e,i=!1){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=i,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this}copyAt(t,e,i){t*=this.itemSize,i*=e.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[t+r]=e.array[i+r];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(2===this.itemSize)for(let e=0,i=this.count;e<i;e++)Tp.fromBufferAttribute(this,e),Tp.applyMatrix3(t),this.setXY(e,Tp.x,Tp.y);else if(3===this.itemSize)for(let e=0,i=this.count;e<i;e++)Gn.fromBufferAttribute(this,e),Gn.applyMatrix3(t),this.setXYZ(e,Gn.x,Gn.y,Gn.z);return this}applyMatrix4(t){for(let e=0,i=this.count;e<i;e++)Gn.fromBufferAttribute(this,e),Gn.applyMatrix4(t),this.setXYZ(e,Gn.x,Gn.y,Gn.z);return this}applyNormalMatrix(t){for(let e=0,i=this.count;e<i;e++)Gn.fromBufferAttribute(this,e),Gn.applyNormalMatrix(t),this.setXYZ(e,Gn.x,Gn.y,Gn.z);return this}transformDirection(t){for(let e=0,i=this.count;e<i;e++)Gn.fromBufferAttribute(this,e),Gn.transformDirection(t),this.setXYZ(e,Gn.x,Gn.y,Gn.z);return this}set(t,e=0){return this.array.set(t,e),this}getX(t){let e=this.array[t*this.itemSize];return this.normalized&&(e=Ls(e,this.array)),e}setX(t,e){return this.normalized&&(e=Zt(e,this.array)),this.array[t*this.itemSize]=e,this}getY(t){let e=this.array[t*this.itemSize+1];return this.normalized&&(e=Ls(e,this.array)),e}setY(t,e){return this.normalized&&(e=Zt(e,this.array)),this.array[t*this.itemSize+1]=e,this}getZ(t){let e=this.array[t*this.itemSize+2];return this.normalized&&(e=Ls(e,this.array)),e}setZ(t,e){return this.normalized&&(e=Zt(e,this.array)),this.array[t*this.itemSize+2]=e,this}getW(t){let e=this.array[t*this.itemSize+3];return this.normalized&&(e=Ls(e,this.array)),e}setW(t,e){return this.normalized&&(e=Zt(e,this.array)),this.array[t*this.itemSize+3]=e,this}setXY(t,e,i){return t*=this.itemSize,this.normalized&&(e=Zt(e,this.array),i=Zt(i,this.array)),this.array[t+0]=e,this.array[t+1]=i,this}setXYZ(t,e,i,r){return t*=this.itemSize,this.normalized&&(e=Zt(e,this.array),i=Zt(i,this.array),r=Zt(r,this.array)),this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=r,this}setXYZW(t,e,i,r,s){return t*=this.itemSize,this.normalized&&(e=Zt(e,this.array),i=Zt(i,this.array),r=Zt(r,this.array),s=Zt(s,this.array)),this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=r,this.array[t+3]=s,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(t.name=this.name),35044!==this.usage&&(t.usage=this.usage),(0!==this.updateRange.offset||-1!==this.updateRange.count)&&(t.updateRange=this.updateRange),t}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class CE extends ni{constructor(t,e,i){super(new Uint16Array(t),e,i)}}class EE extends ni{constructor(t,e,i){super(new Uint32Array(t),e,i)}}class Pe extends ni{constructor(t,e,i){super(new Float32Array(t),e,i)}}let P5=0;const Ir=new dt,u0=new $i,ec=new S,dr=new Wl,cd=new Wl,ii=new S;class yt extends Vl{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:P5++}),this.uuid=lr(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return this.index=Array.isArray(t)?new(mE(t)?EE:CE)(t,1):t,this}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return void 0!==this.attributes[t]}addGroup(t,e,i=0){this.groups.push({start:t,count:e,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){const e=this.attributes.position;void 0!==e&&(e.applyMatrix4(t),e.needsUpdate=!0);const i=this.attributes.normal;if(void 0!==i){const s=(new Wi).getNormalMatrix(t);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(t),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(t){return Ir.makeRotationFromQuaternion(t),this.applyMatrix4(Ir),this}rotateX(t){return Ir.makeRotationX(t),this.applyMatrix4(Ir),this}rotateY(t){return Ir.makeRotationY(t),this.applyMatrix4(Ir),this}rotateZ(t){return Ir.makeRotationZ(t),this.applyMatrix4(Ir),this}translate(t,e,i){return Ir.makeTranslation(t,e,i),this.applyMatrix4(Ir),this}scale(t,e,i){return Ir.makeScale(t,e,i),this.applyMatrix4(Ir),this}lookAt(t){return u0.lookAt(t),u0.updateMatrix(),this.applyMatrix4(u0.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(ec).negate(),this.translate(ec.x,ec.y,ec.z),this}setFromPoints(t){const e=[];for(let i=0,r=t.length;i<r;i++){const s=t[i];e.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new Pe(e,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Wl);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new S(-1/0,-1/0,-1/0),new S(1/0,1/0,1/0));if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(let i=0,r=e.length;i<r;i++)dr.setFromBufferAttribute(e[i]),this.morphTargetsRelative?(ii.addVectors(this.boundingBox.min,dr.min),this.boundingBox.expandByPoint(ii),ii.addVectors(this.boundingBox.max,dr.max),this.boundingBox.expandByPoint(ii)):(this.boundingBox.expandByPoint(dr.min),this.boundingBox.expandByPoint(dr.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Xl);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new S,1/0);if(t){const i=this.boundingSphere.center;if(dr.setFromBufferAttribute(t),e)for(let s=0,o=e.length;s<o;s++)cd.setFromBufferAttribute(e[s]),this.morphTargetsRelative?(ii.addVectors(dr.min,cd.min),dr.expandByPoint(ii),ii.addVectors(dr.max,cd.max),dr.expandByPoint(ii)):(dr.expandByPoint(cd.min),dr.expandByPoint(cd.max));dr.getCenter(i);let r=0;for(let s=0,o=t.count;s<o;s++)ii.fromBufferAttribute(t,s),r=Math.max(r,i.distanceToSquared(ii));if(e)for(let s=0,o=e.length;s<o;s++){const a=e[s],l=this.morphTargetsRelative;for(let c=0,u=a.count;c<u;c++)ii.fromBufferAttribute(a,c),l&&(ec.fromBufferAttribute(t,c),ii.add(ec)),r=Math.max(r,i.distanceToSquared(ii))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,e=this.attributes;if(null===t||void 0===e.position||void 0===e.normal||void 0===e.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const i=t.array,r=e.position.array,s=e.normal.array,o=e.uv.array,a=r.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new ni(new Float32Array(4*a),4));const l=this.getAttribute("tangent").array,c=[],u=[];for(let A=0;A<a;A++)c[A]=new S,u[A]=new S;const d=new S,h=new S,f=new S,m=new Q,p=new Q,g=new Q,v=new S,y=new S;function _(A,F,H){d.fromArray(r,3*A),h.fromArray(r,3*F),f.fromArray(r,3*H),m.fromArray(o,2*A),p.fromArray(o,2*F),g.fromArray(o,2*H),h.sub(d),f.sub(d),p.sub(m),g.sub(m);const N=1/(p.x*g.y-g.x*p.y);isFinite(N)&&(v.copy(h).multiplyScalar(g.y).addScaledVector(f,-p.y).multiplyScalar(N),y.copy(f).multiplyScalar(p.x).addScaledVector(h,-g.x).multiplyScalar(N),c[A].add(v),c[F].add(v),c[H].add(v),u[A].add(y),u[F].add(y),u[H].add(y))}let b=this.groups;0===b.length&&(b=[{start:0,count:i.length}]);for(let A=0,F=b.length;A<F;++A){const H=b[A],N=H.start;for(let k=N,$=N+H.count;k<$;k+=3)_(i[k+0],i[k+1],i[k+2])}const M=new S,x=new S,E=new S,T=new S;function D(A){E.fromArray(s,3*A),T.copy(E);const F=c[A];M.copy(F),M.sub(E.multiplyScalar(E.dot(F))).normalize(),x.crossVectors(T,F);const N=x.dot(u[A])<0?-1:1;l[4*A]=M.x,l[4*A+1]=M.y,l[4*A+2]=M.z,l[4*A+3]=N}for(let A=0,F=b.length;A<F;++A){const H=b[A],N=H.start;for(let k=N,$=N+H.count;k<$;k+=3)D(i[k+0]),D(i[k+1]),D(i[k+2])}}computeVertexNormals(){const t=this.index,e=this.getAttribute("position");if(void 0!==e){let i=this.getAttribute("normal");if(void 0===i)i=new ni(new Float32Array(3*e.count),3),this.setAttribute("normal",i);else for(let h=0,f=i.count;h<f;h++)i.setXYZ(h,0,0,0);const r=new S,s=new S,o=new S,a=new S,l=new S,c=new S,u=new S,d=new S;if(t)for(let h=0,f=t.count;h<f;h+=3){const m=t.getX(h+0),p=t.getX(h+1),g=t.getX(h+2);r.fromBufferAttribute(e,m),s.fromBufferAttribute(e,p),o.fromBufferAttribute(e,g),u.subVectors(o,s),d.subVectors(r,s),u.cross(d),a.fromBufferAttribute(i,m),l.fromBufferAttribute(i,p),c.fromBufferAttribute(i,g),a.add(u),l.add(u),c.add(u),i.setXYZ(m,a.x,a.y,a.z),i.setXYZ(p,l.x,l.y,l.z),i.setXYZ(g,c.x,c.y,c.z)}else for(let h=0,f=e.count;h<f;h+=3)r.fromBufferAttribute(e,h+0),s.fromBufferAttribute(e,h+1),o.fromBufferAttribute(e,h+2),u.subVectors(o,s),d.subVectors(r,s),u.cross(d),i.setXYZ(h+0,u.x,u.y,u.z),i.setXYZ(h+1,u.x,u.y,u.z),i.setXYZ(h+2,u.x,u.y,u.z);this.normalizeNormals(),i.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){const t=this.attributes.normal;for(let e=0,i=t.count;e<i;e++)ii.fromBufferAttribute(t,e),ii.normalize(),t.setXYZ(e,ii.x,ii.y,ii.z)}toNonIndexed(){function t(a,l){const c=a.array,u=a.itemSize,d=a.normalized,h=new c.constructor(l.length*u);let f=0,m=0;for(let p=0,g=l.length;p<g;p++){f=a.isInterleavedBufferAttribute?l[p]*a.data.stride+a.offset:l[p]*u;for(let v=0;v<u;v++)h[m++]=c[f++]}return new ni(h,u,d)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const e=new yt,i=this.index.array,r=this.attributes;for(const a in r){const c=t(r[a],i);e.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let u=0,d=c.length;u<d;u++){const f=t(c[u],i);l.push(f)}e.morphAttributes[a]=l}e.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];e.addGroup(c.start,c.count,c.materialIndex)}return e}toJSON(){const t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){const l=this.parameters;for(const c in l)void 0!==l[c]&&(t[c]=l[c]);return t}t.data={attributes:{}};const e=this.index;null!==e&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const i=this.attributes;for(const l in i)t.data.attributes[l]=i[l].toJSON(t.data);const r={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let d=0,h=c.length;d<h;d++)u.push(c[d].toJSON(t.data));u.length>0&&(r[l]=u,s=!0)}s&&(t.data.morphAttributes=r,t.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(t.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return null!==a&&(t.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),t}clone(){return(new this.constructor).copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const i=t.index;null!==i&&this.setIndex(i.clone(e));const r=t.attributes;for(const c in r)this.setAttribute(c,r[c].clone(e));const s=t.morphAttributes;for(const c in s){const u=[],d=s[c];for(let h=0,f=d.length;h<f;h++)u.push(d[h].clone(e));this.morphAttributes[c]=u}this.morphTargetsRelative=t.morphTargetsRelative;const o=t.groups;for(let c=0,u=o.length;c<u;c++){const d=o[c];this.addGroup(d.start,d.count,d.materialIndex)}const a=t.boundingBox;null!==a&&(this.boundingBox=a.clone());const l=t.boundingSphere;return null!==l&&(this.boundingSphere=l.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,void 0!==t.parameters&&(this.parameters=Object.assign({},t.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const AE=new dt,tc=new vp,d0=new Xl,ud=new S,dd=new S,hd=new S,h0=new S,Mp=new S,xp=new Q,wp=new Q,Dp=new Q,f0=new S,Rp=new S;class Ii extends $i{constructor(t=new yt,e=new fs){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=t.material,this.geometry=t.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,i=Object.keys(e);if(i.length>0){const r=e[i[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(t,e){const i=this.geometry,s=i.morphAttributes.position,o=i.morphTargetsRelative;e.fromBufferAttribute(i.attributes.position,t);const a=this.morphTargetInfluences;if(s&&a){Mp.set(0,0,0);for(let l=0,c=s.length;l<c;l++){const u=a[l];0!==u&&(h0.fromBufferAttribute(s[l],t),Mp.addScaledVector(o?h0:h0.sub(e),u))}e.add(Mp)}return this.isSkinnedMesh&&this.boneTransform(t,e),e}raycast(t,e){const i=this.geometry,r=this.material,s=this.matrixWorld;if(void 0===r||(null===i.boundingSphere&&i.computeBoundingSphere(),d0.copy(i.boundingSphere),d0.applyMatrix4(s),!1===t.ray.intersectsSphere(d0))||(AE.copy(s).invert(),tc.copy(t.ray).applyMatrix4(AE),null!==i.boundingBox&&!1===tc.intersectsBox(i.boundingBox)))return;let o;const a=i.index,l=i.attributes.position,c=i.attributes.uv,u=i.attributes.uv2,d=i.groups,h=i.drawRange;if(null!==a)if(Array.isArray(r))for(let f=0,m=d.length;f<m;f++){const p=d[f],g=r[p.materialIndex];for(let _=Math.max(p.start,h.start),b=Math.min(a.count,Math.min(p.start+p.count,h.start+h.count));_<b;_+=3){const M=a.getX(_),x=a.getX(_+1),E=a.getX(_+2);o=Sp(this,g,t,tc,c,u,M,x,E),o&&(o.faceIndex=Math.floor(_/3),o.face.materialIndex=p.materialIndex,e.push(o))}}else for(let p=Math.max(0,h.start),g=Math.min(a.count,h.start+h.count);p<g;p+=3){const v=a.getX(p),y=a.getX(p+1),_=a.getX(p+2);o=Sp(this,r,t,tc,c,u,v,y,_),o&&(o.faceIndex=Math.floor(p/3),e.push(o))}else if(void 0!==l)if(Array.isArray(r))for(let f=0,m=d.length;f<m;f++){const p=d[f],g=r[p.materialIndex];for(let _=Math.max(p.start,h.start),b=Math.min(l.count,Math.min(p.start+p.count,h.start+h.count));_<b;_+=3)o=Sp(this,g,t,tc,c,u,_,_+1,_+2),o&&(o.faceIndex=Math.floor(_/3),o.face.materialIndex=p.materialIndex,e.push(o))}else for(let p=Math.max(0,h.start),g=Math.min(l.count,h.start+h.count);p<g;p+=3)o=Sp(this,r,t,tc,c,u,p,p+1,p+2),o&&(o.faceIndex=Math.floor(p/3),e.push(o))}}function Sp(n,t,e,i,r,s,o,a,l){n.getVertexPosition(o,ud),n.getVertexPosition(a,dd),n.getVertexPosition(l,hd);const c=function O5(n,t,e,i,r,s,o,a){let l;if(l=t.side===Er?i.intersectTriangle(o,s,r,!0,a):i.intersectTriangle(r,s,o,t.side===zo,a),null===l)return null;Rp.copy(a),Rp.applyMatrix4(n.matrixWorld);const c=e.ray.origin.distanceTo(Rp);return c<e.near||c>e.far?null:{distance:c,point:Rp.clone(),object:n}}(n,t,e,i,ud,dd,hd,f0);if(c){r&&(xp.fromBufferAttribute(r,o),wp.fromBufferAttribute(r,a),Dp.fromBufferAttribute(r,l),c.uv=Yr.getUV(f0,ud,dd,hd,xp,wp,Dp,new Q)),s&&(xp.fromBufferAttribute(s,o),wp.fromBufferAttribute(s,a),Dp.fromBufferAttribute(s,l),c.uv2=Yr.getUV(f0,ud,dd,hd,xp,wp,Dp,new Q));const u={a:o,b:a,c:l,normal:new S,materialIndex:0};Yr.getNormal(ud,dd,hd,u.normal),c.face=u}return c}class nc extends yt{constructor(t=1,e=1,i=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],u=[],d=[];let h=0,f=0;function m(p,g,v,y,_,b,M,x,E,T,D){const A=b/E,F=M/T,H=b/2,N=M/2,O=x/2,k=E+1,$=T+1;let ne=0,q=0;const se=new S;for(let ee=0;ee<$;ee++){const V=ee*F-N;for(let G=0;G<k;G++)se[p]=(G*A-H)*y,se[g]=V*_,se[v]=O,c.push(se.x,se.y,se.z),se[p]=0,se[g]=0,se[v]=x>0?1:-1,u.push(se.x,se.y,se.z),d.push(G/E),d.push(1-ee/T),ne+=1}for(let ee=0;ee<T;ee++)for(let V=0;V<E;V++){const me=h+V+k*(ee+1),ce=h+(V+1)+k*(ee+1),_e=h+(V+1)+k*ee;l.push(h+V+k*ee,me,_e),l.push(me,ce,_e),q+=6}a.addGroup(f,q,D),f+=q,h+=ne}m("z","y","x",-1,-1,i,e,t,o,s,0),m("z","y","x",1,-1,i,e,-t,o,s,1),m("x","z","y",1,1,t,i,e,r,o,2),m("x","z","y",1,-1,t,i,-e,r,o,3),m("x","y","z",1,-1,t,e,i,r,s,4),m("x","y","z",-1,-1,t,e,-i,r,s,5),this.setIndex(l),this.setAttribute("position",new Pe(c,3)),this.setAttribute("normal",new Pe(u,3)),this.setAttribute("uv",new Pe(d,2))}static fromJSON(t){return new nc(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function ic(n){const t={};for(const e in n){t[e]={};for(const i in n[e]){const r=n[e][i];t[e][i]=r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.clone():Array.isArray(r)?r.slice():r}}return t}function Pi(n){const t={};for(let e=0;e<n.length;e++){const i=ic(n[e]);for(const r in i)t[r]=i[r]}return t}function IE(n){return null===n.getRenderTarget()&&n.outputEncoding===ln?hs:td}const F5={clone:ic,merge:Pi};class _o extends ld{constructor(t){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==t&&this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=ic(t.uniforms),this.uniformsGroups=function N5(n){const t=[];for(let e=0;e<n.length;e++)t.push(n[e].clone());return t}(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const e=super.toJSON(t);e.glslVersion=this.glslVersion,e.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;e.uniforms[r]=o&&o.isTexture?{type:"t",value:o.toJSON(t).uuid}:o&&o.isColor?{type:"c",value:o.getHex()}:o&&o.isVector2?{type:"v2",value:o.toArray()}:o&&o.isVector3?{type:"v3",value:o.toArray()}:o&&o.isVector4?{type:"v4",value:o.toArray()}:o&&o.isMatrix3?{type:"m3",value:o.toArray()}:o&&o.isMatrix4?{type:"m4",value:o.toArray()}:{value:o}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader;const i={};for(const r in this.extensions)!0===this.extensions[r]&&(i[r]=!0);return Object.keys(i).length>0&&(e.extensions=i),e}}class Cp extends $i{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new dt,this.projectionMatrix=new dt,this.projectionMatrixInverse=new dt}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class di extends Cp{constructor(t=50,e=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const e=.5*this.getFilmHeight()/t;this.fov=2*nd*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(.5*Qo*this.fov);return.5*this.getFilmHeight()/t}getEffectiveFOV(){return 2*nd*Math.atan(Math.tan(.5*Qo*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(t,e,i,r,s,o){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let e=t*Math.tan(.5*Qo*this.fov)/this.zoom,i=2*e,r=this.aspect*i,s=-.5*r;const o=this.view;if(null!==this.view&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*r/l,e-=o.offsetY*i/c,r*=o.width/l,i*=o.height/c}const a=this.filmOffset;0!==a&&(s+=t*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,e,e-i,t,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}class j5 extends $i{constructor(t,e,i){super(),this.type="CubeCamera",this.renderTarget=i;const r=new di(-90,1,t,e);r.layers=this.layers,r.up.set(0,1,0),r.lookAt(1,0,0),this.add(r);const s=new di(-90,1,t,e);s.layers=this.layers,s.up.set(0,1,0),s.lookAt(-1,0,0),this.add(s);const o=new di(-90,1,t,e);o.layers=this.layers,o.up.set(0,0,-1),o.lookAt(0,1,0),this.add(o);const a=new di(-90,1,t,e);a.layers=this.layers,a.up.set(0,0,1),a.lookAt(0,-1,0),this.add(a);const l=new di(-90,1,t,e);l.layers=this.layers,l.up.set(0,1,0),l.lookAt(0,0,1),this.add(l);const c=new di(-90,1,t,e);c.layers=this.layers,c.up.set(0,1,0),c.lookAt(0,0,-1),this.add(c)}update(t,e){null===this.parent&&this.updateMatrixWorld();const i=this.renderTarget,[r,s,o,a,l,c]=this.children,u=t.getRenderTarget(),d=t.toneMapping,h=t.xr.enabled;t.toneMapping=Fs,t.xr.enabled=!1;const f=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,t.setRenderTarget(i,0),t.render(e,r),t.setRenderTarget(i,1),t.render(e,s),t.setRenderTarget(i,2),t.render(e,o),t.setRenderTarget(i,3),t.render(e,a),t.setRenderTarget(i,4),t.render(e,l),i.texture.generateMipmaps=f,t.setRenderTarget(i,5),t.render(e,c),t.setRenderTarget(u),t.toneMapping=d,t.xr.enabled=h,i.texture.needsPMREMUpdate=!0}}class Ep extends ho{constructor(t,e,i,r,s,o,a,l,c,u){super(t=void 0!==t?t:[],e=void 0!==e?e:Wo,i,r,s,o,a,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}class k5 extends ta{constructor(t=1,e={}){super(t,t,e),this.isWebGLCubeRenderTarget=!0;const i={width:t,height:t,depth:1};this.texture=new Ep([i,i,i,i,i,i],e.mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==e.generateMipmaps&&e.generateMipmaps,this.texture.minFilter=void 0!==e.minFilter?e.minFilter:kn}fromEquirectangularTexture(t,e){this.texture.type=e.type,this.texture.encoding=e.encoding,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;const i_uniforms={tEquirect:{value:null}},i_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",i_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",r=new nc(5,5,5),s=new _o({name:"CubemapFromEquirect",uniforms:ic(i_uniforms),vertexShader:i_vertexShader,fragmentShader:i_fragmentShader,side:Er,blending:co});s.uniforms.tEquirect.value=e;const o=new Ii(r,s),a=e.minFilter;return e.minFilter===qo&&(e.minFilter=kn),new j5(1,10,this).update(t,o),e.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(t,e,i,r){const s=t.getRenderTarget();for(let o=0;o<6;o++)t.setRenderTarget(this,o),t.clear(e,i,r);t.setRenderTarget(s)}}const p0=new S,G5=new S,V5=new Wi;class sa{constructor(t=new S(1,0,0),e=0){this.isPlane=!0,this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,i,r){return this.normal.set(t,e,i),this.constant=r,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,i){const r=p0.subVectors(i,e).cross(G5.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(r,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)}intersectLine(t,e){const i=t.delta(p0),r=this.normal.dot(i);if(0===r)return 0===this.distanceToPoint(t.start)?e.copy(t.start):null;const s=-(t.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:e.copy(i).multiplyScalar(s).add(t.start)}intersectsLine(t){const e=this.distanceToPoint(t.start),i=this.distanceToPoint(t.end);return e<0&&i>0||i<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){const i=e||V5.getNormalMatrix(t),r=this.coplanarPoint(p0).applyMatrix4(t),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const oc=new Xl,Ap=new S;class m0{constructor(t=new sa,e=new sa,i=new sa,r=new sa,s=new sa,o=new sa){this.planes=[t,e,i,r,s,o]}set(t,e,i,r,s,o){const a=this.planes;return a[0].copy(t),a[1].copy(e),a[2].copy(i),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(t){const e=this.planes;for(let i=0;i<6;i++)e[i].copy(t.planes[i]);return this}setFromProjectionMatrix(t){const e=this.planes,i=t.elements,r=i[0],s=i[1],o=i[2],a=i[3],l=i[4],c=i[5],u=i[6],d=i[7],h=i[8],f=i[9],m=i[10],p=i[11],g=i[12],v=i[13],y=i[14],_=i[15];return e[0].setComponents(a-r,d-l,p-h,_-g).normalize(),e[1].setComponents(a+r,d+l,p+h,_+g).normalize(),e[2].setComponents(a+s,d+c,p+f,_+v).normalize(),e[3].setComponents(a-s,d-c,p-f,_-v).normalize(),e[4].setComponents(a-o,d-u,p-m,_-y).normalize(),e[5].setComponents(a+o,d+u,p+m,_+y).normalize(),this}intersectsObject(t){const e=t.geometry;return null===e.boundingSphere&&e.computeBoundingSphere(),oc.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(oc)}intersectsSprite(t){return oc.center.set(0,0,0),oc.radius=.7071067811865476,oc.applyMatrix4(t.matrixWorld),this.intersectsSphere(oc)}intersectsSphere(t){const e=this.planes,i=t.center,r=-t.radius;for(let s=0;s<6;s++)if(e[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(t){const e=this.planes;for(let i=0;i<6;i++){const r=e[i];if(Ap.x=r.normal.x>0?t.max.x:t.min.x,Ap.y=r.normal.y>0?t.max.y:t.min.y,Ap.z=r.normal.z>0?t.max.z:t.min.z,r.distanceToPoint(Ap)<0)return!1}return!0}containsPoint(t){const e=this.planes;for(let i=0;i<6;i++)if(e[i].distanceToPoint(t)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function PE(){let n=null,t=!1,e=null,i=null;function r(s,o){e(s,o),i=n.requestAnimationFrame(r)}return{start:function(){!0!==t&&null!==e&&(i=n.requestAnimationFrame(r),t=!0)},stop:function(){n.cancelAnimationFrame(i),t=!1},setAnimationLoop:function(s){e=s},setContext:function(s){n=s}}}function U5(n,t){const e=t.isWebGL2,i=new WeakMap;return{get:function o(c){return c.isInterleavedBufferAttribute&&(c=c.data),i.get(c)},remove:function a(c){c.isInterleavedBufferAttribute&&(c=c.data);const u=i.get(c);u&&(n.deleteBuffer(u.buffer),i.delete(c))},update:function l(c,u){if(c.isGLBufferAttribute){const h=i.get(c);return void((!h||h.version<c.version)&&i.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version}))}c.isInterleavedBufferAttribute&&(c=c.data);const d=i.get(c);void 0===d?i.set(c,function r(c,u){const d=c.array,h=c.usage,f=n.createBuffer();let m;if(n.bindBuffer(u,f),n.bufferData(u,d,h),c.onUploadCallback(),d instanceof Float32Array)m=5126;else if(d instanceof Uint16Array)if(c.isFloat16BufferAttribute){if(!e)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");m=5131}else m=5123;else if(d instanceof Int16Array)m=5122;else if(d instanceof Uint32Array)m=5125;else if(d instanceof Int32Array)m=5124;else if(d instanceof Int8Array)m=5120;else if(d instanceof Uint8Array)m=5121;else{if(!(d instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+d);m=5121}return{buffer:f,type:m,bytesPerElement:d.BYTES_PER_ELEMENT,version:c.version}}(c,u)):d.version<c.version&&(function s(c,u,d){const h=u.array,f=u.updateRange;n.bindBuffer(d,c),-1===f.count?n.bufferSubData(d,0,h):(e?n.bufferSubData(d,f.offset*h.BYTES_PER_ELEMENT,h,f.offset,f.count):n.bufferSubData(d,f.offset*h.BYTES_PER_ELEMENT,h.subarray(f.offset,f.offset+f.count)),f.count=-1),u.onUploadCallback()}(d.buffer,c,u),d.version=c.version)}}}class Ip extends yt{constructor(t=1,e=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:i,heightSegments:r};const s=t/2,o=e/2,a=Math.floor(i),l=Math.floor(r),c=a+1,u=l+1,d=t/a,h=e/l,f=[],m=[],p=[],g=[];for(let v=0;v<u;v++){const y=v*h-o;for(let _=0;_<c;_++)m.push(_*d-s,-y,0),p.push(0,0,1),g.push(_/a),g.push(1-v/l)}for(let v=0;v<l;v++)for(let y=0;y<a;y++){const b=y+c*(v+1),M=y+1+c*(v+1),x=y+1+c*v;f.push(y+c*v,b,x),f.push(b,M,x)}this.setIndex(f),this.setAttribute("position",new Pe(m,3)),this.setAttribute("normal",new Pe(p,3)),this.setAttribute("uv",new Pe(g,2))}static fromJSON(t){return new Ip(t.width,t.height,t.widthSegments,t.heightSegments)}}const mt={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\n#ifdef USE_IRIDESCENCE\n\tvec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\t return vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat R21 = R12;\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );\n\t#else\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if defined( USE_SHADOWMAP ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_COORDS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef texture2DLodEXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},be={common:{diffuse:{value:new Ae(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Wi},uv2Transform:{value:new Wi},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Q(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ae(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Ae(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Wi}},sprite:{diffuse:{value:new Ae(16777215)},opacity:{value:1},center:{value:new Q(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Wi}}},ps={basic:{uniforms:Pi([be.common,be.specularmap,be.envmap,be.aomap,be.lightmap,be.fog]),vertexShader:mt.meshbasic_vert,fragmentShader:mt.meshbasic_frag},lambert:{uniforms:Pi([be.common,be.specularmap,be.envmap,be.aomap,be.lightmap,be.emissivemap,be.bumpmap,be.normalmap,be.displacementmap,be.fog,be.lights,{emissive:{value:new Ae(0)}}]),vertexShader:mt.meshlambert_vert,fragmentShader:mt.meshlambert_frag},phong:{uniforms:Pi([be.common,be.specularmap,be.envmap,be.aomap,be.lightmap,be.emissivemap,be.bumpmap,be.normalmap,be.displacementmap,be.fog,be.lights,{emissive:{value:new Ae(0)},specular:{value:new Ae(1118481)},shininess:{value:30}}]),vertexShader:mt.meshphong_vert,fragmentShader:mt.meshphong_frag},standard:{uniforms:Pi([be.common,be.envmap,be.aomap,be.lightmap,be.emissivemap,be.bumpmap,be.normalmap,be.displacementmap,be.roughnessmap,be.metalnessmap,be.fog,be.lights,{emissive:{value:new Ae(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:mt.meshphysical_vert,fragmentShader:mt.meshphysical_frag},toon:{uniforms:Pi([be.common,be.aomap,be.lightmap,be.emissivemap,be.bumpmap,be.normalmap,be.displacementmap,be.gradientmap,be.fog,be.lights,{emissive:{value:new Ae(0)}}]),vertexShader:mt.meshtoon_vert,fragmentShader:mt.meshtoon_frag},matcap:{uniforms:Pi([be.common,be.bumpmap,be.normalmap,be.displacementmap,be.fog,{matcap:{value:null}}]),vertexShader:mt.meshmatcap_vert,fragmentShader:mt.meshmatcap_frag},points:{uniforms:Pi([be.points,be.fog]),vertexShader:mt.points_vert,fragmentShader:mt.points_frag},dashed:{uniforms:Pi([be.common,be.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:mt.linedashed_vert,fragmentShader:mt.linedashed_frag},depth:{uniforms:Pi([be.common,be.displacementmap]),vertexShader:mt.depth_vert,fragmentShader:mt.depth_frag},normal:{uniforms:Pi([be.common,be.bumpmap,be.normalmap,be.displacementmap,{opacity:{value:1}}]),vertexShader:mt.meshnormal_vert,fragmentShader:mt.meshnormal_frag},sprite:{uniforms:Pi([be.sprite,be.fog]),vertexShader:mt.sprite_vert,fragmentShader:mt.sprite_frag},background:{uniforms:{uvTransform:{value:new Wi},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:mt.background_vert,fragmentShader:mt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:mt.backgroundCube_vert,fragmentShader:mt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:mt.cube_vert,fragmentShader:mt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:mt.equirect_vert,fragmentShader:mt.equirect_frag},distanceRGBA:{uniforms:Pi([be.common,be.displacementmap,{referencePosition:{value:new S},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:mt.distanceRGBA_vert,fragmentShader:mt.distanceRGBA_frag},shadow:{uniforms:Pi([be.lights,be.fog,{color:{value:new Ae(0)},opacity:{value:1}}]),vertexShader:mt.shadow_vert,fragmentShader:mt.shadow_frag}};ps.physical={uniforms:Pi([ps.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Q(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new Ae(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Q},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Ae(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new Ae(1,1,1)},specularColorMap:{value:null}}]),vertexShader:mt.meshphysical_vert,fragmentShader:mt.meshphysical_frag};const Pp={r:0,b:0,g:0};function V$(n,t,e,i,r,s,o){const a=new Ae(0);let c,u,l=!0===s?0:1,d=null,h=0,f=null;function p(g,v){g.getRGB(Pp,IE(n)),i.buffers.color.setClear(Pp.r,Pp.g,Pp.b,v,o)}return{getClearColor:function(){return a},setClearColor:function(g,v=1){a.set(g),l=v,p(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(g){l=g,p(a,l)},render:function m(g,v){let y=!1,_=!0===v.isScene?v.background:null;_&&_.isTexture&&(_=(v.backgroundBlurriness>0?e:t).get(_));const b=n.xr,M=b.getSession&&b.getSession();M&&"additive"===M.environmentBlendMode&&(_=null),null===_?p(a,l):_&&_.isColor&&(p(_,1),y=!0),(n.autoClear||y)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),_&&(_.isCubeTexture||_.mapping===Qu)?(void 0===u&&(u=new Ii(new nc(1,1,1),new _o({name:"BackgroundCubeMaterial",uniforms:ic(ps.backgroundCube.uniforms),vertexShader:ps.backgroundCube.vertexShader,fragmentShader:ps.backgroundCube.fragmentShader,side:Er,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(x,E,T){this.matrixWorld.copyPosition(T.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(u)),u.material.uniforms.envMap.value=_,u.material.uniforms.flipEnvMap.value=_.isCubeTexture&&!1===_.isRenderTargetTexture?-1:1,u.material.uniforms.backgroundBlurriness.value=v.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=v.backgroundIntensity,u.material.toneMapped=_.encoding!==ln,(d!==_||h!==_.version||f!==n.toneMapping)&&(u.material.needsUpdate=!0,d=_,h=_.version,f=n.toneMapping),u.layers.enableAll(),g.unshift(u,u.geometry,u.material,0,0,null)):_&&_.isTexture&&(void 0===c&&(c=new Ii(new Ip(2,2),new _o({name:"BackgroundMaterial",uniforms:ic(ps.background.uniforms),vertexShader:ps.background.vertexShader,fragmentShader:ps.background.fragmentShader,side:zo,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(c)),c.material.uniforms.t2D.value=_,c.material.uniforms.backgroundIntensity.value=v.backgroundIntensity,c.material.toneMapped=_.encoding!==ln,!0===_.matrixAutoUpdate&&_.updateMatrix(),c.material.uniforms.uvTransform.value.copy(_.matrix),(d!==_||h!==_.version||f!==n.toneMapping)&&(c.material.needsUpdate=!0,d=_,h=_.version,f=n.toneMapping),c.layers.enableAll(),g.unshift(c,c.geometry,c.material,0,0,null))}}}function U$(n,t,e,i){const r=n.getParameter(34921),s=i.isWebGL2?null:t.get("OES_vertex_array_object"),o=i.isWebGL2||null!==s,a={},l=g(null);let c=l,u=!1;function f(O){return i.isWebGL2?n.bindVertexArray(O):s.bindVertexArrayOES(O)}function m(O){return i.isWebGL2?n.deleteVertexArray(O):s.deleteVertexArrayOES(O)}function g(O){const k=[],$=[],ne=[];for(let q=0;q<r;q++)k[q]=0,$[q]=0,ne[q]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:k,enabledAttributes:$,attributeDivisors:ne,object:O,attributes:{},index:null}}function _(){const O=c.newAttributes;for(let k=0,$=O.length;k<$;k++)O[k]=0}function b(O){M(O,0)}function M(O,k){const ne=c.enabledAttributes,q=c.attributeDivisors;c.newAttributes[O]=1,0===ne[O]&&(n.enableVertexAttribArray(O),ne[O]=1),q[O]!==k&&((i.isWebGL2?n:t.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](O,k),q[O]=k)}function x(){const O=c.newAttributes,k=c.enabledAttributes;for(let $=0,ne=k.length;$<ne;$++)k[$]!==O[$]&&(n.disableVertexAttribArray($),k[$]=0)}function E(O,k,$,ne,q,se){!0!==i.isWebGL2||5124!==$&&5125!==$?n.vertexAttribPointer(O,k,$,ne,q,se):n.vertexAttribIPointer(O,k,$,q,se)}function H(){N(),u=!0,c!==l&&(c=l,f(c.object))}function N(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function d(O,k,$,ne,q){let se=!1;if(o){const ee=function p(O,k,$){const ne=!0===$.wireframe;let q=a[O.id];void 0===q&&(q={},a[O.id]=q);let se=q[k.id];void 0===se&&(se={},q[k.id]=se);let ee=se[ne];return void 0===ee&&(ee=g(function h(){return i.isWebGL2?n.createVertexArray():s.createVertexArrayOES()}()),se[ne]=ee),ee}(ne,$,k);c!==ee&&(c=ee,f(c.object)),se=function v(O,k,$,ne){const q=c.attributes,se=k.attributes;let ee=0;const V=$.getAttributes();for(const G in V)if(V[G].location>=0){const ce=q[G];let _e=se[G];if(void 0===_e&&("instanceMatrix"===G&&O.instanceMatrix&&(_e=O.instanceMatrix),"instanceColor"===G&&O.instanceColor&&(_e=O.instanceColor)),void 0===ce||ce.attribute!==_e||_e&&ce.data!==_e.data)return!0;ee++}return c.attributesNum!==ee||c.index!==ne}(O,ne,$,q),se&&function y(O,k,$,ne){const q={},se=k.attributes;let ee=0;const V=$.getAttributes();for(const G in V)if(V[G].location>=0){let ce=se[G];void 0===ce&&("instanceMatrix"===G&&O.instanceMatrix&&(ce=O.instanceMatrix),"instanceColor"===G&&O.instanceColor&&(ce=O.instanceColor));const _e={};_e.attribute=ce,ce&&ce.data&&(_e.data=ce.data),q[G]=_e,ee++}c.attributes=q,c.attributesNum=ee,c.index=ne}(O,ne,$,q)}else{const ee=!0===k.wireframe;(c.geometry!==ne.id||c.program!==$.id||c.wireframe!==ee)&&(c.geometry=ne.id,c.program=$.id,c.wireframe=ee,se=!0)}null!==q&&e.update(q,34963),(se||u)&&(u=!1,function T(O,k,$,ne){if(!1===i.isWebGL2&&(O.isInstancedMesh||ne.isInstancedBufferGeometry)&&null===t.get("ANGLE_instanced_arrays"))return;_();const q=ne.attributes,se=$.getAttributes(),ee=k.defaultAttributeValues;for(const V in se){const G=se[V];if(G.location>=0){let me=q[V];if(void 0===me&&("instanceMatrix"===V&&O.instanceMatrix&&(me=O.instanceMatrix),"instanceColor"===V&&O.instanceColor&&(me=O.instanceColor)),void 0!==me){const ce=me.normalized,_e=me.itemSize,U=e.get(me);if(void 0===U)continue;const qe=U.buffer,De=U.type,Ke=U.bytesPerElement;if(me.isInterleavedBufferAttribute){const we=me.data,lt=we.stride,J=me.offset;if(we.isInstancedInterleavedBuffer){for(let X=0;X<G.locationSize;X++)M(G.location+X,we.meshPerAttribute);!0!==O.isInstancedMesh&&void 0===ne._maxInstanceCount&&(ne._maxInstanceCount=we.meshPerAttribute*we.count)}else for(let X=0;X<G.locationSize;X++)b(G.location+X);n.bindBuffer(34962,qe);for(let X=0;X<G.locationSize;X++)E(G.location+X,_e/G.locationSize,De,ce,lt*Ke,(J+_e/G.locationSize*X)*Ke)}else{if(me.isInstancedBufferAttribute){for(let we=0;we<G.locationSize;we++)M(G.location+we,me.meshPerAttribute);!0!==O.isInstancedMesh&&void 0===ne._maxInstanceCount&&(ne._maxInstanceCount=me.meshPerAttribute*me.count)}else for(let we=0;we<G.locationSize;we++)b(G.location+we);n.bindBuffer(34962,qe);for(let we=0;we<G.locationSize;we++)E(G.location+we,_e/G.locationSize,De,ce,_e*Ke,_e/G.locationSize*we*Ke)}}else if(void 0!==ee){const ce=ee[V];if(void 0!==ce)switch(ce.length){case 2:n.vertexAttrib2fv(G.location,ce);break;case 3:n.vertexAttrib3fv(G.location,ce);break;case 4:n.vertexAttrib4fv(G.location,ce);break;default:n.vertexAttrib1fv(G.location,ce)}}}}x()}(O,k,$,ne),null!==q&&n.bindBuffer(34963,e.get(q).buffer))},reset:H,resetDefaultState:N,dispose:function D(){H();for(const O in a){const k=a[O];for(const $ in k){const ne=k[$];for(const q in ne)m(ne[q].object),delete ne[q];delete k[$]}delete a[O]}},releaseStatesOfGeometry:function A(O){if(void 0===a[O.id])return;const k=a[O.id];for(const $ in k){const ne=k[$];for(const q in ne)m(ne[q].object),delete ne[q];delete k[$]}delete a[O.id]},releaseStatesOfProgram:function F(O){for(const k in a){const $=a[k];if(void 0===$[O.id])continue;const ne=$[O.id];for(const q in ne)m(ne[q].object),delete ne[q];delete $[O.id]}},initAttributes:_,enableAttribute:b,disableUnusedAttributes:x}}function H$(n,t,e,i){const r=i.isWebGL2;let s;this.setMode=function o(c){s=c},this.render=function a(c,u){n.drawArrays(s,c,u),e.update(u,s,1)},this.renderInstances=function l(c,u,d){if(0===d)return;let h,f;if(r)h=n,f="drawArraysInstanced";else if(h=t.get("ANGLE_instanced_arrays"),f="drawArraysInstancedANGLE",null===h)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");h[f](s,c,u,d),e.update(u,s,d)}}function z$(n,t,e){let i;function s(E){if("highp"===E){if(n.getShaderPrecisionFormat(35633,36338).precision>0&&n.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";E="mediump"}return"mediump"===E&&n.getShaderPrecisionFormat(35633,36337).precision>0&&n.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&n instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&n instanceof WebGL2ComputeRenderingContext;let a=void 0!==e.precision?e.precision:"highp";const l=s(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const c=o||t.has("WEBGL_draw_buffers"),u=!0===e.logarithmicDepthBuffer,d=n.getParameter(34930),h=n.getParameter(35660),f=n.getParameter(3379),m=n.getParameter(34076),p=n.getParameter(34921),g=n.getParameter(36347),v=n.getParameter(36348),y=n.getParameter(36349),_=h>0,b=o||t.has("OES_texture_float");return{isWebGL2:o,drawBuffers:c,getMaxAnisotropy:function r(){if(void 0!==i)return i;if(!0===t.has("EXT_texture_filter_anisotropic")){const E=t.get("EXT_texture_filter_anisotropic");i=n.getParameter(E.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i},getMaxPrecision:s,precision:a,logarithmicDepthBuffer:u,maxTextures:d,maxVertexTextures:h,maxTextureSize:f,maxCubemapSize:m,maxAttributes:p,maxVertexUniforms:g,maxVaryings:v,maxFragmentUniforms:y,vertexTextures:_,floatFragmentTextures:b,floatVertexTextures:_&&b,maxSamples:o?n.getParameter(36183):0}}function W$(n){const t=this;let e=null,i=0,r=!1,s=!1;const o=new sa,a=new Wi,l={value:null,needsUpdate:!1};function c(){l.value!==e&&(l.value=e,l.needsUpdate=i>0),t.numPlanes=i,t.numIntersection=0}function u(d,h,f,m){const p=null!==d?d.length:0;let g=null;if(0!==p){if(g=l.value,!0!==m||null===g){const v=f+4*p,y=h.matrixWorldInverse;a.getNormalMatrix(y),(null===g||g.length<v)&&(g=new Float32Array(v));for(let _=0,b=f;_!==p;++_,b+=4)o.copy(d[_]).applyMatrix4(y,a),o.normal.toArray(g,b),g[b+3]=o.constant}l.value=g,l.needsUpdate=!0}return t.numPlanes=p,t.numIntersection=0,g}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(d,h,f){const m=0!==d.length||h||0!==i||r;return r=h,e=u(d,f,0),i=d.length,m},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1,c()},this.setState=function(d,h,f){const m=d.clippingPlanes,p=d.clipIntersection,g=d.clipShadows,v=n.get(d);if(!r||null===m||0===m.length||s&&!g)s?u(null):c();else{const y=s?0:i,_=4*y;let b=v.clippingState||null;l.value=b,b=u(m,h,_,f);for(let M=0;M!==_;++M)b[M]=e[M];v.clippingState=b,this.numIntersection=p?this.numPlanes:0,this.numPlanes+=y}}}function $$(n){let t=new WeakMap;function e(o,a){return a===tp?o.mapping=Wo:a===np&&(o.mapping=$o),o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const l=t.get(a);void 0!==l&&(t.delete(a),l.dispose())}return{get:function i(o){if(o&&o.isTexture&&!1===o.isRenderTargetTexture){const a=o.mapping;if(a===tp||a===np){if(t.has(o))return e(t.get(o).texture,o.mapping);{const l=o.image;if(l&&l.height>0){const c=new k5(l.height/2);return c.fromEquirectangularTexture(n,o),t.set(o,c),o.addEventListener("dispose",r),e(c.texture,o.mapping)}return null}}}return o},dispose:function s(){t=new WeakMap}}}class g0 extends Cp{constructor(t=-1,e=1,i=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=i,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this}setViewOffset(t,e,i,r,s,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-t,o=i+t,a=r+e,l=r-e;if(null!==this.view&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=u*this.view.offsetY,l=a-u*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}const OE=[.125,.215,.35,.446,.526,.582],_0=new g0,NE=new Ae;let v0=null;const aa=(1+Math.sqrt(5))/2,lc=1/aa,FE=[new S(1,1,1),new S(-1,1,1),new S(1,1,-1),new S(-1,1,-1),new S(0,aa,lc),new S(0,aa,-lc),new S(lc,0,aa),new S(-lc,0,aa),new S(aa,lc,0),new S(-aa,lc,0)];class LE{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,e=0,i=.1,r=100){v0=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(t,i,r,s),e>0&&this._blur(s,0,0,e),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(t,e=null){return this._fromTexture(t,e)}fromCubemap(t,e=null){return this._fromTexture(t,e)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=kE(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=jE(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(v0),t.scissorTest=!1,Op(t,0,0,t.width,t.height)}_fromTexture(t,e){this._setSize(t.mapping===Wo||t.mapping===$o?0===t.image.length?16:t.image[0].width||t.image[0].image.width:t.image.width/4),v0=this._renderer.getRenderTarget();const i=e||this._allocateTargets();return this._textureToCubeUV(t,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const t=3*Math.max(this._cubeSize,112),e=4*this._cubeSize,i={magFilter:kn,minFilter:kn,generateMipmaps:!1,type:ed,format:Ar,encoding:Jo,depthBuffer:!1},r=BE(t,e,i);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=BE(t,e,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function q$(n){const t=[],e=[],i=[];let r=n;const s=n-4+1+OE.length;for(let o=0;o<s;o++){const a=Math.pow(2,r);e.push(a);let l=1/a;o>n-4?l=OE[o-n+4-1]:0===o&&(l=0),i.push(l);const c=1/(a-2),u=-c,d=1+c,h=[u,u,d,u,d,d,u,u,d,d,u,d],f=6,m=6,p=3,g=2,v=1,y=new Float32Array(p*m*f),_=new Float32Array(g*m*f),b=new Float32Array(v*m*f);for(let x=0;x<f;x++){const E=x%3*2/3-1,T=x>2?0:-1;y.set([E,T,0,E+2/3,T,0,E+2/3,T+1,0,E,T,0,E+2/3,T+1,0,E,T+1,0],p*m*x),_.set(h,g*m*x),b.set([x,x,x,x,x,x],v*m*x)}const M=new yt;M.setAttribute("position",new ni(y,p)),M.setAttribute("uv",new ni(_,g)),M.setAttribute("faceIndex",new ni(b,v)),t.push(M),r>4&&r--}return{lodPlanes:t,sizeLods:e,sigmas:i}}(s)),this._blurMaterial=function K$(n,t,e){const i=new Float32Array(20),r=new S(0,1,0);return new _o({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/e,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:co,depthTest:!1,depthWrite:!1})}(s,t,e)}return r}_compileMaterial(t){const e=new Ii(this._lodPlanes[0],t);this._renderer.compile(e,_0)}_sceneToCubeUV(t,e,i,r){const a=new di(90,1,e,i),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],u=this._renderer,d=u.autoClear,h=u.toneMapping;u.getClearColor(NE),u.toneMapping=Fs,u.autoClear=!1;const f=new fs({name:"PMREM.Background",side:Er,depthWrite:!1,depthTest:!1}),m=new Ii(new nc,f);let p=!1;const g=t.background;g?g.isColor&&(f.color.copy(g),t.background=null,p=!0):(f.color.copy(NE),p=!0);for(let v=0;v<6;v++){const y=v%3;0===y?(a.up.set(0,l[v],0),a.lookAt(c[v],0,0)):1===y?(a.up.set(0,0,l[v]),a.lookAt(0,c[v],0)):(a.up.set(0,l[v],0),a.lookAt(0,0,c[v]));const _=this._cubeSize;Op(r,y*_,v>2?_:0,_,_),u.setRenderTarget(r),p&&u.render(m,a),u.render(t,a)}m.geometry.dispose(),m.material.dispose(),u.toneMapping=h,u.autoClear=d,t.background=g}_textureToCubeUV(t,e){const i=this._renderer,r=t.mapping===Wo||t.mapping===$o;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=kE()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===t.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=jE());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new Ii(this._lodPlanes[0],s);s.uniforms.envMap.value=t;const l=this._cubeSize;Op(e,0,0,3*l,2*l),i.setRenderTarget(e),i.render(o,_0)}_applyPMREM(t){const e=this._renderer,i=e.autoClear;e.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const s=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]);this._blur(t,r-1,r,s,FE[(r-1)%FE.length])}e.autoClear=i}_blur(t,e,i,r,s){const o=this._pingPongRenderTarget;this._halfBlur(t,o,e,i,r,"latitudinal",s),this._halfBlur(o,t,i,i,r,"longitudinal",s)}_halfBlur(t,e,i,r,s,o,a){const l=this._renderer,c=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");const d=new Ii(this._lodPlanes[r],c),h=c.uniforms,f=this._sizeLods[i]-1,m=isFinite(s)?Math.PI/(2*f):2*Math.PI/39,p=s/m,g=isFinite(s)?1+Math.floor(3*p):20;g>20&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${g} samples when the maximum is set to 20`);const v=[];let y=0;for(let E=0;E<20;++E){const T=E/p,D=Math.exp(-T*T/2);v.push(D),0===E?y+=D:E<g&&(y+=2*D)}for(let E=0;E<v.length;E++)v[E]=v[E]/y;h.envMap.value=t.texture,h.samples.value=g,h.weights.value=v,h.latitudinal.value="latitudinal"===o,a&&(h.poleAxis.value=a);const{_lodMax:_}=this;h.dTheta.value=m,h.mipInt.value=_-i;const b=this._sizeLods[r];Op(e,3*b*(r>_-4?r-_+4:0),4*(this._cubeSize-b),3*b,2*b),l.setRenderTarget(e),l.render(d,_0)}}function BE(n,t,e){const i=new ta(n,t,e);return i.texture.mapping=Qu,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function Op(n,t,e,i,r){n.viewport.set(t,e,i,r),n.scissor.set(t,e,i,r)}function jE(){return new _o({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:co,depthTest:!1,depthWrite:!1})}function kE(){return new _o({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:co,depthTest:!1,depthWrite:!1})}function X$(n){let t=new WeakMap,e=null;function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=t.get(l);void 0!==c&&(t.delete(l),c.dispose())}return{get:function i(a){if(a&&a.isTexture){const l=a.mapping,c=l===tp||l===np,u=l===Wo||l===$o;if(c||u){if(a.isRenderTargetTexture&&!0===a.needsPMREMUpdate){a.needsPMREMUpdate=!1;let d=t.get(a);return null===e&&(e=new LE(n)),d=c?e.fromEquirectangular(a,d):e.fromCubemap(a,d),t.set(a,d),d.texture}if(t.has(a))return t.get(a).texture;{const d=a.image;if(c&&d&&d.height>0||u&&d&&function r(a){let l=0;for(let u=0;u<6;u++)void 0!==a[u]&&l++;return 6===l}(d)){null===e&&(e=new LE(n));const h=c?e.fromEquirectangular(a):e.fromCubemap(a);return t.set(a,h),a.addEventListener("dispose",s),h.texture}return null}}}return a},dispose:function o(){t=new WeakMap,null!==e&&(e.dispose(),e=null)}}}function Y$(n){const t={};function e(i){if(void 0!==t[i])return t[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return t[i]=r,r}return{has:function(i){return null!==e(i)},init:function(i){i.isWebGL2?e("EXT_color_buffer_float"):(e("WEBGL_depth_texture"),e("OES_texture_float"),e("OES_texture_half_float"),e("OES_texture_half_float_linear"),e("OES_standard_derivatives"),e("OES_element_index_uint"),e("OES_vertex_array_object"),e("ANGLE_instanced_arrays")),e("OES_texture_float_linear"),e("EXT_color_buffer_half_float"),e("WEBGL_multisampled_render_to_texture")},get:function(i){const r=e(i);return null===r&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function J$(n,t,e,i){const r={},s=new WeakMap;function o(d){const h=d.target;null!==h.index&&t.remove(h.index);for(const m in h.attributes)t.remove(h.attributes[m]);h.removeEventListener("dispose",o),delete r[h.id];const f=s.get(h);f&&(t.remove(f),s.delete(h)),i.releaseStatesOfGeometry(h),!0===h.isInstancedBufferGeometry&&delete h._maxInstanceCount,e.memory.geometries--}function c(d){const h=[],f=d.index,m=d.attributes.position;let p=0;if(null!==f){const y=f.array;p=f.version;for(let _=0,b=y.length;_<b;_+=3){const M=y[_+0],x=y[_+1],E=y[_+2];h.push(M,x,x,E,E,M)}}else{p=m.version;for(let _=0,b=m.array.length/3-1;_<b;_+=3){const M=_+0,x=_+1,E=_+2;h.push(M,x,x,E,E,M)}}const g=new(mE(h)?EE:CE)(h,1);g.version=p;const v=s.get(d);v&&t.remove(v),s.set(d,g)}return{get:function a(d,h){return!0===r[h.id]||(h.addEventListener("dispose",o),r[h.id]=!0,e.memory.geometries++),h},update:function l(d){const h=d.attributes;for(const m in h)t.update(h[m],34962);const f=d.morphAttributes;for(const m in f){const p=f[m];for(let g=0,v=p.length;g<v;g++)t.update(p[g],34962)}},getWireframeAttribute:function u(d){const h=s.get(d);if(h){const f=d.index;null!==f&&h.version<f.version&&c(d)}else c(d);return s.get(d)}}}function Z$(n,t,e,i){const r=i.isWebGL2;let s,a,l;this.setMode=function o(h){s=h},this.setIndex=function c(h){a=h.type,l=h.bytesPerElement},this.render=function u(h,f){n.drawElements(s,f,a,h*l),e.update(f,s,1)},this.renderInstances=function d(h,f,m){if(0===m)return;let p,g;if(r)p=n,g="drawElementsInstanced";else if(p=t.get("ANGLE_instanced_arrays"),g="drawElementsInstancedANGLE",null===p)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");p[g](s,f,a,h*l,m),e.update(f,s,m)}}function Q$(n){const e={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:e,programs:null,autoReset:!0,reset:function r(){e.frame++,e.calls=0,e.triangles=0,e.points=0,e.lines=0},update:function i(s,o,a){switch(e.calls++,o){case 4:e.triangles+=a*(s/3);break;case 1:e.lines+=a*(s/2);break;case 3:e.lines+=a*(s-1);break;case 2:e.lines+=a*s;break;case 0:e.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o)}}}}function e6(n,t){return n[0]-t[0]}function t6(n,t){return Math.abs(t[1])-Math.abs(n[1])}function n6(n,t,e){const i={},r=new Float32Array(8),s=new WeakMap,o=new Gt,a=[];for(let c=0;c<8;c++)a[c]=[c,0];return{update:function l(c,u,d,h){const f=c.morphTargetInfluences;if(!0===t.isWebGL2){const m=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,p=void 0!==m?m.length:0;let g=s.get(u);if(void 0===g||g.count!==p){let k=function(){N.dispose(),s.delete(u),u.removeEventListener("dispose",k)};void 0!==g&&g.texture.dispose();const _=void 0!==u.morphAttributes.position,b=void 0!==u.morphAttributes.normal,M=void 0!==u.morphAttributes.color,x=u.morphAttributes.position||[],E=u.morphAttributes.normal||[],T=u.morphAttributes.color||[];let D=0;!0===_&&(D=1),!0===b&&(D=2),!0===M&&(D=3);let A=u.attributes.position.count*D,F=1;A>t.maxTextureSize&&(F=Math.ceil(A/t.maxTextureSize),A=t.maxTextureSize);const H=new Float32Array(A*F*4*p),N=new Yy(H,A,F,p);N.type=uo,N.needsUpdate=!0;const O=4*D;for(let $=0;$<p;$++){const ne=x[$],q=E[$],se=T[$],ee=A*F*4*$;for(let V=0;V<ne.count;V++){const G=V*O;!0===_&&(o.fromBufferAttribute(ne,V),H[ee+G+0]=o.x,H[ee+G+1]=o.y,H[ee+G+2]=o.z,H[ee+G+3]=0),!0===b&&(o.fromBufferAttribute(q,V),H[ee+G+4]=o.x,H[ee+G+5]=o.y,H[ee+G+6]=o.z,H[ee+G+7]=0),!0===M&&(o.fromBufferAttribute(se,V),H[ee+G+8]=o.x,H[ee+G+9]=o.y,H[ee+G+10]=o.z,H[ee+G+11]=4===se.itemSize?o.w:1)}}g={count:p,texture:N,size:new Q(A,F)},s.set(u,g),u.addEventListener("dispose",k)}let v=0;for(let _=0;_<f.length;_++)v+=f[_];const y=u.morphTargetsRelative?1:1-v;h.getUniforms().setValue(n,"morphTargetBaseInfluence",y),h.getUniforms().setValue(n,"morphTargetInfluences",f),h.getUniforms().setValue(n,"morphTargetsTexture",g.texture,e),h.getUniforms().setValue(n,"morphTargetsTextureSize",g.size)}else{const m=void 0===f?0:f.length;let p=i[u.id];if(void 0===p||p.length!==m){p=[];for(let b=0;b<m;b++)p[b]=[b,0];i[u.id]=p}for(let b=0;b<m;b++){const M=p[b];M[0]=b,M[1]=f[b]}p.sort(t6);for(let b=0;b<8;b++)b<m&&p[b][1]?(a[b][0]=p[b][0],a[b][1]=p[b][1]):(a[b][0]=Number.MAX_SAFE_INTEGER,a[b][1]=0);a.sort(e6);const g=u.morphAttributes.position,v=u.morphAttributes.normal;let y=0;for(let b=0;b<8;b++){const M=a[b],x=M[0],E=M[1];x!==Number.MAX_SAFE_INTEGER&&E?(g&&u.getAttribute("morphTarget"+b)!==g[x]&&u.setAttribute("morphTarget"+b,g[x]),v&&u.getAttribute("morphNormal"+b)!==v[x]&&u.setAttribute("morphNormal"+b,v[x]),r[b]=E,y+=E):(g&&!0===u.hasAttribute("morphTarget"+b)&&u.deleteAttribute("morphTarget"+b),v&&!0===u.hasAttribute("morphNormal"+b)&&u.deleteAttribute("morphNormal"+b),r[b]=0)}const _=u.morphTargetsRelative?1:1-y;h.getUniforms().setValue(n,"morphTargetBaseInfluence",_),h.getUniforms().setValue(n,"morphTargetInfluences",r)}}}}function i6(n,t,e,i){let r=new WeakMap;function a(l){const c=l.target;c.removeEventListener("dispose",a),e.remove(c.instanceMatrix),null!==c.instanceColor&&e.remove(c.instanceColor)}return{update:function s(l){const c=i.render.frame,d=t.get(l,l.geometry);return r.get(d)!==c&&(t.update(d),r.set(d,c)),l.isInstancedMesh&&(!1===l.hasEventListener("dispose",a)&&l.addEventListener("dispose",a),e.update(l.instanceMatrix,34962),null!==l.instanceColor&&e.update(l.instanceColor,34962)),d},dispose:function o(){r=new WeakMap}}}const GE=new ho,VE=new Yy,UE=new vE,HE=new Ep,zE=[],WE=[],$E=new Float32Array(16),qE=new Float32Array(9),KE=new Float32Array(4);function cc(n,t,e){const i=n[0];if(i<=0||i>0)return n;const r=t*e;let s=zE[r];if(void 0===s&&(s=new Float32Array(r),zE[r]=s),0!==t){i.toArray(s,0);for(let o=1,a=0;o!==t;++o)a+=e,n[o].toArray(s,a)}return s}function Xn(n,t){if(n.length!==t.length)return!1;for(let e=0,i=n.length;e<i;e++)if(n[e]!==t[e])return!1;return!0}function Yn(n,t){for(let e=0,i=t.length;e<i;e++)n[e]=t[e]}function Np(n,t){let e=WE[t];void 0===e&&(e=new Int32Array(t),WE[t]=e);for(let i=0;i!==t;++i)e[i]=n.allocateTextureUnit();return e}function r6(n,t){const e=this.cache;e[0]!==t&&(n.uniform1f(this.addr,t),e[0]=t)}function s6(n,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y)&&(n.uniform2f(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(Xn(e,t))return;n.uniform2fv(this.addr,t),Yn(e,t)}}function o6(n,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(n.uniform3f(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else if(void 0!==t.r)(e[0]!==t.r||e[1]!==t.g||e[2]!==t.b)&&(n.uniform3f(this.addr,t.r,t.g,t.b),e[0]=t.r,e[1]=t.g,e[2]=t.b);else{if(Xn(e,t))return;n.uniform3fv(this.addr,t),Yn(e,t)}}function a6(n,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(n.uniform4f(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(Xn(e,t))return;n.uniform4fv(this.addr,t),Yn(e,t)}}function l6(n,t){const e=this.cache,i=t.elements;if(void 0===i){if(Xn(e,t))return;n.uniformMatrix2fv(this.addr,!1,t),Yn(e,t)}else{if(Xn(e,i))return;KE.set(i),n.uniformMatrix2fv(this.addr,!1,KE),Yn(e,i)}}function c6(n,t){const e=this.cache,i=t.elements;if(void 0===i){if(Xn(e,t))return;n.uniformMatrix3fv(this.addr,!1,t),Yn(e,t)}else{if(Xn(e,i))return;qE.set(i),n.uniformMatrix3fv(this.addr,!1,qE),Yn(e,i)}}function u6(n,t){const e=this.cache,i=t.elements;if(void 0===i){if(Xn(e,t))return;n.uniformMatrix4fv(this.addr,!1,t),Yn(e,t)}else{if(Xn(e,i))return;$E.set(i),n.uniformMatrix4fv(this.addr,!1,$E),Yn(e,i)}}function d6(n,t){const e=this.cache;e[0]!==t&&(n.uniform1i(this.addr,t),e[0]=t)}function h6(n,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y)&&(n.uniform2i(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(Xn(e,t))return;n.uniform2iv(this.addr,t),Yn(e,t)}}function f6(n,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(n.uniform3i(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else{if(Xn(e,t))return;n.uniform3iv(this.addr,t),Yn(e,t)}}function p6(n,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(n.uniform4i(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(Xn(e,t))return;n.uniform4iv(this.addr,t),Yn(e,t)}}function m6(n,t){const e=this.cache;e[0]!==t&&(n.uniform1ui(this.addr,t),e[0]=t)}function g6(n,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y)&&(n.uniform2ui(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(Xn(e,t))return;n.uniform2uiv(this.addr,t),Yn(e,t)}}function _6(n,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(n.uniform3ui(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else{if(Xn(e,t))return;n.uniform3uiv(this.addr,t),Yn(e,t)}}function v6(n,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(n.uniform4ui(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(Xn(e,t))return;n.uniform4uiv(this.addr,t),Yn(e,t)}}function y6(n,t,e){const i=this.cache,r=e.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),e.setTexture2D(t||GE,r)}function b6(n,t,e){const i=this.cache,r=e.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),e.setTexture3D(t||UE,r)}function T6(n,t,e){const i=this.cache,r=e.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),e.setTextureCube(t||HE,r)}function M6(n,t,e){const i=this.cache,r=e.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),e.setTexture2DArray(t||VE,r)}function w6(n,t){n.uniform1fv(this.addr,t)}function D6(n,t){const e=cc(t,this.size,2);n.uniform2fv(this.addr,e)}function R6(n,t){const e=cc(t,this.size,3);n.uniform3fv(this.addr,e)}function S6(n,t){const e=cc(t,this.size,4);n.uniform4fv(this.addr,e)}function C6(n,t){const e=cc(t,this.size,4);n.uniformMatrix2fv(this.addr,!1,e)}function E6(n,t){const e=cc(t,this.size,9);n.uniformMatrix3fv(this.addr,!1,e)}function A6(n,t){const e=cc(t,this.size,16);n.uniformMatrix4fv(this.addr,!1,e)}function I6(n,t){n.uniform1iv(this.addr,t)}function P6(n,t){n.uniform2iv(this.addr,t)}function O6(n,t){n.uniform3iv(this.addr,t)}function N6(n,t){n.uniform4iv(this.addr,t)}function F6(n,t){n.uniform1uiv(this.addr,t)}function L6(n,t){n.uniform2uiv(this.addr,t)}function B6(n,t){n.uniform3uiv(this.addr,t)}function j6(n,t){n.uniform4uiv(this.addr,t)}function k6(n,t,e){const i=this.cache,r=t.length,s=Np(e,r);Xn(i,s)||(n.uniform1iv(this.addr,s),Yn(i,s));for(let o=0;o!==r;++o)e.setTexture2D(t[o]||GE,s[o])}function G6(n,t,e){const i=this.cache,r=t.length,s=Np(e,r);Xn(i,s)||(n.uniform1iv(this.addr,s),Yn(i,s));for(let o=0;o!==r;++o)e.setTexture3D(t[o]||UE,s[o])}function V6(n,t,e){const i=this.cache,r=t.length,s=Np(e,r);Xn(i,s)||(n.uniform1iv(this.addr,s),Yn(i,s));for(let o=0;o!==r;++o)e.setTextureCube(t[o]||HE,s[o])}function U6(n,t,e){const i=this.cache,r=t.length,s=Np(e,r);Xn(i,s)||(n.uniform1iv(this.addr,s),Yn(i,s));for(let o=0;o!==r;++o)e.setTexture2DArray(t[o]||VE,s[o])}class z6{constructor(t,e,i){this.id=t,this.addr=i,this.cache=[],this.setValue=function x6(n){switch(n){case 5126:return r6;case 35664:return s6;case 35665:return o6;case 35666:return a6;case 35674:return l6;case 35675:return c6;case 35676:return u6;case 5124:case 35670:return d6;case 35667:case 35671:return h6;case 35668:case 35672:return f6;case 35669:case 35673:return p6;case 5125:return m6;case 36294:return g6;case 36295:return _6;case 36296:return v6;case 35678:case 36198:case 36298:case 36306:case 35682:return y6;case 35679:case 36299:case 36307:return b6;case 35680:case 36300:case 36308:case 36293:return T6;case 36289:case 36303:case 36311:case 36292:return M6}}(e.type)}}class W6{constructor(t,e,i){this.id=t,this.addr=i,this.cache=[],this.size=e.size,this.setValue=function H6(n){switch(n){case 5126:return w6;case 35664:return D6;case 35665:return R6;case 35666:return S6;case 35674:return C6;case 35675:return E6;case 35676:return A6;case 5124:case 35670:return I6;case 35667:case 35671:return P6;case 35668:case 35672:return O6;case 35669:case 35673:return N6;case 5125:return F6;case 36294:return L6;case 36295:return B6;case 36296:return j6;case 35678:case 36198:case 36298:case 36306:case 35682:return k6;case 35679:case 36299:case 36307:return G6;case 35680:case 36300:case 36308:case 36293:return V6;case 36289:case 36303:case 36311:case 36292:return U6}}(e.type)}}class $6{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,e,i){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const a=r[s];a.setValue(t,e[a.id],i)}}}const b0=/(\w+)(\])?(\[|\.)?/g;function XE(n,t){n.seq.push(t),n.map[t.id]=t}function q6(n,t,e){const i=n.name,r=i.length;for(b0.lastIndex=0;;){const s=b0.exec(i);let a=s[1];const c=s[3];if("]"===s[2]&&(a|=0),void 0===c||"["===c&&b0.lastIndex+2===r){XE(e,void 0===c?new z6(a,n,t):new W6(a,n,t));break}{let d=e.map[a];void 0===d&&(d=new $6(a),XE(e,d)),e=d}}}class Fp{constructor(t,e){this.seq=[],this.map={};const i=t.getProgramParameter(e,35718);for(let r=0;r<i;++r){const s=t.getActiveUniform(e,r);q6(s,t.getUniformLocation(e,s.name),this)}}setValue(t,e,i,r){const s=this.map[e];void 0!==s&&s.setValue(t,i,r)}setOptional(t,e,i){const r=e[i];void 0!==r&&this.setValue(t,i,r)}static upload(t,e,i,r){for(let s=0,o=e.length;s!==o;++s){const a=e[s],l=i[a.id];!1!==l.needsUpdate&&a.setValue(t,l.value,r)}}static seqWithValue(t,e){const i=[];for(let r=0,s=t.length;r!==s;++r){const o=t[r];o.id in e&&i.push(o)}return i}}function YE(n,t,e){const i=n.createShader(t);return n.shaderSource(i,e),n.compileShader(i),i}let K6=0;function JE(n,t,e){const i=n.getShaderParameter(t,35713),r=n.getShaderInfoLog(t).trim();if(i&&""===r)return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const o=parseInt(s[1]);return e.toUpperCase()+"\n\n"+r+"\n\n"+function X6(n,t){const e=n.split("\n"),i=[],r=Math.max(t-6,0),s=Math.min(t+6,e.length);for(let o=r;o<s;o++){const a=o+1;i.push(`${a===t?">":" "} ${a}: ${e[o]}`)}return i.join("\n")}(n.getShaderSource(t),o)}return r}function J6(n,t){const e=function Y6(n){switch(n){case Jo:return["Linear","( value )"];case ln:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",n),["Linear","( value )"]}}(t);return"vec4 "+n+"( vec4 value ) { return LinearTo"+e[0]+e[1]+"; }"}function Z6(n,t){let e;switch(t){case FW:e="Linear";break;case LW:e="Reinhard";break;case BW:e="OptimizedCineon";break;case jW:e="ACESFilmic";break;case kW:e="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),e="Linear"}return"vec3 "+n+"( vec3 color ) { return "+e+"ToneMapping( color ); }"}function fd(n){return""!==n}function ZE(n,t){const e=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,e).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function QE(n,t){return n.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const n9=/^[ \t]*#include +<([\w\d./]+)>/gm;function T0(n){return n.replace(n9,i9)}function i9(n,t){const e=mt[t];if(void 0===e)throw new Error("Can not resolve #include <"+t+">");return T0(e)}const r9=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function eA(n){return n.replace(r9,s9)}function s9(n,t,e,i){let r="";for(let s=parseInt(t);s<parseInt(e);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function tA(n){let t="precision "+n.precision+" float;\nprecision "+n.precision+" int;";return"highp"===n.precision?t+="\n#define HIGH_PRECISION":"mediump"===n.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===n.precision&&(t+="\n#define LOW_PRECISION"),t}function d9(n,t,e,i){const r=n.getContext(),s=e.defines;let o=e.vertexShader,a=e.fragmentShader;const l=function o9(n){let t="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===NC?t="SHADOWMAP_TYPE_PCF":n.shadowMapType===fW?t="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===Zu&&(t="SHADOWMAP_TYPE_VSM"),t}(e),c=function a9(n){let t="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case Wo:case $o:t="ENVMAP_TYPE_CUBE";break;case Qu:t="ENVMAP_TYPE_CUBE_UV"}return t}(e),u=function l9(n){let t="ENVMAP_MODE_REFLECTION";return n.envMap&&n.envMapMode===$o&&(t="ENVMAP_MODE_REFRACTION"),t}(e),d=function c9(n){let t="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case ep:t="ENVMAP_BLENDING_MULTIPLY";break;case OW:t="ENVMAP_BLENDING_MIX";break;case NW:t="ENVMAP_BLENDING_ADD"}return t}(e),h=function u9(n){const t=n.envMapCubeUVHeight;if(null===t)return null;const e=Math.log2(t)-2,i=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,e),112)),texelHeight:i,maxMip:e}}(e),f=e.isWebGL2?"":function Q6(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.tangentSpaceNormalMap||n.clearcoatNormalMap||n.flatShading||"physical"===n.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(fd).join("\n")}(e),m=function e9(n){const t=[];for(const e in n){const i=n[e];!1!==i&&t.push("#define "+e+" "+i)}return t.join("\n")}(s),p=r.createProgram();let g,v,y=e.glslVersion?"#version "+e.glslVersion+"\n":"";e.isRawShaderMaterial?(g=[m].filter(fd).join("\n"),g.length>0&&(g+="\n"),v=[f,m].filter(fd).join("\n"),v.length>0&&(v+="\n")):(g=[tA(e),"#define SHADER_NAME "+e.shaderName,m,e.instancing?"#define USE_INSTANCING":"",e.instancingColor?"#define USE_INSTANCING_COLOR":"",e.supportsVertexTextures?"#define VERTEX_TEXTURES":"",e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.map?"#define USE_MAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+u:"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMap&&e.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",e.normalMap&&e.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",e.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",e.displacementMap&&e.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",e.specularColorMap?"#define USE_SPECULARCOLORMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.sheenColorMap?"#define USE_SHEENCOLORMAP":"",e.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",e.vertexTangents?"#define USE_TANGENT":"",e.vertexColors?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUvs?"#define USE_UV":"",e.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",e.flatShading?"#define FLAT_SHADED":"",e.skinning?"#define USE_SKINNING":"",e.morphTargets?"#define USE_MORPHTARGETS":"",e.morphNormals&&!1===e.flatShading?"#define USE_MORPHNORMALS":"",e.morphColors&&e.isWebGL2?"#define USE_MORPHCOLORS":"",e.morphTargetsCount>0&&e.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",e.morphTargetsCount>0&&e.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+e.morphTextureStride:"",e.morphTargetsCount>0&&e.isWebGL2?"#define MORPHTARGETS_COUNT "+e.morphTargetsCount:"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+l:"",e.sizeAttenuation?"#define USE_SIZEATTENUATION":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",e.logarithmicDepthBuffer&&e.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(fd).join("\n"),v=[f,tA(e),"#define SHADER_NAME "+e.shaderName,m,e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.map?"#define USE_MAP":"",e.matcap?"#define USE_MATCAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+c:"",e.envMap?"#define "+u:"",e.envMap?"#define "+d:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMap&&e.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",e.normalMap&&e.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",e.clearcoat?"#define USE_CLEARCOAT":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.iridescence?"#define USE_IRIDESCENCE":"",e.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",e.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",e.specularColorMap?"#define USE_SPECULARCOLORMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.alphaTest?"#define USE_ALPHATEST":"",e.sheen?"#define USE_SHEEN":"",e.sheenColorMap?"#define USE_SHEENCOLORMAP":"",e.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",e.vertexTangents?"#define USE_TANGENT":"",e.vertexColors||e.instancingColor?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUvs?"#define USE_UV":"",e.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",e.gradientMap?"#define USE_GRADIENTMAP":"",e.flatShading?"#define FLAT_SHADED":"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+l:"",e.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",e.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",e.logarithmicDepthBuffer&&e.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",e.toneMapping!==Fs?"#define TONE_MAPPING":"",e.toneMapping!==Fs?mt.tonemapping_pars_fragment:"",e.toneMapping!==Fs?Z6("toneMapping",e.toneMapping):"",e.dithering?"#define DITHERING":"",e.opaque?"#define OPAQUE":"",mt.encodings_pars_fragment,J6("linearToOutputTexel",e.outputEncoding),e.useDepthPacking?"#define DEPTH_PACKING "+e.depthPacking:"","\n"].filter(fd).join("\n")),o=T0(o),o=ZE(o,e),o=QE(o,e),a=T0(a),a=ZE(a,e),a=QE(a,e),o=eA(o),a=eA(a),e.isWebGL2&&!0!==e.isRawShaderMaterial&&(y="#version 300 es\n",g=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+g,v=["#define varying in",e.glslVersion===hE?"":"layout(location = 0) out highp vec4 pc_fragColor;",e.glslVersion===hE?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+v);const b=y+v+a,M=YE(r,35633,y+g+o),x=YE(r,35632,b);if(r.attachShader(p,M),r.attachShader(p,x),void 0!==e.index0AttributeName?r.bindAttribLocation(p,0,e.index0AttributeName):!0===e.morphTargets&&r.bindAttribLocation(p,0,"position"),r.linkProgram(p),n.debug.checkShaderErrors){const D=r.getProgramInfoLog(p).trim(),A=r.getShaderInfoLog(M).trim(),F=r.getShaderInfoLog(x).trim();let H=!0,N=!0;if(!1===r.getProgramParameter(p,35714)){H=!1;const O=JE(r,M,"vertex"),k=JE(r,x,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(p,35715)+"\n\nProgram Info Log: "+D+"\n"+O+"\n"+k)}else""!==D?console.warn("THREE.WebGLProgram: Program Info Log:",D):(""===A||""===F)&&(N=!1);N&&(this.diagnostics={runnable:H,programLog:D,vertexShader:{log:A,prefix:g},fragmentShader:{log:F,prefix:v}})}let E,T;return r.deleteShader(M),r.deleteShader(x),this.getUniforms=function(){return void 0===E&&(E=new Fp(r,p)),E},this.getAttributes=function(){return void 0===T&&(T=function t9(n,t){const e={},i=n.getProgramParameter(t,35721);for(let r=0;r<i;r++){const s=n.getActiveAttrib(t,r),o=s.name;let a=1;35674===s.type&&(a=2),35675===s.type&&(a=3),35676===s.type&&(a=4),e[o]={type:s.type,location:n.getAttribLocation(t,o),locationSize:a}}return e}(r,p)),T},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(p),this.program=void 0},this.name=e.shaderName,this.id=K6++,this.cacheKey=t,this.usedTimes=1,this.program=p,this.vertexShader=M,this.fragmentShader=x,this}let h9=0;class f9{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){const i=t.fragmentShader,r=this._getShaderStage(t.vertexShader),s=this._getShaderStage(i),o=this._getShaderCacheForMaterial(t);return!1===o.has(r)&&(o.add(r),r.usedTimes++),!1===o.has(s)&&(o.add(s),s.usedTimes++),this}remove(t){const e=this.materialCache.get(t);for(const i of e)i.usedTimes--,0===i.usedTimes&&this.shaderCache.delete(i.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){const e=this.materialCache;let i=e.get(t);return void 0===i&&(i=new Set,e.set(t,i)),i}_getShaderStage(t){const e=this.shaderCache;let i=e.get(t);return void 0===i&&(i=new p9(t),e.set(t,i)),i}}class p9{constructor(t){this.id=h9++,this.code=t,this.usedTimes=0}}function m9(n,t,e,i,r,s,o){const a=new s0,l=new f9,c=[],u=r.isWebGL2,d=r.logarithmicDepthBuffer,h=r.vertexTextures;let f=r.precision;const m={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function p(T,D,A,F,H){const N=F.fog,O=H.geometry,$=(T.isMeshStandardMaterial?e:t).get(T.envMap||(T.isMeshStandardMaterial?F.environment:null)),ne=$&&$.mapping===Qu?$.image.height:null,q=m[T.type];null!==T.precision&&(f=r.getMaxPrecision(T.precision),f!==T.precision&&console.warn("THREE.WebGLProgram.getParameters:",T.precision,"not supported, using",f,"instead."));const se=O.morphAttributes.position||O.morphAttributes.normal||O.morphAttributes.color,ee=void 0!==se?se.length:0;let G,me,ce,_e,V=0;if(void 0!==O.morphAttributes.position&&(V=1),void 0!==O.morphAttributes.normal&&(V=2),void 0!==O.morphAttributes.color&&(V=3),q){const lt=ps[q];G=lt.vertexShader,me=lt.fragmentShader}else G=T.vertexShader,me=T.fragmentShader,l.update(T),ce=l.getVertexShaderID(T),_e=l.getFragmentShaderID(T);const U=n.getRenderTarget(),De=T.clearcoat>0,Ke=T.iridescence>0;return{isWebGL2:u,shaderID:q,shaderName:T.type,vertexShader:G,fragmentShader:me,defines:T.defines,customVertexShaderID:ce,customFragmentShaderID:_e,isRawShaderMaterial:!0===T.isRawShaderMaterial,glslVersion:T.glslVersion,precision:f,instancing:!0===H.isInstancedMesh,instancingColor:!0===H.isInstancedMesh&&null!==H.instanceColor,supportsVertexTextures:h,outputEncoding:null===U?n.outputEncoding:!0===U.isXRRenderTarget?U.texture.encoding:Jo,map:!!T.map,matcap:!!T.matcap,envMap:!!$,envMapMode:$&&$.mapping,envMapCubeUVHeight:ne,lightMap:!!T.lightMap,aoMap:!!T.aoMap,emissiveMap:!!T.emissiveMap,bumpMap:!!T.bumpMap,normalMap:!!T.normalMap,objectSpaceNormalMap:T.normalMapType===o5,tangentSpaceNormalMap:T.normalMapType===Zo,decodeVideoTexture:!!T.map&&!0===T.map.isVideoTexture&&T.map.encoding===ln,clearcoat:De,clearcoatMap:De&&!!T.clearcoatMap,clearcoatRoughnessMap:De&&!!T.clearcoatRoughnessMap,clearcoatNormalMap:De&&!!T.clearcoatNormalMap,iridescence:Ke,iridescenceMap:Ke&&!!T.iridescenceMap,iridescenceThicknessMap:Ke&&!!T.iridescenceThicknessMap,displacementMap:!!T.displacementMap,roughnessMap:!!T.roughnessMap,metalnessMap:!!T.metalnessMap,specularMap:!!T.specularMap,specularIntensityMap:!!T.specularIntensityMap,specularColorMap:!!T.specularColorMap,opaque:!1===T.transparent&&T.blending===Fl,alphaMap:!!T.alphaMap,alphaTest:T.alphaTest>0,gradientMap:!!T.gradientMap,sheen:T.sheen>0,sheenColorMap:!!T.sheenColorMap,sheenRoughnessMap:!!T.sheenRoughnessMap,transmission:T.transmission>0,transmissionMap:!!T.transmissionMap,thicknessMap:!!T.thicknessMap,combine:T.combine,vertexTangents:!!T.normalMap&&!!O.attributes.tangent,vertexColors:T.vertexColors,vertexAlphas:!0===T.vertexColors&&!!O.attributes.color&&4===O.attributes.color.itemSize,vertexUvs:!!(T.map||T.bumpMap||T.normalMap||T.specularMap||T.alphaMap||T.emissiveMap||T.roughnessMap||T.metalnessMap||T.clearcoatMap||T.clearcoatRoughnessMap||T.clearcoatNormalMap||T.iridescenceMap||T.iridescenceThicknessMap||T.displacementMap||T.transmissionMap||T.thicknessMap||T.specularIntensityMap||T.specularColorMap||T.sheenColorMap||T.sheenRoughnessMap),uvsVertexOnly:!(T.map||T.bumpMap||T.normalMap||T.specularMap||T.alphaMap||T.emissiveMap||T.roughnessMap||T.metalnessMap||T.clearcoatNormalMap||T.iridescenceMap||T.iridescenceThicknessMap||T.transmission>0||T.transmissionMap||T.thicknessMap||T.specularIntensityMap||T.specularColorMap||T.sheen>0||T.sheenColorMap||T.sheenRoughnessMap||!T.displacementMap),fog:!!N,useFog:!0===T.fog,fogExp2:N&&N.isFogExp2,flatShading:!!T.flatShading,sizeAttenuation:T.sizeAttenuation,logarithmicDepthBuffer:d,skinning:!0===H.isSkinnedMesh,morphTargets:void 0!==O.morphAttributes.position,morphNormals:void 0!==O.morphAttributes.normal,morphColors:void 0!==O.morphAttributes.color,morphTargetsCount:ee,morphTextureStride:V,numDirLights:D.directional.length,numPointLights:D.point.length,numSpotLights:D.spot.length,numSpotLightMaps:D.spotLightMap.length,numRectAreaLights:D.rectArea.length,numHemiLights:D.hemi.length,numDirLightShadows:D.directionalShadowMap.length,numPointLightShadows:D.pointShadowMap.length,numSpotLightShadows:D.spotShadowMap.length,numSpotLightShadowsWithMaps:D.numSpotLightShadowsWithMaps,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:T.dithering,shadowMapEnabled:n.shadowMap.enabled&&A.length>0,shadowMapType:n.shadowMap.type,toneMapping:T.toneMapped?n.toneMapping:Fs,physicallyCorrectLights:n.physicallyCorrectLights,premultipliedAlpha:T.premultipliedAlpha,doubleSided:T.side===Py,flipSided:T.side===Er,useDepthPacking:!!T.depthPacking,depthPacking:T.depthPacking||0,index0AttributeName:T.index0AttributeName,extensionDerivatives:T.extensions&&T.extensions.derivatives,extensionFragDepth:T.extensions&&T.extensions.fragDepth,extensionDrawBuffers:T.extensions&&T.extensions.drawBuffers,extensionShaderTextureLOD:T.extensions&&T.extensions.shaderTextureLOD,rendererExtensionFragDepth:u||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||i.has("EXT_shader_texture_lod"),customProgramCacheKey:T.customProgramCacheKey()}},getProgramCacheKey:function g(T){const D=[];if(T.shaderID?D.push(T.shaderID):(D.push(T.customVertexShaderID),D.push(T.customFragmentShaderID)),void 0!==T.defines)for(const A in T.defines)D.push(A),D.push(T.defines[A]);return!1===T.isRawShaderMaterial&&(function v(T,D){T.push(D.precision),T.push(D.outputEncoding),T.push(D.envMapMode),T.push(D.envMapCubeUVHeight),T.push(D.combine),T.push(D.vertexUvs),T.push(D.fogExp2),T.push(D.sizeAttenuation),T.push(D.morphTargetsCount),T.push(D.morphAttributeCount),T.push(D.numDirLights),T.push(D.numPointLights),T.push(D.numSpotLights),T.push(D.numSpotLightMaps),T.push(D.numHemiLights),T.push(D.numRectAreaLights),T.push(D.numDirLightShadows),T.push(D.numPointLightShadows),T.push(D.numSpotLightShadows),T.push(D.numSpotLightShadowsWithMaps),T.push(D.shadowMapType),T.push(D.toneMapping),T.push(D.numClippingPlanes),T.push(D.numClipIntersection),T.push(D.depthPacking)}(D,T),function y(T,D){a.disableAll(),D.isWebGL2&&a.enable(0),D.supportsVertexTextures&&a.enable(1),D.instancing&&a.enable(2),D.instancingColor&&a.enable(3),D.map&&a.enable(4),D.matcap&&a.enable(5),D.envMap&&a.enable(6),D.lightMap&&a.enable(7),D.aoMap&&a.enable(8),D.emissiveMap&&a.enable(9),D.bumpMap&&a.enable(10),D.normalMap&&a.enable(11),D.objectSpaceNormalMap&&a.enable(12),D.tangentSpaceNormalMap&&a.enable(13),D.clearcoat&&a.enable(14),D.clearcoatMap&&a.enable(15),D.clearcoatRoughnessMap&&a.enable(16),D.clearcoatNormalMap&&a.enable(17),D.iridescence&&a.enable(18),D.iridescenceMap&&a.enable(19),D.iridescenceThicknessMap&&a.enable(20),D.displacementMap&&a.enable(21),D.specularMap&&a.enable(22),D.roughnessMap&&a.enable(23),D.metalnessMap&&a.enable(24),D.gradientMap&&a.enable(25),D.alphaMap&&a.enable(26),D.alphaTest&&a.enable(27),D.vertexColors&&a.enable(28),D.vertexAlphas&&a.enable(29),D.vertexUvs&&a.enable(30),D.vertexTangents&&a.enable(31),D.uvsVertexOnly&&a.enable(32),T.push(a.mask),a.disableAll(),D.fog&&a.enable(0),D.useFog&&a.enable(1),D.flatShading&&a.enable(2),D.logarithmicDepthBuffer&&a.enable(3),D.skinning&&a.enable(4),D.morphTargets&&a.enable(5),D.morphNormals&&a.enable(6),D.morphColors&&a.enable(7),D.premultipliedAlpha&&a.enable(8),D.shadowMapEnabled&&a.enable(9),D.physicallyCorrectLights&&a.enable(10),D.doubleSided&&a.enable(11),D.flipSided&&a.enable(12),D.useDepthPacking&&a.enable(13),D.dithering&&a.enable(14),D.specularIntensityMap&&a.enable(15),D.specularColorMap&&a.enable(16),D.transmission&&a.enable(17),D.transmissionMap&&a.enable(18),D.thicknessMap&&a.enable(19),D.sheen&&a.enable(20),D.sheenColorMap&&a.enable(21),D.sheenRoughnessMap&&a.enable(22),D.decodeVideoTexture&&a.enable(23),D.opaque&&a.enable(24),T.push(a.mask)}(D,T),D.push(n.outputEncoding)),D.push(T.customProgramCacheKey),D.join()},getUniforms:function _(T){const D=m[T.type];let A;return A=D?F5.clone(ps[D].uniforms):T.uniforms,A},acquireProgram:function b(T,D){let A;for(let F=0,H=c.length;F<H;F++){const N=c[F];if(N.cacheKey===D){A=N,++A.usedTimes;break}}return void 0===A&&(A=new d9(n,D,T,s),c.push(A)),A},releaseProgram:function M(T){if(0==--T.usedTimes){const D=c.indexOf(T);c[D]=c[c.length-1],c.pop(),T.destroy()}},releaseShaderCache:function x(T){l.remove(T)},programs:c,dispose:function E(){l.dispose()}}}function g9(){let n=new WeakMap;return{get:function t(s){let o=n.get(s);return void 0===o&&(o={},n.set(s,o)),o},remove:function e(s){n.delete(s)},update:function i(s,o,a){n.get(s)[o]=a},dispose:function r(){n=new WeakMap}}}function _9(n,t){return n.groupOrder!==t.groupOrder?n.groupOrder-t.groupOrder:n.renderOrder!==t.renderOrder?n.renderOrder-t.renderOrder:n.material.id!==t.material.id?n.material.id-t.material.id:n.z!==t.z?n.z-t.z:n.id-t.id}function nA(n,t){return n.groupOrder!==t.groupOrder?n.groupOrder-t.groupOrder:n.renderOrder!==t.renderOrder?n.renderOrder-t.renderOrder:n.z!==t.z?t.z-n.z:n.id-t.id}function iA(){const n=[];let t=0;const e=[],i=[],r=[];function o(d,h,f,m,p,g){let v=n[t];return void 0===v?(v={id:d.id,object:d,geometry:h,material:f,groupOrder:m,renderOrder:d.renderOrder,z:p,group:g},n[t]=v):(v.id=d.id,v.object=d,v.geometry=h,v.material=f,v.groupOrder=m,v.renderOrder=d.renderOrder,v.z=p,v.group=g),t++,v}return{opaque:e,transmissive:i,transparent:r,init:function s(){t=0,e.length=0,i.length=0,r.length=0},push:function a(d,h,f,m,p,g){const v=o(d,h,f,m,p,g);f.transmission>0?i.push(v):!0===f.transparent?r.push(v):e.push(v)},unshift:function l(d,h,f,m,p,g){const v=o(d,h,f,m,p,g);f.transmission>0?i.unshift(v):!0===f.transparent?r.unshift(v):e.unshift(v)},finish:function u(){for(let d=t,h=n.length;d<h;d++){const f=n[d];if(null===f.id)break;f.id=null,f.object=null,f.geometry=null,f.material=null,f.group=null}},sort:function c(d,h){e.length>1&&e.sort(d||_9),i.length>1&&i.sort(h||nA),r.length>1&&r.sort(h||nA)}}}function v9(){let n=new WeakMap;return{get:function t(i,r){const s=n.get(i);let o;return void 0===s?(o=new iA,n.set(i,[o])):r>=s.length?(o=new iA,s.push(o)):o=s[r],o},dispose:function e(){n=new WeakMap}}}function y9(){const n={};return{get:function(t){if(void 0!==n[t.id])return n[t.id];let e;switch(t.type){case"DirectionalLight":e={direction:new S,color:new Ae};break;case"SpotLight":e={position:new S,direction:new S,color:new Ae,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":e={position:new S,color:new Ae,distance:0,decay:0};break;case"HemisphereLight":e={direction:new S,skyColor:new Ae,groundColor:new Ae};break;case"RectAreaLight":e={color:new Ae,position:new S,halfWidth:new S,halfHeight:new S}}return n[t.id]=e,e}}}let T9=0;function M9(n,t){return(t.castShadow?2:0)-(n.castShadow?2:0)+(t.map?1:0)-(n.map?1:0)}function x9(n,t){const e=new y9,i=function b9(){const n={};return{get:function(t){if(void 0!==n[t.id])return n[t.id];let e;switch(t.type){case"DirectionalLight":case"SpotLight":e={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Q};break;case"PointLight":e={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Q,shadowCameraNear:1,shadowCameraFar:1e3}}return n[t.id]=e,e}}}(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let u=0;u<9;u++)r.probe.push(new S);const s=new S,o=new dt,a=new dt;return{setup:function l(u,d){let h=0,f=0,m=0;for(let F=0;F<9;F++)r.probe[F].set(0,0,0);let p=0,g=0,v=0,y=0,_=0,b=0,M=0,x=0,E=0,T=0;u.sort(M9);const D=!0!==d?Math.PI:1;for(let F=0,H=u.length;F<H;F++){const N=u[F],O=N.color,k=N.intensity,$=N.distance,ne=N.shadow&&N.shadow.map?N.shadow.map.texture:null;if(N.isAmbientLight)h+=O.r*k*D,f+=O.g*k*D,m+=O.b*k*D;else if(N.isLightProbe)for(let q=0;q<9;q++)r.probe[q].addScaledVector(N.sh.coefficients[q],k);else if(N.isDirectionalLight){const q=e.get(N);if(q.color.copy(N.color).multiplyScalar(N.intensity*D),N.castShadow){const se=N.shadow,ee=i.get(N);ee.shadowBias=se.bias,ee.shadowNormalBias=se.normalBias,ee.shadowRadius=se.radius,ee.shadowMapSize=se.mapSize,r.directionalShadow[p]=ee,r.directionalShadowMap[p]=ne,r.directionalShadowMatrix[p]=N.shadow.matrix,b++}r.directional[p]=q,p++}else if(N.isSpotLight){const q=e.get(N);q.position.setFromMatrixPosition(N.matrixWorld),q.color.copy(O).multiplyScalar(k*D),q.distance=$,q.coneCos=Math.cos(N.angle),q.penumbraCos=Math.cos(N.angle*(1-N.penumbra)),q.decay=N.decay,r.spot[v]=q;const se=N.shadow;if(N.map&&(r.spotLightMap[E]=N.map,E++,se.updateMatrices(N),N.castShadow&&T++),r.spotLightMatrix[v]=se.matrix,N.castShadow){const ee=i.get(N);ee.shadowBias=se.bias,ee.shadowNormalBias=se.normalBias,ee.shadowRadius=se.radius,ee.shadowMapSize=se.mapSize,r.spotShadow[v]=ee,r.spotShadowMap[v]=ne,x++}v++}else if(N.isRectAreaLight){const q=e.get(N);q.color.copy(O).multiplyScalar(k),q.halfWidth.set(.5*N.width,0,0),q.halfHeight.set(0,.5*N.height,0),r.rectArea[y]=q,y++}else if(N.isPointLight){const q=e.get(N);if(q.color.copy(N.color).multiplyScalar(N.intensity*D),q.distance=N.distance,q.decay=N.decay,N.castShadow){const se=N.shadow,ee=i.get(N);ee.shadowBias=se.bias,ee.shadowNormalBias=se.normalBias,ee.shadowRadius=se.radius,ee.shadowMapSize=se.mapSize,ee.shadowCameraNear=se.camera.near,ee.shadowCameraFar=se.camera.far,r.pointShadow[g]=ee,r.pointShadowMap[g]=ne,r.pointShadowMatrix[g]=N.shadow.matrix,M++}r.point[g]=q,g++}else if(N.isHemisphereLight){const q=e.get(N);q.skyColor.copy(N.color).multiplyScalar(k*D),q.groundColor.copy(N.groundColor).multiplyScalar(k*D),r.hemi[_]=q,_++}}y>0&&(t.isWebGL2||!0===n.has("OES_texture_float_linear")?(r.rectAreaLTC1=be.LTC_FLOAT_1,r.rectAreaLTC2=be.LTC_FLOAT_2):!0===n.has("OES_texture_half_float_linear")?(r.rectAreaLTC1=be.LTC_HALF_1,r.rectAreaLTC2=be.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=h,r.ambient[1]=f,r.ambient[2]=m;const A=r.hash;(A.directionalLength!==p||A.pointLength!==g||A.spotLength!==v||A.rectAreaLength!==y||A.hemiLength!==_||A.numDirectionalShadows!==b||A.numPointShadows!==M||A.numSpotShadows!==x||A.numSpotMaps!==E)&&(r.directional.length=p,r.spot.length=v,r.rectArea.length=y,r.point.length=g,r.hemi.length=_,r.directionalShadow.length=b,r.directionalShadowMap.length=b,r.pointShadow.length=M,r.pointShadowMap.length=M,r.spotShadow.length=x,r.spotShadowMap.length=x,r.directionalShadowMatrix.length=b,r.pointShadowMatrix.length=M,r.spotLightMatrix.length=x+E-T,r.spotLightMap.length=E,r.numSpotLightShadowsWithMaps=T,A.directionalLength=p,A.pointLength=g,A.spotLength=v,A.rectAreaLength=y,A.hemiLength=_,A.numDirectionalShadows=b,A.numPointShadows=M,A.numSpotShadows=x,A.numSpotMaps=E,r.version=T9++)},setupView:function c(u,d){let h=0,f=0,m=0,p=0,g=0;const v=d.matrixWorldInverse;for(let y=0,_=u.length;y<_;y++){const b=u[y];if(b.isDirectionalLight){const M=r.directional[h];M.direction.setFromMatrixPosition(b.matrixWorld),s.setFromMatrixPosition(b.target.matrixWorld),M.direction.sub(s),M.direction.transformDirection(v),h++}else if(b.isSpotLight){const M=r.spot[m];M.position.setFromMatrixPosition(b.matrixWorld),M.position.applyMatrix4(v),M.direction.setFromMatrixPosition(b.matrixWorld),s.setFromMatrixPosition(b.target.matrixWorld),M.direction.sub(s),M.direction.transformDirection(v),m++}else if(b.isRectAreaLight){const M=r.rectArea[p];M.position.setFromMatrixPosition(b.matrixWorld),M.position.applyMatrix4(v),a.identity(),o.copy(b.matrixWorld),o.premultiply(v),a.extractRotation(o),M.halfWidth.set(.5*b.width,0,0),M.halfHeight.set(0,.5*b.height,0),M.halfWidth.applyMatrix4(a),M.halfHeight.applyMatrix4(a),p++}else if(b.isPointLight){const M=r.point[f];M.position.setFromMatrixPosition(b.matrixWorld),M.position.applyMatrix4(v),f++}else if(b.isHemisphereLight){const M=r.hemi[g];M.direction.setFromMatrixPosition(b.matrixWorld),M.direction.transformDirection(v),g++}}},state:r}}function rA(n,t){const e=new x9(n,t),i=[],r=[];return{init:function s(){i.length=0,r.length=0},state:{lightsArray:i,shadowsArray:r,lights:e},setupLights:function l(d){e.setup(i,d)},setupLightsView:function c(d){e.setupView(i,d)},pushLight:function o(d){i.push(d)},pushShadow:function a(d){r.push(d)}}}function w9(n,t){let e=new WeakMap;return{get:function i(s,o=0){const a=e.get(s);let l;return void 0===a?(l=new rA(n,t),e.set(s,[l])):o>=a.length?(l=new rA(n,t),a.push(l)):l=a[o],l},dispose:function r(){e=new WeakMap}}}class sA extends ld{constructor(t){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}class oA extends ld{constructor(t){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new S,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}const D9="void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",R9="uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}";function S9(n,t,e){let i=new m0;const r=new Q,s=new Q,o=new Gt,a=new sA({depthPacking:s5}),l=new oA,c={},u=e.maxTextureSize,d={0:Er,1:zo,2:Py},h=new _o({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Q},radius:{value:4}},vertexShader:D9,fragmentShader:R9}),f=h.clone();f.defines.HORIZONTAL_PASS=1;const m=new yt;m.setAttribute("position",new ni(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const p=new Ii(m,h),g=this;function v(b,M){const x=t.update(p);h.defines.VSM_SAMPLES!==b.blurSamples&&(h.defines.VSM_SAMPLES=b.blurSamples,f.defines.VSM_SAMPLES=b.blurSamples,h.needsUpdate=!0,f.needsUpdate=!0),null===b.mapPass&&(b.mapPass=new ta(r.x,r.y)),h.uniforms.shadow_pass.value=b.map.texture,h.uniforms.resolution.value=b.mapSize,h.uniforms.radius.value=b.radius,n.setRenderTarget(b.mapPass),n.clear(),n.renderBufferDirect(M,null,x,h,p,null),f.uniforms.shadow_pass.value=b.mapPass.texture,f.uniforms.resolution.value=b.mapSize,f.uniforms.radius.value=b.radius,n.setRenderTarget(b.map),n.clear(),n.renderBufferDirect(M,null,x,f,p,null)}function y(b,M,x,E,T,D){let A=null;const F=!0===x.isPointLight?b.customDistanceMaterial:b.customDepthMaterial;if(void 0!==F)A=F;else if(A=!0===x.isPointLight?l:a,n.localClippingEnabled&&!0===M.clipShadows&&Array.isArray(M.clippingPlanes)&&0!==M.clippingPlanes.length||M.displacementMap&&0!==M.displacementScale||M.alphaMap&&M.alphaTest>0||M.map&&M.alphaTest>0){const H=A.uuid,N=M.uuid;let O=c[H];void 0===O&&(O={},c[H]=O);let k=O[N];void 0===k&&(k=A.clone(),O[N]=k),A=k}return A.visible=M.visible,A.wireframe=M.wireframe,A.side=D===Zu?null!==M.shadowSide?M.shadowSide:M.side:null!==M.shadowSide?M.shadowSide:d[M.side],A.alphaMap=M.alphaMap,A.alphaTest=M.alphaTest,A.map=M.map,A.clipShadows=M.clipShadows,A.clippingPlanes=M.clippingPlanes,A.clipIntersection=M.clipIntersection,A.displacementMap=M.displacementMap,A.displacementScale=M.displacementScale,A.displacementBias=M.displacementBias,A.wireframeLinewidth=M.wireframeLinewidth,A.linewidth=M.linewidth,!0===x.isPointLight&&!0===A.isMeshDistanceMaterial&&(A.referencePosition.setFromMatrixPosition(x.matrixWorld),A.nearDistance=E,A.farDistance=T),A}function _(b,M,x,E,T){if(!1===b.visible)return;if(b.layers.test(M.layers)&&(b.isMesh||b.isLine||b.isPoints)&&(b.castShadow||b.receiveShadow&&T===Zu)&&(!b.frustumCulled||i.intersectsObject(b))){b.modelViewMatrix.multiplyMatrices(x.matrixWorldInverse,b.matrixWorld);const F=t.update(b),H=b.material;if(Array.isArray(H)){const N=F.groups;for(let O=0,k=N.length;O<k;O++){const $=N[O],ne=H[$.materialIndex];if(ne&&ne.visible){const q=y(b,ne,E,x.near,x.far,T);n.renderBufferDirect(x,null,F,q,b,$)}}}else if(H.visible){const N=y(b,H,E,x.near,x.far,T);n.renderBufferDirect(x,null,F,N,b,null)}}const A=b.children;for(let F=0,H=A.length;F<H;F++)_(A[F],M,x,E,T)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=NC,this.render=function(b,M,x){if(!1===g.enabled||!1===g.autoUpdate&&!1===g.needsUpdate||0===b.length)return;const E=n.getRenderTarget(),T=n.getActiveCubeFace(),D=n.getActiveMipmapLevel(),A=n.state;A.setBlending(co),A.buffers.color.setClear(1,1,1,1),A.buffers.depth.setTest(!0),A.setScissorTest(!1);for(let F=0,H=b.length;F<H;F++){const N=b[F],O=N.shadow;if(void 0===O){console.warn("THREE.WebGLShadowMap:",N,"has no shadow.");continue}if(!1===O.autoUpdate&&!1===O.needsUpdate)continue;r.copy(O.mapSize);const k=O.getFrameExtents();r.multiply(k),s.copy(O.mapSize),(r.x>u||r.y>u)&&(r.x>u&&(s.x=Math.floor(u/k.x),r.x=s.x*k.x,O.mapSize.x=s.x),r.y>u&&(s.y=Math.floor(u/k.y),r.y=s.y*k.y,O.mapSize.y=s.y)),null===O.map&&(O.map=new ta(r.x,r.y,this.type!==Zu?{minFilter:jn,magFilter:jn}:{}),O.map.texture.name=N.name+".shadowMap",O.camera.updateProjectionMatrix()),n.setRenderTarget(O.map),n.clear();const $=O.getViewportCount();for(let ne=0;ne<$;ne++){const q=O.getViewport(ne);o.set(s.x*q.x,s.y*q.y,s.x*q.z,s.y*q.w),A.viewport(o),O.updateMatrices(N,ne),i=O.getFrustum(),_(M,x,O.camera,N,this.type)}!0!==O.isPointLightShadow&&this.type===Zu&&v(O,x),O.needsUpdate=!1}g.needsUpdate=!1,n.setRenderTarget(E,T,D)}}function C9(n,t,e){const i=e.isWebGL2,a=new function r(){let P=!1;const z=new Gt;let le=null;const Ee=new Gt(0,0,0,0);return{setMask:function(Le){le!==Le&&!P&&(n.colorMask(Le,Le,Le,Le),le=Le)},setLocked:function(Le){P=Le},setClear:function(Le,qt,si,Mi,Aa){!0===Aa&&(Le*=Mi,qt*=Mi,si*=Mi),z.set(Le,qt,si,Mi),!1===Ee.equals(z)&&(n.clearColor(Le,qt,si,Mi),Ee.copy(z))},reset:function(){P=!1,le=null,Ee.set(-1,0,0,0)}}},l=new function s(){let P=!1,z=null,le=null,Ee=null;return{setTest:function(Le){Le?qe(2929):De(2929)},setMask:function(Le){z!==Le&&!P&&(n.depthMask(Le),z=Le)},setFunc:function(Le){if(le!==Le){switch(Le){case RW:n.depthFunc(512);break;case SW:n.depthFunc(519);break;case CW:n.depthFunc(513);break;case Oy:n.depthFunc(515);break;case EW:n.depthFunc(514);break;case AW:n.depthFunc(518);break;case IW:n.depthFunc(516);break;case PW:n.depthFunc(517);break;default:n.depthFunc(515)}le=Le}},setLocked:function(Le){P=Le},setClear:function(Le){Ee!==Le&&(n.clearDepth(Le),Ee=Le)},reset:function(){P=!1,z=null,le=null,Ee=null}}},c=new function o(){let P=!1,z=null,le=null,Ee=null,Le=null,qt=null,si=null,Mi=null,Aa=null;return{setTest:function(mn){P||(mn?qe(2960):De(2960))},setMask:function(mn){z!==mn&&!P&&(n.stencilMask(mn),z=mn)},setFunc:function(mn,$s,Fr){(le!==mn||Ee!==$s||Le!==Fr)&&(n.stencilFunc(mn,$s,Fr),le=mn,Ee=$s,Le=Fr)},setOp:function(mn,$s,Fr){(qt!==mn||si!==$s||Mi!==Fr)&&(n.stencilOp(mn,$s,Fr),qt=mn,si=$s,Mi=Fr)},setLocked:function(mn){P=mn},setClear:function(mn){Aa!==mn&&(n.clearStencil(mn),Aa=mn)},reset:function(){P=!1,z=null,le=null,Ee=null,Le=null,qt=null,si=null,Mi=null,Aa=null}}},u=new WeakMap,d=new WeakMap;let h={},f={},m=new WeakMap,p=[],g=null,v=!1,y=null,_=null,b=null,M=null,x=null,E=null,T=null,D=!1,A=null,F=null,H=null,N=null,O=null;const k=n.getParameter(35661);let $=!1,ne=0;const q=n.getParameter(7938);-1!==q.indexOf("WebGL")?(ne=parseFloat(/^WebGL (\d)/.exec(q)[1]),$=ne>=1):-1!==q.indexOf("OpenGL ES")&&(ne=parseFloat(/^OpenGL ES (\d)/.exec(q)[1]),$=ne>=2);let se=null,ee={};const V=n.getParameter(3088),G=n.getParameter(2978),me=(new Gt).fromArray(V),ce=(new Gt).fromArray(G);function _e(P,z,le){const Ee=new Uint8Array(4),Le=n.createTexture();n.bindTexture(P,Le),n.texParameteri(P,10241,9728),n.texParameteri(P,10240,9728);for(let qt=0;qt<le;qt++)n.texImage2D(z+qt,0,6408,1,1,0,6408,5121,Ee);return Le}const U={};function qe(P){!0!==h[P]&&(n.enable(P),h[P]=!0)}function De(P){!1!==h[P]&&(n.disable(P),h[P]=!1)}U[3553]=_e(3553,3553,1),U[34067]=_e(34067,34069,6),a.setClear(0,0,0,1),l.setClear(1),c.setClear(0),qe(2929),l.setFunc(Oy),Te(!1),et(OC),qe(2884),ve(co);const J={[Ll]:32774,[mW]:32778,[gW]:32779};if(i)J[jC]=32775,J[kC]=32776;else{const P=t.get("EXT_blend_minmax");null!==P&&(J[jC]=P.MIN_EXT,J[kC]=P.MAX_EXT)}const X={[_W]:0,[vW]:1,[yW]:768,[GC]:770,[DW]:776,[xW]:774,[TW]:772,[bW]:769,[VC]:771,[wW]:775,[MW]:773};function ve(P,z,le,Ee,Le,qt,si,Mi){if(P!==co){if(!1===v&&(qe(3042),v=!0),P===pW)Le=Le||z,qt=qt||le,si=si||Ee,(z!==_||Le!==x)&&(n.blendEquationSeparate(J[z],J[Le]),_=z,x=Le),(le!==b||Ee!==M||qt!==E||si!==T)&&(n.blendFuncSeparate(X[le],X[Ee],X[qt],X[si]),b=le,M=Ee,E=qt,T=si),y=P,D=!1;else if(P!==y||Mi!==D){if((_!==Ll||x!==Ll)&&(n.blendEquation(32774),_=Ll,x=Ll),Mi)switch(P){case Fl:n.blendFuncSeparate(1,771,1,771);break;case FC:n.blendFunc(1,1);break;case LC:n.blendFuncSeparate(0,769,0,1);break;case BC:n.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",P)}else switch(P){case Fl:n.blendFuncSeparate(770,771,1,771);break;case FC:n.blendFunc(770,1);break;case LC:n.blendFuncSeparate(0,769,0,1);break;case BC:n.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",P)}b=null,M=null,E=null,T=null,y=P,D=Mi}}else!0===v&&(De(3042),v=!1)}function Te(P){A!==P&&(n.frontFace(P?2304:2305),A=P)}function et(P){P!==dW?(qe(2884),P!==F&&n.cullFace(P===OC?1029:P===hW?1028:1032)):De(2884),F=P}function ke(P,z,le){P?(qe(32823),(N!==z||O!==le)&&(n.polygonOffset(z,le),N=z,O=le)):De(32823)}return{buffers:{color:a,depth:l,stencil:c},enable:qe,disable:De,bindFramebuffer:function Ke(P,z){return f[P]!==z&&(n.bindFramebuffer(P,z),f[P]=z,i&&(36009===P&&(f[36160]=z),36160===P&&(f[36009]=z)),!0)},drawBuffers:function we(P,z){let le=p,Ee=!1;if(P)if(le=m.get(z),void 0===le&&(le=[],m.set(z,le)),P.isWebGLMultipleRenderTargets){const Le=P.texture;if(le.length!==Le.length||36064!==le[0]){for(let qt=0,si=Le.length;qt<si;qt++)le[qt]=36064+qt;le.length=Le.length,Ee=!0}}else 36064!==le[0]&&(le[0]=36064,Ee=!0);else 1029!==le[0]&&(le[0]=1029,Ee=!0);Ee&&(e.isWebGL2?n.drawBuffers(le):t.get("WEBGL_draw_buffers").drawBuffersWEBGL(le))},useProgram:function lt(P){return g!==P&&(n.useProgram(P),g=P,!0)},setBlending:ve,setMaterial:function Ie(P,z){P.side===Py?De(2884):qe(2884);let le=P.side===Er;z&&(le=!le),Te(le),P.blending===Fl&&!1===P.transparent?ve(co):ve(P.blending,P.blendEquation,P.blendSrc,P.blendDst,P.blendEquationAlpha,P.blendSrcAlpha,P.blendDstAlpha,P.premultipliedAlpha),l.setFunc(P.depthFunc),l.setTest(P.depthTest),l.setMask(P.depthWrite),a.setMask(P.colorWrite);const Ee=P.stencilWrite;c.setTest(Ee),Ee&&(c.setMask(P.stencilWriteMask),c.setFunc(P.stencilFunc,P.stencilRef,P.stencilFuncMask),c.setOp(P.stencilFail,P.stencilZFail,P.stencilZPass)),ke(P.polygonOffset,P.polygonOffsetFactor,P.polygonOffsetUnits),!0===P.alphaToCoverage?qe(32926):De(32926)},setFlipSided:Te,setCullFace:et,setLineWidth:function He(P){P!==H&&($&&n.lineWidth(P),H=P)},setPolygonOffset:ke,setScissorTest:function Ot(P){P?qe(3089):De(3089)},activeTexture:function Ct(P){void 0===P&&(P=33984+k-1),se!==P&&(n.activeTexture(P),se=P)},bindTexture:function C(P,z,le){void 0===le&&(le=null===se?33984+k-1:se);let Ee=ee[le];void 0===Ee&&(Ee={type:void 0,texture:void 0},ee[le]=Ee),(Ee.type!==P||Ee.texture!==z)&&(se!==le&&(n.activeTexture(le),se=le),n.bindTexture(P,z||U[P]),Ee.type=P,Ee.texture=z)},unbindTexture:function w(){const P=ee[se];void 0!==P&&void 0!==P.type&&(n.bindTexture(P.type,null),P.type=void 0,P.texture=void 0)},compressedTexImage2D:function j(){try{n.compressedTexImage2D.apply(n,arguments)}catch(P){console.error("THREE.WebGLState:",P)}},compressedTexImage3D:function ae(){try{n.compressedTexImage3D.apply(n,arguments)}catch(P){console.error("THREE.WebGLState:",P)}},texImage2D:function Qe(){try{n.texImage2D.apply(n,arguments)}catch(P){console.error("THREE.WebGLState:",P)}},texImage3D:function Fe(){try{n.texImage3D.apply(n,arguments)}catch(P){console.error("THREE.WebGLState:",P)}},updateUBOMapping:function Lt(P,z){let le=d.get(z);void 0===le&&(le=new WeakMap,d.set(z,le));let Ee=le.get(P);void 0===Ee&&(Ee=n.getUniformBlockIndex(z,P.name),le.set(P,Ee))},uniformBlockBinding:function pn(P,z){const Ee=d.get(z).get(P);u.get(z)!==Ee&&(n.uniformBlockBinding(z,Ee,P.__bindingPointIndex),u.set(z,Ee))},texStorage2D:function Y(){try{n.texStorage2D.apply(n,arguments)}catch(P){console.error("THREE.WebGLState:",P)}},texStorage3D:function Ge(){try{n.texStorage3D.apply(n,arguments)}catch(P){console.error("THREE.WebGLState:",P)}},texSubImage2D:function fe(){try{n.texSubImage2D.apply(n,arguments)}catch(P){console.error("THREE.WebGLState:",P)}},texSubImage3D:function Me(){try{n.texSubImage3D.apply(n,arguments)}catch(P){console.error("THREE.WebGLState:",P)}},compressedTexSubImage2D:function Ze(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(P){console.error("THREE.WebGLState:",P)}},compressedTexSubImage3D:function Re(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(P){console.error("THREE.WebGLState:",P)}},scissor:function Ye(P){!1===me.equals(P)&&(n.scissor(P.x,P.y,P.z,P.w),me.copy(P))},viewport:function Ve(P){!1===ce.equals(P)&&(n.viewport(P.x,P.y,P.z,P.w),ce.copy(P))},reset:function ri(){n.disable(3042),n.disable(2884),n.disable(2929),n.disable(32823),n.disable(3089),n.disable(2960),n.disable(32926),n.blendEquation(32774),n.blendFunc(1,0),n.blendFuncSeparate(1,0,1,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(513),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(519,0,4294967295),n.stencilOp(7680,7680,7680),n.clearStencil(0),n.cullFace(1029),n.frontFace(2305),n.polygonOffset(0,0),n.activeTexture(33984),n.bindFramebuffer(36160,null),!0===i&&(n.bindFramebuffer(36009,null),n.bindFramebuffer(36008,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),h={},se=null,ee={},f={},m=new WeakMap,p=[],g=null,v=!1,y=null,_=null,b=null,M=null,x=null,E=null,T=null,D=!1,A=null,F=null,H=null,N=null,O=null,me.set(0,0,n.canvas.width,n.canvas.height),ce.set(0,0,n.canvas.width,n.canvas.height),a.reset(),l.reset(),c.reset()}}}function E9(n,t,e,i,r,s,o){const a=r.isWebGL2,l=r.maxTextures,c=r.maxCubemapSize,u=r.maxTextureSize,d=r.maxSamples,h=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,f=!(typeof navigator>"u")&&/OculusBrowser/g.test(navigator.userAgent),m=new WeakMap;let p;const g=new WeakMap;let v=!1;try{v=typeof OffscreenCanvas<"u"&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch{}function y(C,w){return v?new OffscreenCanvas(C,w):rd("canvas")}function _(C,w,j,ae){let fe=1;if((C.width>ae||C.height>ae)&&(fe=ae/Math.max(C.width,C.height)),fe<1||!0===w){if(typeof HTMLImageElement<"u"&&C instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&C instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&C instanceof ImageBitmap){const Me=w?up:Math.floor,Ze=Me(fe*C.width),Re=Me(fe*C.height);void 0===p&&(p=y(Ze,Re));const Y=j?y(Ze,Re):p;return Y.width=Ze,Y.height=Re,Y.getContext("2d").drawImage(C,0,0,Ze,Re),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+C.width+"x"+C.height+") to ("+Ze+"x"+Re+")."),Y}return"data"in C&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+C.width+"x"+C.height+")."),C}return C}function b(C){return Wy(C.width)&&Wy(C.height)}function x(C,w){return C.generateMipmaps&&w&&C.minFilter!==jn&&C.minFilter!==kn}function E(C){n.generateMipmap(C)}function T(C,w,j,ae,fe=!1){if(!1===a)return w;if(null!==C){if(void 0!==n[C])return n[C];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+C+"'")}let Me=w;return 6403===w&&(5126===j&&(Me=33326),5131===j&&(Me=33325),5121===j&&(Me=33321)),33319===w&&(5126===j&&(Me=33328),5131===j&&(Me=33327),5121===j&&(Me=33323)),6408===w&&(5126===j&&(Me=34836),5131===j&&(Me=34842),5121===j&&(Me=ae===ln&&!1===fe?35907:32856),32819===j&&(Me=32854),32820===j&&(Me=32855)),(33325===Me||33326===Me||33327===Me||33328===Me||34842===Me||34836===Me)&&t.get("EXT_color_buffer_float"),Me}function D(C,w,j){return!0===x(C,j)||C.isFramebufferTexture&&C.minFilter!==jn&&C.minFilter!==kn?Math.log2(Math.max(w.width,w.height))+1:void 0!==C.mipmaps&&C.mipmaps.length>0?C.mipmaps.length:C.isCompressedTexture&&Array.isArray(C.image)?w.mipmaps.length:1}function A(C){return C===jn||C===Fy||C===sp?9728:9729}function F(C){const w=C.target;w.removeEventListener("dispose",F),function N(C){const w=i.get(C);if(void 0===w.__webglInit)return;const j=C.source,ae=g.get(j);if(ae){const fe=ae[w.__cacheKey];fe.usedTimes--,0===fe.usedTimes&&O(C),0===Object.keys(ae).length&&g.delete(j)}i.remove(C)}(w),w.isVideoTexture&&m.delete(w)}function H(C){const w=C.target;w.removeEventListener("dispose",H),function k(C){const w=C.texture,j=i.get(C),ae=i.get(w);if(void 0!==ae.__webglTexture&&(n.deleteTexture(ae.__webglTexture),o.memory.textures--),C.depthTexture&&C.depthTexture.dispose(),C.isWebGLCubeRenderTarget)for(let fe=0;fe<6;fe++)n.deleteFramebuffer(j.__webglFramebuffer[fe]),j.__webglDepthbuffer&&n.deleteRenderbuffer(j.__webglDepthbuffer[fe]);else{if(n.deleteFramebuffer(j.__webglFramebuffer),j.__webglDepthbuffer&&n.deleteRenderbuffer(j.__webglDepthbuffer),j.__webglMultisampledFramebuffer&&n.deleteFramebuffer(j.__webglMultisampledFramebuffer),j.__webglColorRenderbuffer)for(let fe=0;fe<j.__webglColorRenderbuffer.length;fe++)j.__webglColorRenderbuffer[fe]&&n.deleteRenderbuffer(j.__webglColorRenderbuffer[fe]);j.__webglDepthRenderbuffer&&n.deleteRenderbuffer(j.__webglDepthRenderbuffer)}if(C.isWebGLMultipleRenderTargets)for(let fe=0,Me=w.length;fe<Me;fe++){const Ze=i.get(w[fe]);Ze.__webglTexture&&(n.deleteTexture(Ze.__webglTexture),o.memory.textures--),i.remove(w[fe])}i.remove(w),i.remove(C)}(w)}function O(C){const w=i.get(C);n.deleteTexture(w.__webglTexture),delete g.get(C.source)[w.__cacheKey],o.memory.textures--}let $=0;function ee(C,w){const j=i.get(C);if(C.isVideoTexture&&function Ot(C){const w=o.render.frame;m.get(C)!==w&&(m.set(C,w),C.update())}(C),!1===C.isRenderTargetTexture&&C.version>0&&j.__version!==C.version){const ae=C.image;if(null===ae)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==ae.complete)return void De(j,C,w);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}e.bindTexture(3553,j.__webglTexture,33984+w)}const ce={[ip]:10497,[Ei]:33071,[rp]:33648},_e={[jn]:9728,[Fy]:9984,[sp]:9986,[kn]:9729,[UC]:9985,[qo]:9987};function U(C,w,j){if(j?(n.texParameteri(C,10242,ce[w.wrapS]),n.texParameteri(C,10243,ce[w.wrapT]),(32879===C||35866===C)&&n.texParameteri(C,32882,ce[w.wrapR]),n.texParameteri(C,10240,_e[w.magFilter]),n.texParameteri(C,10241,_e[w.minFilter])):(n.texParameteri(C,10242,33071),n.texParameteri(C,10243,33071),(32879===C||35866===C)&&n.texParameteri(C,32882,33071),(w.wrapS!==Ei||w.wrapT!==Ei)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(C,10240,A(w.magFilter)),n.texParameteri(C,10241,A(w.minFilter)),w.minFilter!==jn&&w.minFilter!==kn&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===t.has("EXT_texture_filter_anisotropic")){const ae=t.get("EXT_texture_filter_anisotropic");if(w.magFilter===jn||w.minFilter!==sp&&w.minFilter!==qo||w.type===uo&&!1===t.has("OES_texture_float_linear")||!1===a&&w.type===ed&&!1===t.has("OES_texture_half_float_linear"))return;(w.anisotropy>1||i.get(w).__currentAnisotropy)&&(n.texParameterf(C,ae.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(w.anisotropy,r.getMaxAnisotropy())),i.get(w).__currentAnisotropy=w.anisotropy)}}function qe(C,w){let j=!1;void 0===C.__webglInit&&(C.__webglInit=!0,w.addEventListener("dispose",F));const ae=w.source;let fe=g.get(ae);void 0===fe&&(fe={},g.set(ae,fe));const Me=function se(C){const w=[];return w.push(C.wrapS),w.push(C.wrapT),w.push(C.wrapR||0),w.push(C.magFilter),w.push(C.minFilter),w.push(C.anisotropy),w.push(C.internalFormat),w.push(C.format),w.push(C.type),w.push(C.generateMipmaps),w.push(C.premultiplyAlpha),w.push(C.flipY),w.push(C.unpackAlignment),w.push(C.encoding),w.join()}(w);if(Me!==C.__cacheKey){void 0===fe[Me]&&(fe[Me]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,j=!0),fe[Me].usedTimes++;const Ze=fe[C.__cacheKey];void 0!==Ze&&(fe[C.__cacheKey].usedTimes--,0===Ze.usedTimes&&O(w)),C.__cacheKey=Me,C.__webglTexture=fe[Me].texture}return j}function De(C,w,j){let ae=3553;(w.isDataArrayTexture||w.isCompressedArrayTexture)&&(ae=35866),w.isData3DTexture&&(ae=32879);const fe=qe(C,w),Me=w.source;e.bindTexture(ae,C.__webglTexture,33984+j);const Ze=i.get(Me);if(Me.version!==Ze.__version||!0===fe){e.activeTexture(33984+j),n.pixelStorei(37440,w.flipY),n.pixelStorei(37441,w.premultiplyAlpha),n.pixelStorei(3317,w.unpackAlignment),n.pixelStorei(37443,0);const Re=function M(C){return!a&&(C.wrapS!==Ei||C.wrapT!==Ei||C.minFilter!==jn&&C.minFilter!==kn)}(w)&&!1===b(w.image);let Y=_(w.image,Re,!1,u);Y=Ct(w,Y);const Ge=b(Y)||a,Qe=s.convert(w.format,w.encoding);let Ve,Fe=s.convert(w.type),Ye=T(w.internalFormat,Qe,Fe,w.encoding,w.isVideoTexture);U(ae,w,Ge);const Lt=w.mipmaps,pn=a&&!0!==w.isVideoTexture,ri=void 0===Ze.__version||!0===fe,P=D(w,Y,Ge);if(w.isDepthTexture)Ye=6402,a?Ye=w.type===uo?36012:w.type===Xo?33190:w.type===Bl?35056:33189:w.type===uo&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),w.format===Yo&&6402===Ye&&w.type!==HC&&w.type!==Xo&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),w.type=Xo,Fe=s.convert(w.type)),w.format===jl&&6402===Ye&&(Ye=34041,w.type!==Bl&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),w.type=Bl,Fe=s.convert(w.type))),ri&&(pn?e.texStorage2D(3553,1,Ye,Y.width,Y.height):e.texImage2D(3553,0,Ye,Y.width,Y.height,0,Qe,Fe,null));else if(w.isDataTexture)if(Lt.length>0&&Ge){pn&&ri&&e.texStorage2D(3553,P,Ye,Lt[0].width,Lt[0].height);for(let z=0,le=Lt.length;z<le;z++)Ve=Lt[z],pn?e.texSubImage2D(3553,z,0,0,Ve.width,Ve.height,Qe,Fe,Ve.data):e.texImage2D(3553,z,Ye,Ve.width,Ve.height,0,Qe,Fe,Ve.data);w.generateMipmaps=!1}else pn?(ri&&e.texStorage2D(3553,P,Ye,Y.width,Y.height),e.texSubImage2D(3553,0,0,0,Y.width,Y.height,Qe,Fe,Y.data)):e.texImage2D(3553,0,Ye,Y.width,Y.height,0,Qe,Fe,Y.data);else if(w.isCompressedTexture)if(w.isCompressedArrayTexture){pn&&ri&&e.texStorage3D(35866,P,Ye,Lt[0].width,Lt[0].height,Y.depth);for(let z=0,le=Lt.length;z<le;z++)Ve=Lt[z],w.format!==Ar?null!==Qe?pn?e.compressedTexSubImage3D(35866,z,0,0,0,Ve.width,Ve.height,Y.depth,Qe,Ve.data,0,0):e.compressedTexImage3D(35866,z,Ye,Ve.width,Ve.height,Y.depth,0,Ve.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):pn?e.texSubImage3D(35866,z,0,0,0,Ve.width,Ve.height,Y.depth,Qe,Fe,Ve.data):e.texImage3D(35866,z,Ye,Ve.width,Ve.height,Y.depth,0,Qe,Fe,Ve.data)}else{pn&&ri&&e.texStorage2D(3553,P,Ye,Lt[0].width,Lt[0].height);for(let z=0,le=Lt.length;z<le;z++)Ve=Lt[z],w.format!==Ar?null!==Qe?pn?e.compressedTexSubImage2D(3553,z,0,0,Ve.width,Ve.height,Qe,Ve.data):e.compressedTexImage2D(3553,z,Ye,Ve.width,Ve.height,0,Ve.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):pn?e.texSubImage2D(3553,z,0,0,Ve.width,Ve.height,Qe,Fe,Ve.data):e.texImage2D(3553,z,Ye,Ve.width,Ve.height,0,Qe,Fe,Ve.data)}else if(w.isDataArrayTexture)pn?(ri&&e.texStorage3D(35866,P,Ye,Y.width,Y.height,Y.depth),e.texSubImage3D(35866,0,0,0,0,Y.width,Y.height,Y.depth,Qe,Fe,Y.data)):e.texImage3D(35866,0,Ye,Y.width,Y.height,Y.depth,0,Qe,Fe,Y.data);else if(w.isData3DTexture)pn?(ri&&e.texStorage3D(32879,P,Ye,Y.width,Y.height,Y.depth),e.texSubImage3D(32879,0,0,0,0,Y.width,Y.height,Y.depth,Qe,Fe,Y.data)):e.texImage3D(32879,0,Ye,Y.width,Y.height,Y.depth,0,Qe,Fe,Y.data);else if(w.isFramebufferTexture){if(ri)if(pn)e.texStorage2D(3553,P,Ye,Y.width,Y.height);else{let z=Y.width,le=Y.height;for(let Ee=0;Ee<P;Ee++)e.texImage2D(3553,Ee,Ye,z,le,0,Qe,Fe,null),z>>=1,le>>=1}}else if(Lt.length>0&&Ge){pn&&ri&&e.texStorage2D(3553,P,Ye,Lt[0].width,Lt[0].height);for(let z=0,le=Lt.length;z<le;z++)Ve=Lt[z],pn?e.texSubImage2D(3553,z,0,0,Qe,Fe,Ve):e.texImage2D(3553,z,Ye,Qe,Fe,Ve);w.generateMipmaps=!1}else pn?(ri&&e.texStorage2D(3553,P,Ye,Y.width,Y.height),e.texSubImage2D(3553,0,0,0,Qe,Fe,Y)):e.texImage2D(3553,0,Ye,Qe,Fe,Y);x(w,Ge)&&E(ae),Ze.__version=Me.version,w.onUpdate&&w.onUpdate(w)}C.__version=w.version}function we(C,w,j,ae,fe){const Me=s.convert(j.format,j.encoding),Ze=s.convert(j.type),Re=T(j.internalFormat,Me,Ze,j.encoding);i.get(w).__hasExternalTextures||(32879===fe||35866===fe?e.texImage3D(fe,0,Re,w.width,w.height,w.depth,0,Me,Ze,null):e.texImage2D(fe,0,Re,w.width,w.height,0,Me,Ze,null)),e.bindFramebuffer(36160,C),ke(w)?h.framebufferTexture2DMultisampleEXT(36160,ae,fe,i.get(j).__webglTexture,0,He(w)):(3553===fe||fe>=34069&&fe<=34074)&&n.framebufferTexture2D(36160,ae,fe,i.get(j).__webglTexture,0),e.bindFramebuffer(36160,null)}function lt(C,w,j){if(n.bindRenderbuffer(36161,C),w.depthBuffer&&!w.stencilBuffer){let ae=33189;if(j||ke(w)){const fe=w.depthTexture;fe&&fe.isDepthTexture&&(fe.type===uo?ae=36012:fe.type===Xo&&(ae=33190));const Me=He(w);ke(w)?h.renderbufferStorageMultisampleEXT(36161,Me,ae,w.width,w.height):n.renderbufferStorageMultisample(36161,Me,ae,w.width,w.height)}else n.renderbufferStorage(36161,ae,w.width,w.height);n.framebufferRenderbuffer(36160,36096,36161,C)}else if(w.depthBuffer&&w.stencilBuffer){const ae=He(w);j&&!1===ke(w)?n.renderbufferStorageMultisample(36161,ae,35056,w.width,w.height):ke(w)?h.renderbufferStorageMultisampleEXT(36161,ae,35056,w.width,w.height):n.renderbufferStorage(36161,34041,w.width,w.height),n.framebufferRenderbuffer(36160,33306,36161,C)}else{const ae=!0===w.isWebGLMultipleRenderTargets?w.texture:[w.texture];for(let fe=0;fe<ae.length;fe++){const Me=ae[fe],Ze=s.convert(Me.format,Me.encoding),Re=s.convert(Me.type),Y=T(Me.internalFormat,Ze,Re,Me.encoding),Ge=He(w);j&&!1===ke(w)?n.renderbufferStorageMultisample(36161,Ge,Y,w.width,w.height):ke(w)?h.renderbufferStorageMultisampleEXT(36161,Ge,Y,w.width,w.height):n.renderbufferStorage(36161,Y,w.width,w.height)}}n.bindRenderbuffer(36161,null)}function X(C){const w=i.get(C),j=!0===C.isWebGLCubeRenderTarget;if(C.depthTexture&&!w.__autoAllocateDepthBuffer){if(j)throw new Error("target.depthTexture not supported in Cube render targets");!function J(C,w){if(w&&w.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(36160,C),!w.depthTexture||!w.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(w.depthTexture).__webglTexture||w.depthTexture.image.width!==w.width||w.depthTexture.image.height!==w.height)&&(w.depthTexture.image.width=w.width,w.depthTexture.image.height=w.height,w.depthTexture.needsUpdate=!0),ee(w.depthTexture,0);const ae=i.get(w.depthTexture).__webglTexture,fe=He(w);if(w.depthTexture.format===Yo)ke(w)?h.framebufferTexture2DMultisampleEXT(36160,36096,3553,ae,0,fe):n.framebufferTexture2D(36160,36096,3553,ae,0);else{if(w.depthTexture.format!==jl)throw new Error("Unknown depthTexture format");ke(w)?h.framebufferTexture2DMultisampleEXT(36160,33306,3553,ae,0,fe):n.framebufferTexture2D(36160,33306,3553,ae,0)}}(w.__webglFramebuffer,C)}else if(j){w.__webglDepthbuffer=[];for(let ae=0;ae<6;ae++)e.bindFramebuffer(36160,w.__webglFramebuffer[ae]),w.__webglDepthbuffer[ae]=n.createRenderbuffer(),lt(w.__webglDepthbuffer[ae],C,!1)}else e.bindFramebuffer(36160,w.__webglFramebuffer),w.__webglDepthbuffer=n.createRenderbuffer(),lt(w.__webglDepthbuffer,C,!1);e.bindFramebuffer(36160,null)}function He(C){return Math.min(d,C.samples)}function ke(C){const w=i.get(C);return a&&C.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==w.__useRenderToTexture}function Ct(C,w){const j=C.encoding,ae=C.format,fe=C.type;return!0===C.isCompressedTexture||!0===C.isVideoTexture||C.format===Hy||j!==Jo&&(j===ln?!1===a?!0===t.has("EXT_sRGB")&&ae===Ar?(C.format=Hy,C.minFilter=kn,C.generateMipmaps=!1):w=_E.sRGBToLinear(w):(ae!==Ar||fe!==Ko)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",j)),w}this.allocateTextureUnit=function q(){const C=$;return C>=l&&console.warn("THREE.WebGLTextures: Trying to use "+C+" texture units while this GPU supports only "+l),$+=1,C},this.resetTextureUnits=function ne(){$=0},this.setTexture2D=ee,this.setTexture2DArray=function V(C,w){const j=i.get(C);C.version>0&&j.__version!==C.version?De(j,C,w):e.bindTexture(35866,j.__webglTexture,33984+w)},this.setTexture3D=function G(C,w){const j=i.get(C);C.version>0&&j.__version!==C.version?De(j,C,w):e.bindTexture(32879,j.__webglTexture,33984+w)},this.setTextureCube=function me(C,w){const j=i.get(C);C.version>0&&j.__version!==C.version?function Ke(C,w,j){if(6!==w.image.length)return;const ae=qe(C,w),fe=w.source;e.bindTexture(34067,C.__webglTexture,33984+j);const Me=i.get(fe);if(fe.version!==Me.__version||!0===ae){e.activeTexture(33984+j),n.pixelStorei(37440,w.flipY),n.pixelStorei(37441,w.premultiplyAlpha),n.pixelStorei(3317,w.unpackAlignment),n.pixelStorei(37443,0);const Ze=w.isCompressedTexture||w.image[0].isCompressedTexture,Re=w.image[0]&&w.image[0].isDataTexture,Y=[];for(let z=0;z<6;z++)Y[z]=Ze||Re?Re?w.image[z].image:w.image[z]:_(w.image[z],!1,!0,c),Y[z]=Ct(w,Y[z]);const Ge=Y[0],Qe=b(Ge)||a,Fe=s.convert(w.format,w.encoding),Ye=s.convert(w.type),Ve=T(w.internalFormat,Fe,Ye,w.encoding),Lt=a&&!0!==w.isVideoTexture,pn=void 0===Me.__version||!0===ae;let P,ri=D(w,Ge,Qe);if(U(34067,w,Qe),Ze){Lt&&pn&&e.texStorage2D(34067,ri,Ve,Ge.width,Ge.height);for(let z=0;z<6;z++){P=Y[z].mipmaps;for(let le=0;le<P.length;le++){const Ee=P[le];w.format!==Ar?null!==Fe?Lt?e.compressedTexSubImage2D(34069+z,le,0,0,Ee.width,Ee.height,Fe,Ee.data):e.compressedTexImage2D(34069+z,le,Ve,Ee.width,Ee.height,0,Ee.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Lt?e.texSubImage2D(34069+z,le,0,0,Ee.width,Ee.height,Fe,Ye,Ee.data):e.texImage2D(34069+z,le,Ve,Ee.width,Ee.height,0,Fe,Ye,Ee.data)}}}else{P=w.mipmaps,Lt&&pn&&(P.length>0&&ri++,e.texStorage2D(34067,ri,Ve,Y[0].width,Y[0].height));for(let z=0;z<6;z++)if(Re){Lt?e.texSubImage2D(34069+z,0,0,0,Y[z].width,Y[z].height,Fe,Ye,Y[z].data):e.texImage2D(34069+z,0,Ve,Y[z].width,Y[z].height,0,Fe,Ye,Y[z].data);for(let le=0;le<P.length;le++){const Le=P[le].image[z].image;Lt?e.texSubImage2D(34069+z,le+1,0,0,Le.width,Le.height,Fe,Ye,Le.data):e.texImage2D(34069+z,le+1,Ve,Le.width,Le.height,0,Fe,Ye,Le.data)}}else{Lt?e.texSubImage2D(34069+z,0,0,0,Fe,Ye,Y[z]):e.texImage2D(34069+z,0,Ve,Fe,Ye,Y[z]);for(let le=0;le<P.length;le++){const Ee=P[le];Lt?e.texSubImage2D(34069+z,le+1,0,0,Fe,Ye,Ee.image[z]):e.texImage2D(34069+z,le+1,Ve,Fe,Ye,Ee.image[z])}}}x(w,Qe)&&E(34067),Me.__version=fe.version,w.onUpdate&&w.onUpdate(w)}C.__version=w.version}(j,C,w):e.bindTexture(34067,j.__webglTexture,33984+w)},this.rebindTextures=function ve(C,w,j){const ae=i.get(C);void 0!==w&&we(ae.__webglFramebuffer,C,C.texture,36064,3553),void 0!==j&&X(C)},this.setupRenderTarget=function Ie(C){const w=C.texture,j=i.get(C),ae=i.get(w);C.addEventListener("dispose",H),!0!==C.isWebGLMultipleRenderTargets&&(void 0===ae.__webglTexture&&(ae.__webglTexture=n.createTexture()),ae.__version=w.version,o.memory.textures++);const fe=!0===C.isWebGLCubeRenderTarget,Me=!0===C.isWebGLMultipleRenderTargets,Ze=b(C)||a;if(fe){j.__webglFramebuffer=[];for(let Re=0;Re<6;Re++)j.__webglFramebuffer[Re]=n.createFramebuffer()}else{if(j.__webglFramebuffer=n.createFramebuffer(),Me)if(r.drawBuffers){const Re=C.texture;for(let Y=0,Ge=Re.length;Y<Ge;Y++){const Qe=i.get(Re[Y]);void 0===Qe.__webglTexture&&(Qe.__webglTexture=n.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&C.samples>0&&!1===ke(C)){const Re=Me?w:[w];j.__webglMultisampledFramebuffer=n.createFramebuffer(),j.__webglColorRenderbuffer=[],e.bindFramebuffer(36160,j.__webglMultisampledFramebuffer);for(let Y=0;Y<Re.length;Y++){const Ge=Re[Y];j.__webglColorRenderbuffer[Y]=n.createRenderbuffer(),n.bindRenderbuffer(36161,j.__webglColorRenderbuffer[Y]);const Qe=s.convert(Ge.format,Ge.encoding),Fe=s.convert(Ge.type),Ye=T(Ge.internalFormat,Qe,Fe,Ge.encoding,!0===C.isXRRenderTarget),Ve=He(C);n.renderbufferStorageMultisample(36161,Ve,Ye,C.width,C.height),n.framebufferRenderbuffer(36160,36064+Y,36161,j.__webglColorRenderbuffer[Y])}n.bindRenderbuffer(36161,null),C.depthBuffer&&(j.__webglDepthRenderbuffer=n.createRenderbuffer(),lt(j.__webglDepthRenderbuffer,C,!0)),e.bindFramebuffer(36160,null)}}if(fe){e.bindTexture(34067,ae.__webglTexture),U(34067,w,Ze);for(let Re=0;Re<6;Re++)we(j.__webglFramebuffer[Re],C,w,36064,34069+Re);x(w,Ze)&&E(34067),e.unbindTexture()}else if(Me){const Re=C.texture;for(let Y=0,Ge=Re.length;Y<Ge;Y++){const Qe=Re[Y],Fe=i.get(Qe);e.bindTexture(3553,Fe.__webglTexture),U(3553,Qe,Ze),we(j.__webglFramebuffer,C,Qe,36064+Y,3553),x(Qe,Ze)&&E(3553)}e.unbindTexture()}else{let Re=3553;(C.isWebGL3DRenderTarget||C.isWebGLArrayRenderTarget)&&(a?Re=C.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),e.bindTexture(Re,ae.__webglTexture),U(Re,w,Ze),we(j.__webglFramebuffer,C,w,36064,Re),x(w,Ze)&&E(Re),e.unbindTexture()}C.depthBuffer&&X(C)},this.updateRenderTargetMipmap=function Te(C){const w=b(C)||a,j=!0===C.isWebGLMultipleRenderTargets?C.texture:[C.texture];for(let ae=0,fe=j.length;ae<fe;ae++){const Me=j[ae];if(x(Me,w)){const Ze=C.isWebGLCubeRenderTarget?34067:3553,Re=i.get(Me).__webglTexture;e.bindTexture(Ze,Re),E(Ze),e.unbindTexture()}}},this.updateMultisampleRenderTarget=function et(C){if(a&&C.samples>0&&!1===ke(C)){const w=C.isWebGLMultipleRenderTargets?C.texture:[C.texture],j=C.width,ae=C.height;let fe=16384;const Me=[],Ze=C.stencilBuffer?33306:36096,Re=i.get(C),Y=!0===C.isWebGLMultipleRenderTargets;if(Y)for(let Ge=0;Ge<w.length;Ge++)e.bindFramebuffer(36160,Re.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064+Ge,36161,null),e.bindFramebuffer(36160,Re.__webglFramebuffer),n.framebufferTexture2D(36009,36064+Ge,3553,null,0);e.bindFramebuffer(36008,Re.__webglMultisampledFramebuffer),e.bindFramebuffer(36009,Re.__webglFramebuffer);for(let Ge=0;Ge<w.length;Ge++){Me.push(36064+Ge),C.depthBuffer&&Me.push(Ze);const Qe=void 0!==Re.__ignoreDepthValues&&Re.__ignoreDepthValues;if(!1===Qe&&(C.depthBuffer&&(fe|=256),C.stencilBuffer&&(fe|=1024)),Y&&n.framebufferRenderbuffer(36008,36064,36161,Re.__webglColorRenderbuffer[Ge]),!0===Qe&&(n.invalidateFramebuffer(36008,[Ze]),n.invalidateFramebuffer(36009,[Ze])),Y){const Fe=i.get(w[Ge]).__webglTexture;n.framebufferTexture2D(36009,36064,3553,Fe,0)}n.blitFramebuffer(0,0,j,ae,0,0,j,ae,fe,9728),f&&n.invalidateFramebuffer(36008,Me)}if(e.bindFramebuffer(36008,null),e.bindFramebuffer(36009,null),Y)for(let Ge=0;Ge<w.length;Ge++){e.bindFramebuffer(36160,Re.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064+Ge,36161,Re.__webglColorRenderbuffer[Ge]);const Qe=i.get(w[Ge]).__webglTexture;e.bindFramebuffer(36160,Re.__webglFramebuffer),n.framebufferTexture2D(36009,36064+Ge,3553,Qe,0)}e.bindFramebuffer(36009,Re.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=X,this.setupFrameBufferTexture=we,this.useMultisampledRTT=ke}function A9(n,t,e){const i=e.isWebGL2;return{convert:function r(s,o=null){let a;if(s===Ko)return 5121;if(s===HW)return 32819;if(s===zW)return 32820;if(s===GW)return 5120;if(s===VW)return 5122;if(s===HC)return 5123;if(s===UW)return 5124;if(s===Xo)return 5125;if(s===uo)return 5126;if(s===ed)return i?5131:(a=t.get("OES_texture_half_float"),null!==a?a.HALF_FLOAT_OES:null);if(s===WW)return 6406;if(s===Ar)return 6408;if(s===qW)return 6409;if(s===KW)return 6410;if(s===Yo)return 6402;if(s===jl)return 34041;if(s===$W)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(s===Hy)return a=t.get("EXT_sRGB"),null!==a?a.SRGB_ALPHA_EXT:null;if(s===XW)return 6403;if(s===YW)return 36244;if(s===JW)return 33319;if(s===ZW)return 33320;if(s===QW)return 36249;if(s===Ly||s===By||s===jy||s===ky)if(o===ln){if(a=t.get("WEBGL_compressed_texture_s3tc_srgb"),null===a)return null;if(s===Ly)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===By)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===jy)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===ky)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(a=t.get("WEBGL_compressed_texture_s3tc"),null===a)return null;if(s===Ly)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===By)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===jy)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===ky)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(s===zC||s===WC||s===$C||s===qC){if(a=t.get("WEBGL_compressed_texture_pvrtc"),null===a)return null;if(s===zC)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===WC)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===$C)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===qC)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(s===e5)return a=t.get("WEBGL_compressed_texture_etc1"),null!==a?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===KC||s===XC){if(a=t.get("WEBGL_compressed_texture_etc"),null===a)return null;if(s===KC)return o===ln?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(s===XC)return o===ln?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}if(s===YC||s===JC||s===ZC||s===QC||s===eE||s===tE||s===nE||s===iE||s===rE||s===sE||s===oE||s===aE||s===lE||s===cE){if(a=t.get("WEBGL_compressed_texture_astc"),null===a)return null;if(s===YC)return o===ln?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===JC)return o===ln?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===ZC)return o===ln?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===QC)return o===ln?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===eE)return o===ln?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===tE)return o===ln?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===nE)return o===ln?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===iE)return o===ln?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===rE)return o===ln?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===sE)return o===ln?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===oE)return o===ln?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===aE)return o===ln?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===lE)return o===ln?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===cE)return o===ln?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}if(s===uE){if(a=t.get("EXT_texture_compression_bptc"),null===a)return null;if(s===uE)return o===ln?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}return s===Bl?i?34042:(a=t.get("WEBGL_depth_texture"),null!==a?a.UNSIGNED_INT_24_8_WEBGL:null):void 0!==n[s]?n[s]:null}}}class I9 extends di{constructor(t=[]){super(),this.isArrayCamera=!0,this.cameras=t}}class pd extends $i{constructor(){super(),this.isGroup=!0,this.type="Group"}}const P9={type:"move"};class M0{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new pd,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new pd,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new S,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new S),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new pd,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new S,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new S),this._grip}dispatchEvent(t){return null!==this._targetRay&&this._targetRay.dispatchEvent(t),null!==this._grip&&this._grip.dispatchEvent(t),null!==this._hand&&this._hand.dispatchEvent(t),this}connect(t){if(t&&t.hand){const e=this._hand;if(e)for(const i of t.hand.values())this._getHandJoint(e,i)}return this.dispatchEvent({type:"connected",data:t}),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(t,e,i){let r=null,s=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(t&&"visible-blurred"!==e.session.visibilityState){if(c&&t.hand){o=!0;for(const p of t.hand.values()){const g=e.getJointPose(p,i),v=this._getHandJoint(c,p);null!==g&&(v.matrix.fromArray(g.transform.matrix),v.matrix.decompose(v.position,v.rotation,v.scale),v.jointRadius=g.radius),v.visible=null!==g}const h=c.joints["index-finger-tip"].position.distanceTo(c.joints["thumb-tip"].position),f=.02,m=.005;c.inputState.pinching&&h>f+m?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!c.inputState.pinching&&h<=f-m&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else null!==l&&t.gripSpace&&(s=e.getPose(t.gripSpace,i),null!==s&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));null!==a&&(r=e.getPose(t.targetRaySpace,i),null===r&&null!==s&&(r=s),null!==r&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(P9)))}return null!==a&&(a.visible=null!==r),null!==l&&(l.visible=null!==s),null!==c&&(c.visible=null!==o),this}_getHandJoint(t,e){if(void 0===t.joints[e.jointName]){const i=new pd;i.matrixAutoUpdate=!1,i.visible=!1,t.joints[e.jointName]=i,t.add(i)}return t.joints[e.jointName]}}class O9 extends ho{constructor(t,e,i,r,s,o,a,l,c,u){if((u=void 0!==u?u:Yo)!==Yo&&u!==jl)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===i&&u===Yo&&(i=Xo),void 0===i&&u===jl&&(i=Bl),super(null,r,s,o,a,l,u,i,c),this.isDepthTexture=!0,this.image={width:t,height:e},this.magFilter=void 0!==a?a:jn,this.minFilter=void 0!==l?l:jn,this.flipY=!1,this.generateMipmaps=!1}}class N9 extends Vl{constructor(t,e){super();const i=this;let r=null,s=1,o=null,a="local-floor",l=null,c=null,u=null,d=null,h=null,f=null;const m=e.getContextAttributes();let p=null,g=null;const v=[],y=[],_=new Set,b=new Map,M=new di;M.layers.enable(1),M.viewport=new Gt;const x=new di;x.layers.enable(2),x.viewport=new Gt;const E=[M,x],T=new I9;T.layers.enable(1),T.layers.enable(2);let D=null,A=null;function F(V){const G=y.indexOf(V.inputSource);if(-1===G)return;const me=v[G];void 0!==me&&me.dispatchEvent({type:V.type,data:V.inputSource})}function H(){r.removeEventListener("select",F),r.removeEventListener("selectstart",F),r.removeEventListener("selectend",F),r.removeEventListener("squeeze",F),r.removeEventListener("squeezestart",F),r.removeEventListener("squeezeend",F),r.removeEventListener("end",H),r.removeEventListener("inputsourceschange",N);for(let V=0;V<v.length;V++){const G=y[V];null!==G&&(y[V]=null,v[V].disconnect(G))}D=null,A=null,t.setRenderTarget(p),h=null,d=null,u=null,r=null,g=null,ee.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}function N(V){for(let G=0;G<V.removed.length;G++){const me=V.removed[G],ce=y.indexOf(me);ce>=0&&(y[ce]=null,v[ce].disconnect(me))}for(let G=0;G<V.added.length;G++){const me=V.added[G];let ce=y.indexOf(me);if(-1===ce){for(let U=0;U<v.length;U++){if(U>=y.length){y.push(me),ce=U;break}if(null===y[U]){y[U]=me,ce=U;break}}if(-1===ce)break}const _e=v[ce];_e&&_e.connect(me)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(V){let G=v[V];return void 0===G&&(G=new M0,v[V]=G),G.getTargetRaySpace()},this.getControllerGrip=function(V){let G=v[V];return void 0===G&&(G=new M0,v[V]=G),G.getGripSpace()},this.getHand=function(V){let G=v[V];return void 0===G&&(G=new M0,v[V]=G),G.getHandSpace()},this.setFramebufferScaleFactor=function(V){s=V,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(V){a=V,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||o},this.setReferenceSpace=function(V){l=V},this.getBaseLayer=function(){return null!==d?d:h},this.getBinding=function(){return u},this.getFrame=function(){return f},this.getSession=function(){return r},this.setSession=function(){var V=function uW(n){return function(){var t=this,e=arguments;return new Promise(function(i,r){var s=n.apply(t,e);function o(l){PC(s,i,r,o,a,"next",l)}function a(l){PC(s,i,r,o,a,"throw",l)}o(void 0)})}}(function*(G){if(r=G,null!==r){if(p=t.getRenderTarget(),r.addEventListener("select",F),r.addEventListener("selectstart",F),r.addEventListener("selectend",F),r.addEventListener("squeeze",F),r.addEventListener("squeezestart",F),r.addEventListener("squeezeend",F),r.addEventListener("end",H),r.addEventListener("inputsourceschange",N),!0!==m.xrCompatible&&(yield e.makeXRCompatible()),void 0===r.renderState.layers||!1===t.capabilities.isWebGL2)h=new XRWebGLLayer(r,e,{antialias:void 0!==r.renderState.layers||m.antialias,alpha:m.alpha,depth:m.depth,stencil:m.stencil,framebufferScaleFactor:s}),r.updateRenderState({baseLayer:h}),g=new ta(h.framebufferWidth,h.framebufferHeight,{format:Ar,type:Ko,encoding:t.outputEncoding,stencilBuffer:m.stencil});else{let me=null,ce=null,_e=null;m.depth&&(_e=m.stencil?35056:33190,me=m.stencil?jl:Yo,ce=m.stencil?Bl:Xo);const U={colorFormat:32856,depthFormat:_e,scaleFactor:s};u=new XRWebGLBinding(r,e),d=u.createProjectionLayer(U),r.updateRenderState({layers:[d]}),g=new ta(d.textureWidth,d.textureHeight,{format:Ar,type:Ko,depthTexture:new O9(d.textureWidth,d.textureHeight,ce,void 0,void 0,void 0,void 0,void 0,void 0,me),stencilBuffer:m.stencil,encoding:t.outputEncoding,samples:m.antialias?4:0}),t.properties.get(g).__ignoreDepthValues=d.ignoreDepthValues}g.isXRRenderTarget=!0,this.setFoveation(1),l=null,o=yield r.requestReferenceSpace(a),ee.setContext(r),ee.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}});return function(G){return V.apply(this,arguments)}}();const O=new S,k=new S;function ne(V,G){null===G?V.matrixWorld.copy(V.matrix):V.matrixWorld.multiplyMatrices(G.matrixWorld,V.matrix),V.matrixWorldInverse.copy(V.matrixWorld).invert()}this.updateCamera=function(V){if(null===r)return;T.near=x.near=M.near=V.near,T.far=x.far=M.far=V.far,(D!==T.near||A!==T.far)&&(r.updateRenderState({depthNear:T.near,depthFar:T.far}),D=T.near,A=T.far);const G=V.parent,me=T.cameras;ne(T,G);for(let _e=0;_e<me.length;_e++)ne(me[_e],G);T.matrixWorld.decompose(T.position,T.quaternion,T.scale),V.matrix.copy(T.matrix),V.matrix.decompose(V.position,V.quaternion,V.scale);const ce=V.children;for(let _e=0,U=ce.length;_e<U;_e++)ce[_e].updateMatrixWorld(!0);2===me.length?function $(V,G,me){O.setFromMatrixPosition(G.matrixWorld),k.setFromMatrixPosition(me.matrixWorld);const ce=O.distanceTo(k),_e=G.projectionMatrix.elements,U=me.projectionMatrix.elements,qe=_e[14]/(_e[10]-1),De=_e[14]/(_e[10]+1),Ke=(_e[9]+1)/_e[5],we=(_e[9]-1)/_e[5],lt=(_e[8]-1)/_e[0],J=(U[8]+1)/U[0],X=qe*lt,ve=qe*J,Ie=ce/(-lt+J),Te=Ie*-lt;G.matrixWorld.decompose(V.position,V.quaternion,V.scale),V.translateX(Te),V.translateZ(Ie),V.matrixWorld.compose(V.position,V.quaternion,V.scale),V.matrixWorldInverse.copy(V.matrixWorld).invert();const et=qe+Ie,He=De+Ie;V.projectionMatrix.makePerspective(X-Te,ve+(ce-Te),Ke*De/He*et,we*De/He*et,et,He)}(T,M,x):T.projectionMatrix.copy(M.projectionMatrix)},this.getCamera=function(){return T},this.getFoveation=function(){return null!==d?d.fixedFoveation:null!==h?h.fixedFoveation:void 0},this.setFoveation=function(V){null!==d&&(d.fixedFoveation=V),null!==h&&void 0!==h.fixedFoveation&&(h.fixedFoveation=V)},this.getPlanes=function(){return _};let q=null;const ee=new PE;ee.setAnimationLoop(function se(V,G){if(c=G.getViewerPose(l||o),f=G,null!==c){const me=c.views;null!==h&&(t.setRenderTargetFramebuffer(g,h.framebuffer),t.setRenderTarget(g));let ce=!1;me.length!==T.cameras.length&&(T.cameras.length=0,ce=!0);for(let _e=0;_e<me.length;_e++){const U=me[_e];let qe=null;if(null!==h)qe=h.getViewport(U);else{const Ke=u.getViewSubImage(d,U);qe=Ke.viewport,0===_e&&(t.setRenderTargetTextures(g,Ke.colorTexture,d.ignoreDepthValues?void 0:Ke.depthStencilTexture),t.setRenderTarget(g))}let De=E[_e];void 0===De&&(De=new di,De.layers.enable(_e),De.viewport=new Gt,E[_e]=De),De.matrix.fromArray(U.transform.matrix),De.projectionMatrix.fromArray(U.projectionMatrix),De.viewport.set(qe.x,qe.y,qe.width,qe.height),0===_e&&T.matrix.copy(De.matrix),!0===ce&&T.cameras.push(De)}}for(let me=0;me<v.length;me++){const ce=y[me],_e=v[me];null!==ce&&void 0!==_e&&_e.update(ce,G,l||o)}if(q&&q(V,G),G.detectedPlanes){i.dispatchEvent({type:"planesdetected",data:G.detectedPlanes});let me=null;for(const ce of _)G.detectedPlanes.has(ce)||(null===me&&(me=[]),me.push(ce));if(null!==me)for(const ce of me)_.delete(ce),b.delete(ce),i.dispatchEvent({type:"planeremoved",data:ce});for(const ce of G.detectedPlanes)if(_.has(ce)){const _e=b.get(ce);ce.lastChangedTime>_e&&(b.set(ce,ce.lastChangedTime),i.dispatchEvent({type:"planechanged",data:ce}))}else _.add(ce),b.set(ce,G.lastChangedTime),i.dispatchEvent({type:"planeadded",data:ce})}f=null}),this.setAnimationLoop=function(V){q=V},this.dispose=function(){}}}function F9(n,t){function r(p,g){p.opacity.value=g.opacity,g.color&&p.diffuse.value.copy(g.color),g.emissive&&p.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(p.map.value=g.map),g.alphaMap&&(p.alphaMap.value=g.alphaMap),g.bumpMap&&(p.bumpMap.value=g.bumpMap,p.bumpScale.value=g.bumpScale,g.side===Er&&(p.bumpScale.value*=-1)),g.displacementMap&&(p.displacementMap.value=g.displacementMap,p.displacementScale.value=g.displacementScale,p.displacementBias.value=g.displacementBias),g.emissiveMap&&(p.emissiveMap.value=g.emissiveMap),g.normalMap&&(p.normalMap.value=g.normalMap,p.normalScale.value.copy(g.normalScale),g.side===Er&&p.normalScale.value.negate()),g.specularMap&&(p.specularMap.value=g.specularMap),g.alphaTest>0&&(p.alphaTest.value=g.alphaTest);const v=t.get(g).envMap;if(v&&(p.envMap.value=v,p.flipEnvMap.value=v.isCubeTexture&&!1===v.isRenderTargetTexture?-1:1,p.reflectivity.value=g.reflectivity,p.ior.value=g.ior,p.refractionRatio.value=g.refractionRatio),g.lightMap){p.lightMap.value=g.lightMap;const b=!0!==n.physicallyCorrectLights?Math.PI:1;p.lightMapIntensity.value=g.lightMapIntensity*b}let y,_;g.aoMap&&(p.aoMap.value=g.aoMap,p.aoMapIntensity.value=g.aoMapIntensity),g.map?y=g.map:g.specularMap?y=g.specularMap:g.displacementMap?y=g.displacementMap:g.normalMap?y=g.normalMap:g.bumpMap?y=g.bumpMap:g.roughnessMap?y=g.roughnessMap:g.metalnessMap?y=g.metalnessMap:g.alphaMap?y=g.alphaMap:g.emissiveMap?y=g.emissiveMap:g.clearcoatMap?y=g.clearcoatMap:g.clearcoatNormalMap?y=g.clearcoatNormalMap:g.clearcoatRoughnessMap?y=g.clearcoatRoughnessMap:g.iridescenceMap?y=g.iridescenceMap:g.iridescenceThicknessMap?y=g.iridescenceThicknessMap:g.specularIntensityMap?y=g.specularIntensityMap:g.specularColorMap?y=g.specularColorMap:g.transmissionMap?y=g.transmissionMap:g.thicknessMap?y=g.thicknessMap:g.sheenColorMap?y=g.sheenColorMap:g.sheenRoughnessMap&&(y=g.sheenRoughnessMap),void 0!==y&&(y.isWebGLRenderTarget&&(y=y.texture),!0===y.matrixAutoUpdate&&y.updateMatrix(),p.uvTransform.value.copy(y.matrix)),g.aoMap?_=g.aoMap:g.lightMap&&(_=g.lightMap),void 0!==_&&(_.isWebGLRenderTarget&&(_=_.texture),!0===_.matrixAutoUpdate&&_.updateMatrix(),p.uv2Transform.value.copy(_.matrix))}return{refreshFogUniforms:function e(p,g){g.color.getRGB(p.fogColor.value,IE(n)),g.isFog?(p.fogNear.value=g.near,p.fogFar.value=g.far):g.isFogExp2&&(p.fogDensity.value=g.density)},refreshMaterialUniforms:function i(p,g,v,y,_){g.isMeshBasicMaterial||g.isMeshLambertMaterial?r(p,g):g.isMeshToonMaterial?(r(p,g),function u(p,g){g.gradientMap&&(p.gradientMap.value=g.gradientMap)}(p,g)):g.isMeshPhongMaterial?(r(p,g),function c(p,g){p.specular.value.copy(g.specular),p.shininess.value=Math.max(g.shininess,1e-4)}(p,g)):g.isMeshStandardMaterial?(r(p,g),function d(p,g){p.roughness.value=g.roughness,p.metalness.value=g.metalness,g.roughnessMap&&(p.roughnessMap.value=g.roughnessMap),g.metalnessMap&&(p.metalnessMap.value=g.metalnessMap),t.get(g).envMap&&(p.envMapIntensity.value=g.envMapIntensity)}(p,g),g.isMeshPhysicalMaterial&&function h(p,g,v){p.ior.value=g.ior,g.sheen>0&&(p.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),p.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(p.sheenColorMap.value=g.sheenColorMap),g.sheenRoughnessMap&&(p.sheenRoughnessMap.value=g.sheenRoughnessMap)),g.clearcoat>0&&(p.clearcoat.value=g.clearcoat,p.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(p.clearcoatMap.value=g.clearcoatMap),g.clearcoatRoughnessMap&&(p.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap),g.clearcoatNormalMap&&(p.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),p.clearcoatNormalMap.value=g.clearcoatNormalMap,g.side===Er&&p.clearcoatNormalScale.value.negate())),g.iridescence>0&&(p.iridescence.value=g.iridescence,p.iridescenceIOR.value=g.iridescenceIOR,p.iridescenceThicknessMinimum.value=g.iridescenceThicknessRange[0],p.iridescenceThicknessMaximum.value=g.iridescenceThicknessRange[1],g.iridescenceMap&&(p.iridescenceMap.value=g.iridescenceMap),g.iridescenceThicknessMap&&(p.iridescenceThicknessMap.value=g.iridescenceThicknessMap)),g.transmission>0&&(p.transmission.value=g.transmission,p.transmissionSamplerMap.value=v.texture,p.transmissionSamplerSize.value.set(v.width,v.height),g.transmissionMap&&(p.transmissionMap.value=g.transmissionMap),p.thickness.value=g.thickness,g.thicknessMap&&(p.thicknessMap.value=g.thicknessMap),p.attenuationDistance.value=g.attenuationDistance,p.attenuationColor.value.copy(g.attenuationColor)),p.specularIntensity.value=g.specularIntensity,p.specularColor.value.copy(g.specularColor),g.specularIntensityMap&&(p.specularIntensityMap.value=g.specularIntensityMap),g.specularColorMap&&(p.specularColorMap.value=g.specularColorMap)}(p,g,_)):g.isMeshMatcapMaterial?(r(p,g),function f(p,g){g.matcap&&(p.matcap.value=g.matcap)}(p,g)):g.isMeshDepthMaterial?r(p,g):g.isMeshDistanceMaterial?(r(p,g),function m(p,g){p.referencePosition.value.copy(g.referencePosition),p.nearDistance.value=g.nearDistance,p.farDistance.value=g.farDistance}(p,g)):g.isMeshNormalMaterial?r(p,g):g.isLineBasicMaterial?(function s(p,g){p.diffuse.value.copy(g.color),p.opacity.value=g.opacity}(p,g),g.isLineDashedMaterial&&function o(p,g){p.dashSize.value=g.dashSize,p.totalSize.value=g.dashSize+g.gapSize,p.scale.value=g.scale}(p,g)):g.isPointsMaterial?function a(p,g,v,y){let _;p.diffuse.value.copy(g.color),p.opacity.value=g.opacity,p.size.value=g.size*v,p.scale.value=.5*y,g.map&&(p.map.value=g.map),g.alphaMap&&(p.alphaMap.value=g.alphaMap),g.alphaTest>0&&(p.alphaTest.value=g.alphaTest),g.map?_=g.map:g.alphaMap&&(_=g.alphaMap),void 0!==_&&(!0===_.matrixAutoUpdate&&_.updateMatrix(),p.uvTransform.value.copy(_.matrix))}(p,g,v,y):g.isSpriteMaterial?function l(p,g){let v;p.diffuse.value.copy(g.color),p.opacity.value=g.opacity,p.rotation.value=g.rotation,g.map&&(p.map.value=g.map),g.alphaMap&&(p.alphaMap.value=g.alphaMap),g.alphaTest>0&&(p.alphaTest.value=g.alphaTest),g.map?v=g.map:g.alphaMap&&(v=g.alphaMap),void 0!==v&&(!0===v.matrixAutoUpdate&&v.updateMatrix(),p.uvTransform.value.copy(v.matrix))}(p,g):g.isShadowMaterial?(p.color.value.copy(g.color),p.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}}}function L9(n,t,e,i){let r={},s={},o=[];const a=e.isWebGL2?n.getParameter(35375):0;function f(y,_,b){const M=y.value;if(void 0===b[_]){if("number"==typeof M)b[_]=M;else{const x=Array.isArray(M)?M:[M],E=[];for(let T=0;T<x.length;T++)E.push(x[T].clone());b[_]=E}return!0}if("number"==typeof M){if(b[_]!==M)return b[_]=M,!0}else{const x=Array.isArray(b[_])?b[_]:[b[_]],E=Array.isArray(M)?M:[M];for(let T=0;T<x.length;T++){const D=x[T];if(!1===D.equals(E[T]))return D.copy(E[T]),!0}}return!1}function p(y){const _={boundary:0,storage:0};return"number"==typeof y?(_.boundary=4,_.storage=4):y.isVector2?(_.boundary=8,_.storage=8):y.isVector3||y.isColor?(_.boundary=16,_.storage=12):y.isVector4?(_.boundary=16,_.storage=16):y.isMatrix3?(_.boundary=48,_.storage=48):y.isMatrix4?(_.boundary=64,_.storage=64):y.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",y),_}function g(y){const _=y.target;_.removeEventListener("dispose",g);const b=o.indexOf(_.__bindingPointIndex);o.splice(b,1),n.deleteBuffer(r[_.id]),delete r[_.id],delete s[_.id]}return{bind:function l(y,_){i.uniformBlockBinding(y,_.program)},update:function c(y,_){let b=r[y.id];void 0===b&&(function m(y){const _=y.uniforms;let b=0;let x=0;for(let E=0,T=_.length;E<T;E++){const D=_[E],A={boundary:0,storage:0},F=Array.isArray(D.value)?D.value:[D.value];for(let H=0,N=F.length;H<N;H++){const k=p(F[H]);A.boundary+=k.boundary,A.storage+=k.storage}D.__data=new Float32Array(A.storage/Float32Array.BYTES_PER_ELEMENT),D.__offset=b,E>0&&(x=b%16,0!==x&&16-x-A.boundary<0&&(b+=16-x,D.__offset=b)),b+=A.storage}x=b%16,x>0&&(b+=16-x),y.__size=b,y.__cache={}}(y),b=function u(y){const _=function d(){for(let y=0;y<a;y++)if(-1===o.indexOf(y))return o.push(y),y;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();y.__bindingPointIndex=_;const b=n.createBuffer(),M=y.__size,x=y.usage;return n.bindBuffer(35345,b),n.bufferData(35345,M,x),n.bindBuffer(35345,null),n.bindBufferBase(35345,_,b),b}(y),r[y.id]=b,y.addEventListener("dispose",g)),i.updateUBOMapping(y,_.program);const x=t.render.frame;s[y.id]!==x&&(function h(y){const b=y.uniforms,M=y.__cache;n.bindBuffer(35345,r[y.id]);for(let x=0,E=b.length;x<E;x++){const T=b[x];if(!0===f(T,x,M)){const D=T.__offset,A=Array.isArray(T.value)?T.value:[T.value];let F=0;for(let H=0;H<A.length;H++){const N=A[H],O=p(N);"number"==typeof N?(T.__data[0]=N,n.bufferSubData(35345,D+F,T.__data)):N.isMatrix3?(T.__data[0]=N.elements[0],T.__data[1]=N.elements[1],T.__data[2]=N.elements[2],T.__data[3]=N.elements[0],T.__data[4]=N.elements[3],T.__data[5]=N.elements[4],T.__data[6]=N.elements[5],T.__data[7]=N.elements[0],T.__data[8]=N.elements[6],T.__data[9]=N.elements[7],T.__data[10]=N.elements[8],T.__data[11]=N.elements[0]):(N.toArray(T.__data,F),F+=O.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(35345,D,T.__data)}}n.bindBuffer(35345,null)}(y),s[y.id]=x)},dispose:function v(){for(const y in r)n.deleteBuffer(r[y]);o=[],r={},s={}}}}function aA(n={}){this.isWebGLRenderer=!0;const t=void 0!==n.canvas?n.canvas:function B9(){const n=rd("canvas");return n.style.display="block",n}(),e=void 0!==n.context?n.context:null,i=void 0===n.depth||n.depth,r=void 0===n.stencil||n.stencil,s=void 0!==n.antialias&&n.antialias,o=void 0===n.premultipliedAlpha||n.premultipliedAlpha,a=void 0!==n.preserveDrawingBuffer&&n.preserveDrawingBuffer,l=void 0!==n.powerPreference?n.powerPreference:"default",c=void 0!==n.failIfMajorPerformanceCaveat&&n.failIfMajorPerformanceCaveat;let u;u=null!==e?e.getContextAttributes().alpha:void 0!==n.alpha&&n.alpha;let d=null,h=null;const f=[],m=[];this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=Jo,this.physicallyCorrectLights=!1,this.toneMapping=Fs,this.toneMappingExposure=1;const p=this;let g=!1,v=0,y=0,_=null,b=-1,M=null;const x=new Gt,E=new Gt;let T=null,D=t.width,A=t.height,F=1,H=null,N=null;const O=new Gt(0,0,D,A),k=new Gt(0,0,D,A);let $=!1;const ne=new m0;let q=!1,se=!1,ee=null;const V=new dt,G=new Q,me=new S,ce={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function _e(){return null===_?F:1}let De,Ke,we,lt,J,X,ve,Ie,Te,et,He,ke,Ot,Ct,C,w,j,ae,fe,Me,Ze,Re,Y,Ge,U=e;function qe(R,B){for(let W=0;W<R.length;W++){const K=t.getContext(R[W],B);if(null!==K)return K}return null}try{const R={alpha:!0,depth:i,stencil:r,antialias:s,premultipliedAlpha:o,preserveDrawingBuffer:a,powerPreference:l,failIfMajorPerformanceCaveat:c};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${Iy}`),t.addEventListener("webglcontextlost",Ye,!1),t.addEventListener("webglcontextrestored",Ve,!1),t.addEventListener("webglcontextcreationerror",Lt,!1),null===U){const B=["webgl2","webgl","experimental-webgl"];if(!0===p.isWebGL1Renderer&&B.shift(),U=qe(B,R),null===U)throw qe(B)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===U.getShaderPrecisionFormat&&(U.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(R){throw console.error("THREE.WebGLRenderer: "+R.message),R}function Qe(){De=new Y$(U),Ke=new z$(U,De,n),De.init(Ke),Re=new A9(U,De,Ke),we=new C9(U,De,Ke),lt=new Q$,J=new g9,X=new E9(U,De,we,J,Ke,Re,lt),ve=new $$(p),Ie=new X$(p),Te=new U5(U,Ke),Y=new U$(U,De,Te,Ke),et=new J$(U,Te,lt,Y),He=new i6(U,et,Te,lt),fe=new n6(U,Ke,X),w=new W$(J),ke=new m9(p,ve,Ie,De,Ke,Y,w),Ot=new F9(p,J),Ct=new v9,C=new w9(De,Ke),ae=new V$(p,ve,Ie,we,He,u,o),j=new S9(p,He,Ke),Ge=new L9(U,lt,Ke,we),Me=new H$(U,De,lt,Ke),Ze=new Z$(U,De,lt,Ke),lt.programs=ke.programs,p.capabilities=Ke,p.extensions=De,p.properties=J,p.renderLists=Ct,p.shadowMap=j,p.state=we,p.info=lt}Qe();const Fe=new N9(p,U);function Ye(R){R.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),g=!0}function Ve(){console.log("THREE.WebGLRenderer: Context Restored."),g=!1;const R=lt.autoReset,B=j.enabled,W=j.autoUpdate,L=j.needsUpdate,K=j.type;Qe(),lt.autoReset=R,j.enabled=B,j.autoUpdate=W,j.needsUpdate=L,j.type=K}function Lt(R){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",R.statusMessage)}function pn(R){const B=R.target;B.removeEventListener("dispose",pn),function ri(R){(function P(R){const B=J.get(R).programs;void 0!==B&&(B.forEach(function(W){ke.releaseProgram(W)}),R.isShaderMaterial&&ke.releaseShaderCache(R))})(R),J.remove(R)}(B)}this.xr=Fe,this.getContext=function(){return U},this.getContextAttributes=function(){return U.getContextAttributes()},this.forceContextLoss=function(){const R=De.get("WEBGL_lose_context");R&&R.loseContext()},this.forceContextRestore=function(){const R=De.get("WEBGL_lose_context");R&&R.restoreContext()},this.getPixelRatio=function(){return F},this.setPixelRatio=function(R){void 0!==R&&(F=R,this.setSize(D,A,!1))},this.getSize=function(R){return R.set(D,A)},this.setSize=function(R,B,W){Fe.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(D=R,A=B,t.width=Math.floor(R*F),t.height=Math.floor(B*F),!1!==W&&(t.style.width=R+"px",t.style.height=B+"px"),this.setViewport(0,0,R,B))},this.getDrawingBufferSize=function(R){return R.set(D*F,A*F).floor()},this.setDrawingBufferSize=function(R,B,W){D=R,A=B,F=W,t.width=Math.floor(R*W),t.height=Math.floor(B*W),this.setViewport(0,0,R,B)},this.getCurrentViewport=function(R){return R.copy(x)},this.getViewport=function(R){return R.copy(O)},this.setViewport=function(R,B,W,L){R.isVector4?O.set(R.x,R.y,R.z,R.w):O.set(R,B,W,L),we.viewport(x.copy(O).multiplyScalar(F).floor())},this.getScissor=function(R){return R.copy(k)},this.setScissor=function(R,B,W,L){R.isVector4?k.set(R.x,R.y,R.z,R.w):k.set(R,B,W,L),we.scissor(E.copy(k).multiplyScalar(F).floor())},this.getScissorTest=function(){return $},this.setScissorTest=function(R){we.setScissorTest($=R)},this.setOpaqueSort=function(R){H=R},this.setTransparentSort=function(R){N=R},this.getClearColor=function(R){return R.copy(ae.getClearColor())},this.setClearColor=function(){ae.setClearColor.apply(ae,arguments)},this.getClearAlpha=function(){return ae.getClearAlpha()},this.setClearAlpha=function(){ae.setClearAlpha.apply(ae,arguments)},this.clear=function(R=!0,B=!0,W=!0){let L=0;R&&(L|=16384),B&&(L|=256),W&&(L|=1024),U.clear(L)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Ye,!1),t.removeEventListener("webglcontextrestored",Ve,!1),t.removeEventListener("webglcontextcreationerror",Lt,!1),Ct.dispose(),C.dispose(),J.dispose(),ve.dispose(),Ie.dispose(),He.dispose(),Y.dispose(),Ge.dispose(),ke.dispose(),Fe.dispose(),Fe.removeEventListener("sessionstart",Ee),Fe.removeEventListener("sessionend",Le),ee&&(ee.dispose(),ee=null),qt.stop()},this.renderBufferDirect=function(R,B,W,L,K,ze){null===B&&(B=ce);const at=K.isMesh&&K.matrixWorld.determinant()<0,_t=function uee(R,B,W,L,K){!0!==B.isScene&&(B=ce),X.resetTextureUnits();const ze=B.fog,_t=null===_?p.outputEncoding:!0===_.isXRRenderTarget?_.texture.encoding:Jo,bt=(L.isMeshStandardMaterial?Ie:ve).get(L.envMap||(L.isMeshStandardMaterial?B.environment:null)),Bt=!0===L.vertexColors&&!!W.attributes.color&&4===W.attributes.color.itemSize,Et=!!L.normalMap&&!!W.attributes.tangent,At=!!W.morphAttributes.position,Vn=!!W.morphAttributes.normal,gr=!!W.morphAttributes.color,qs=L.toneMapped?p.toneMapping:Fs,Ia=W.morphAttributes.position||W.morphAttributes.normal||W.morphAttributes.color,Un=void 0!==Ia?Ia.length:0,It=J.get(L),dT=h.state.lights;!0!==q||!0!==se&&R===M||w.setState(L,R,R===M&&L.id===b);let oi=!1;L.version===It.__version?(It.needsLights&&It.lightsStateVersion!==dT.state.version||It.outputEncoding!==_t||K.isInstancedMesh&&!1===It.instancing||!K.isInstancedMesh&&!0===It.instancing||K.isSkinnedMesh&&!1===It.skinning||!K.isSkinnedMesh&&!0===It.skinning||It.envMap!==bt||!0===L.fog&&It.fog!==ze||void 0!==It.numClippingPlanes&&(It.numClippingPlanes!==w.numPlanes||It.numIntersection!==w.numIntersection)||It.vertexAlphas!==Bt||It.vertexTangents!==Et||It.morphTargets!==At||It.morphNormals!==Vn||It.morphColors!==gr||It.toneMapping!==qs||!0===Ke.isWebGL2&&It.morphTargetsCount!==Un)&&(oi=!0):(oi=!0,It.__version=L.version);let Pa=It.currentProgram;!0===oi&&(Pa=Fr(L,B,K));let gN=!1,Kd=!1,hT=!1;const Fi=Pa.getUniforms(),Oa=It.uniforms;if(we.useProgram(Pa.program)&&(gN=!0,Kd=!0,hT=!0),L.id!==b&&(b=L.id,Kd=!0),gN||M!==R){if(Fi.setValue(U,"projectionMatrix",R.projectionMatrix),Ke.logarithmicDepthBuffer&&Fi.setValue(U,"logDepthBufFC",2/(Math.log(R.far+1)/Math.LN2)),M!==R&&(M=R,Kd=!0,hT=!0),L.isShaderMaterial||L.isMeshPhongMaterial||L.isMeshToonMaterial||L.isMeshStandardMaterial||L.envMap){const _r=Fi.map.cameraPosition;void 0!==_r&&_r.setValue(U,me.setFromMatrixPosition(R.matrixWorld))}(L.isMeshPhongMaterial||L.isMeshToonMaterial||L.isMeshLambertMaterial||L.isMeshBasicMaterial||L.isMeshStandardMaterial||L.isShaderMaterial)&&Fi.setValue(U,"isOrthographic",!0===R.isOrthographicCamera),(L.isMeshPhongMaterial||L.isMeshToonMaterial||L.isMeshLambertMaterial||L.isMeshBasicMaterial||L.isMeshStandardMaterial||L.isShaderMaterial||L.isShadowMaterial||K.isSkinnedMesh)&&Fi.setValue(U,"viewMatrix",R.matrixWorldInverse)}if(K.isSkinnedMesh){Fi.setOptional(U,K,"bindMatrix"),Fi.setOptional(U,K,"bindMatrixInverse");const _r=K.skeleton;_r&&(Ke.floatVertexTextures?(null===_r.boneTexture&&_r.computeBoneTexture(),Fi.setValue(U,"boneTexture",_r.boneTexture,X),Fi.setValue(U,"boneTextureSize",_r.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const fT=W.morphAttributes;if((void 0!==fT.position||void 0!==fT.normal||void 0!==fT.color&&!0===Ke.isWebGL2)&&fe.update(K,W,L,Pa),(Kd||It.receiveShadow!==K.receiveShadow)&&(It.receiveShadow=K.receiveShadow,Fi.setValue(U,"receiveShadow",K.receiveShadow)),L.isMeshGouraudMaterial&&null!==L.envMap&&(Oa.envMap.value=bt,Oa.flipEnvMap.value=bt.isCubeTexture&&!1===bt.isRenderTargetTexture?-1:1),Kd&&(Fi.setValue(U,"toneMappingExposure",p.toneMappingExposure),It.needsLights&&function dee(R,B){R.ambientLightColor.needsUpdate=B,R.lightProbe.needsUpdate=B,R.directionalLights.needsUpdate=B,R.directionalLightShadows.needsUpdate=B,R.pointLights.needsUpdate=B,R.pointLightShadows.needsUpdate=B,R.spotLights.needsUpdate=B,R.spotLightShadows.needsUpdate=B,R.rectAreaLights.needsUpdate=B,R.hemisphereLights.needsUpdate=B}(Oa,hT),ze&&!0===L.fog&&Ot.refreshFogUniforms(Oa,ze),Ot.refreshMaterialUniforms(Oa,L,F,A,ee),Fp.upload(U,It.uniformsList,Oa,X)),L.isShaderMaterial&&!0===L.uniformsNeedUpdate&&(Fp.upload(U,It.uniformsList,Oa,X),L.uniformsNeedUpdate=!1),L.isSpriteMaterial&&Fi.setValue(U,"center",K.center),Fi.setValue(U,"modelViewMatrix",K.modelViewMatrix),Fi.setValue(U,"normalMatrix",K.normalMatrix),Fi.setValue(U,"modelMatrix",K.matrixWorld),L.isShaderMaterial||L.isRawShaderMaterial){const _r=L.uniformsGroups;for(let pT=0,fee=_r.length;pT<fee;pT++)if(Ke.isWebGL2){const _N=_r[pT];Ge.update(_N,Pa),Ge.bind(_N,Pa)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Pa}(R,B,W,L,K);we.setMaterial(L,at);let bt=W.index,Bt=1;!0===L.wireframe&&(bt=et.getWireframeAttribute(W),Bt=2);const Et=W.drawRange,At=W.attributes.position;let Vn=Et.start*Bt,gr=(Et.start+Et.count)*Bt;null!==ze&&(Vn=Math.max(Vn,ze.start*Bt),gr=Math.min(gr,(ze.start+ze.count)*Bt)),null!==bt?(Vn=Math.max(Vn,0),gr=Math.min(gr,bt.count)):null!=At&&(Vn=Math.max(Vn,0),gr=Math.min(gr,At.count));const qs=gr-Vn;if(qs<0||qs===1/0)return;Y.setup(K,L,_t,W,bt);let Ia,Un=Me;if(null!==bt&&(Ia=Te.get(bt),Un=Ze,Un.setIndex(Ia)),K.isMesh)!0===L.wireframe?(we.setLineWidth(L.wireframeLinewidth*_e()),Un.setMode(1)):Un.setMode(4);else if(K.isLine){let It=L.linewidth;void 0===It&&(It=1),we.setLineWidth(It*_e()),Un.setMode(K.isLineSegments?1:K.isLineLoop?2:3)}else K.isPoints?Un.setMode(0):K.isSprite&&Un.setMode(4);if(K.isInstancedMesh)Un.renderInstances(Vn,qs,K.count);else if(W.isInstancedBufferGeometry){const dT=Math.min(W.instanceCount,void 0!==W._maxInstanceCount?W._maxInstanceCount:1/0);Un.renderInstances(Vn,qs,dT)}else Un.render(Vn,qs)},this.compile=function(R,B){function W(L,K,ze){!0===L.transparent&&L.side===Qf?(L.side=Er,L.needsUpdate=!0,Fr(L,K,ze),L.side=zo,L.needsUpdate=!0,Fr(L,K,ze),L.side=Qf):Fr(L,K,ze)}h=C.get(R),h.init(),m.push(h),R.traverseVisible(function(L){L.isLight&&L.layers.test(B.layers)&&(h.pushLight(L),L.castShadow&&h.pushShadow(L))}),h.setupLights(p.physicallyCorrectLights),R.traverse(function(L){const K=L.material;if(K)if(Array.isArray(K))for(let ze=0;ze<K.length;ze++)W(K[ze],R,L);else W(K,R,L)}),m.pop(),h=null};let z=null;function Ee(){qt.stop()}function Le(){qt.start()}const qt=new PE;function si(R,B,W,L){if(!1===R.visible)return;if(R.layers.test(B.layers))if(R.isGroup)W=R.renderOrder;else if(R.isLOD)!0===R.autoUpdate&&R.update(B);else if(R.isLight)h.pushLight(R),R.castShadow&&h.pushShadow(R);else if(R.isSprite){if(!R.frustumCulled||ne.intersectsSprite(R)){L&&me.setFromMatrixPosition(R.matrixWorld).applyMatrix4(V);const at=He.update(R),_t=R.material;_t.visible&&d.push(R,at,_t,W,me.z,null)}}else if((R.isMesh||R.isLine||R.isPoints)&&(R.isSkinnedMesh&&R.skeleton.frame!==lt.render.frame&&(R.skeleton.update(),R.skeleton.frame=lt.render.frame),!R.frustumCulled||ne.intersectsObject(R))){L&&me.setFromMatrixPosition(R.matrixWorld).applyMatrix4(V);const at=He.update(R),_t=R.material;if(Array.isArray(_t)){const bt=at.groups;for(let Bt=0,Et=bt.length;Bt<Et;Bt++){const At=bt[Bt],Vn=_t[At.materialIndex];Vn&&Vn.visible&&d.push(R,at,Vn,W,me.z,At)}}else _t.visible&&d.push(R,at,_t,W,me.z,null)}const ze=R.children;for(let at=0,_t=ze.length;at<_t;at++)si(ze[at],B,W,L)}function Mi(R,B,W,L){const K=R.opaque,ze=R.transmissive,at=R.transparent;h.setupLightsView(W),ze.length>0&&function Aa(R,B,W){const L=Ke.isWebGL2;null===ee&&(ee=new ta(1,1,{generateMipmaps:!0,type:De.has("EXT_color_buffer_half_float")?ed:Ko,minFilter:qo,samples:L&&!0===s?4:0})),p.getDrawingBufferSize(G),L?ee.setSize(G.x,G.y):ee.setSize(up(G.x),up(G.y));const K=p.getRenderTarget();p.setRenderTarget(ee),p.clear();const ze=p.toneMapping;p.toneMapping=Fs,mn(R,B,W),p.toneMapping=ze,X.updateMultisampleRenderTarget(ee),X.updateRenderTargetMipmap(ee),p.setRenderTarget(K)}(K,B,W),L&&we.viewport(x.copy(L)),K.length>0&&mn(K,B,W),ze.length>0&&mn(ze,B,W),at.length>0&&mn(at,B,W),we.buffers.depth.setTest(!0),we.buffers.depth.setMask(!0),we.buffers.color.setMask(!0),we.setPolygonOffset(!1)}function mn(R,B,W){const L=!0===B.isScene?B.overrideMaterial:null;for(let K=0,ze=R.length;K<ze;K++){const at=R[K],_t=at.object,bt=at.geometry,Bt=null===L?at.material:L,Et=at.group;_t.layers.test(W.layers)&&$s(_t,B,W,bt,Bt,Et)}}function $s(R,B,W,L,K,ze){R.onBeforeRender(p,B,W,L,K,ze),R.modelViewMatrix.multiplyMatrices(W.matrixWorldInverse,R.matrixWorld),R.normalMatrix.getNormalMatrix(R.modelViewMatrix),K.onBeforeRender(p,B,W,L,R,ze),!0===K.transparent&&K.side===Qf?(K.side=Er,K.needsUpdate=!0,p.renderBufferDirect(W,B,L,K,R,ze),K.side=zo,K.needsUpdate=!0,p.renderBufferDirect(W,B,L,K,R,ze),K.side=Qf):p.renderBufferDirect(W,B,L,K,R,ze),R.onAfterRender(p,B,W,L,K,ze)}function Fr(R,B,W){!0!==B.isScene&&(B=ce);const L=J.get(R),K=h.state.lights,at=K.state.version,_t=ke.getParameters(R,K.state,h.state.shadowsArray,B,W),bt=ke.getProgramCacheKey(_t);let Bt=L.programs;L.environment=R.isMeshStandardMaterial?B.environment:null,L.fog=B.fog,L.envMap=(R.isMeshStandardMaterial?Ie:ve).get(R.envMap||L.environment),void 0===Bt&&(R.addEventListener("dispose",pn),Bt=new Map,L.programs=Bt);let Et=Bt.get(bt);if(void 0!==Et){if(L.currentProgram===Et&&L.lightsStateVersion===at)return mN(R,_t),Et}else _t.uniforms=ke.getUniforms(R),R.onBuild(W,_t,p),R.onBeforeCompile(_t,p),Et=ke.acquireProgram(_t,bt),Bt.set(bt,Et),L.uniforms=_t.uniforms;const At=L.uniforms;(!R.isShaderMaterial&&!R.isRawShaderMaterial||!0===R.clipping)&&(At.clippingPlanes=w.uniform),mN(R,_t),L.needsLights=function hee(R){return R.isMeshLambertMaterial||R.isMeshToonMaterial||R.isMeshPhongMaterial||R.isMeshStandardMaterial||R.isShadowMaterial||R.isShaderMaterial&&!0===R.lights}(R),L.lightsStateVersion=at,L.needsLights&&(At.ambientLightColor.value=K.state.ambient,At.lightProbe.value=K.state.probe,At.directionalLights.value=K.state.directional,At.directionalLightShadows.value=K.state.directionalShadow,At.spotLights.value=K.state.spot,At.spotLightShadows.value=K.state.spotShadow,At.rectAreaLights.value=K.state.rectArea,At.ltc_1.value=K.state.rectAreaLTC1,At.ltc_2.value=K.state.rectAreaLTC2,At.pointLights.value=K.state.point,At.pointLightShadows.value=K.state.pointShadow,At.hemisphereLights.value=K.state.hemi,At.directionalShadowMap.value=K.state.directionalShadowMap,At.directionalShadowMatrix.value=K.state.directionalShadowMatrix,At.spotShadowMap.value=K.state.spotShadowMap,At.spotLightMatrix.value=K.state.spotLightMatrix,At.spotLightMap.value=K.state.spotLightMap,At.pointShadowMap.value=K.state.pointShadowMap,At.pointShadowMatrix.value=K.state.pointShadowMatrix);const Vn=Et.getUniforms(),gr=Fp.seqWithValue(Vn.seq,At);return L.currentProgram=Et,L.uniformsList=gr,Et}function mN(R,B){const W=J.get(R);W.outputEncoding=B.outputEncoding,W.instancing=B.instancing,W.skinning=B.skinning,W.morphTargets=B.morphTargets,W.morphNormals=B.morphNormals,W.morphColors=B.morphColors,W.morphTargetsCount=B.morphTargetsCount,W.numClippingPlanes=B.numClippingPlanes,W.numIntersection=B.numClipIntersection,W.vertexAlphas=B.vertexAlphas,W.vertexTangents=B.vertexTangents,W.toneMapping=B.toneMapping}qt.setAnimationLoop(function le(R){z&&z(R)}),typeof self<"u"&&qt.setContext(self),this.setAnimationLoop=function(R){z=R,Fe.setAnimationLoop(R),null===R?qt.stop():qt.start()},Fe.addEventListener("sessionstart",Ee),Fe.addEventListener("sessionend",Le),this.render=function(R,B){if(void 0===B||!0===B.isCamera){if(!0!==g){if(!0===R.matrixWorldAutoUpdate&&R.updateMatrixWorld(),null===B.parent&&!0===B.matrixWorldAutoUpdate&&B.updateMatrixWorld(),!0===Fe.enabled&&!0===Fe.isPresenting&&(!0===Fe.cameraAutoUpdate&&Fe.updateCamera(B),B=Fe.getCamera()),!0===R.isScene&&R.onBeforeRender(p,R,B,_),h=C.get(R,m.length),h.init(),m.push(h),V.multiplyMatrices(B.projectionMatrix,B.matrixWorldInverse),ne.setFromProjectionMatrix(V),se=this.localClippingEnabled,q=w.init(this.clippingPlanes,se,B),d=Ct.get(R,f.length),d.init(),f.push(d),si(R,B,0,p.sortObjects),d.finish(),!0===p.sortObjects&&d.sort(H,N),!0===q&&w.beginShadows(),j.render(h.state.shadowsArray,R,B),!0===q&&w.endShadows(),!0===this.info.autoReset&&this.info.reset(),ae.render(d,R),h.setupLights(p.physicallyCorrectLights),B.isArrayCamera){const L=B.cameras;for(let K=0,ze=L.length;K<ze;K++){const at=L[K];Mi(d,R,at,at.viewport)}}else Mi(d,R,B);null!==_&&(X.updateMultisampleRenderTarget(_),X.updateRenderTargetMipmap(_)),!0===R.isScene&&R.onAfterRender(p,R,B),Y.resetDefaultState(),b=-1,M=null,m.pop(),h=m.length>0?m[m.length-1]:null,f.pop(),d=f.length>0?f[f.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return v},this.getActiveMipmapLevel=function(){return y},this.getRenderTarget=function(){return _},this.setRenderTargetTextures=function(R,B,W){J.get(R.texture).__webglTexture=B,J.get(R.depthTexture).__webglTexture=W;const L=J.get(R);L.__hasExternalTextures=!0,L.__hasExternalTextures&&(L.__autoAllocateDepthBuffer=void 0===W,L.__autoAllocateDepthBuffer||!0===De.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),L.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(R,B){const W=J.get(R);W.__webglFramebuffer=B,W.__useDefaultFramebuffer=void 0===B},this.setRenderTarget=function(R,B=0,W=0){_=R,v=B,y=W;let L=!0,K=null,ze=!1,at=!1;if(R){const bt=J.get(R);void 0!==bt.__useDefaultFramebuffer?(we.bindFramebuffer(36160,null),L=!1):void 0===bt.__webglFramebuffer?X.setupRenderTarget(R):bt.__hasExternalTextures&&X.rebindTextures(R,J.get(R.texture).__webglTexture,J.get(R.depthTexture).__webglTexture);const Bt=R.texture;(Bt.isData3DTexture||Bt.isDataArrayTexture||Bt.isCompressedArrayTexture)&&(at=!0);const Et=J.get(R).__webglFramebuffer;R.isWebGLCubeRenderTarget?(K=Et[B],ze=!0):K=Ke.isWebGL2&&R.samples>0&&!1===X.useMultisampledRTT(R)?J.get(R).__webglMultisampledFramebuffer:Et,x.copy(R.viewport),E.copy(R.scissor),T=R.scissorTest}else x.copy(O).multiplyScalar(F).floor(),E.copy(k).multiplyScalar(F).floor(),T=$;if(we.bindFramebuffer(36160,K)&&Ke.drawBuffers&&L&&we.drawBuffers(R,K),we.viewport(x),we.scissor(E),we.setScissorTest(T),ze){const bt=J.get(R.texture);U.framebufferTexture2D(36160,36064,34069+B,bt.__webglTexture,W)}else if(at){const bt=J.get(R.texture);U.framebufferTextureLayer(36160,36064,bt.__webglTexture,W||0,B||0)}b=-1},this.readRenderTargetPixels=function(R,B,W,L,K,ze,at){if(!R||!R.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let _t=J.get(R).__webglFramebuffer;if(R.isWebGLCubeRenderTarget&&void 0!==at&&(_t=_t[at]),_t){we.bindFramebuffer(36160,_t);try{const bt=R.texture,Bt=bt.format,Et=bt.type;if(Bt!==Ar&&Re.convert(Bt)!==U.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const At=Et===ed&&(De.has("EXT_color_buffer_half_float")||Ke.isWebGL2&&De.has("EXT_color_buffer_float"));if(!(Et===Ko||Re.convert(Et)===U.getParameter(35738)||Et===uo&&(Ke.isWebGL2||De.has("OES_texture_float")||De.has("WEBGL_color_buffer_float"))||At))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");B>=0&&B<=R.width-L&&W>=0&&W<=R.height-K&&U.readPixels(B,W,L,K,Re.convert(Bt),Re.convert(Et),ze)}finally{const bt=null!==_?J.get(_).__webglFramebuffer:null;we.bindFramebuffer(36160,bt)}}},this.copyFramebufferToTexture=function(R,B,W=0){const L=Math.pow(2,-W),K=Math.floor(B.image.width*L),ze=Math.floor(B.image.height*L);X.setTexture2D(B,0),U.copyTexSubImage2D(3553,W,0,0,R.x,R.y,K,ze),we.unbindTexture()},this.copyTextureToTexture=function(R,B,W,L=0){const K=B.image.width,ze=B.image.height,at=Re.convert(W.format),_t=Re.convert(W.type);X.setTexture2D(W,0),U.pixelStorei(37440,W.flipY),U.pixelStorei(37441,W.premultiplyAlpha),U.pixelStorei(3317,W.unpackAlignment),B.isDataTexture?U.texSubImage2D(3553,L,R.x,R.y,K,ze,at,_t,B.image.data):B.isCompressedTexture?U.compressedTexSubImage2D(3553,L,R.x,R.y,B.mipmaps[0].width,B.mipmaps[0].height,at,B.mipmaps[0].data):U.texSubImage2D(3553,L,R.x,R.y,at,_t,B.image),0===L&&W.generateMipmaps&&U.generateMipmap(3553),we.unbindTexture()},this.copyTextureToTexture3D=function(R,B,W,L,K=0){if(p.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const ze=R.max.x-R.min.x+1,at=R.max.y-R.min.y+1,_t=R.max.z-R.min.z+1,bt=Re.convert(L.format),Bt=Re.convert(L.type);let Et;if(L.isData3DTexture)X.setTexture3D(L,0),Et=32879;else{if(!L.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");X.setTexture2DArray(L,0),Et=35866}U.pixelStorei(37440,L.flipY),U.pixelStorei(37441,L.premultiplyAlpha),U.pixelStorei(3317,L.unpackAlignment);const At=U.getParameter(3314),Vn=U.getParameter(32878),gr=U.getParameter(3316),qs=U.getParameter(3315),Ia=U.getParameter(32877),Un=W.isCompressedTexture?W.mipmaps[0]:W.image;U.pixelStorei(3314,Un.width),U.pixelStorei(32878,Un.height),U.pixelStorei(3316,R.min.x),U.pixelStorei(3315,R.min.y),U.pixelStorei(32877,R.min.z),W.isDataTexture||W.isData3DTexture?U.texSubImage3D(Et,K,B.x,B.y,B.z,ze,at,_t,bt,Bt,Un.data):W.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),U.compressedTexSubImage3D(Et,K,B.x,B.y,B.z,ze,at,_t,bt,Un.data)):U.texSubImage3D(Et,K,B.x,B.y,B.z,ze,at,_t,bt,Bt,Un),U.pixelStorei(3314,At),U.pixelStorei(32878,Vn),U.pixelStorei(3316,gr),U.pixelStorei(3315,qs),U.pixelStorei(32877,Ia),0===K&&L.generateMipmaps&&U.generateMipmap(Et),we.unbindTexture()},this.initTexture=function(R){R.isCubeTexture?X.setTextureCube(R,0):R.isData3DTexture?X.setTexture3D(R,0):R.isDataArrayTexture||R.isCompressedArrayTexture?X.setTexture2DArray(R,0):X.setTexture2D(R,0),we.unbindTexture()},this.resetState=function(){v=0,y=0,_=null,we.reset(),Y.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}(class j9 extends aA{}).prototype.isWebGL1Renderer=!0;class D0 extends $i{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.environment&&(this.environment=t.environment.clone()),null!==t.fog&&(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,this.backgroundIntensity=t.backgroundIntensity,null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const e=super.toJSON(t);return null!==this.fog&&(e.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(e.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(e.backgroundIntensity=this.backgroundIntensity),e}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(t){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=t}}class ua extends yt{constructor(t=1,e=32,i=16,r=0,s=2*Math.PI,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:i,phiStart:r,phiLength:s,thetaStart:o,thetaLength:a},e=Math.max(3,Math.floor(e)),i=Math.max(2,Math.floor(i));const l=Math.min(o+a,Math.PI);let c=0;const u=[],d=new S,h=new S,f=[],m=[],p=[],g=[];for(let v=0;v<=i;v++){const y=[],_=v/i;let b=0;0==v&&0==o?b=.5/e:v==i&&l==Math.PI&&(b=-.5/e);for(let M=0;M<=e;M++){const x=M/e;d.x=-t*Math.cos(r+x*s)*Math.sin(o+_*a),d.y=t*Math.cos(o+_*a),d.z=t*Math.sin(r+x*s)*Math.sin(o+_*a),m.push(d.x,d.y,d.z),h.copy(d).normalize(),p.push(h.x,h.y,h.z),g.push(x+b,1-_),y.push(c++)}u.push(y)}for(let v=0;v<i;v++)for(let y=0;y<e;y++){const b=u[v][y],M=u[v+1][y],x=u[v+1][y+1];(0!==v||o>0)&&f.push(u[v][y+1],b,x),(v!==i-1||l<Math.PI)&&f.push(b,M,x)}this.setIndex(f),this.setAttribute("position",new Pe(m,3)),this.setAttribute("normal",new Pe(p,3)),this.setAttribute("uv",new Pe(g,2))}static fromJSON(t){return new ua(t.radius,t.widthSegments,t.heightSegments,t.phiStart,t.phiLength,t.thetaStart,t.thetaLength)}}function Pr(n,t,e){return Z0(n)?new n.constructor(n.subarray(t,void 0!==e?e:n.length)):n.slice(t,e)}function da(n,t,e){return!n||!e&&n.constructor===t?n:"number"==typeof t.BYTES_PER_ELEMENT?new t(n):Array.prototype.slice.call(n)}function Z0(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}class tm{constructor(t,e,i,r){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new e.constructor(i),this.sampleValues=e,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(t){const e=this.parameterPositions;let i=this._cachedIndex,r=e[i],s=e[i-1];e:{t:{let o;n:{i:if(!(t<r)){for(let a=i+2;;){if(void 0===r){if(t<s)break i;return i=e.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(s=r,r=e[++i],t<r)break t}o=e.length;break n}if(t>=s)break e;{const a=e[1];t<a&&(i=2,s=a);for(let l=i-2;;){if(void 0===s)return this._cachedIndex=0,this.copySampleValue_(0);if(i===l)break;if(r=s,s=e[--i-1],t>=s)break t}o=i,i=0}}for(;i<o;){const a=i+o>>>1;t<e[a]?o=a:i=a+1}if(r=e[i],s=e[i-1],void 0===s)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return i=e.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,t,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const e=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=t*r;for(let o=0;o!==r;++o)e[o]=i[s+o];return e}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class V7 extends tm{constructor(t,e,i,r){super(t,e,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:2400,endingEnd:2400}}intervalChanged_(t,e,i){const r=this.parameterPositions;let s=t-2,o=t+1,a=r[s],l=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case 2401:s=t,a=2*e-i;break;case 2402:s=r.length-2,a=e+r[s]-r[s+1];break;default:s=t,a=i}if(void 0===l)switch(this.getSettings_().endingEnd){case 2401:o=t,l=2*i-e;break;case 2402:o=1,l=i+r[1]-r[0];break;default:o=t-1,l=e}const c=.5*(i-e),u=this.valueSize;this._weightPrev=c/(e-a),this._weightNext=c/(l-i),this._offsetPrev=s*u,this._offsetNext=o*u}interpolate_(t,e,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=t*a,c=l-a,u=this._offsetPrev,d=this._offsetNext,h=this._weightPrev,f=this._weightNext,m=(i-e)/(r-e),p=m*m,g=p*m,v=-h*g+2*h*p-h*m,y=(1+h)*g+(-1.5-2*h)*p+(-.5+h)*m+1,_=(-1-f)*g+(1.5+f)*p+.5*m,b=f*g-f*p;for(let M=0;M!==a;++M)s[M]=v*o[u+M]+y*o[c+M]+_*o[l+M]+b*o[d+M];return s}}class WA extends tm{constructor(t,e,i,r){super(t,e,i,r)}interpolate_(t,e,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=t*a,c=l-a,u=(i-e)/(r-e),d=1-u;for(let h=0;h!==a;++h)s[h]=o[c+h]*d+o[l+h]*u;return s}}class U7 extends tm{constructor(t,e,i,r){super(t,e,i,r)}interpolate_(t){return this.copySampleValue_(t-1)}}class gs{constructor(t,e,i,r){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=da(e,this.TimeBufferType),this.values=da(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(t){const e=t.constructor;let i;if(e.toJSON!==this.toJSON)i=e.toJSON(t);else{i={name:t.name,times:da(t.times,Array),values:da(t.values,Array)};const r=t.getInterpolation();r!==t.DefaultInterpolation&&(i.interpolation=r)}return i.type=t.ValueTypeName,i}InterpolantFactoryMethodDiscrete(t){return new U7(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new WA(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new V7(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let e;switch(t){case 2300:e=this.InterpolantFactoryMethodDiscrete;break;case 2301:e=this.InterpolantFactoryMethodLinear;break;case 2302:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(i);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=e,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(t){if(0!==t){const e=this.times;for(let i=0,r=e.length;i!==r;++i)e[i]+=t}return this}scale(t){if(1!==t){const e=this.times;for(let i=0,r=e.length;i!==r;++i)e[i]*=t}return this}trim(t,e){const i=this.times,r=i.length;let s=0,o=r-1;for(;s!==r&&i[s]<t;)++s;for(;-1!==o&&i[o]>e;)--o;if(++o,0!==s||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=Pr(i,s,o),this.values=Pr(this.values,s*a,o*a)}return this}validate(){let t=!0;const e=this.getValueSize();e-Math.floor(e)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const i=this.times,r=this.values,s=i.length;0===s&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let o=null;for(let a=0;a!==s;a++){const l=i[a];if("number"==typeof l&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),t=!1;break}if(null!==o&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),t=!1;break}o=l}if(void 0!==r&&Z0(r))for(let a=0,l=r.length;a!==l;++a){const c=r[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),t=!1;break}}return t}optimize(){const t=Pr(this.times),e=Pr(this.values),i=this.getValueSize(),r=2302===this.getInterpolation(),s=t.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const c=t[a];if(c!==t[a+1]&&(1!==a||c!==t[0]))if(r)l=!0;else{const d=a*i,h=d-i,f=d+i;for(let m=0;m!==i;++m){const p=e[d+m];if(p!==e[h+m]||p!==e[f+m]){l=!0;break}}}if(l){if(a!==o){t[o]=t[a];const d=a*i,h=o*i;for(let f=0;f!==i;++f)e[h+f]=e[d+f]}++o}}if(s>0){t[o]=t[s];for(let a=s*i,l=o*i,c=0;c!==i;++c)e[l+c]=e[a+c];++o}return o!==t.length?(this.times=Pr(t,0,o),this.values=Pr(e,0,o*i)):(this.times=t,this.values=e),this}clone(){const t=Pr(this.times,0),e=Pr(this.values,0),r=new(0,this.constructor)(this.name,t,e);return r.createInterpolant=this.createInterpolant,r}}gs.prototype.TimeBufferType=Float32Array,gs.prototype.ValueBufferType=Float32Array,gs.prototype.DefaultInterpolation=2301;class _c extends gs{}_c.prototype.ValueTypeName="bool",_c.prototype.ValueBufferType=Array,_c.prototype.DefaultInterpolation=2300,_c.prototype.InterpolantFactoryMethodLinear=void 0,_c.prototype.InterpolantFactoryMethodSmooth=void 0;(class $A extends gs{}).prototype.ValueTypeName="color";(class nm extends gs{}).prototype.ValueTypeName="number";class H7 extends tm{constructor(t,e,i,r){super(t,e,i,r)}interpolate_(t,e,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(i-e)/(r-e);let c=t*a;for(let u=c+a;c!==u;c+=4)cr.slerpFlat(s,0,o,c-a,o,c,l);return s}}class Sd extends gs{InterpolantFactoryMethodLinear(t){return new H7(this.times,this.values,this.getValueSize(),t)}}Sd.prototype.ValueTypeName="quaternion",Sd.prototype.DefaultInterpolation=2301,Sd.prototype.InterpolantFactoryMethodSmooth=void 0;class vc extends gs{}vc.prototype.ValueTypeName="string",vc.prototype.ValueBufferType=Array,vc.prototype.DefaultInterpolation=2300,vc.prototype.InterpolantFactoryMethodLinear=void 0,vc.prototype.InterpolantFactoryMethodSmooth=void 0;(class im extends gs{}).prototype.ValueTypeName="vector";class q7 extends Error{constructor(t,e){super(t),this.response=e}}class KA extends $i{constructor(t,e=1){super(),this.isLight=!0,this.type="Light",this.color=new Ae(t),this.intensity=e}dispose(){}copy(t,e){return super.copy(t,e),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){const e=super.toJSON(t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}class ZA extends KA{constructor(t,e){super(t,e),this.isAmbientLight=!0,this.type="AmbientLight"}}class sI{constructor(t=!0){this.autoStart=t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=oI(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const e=oI();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}}function oI(){return(typeof performance>"u"?Date:performance).now()}const rb="\\[\\]\\.:\\/",uq=new RegExp("["+rb+"]","g"),sb="[^"+rb+"]",dq="[^"+rb.replace("\\.","")+"]",gq=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",sb)+/(WCOD+)?/.source.replace("WCOD",dq)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",sb)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",sb)+"$"),_q=["material","materials","bones","map"];class vq{constructor(t,e,i){const r=i||cn.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,r)}getValue(t,e){this.bind();const r=this._bindings[this._targetGroup.nCachedObjects_];void 0!==r&&r.getValue(t,e)}setValue(t,e){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(t,e)}bind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,i=t.length;e!==i;++e)t[e].bind()}unbind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,i=t.length;e!==i;++e)t[e].unbind()}}let cn=(()=>{class n{constructor(e,i,r){this.path=i,this.parsedPath=r||n.parseTrackName(i),this.node=n.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,i,r){return e&&e.isAnimationObjectGroup?new n.Composite(e,i,r):new n(e,i,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(uq,"")}static parseTrackName(e){const i=gq.exec(e);if(null===i)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:i[2],objectName:i[3],objectIndex:i[4],propertyName:i[5],propertyIndex:i[6]},s=r.nodeName&&r.nodeName.lastIndexOf(".");if(void 0!==s&&-1!==s){const o=r.nodeName.substring(s+1);-1!==_q.indexOf(o)&&(r.nodeName=r.nodeName.substring(0,s),r.objectName=o)}if(null===r.propertyName||0===r.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,i){if(void 0===i||""===i||"."===i||-1===i||i===e.name||i===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(i);if(void 0!==r)return r}if(e.children){const r=function(o){for(let a=0;a<o.length;a++){const l=o[a];if(l.name===i||l.uuid===i)return l;const c=r(l.children);if(c)return c}return null},s=r(e.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,i){e[i]=this.targetObject[this.propertyName]}_getValue_array(e,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)e[i++]=r[s]}_getValue_arrayElement(e,i){e[i]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,i){this.resolvedProperty.toArray(e,i)}_setValue_direct(e,i){this.targetObject[this.propertyName]=e[i]}_setValue_direct_setNeedsUpdate(e,i){this.targetObject[this.propertyName]=e[i],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,i){this.targetObject[this.propertyName]=e[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=e[i++]}_setValue_array_setNeedsUpdate(e,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=e[i++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=e[i++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,i){this.resolvedProperty[this.propertyIndex]=e[i]}_setValue_arrayElement_setNeedsUpdate(e,i){this.resolvedProperty[this.propertyIndex]=e[i],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,i){this.resolvedProperty[this.propertyIndex]=e[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,i){this.resolvedProperty.fromArray(e,i)}_setValue_fromArray_setNeedsUpdate(e,i){this.resolvedProperty.fromArray(e,i),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,i){this.resolvedProperty.fromArray(e,i),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,i){this.bind(),this.getValue(e,i)}_setValue_unbound(e,i){this.bind(),this.setValue(e,i)}bind(){let e=this.node;const i=this.parsedPath,r=i.objectName,s=i.propertyName;let o=i.propertyIndex;if(e||(e=n.findNode(this.rootNode,i.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(r){let u=i.objectIndex;switch(r){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(let d=0;d<e.length;d++)if(e[d].name===u){u=d;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);e=e.material.map;break;default:if(void 0===e[r])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[r]}if(void 0!==u){if(void 0===e[u])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[u]}}const a=e[s];if(void 0===a)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+i.nodeName+"."+s+" but it wasn't found.",e);let l=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?l=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(l=this.Versioning.MatrixWorldNeedsUpdate);let c=this.BindingType.Direct;if(void 0!==o){if("morphTargetInfluences"===s){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[o]&&(o=e.morphTargetDictionary[o])}c=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=o}else void 0!==a.fromArray&&void 0!==a.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(c=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=s;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return n.Composite=vq,n})();cn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},cn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},cn.prototype.GetterByBindingType=[cn.prototype._getValue_direct,cn.prototype._getValue_array,cn.prototype._getValue_arrayElement,cn.prototype._getValue_toArray],cn.prototype.SetterByBindingTypeAndVersioning=[[cn.prototype._setValue_direct,cn.prototype._setValue_direct_setNeedsUpdate,cn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[cn.prototype._setValue_array,cn.prototype._setValue_array_setNeedsUpdate,cn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[cn.prototype._setValue_arrayElement,cn.prototype._setValue_arrayElement_setNeedsUpdate,cn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[cn.prototype._setValue_fromArray,cn.prototype._setValue_fromArray_setNeedsUpdate,cn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]],new Float32Array(1);class ob{constructor(t,e,i=0,r=1/0){this.ray=new vp(t,e),this.near=i,this.far=r,this.camera=null,this.layers=new s0,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(t,e){this.ray.set(t,e)}setFromCamera(t,e){e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):console.error("THREE.Raycaster: Unsupported camera type: "+e.type)}intersectObject(t,e=!0,i=[]){return ab(t,this,i,e),i.sort(uI),i}intersectObjects(t,e=!0,i=[]){for(let r=0,s=t.length;r<s;r++)ab(t[r],this,i,e);return i.sort(uI),i}}function uI(n,t){return n.distance-t.distance}function ab(n,t,e,i){if(n.layers.test(t.layers)&&n.raycast(t,e),!0===i){const r=n.children;for(let s=0,o=r.length;s<o;s++)ab(r[s],t,e,!0)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Iy}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Iy);const ub={now:()=>(ub.delegate||Date).now(),delegate:void 0};class Rq extends Kt{constructor(t=1/0,e=1/0,i=ub){super(),this._bufferSize=t,this._windowTime=e,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,t),this._windowTime=Math.max(1,e)}next(t){const{isStopped:e,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:s,_windowTime:o}=this;e||(i.push(t),!r&&i.push(s.now()+o)),this._trimBuffer(),super.next(t)}_subscribe(t){this._throwIfClosed(),this._trimBuffer();const e=this._innerSubscribe(t),{_infiniteTimeWindow:i,_buffer:r}=this,s=r.slice();for(let o=0;o<s.length&&!t.closed;o+=i?1:2)t.next(s[o]);return this._checkFinalizedStatuses(t),e}_trimBuffer(){const{_bufferSize:t,_timestampProvider:e,_buffer:i,_infiniteTimeWindow:r}=this,s=(r?1:2)*t;if(t<1/0&&s<i.length&&i.splice(0,i.length-s),!r){const o=e.now();let a=0;for(let l=1;l<i.length&&i[l]<=o;l+=2)a=l;a&&i.splice(0,a+1)}}}function un(n){return Tn((t,e)=>{Hn(n).subscribe(en(e,()=>e.complete(),Fa)),!e.closed&&t.subscribe(e)})}const Sq=["rendererCanvas"];var Or=(()=>{return(n=Or||(Or={})).mouseEnter="mouseEnter",n.mouseExit="mouseExit",n.click="click",n.pointerDown="pointerDown",n.pointerUp="pointerUp",Or;var n})();const db=new Ne("A reference to the raycaster object",{factory:()=>new ob});let fm=(()=>{class n{constructor(){this.raycaster=gt(db),this.selected=null,this.enabled=!0,this.groups=[],this.paused=!1,this.maxClickDistance=23,this.nid=n.instanceCnt++,this.onPointerMove=this.onPointerMove.bind(this),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerUp=this.onPointerUp.bind(this)}ngOnDestroy(){this.disable(),this.unsubscribe()}subscribe(){if(!this.canvas)throw new Error("missing canvas");this.canvas.addEventListener("pointermove",this.onPointerMove),this.canvas.addEventListener("pointerdown",this.onPointerDown),this.canvas.addEventListener("pointerup",this.onPointerUp)}unsubscribe(){if(!this.canvas)throw new Error("missing canvas");this.canvas.removeEventListener("pointermove",this.onPointerMove),this.canvas.removeEventListener("pointerdown",this.onPointerDown),this.canvas.removeEventListener("pointerup",this.onPointerUp)}enable(){this.enabled=!0}disable(){this.enabled=!1}pause(){this.paused=!0}resume(){this.paused=!1}get isEnabled(){return this.enabled}init(e,i){this.camera=e,this.canvas=i,this.subscribe()}addEventTarget(e){this.groups.push(e)}removeEventTarget(e){const i=this.groups.indexOf(e);i>=0&&this.groups.splice(i,1)}onPointerMove(e){if(!this.isReady())return;const i=this.getFirstIntersectedGroup(e.layerX,e.layerY,Or.mouseEnter);if((!this.selected||this.selected!==i?.target)&&(this.selected&&(this.selected.host.objRef?.dispatchEvent({type:Or.mouseExit,component:this.selected.host}),this.selected.emitOnMouseExit(),this.selected=null),i&&i.target)){this.selected=i.target;const r={type:Or.mouseEnter,component:i.target.host,...i};this.selected.host.objRef?.dispatchEvent(r),this.selected.emitOnMouseEnter(r)}}onPointerDown(e){if(this.maxClickDistance=e.width,this.pointerDownEvent=e,!this.isReady())return;const i=this.getFirstIntersectedGroup(e.layerX,e.layerY,Or.pointerDown);if(i&&i.target&&i.target.host.objRef){const r={type:Or.pointerDown,component:i.target.host,...i};i.target.host.objRef.dispatchEvent(r),i.target.emitOnPointerDown(r)}}onPointerUp(e){const i=this.pointerDownEvent;if(this.pointerDownEvent=void 0,!this.isReady())return;let r=this.getFirstIntersectedGroup(e.layerX,e.layerY,Or.pointerUp);if(r&&r.target&&r.target.host.objRef){const s={type:Or.pointerUp,component:r.target.host,...r};r.target.host.objRef.dispatchEvent(s),r.target.emitOnPointerUp(s)}if(!(this.calcPointerDownUpDinstance(e,i)>this.maxClickDistance)&&(r=this.getFirstIntersectedGroup(e.layerX,e.layerY,Or.click),r&&r.target&&r.target.host.objRef)){const s={type:Or.click,component:r.target.host,...r};r.target.host.objRef.dispatchEvent(s),r.target.emitOnClick(s)}}isReady(e){return!!(this.enabled&&(e||!this.paused)&&this.camera&&this.camera.objRef&&this.groups&&this.groups.length>0)}calcPointerDownUpDinstance(e,i){if(!i)return Number.MAX_VALUE;const r=e.layerX-i.layerX,s=e.layerY-i.layerY;return Math.sqrt(r*r+s*s)}getFirstIntersectedGroup(e,i,r){if(!this.camera||!this.canvas||!this.camera.objRef)return;const s=new Q(e=e/this.canvas.clientWidth*2-1,i=-i/this.canvas.clientHeight*2+1);let o,a;this.raycaster.setFromCamera(s,this.camera.objRef);for(const l of this.groups){const c=l.host.objRef;if(!l[r]||!c)continue;const u=this.raycaster.intersectObject(c,!0);u.length>0&&(!o||o.distance>u[0].distance)&&(o=u[0],a=l)}return a&&o?{target:a,...o}:void 0}}return n.instanceCnt=0,n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=de({token:n,factory:n.\u0275fac}),n})();function Ti(n,t){return function bI(n){return!(!n||!n.set)}(n)?void 0===t?n:Array.isArray(t)?(n.set(...t),n):n.copy&&t?(n.copy(t),n):void 0!==t?(n.set(t),n):n:t}function TI(n){return!0===n.__isProxy&&void 0===n.objRef}let Oq=(()=>{class n{set objRef(e){this.applyObjRef(e)}get objRef(){return this._objRef}constructor(){this.autoAddToParent=!0,this.autoDispose=!0}addToParent(){}removeFromParent(){}set threeEvents(e){this.removeEvents(),this.eventListeners=e,this.applyEvents()}get threeEvents(){return this.eventListeners}get onUpdate(){return this.updateEmitter||(this.updateEmitter=new Ce),this.updateEmitter}get objRef$(){return this._objRef$||(this._objRef$=new Rq(1)),this._objRef$}ngOnInit(){this.objRef||(this.objRef=this.createThreeInstance(this.args))}getType(){throw new Error("derive me")}createThreeInstance(e){return Array.isArray(e)?new(this.getType())(...e):new(this.getType())(e)}ngOnChanges(e){if(!this.objRef||TI(this.objRef)){e.objRef?.currentValue?this.objRef=e.objRef?.currentValue:this.objRef||(this.objRef=this.createThreeInstance(e.args?.currentValue));for(const i in e)this[i]=e[i].currentValue;this.emitPropertyChanges(e)}else this.emitPropertyChanges(e)}disposeObjRef(){(function Aq(n){return!(!n||"function"!=typeof n.dispose)})(this.objRef)&&this.objRef.dispose()}ngOnDestroy(){this.removeEvents(),this.removeFromParent(),this.autoDispose&&this.disposeObjRef()}applyObjRef(e){this._objRef!==e&&(this.removeFromParent(),this._objRef=e,this.autoAddToParent&&this.addToParent()),this.emitObjRefChange()}emitObjRefChange(){this._objRef&&!TI(this._objRef)&&(this._objRef.dispatchEvent?.({type:"loaded",object:this._objRef}),this._objRef$&&this._objRef$.next(this._objRef))}emitPropertyChanges(e){this._objRef&&this._objRef.dispatchEvent?.({type:"changes",changes:e}),this.updateEmitter&&this.updateEmitter.next(e)}removeEvents(){if(this.eventListeners&&this._objRef){for(const e of Object.entries(this.eventListeners))this._objRef.removeEventListener(e[0],e[1]);this.eventListeners=void 0}}applyEvents(){if(this.eventListeners&&this._objRef)for(const e of Object.entries(this.eventListeners))this._objRef.addEventListener(e[0],e[1])}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=Tt({type:n,selectors:[["th-abs-wrapper"]],inputs:{autoAddToParent:"autoAddToParent",autoDispose:"autoDispose",objRef:"objRef",args:"args",threeEvents:"threeEvents"},outputs:{onUpdate:"onUpdate",objRef$:"objRef$"},features:[gn],decls:0,vars:0,template:function(e,i){},encapsulation:2}),n})(),Nq=(()=>{class n extends Oq{constructor(e){super(),this.parent=e}addToParent(){this._objRef&&this.parent.objRef&&(!this._objRef.parent||this._objRef.parent.uuid!==this.parent.objRef.uuid)&&this.parent.objRef.add(this._objRef)}removeFromParent(){this._objRef?.parent?.remove(this._objRef)}applyObjRef(e){(this._objRef!==e||this._objRef?.parent?.uuid!==this.parent.objRef.uuid)&&(this.removeFromParent(),this._objRef=e,this.autoAddToParent&&this.addToParent()),this.emitObjRefChange()}attachToParent(e,i){!this.parent.objRef||e===i&&i?.parent?.uuid===this.parent.objRef.uuid||(i&&i.parent&&i.parent.remove(i),e&&(!e.parent||e.parent&&e.parent.uuid!==this.parent.objRef.uuid)&&this.parent.objRef.add(e))}set lookAt(e){Promise.resolve().then(()=>{this.objRef&&(Array.isArray(e)?this.objRef.lookAt(...e):this.objRef.lookAt(e))})}}return n.\u0275fac=function(e){return new(e||n)(I(n))},n.\u0275cmp=Tt({type:n,selectors:[["th-abs-object"]],inputs:{lookAt:"lookAt"},features:[ft],decls:0,vars:0,template:function(e,i){},encapsulation:2}),n})(),qi=(()=>{class n extends Nq{getType(){return $i}set id(e){this._objRef&&(this._objRef.id=e)}set uuid(e){this._objRef&&(this._objRef.uuid=e)}set name(e){this._objRef&&(this._objRef.name=e)}set type(e){this._objRef&&(this._objRef.type=e)}set children(e){this._objRef&&(this._objRef.children=e)}set up(e){this._objRef&&(this._objRef.up=Ti(this._objRef.up,e))}set position(e){this._objRef&&Ti(this._objRef.position,e)}set rotation(e){this._objRef&&Ti(this._objRef.rotation,e)}set quaternion(e){this._objRef&&Ti(this._objRef.quaternion,e)}set scale(e){this._objRef&&Ti(this._objRef.scale,e)}set modelViewMatrix(e){this._objRef&&Ti(this._objRef.modelViewMatrix,e)}set normalMatrix(e){this._objRef&&Ti(this._objRef.normalMatrix,e)}set matrix(e){this._objRef&&(this._objRef.matrix=Ti(this._objRef.matrix,e))}set matrixWorld(e){this._objRef&&(this._objRef.matrixWorld=Ti(this._objRef.matrixWorld,e))}set matrixAutoUpdate(e){this._objRef&&(this._objRef.matrixAutoUpdate=e)}set matrixWorldAutoUpdate(e){this._objRef&&(this._objRef.matrixWorldAutoUpdate=e)}set matrixWorldNeedsUpdate(e){this._objRef&&(this._objRef.matrixWorldNeedsUpdate=e)}set layers(e){this._objRef&&(this._objRef.layers=Ti(this._objRef.layers,e))}set visible(e){this._objRef&&(this._objRef.visible=e)}set castShadow(e){this._objRef&&(this._objRef.castShadow=e)}set receiveShadow(e){this._objRef&&(this._objRef.receiveShadow=e)}set frustumCulled(e){this._objRef&&(this._objRef.frustumCulled=e)}set renderOrder(e){this._objRef&&(this._objRef.renderOrder=e)}set animations(e){this._objRef&&(this._objRef.animations=e)}set userData(e){this._objRef&&(this._objRef.userData=e)}set customDepthMaterial(e){this._objRef&&(this._objRef.customDepthMaterial=e)}set customDistanceMaterial(e){this._objRef&&(this._objRef.customDistanceMaterial=e)}set onBeforeRender(e){this._objRef&&(this._objRef.onBeforeRender=e)}set onAfterRender(e){this._objRef&&(this._objRef.onAfterRender=e)}constructor(e){super(e)}}return n.\u0275fac=function(e){return new(e||n)(I(n,4))},n.\u0275cmp=Tt({type:n,selectors:[["th-object3D"]],inputs:{id:"id",uuid:"uuid",name:"name",type:"type",children:"children",up:"up",position:"position",rotation:"rotation",quaternion:"quaternion",scale:"scale",modelViewMatrix:"modelViewMatrix",normalMatrix:"normalMatrix",matrix:"matrix",matrixWorld:"matrixWorld",matrixAutoUpdate:"matrixAutoUpdate",matrixWorldAutoUpdate:"matrixWorldAutoUpdate",matrixWorldNeedsUpdate:"matrixWorldNeedsUpdate",layers:"layers",visible:"visible",castShadow:"castShadow",receiveShadow:"receiveShadow",frustumCulled:"frustumCulled",renderOrder:"renderOrder",animations:"animations",userData:"userData",customDepthMaterial:"customDepthMaterial",customDistanceMaterial:"customDistanceMaterial",onBeforeRender:"onBeforeRender",onAfterRender:"onAfterRender"},features:[vt([]),ft],decls:0,vars:0,template:function(e,i){},encapsulation:2,changeDetection:0}),n})(),_a=(()=>{class n extends qi{getType(){return Cp}set matrixWorldInverse(e){this._objRef&&(this._objRef.matrixWorldInverse=Ti(this._objRef.matrixWorldInverse,e))}set projectionMatrix(e){this._objRef&&(this._objRef.projectionMatrix=Ti(this._objRef.projectionMatrix,e))}set projectionMatrixInverse(e){this._objRef&&(this._objRef.projectionMatrixInverse=Ti(this._objRef.projectionMatrixInverse,e))}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=Xt(n)))(i||n)}}(),n.\u0275cmp=Tt({type:n,selectors:[["th-camera"]],inputs:{matrixWorldInverse:"matrixWorldInverse",projectionMatrix:"projectionMatrix",projectionMatrixInverse:"projectionMatrixInverse"},features:[vt([{provide:qi,useExisting:Oe(()=>n)}]),ft],decls:0,vars:0,template:function(e,i){},encapsulation:2,changeDetection:0}),n})(),MI=(()=>{class n extends qi{getType(){return D0}set type(e){this._objRef&&(this._objRef.type=e)}set fog(e){this._objRef&&(this._objRef.fog=e)}set backgroundBlurriness(e){this._objRef&&(this._objRef.backgroundBlurriness=e)}set backgroundIntensity(e){this._objRef&&(this._objRef.backgroundIntensity=e)}set overrideMaterial(e){this._objRef&&(this._objRef.overrideMaterial=e)}set background(e){this._objRef&&(this._objRef.background=Ti(this._objRef.background,e))}set environment(e){this._objRef&&(this._objRef.environment=e)}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=Xt(n)))(i||n)}}(),n.\u0275cmp=Tt({type:n,selectors:[["th-scene"]],inputs:{type:"type",fog:"fog",backgroundBlurriness:"backgroundBlurriness",backgroundIntensity:"backgroundIntensity",overrideMaterial:"overrideMaterial",background:"background",environment:"environment"},features:[vt([{provide:qi,useExisting:Oe(()=>n)}]),ft],decls:0,vars:0,template:function(e,i){},encapsulation:2,changeDetection:0}),n})();const xI={alpha:!0,antialias:!0,preserveDrawingBuffer:!0};let pm=(()=>{class n{get canvas(){return this.rendererParameters?.domElement}constructor(e){this.ngZone=e,this.clock=new sI,this.destroyed$=new Kt,this.resizeEmitter=new Ce,this.beforeRenderEmitter=new Ce,this.views=[],this.beforeRender$=this.beforeRenderEmitter.pipe(un(this.destroyed$)),this.resize$=this.resizeEmitter.pipe(un(this.destroyed$))}get renderer(){return this._renderer}ngOnDestroy(){this.resizeObserver&&this.canvas&&this.resizeObserver.unobserve(this.canvas)}initResizeObserver(){this.ngZone.runOutsideAngular(()=>{if(!this.canvas)throw new Error("missing canvas element");this.resize(),this.resizeObserver||(this.resizeObserver=new ResizeObserver(()=>{this.resize()})),this.resizeObserver.observe(this.canvas)})}initRenderer(){this._renderer||(this._renderer=new aA({canvas:this.rendererParameters?.domElement,...xI}),Object.assign(this._renderer,{...xI,...this.rendererParameters}),this.resize())}setRenderer(e){this.rendererParameters=e,this.initRenderer(),this.initResizeObserver()}addView(e){this.views.push(e);const i=this.calcRendererSize();i&&this.adjustViewDimensions(e,i.width,i.height)}render(){this.beforeRenderEmitter.emit({engine:this,delta:this.clock.getDelta()});for(const e of this.views)this.renderView(e)}renderView(e){if(!this._renderer)return;const i=e.camera,r=e.scene;if(!(i&&r&&i.objRef&&r.objRef))return;const s=this._renderer;(function Iq(n){return void 0!==n&&(n.observed||n.observers?.length>0)})(e.onRender)&&this.ngZone.run(()=>e.onRender.emit({renderer:s,scene:r,camera:i})),this.applyRendererParametersFromView(e),e.effectComposer?e.effectComposer.render():this._renderer.render(r.objRef,i.objRef)}applyRendererParametersFromView(e){this._renderer&&(e.viewPort&&(e.viewPort instanceof Gt?this._renderer.setViewport(e.viewPort):this._renderer.setViewport(e.viewPort.x,e.viewPort.y,e.viewPort.width,e.viewPort.height)),e.scissor&&(e.scissor instanceof Gt?this._renderer.setScissor(e.scissor):this._renderer.setScissor(e.scissor.x,e.scissor.y,e.scissor.width,e.scissor.height)),void 0!==e.scissorTest&&this._renderer.setScissorTest(e.scissorTest),e.clearColor&&this._renderer.setClearColor(e.clearColor),void 0!==e.clearAlpha&&this._renderer.setClearAlpha(e.clearAlpha),void 0!==e.shadow&&(this._renderer.shadowMap.enabled=!0))}resize(){if(!this._renderer||!this.canvas)return!1;const{width:e,height:i}=this.calcRendererSize();this._renderer.setSize(e,i,!1);for(const r of this.views)this.adjustViewDimensions(r,e,i);return this.resizeEmitter.emit({width:e,height:i}),!0}calcRendererSize(){if(!this._renderer||!this.canvas)return;const e=window.devicePixelRatio;return{width:(this.canvas.clientWidth??0)*e,height:(this.canvas.clientHeight??0)*e}}adjustViewDimensions(e,i,r){e.viewPort||(e.camera&&e.camera.objRef.aspect&&(e.camera.objRef.aspect=i/r,e.camera.objRef.updateProjectionMatrix()),e.effectComposer?.setSize(i,r))}}return n.\u0275fac=function(e){return new(e||n)(ye(Dt))},n.\u0275prov=de({token:n,factory:n.\u0275fac}),n})(),hb=(()=>{class n{constructor(e,i){this.engServ=e,this.raycaster=i,this.onRender=new Ce}set contentScene(e){e&&(this.scene=e)}set effectComposer(e){this._effectComposer=e,this.configureEffectComposerRenderTarget()}get effectComposer(){return this._effectComposer}set camera(e){this._camera=e,this.initRaycaster()}get camera(){return this._camera}set contentCamera(e){e&&(this.camera=e)}set viewPort(e){this._viewPort=e,this.configureEffectComposerRenderTarget()}get viewPort(){return this._viewPort}ngOnInit(){this.initRaycaster()}initRaycaster(){this.camera&&this.engServ.canvas&&this.raycaster.init(this.camera,this.engServ.canvas)}add(e){}remove(e){}configureEffectComposerRenderTarget(){if(this.viewPort&&this.effectComposer){let e,i;this.viewPort instanceof Gt?(e=this.viewPort.z,i=this.viewPort?.width):(e=this.viewPort.width,i=this.viewPort.height),this.effectComposer.setSize(e,i)}}}return n.\u0275fac=function(e){return new(e||n)(I(pm),I(fm))},n.\u0275cmp=Tt({type:n,selectors:[["th-view"]],contentQueries:function(e,i,r){if(1&e&&(Yt(r,MI,5),Yt(r,_a,5)),2&e){let s;Mt(s=xt())&&(i.contentScene=s.first),Mt(s=xt())&&(i.contentCamera=s.first)}},inputs:{scene:"scene",effectComposer:"effectComposer",camera:"camera",shadow:"shadow",viewPort:"viewPort",scissor:"scissor",scissorTest:"scissorTest",clearColor:"clearColor",clearAlpha:"clearAlpha"},outputs:{onRender:"onRender"},features:[vt([{provide:qi,useExisting:Oe(()=>n)},{provide:db,useValue:new ob},fm])],decls:0,vars:0,template:function(e,i){},encapsulation:2}),n})(),fb=(()=>{class n{constructor(e,i){this.engineService=e,this.ngZone=i,this.active=!0,this.destroyed$=new Kt,this.beforeRender$=this.engineService.beforeRender$,this.engineService.resize$.pipe(un(this.destroyed$)).subscribe(()=>this.requestAnimationFrame())}ngOnDestroy(){this.stop(),this.destroyed$.next(),this.destroyed$.complete()}start(){this.active||(this.active=!0,this.requestAnimationFrame())}stop(){this.active=!1,void 0!==this.frameId&&(cancelAnimationFrame(this.frameId),this.frameId=void 0)}isActive(){return this.active}requestAnimationFrame(){void 0===this.frameId&&this.ngZone.runOutsideAngular(()=>this.frameId=requestAnimationFrame(()=>{this.frameId=void 0,this.engineService.render(),this.active&&this.requestAnimationFrame()}))}}return n.\u0275fac=function(e){return new(e||n)(ye(pm),ye(Dt))},n.\u0275prov=de({token:n,factory:n.\u0275fac}),n})(),Fq=(()=>{class n extends hb{get obj(){return this}set views(e){e.forEach(i=>this.engServ.addView(i))}set rendererCanvas(e){e&&(this._rendererCanvas=e,e.nativeElement.id+=this.nid)}get rendererCanvas(){return this._rendererCanvas}constructor(e,i,r){super(e,r),this.engServ=e,this.animationLoop=i,this.raycaster=r,this.nid=n.instanceCnt++,this.disableDefaultView=!1}ngAfterContentChecked(){this.animationLoop.requestAnimationFrame()}ngAfterViewInit(){this.animationLoop.requestAnimationFrame()}ngOnInit(){this.applyRendererParameters(),super.ngOnInit(),this.disableDefaultView||this.engServ.addView(this)}applyRendererParameters(){if(!this.rendererCanvas)throw new Error("Missing Canvas");this.engServ.setRenderer({...this.rendererParameters,domElement:this.rendererCanvas.nativeElement})}}return n.instanceCnt=0,n.\u0275fac=function(e){return new(e||n)(I(pm),I(fb),I(Oe(()=>fm)))},n.\u0275cmp=Tt({type:n,selectors:[["th-canvas"]],contentQueries:function(e,i,r){if(1&e&&Yt(r,hb,4),2&e){let s;Mt(s=xt())&&(i.views=s)}},viewQuery:function(e,i){if(1&e&&to(Sq,7),2&e){let r;Mt(r=xt())&&(i.rendererCanvas=r.first)}},inputs:{rendererParameters:"rendererParameters",disableDefaultView:"disableDefaultView"},features:[vt([{provide:qi,useExisting:Oe(()=>n)},pm,fb,{provide:db,useValue:new ob},Oe(()=>fm),{provide:hb,useExisting:Oe(()=>n)}]),ft],decls:2,vars:0,consts:[["id","rendererCanvas"],["rendererCanvas",""]],template:function(e,i){1&e&&xn(0,"canvas",0,1)},styles:["[_nghost-%COMP%]{display:flex;flex:auto;line-height:0;height:100%}canvas[_ngcontent-%COMP%]{flex:auto;outline:none;width:100%;height:100%}"],changeDetection:0}),n})(),Lq=(()=>{class n extends qi{getType(){return KA}set type(e){this._objRef&&(this._objRef.type=e)}set color(e){this._objRef&&(this._objRef.color=Ti(this._objRef.color,e))}set intensity(e){this._objRef&&(this._objRef.intensity=e)}set shadow(e){this._objRef&&(this._objRef.shadow=e)}set shadowCameraFov(e){this._objRef&&(this._objRef.shadowCameraFov=e)}set shadowCameraLeft(e){this._objRef&&(this._objRef.shadowCameraLeft=e)}set shadowCameraRight(e){this._objRef&&(this._objRef.shadowCameraRight=e)}set shadowCameraTop(e){this._objRef&&(this._objRef.shadowCameraTop=e)}set shadowCameraBottom(e){this._objRef&&(this._objRef.shadowCameraBottom=e)}set shadowCameraNear(e){this._objRef&&(this._objRef.shadowCameraNear=e)}set shadowCameraFar(e){this._objRef&&(this._objRef.shadowCameraFar=e)}set shadowBias(e){this._objRef&&(this._objRef.shadowBias=e)}set shadowMapWidth(e){this._objRef&&(this._objRef.shadowMapWidth=e)}set shadowMapHeight(e){this._objRef&&(this._objRef.shadowMapHeight=e)}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=Xt(n)))(i||n)}}(),n.\u0275cmp=Tt({type:n,selectors:[["th-light"]],inputs:{type:"type",color:"color",intensity:"intensity",shadow:"shadow",shadowCameraFov:"shadowCameraFov",shadowCameraLeft:"shadowCameraLeft",shadowCameraRight:"shadowCameraRight",shadowCameraTop:"shadowCameraTop",shadowCameraBottom:"shadowCameraBottom",shadowCameraNear:"shadowCameraNear",shadowCameraFar:"shadowCameraFar",shadowBias:"shadowBias",shadowMapWidth:"shadowMapWidth",shadowMapHeight:"shadowMapHeight"},features:[vt([{provide:qi,useExisting:Oe(()=>n)}]),ft],decls:0,vars:0,template:function(e,i){},encapsulation:2,changeDetection:0}),n})(),Bq=(()=>{class n extends Lq{getType(){return ZA}set type(e){this._objRef&&(this._objRef.type=e)}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=Xt(n)))(i||n)}}(),n.\u0275cmp=Tt({type:n,selectors:[["th-ambientLight"]],inputs:{type:"type"},features:[vt([{provide:qi,useExisting:Oe(()=>n)}]),ft],decls:0,vars:0,template:function(e,i){},encapsulation:2,changeDetection:0}),n})(),jq=(()=>{class n extends _a{getType(){return di}set type(e){this._objRef&&(this._objRef.type=e)}set zoom(e){this._objRef&&(this._objRef.zoom=e)}set fov(e){this._objRef&&(this._objRef.fov=e)}set aspect(e){this._objRef&&(this._objRef.aspect=e)}set near(e){this._objRef&&(this._objRef.near=e)}set far(e){this._objRef&&(this._objRef.far=e)}set focus(e){this._objRef&&(this._objRef.focus=e)}set view(e){this._objRef&&(this._objRef.view=e)}set filmGauge(e){this._objRef&&(this._objRef.filmGauge=e)}set filmOffset(e){this._objRef&&(this._objRef.filmOffset=e)}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=Xt(n)))(i||n)}}(),n.\u0275cmp=Tt({type:n,selectors:[["th-perspectiveCamera"]],inputs:{type:"type",zoom:"zoom",fov:"fov",aspect:"aspect",near:"near",far:"far",focus:"focus",view:"view",filmGauge:"filmGauge",filmOffset:"filmOffset"},features:[vt([{provide:qi,useExisting:Oe(()=>n)},{provide:_a,useExisting:Oe(()=>n)}]),ft],decls:0,vars:0,template:function(e,i){},encapsulation:2,changeDetection:0}),n})(),wI=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ht({type:n}),n.\u0275inj=jt({}),n})();new S,new S,new S;let RI=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ht({type:n}),n.\u0275inj=jt({imports:[wI,HR,wI]}),n})(),Vq=(()=>{class n{constructor(){this.config={unit:{geometry:new ua,material:new fs,position:new S(0,0,0),radius:.01,padding:.5},size:{x:10,y:10}}}set position(e){e instanceof S?this.config.unit.position.set(e.x,e.y,e.z):this.config.unit.position.set(e[0],e[1],e[2])}set padding(e){this.config.unit.padding=e}set size(e){this.config.size.x=e[0],this.config.size.y=e[1]}ngOnInit(){this.initGrid(this.config)}initGrid(e){let i={geometry:new ua(1,4,2),material:new fs,scale:new S(e.unit.radius,e.unit.radius,e.unit.radius),position:e.unit.position},r={one:{rows:{count:e.size.y,startFrom:0,offset:e.unit.padding},columns:{count:e.size.x,startFrom:0,offset:e.unit.padding}},two:{rows:{count:e.size.y,startFrom:0,offset:e.unit.padding},columns:{count:e.size.x-1,startFrom:1,offset:-1*e.unit.padding}},three:{rows:{count:e.size.y-1,startFrom:1,offset:-1*e.unit.padding},columns:{count:e.size.x-1,startFrom:1,offset:-1*e.unit.padding}},four:{rows:{count:e.size.y-1,startFrom:1,offset:-1*e.unit.padding},columns:{count:e.size.x,startFrom:0,offset:e.unit.padding}}};this.initGridQuadrant({unit:i,quadrant:r.one}),this.initGridQuadrant({unit:i,quadrant:r.two}),this.initGridQuadrant({unit:i,quadrant:r.three}),this.initGridQuadrant({unit:i,quadrant:r.four})}initGridQuadrant(e){for(let i=e.quadrant.rows.startFrom;i<e.quadrant.rows.startFrom+e.quadrant.rows.count;i++)for(let r=e.quadrant.columns.startFrom;r<e.quadrant.columns.startFrom+e.quadrant.columns.count;r++){let s=new Ii(e.unit.geometry,e.unit.material);s.scale.set(e.unit.scale.x,e.unit.scale.y,e.unit.scale.z),s.position.set(e.unit.position.x+e.quadrant.columns.offset*r,e.unit.position.y+e.quadrant.rows.offset*i,e.unit.position.z),this.scene.children.push(s)}}enableDebugging(){let e={mesh:new Ii(new ua(.1,4,2),new fs({color:"red"}))};this.scene.children.push(e.mesh)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=Tt({type:n,selectors:[["th-prefab-grid"]],inputs:{scene:"scene",position:"position",padding:"padding",size:"size"},decls:0,vars:0,template:function(e,i){},encapsulation:2}),n})();const Uq=function(){return[0,0,5]},Hq=function(){return[0,0,0]},zq=function(){return[0,0,.2]},Wq=function(){return[20,20]};let $q=(()=>{class n{constructor(){this.scene=new D0}ngOnInit(){}ngAfterContentInit(){}ngAfterContentChecked(){}ngAfterViewChecked(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=Tt({type:n,selectors:[["th-scene-environment"]],decls:6,vars:11,consts:[["canvas",""],[3,"objRef"],[3,"position","rotation"],[3,"scene","position","size","padding"]],template:function(e,i){1&e&&(re(0,"th-canvas",null,0)(2,"th-scene",1),xn(3,"th-perspectiveCamera",2)(4,"th-ambientLight")(5,"th-prefab-grid",3),ue()()),2&e&&(te(2),ie("objRef",i.scene),te(1),ie("position",Mu(7,Uq))("rotation",Mu(8,Hq)),te(2),ie("scene",i.scene)("position",Mu(9,zq))("size",Mu(10,Wq))("padding",.5))},dependencies:[jq,Bq,MI,Fq,Vq],encapsulation:2}),n})(),qq=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=Tt({type:n,selectors:[["app"]],decls:4,vars:0,consts:[[1,"position-absolute","w-100","h-100"],[1,"d-flex","w-100","justify-content-center","align-items-center"]],template:function(e,i){1&e&&(re(0,"div",0),xn(1,"th-scene-environment"),ue(),re(2,"div",1),xn(3,"router-outlet"),ue())},dependencies:[_y,$q],styles:["app{display:flex;width:100%;height:100%;color:#fff;font-family:fantasy;font-size:2rem}router-outlet{display:none}\n"],encapsulation:2}),n})();const Kq=["addListener","removeListener"],Xq=["addEventListener","removeEventListener"],Yq=["on","off"];function hi(n,t,e,i){if(Pt(e)&&(i=e,e=void 0),i)return hi(n,t,e).pipe(Qv(i));const[r,s]=function Qq(n){return Pt(n.addEventListener)&&Pt(n.removeEventListener)}(n)?Xq.map(o=>a=>n[o](t,a,e)):function Jq(n){return Pt(n.addListener)&&Pt(n.removeListener)}(n)?Kq.map(SI(n,t)):function Zq(n){return Pt(n.on)&&Pt(n.off)}(n)?Yq.map(SI(n,t)):[];if(!r&&Ym(n))return zn(o=>hi(o,t,e))(Hn(n));if(!r)throw new TypeError("Invalid event target");return new Qt(o=>{const a=(...l)=>o.next(1<l.length?l:l[0]);return r(a),()=>s(a)})}function SI(n,t){return e=>i=>n[e](t,i)}class eK extends Xi{constructor(t,e){super()}schedule(t,e=0){return this}}const mm={setInterval(n,t,...e){const{delegate:i}=mm;return i?.setInterval?i.setInterval(n,t,...e):setInterval(n,t,...e)},clearInterval(n){const{delegate:t}=mm;return(t?.clearInterval||clearInterval)(n)},delegate:void 0};class Ad{constructor(t,e=Ad.now){this.schedulerActionCtor=t,this.now=e}schedule(t,e=0,i){return new this.schedulerActionCtor(this,t).schedule(i,e)}}Ad.now=ub.now;const iK=new class nK extends Ad{constructor(t,e=Ad.now){super(t,e),this.actions=[],this._active=!1}flush(t){const{actions:e}=this;if(this._active)return void e.push(t);let i;this._active=!0;do{if(i=t.execute(t.state,t.delay))break}while(t=e.shift());if(this._active=!1,i){for(;t=e.shift();)t.unsubscribe();throw i}}}(class tK extends eK{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){var i;if(this.closed)return this;this.state=t;const r=this.id,s=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(s,r,e)),this.pending=!0,this.delay=e,this.id=null!==(i=this.id)&&void 0!==i?i:this.requestAsyncId(s,this.id,e),this}requestAsyncId(t,e,i=0){return mm.setInterval(t.flush.bind(t,this),i)}recycleAsyncId(t,e,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return e;null!=e&&mm.clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(t,e);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let r,i=!1;try{this.work(t)}catch(s){i=!0,r=s||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:t,scheduler:e}=this,{actions:i}=e;this.work=this.state=this.scheduler=null,this.pending=!1,Na(i,this),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null,super.unsubscribe()}}});function mb(n=0,t,e=iK){let i=-1;return null!=t&&(FT(t)?e=t:i=t),new Qt(r=>{let s=function rK(n){return n instanceof Date&&!isNaN(n)}(n)?+n-e.now():n;s<0&&(s=0);let o=0;return e.schedule(function(){r.closed||(r.next(o++),0<=i?this.schedule(void 0,i):r.complete())},s)})}const{isArray:sK}=Array;function EI(n){return 1===n.length&&sK(n[0])?n[0]:n}const II=new Qt(Fa);function gm(...n){const t=Qd(n),e=EI(n);return e.length?new Qt(i=>{let r=e.map(()=>[]),s=e.map(()=>!1);i.add(()=>{r=s=null});for(let o=0;!i.closed&&o<e.length;o++)Hn(e[o]).subscribe(en(i,a=>{if(r[o].push(a),r.every(l=>l.length)){const l=r.map(c=>c.shift());i.next(t?t(...l):l),r.some((c,u)=>!c.length&&s[u])&&i.complete()}},()=>{s[o]=!0,!r[o].length&&i.complete()}));return()=>{r=s=null}}):vr}function gb(n,t=ys){return n=n??lK,Tn((e,i)=>{let r,s=!0;e.subscribe(en(i,o=>{const a=t(o);(s||!n(r,a))&&(s=!1,r=a,i.next(o))}))})}function lK(n,t){return n===t}function _b(...n){const t=Qd(n);return Tn((e,i)=>{const r=n.length,s=new Array(r);let o=n.map(()=>!1),a=!1;for(let l=0;l<r;l++)Hn(n[l]).subscribe(en(i,c=>{s[l]=c,!a&&!o[l]&&(o[l]=!0,(a=o.every(ys))&&(o=null))},Fa));e.subscribe(en(i,l=>{if(a){const c=[l,...s];i.next(t?t(...c):c)}}))})}const Ki=new Ne("NgValueAccessor");function vY(n,t){}function yY(n,t){if(1&n&&(re(0,"button",3),Ft(1),pe(2,vY,0,0,"ng-template",4),ue()),2&n){const e=t.$implicit;ie("ngbPanelToggle",e),te(1),eo(" ",e.title," "),te(1),ie("ngTemplateOutlet",null==e.titleTpl?null:e.titleTpl.templateRef)}}function bY(n,t){}function TY(n,t){}function MY(n,t){if(1&n){const e=dn();re(0,"div",8),je("ngbRef",function(r){return Wt(e),$t(ge().$implicit.panelDiv=r)}),re(1,"div",9),pe(2,TY,0,0,"ng-template",4),ue()()}if(2&n){const e=ge().$implicit;L_("id",e.id),wt("aria-labelledby",e.id+"-header"),te(2),ie("ngTemplateOutlet",(null==e.contentTpl?null:e.contentTpl.templateRef)||null)}}Math,Math,Math;const xY=function(n,t){return{$implicit:n,opened:t}};function wY(n,t){if(1&n&&(re(0,"div")(1,"div",5),pe(2,bY,0,0,"ng-template",6),ue(),pe(3,MY,3,3,"div",7),ue()),2&n){const e=t.$implicit,i=ge(),r=Ui(1);Qs("accordion-item "+(e.cardClass||"")),te(1),Qs("accordion-header "+(e.type?"bg-"+e.type:i.type?"bg-"+i.type:"")),Kh("id","",e.id,"-header"),te(1),ie("ngTemplateOutlet",(null==e.headerTpl?null:e.headerTpl.templateRef)||r)("ngTemplateOutletContext",xu(8,xY,e,e.isOpen)),te(1),ie("ngIf",!i.destroyOnHide||e.isOpen||e.transitionRunning)}}const DY=["ngbAccordionBody",""];function RY(n,t){}function SY(n,t){if(1&n){const e=dn();re(0,"button",1),je("click",function(){return Wt(e),$t(ge().close())}),ue()}}const Am=["*"];function CY(n,t){if(1&n){const e=dn();re(0,"button",6),je("click",function(){const s=Wt(e).$implicit,o=ge();return o.focus(),$t(o.select(s.id,o.NgbSlideEventSource.INDICATOR))}),ue()}if(2&n){const e=t.$implicit,i=ge();Je("active",e.id===i.activeId),wt("aria-labelledby","slide-"+e.id)("aria-controls","slide-"+e.id)("aria-selected",e.id===i.activeId)}}function EY(n,t){}function AY(n,t){if(1&n&&(re(0,"div",7)(1,"span",8),ci(2,9),ue(),pe(3,EY,0,0,"ng-template",10),ue()),2&n){const e=t.$implicit,i=t.index,r=t.count;ie("id","slide-"+e.id),te(2),bl(i+1)(r),Tu(2),te(1),ie("ngTemplateOutlet",e.tplRef)}}function IY(n,t){if(1&n){const e=dn();re(0,"button",11),je("click",function(){return Wt(e),$t(ge().arrowLeft())}),xn(1,"span",12),re(2,"span",8),ci(3,13),ue()()}}function PY(n,t){if(1&n){const e=dn();re(0,"button",14),je("click",function(){return Wt(e),$t(ge().arrowRight())}),xn(1,"span",15),re(2,"span",8),ci(3,16),ue()()}}const OY=["ngbDatepickerDayView",""],NY=["month"],FY=["year"];function LY(n,t){if(1&n&&(re(0,"option",5),Ft(1),ue()),2&n){const e=t.$implicit,i=ge();ie("value",e),wt("aria-label",i.i18n.getMonthFullName(e,i.date.year)),te(1),hn(i.i18n.getMonthShortName(e,i.date.year))}}function BY(n,t){if(1&n&&(re(0,"option",5),Ft(1),ue()),2&n){const e=t.$implicit,i=ge();ie("value",e),te(1),hn(i.i18n.getYearNumerals(e))}}function jY(n,t){if(1&n){const e=dn();re(0,"ngb-datepicker-navigation-select",7),je("select",function(r){return Wt(e),$t(ge().select.emit(r))}),ue()}if(2&n){const e=ge();ie("date",e.date)("disabled",e.disabled)("months",e.selectBoxes.months)("years",e.selectBoxes.years)}}function kY(n,t){1&n&&xn(0,"div",0)}function GY(n,t){1&n&&xn(0,"div",0)}function VY(n,t){if(1&n&&(pe(0,kY,1,0,"div",9),re(1,"div",10),Ft(2),ue(),pe(3,GY,1,0,"div",9)),2&n){const e=t.$implicit,i=t.index,r=ge(2);ie("ngIf",i>0),te(2),eo(" ",r.i18n.getMonthLabel(e.firstDate)," "),te(1),ie("ngIf",i!==r.months.length-1)}}function UY(n,t){1&n&&pe(0,VY,4,3,"ng-template",8),2&n&&ie("ngForOf",ge().months)}function HY(n,t){if(1&n&&(re(0,"div",5),Ft(1),ue()),2&n){const e=ge(2);te(1),hn(e.i18n.getWeekLabel())}}function zY(n,t){if(1&n&&(re(0,"div",6),Ft(1),ue()),2&n){const e=t.$implicit;te(1),hn(e)}}function WY(n,t){if(1&n&&(re(0,"div",2),pe(1,HY,2,1,"div",3),pe(2,zY,2,1,"div",4),ue()),2&n){const e=ge();te(1),ie("ngIf",e.datepicker.showWeekNumbers),te(1),ie("ngForOf",e.viewModel.weekdays)}}function $Y(n,t){if(1&n&&(re(0,"div",11),Ft(1),ue()),2&n){const e=ge(2).$implicit,i=ge();te(1),hn(i.i18n.getWeekNumerals(e.number))}}function qY(n,t){}function KY(n,t){if(1&n&&pe(0,qY,0,0,"ng-template",14),2&n){const e=ge().$implicit;ie("ngTemplateOutlet",ge(3).datepicker.dayTemplate)("ngTemplateOutletContext",e.context)}}function XY(n,t){if(1&n){const e=dn();re(0,"div",12),je("click",function(r){const o=Wt(e).$implicit;return ge(3).doSelect(o),$t(r.preventDefault())}),pe(1,KY,1,2,"ng-template",13),ue()}if(2&n){const e=t.$implicit;Je("disabled",e.context.disabled)("hidden",e.hidden)("ngb-dp-today",e.context.today),ie("tabindex",e.tabindex),wt("aria-label",e.ariaLabel),te(1),ie("ngIf",!e.hidden)}}function YY(n,t){if(1&n&&(re(0,"div",8),pe(1,$Y,2,1,"div",9),pe(2,XY,2,9,"div",10),ue()),2&n){const e=ge().$implicit,i=ge();te(1),ie("ngIf",i.datepicker.showWeekNumbers),te(1),ie("ngForOf",e.days)}}function JY(n,t){1&n&&pe(0,YY,3,2,"div",7),2&n&&ie("ngIf",!t.$implicit.collapsed)}const ZY=["defaultDayTemplate"],QY=["content"];function eJ(n,t){if(1&n&&xn(0,"div",7),2&n){const i=t.currentMonth,r=t.selected,s=t.disabled,o=t.focused;ie("date",t.date)("currentMonth",i)("selected",r)("disabled",s)("focused",o)}}function tJ(n,t){if(1&n&&(re(0,"div",12),Ft(1),ue()),2&n){const e=ge().$implicit,i=ge(2);te(1),eo(" ",i.i18n.getMonthLabel(e.firstDate)," ")}}function nJ(n,t){if(1&n&&(re(0,"div",9),pe(1,tJ,2,1,"div",10),xn(2,"ngb-datepicker-month",11),ue()),2&n){const e=t.$implicit,i=ge(2);te(1),ie("ngIf","none"===i.navigation||i.displayMonths>1&&"select"===i.navigation),te(1),ie("month",e.firstDate)}}function iJ(n,t){1&n&&pe(0,nJ,3,2,"div",8),2&n&&ie("ngForOf",ge().model.months)}function rJ(n,t){if(1&n){const e=dn();re(0,"ngb-datepicker-navigation",13),je("navigate",function(r){return Wt(e),$t(ge().onNavigateEvent(r))})("select",function(r){return Wt(e),$t(ge().onNavigateDateSelect(r))}),ue()}if(2&n){const e=ge();ie("date",e.model.firstDate)("months",e.model.months)("disabled",e.model.disabled)("showSelect","select"===e.model.navigation)("prevDisabled",e.model.prevDisabled)("nextDisabled",e.model.nextDisabled)("selectBoxes",e.model.selectBoxes)}}function sJ(n,t){}function oJ(n,t){}const aJ=["dialog"],lJ=["ngbNavOutlet",""];function cJ(n,t){}const uJ=function(n){return{$implicit:n}};function dJ(n,t){if(1&n&&(re(0,"div",2),pe(1,cJ,0,0,"ng-template",3),ue()),2&n){const e=ge().$implicit,i=ge();ie("item",e)("nav",i.nav)("role",i.paneRole),te(1),ie("ngTemplateOutlet",(null==e.contentTpl?null:e.contentTpl.templateRef)||null)("ngTemplateOutletContext",nf(5,uJ,e.active||i.isPanelTransitioning(e)))}}function hJ(n,t){if(1&n&&pe(0,dJ,2,7,"div",1),2&n){const e=t.$implicit,i=ge();ie("ngIf",e.isPanelInDom()||i.isPanelTransitioning(e))}}function fJ(n,t){1&n&&(re(0,"span",9),ci(1,10),ue())}function pJ(n,t){1&n&&(re(0,"span",9),ci(1,11),ue())}function mJ(n,t){1&n&&(re(0,"span",9),ci(1,12),ue())}function gJ(n,t){1&n&&(re(0,"span",9),ci(1,13),ue())}function _J(n,t){1&n&&Ft(0,"...")}function vJ(n,t){1&n&&(re(0,"span",15),Ft(1,"(current)"),ue())}function yJ(n,t){if(1&n&&(Ft(0),pe(1,vJ,2,0,"span",14)),2&n){const e=t.$implicit,i=t.currentPage;eo(" ",e," "),te(1),ie("ngIf",e===i)}}function bJ(n,t){}const TJ=function(n){return{disabled:!0,currentPage:n}};function MJ(n,t){if(1&n&&(re(0,"a",20),pe(1,bJ,0,0,"ng-template",8),ue()),2&n){const e=ge(2).$implicit,i=ge(),r=Ui(9);te(1),ie("ngTemplateOutlet",(null==i.tplEllipsis?null:i.tplEllipsis.templateRef)||r)("ngTemplateOutletContext",nf(2,TJ,e))}}function xJ(n,t){}const wJ=function(n,t,e){return{disabled:n,$implicit:t,currentPage:e}};function DJ(n,t){if(1&n){const e=dn();re(0,"a",21),je("click",function(r){Wt(e);const s=ge().$implicit;return ge(2).selectPage(s),$t(r.preventDefault())}),pe(1,xJ,0,0,"ng-template",8),ue()}if(2&n){const e=ge().$implicit,i=ge(),r=i.disabled,s=i.$implicit,o=ge(),a=Ui(11);wt("tabindex",r?"-1":null)("aria-disabled",r?"true":null),te(1),ie("ngTemplateOutlet",(null==o.tplNumber?null:o.tplNumber.templateRef)||a)("ngTemplateOutletContext",X_(4,wJ,r,e,s))}}function RJ(n,t){if(1&n&&(re(0,"li",17),pe(1,MJ,2,4,"a",18),pe(2,DJ,2,8,"a",19),ue()),2&n){const e=t.$implicit,i=ge(),r=i.$implicit,s=i.disabled,o=ge();Je("active",e===r)("disabled",o.isEllipsis(e)||s),wt("aria-current",e===r?"page":null),te(1),ie("ngIf",o.isEllipsis(e)),te(1),ie("ngIf",!o.isEllipsis(e))}}function SJ(n,t){1&n&&pe(0,RJ,3,7,"li",16),2&n&&ie("ngForOf",t.pages)}function CJ(n,t){}const Yb=function(n,t){return{disabled:n,currentPage:t}};function EJ(n,t){if(1&n){const e=dn();re(0,"li",17)(1,"a",22),je("click",function(r){return Wt(e),ge().selectPage(1),$t(r.preventDefault())}),pe(2,CJ,0,0,"ng-template",8),ue()()}if(2&n){const e=ge(),i=Ui(1);Je("disabled",e.previousDisabled()),te(1),wt("tabindex",e.previousDisabled()?"-1":null)("aria-disabled",e.previousDisabled()?"true":null),te(1),ie("ngTemplateOutlet",(null==e.tplFirst?null:e.tplFirst.templateRef)||i)("ngTemplateOutletContext",xu(6,Yb,e.previousDisabled(),e.page))}}function AJ(n,t){}const IJ=function(n){return{disabled:n}};function PJ(n,t){if(1&n){const e=dn();re(0,"li",17)(1,"a",23),je("click",function(r){Wt(e);const s=ge();return s.selectPage(s.page-1),$t(r.preventDefault())}),pe(2,AJ,0,0,"ng-template",8),ue()()}if(2&n){const e=ge(),i=Ui(3);Je("disabled",e.previousDisabled()),te(1),wt("tabindex",e.previousDisabled()?"-1":null)("aria-disabled",e.previousDisabled()?"true":null),te(1),ie("ngTemplateOutlet",(null==e.tplPrevious?null:e.tplPrevious.templateRef)||i)("ngTemplateOutletContext",nf(6,IJ,e.previousDisabled()))}}function OJ(n,t){}function NJ(n,t){}function FJ(n,t){if(1&n){const e=dn();re(0,"li",17)(1,"a",24),je("click",function(r){Wt(e);const s=ge();return s.selectPage(s.page+1),$t(r.preventDefault())}),pe(2,NJ,0,0,"ng-template",8),ue()()}if(2&n){const e=ge(),i=Ui(5);Je("disabled",e.nextDisabled()),te(1),wt("tabindex",e.nextDisabled()?"-1":null)("aria-disabled",e.nextDisabled()?"true":null),te(1),ie("ngTemplateOutlet",(null==e.tplNext?null:e.tplNext.templateRef)||i)("ngTemplateOutletContext",xu(6,Yb,e.nextDisabled(),e.page))}}function LJ(n,t){}function BJ(n,t){if(1&n){const e=dn();re(0,"li",17)(1,"a",25),je("click",function(r){Wt(e);const s=ge();return s.selectPage(s.pageCount),$t(r.preventDefault())}),pe(2,LJ,0,0,"ng-template",8),ue()()}if(2&n){const e=ge(),i=Ui(7);Je("disabled",e.nextDisabled()),te(1),wt("tabindex",e.nextDisabled()?"-1":null)("aria-disabled",e.nextDisabled()?"true":null),te(1),ie("ngTemplateOutlet",(null==e.tplLast?null:e.tplLast.templateRef)||i)("ngTemplateOutletContext",xu(6,Yb,e.nextDisabled(),e.page))}}const jJ=function(n,t,e){return{$implicit:n,pages:t,disabled:e}};function VJ(n,t){if(1&n&&(re(0,"span"),ci(1,1),function g1(n,t){const e=St();let i;const r=n+on;e.firstCreatePass?(i=function B3(n,t){if(t)for(let e=t.length-1;e>=0;e--){const i=t[e];if(n===i.name)return i}}(t,e.pipeRegistry),e.data[r]=i,i.onDestroy&&(e.destroyHooks??(e.destroyHooks=[])).push(r,i.onDestroy)):i=e.data[r];const s=i.factory||(i.factory=Eo(i.type)),o=br(I);try{const a=bh(!1),l=s();return bh(a),function Nj(n,t,e,i){e>=n.data.length&&(n.data[e]=null,n.blueprint[e]=null),t[e]=i}(e,Z(),r,l),l}finally{br(o)}}(2,"percent"),ue()),2&n){const e=ge();te(2),bl(_1(2,1,e.getValue()/e.max)),Tu(1)}}function UJ(n,t){1&n&&Ft(0),2&n&&hn(100===t.fill?"\u2605":"\u2606")}function HJ(n,t){}function zJ(n,t){if(1&n){const e=dn();re(0,"span",2),Ft(1),ue(),re(2,"span",3),je("mouseenter",function(){const s=Wt(e).index;return $t(ge().enter(s+1))})("click",function(){const s=Wt(e).index;return $t(ge().handleClick(s+1))}),pe(3,HJ,0,0,"ng-template",4),ue()}if(2&n){const e=t.index,i=ge(),r=Ui(1);te(1),eo("(",e<i.nextRate?"*":" ",")"),te(1),_l("cursor",i.isInteractive()?"pointer":"default"),te(1),ie("ngTemplateOutlet",i.starTemplate||i.starTemplateFromContent||r)("ngTemplateOutletContext",i.contexts[e])}}function WJ(n,t){if(1&n){const e=dn();re(0,"button",11),je("click",function(){Wt(e);const r=ge();return $t(r.changeHour(r.hourStep))}),xn(1,"span",12),re(2,"span",13),ci(3,14),ue()()}if(2&n){const e=ge();Je("btn-sm",e.isSmallSize)("btn-lg",e.isLargeSize)("disabled",e.disabled),ie("disabled",e.disabled)}}function $J(n,t){if(1&n){const e=dn();re(0,"button",11),je("click",function(){Wt(e);const r=ge();return $t(r.changeHour(-r.hourStep))}),xn(1,"span",15),re(2,"span",13),ci(3,16),ue()()}if(2&n){const e=ge();Je("btn-sm",e.isSmallSize)("btn-lg",e.isLargeSize)("disabled",e.disabled),ie("disabled",e.disabled)}}function qJ(n,t){if(1&n){const e=dn();re(0,"button",11),je("click",function(){Wt(e);const r=ge();return $t(r.changeMinute(r.minuteStep))}),xn(1,"span",12),re(2,"span",13),ci(3,17),ue()()}if(2&n){const e=ge();Je("btn-sm",e.isSmallSize)("btn-lg",e.isLargeSize)("disabled",e.disabled),ie("disabled",e.disabled)}}function KJ(n,t){if(1&n){const e=dn();re(0,"button",11),je("click",function(){Wt(e);const r=ge();return $t(r.changeMinute(-r.minuteStep))}),xn(1,"span",15),re(2,"span",13),ci(3,18),ue()()}if(2&n){const e=ge();Je("btn-sm",e.isSmallSize)("btn-lg",e.isLargeSize)("disabled",e.disabled),ie("disabled",e.disabled)}}function XJ(n,t){1&n&&(re(0,"div",5),Ft(1,":"),ue())}function YJ(n,t){if(1&n){const e=dn();re(0,"button",11),je("click",function(){Wt(e);const r=ge(2);return $t(r.changeSecond(r.secondStep))}),xn(1,"span",12),re(2,"span",13),ci(3,21),ue()()}if(2&n){const e=ge(2);Je("btn-sm",e.isSmallSize)("btn-lg",e.isLargeSize)("disabled",e.disabled),ie("disabled",e.disabled)}}function JJ(n,t){if(1&n){const e=dn();re(0,"button",11),je("click",function(){Wt(e);const r=ge(2);return $t(r.changeSecond(-r.secondStep))}),xn(1,"span",15),re(2,"span",13),ci(3,22),ue()()}if(2&n){const e=ge(2);Je("btn-sm",e.isSmallSize)("btn-lg",e.isLargeSize)("disabled",e.disabled),ie("disabled",e.disabled)}}function ZJ(n,t){if(1&n){const e=dn();re(0,"div",19),pe(1,YJ,4,7,"button",3),re(2,"input",20),je("change",function(r){return Wt(e),$t(ge().updateSecond(r.target.value))})("blur",function(){return Wt(e),$t(ge().handleBlur())})("input",function(r){return Wt(e),$t(ge().formatInput(r.target))})("keydown.ArrowUp",function(r){Wt(e);const s=ge();return s.changeSecond(s.secondStep),$t(r.preventDefault())})("keydown.ArrowDown",function(r){Wt(e);const s=ge();return s.changeSecond(-s.secondStep),$t(r.preventDefault())}),ue(),pe(3,JJ,4,7,"button",3),ue()}if(2&n){const e=ge();te(1),ie("ngIf",e.spinners),te(1),Je("form-control-sm",e.isSmallSize)("form-control-lg",e.isLargeSize),ie("value",e.formatMinSec(null==e.model?null:e.model.second))("readOnly",e.readonlyInputs)("disabled",e.disabled),te(1),ie("ngIf",e.spinners)}}function QJ(n,t){1&n&&xn(0,"div",5)}function eZ(n,t){if(1&n&&($h(0),ci(1,27),qh()),2&n){const e=ge(2);te(1),bl(e.i18n.getAfternoonPeriod()),Tu(1)}}function tZ(n,t){1&n&&ci(0,28),2&n&&(bl(ge(2).i18n.getMorningPeriod()),Tu(0))}function nZ(n,t){if(1&n){const e=dn();re(0,"div",23)(1,"button",24),je("click",function(){return Wt(e),$t(ge().toggleMeridian())}),pe(2,eZ,2,1,"ng-container",25),pe(3,tZ,1,1,"ng-template",null,26,Si),ue()()}if(2&n){const e=Ui(4),i=ge();te(1),Je("btn-sm",i.isSmallSize)("btn-lg",i.isLargeSize)("disabled",i.disabled),ie("disabled",i.disabled),te(1),ie("ngIf",i.model&&i.model.hour>=12)("ngIfElse",e)}}function iZ(n,t){if(1&n&&(re(0,"strong",3),Ft(1),ue()),2&n){const e=ge();te(1),hn(e.header)}}function rZ(n,t){}function sZ(n,t){if(1&n){const e=dn();re(0,"div",4),pe(1,rZ,0,0,"ng-template",5),re(2,"button",6),je("click",function(){return Wt(e),$t(ge().hide())}),ue()()}if(2&n){const e=ge(),i=Ui(1);te(1),ie("ngTemplateOutlet",e.contentHeaderTpl||i)}}function oZ(n,t){if(1&n&&(re(0,"span"),Ft(1),ue()),2&n){const e=ge().$implicit;Qs(ge().highlightClass),te(1),hn(e)}}function aZ(n,t){1&n&&Ft(0),2&n&&hn(ge().$implicit)}function lZ(n,t){if(1&n&&(pe(0,oZ,2,3,"span",1),pe(1,aZ,1,1,"ng-template",null,2,Si)),2&n){const e=t.odd,i=Ui(2);ie("ngIf",e)("ngIfElse",i)}}function pi(n){return parseInt(`${n}`,10)}function ZP(n){return null!=n?`${n}`:""}function Im(n,t,e=0){return Math.max(Math.min(n,t),e)}function Dc(n){return"string"==typeof n}function Rn(n){return!isNaN(pi(n))}function bn(n){return"number"==typeof n&&isFinite(n)&&Math.floor(n)===n}function Ma(n){return null!=n}function Rc(n){return Rn(n)?`0${n}`.slice(-2):""}function eO(n,t){return n&&n.className&&n.className.split&&n.className.split(/\s+/).indexOf(t)>=0}function Sc(n){return(n||document.body).getBoundingClientRect()}function tO(n){return n.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}const nO={animation:!0,transitionTimerDelayMs:5},mZ=()=>{},{transitionTimerDelayMs:gZ}=nO,Ud=new Map,Jn=(n,t,e,i)=>{let r=i.context||{};const s=Ud.get(t);if(s)switch(i.runningTransition){case"continue":return vr;case"stop":n.run(()=>s.transition$.complete()),r=Object.assign(s.context,r),Ud.delete(t)}const o=e(t,i.animation,r)||mZ;if(!i.animation||"none"===window.getComputedStyle(t).transitionProperty)return n.run(()=>o()),Be(void 0).pipe(function fZ(n){return t=>new Qt(e=>t.subscribe({next:o=>n.run(()=>e.next(o)),error:o=>n.run(()=>e.error(o)),complete:()=>n.run(()=>e.complete())}))}(n));const a=new Kt,l=new Kt,c=a.pipe(function aK(...n){return t=>Fu(t,Be(...n))}(!0));Ud.set(t,{transition$:a,complete:()=>{l.next(),l.complete()},context:r});const u=function pZ(n){const{transitionDelay:t,transitionDuration:e}=window.getComputedStyle(n);return 1e3*(parseFloat(t)+parseFloat(e))}(t);return n.runOutsideAngular(()=>{const d=hi(t,"transitionend").pipe(un(c),ei(({target:f})=>f===t));(function AI(...n){return 1===(n=EI(n)).length?Hn(n[0]):new Qt(function oK(n){return t=>{let e=[];for(let i=0;e&&!t.closed&&i<n.length;i++)e.push(Hn(n[i]).subscribe(en(t,r=>{if(e){for(let s=0;s<e.length;s++)s!==i&&e[s].unsubscribe();e=null}t.next(r)})))}}(n))})(mb(u+gZ).pipe(un(c)),d,l).pipe(un(c)).subscribe(()=>{Ud.delete(t),n.run(()=>{o(),a.next(),a.complete()})})}),a.asObservable()},Jb=(n,t,e)=>{let{direction:i,maxSize:r,dimension:s}=e;const{classList:o}=n;function a(){o.add("collapse"),"show"===i?o.add("show"):o.remove("show")}if(t)return r||(r=function vZ(n,t){if(typeof navigator>"u")return"0px";const{classList:e}=n,i=e.contains("show");i||e.add("show"),n.style[t]="";const r=n.getBoundingClientRect()[t]+"px";return i||e.remove("show"),r}(n,s),e.maxSize=r,n.style[s]="show"!==i?r:"0px",o.remove("collapse"),o.remove("collapsing"),o.remove("show"),Sc(n),o.add("collapsing")),n.style[s]="show"===i?r:"0px",()=>{a(),o.remove("collapsing"),n.style[s]=""};a()};let xa=(()=>{class n{constructor(){this.animation=nO.animation}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),iO=(()=>{class n{constructor(e){this._ngbConfig=e,this.closeOthers=!1}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(e){this._animation=e}}return n.\u0275fac=function(e){return new(e||n)(ye(xa))},n.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),yZ=0,Zb=(()=>{class n{constructor(e){this.templateRef=e}}return n.\u0275fac=function(e){return new(e||n)(I(nn))},n.\u0275dir=he({type:n,selectors:[["ng-template","ngbPanelHeader",""]],standalone:!0}),n})(),rO=(()=>{class n{constructor(e){this.templateRef=e}}return n.\u0275fac=function(e){return new(e||n)(I(nn))},n.\u0275dir=he({type:n,selectors:[["ng-template","ngbPanelTitle",""]],standalone:!0}),n})(),sO=(()=>{class n{constructor(e){this.templateRef=e}}return n.\u0275fac=function(e){return new(e||n)(I(nn))},n.\u0275dir=he({type:n,selectors:[["ng-template","ngbPanelContent",""]],standalone:!0}),n})(),Qb=(()=>{class n{constructor(){this.disabled=!1,this.id="ngb-panel-"+yZ++,this.isOpen=!1,this.initClassDone=!1,this.transitionRunning=!1,this.shown=new Ce,this.hidden=new Ce}ngAfterContentChecked(){this.titleTpl=this.titleTpls.first,this.headerTpl=this.headerTpls.first,this.contentTpl=this.contentTpls.first}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=he({type:n,selectors:[["ngb-panel"]],contentQueries:function(e,i,r){if(1&e&&(Yt(r,rO,4),Yt(r,Zb,4),Yt(r,sO,4)),2&e){let s;Mt(s=xt())&&(i.titleTpls=s),Mt(s=xt())&&(i.headerTpls=s),Mt(s=xt())&&(i.contentTpls=s)}},inputs:{disabled:"disabled",id:"id",title:"title",type:"type",cardClass:"cardClass"},outputs:{shown:"shown",hidden:"hidden"},standalone:!0}),n})(),bZ=(()=>{class n{constructor(e){this._El=e,this.ngbRef=new Ce}ngOnInit(){this.ngbRef.emit(this._El.nativeElement)}ngOnDestroy(){this.ngbRef.emit(null)}}return n.\u0275fac=function(e){return new(e||n)(I(Nt))},n.\u0275dir=he({type:n,selectors:[["","ngbRef",""]],outputs:{ngbRef:"ngbRef"},standalone:!0}),n})(),oO=(()=>{class n{constructor(e,i){this.accordion=e,this.panel=i}set ngbPanelToggle(e){e&&(this.panel=e)}}return n.\u0275fac=function(e){return new(e||n)(I(Oe(()=>eT)),I(Qb,9))},n.\u0275dir=he({type:n,selectors:[["button","ngbPanelToggle",""]],hostAttrs:["type","button"],hostVars:5,hostBindings:function(e,i){1&e&&je("click",function(){return i.accordion.toggle(i.panel.id)}),2&e&&(ir("disabled",i.panel.disabled),wt("aria-expanded",i.panel.isOpen)("aria-controls",i.panel.id),Je("collapsed",!i.panel.isOpen))},inputs:{ngbPanelToggle:"ngbPanelToggle"},standalone:!0}),n})(),eT=(()=>{class n{constructor(e,i,r){this._ngZone=i,this._changeDetector=r,this.activeIds=[],this.destroyOnHide=!0,this.panelChange=new Ce,this.shown=new Ce,this.hidden=new Ce,this.animation=e.animation,this.type=e.type,this.closeOtherPanels=e.closeOthers}isExpanded(e){return this.activeIds.indexOf(e)>-1}expand(e){this._changeOpenState(this._findPanelById(e),!0)}expandAll(){this.closeOtherPanels?0===this.activeIds.length&&this.panels.length&&this._changeOpenState(this.panels.first,!0):this.panels.forEach(e=>this._changeOpenState(e,!0))}collapse(e){this._changeOpenState(this._findPanelById(e),!1)}collapseAll(){this.panels.forEach(e=>{this._changeOpenState(e,!1)})}toggle(e){const i=this._findPanelById(e);i&&this._changeOpenState(i,!i.isOpen)}ngAfterContentChecked(){Dc(this.activeIds)&&(this.activeIds=this.activeIds.split(/\s*,\s*/)),this.panels.forEach(e=>{e.isOpen=!e.disabled&&this.activeIds.indexOf(e.id)>-1}),this.activeIds.length>1&&this.closeOtherPanels&&(this._closeOthers(this.activeIds[0],!1),this._updateActiveIds()),this._ngZone.onStable.pipe(Bn(1)).subscribe(()=>{this.panels.forEach(e=>{const i=e.panelDiv;i?e.initClassDone||(e.initClassDone=!0,Jn(this._ngZone,i,Jb,{animation:!1,runningTransition:"continue",context:{direction:e.isOpen?"show":"hide",dimension:"height"}})):e.initClassDone=!1})})}_changeOpenState(e,i){if(null!=e&&!e.disabled&&e.isOpen!==i){let r=!1;this.panelChange.emit({panelId:e.id,nextState:i,preventDefault:()=>{r=!0}}),r||(e.isOpen=i,e.transitionRunning=!0,i&&this.closeOtherPanels&&this._closeOthers(e.id),this._updateActiveIds(),this._runTransitions(this.animation))}}_closeOthers(e,i=!0){this.panels.forEach(r=>{r.id!==e&&r.isOpen&&(r.isOpen=!1,r.transitionRunning=i)})}_findPanelById(e){return this.panels.find(i=>i.id===e)||null}_updateActiveIds(){this.activeIds=this.panels.filter(e=>e.isOpen&&!e.disabled).map(e=>e.id)}_runTransitions(e){this._changeDetector.detectChanges(),this.panels.forEach(i=>{i.transitionRunning&&Jn(this._ngZone,i.panelDiv,Jb,{animation:e,runningTransition:"stop",context:{direction:i.isOpen?"show":"hide",dimension:"height"}}).subscribe(()=>{i.transitionRunning=!1;const{id:s}=i;i.isOpen?(i.shown.emit(),this.shown.emit(s)):(i.hidden.emit(),this.hidden.emit(s))})})}}return n.\u0275fac=function(e){return new(e||n)(I(iO),I(Dt),I(Hi))},n.\u0275cmp=Tt({type:n,selectors:[["ngb-accordion"]],contentQueries:function(e,i,r){if(1&e&&Yt(r,Qb,4),2&e){let s;Mt(s=xt())&&(i.panels=s)}},hostAttrs:["role","tablist",1,"accordion"],hostVars:1,hostBindings:function(e,i){2&e&&wt("aria-multiselectable",!i.closeOtherPanels)},inputs:{animation:"animation",activeIds:"activeIds",closeOtherPanels:["closeOthers","closeOtherPanels"],destroyOnHide:"destroyOnHide",type:"type"},outputs:{panelChange:"panelChange",shown:"shown",hidden:"hidden"},exportAs:["ngbAccordion"],standalone:!0,features:[Nn],decls:3,vars:1,consts:[["ngbPanelHeader",""],["t",""],["ngFor","",3,"ngForOf"],[1,"accordion-button",3,"ngbPanelToggle"],[3,"ngTemplateOutlet"],["role","tab",3,"id"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["role","tabpanel",3,"id","ngbRef",4,"ngIf"],["role","tabpanel",3,"id","ngbRef"],[1,"accordion-body"]],template:function(e,i){1&e&&(pe(0,yY,3,3,"ng-template",0,1,Si),pe(2,wY,4,11,"ng-template",2)),2&e&&(te(2),ie("ngForOf",i.panels))},dependencies:[Wr,cs,oO,bZ,Zb,sr],encapsulation:2}),n})(),TZ=(()=>{class n{constructor(e){this._ngbConfig=e,this.horizontal=!1}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(e){this._animation=e}}return n.\u0275fac=function(e){return new(e||n)(ye(xa))},n.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),aO=(()=>{class n{constructor(e,i,r){this._element=e,this._zone=r,this._afterInit=!1,this._isCollapsed=!1,this.ngbCollapseChange=new Ce,this.shown=new Ce,this.hidden=new Ce,this.animation=i.animation,this.horizontal=i.horizontal}set collapsed(e){this._isCollapsed!==e&&(this._isCollapsed=e,this._afterInit&&this._runTransitionWithEvents(e,this.animation))}ngOnInit(){this._runTransition(this._isCollapsed,!1),this._afterInit=!0}toggle(e=this._isCollapsed){this.collapsed=!e,this.ngbCollapseChange.next(this._isCollapsed)}_runTransition(e,i){return Jn(this._zone,this._element.nativeElement,Jb,{animation:i,runningTransition:"stop",context:{direction:e?"hide":"show",dimension:this.horizontal?"width":"height"}})}_runTransitionWithEvents(e,i){this._runTransition(e,i).subscribe(()=>{e?this.hidden.emit():this.shown.emit()})}}return n.\u0275fac=function(e){return new(e||n)(I(Nt),I(TZ),I(Dt))},n.\u0275dir=he({type:n,selectors:[["","ngbCollapse",""]],hostVars:2,hostBindings:function(e,i){2&e&&Je("collapse-horizontal",i.horizontal)},inputs:{animation:"animation",collapsed:["ngbCollapse","collapsed"],horizontal:"horizontal"},outputs:{ngbCollapseChange:"ngbCollapseChange",shown:"shown",hidden:"hidden"},exportAs:["ngbCollapse"],standalone:!0}),n})(),MZ=0,lO=(()=>{class n{constructor(e){this._item=e}template(){return!1===this._item.destroyOnHide||this._item.animatingBodyCollapse?this._bodyTpl:null}}return n.\u0275fac=function(e){return new(e||n)(I(Oe(()=>wa)))},n.\u0275cmp=Tt({type:n,selectors:[["","ngbAccordionBody",""]],contentQueries:function(e,i,r){if(1&e&&Yt(r,nn,7),2&e){let s;Mt(s=xt())&&(i._bodyTpl=s.first)}},hostVars:2,hostBindings:function(e,i){2&e&&Je("accordion-body",!0)},standalone:!0,features:[Nn],attrs:DY,decls:1,vars:1,consts:[[3,"ngTemplateOutlet"]],template:function(e,i){1&e&&pe(0,RY,0,0,"ng-template",0),2&e&&ie("ngTemplateOutlet",i.template())},dependencies:[cs],encapsulation:2}),n})(),cO=(()=>{class n{constructor(e,i){this.item=e,this.ngbCollapse=i}}return n.\u0275fac=function(e){return new(e||n)(I(Oe(()=>wa)),I(aO))},n.\u0275dir=he({type:n,selectors:[["","ngbAccordionCollapse",""]],hostAttrs:["role","region"],hostVars:4,hostBindings:function(e,i){2&e&&(ir("id",i.item.collapseId),wt("aria-labelledby",i.item.toggleId),Je("accordion-collapse",!0))},exportAs:["ngbAccordionCollapse"],standalone:!0,features:[uu([aO])]}),n})(),wa=(()=>{class n{constructor(e,i){this._accordion=e,this._cd=i,this._subscriptions=[],this._collapsed=!0,this._id="ngb-accordion-item-"+MZ++,this.animatingBodyCollapse=!1,this.destroyOnHide=this._accordion.destroyOnHide,this.disabled=!1,this.shown=new Ce,this.hidden=new Ce}set id(e){Dc(e)&&""!==e&&(this._id=e)}set collapsed(e){this.collapsed!==e&&(this._collapsed=e,this._cd.markForCheck(),this._collapsed||(this.animatingBodyCollapse=!0,this._cd.detectChanges()),this._collapse.ngbCollapse.animation=this._accordion.animation,this._collapse.ngbCollapse.collapsed=e)}get collapsed(){return this._collapsed}get id(){return`${this._id}`}get toggleId(){return`${this.id}-toggle`}get collapseId(){return`${this.id}-collapse`}ngAfterContentInit(){const{ngbCollapse:e}=this._collapse;e.animation=!1,e.collapsed=this.collapsed,e.animation=this._accordion.animation,this._subscriptions.push(e.hidden.subscribe(()=>{this.animatingBodyCollapse=!1,this.hidden.emit(),this._accordion.hidden.emit(this.id)}),e.shown.subscribe(()=>{this.shown.emit(),this._accordion.shown.emit(this.id)}))}ngOnDestroy(){this._subscriptions.forEach(e=>e.unsubscribe())}toggle(){this.collapsed=!this.collapsed}}return n.\u0275fac=function(e){return new(e||n)(I(Oe(()=>tT)),I(Hi))},n.\u0275dir=he({type:n,selectors:[["","ngbAccordionItem",""]],contentQueries:function(e,i,r){if(1&e&&Yt(r,cO,7),2&e){let s;Mt(s=xt())&&(i._collapse=s.first)}},hostVars:3,hostBindings:function(e,i){2&e&&(ir("id",i.id),Je("accordion-item",!0))},inputs:{id:["ngbAccordionItem","id"],destroyOnHide:"destroyOnHide",disabled:"disabled",collapsed:"collapsed"},outputs:{shown:"shown",hidden:"hidden"},exportAs:["ngbAccordionItem"],standalone:!0}),n})(),tT=(()=>{class n{constructor(e){this.destroyOnHide=!0,this.shown=new Ce,this.hidden=new Ce,this.animation=e.animation,this.closeOthers=e.closeOthers}toggle(e){const i=this._getItem(e);if(i){const r=i.collapsed;this._items.forEach(s=>{s===i?s.toggle():this.closeOthers&&r&&(s.collapsed=!0)})}}expand(e){const i=this._getItem(e);i&&this._items.forEach(r=>{r===i?i.collapsed=!1:this.closeOthers&&(r.collapsed=!0)})}expandAll(){this.closeOthers?this._items.find(e=>!e.collapsed)||(this._items.get(0).collapsed=!1):this._items.forEach(e=>{e.collapsed=!1})}collapse(e){const i=this._getItem(e);i&&(i.collapsed=!0)}collapseAll(){this._items.forEach(e=>e.collapsed=!0)}isExpanded(e){const i=this._getItem(e);return!!i&&!i.collapsed}_getItem(e){return this._items.find(i=>i.id===e)}}return n.\u0275fac=function(e){return new(e||n)(I(iO))},n.\u0275dir=he({type:n,selectors:[["","ngbAccordion",""]],contentQueries:function(e,i,r){if(1&e&&Yt(r,wa,4),2&e){let s;Mt(s=xt())&&(i._items=s)}},hostVars:2,hostBindings:function(e,i){2&e&&Je("accordion",!0)},inputs:{animation:"animation",closeOthers:"closeOthers",destroyOnHide:"destroyOnHide"},outputs:{shown:"shown",hidden:"hidden"},exportAs:["ngbAccordion"],standalone:!0}),n})(),dO=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ht({type:n}),n.\u0275inj=jt({imports:[eT,lO]}),n})();const DZ=({classList:n})=>{n.remove("show")};let RZ=(()=>{class n{constructor(e){this._ngbConfig=e,this.dismissible=!0,this.type="warning"}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(e){this._animation=e}}return n.\u0275fac=function(e){return new(e||n)(ye(xa))},n.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),SZ=(()=>{class n{constructor(e,i,r,s){this._renderer=i,this._element=r,this._zone=s,this.closed=new Ce,this.dismissible=e.dismissible,this.type=e.type,this.animation=e.animation}close(){const e=Jn(this._zone,this._element.nativeElement,DZ,{animation:this.animation,runningTransition:"continue"});return e.subscribe(()=>this.closed.emit()),e}ngOnChanges(e){const i=e.type;i&&!i.firstChange&&(this._renderer.removeClass(this._element.nativeElement,`alert-${i.previousValue}`),this._renderer.addClass(this._element.nativeElement,`alert-${i.currentValue}`))}ngOnInit(){this._renderer.addClass(this._element.nativeElement,`alert-${this.type}`)}}return n.\u0275fac=function(e){return new(e||n)(I(RZ),I(Vi),I(Nt),I(Dt))},n.\u0275cmp=Tt({type:n,selectors:[["ngb-alert"]],hostAttrs:["role","alert",1,"alert","show"],hostVars:4,hostBindings:function(e,i){2&e&&Je("fade",i.animation)("alert-dismissible",i.dismissible)},inputs:{animation:"animation",dismissible:"dismissible",type:"type"},outputs:{closed:"closed"},exportAs:["ngbAlert"],standalone:!0,features:[gn,Nn],ngContentSelectors:Am,decls:2,vars:1,consts:function(){let t;return t=$localize`:@@ngb.alert.close:Close`,[["type","button","class","btn-close","aria-label",t,3,"click",4,"ngIf"],["type","button","aria-label",t,1,"btn-close",3,"click"]]},template:function(e,i){1&e&&(fu(),pu(0),pe(1,SY,1,0,"button",0)),2&e&&(te(1),ie("ngIf",i.dismissible))},dependencies:[sr],styles:["ngb-alert{display:block}\n"],encapsulation:2,changeDetection:0}),n})(),hO=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ht({type:n}),n.\u0275inj=jt({imports:[SZ]}),n})();var wo=(()=>(function(n){n.START="start",n.END="end"}(wo||(wo={})),wo))();const fO=({classList:n})=>n.contains("carousel-item-start")||n.contains("carousel-item-end"),Hd=n=>{n.remove("carousel-item-start"),n.remove("carousel-item-end")},Pm=n=>{Hd(n),n.remove("carousel-item-prev"),n.remove("carousel-item-next")},CZ=(n,t,{direction:e})=>{const{classList:i}=n;return t?(fO(n)?Hd(i):(i.add("carousel-item-"+(e===wo.START?"next":"prev")),Sc(n),i.add("carousel-item-"+e)),()=>{Pm(i),i.add("active")}):(Hd(i),Pm(i),void i.add("active"))},EZ=(n,t,{direction:e})=>{const{classList:i}=n;return t?(fO(n)?Hd(i):i.add("carousel-item-"+e),()=>{Pm(i),i.remove("active")}):(Hd(i),Pm(i),void i.remove("active"))};let AZ=(()=>{class n{constructor(e){this._ngbConfig=e,this.interval=5e3,this.wrap=!0,this.keyboard=!0,this.pauseOnHover=!0,this.pauseOnFocus=!0,this.showNavigationArrows=!0,this.showNavigationIndicators=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(e){this._animation=e}}return n.\u0275fac=function(e){return new(e||n)(ye(xa))},n.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),IZ=0,PZ=(()=>{class n{constructor(e){this.tplRef=e,this.id="ngb-slide-"+IZ++,this.slid=new Ce}}return n.\u0275fac=function(e){return new(e||n)(I(nn))},n.\u0275dir=he({type:n,selectors:[["ng-template","ngbSlide",""]],inputs:{id:"id"},outputs:{slid:"slid"},standalone:!0}),n})(),OZ=(()=>{class n{constructor(e,i,r,s,o){this._platformId=i,this._ngZone=r,this._cd=s,this._container=o,this.NgbSlideEventSource=Da,this._destroy$=new Kt,this._interval$=new Qn(0),this._mouseHover$=new Qn(!1),this._focused$=new Qn(!1),this._pauseOnHover$=new Qn(!1),this._pauseOnFocus$=new Qn(!1),this._pause$=new Qn(!1),this._wrap$=new Qn(!1),this.slide=new Ce,this.slid=new Ce,this._transitionIds=null,this.animation=e.animation,this.interval=e.interval,this.wrap=e.wrap,this.keyboard=e.keyboard,this.pauseOnHover=e.pauseOnHover,this.pauseOnFocus=e.pauseOnFocus,this.showNavigationArrows=e.showNavigationArrows,this.showNavigationIndicators=e.showNavigationIndicators}set interval(e){this._interval$.next(e)}get interval(){return this._interval$.value}set wrap(e){this._wrap$.next(e)}get wrap(){return this._wrap$.value}set pauseOnHover(e){this._pauseOnHover$.next(e)}get pauseOnHover(){return this._pauseOnHover$.value}set pauseOnFocus(e){this._pauseOnFocus$.next(e)}get pauseOnFocus(){return this._pauseOnFocus$.value}set mouseHover(e){this._mouseHover$.next(e)}get mouseHover(){return this._mouseHover$.value}set focused(e){this._focused$.next(e)}get focused(){return this._focused$.value}arrowLeft(){this.focus(),this.prev(Da.ARROW_LEFT)}arrowRight(){this.focus(),this.next(Da.ARROW_RIGHT)}ngAfterContentInit(){(function xU(n){return n===zR})(this._platformId)&&this._ngZone.runOutsideAngular(()=>{const e=Af([this.slide.pipe(tt(i=>i.current),If(this.activeId)),this._wrap$,this.slides.changes.pipe(If(null))]).pipe(tt(([i,r])=>{const s=this.slides.toArray(),o=this._getSlideIdxById(i);return r?s.length>1:o<s.length-1}),gb());Af([this._pause$,this._pauseOnHover$,this._mouseHover$,this._pauseOnFocus$,this._focused$,this._interval$,e]).pipe(tt(([i,r,s,o,a,l,c])=>i||r&&s||o&&a||!c?0:l),gb(),Sr(i=>i>0?mb(i,i):II),un(this._destroy$)).subscribe(()=>this._ngZone.run(()=>this.next(Da.TIMER)))}),this.slides.changes.pipe(un(this._destroy$)).subscribe(()=>{this._transitionIds?.forEach(e=>(n=>{Ud.get(n)?.complete()})(this._getSlideElement(e))),this._transitionIds=null,this._cd.markForCheck(),this._ngZone.onStable.pipe(Bn(1)).subscribe(()=>{for(const{id:e}of this.slides){const i=this._getSlideElement(e);e===this.activeId?i.classList.add("active"):i.classList.remove("active")}})})}ngAfterContentChecked(){let e=this._getSlideById(this.activeId);this.activeId=e?e.id:this.slides.length?this.slides.first.id:""}ngAfterViewInit(){if(this.activeId){const e=this._getSlideElement(this.activeId);e&&e.classList.add("active")}}ngOnDestroy(){this._destroy$.next()}select(e,i){this._cycleToSelected(e,this._getSlideEventDirection(this.activeId,e),i)}prev(e){this._cycleToSelected(this._getPrevSlide(this.activeId),wo.END,e)}next(e){this._cycleToSelected(this._getNextSlide(this.activeId),wo.START,e)}pause(){this._pause$.next(!0)}cycle(){this._pause$.next(!1)}focus(){this._container.nativeElement.focus()}_cycleToSelected(e,i,r){const s=this._transitionIds;if(s&&(s[0]!==e||s[1]!==this.activeId))return;let o=this._getSlideById(e);if(o&&o.id!==this.activeId){this._transitionIds=[this.activeId,e],this.slide.emit({prev:this.activeId,current:o.id,direction:i,paused:this._pause$.value,source:r});const a={animation:this.animation,runningTransition:"stop",context:{direction:i}},l=[],c=this._getSlideById(this.activeId);if(c){const f=Jn(this._ngZone,this._getSlideElement(c.id),EZ,a);f.subscribe(()=>{c.slid.emit({isShown:!1,direction:i,source:r})}),l.push(f)}const u=this.activeId;this.activeId=o.id;const d=this._getSlideById(this.activeId),h=Jn(this._ngZone,this._getSlideElement(o.id),CZ,a);h.subscribe(()=>{d?.slid.emit({isShown:!0,direction:i,source:r})}),l.push(h),gm(...l).pipe(Bn(1)).subscribe(()=>{this._transitionIds=null,this.slid.emit({prev:u,current:o.id,direction:i,paused:this._pause$.value,source:r})})}this._cd.markForCheck()}_getSlideEventDirection(e,i){return this._getSlideIdxById(e)>this._getSlideIdxById(i)?wo.END:wo.START}_getSlideById(e){return this.slides.find(i=>i.id===e)||null}_getSlideIdxById(e){const i=this._getSlideById(e);return null!=i?this.slides.toArray().indexOf(i):-1}_getNextSlide(e){const i=this.slides.toArray(),r=this._getSlideIdxById(e);return r===i.length-1?this.wrap?i[0].id:i[i.length-1].id:i[r+1].id}_getPrevSlide(e){const i=this.slides.toArray(),r=this._getSlideIdxById(e);return 0===r?this.wrap?i[i.length-1].id:i[0].id:i[r-1].id}_getSlideElement(e){return this._container.nativeElement.querySelector(`#slide-${e}`)}}return n.\u0275fac=function(e){return new(e||n)(I(AZ),I(uv),I(Dt),I(Hi),I(Nt))},n.\u0275cmp=Tt({type:n,selectors:[["ngb-carousel"]],contentQueries:function(e,i,r){if(1&e&&Yt(r,PZ,4),2&e){let s;Mt(s=xt())&&(i.slides=s)}},hostAttrs:["tabIndex","0",1,"carousel","slide"],hostVars:3,hostBindings:function(e,i){1&e&&je("keydown.arrowLeft",function(){return i.keyboard&&i.arrowLeft()})("keydown.arrowRight",function(){return i.keyboard&&i.arrowRight()})("mouseenter",function(){return i.mouseHover=!0})("mouseleave",function(){return i.mouseHover=!1})("focusin",function(){return i.focused=!0})("focusout",function(){return i.focused=!1}),2&e&&(wt("aria-activedescendant","slide-"+i.activeId),_l("display","block"))},inputs:{animation:"animation",activeId:"activeId",interval:"interval",wrap:"wrap",keyboard:"keyboard",pauseOnHover:"pauseOnHover",pauseOnFocus:"pauseOnFocus",showNavigationArrows:"showNavigationArrows",showNavigationIndicators:"showNavigationIndicators"},outputs:{slide:"slide",slid:"slid"},exportAs:["ngbCarousel"],standalone:!0,features:[Nn],decls:6,vars:6,consts:function(){let t,e,i;return t=$localize`:Currently selected slide number read by screen reader@@ngb.carousel.slide-number: Slide ${"\ufffd0\ufffd"}:INTERPOLATION: of ${"\ufffd1\ufffd"}:INTERPOLATION_1: `,e=$localize`:@@ngb.carousel.previous:Previous`,i=$localize`:@@ngb.carousel.next:Next`,[["role","tablist",1,"carousel-indicators"],["type","button","data-bs-target","","role","tab",3,"active","click",4,"ngFor","ngForOf"],[1,"carousel-inner"],["class","carousel-item","role","tabpanel",3,"id",4,"ngFor","ngForOf"],["class","carousel-control-prev","type","button",3,"click",4,"ngIf"],["class","carousel-control-next","type","button",3,"click",4,"ngIf"],["type","button","data-bs-target","","role","tab",3,"click"],["role","tabpanel",1,"carousel-item",3,"id"],[1,"visually-hidden"],t,[3,"ngTemplateOutlet"],["type","button",1,"carousel-control-prev",3,"click"],["aria-hidden","true",1,"carousel-control-prev-icon"],e,["type","button",1,"carousel-control-next",3,"click"],["aria-hidden","true",1,"carousel-control-next-icon"],i]},template:function(e,i){1&e&&(re(0,"div",0),pe(1,CY,1,5,"button",1),ue(),re(2,"div",2),pe(3,AY,4,4,"div",3),ue(),pe(4,IY,4,0,"button",4),pe(5,PY,4,0,"button",5)),2&e&&(Je("visually-hidden",!i.showNavigationIndicators),te(1),ie("ngForOf",i.slides),te(2),ie("ngForOf",i.slides),te(1),ie("ngIf",i.showNavigationArrows),te(1),ie("ngIf",i.showNavigationArrows))},dependencies:[Wr,cs,sr],encapsulation:2,changeDetection:0}),n})();var Da=(()=>(function(n){n.TIMER="timer",n.ARROW_LEFT="arrowLeft",n.ARROW_RIGHT="arrowRight",n.INDICATOR="indicator"}(Da||(Da={})),Da))();let pO=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ht({type:n}),n.\u0275inj=jt({imports:[OZ]}),n})(),mO=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ht({type:n}),n.\u0275inj=jt({}),n})();class Zn{constructor(t,e,i){this.year=bn(t)?t:null,this.month=bn(e)?e:null,this.day=bn(i)?i:null}static from(t){return t instanceof Zn?t:t?new Zn(t.year,t.month,t.day):null}equals(t){return null!=t&&this.year===t.year&&this.month===t.month&&this.day===t.day}before(t){return!!t&&(this.year===t.year?this.month===t.month?this.day!==t.day&&this.day<t.day:this.month<t.month:this.year<t.year)}after(t){return!!t&&(this.year===t.year?this.month===t.month?this.day!==t.day&&this.day>t.day:this.month>t.month:this.year>t.year)}}function Cc(n,t){return!function NZ(n,t){return!n&&!t||!!n&&!!t&&n.equals(t)}(n,t)}function gO(n,t){return!(!n&&!t||n&&t&&n.year===t.year&&n.month===t.month)}function Om(n,t,e){return n&&t&&n.before(t)?t:n&&e&&n.after(e)?e:n||null}function nT(n,t){const{minDate:e,maxDate:i,disabled:r,markDisabled:s}=t;return!(null==n||r||s&&s(n,{year:n.year,month:n.month})||e&&n.before(e)||i&&n.after(i))}function _O(n){return new Zn(n.getFullYear(),n.getMonth()+1,n.getDate())}function Nm(n){const t=new Date(n.year,n.month-1,n.day,12);return isNaN(t.getTime())||t.setFullYear(n.year),t}let Fm=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=de({token:n,factory:function(){return function HZ(){return new zZ}()},providedIn:"root"}),n})(),zZ=(()=>{class n extends Fm{getDaysPerWeek(){return 7}getMonths(){return[1,2,3,4,5,6,7,8,9,10,11,12]}getWeeksPerMonth(){return 6}getNext(e,i="d",r=1){let s=Nm(e),o=!0,a=s.getMonth();switch(i){case"y":s.setFullYear(s.getFullYear()+r);break;case"m":a+=r,s.setMonth(a),a%=12,a<0&&(a+=12);break;case"d":s.setDate(s.getDate()+r),o=!1;break;default:return e}return o&&s.getMonth()!==a&&s.setDate(0),_O(s)}getPrev(e,i="d",r=1){return this.getNext(e,i,-r)}getWeekday(e){let r=Nm(e).getDay();return 0===r?7:r}getWeekNumber(e,i){7===i&&(i=0);const o=Nm(e[(11-i)%7]);o.setDate(o.getDate()+4-(o.getDay()||7));const a=o.getTime();return o.setMonth(0),o.setDate(1),Math.floor(Math.round((a-o.getTime())/864e5)/7)+1}getToday(){return _O(new Date)}isValid(e){if(!(e&&bn(e.year)&&bn(e.month)&&bn(e.day)&&0!==e.year))return!1;const i=Nm(e);return!isNaN(i.getTime())&&i.getFullYear()===e.year&&i.getMonth()+1===e.month&&i.getDate()===e.day}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=Xt(n)))(i||n)}}(),n.\u0275prov=de({token:n,factory:n.\u0275fac}),n})(),Ra=(()=>{class n{getMonthLabel(e){return`${this.getMonthFullName(e.month,e.year)} ${this.getYearNumerals(e.year)}`}getDayNumerals(e){return`${e.day}`}getWeekNumerals(e){return`${e}`}getYearNumerals(e){return`${e}`}getWeekLabel(){return""}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=de({token:n,factory:function(e){let i=null;return i=e?new e:function WZ(n){return new $Z(n)}(ye(rr)),i},providedIn:"root"}),n})(),$Z=(()=>{class n extends Ra{constructor(e){super(),this._locale=e,this._monthsShort=Cv(e,an.Standalone,st.Abbreviated),this._monthsFull=Cv(e,an.Standalone,st.Wide)}getWeekdayLabel(e,i){const r=RR(this._locale,an.Standalone,void 0===i?st.Short:i);return r.map((o,a)=>r[(a+1)%7])[e-1]||""}getMonthShortName(e){return this._monthsShort[e-1]||""}getMonthFullName(e){return this._monthsFull[e-1]||""}getDayAriaLabel(e){return CR(new Date(e.year,e.month-1,e.day),"fullDate",this._locale)}}return n.\u0275fac=function(e){return new(e||n)(ye(rr))},n.\u0275prov=de({token:n,factory:n.\u0275fac}),n})(),iT=(()=>{class n{constructor(e,i){this._calendar=e,this._i18n=i,this._VALIDATORS={dayTemplateData:r=>{if(this._state.dayTemplateData!==r)return{dayTemplateData:r}},displayMonths:r=>{if(bn(r=pi(r))&&r>0&&this._state.displayMonths!==r)return{displayMonths:r}},disabled:r=>{if(this._state.disabled!==r)return{disabled:r}},firstDayOfWeek:r=>{if(bn(r=pi(r))&&r>=0&&this._state.firstDayOfWeek!==r)return{firstDayOfWeek:r}},focusVisible:r=>{if(this._state.focusVisible!==r&&!this._state.disabled)return{focusVisible:r}},markDisabled:r=>{if(this._state.markDisabled!==r)return{markDisabled:r}},maxDate:r=>{const s=this.toValidDate(r,null);if(Cc(this._state.maxDate,s))return{maxDate:s}},minDate:r=>{const s=this.toValidDate(r,null);if(Cc(this._state.minDate,s))return{minDate:s}},navigation:r=>{if(this._state.navigation!==r)return{navigation:r}},outsideDays:r=>{if(this._state.outsideDays!==r)return{outsideDays:r}},weekdays:r=>{const s=!0===r||!1===r?st.Short:r,o=!0!==r&&!1!==r||r;if(this._state.weekdayWidth!==s||this._state.weekdaysVisible!==o)return{weekdayWidth:s,weekdaysVisible:o}}},this._model$=new Kt,this._dateSelect$=new Kt,this._state={dayTemplateData:null,markDisabled:null,maxDate:null,minDate:null,disabled:!1,displayMonths:1,firstDate:null,firstDayOfWeek:1,lastDate:null,focusDate:null,focusVisible:!1,months:[],navigation:"select",outsideDays:"visible",prevDisabled:!1,nextDisabled:!1,selectedDate:null,selectBoxes:{years:[],months:[]},weekdayWidth:st.Short,weekdaysVisible:!0}}get model$(){return this._model$.pipe(ei(e=>e.months.length>0))}get dateSelect$(){return this._dateSelect$.pipe(ei(e=>null!==e))}set(e){let i=Object.keys(e).map(r=>this._VALIDATORS[r](e[r])).reduce((r,s)=>({...r,...s}),{});Object.keys(i).length>0&&this._nextState(i)}focus(e){const i=this.toValidDate(e,null);null!=i&&!this._state.disabled&&Cc(this._state.focusDate,i)&&this._nextState({focusDate:e})}focusSelect(){nT(this._state.focusDate,this._state)&&this.select(this._state.focusDate,{emitEvent:!0})}open(e){const i=this.toValidDate(e,this._calendar.getToday());null!=i&&!this._state.disabled&&(!this._state.firstDate||gO(this._state.firstDate,i))&&this._nextState({firstDate:i})}select(e,i={}){const r=this.toValidDate(e,null);null!=r&&!this._state.disabled&&(Cc(this._state.selectedDate,r)&&this._nextState({selectedDate:r}),i.emitEvent&&nT(r,this._state)&&this._dateSelect$.next(r))}toValidDate(e,i){const r=Zn.from(e);return void 0===i&&(i=this._calendar.getToday()),this._calendar.isValid(r)?r:i}getMonth(e){for(let i of this._state.months)if(e.month===i.number&&e.year===i.year)return i;throw new Error(`month ${e.month} of year ${e.year} not found`)}_nextState(e){const i=this._updateState(e);this._patchContexts(i),this._state=i,this._model$.next(this._state)}_patchContexts(e){const{months:i,displayMonths:r,selectedDate:s,focusDate:o,focusVisible:a,disabled:l,outsideDays:c}=e;e.months.forEach(u=>{u.weeks.forEach(d=>{d.days.forEach(h=>{o&&(h.context.focused=o.equals(h.date)&&a),h.tabindex=!l&&o&&h.date.equals(o)&&o.month===u.number?0:-1,!0===l&&(h.context.disabled=!0),void 0!==s&&(h.context.selected=null!==s&&s.equals(h.date)),u.number!==h.date.month&&(h.hidden="hidden"===c||"collapsed"===c||r>1&&h.date.after(i[0].firstDate)&&h.date.before(i[r-1].lastDate))})})})}_updateState(e){const i=Object.assign({},this._state,e);let r=i.firstDate;if(("minDate"in e||"maxDate"in e)&&(function FZ(n,t){if(t&&n&&t.before(n))throw new Error(`'maxDate' ${t} should be greater than 'minDate' ${n}`)}(i.minDate,i.maxDate),i.focusDate=Om(i.focusDate,i.minDate,i.maxDate),i.firstDate=Om(i.firstDate,i.minDate,i.maxDate),r=i.focusDate),"disabled"in e&&(i.focusVisible=!1),"selectedDate"in e&&0===this._state.months.length&&(r=i.selectedDate),"focusVisible"in e||"focusDate"in e&&(i.focusDate=Om(i.focusDate,i.minDate,i.maxDate),r=i.focusDate,0!==i.months.length&&i.focusDate&&!i.focusDate.before(i.firstDate)&&!i.focusDate.after(i.lastDate)))return i;if("firstDate"in e&&(i.firstDate=Om(i.firstDate,i.minDate,i.maxDate),r=i.firstDate),r){const o=function GZ(n,t,e,i,r){const{displayMonths:s,months:o}=e,a=o.splice(0,o.length);return Array.from({length:s},(c,u)=>{const d=Object.assign(n.getNext(t,"m",u),{day:1});if(o[u]=null,!r){const h=a.findIndex(f=>f.firstDate.equals(d));-1!==h&&(o[u]=a.splice(h,1)[0])}return d}).forEach((c,u)=>{null===o[u]&&(o[u]=function VZ(n,t,e,i,r={}){const{dayTemplateData:s,minDate:o,maxDate:a,firstDayOfWeek:l,markDisabled:c,outsideDays:u,weekdayWidth:d,weekdaysVisible:h}=e,f=n.getToday();r.firstDate=null,r.lastDate=null,r.number=t.month,r.year=t.year,r.weeks=r.weeks||[],r.weekdays=r.weekdays||[],t=function UZ(n,t,e){const i=n.getDaysPerWeek(),r=new Zn(t.year,t.month,1),s=n.getWeekday(r)%i;return n.getPrev(r,"d",(i+s-e)%i)}(n,t,l),h||(r.weekdays.length=0);for(let m=0;m<n.getWeeksPerMonth();m++){let p=r.weeks[m];p||(p=r.weeks[m]={number:0,days:[],collapsed:!0});const g=p.days;for(let v=0;v<n.getDaysPerWeek();v++){0===m&&h&&(r.weekdays[v]=i.getWeekdayLabel(n.getWeekday(t),d));const y=new Zn(t.year,t.month,t.day),_=n.getNext(y),b=i.getDayAriaLabel(y);let M=!!(o&&y.before(o)||a&&y.after(a));!M&&c&&(M=c(y,{month:r.number,year:r.year}));let x=y.equals(f),E=s?s(y,{month:r.number,year:r.year}):void 0;null===r.firstDate&&y.month===r.number&&(r.firstDate=y),y.month===r.number&&_.month!==r.number&&(r.lastDate=y);let T=g[v];T||(T=g[v]={}),T.date=y,T.context=Object.assign(T.context||{},{$implicit:y,date:y,data:E,currentMonth:r.number,currentYear:r.year,disabled:M,focused:!1,selected:!1,today:x}),T.tabindex=-1,T.ariaLabel=b,T.hidden=!1,t=_}p.number=n.getWeekNumber(g.map(v=>v.date),l),p.collapsed="collapsed"===u&&g[0].date.month!==r.number&&g[g.length-1].date.month!==r.number}return r}(n,c,e,i,a.shift()||{}))}),o}(this._calendar,r,i,this._i18n,"dayTemplateData"in e||"firstDayOfWeek"in e||"markDisabled"in e||"minDate"in e||"maxDate"in e||"disabled"in e||"outsideDays"in e||"weekdaysVisible"in e);i.months=o,i.firstDate=o[0].firstDate,i.lastDate=o[o.length-1].lastDate,"selectedDate"in e&&!nT(i.selectedDate,i)&&(i.selectedDate=null),"firstDate"in e&&(!i.focusDate||i.focusDate.before(i.firstDate)||i.focusDate.after(i.lastDate))&&(i.focusDate=r);const a=!this._state.firstDate||this._state.firstDate.year!==i.firstDate.year,l=!this._state.firstDate||this._state.firstDate.month!==i.firstDate.month;"select"===i.navigation?(("minDate"in e||"maxDate"in e||0===i.selectBoxes.years.length||a)&&(i.selectBoxes.years=function BZ(n,t,e){if(!n)return[];const i=t?Math.max(t.year,n.year-500):n.year-10,s=(e?Math.min(e.year,n.year+500):n.year+10)-i+1,o=Array(s);for(let a=0;a<s;a++)o[a]=i+a;return o}(i.firstDate,i.minDate,i.maxDate)),("minDate"in e||"maxDate"in e||0===i.selectBoxes.months.length||a)&&(i.selectBoxes.months=function LZ(n,t,e,i){if(!t)return[];let r=n.getMonths(t.year);if(e&&t.year===e.year){const s=r.findIndex(o=>o===e.month);r=r.slice(s)}if(i&&t.year===i.year){const s=r.findIndex(o=>o===i.month);r=r.slice(0,s+1)}return r}(this._calendar,i.firstDate,i.minDate,i.maxDate))):i.selectBoxes={years:[],months:[]},("arrows"===i.navigation||"select"===i.navigation)&&(l||a||"minDate"in e||"maxDate"in e||"disabled"in e)&&(i.prevDisabled=i.disabled||function kZ(n,t,e){const i=Object.assign(n.getPrev(t,"m"),{day:1});return null!=e&&(i.year===e.year&&i.month<e.month||i.year<e.year&&1===e.month)}(this._calendar,i.firstDate,i.minDate),i.nextDisabled=i.disabled||function jZ(n,t,e){const i=Object.assign(n.getNext(t,"m"),{day:1});return null!=e&&i.after(e)}(this._calendar,i.lastDate,i.maxDate))}return i}}return n.\u0275fac=function(e){return new(e||n)(ye(Fm),ye(Ra))},n.\u0275prov=de({token:n,factory:n.\u0275fac}),n})();var Ec=(()=>(function(n){n[n.PREV=0]="PREV",n[n.NEXT=1]="NEXT"}(Ec||(Ec={})),Ec))();let qZ=(()=>{class n{constructor(e){this.i18n=e}isMuted(){return!this.selected&&(this.date.month!==this.currentMonth||this.disabled)}}return n.\u0275fac=function(e){return new(e||n)(I(Ra))},n.\u0275cmp=Tt({type:n,selectors:[["","ngbDatepickerDayView",""]],hostAttrs:[1,"btn-light"],hostVars:10,hostBindings:function(e,i){2&e&&Je("bg-primary",i.selected)("text-white",i.selected)("text-muted",i.isMuted())("outside",i.isMuted())("active",i.focused)},inputs:{currentMonth:"currentMonth",date:"date",disabled:"disabled",focused:"focused",selected:"selected"},standalone:!0,features:[Nn],attrs:OY,decls:1,vars:1,template:function(e,i){1&e&&Ft(0),2&e&&hn(i.i18n.getDayNumerals(i.date))},styles:["[ngbDatepickerDayView]{text-align:center;width:2rem;height:2rem;line-height:2rem;border-radius:.25rem;background:transparent}[ngbDatepickerDayView]:hover:not(.bg-primary),[ngbDatepickerDayView].active:not(.bg-primary){background-color:var(--bs-btn-bg);outline:1px solid var(--bs-border-color)}[ngbDatepickerDayView].outside{opacity:.5}\n"],encapsulation:2,changeDetection:0}),n})(),KZ=(()=>{class n{constructor(e,i){this.i18n=e,this._renderer=i,this.select=new Ce,this._month=-1,this._year=-1}changeMonth(e){this.select.emit(new Zn(this.date.year,pi(e),1))}changeYear(e){this.select.emit(new Zn(pi(e),this.date.month,1))}ngAfterViewChecked(){this.date&&(this.date.month!==this._month&&(this._month=this.date.month,this._renderer.setProperty(this.monthSelect.nativeElement,"value",this._month)),this.date.year!==this._year&&(this._year=this.date.year,this._renderer.setProperty(this.yearSelect.nativeElement,"value",this._year)))}}return n.\u0275fac=function(e){return new(e||n)(I(Ra),I(Vi))},n.\u0275cmp=Tt({type:n,selectors:[["ngb-datepicker-navigation-select"]],viewQuery:function(e,i){if(1&e&&(to(NY,7,Nt),to(FY,7,Nt)),2&e){let r;Mt(r=xt())&&(i.monthSelect=r.first),Mt(r=xt())&&(i.yearSelect=r.first)}},inputs:{date:"date",disabled:"disabled",months:"months",years:"years"},outputs:{select:"select"},standalone:!0,features:[Nn],decls:6,vars:4,consts:function(){let t,e,i,r;return t=$localize`:@@ngb.datepicker.select-month:Select month`,e=$localize`:@@ngb.datepicker.select-month:Select month`,i=$localize`:@@ngb.datepicker.select-year:Select year`,r=$localize`:@@ngb.datepicker.select-year:Select year`,[["aria-label",t,"title",e,1,"form-select",3,"disabled","change"],["month",""],[3,"value",4,"ngFor","ngForOf"],["aria-label",i,"title",r,1,"form-select",3,"disabled","change"],["year",""],[3,"value"]]},template:function(e,i){1&e&&(re(0,"select",0,1),je("change",function(s){return i.changeMonth(s.target.value)}),pe(2,LY,2,3,"option",2),ue(),re(3,"select",3,4),je("change",function(s){return i.changeYear(s.target.value)}),pe(5,BY,2,2,"option",2),ue()),2&e&&(ie("disabled",i.disabled),te(2),ie("ngForOf",i.months),te(1),ie("disabled",i.disabled),te(2),ie("ngForOf",i.years))},dependencies:[Wr],styles:["ngb-datepicker-navigation-select>.form-select{flex:1 1 auto;padding:0 .5rem;font-size:.875rem;height:1.85rem}ngb-datepicker-navigation-select>.form-select:focus{z-index:1}ngb-datepicker-navigation-select>.form-select::-ms-value{background-color:transparent!important}\n"],encapsulation:2,changeDetection:0}),n})(),XZ=(()=>{class n{constructor(e){this.i18n=e,this.navigation=Ec,this.months=[],this.navigate=new Ce,this.select=new Ce}onClickPrev(e){e.currentTarget.focus(),this.navigate.emit(this.navigation.PREV)}onClickNext(e){e.currentTarget.focus(),this.navigate.emit(this.navigation.NEXT)}}return n.\u0275fac=function(e){return new(e||n)(I(Ra))},n.\u0275cmp=Tt({type:n,selectors:[["ngb-datepicker-navigation"]],inputs:{date:"date",disabled:"disabled",months:"months",showSelect:"showSelect",prevDisabled:"prevDisabled",nextDisabled:"nextDisabled",selectBoxes:"selectBoxes"},outputs:{navigate:"navigate",select:"select"},standalone:!0,features:[Nn],decls:8,vars:4,consts:function(){let t,e,i,r;return t=$localize`:@@ngb.datepicker.previous-month:Previous month`,e=$localize`:@@ngb.datepicker.previous-month:Previous month`,i=$localize`:@@ngb.datepicker.next-month:Next month`,r=$localize`:@@ngb.datepicker.next-month:Next month`,[[1,"ngb-dp-arrow"],["type","button","aria-label",t,"title",e,1,"btn","btn-link","ngb-dp-arrow-btn",3,"disabled","click"],[1,"ngb-dp-navigation-chevron"],["class","ngb-dp-navigation-select",3,"date","disabled","months","years","select",4,"ngIf"],[4,"ngIf"],[1,"ngb-dp-arrow","right"],["type","button","aria-label",i,"title",r,1,"btn","btn-link","ngb-dp-arrow-btn",3,"disabled","click"],[1,"ngb-dp-navigation-select",3,"date","disabled","months","years","select"],["ngFor","",3,"ngForOf"],["class","ngb-dp-arrow",4,"ngIf"],[1,"ngb-dp-month-name"]]},template:function(e,i){1&e&&(re(0,"div",0)(1,"button",1),je("click",function(s){return i.onClickPrev(s)}),xn(2,"span",2),ue()(),pe(3,jY,1,4,"ngb-datepicker-navigation-select",3),pe(4,UY,1,1,null,4),re(5,"div",5)(6,"button",6),je("click",function(s){return i.onClickNext(s)}),xn(7,"span",2),ue()()),2&e&&(te(1),ie("disabled",i.prevDisabled),te(2),ie("ngIf",i.showSelect),te(1),ie("ngIf",!i.showSelect),te(2),ie("disabled",i.nextDisabled))},dependencies:[sr,Wr,KZ],styles:["ngb-datepicker-navigation{display:flex;align-items:center}.ngb-dp-navigation-chevron{border-style:solid;border-width:.2em .2em 0 0;display:inline-block;width:.75em;height:.75em;margin-left:.25em;margin-right:.15em;transform:rotate(-135deg)}.ngb-dp-arrow{display:flex;flex:1 1 auto;padding-right:0;padding-left:0;margin:0;width:2rem;height:2rem}.ngb-dp-arrow.right{justify-content:flex-end}.ngb-dp-arrow.right .ngb-dp-navigation-chevron{transform:rotate(45deg);margin-left:.15em;margin-right:.25em}.ngb-dp-arrow-btn{padding:0 .25rem;margin:0 .5rem;border:none;background-color:transparent;z-index:1}.ngb-dp-arrow-btn:focus{outline-width:1px;outline-style:auto}@media all and (-ms-high-contrast: none),(-ms-high-contrast: active){.ngb-dp-arrow-btn:focus{outline-style:solid}}.ngb-dp-month-name{font-size:larger;height:2rem;line-height:2rem;text-align:center}.ngb-dp-navigation-select{display:flex;flex:1 1 9rem}\n"],encapsulation:2,changeDetection:0}),n})();var Rt=(()=>(function(n){n[n.Tab=9]="Tab",n[n.Enter=13]="Enter",n[n.Escape=27]="Escape",n[n.Space=32]="Space",n[n.PageUp=33]="PageUp",n[n.PageDown=34]="PageDown",n[n.End=35]="End",n[n.Home=36]="Home",n[n.ArrowLeft=37]="ArrowLeft",n[n.ArrowUp=38]="ArrowUp",n[n.ArrowRight=39]="ArrowRight",n[n.ArrowDown=40]="ArrowDown"}(Rt||(Rt={})),Rt))();let YZ=(()=>{class n{processKey(e,i){const{state:r,calendar:s}=i;switch(e.which){case Rt.PageUp:i.focusDate(s.getPrev(r.focusedDate,e.shiftKey?"y":"m",1));break;case Rt.PageDown:i.focusDate(s.getNext(r.focusedDate,e.shiftKey?"y":"m",1));break;case Rt.End:i.focusDate(e.shiftKey?r.maxDate:r.lastDate);break;case Rt.Home:i.focusDate(e.shiftKey?r.minDate:r.firstDate);break;case Rt.ArrowLeft:i.focusDate(s.getPrev(r.focusedDate,"d",1));break;case Rt.ArrowUp:i.focusDate(s.getPrev(r.focusedDate,"d",s.getDaysPerWeek()));break;case Rt.ArrowRight:i.focusDate(s.getNext(r.focusedDate,"d",1));break;case Rt.ArrowDown:i.focusDate(s.getNext(r.focusedDate,"d",s.getDaysPerWeek()));break;case Rt.Enter:case Rt.Space:i.focusSelect();break;default:return}e.preventDefault(),e.stopPropagation()}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),rT=(()=>{class n{constructor(){this.displayMonths=1,this.firstDayOfWeek=1,this.navigation="select",this.outsideDays="visible",this.showWeekNumbers=!1,this.weekdays=st.Short}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),sT=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=de({token:n,factory:function(){return function JZ(){return new ZZ}()},providedIn:"root"}),n})(),ZZ=(()=>{class n extends sT{fromModel(e){return e&&bn(e.year)&&bn(e.month)&&bn(e.day)?{year:e.year,month:e.month,day:e.day}:null}toModel(e){return e&&bn(e.year)&&bn(e.month)&&bn(e.day)?{year:e.year,month:e.month,day:e.day}:null}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=Xt(n)))(i||n)}}(),n.\u0275prov=de({token:n,factory:n.\u0275fac}),n})(),vO=(()=>{class n{constructor(e){this.templateRef=e}}return n.\u0275fac=function(e){return new(e||n)(I(nn))},n.\u0275dir=he({type:n,selectors:[["ng-template","ngbDatepickerContent",""]],standalone:!0}),n})(),oT=(()=>{class n{constructor(e,i,r,s){this.i18n=e,this.datepicker=i,this._keyboardService=r,this._service=s}set month(e){this.viewModel=this._service.getMonth(e)}onKeyDown(e){this._keyboardService.processKey(e,this.datepicker)}doSelect(e){!e.context.disabled&&!e.hidden&&this.datepicker.onDateSelect(e.date)}}return n.\u0275fac=function(e){return new(e||n)(I(Ra),I(Oe(()=>Lm)),I(YZ),I(iT))},n.\u0275cmp=Tt({type:n,selectors:[["ngb-datepicker-month"]],hostAttrs:["role","grid"],hostBindings:function(e,i){1&e&&je("keydown",function(s){return i.onKeyDown(s)})},inputs:{month:"month"},standalone:!0,features:[Nn],decls:2,vars:2,consts:[["class","ngb-dp-week ngb-dp-weekdays","role","row",4,"ngIf"],["ngFor","",3,"ngForOf"],["role","row",1,"ngb-dp-week","ngb-dp-weekdays"],["class","ngb-dp-weekday ngb-dp-showweek small",4,"ngIf"],["class","ngb-dp-weekday small","role","columnheader",4,"ngFor","ngForOf"],[1,"ngb-dp-weekday","ngb-dp-showweek","small"],["role","columnheader",1,"ngb-dp-weekday","small"],["class","ngb-dp-week","role","row",4,"ngIf"],["role","row",1,"ngb-dp-week"],["class","ngb-dp-week-number small text-muted",4,"ngIf"],["class","ngb-dp-day","role","gridcell",3,"disabled","tabindex","hidden","ngb-dp-today","click",4,"ngFor","ngForOf"],[1,"ngb-dp-week-number","small","text-muted"],["role","gridcell",1,"ngb-dp-day",3,"tabindex","click"],[3,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,i){1&e&&(pe(0,WY,3,2,"div",0),pe(1,JY,1,1,"ng-template",1)),2&e&&(ie("ngIf",i.viewModel.weekdays.length>0),te(1),ie("ngForOf",i.viewModel.weeks))},dependencies:[sr,Wr,cs],styles:['ngb-datepicker-month{display:block}.ngb-dp-weekday,.ngb-dp-week-number{line-height:2rem;text-align:center;font-style:italic}.ngb-dp-weekday{color:var(--bs-info)}.ngb-dp-week{border-radius:.25rem;display:flex}.ngb-dp-weekdays{border-bottom:1px solid var(--bs-border-color);border-radius:0;background-color:var(--bs-light)}.ngb-dp-day,.ngb-dp-weekday,.ngb-dp-week-number{width:2rem;height:2rem}.ngb-dp-day{cursor:pointer}.ngb-dp-day.disabled,.ngb-dp-day.hidden{cursor:default;pointer-events:none}.ngb-dp-day[tabindex="0"]{z-index:1}\n'],encapsulation:2}),n})(),Lm=(()=>{class n{constructor(e,i,r,s,o,a,l,c){this._service=e,this._calendar=i,this.i18n=r,this._elementRef=a,this._ngbDateAdapter=l,this._ngZone=c,this._controlValue=null,this._destroyed$=new Kt,this._publicState={},this.navigate=new Ce,this.dateSelect=new Ce,this.onChange=u=>{},this.onTouched=()=>{},["dayTemplate","dayTemplateData","displayMonths","firstDayOfWeek","footerTemplate","markDisabled","minDate","maxDate","navigation","outsideDays","showWeekNumbers","startDate","weekdays"].forEach(u=>this[u]=s[u]),e.dateSelect$.pipe(un(this._destroyed$)).subscribe(u=>{this.dateSelect.emit(u)}),e.model$.pipe(un(this._destroyed$)).subscribe(u=>{const d=u.firstDate,h=this.model?this.model.firstDate:null;this._publicState={maxDate:u.maxDate,minDate:u.minDate,firstDate:u.firstDate,lastDate:u.lastDate,focusedDate:u.focusDate,months:u.months.map(v=>v.firstDate)};let f=!1;if(!d.equals(h)&&(this.navigate.emit({current:h?{year:h.year,month:h.month}:null,next:{year:d.year,month:d.month},preventDefault:()=>f=!0}),f&&null!==h))return void this._service.open(h);const m=u.selectedDate,p=u.focusDate,g=this.model?this.model.focusDate:null;this.model=u,Cc(m,this._controlValue)&&(this._controlValue=m,this.onTouched(),this.onChange(this._ngbDateAdapter.toModel(m))),Cc(p,g)&&g&&u.focusVisible&&this.focus(),o.markForCheck()})}get state(){return this._publicState}get calendar(){return this._calendar}focusDate(e){this._service.focus(Zn.from(e))}focusSelect(){this._service.focusSelect()}focus(){this._ngZone.onStable.asObservable().pipe(Bn(1)).subscribe(()=>{const e=this._elementRef.nativeElement.querySelector('div.ngb-dp-day[tabindex="0"]');e&&e.focus()})}navigateTo(e){this._service.open(Zn.from(e?e.day?e:{...e,day:1}:null))}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{const e=hi(this._contentEl.nativeElement,"focusin"),i=hi(this._contentEl.nativeElement,"focusout"),{nativeElement:r}=this._elementRef;kT(e,i).pipe(ei(({target:s,relatedTarget:o})=>!(eO(s,"ngb-dp-day")&&eO(o,"ngb-dp-day")&&r.contains(s)&&r.contains(o))),un(this._destroyed$)).subscribe(({type:s})=>this._ngZone.run(()=>this._service.set({focusVisible:"focusin"===s})))})}ngOnDestroy(){this._destroyed$.next()}ngOnInit(){if(void 0===this.model){const e={};["dayTemplateData","displayMonths","markDisabled","firstDayOfWeek","navigation","minDate","maxDate","outsideDays","weekdays"].forEach(i=>e[i]=this[i]),this._service.set(e),this.navigateTo(this.startDate)}this.dayTemplate||(this.dayTemplate=this._defaultDayTemplate)}ngOnChanges(e){const i={};if(["dayTemplateData","displayMonths","markDisabled","firstDayOfWeek","navigation","minDate","maxDate","outsideDays","weekdays"].filter(r=>r in e).forEach(r=>i[r]=this[r]),this._service.set(i),"startDate"in e){const{currentValue:r,previousValue:s}=e.startDate;gO(s,r)&&this.navigateTo(this.startDate)}}onDateSelect(e){this._service.focus(e),this._service.select(e,{emitEvent:!0})}onNavigateDateSelect(e){this._service.open(e)}onNavigateEvent(e){switch(e){case Ec.PREV:this._service.open(this._calendar.getPrev(this.model.firstDate,"m",1));break;case Ec.NEXT:this._service.open(this._calendar.getNext(this.model.firstDate,"m",1))}}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._service.set({disabled:e})}writeValue(e){this._controlValue=Zn.from(this._ngbDateAdapter.fromModel(e)),this._service.select(this._controlValue)}}return n.\u0275fac=function(e){return new(e||n)(I(iT),I(Fm),I(Ra),I(rT),I(Hi),I(Nt),I(sT),I(Dt))},n.\u0275cmp=Tt({type:n,selectors:[["ngb-datepicker"]],contentQueries:function(e,i,r){if(1&e&&Yt(r,vO,7),2&e){let s;Mt(s=xt())&&(i.contentTemplate=s.first)}},viewQuery:function(e,i){if(1&e&&(to(ZY,7),to(QY,7)),2&e){let r;Mt(r=xt())&&(i._defaultDayTemplate=r.first),Mt(r=xt())&&(i._contentEl=r.first)}},hostVars:2,hostBindings:function(e,i){2&e&&Je("disabled",i.model.disabled)},inputs:{dayTemplate:"dayTemplate",dayTemplateData:"dayTemplateData",displayMonths:"displayMonths",firstDayOfWeek:"firstDayOfWeek",footerTemplate:"footerTemplate",markDisabled:"markDisabled",maxDate:"maxDate",minDate:"minDate",navigation:"navigation",outsideDays:"outsideDays",showWeekNumbers:"showWeekNumbers",startDate:"startDate",weekdays:"weekdays"},outputs:{navigate:"navigate",dateSelect:"dateSelect"},exportAs:["ngbDatepicker"],standalone:!0,features:[vt([{provide:Ki,useExisting:Oe(()=>n),multi:!0},iT]),gn,Nn],decls:10,vars:5,consts:[["defaultDayTemplate",""],["defaultContentTemplate",""],[1,"ngb-dp-header"],[3,"date","months","disabled","showSelect","prevDisabled","nextDisabled","selectBoxes","navigate","select",4,"ngIf"],[1,"ngb-dp-content"],["content",""],[3,"ngTemplateOutlet"],["ngbDatepickerDayView","",3,"date","currentMonth","selected","disabled","focused"],["class","ngb-dp-month",4,"ngFor","ngForOf"],[1,"ngb-dp-month"],["class","ngb-dp-month-name",4,"ngIf"],[3,"month"],[1,"ngb-dp-month-name"],[3,"date","months","disabled","showSelect","prevDisabled","nextDisabled","selectBoxes","navigate","select"]],template:function(e,i){if(1&e&&(pe(0,eJ,1,5,"ng-template",null,0,Si),pe(2,iJ,1,1,"ng-template",null,1,Si),re(4,"div",2),pe(5,rJ,1,7,"ngb-datepicker-navigation",3),ue(),re(6,"div",4,5),pe(8,sJ,0,0,"ng-template",6),ue(),pe(9,oJ,0,0,"ng-template",6)),2&e){const r=Ui(3);te(5),ie("ngIf","none"!==i.navigation),te(1),Je("ngb-dp-months",!i.contentTemplate),te(2),ie("ngTemplateOutlet",(null==i.contentTemplate?null:i.contentTemplate.templateRef)||r),te(1),ie("ngTemplateOutlet",i.footerTemplate)}},dependencies:[sr,Wr,cs,qZ,oT,XZ],styles:["ngb-datepicker{border:1px solid var(--bs-border-color);border-radius:.25rem;display:inline-block}ngb-datepicker-month{pointer-events:auto}ngb-datepicker.dropdown-menu{padding:0}ngb-datepicker.disabled .ngb-dp-weekday,ngb-datepicker.disabled .ngb-dp-week-number,ngb-datepicker.disabled .ngb-dp-month-name{color:var(--bs-text-muted)}.ngb-dp-body{z-index:1055}.ngb-dp-header{border-bottom:0;border-radius:.25rem .25rem 0 0;padding-top:.25rem;background-color:var(--bs-light)}.ngb-dp-months{display:flex}.ngb-dp-month{pointer-events:none}.ngb-dp-month-name{font-size:larger;height:2rem;line-height:2rem;text-align:center;background-color:var(--bs-light)}.ngb-dp-month+.ngb-dp-month .ngb-dp-month-name,.ngb-dp-month+.ngb-dp-month .ngb-dp-week{padding-left:1rem}.ngb-dp-month:last-child .ngb-dp-week{padding-right:.25rem}.ngb-dp-month:first-child .ngb-dp-week{padding-left:.25rem}.ngb-dp-month .ngb-dp-week:last-child{padding-bottom:.25rem}\n"],encapsulation:2,changeDetection:0}),n})();typeof navigator<"u"&&navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));const TO=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function MO(n){const t=Array.from(n.querySelectorAll(TO)).filter(e=>-1!==e.tabIndex);return[t[0],t[t.length-1]]}new Date(1882,10,12),new Date(2174,10,25);let FO=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ht({type:n}),n.\u0275inj=jt({imports:[Lm,oT]}),n})(),kO=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ht({type:n}),n.\u0275inj=jt({}),n})();class Ea{constructor(t,e,i){this.nodes=t,this.viewRef=e,this.componentRef=i}}let xQ=(()=>{class n{constructor(e,i){this._el=e,this._zone=i}ngOnInit(){this._zone.onStable.asObservable().pipe(Bn(1)).subscribe(()=>{Jn(this._zone,this._el.nativeElement,(e,i)=>{i&&Sc(e),e.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return Jn(this._zone,this._el.nativeElement,({classList:e})=>e.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return n.\u0275fac=function(e){return new(e||n)(I(Nt),I(Dt))},n.\u0275cmp=Tt({type:n,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(e,i){2&e&&(Qs("modal-backdrop"+(i.backdropClass?" "+i.backdropClass:"")),Je("show",!i.animation)("fade",i.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},standalone:!0,features:[Nn],decls:0,vars:0,template:function(e,i){},encapsulation:2}),n})();class GO{close(t){}dismiss(t){}}class wQ{constructor(t,e,i,r){this._windowCmptRef=t,this._contentRef=e,this._backdropCmptRef=i,this._beforeDismiss=r,this._closed=new Kt,this._dismissed=new Kt,this._hidden=new Kt,t.instance.dismissEvent.subscribe(s=>{this.dismiss(s)}),this.result=new Promise((s,o)=>{this._resolve=s,this._reject=o}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(un(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(un(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(t){this._windowCmptRef&&(this._closed.next(t),this._resolve(t),this._removeModalElements())}_dismiss(t){this._dismissed.next(t),this._reject(t),this._removeModalElements()}dismiss(t){if(this._windowCmptRef)if(this._beforeDismiss){const e=this._beforeDismiss();!function QP(n){return n&&n.then}(e)?!1!==e&&this._dismiss(t):e.then(i=>{!1!==i&&this._dismiss(t)},()=>{})}else this._dismiss(t)}_removeModalElements(){const t=this._windowCmptRef.instance.hide(),e=this._backdropCmptRef?this._backdropCmptRef.instance.hide():Be(void 0);t.subscribe(()=>{const{nativeElement:i}=this._windowCmptRef.location;i.parentNode.removeChild(i),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),e.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:i}=this._backdropCmptRef.location;i.parentNode.removeChild(i),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),gm(t,e).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var $d=(()=>(function(n){n[n.BACKDROP_CLICK=0]="BACKDROP_CLICK",n[n.ESC=1]="ESC"}($d||($d={})),$d))();let DQ=(()=>{class n{constructor(e,i,r){this._document=e,this._elRef=i,this._zone=r,this._closed$=new Kt,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new Ce,this.shown=new Kt,this.hidden=new Kt}get fullscreenClass(){return!0===this.fullscreen?" modal-fullscreen":Dc(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(e){this.dismissEvent.emit(e)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(Bn(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:e}=this._elRef,i={animation:this.animation,runningTransition:"stop"},o=gm(Jn(this._zone,e,()=>e.classList.remove("show"),i),Jn(this._zone,this._dialogEl.nativeElement,()=>{},i));return o.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),o}_show(){const e={animation:this.animation,runningTransition:"continue"};gm(Jn(this._zone,this._elRef.nativeElement,(s,o)=>{o&&Sc(s),s.classList.add("show")},e),Jn(this._zone,this._dialogEl.nativeElement,()=>{},e)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:e}=this._elRef;this._zone.runOutsideAngular(()=>{hi(e,"keydown").pipe(un(this._closed$),ei(r=>r.which===Rt.Escape)).subscribe(r=>{this.keyboard?requestAnimationFrame(()=>{r.defaultPrevented||this._zone.run(()=>this.dismiss($d.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let i=!1;hi(this._dialogEl.nativeElement,"mousedown").pipe(un(this._closed$),ti(()=>i=!1),Sr(()=>hi(e,"mouseup").pipe(un(this._closed$),Bn(1))),ei(({target:r})=>e===r)).subscribe(()=>{i=!0}),hi(e,"click").pipe(un(this._closed$)).subscribe(({target:r})=>{e===r&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!i&&this._zone.run(()=>this.dismiss($d.BACKDROP_CLICK))),i=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:e}=this._elRef;if(!e.contains(document.activeElement)){const i=e.querySelector("[ngbAutofocus]"),r=MO(e)[0];(i||r||e).focus()}}_restoreFocus(){const e=this._document.body,i=this._elWithFocus;let r;r=i&&i.focus&&e.contains(i)?i:e,this._zone.runOutsideAngular(()=>{setTimeout(()=>r.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&Jn(this._zone,this._elRef.nativeElement,({classList:e})=>(e.add("modal-static"),()=>e.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return n.\u0275fac=function(e){return new(e||n)(I(Cn),I(Nt),I(Dt))},n.\u0275cmp=Tt({type:n,selectors:[["ngb-modal-window"]],viewQuery:function(e,i){if(1&e&&to(aJ,7),2&e){let r;Mt(r=xt())&&(i._dialogEl=r.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(e,i){2&e&&(wt("aria-modal",!0)("aria-labelledby",i.ariaLabelledBy)("aria-describedby",i.ariaDescribedBy),Qs("modal d-block"+(i.windowClass?" "+i.windowClass:"")),Je("fade",i.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},standalone:!0,features:[Nn],ngContentSelectors:Am,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(e,i){1&e&&(fu(),re(0,"div",0,1)(2,"div",2),pu(3),ue()()),2&e&&Qs("modal-dialog"+(i.size?" modal-"+i.size:"")+(i.centered?" modal-dialog-centered":"")+i.fullscreenClass+(i.scrollable?" modal-dialog-scrollable":"")+(i.modalDialogClass?" "+i.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}\n"],encapsulation:2}),n})(),RQ=(()=>{class n{constructor(e){this._document=e}hide(){const e=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),i=this._document.body,r=i.style,{overflow:s,paddingRight:o}=r;if(e>0){const a=parseFloat(window.getComputedStyle(i).paddingRight);r.paddingRight=`${a+e}px`}return r.overflow="hidden",()=>{e>0&&(r.paddingRight=o),r.overflow=s}}}return n.\u0275fac=function(e){return new(e||n)(ye(Cn))},n.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),SQ=(()=>{class n{constructor(e,i,r,s,o,a,l){this._applicationRef=e,this._injector=i,this._environmentInjector=r,this._document=s,this._scrollBar=o,this._rendererFactory=a,this._ngZone=l,this._activeWindowCmptHasChanged=new Kt,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._backdropAttributes=["animation","backdropClass"],this._modalRefs=[],this._windowAttributes=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","scrollable","size","windowClass","modalDialogClass"],this._windowCmpts=[],this._activeInstances=new Ce,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const c=this._windowCmpts[this._windowCmpts.length-1];((n,t,e,i=!1)=>{n.runOutsideAngular(()=>{const r=hi(t,"focusin").pipe(un(e),tt(s=>s.target));hi(t,"keydown").pipe(un(e),ei(s=>s.which===Rt.Tab),_b(r)).subscribe(([s,o])=>{const[a,l]=MO(t);(o===a||o===t)&&s.shiftKey&&(l.focus(),s.preventDefault()),o===l&&!s.shiftKey&&(a.focus(),s.preventDefault())}),i&&hi(t,"click").pipe(un(e),_b(r),tt(s=>s[1])).subscribe(s=>s.focus())})})(this._ngZone,c.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(c.location.nativeElement)}})}_restoreScrollBar(){const e=this._scrollBarRestoreFn;e&&(this._scrollBarRestoreFn=null,e())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(e,i,r){const s=r.container instanceof HTMLElement?r.container:Ma(r.container)?this._document.querySelector(r.container):this._document.body,o=this._rendererFactory.createRenderer(null,null);if(!s)throw new Error(`The specified modal container "${r.container||"body"}" was not found in the DOM.`);this._hideScrollBar();const a=new GO,l=(e=r.injector||e).get(kr,null)||this._environmentInjector,c=this._getContentRef(e,l,i,a,r);let u=!1!==r.backdrop?this._attachBackdrop(s):void 0,d=this._attachWindowComponent(s,c.nodes),h=new wQ(d,c,u,r.beforeDismiss);return this._registerModalRef(h),this._registerWindowCmpt(d),h.hidden.pipe(Bn(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(o.removeClass(this._document.body,"modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),a.close=f=>{h.close(f)},a.dismiss=f=>{h.dismiss(f)},this._applyWindowOptions(d.instance,r),1===this._modalRefs.length&&o.addClass(this._document.body,"modal-open"),u&&u.instance&&(this._applyBackdropOptions(u.instance,r),u.changeDetectorRef.detectChanges()),d.changeDetectorRef.detectChanges(),h}get activeInstances(){return this._activeInstances}dismissAll(e){this._modalRefs.forEach(i=>i.dismiss(e))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(e){let i=xv(xQ,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(i.hostView),e.appendChild(i.location.nativeElement),i}_attachWindowComponent(e,i){let r=xv(DQ,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:i});return this._applicationRef.attachView(r.hostView),e.appendChild(r.location.nativeElement),r}_applyWindowOptions(e,i){this._windowAttributes.forEach(r=>{Ma(i[r])&&(e[r]=i[r])})}_applyBackdropOptions(e,i){this._backdropAttributes.forEach(r=>{Ma(i[r])&&(e[r]=i[r])})}_getContentRef(e,i,r,s,o){return r?r instanceof nn?this._createFromTemplateRef(r,s):Dc(r)?this._createFromString(r):this._createFromComponent(e,i,r,s,o):new Ea([])}_createFromTemplateRef(e,i){const s=e.createEmbeddedView({$implicit:i,close(o){i.close(o)},dismiss(o){i.dismiss(o)}});return this._applicationRef.attachView(s),new Ea([s.rootNodes],s)}_createFromString(e){const i=this._document.createTextNode(`${e}`);return new Ea([[i]])}_createFromComponent(e,i,r,s,o){const l=xv(r,{environmentInjector:i,elementInjector:tr.create({providers:[{provide:GO,useValue:s}],parent:e})}),c=l.location.nativeElement;return o.scrollable&&c.classList.add("component-host-scrollable"),this._applicationRef.attachView(l.hostView),new Ea([[c]],l.hostView,l)}_setAriaHidden(e){const i=e.parentElement;i&&e!==this._document.body&&(Array.from(i.children).forEach(r=>{r!==e&&"SCRIPT"!==r.nodeName&&(this._ariaHiddenValues.set(r,r.getAttribute("aria-hidden")),r.setAttribute("aria-hidden","true"))}),this._setAriaHidden(i))}_revertAriaHidden(){this._ariaHiddenValues.forEach((e,i)=>{e?i.setAttribute("aria-hidden",e):i.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(e){const i=()=>{const r=this._modalRefs.indexOf(e);r>-1&&(this._modalRefs.splice(r,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(e),this._activeInstances.emit(this._modalRefs),e.result.then(i,i)}_registerWindowCmpt(e){this._windowCmpts.push(e),this._activeWindowCmptHasChanged.next(),e.onDestroy(()=>{const i=this._windowCmpts.indexOf(e);i>-1&&(this._windowCmpts.splice(i,1),this._activeWindowCmptHasChanged.next())})}}return n.\u0275fac=function(e){return new(e||n)(ye(Cu),ye(tr),ye(kr),ye(Cn),ye(RQ),ye(h_),ye(Dt))},n.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),CQ=(()=>{class n{constructor(e){this._ngbConfig=e,this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(e){this._animation=e}}return n.\u0275fac=function(e){return new(e||n)(ye(xa))},n.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),EQ=(()=>{class n{constructor(e,i,r){this._injector=e,this._modalStack=i,this._config=r}open(e,i={}){const r={...this._config,animation:this._config.animation,...i};return this._modalStack.open(this._injector,e,r)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(e){this._modalStack.dismissAll(e)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return n.\u0275fac=function(e){return new(e||n)(ye(tr),ye(SQ),ye(CQ))},n.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),VO=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ht({type:n}),n.\u0275inj=jt({providers:[EQ]}),n})();const FQ=({classList:n})=>(n.remove("show"),()=>n.remove("active")),LQ=(n,t)=>{t&&Sc(n),n.classList.add("show")};let uT=(()=>{class n{constructor(e){this.elRef=e}}return n.\u0275fac=function(e){return new(e||n)(I(Nt))},n.\u0275dir=he({type:n,selectors:[["","ngbNavPane",""]],hostAttrs:[1,"tab-pane"],hostVars:5,hostBindings:function(e,i){2&e&&(ir("id",i.item.panelDomId),wt("role",i.role?i.role:i.nav.roles?"tabpanel":void 0)("aria-labelledby",i.item.domId),Je("fade",i.nav.animation))},inputs:{item:"item",nav:"nav",role:"role"},standalone:!0}),n})(),zO=(()=>{class n{constructor(e,i){this._cd=e,this._ngZone=i,this._activePane=null}isPanelTransitioning(e){return this._activePane?.item===e}ngAfterViewInit(){this._updateActivePane(),this.nav.navItemChange$.pipe(un(this.nav.destroy$),If(this._activePane?.item||null),gb(),function dK(n){return ei((t,e)=>n<=e)}(1)).subscribe(e=>{const i={animation:this.nav.animation,runningTransition:"stop"};this._cd.detectChanges(),this._activePane?Jn(this._ngZone,this._activePane.elRef.nativeElement,FQ,i).subscribe(()=>{const r=this._activePane?.item;this._activePane=this._getPaneForItem(e),this._cd.markForCheck(),this._activePane&&(this._activePane.elRef.nativeElement.classList.add("active"),Jn(this._ngZone,this._activePane.elRef.nativeElement,LQ,i).subscribe(()=>{e&&(e.shown.emit(),this.nav.shown.emit(e.id))})),r&&(r.hidden.emit(),this.nav.hidden.emit(r.id))}):this._updateActivePane()})}_updateActivePane(){this._activePane=this._getActivePane(),this._activePane?.elRef.nativeElement.classList.add("show"),this._activePane?.elRef.nativeElement.classList.add("active")}_getPaneForItem(e){return this._panes&&this._panes.find(i=>i.item===e)||null}_getActivePane(){return this._panes&&this._panes.find(e=>e.item.active)||null}}return n.\u0275fac=function(e){return new(e||n)(I(Hi),I(Dt))},n.\u0275cmp=Tt({type:n,selectors:[["","ngbNavOutlet",""]],viewQuery:function(e,i){if(1&e&&to(uT,5),2&e){let r;Mt(r=xt())&&(i._panes=r)}},hostVars:2,hostBindings:function(e,i){2&e&&Je("tab-content",!0)},inputs:{paneRole:"paneRole",nav:["ngbNavOutlet","nav"]},standalone:!0,features:[Nn],attrs:lJ,decls:1,vars:1,consts:[["ngFor","",3,"ngForOf"],["ngbNavPane","",3,"item","nav","role",4,"ngIf"],["ngbNavPane","",3,"item","nav","role"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,i){1&e&&pe(0,hJ,1,1,"ng-template",0),2&e&&ie("ngForOf",i.nav.items)},dependencies:[uT,Wr,sr,cs],encapsulation:2,changeDetection:0}),n})(),WO=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ht({type:n}),n.\u0275inj=jt({imports:[zO]}),n})(),BQ=(()=>{class n{constructor(){this.disabled=!1,this.boundaryLinks=!1,this.directionLinks=!0,this.ellipses=!0,this.maxSize=0,this.pageSize=10,this.rotate=!1}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),$O=(()=>{class n{constructor(e){this.templateRef=e}}return n.\u0275fac=function(e){return new(e||n)(I(nn))},n.\u0275dir=he({type:n,selectors:[["ng-template","ngbPaginationEllipsis",""]],standalone:!0}),n})(),qO=(()=>{class n{constructor(e){this.templateRef=e}}return n.\u0275fac=function(e){return new(e||n)(I(nn))},n.\u0275dir=he({type:n,selectors:[["ng-template","ngbPaginationFirst",""]],standalone:!0}),n})(),KO=(()=>{class n{constructor(e){this.templateRef=e}}return n.\u0275fac=function(e){return new(e||n)(I(nn))},n.\u0275dir=he({type:n,selectors:[["ng-template","ngbPaginationLast",""]],standalone:!0}),n})(),XO=(()=>{class n{constructor(e){this.templateRef=e}}return n.\u0275fac=function(e){return new(e||n)(I(nn))},n.\u0275dir=he({type:n,selectors:[["ng-template","ngbPaginationNext",""]],standalone:!0}),n})(),YO=(()=>{class n{constructor(e){this.templateRef=e}}return n.\u0275fac=function(e){return new(e||n)(I(nn))},n.\u0275dir=he({type:n,selectors:[["ng-template","ngbPaginationNumber",""]],standalone:!0}),n})(),JO=(()=>{class n{constructor(e){this.templateRef=e}}return n.\u0275fac=function(e){return new(e||n)(I(nn))},n.\u0275dir=he({type:n,selectors:[["ng-template","ngbPaginationPrevious",""]],standalone:!0}),n})(),ZO=(()=>{class n{constructor(e){this.templateRef=e}}return n.\u0275fac=function(e){return new(e||n)(I(nn))},n.\u0275dir=he({type:n,selectors:[["ng-template","ngbPaginationPages",""]],standalone:!0}),n})(),QO=(()=>{class n{constructor(e){this.pageCount=0,this.pages=[],this.page=1,this.pageChange=new Ce(!0),this.disabled=e.disabled,this.boundaryLinks=e.boundaryLinks,this.directionLinks=e.directionLinks,this.ellipses=e.ellipses,this.maxSize=e.maxSize,this.pageSize=e.pageSize,this.rotate=e.rotate,this.size=e.size}hasPrevious(){return this.page>1}hasNext(){return this.page<this.pageCount}nextDisabled(){return!this.hasNext()||this.disabled}previousDisabled(){return!this.hasPrevious()||this.disabled}selectPage(e){this._updatePages(e)}ngOnChanges(e){this._updatePages(this.page)}isEllipsis(e){return-1===e}_applyEllipses(e,i){this.ellipses&&(e>0&&(e>2?this.pages.unshift(-1):2===e&&this.pages.unshift(2),this.pages.unshift(1)),i<this.pageCount&&(i<this.pageCount-2?this.pages.push(-1):i===this.pageCount-2&&this.pages.push(this.pageCount-1),this.pages.push(this.pageCount)))}_applyRotation(){let e=0,i=this.pageCount,r=Math.floor(this.maxSize/2);return this.page<=r?i=this.maxSize:this.pageCount-this.page<r?e=this.pageCount-this.maxSize:(e=this.page-r-1,i=this.page+(this.maxSize%2==0?r-1:r)),[e,i]}_applyPagination(){let i=(Math.ceil(this.page/this.maxSize)-1)*this.maxSize;return[i,i+this.maxSize]}_setPageInRange(e){const i=this.page;this.page=Im(e,this.pageCount,1),this.page!==i&&Rn(this.collectionSize)&&this.pageChange.emit(this.page)}_updatePages(e){this.pageCount=Math.ceil(this.collectionSize/this.pageSize),Rn(this.pageCount)||(this.pageCount=0),this.pages.length=0;for(let i=1;i<=this.pageCount;i++)this.pages.push(i);if(this._setPageInRange(e),this.maxSize>0&&this.pageCount>this.maxSize){let i=0,r=this.pageCount;[i,r]=this.rotate?this._applyRotation():this._applyPagination(),this.pages=this.pages.slice(i,r),this._applyEllipses(i,r)}}}return n.\u0275fac=function(e){return new(e||n)(I(BQ))},n.\u0275cmp=Tt({type:n,selectors:[["ngb-pagination"]],contentQueries:function(e,i,r){if(1&e&&(Yt(r,$O,5),Yt(r,qO,5),Yt(r,KO,5),Yt(r,XO,5),Yt(r,YO,5),Yt(r,JO,5),Yt(r,ZO,5)),2&e){let s;Mt(s=xt())&&(i.tplEllipsis=s.first),Mt(s=xt())&&(i.tplFirst=s.first),Mt(s=xt())&&(i.tplLast=s.first),Mt(s=xt())&&(i.tplNext=s.first),Mt(s=xt())&&(i.tplNumber=s.first),Mt(s=xt())&&(i.tplPrevious=s.first),Mt(s=xt())&&(i.tplPages=s.first)}},hostAttrs:["role","navigation"],inputs:{disabled:"disabled",boundaryLinks:"boundaryLinks",directionLinks:"directionLinks",ellipses:"ellipses",rotate:"rotate",collectionSize:"collectionSize",maxSize:"maxSize",page:"page",pageSize:"pageSize",size:"size"},outputs:{pageChange:"pageChange"},standalone:!0,features:[gn,Nn],decls:20,vars:12,consts:function(){let t,e,i,r,s,o,a,l;return t=$localize`:@@ngb.pagination.first:««`,e=$localize`:@@ngb.pagination.previous:«`,i=$localize`:@@ngb.pagination.next:»`,r=$localize`:@@ngb.pagination.last:»»`,s=$localize`:@@ngb.pagination.first-aria:First`,o=$localize`:@@ngb.pagination.previous-aria:Previous`,a=$localize`:@@ngb.pagination.next-aria:Next`,l=$localize`:@@ngb.pagination.last-aria:Last`,[["first",""],["previous",""],["next",""],["last",""],["ellipsis",""],["defaultNumber",""],["defaultPages",""],["class","page-item",3,"disabled",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["aria-hidden","true"],t,e,i,r,["class","visually-hidden",4,"ngIf"],[1,"visually-hidden"],["class","page-item",3,"active","disabled",4,"ngFor","ngForOf"],[1,"page-item"],["class","page-link","tabindex","-1","aria-disabled","true",4,"ngIf"],["class","page-link","href","",3,"click",4,"ngIf"],["tabindex","-1","aria-disabled","true",1,"page-link"],["href","",1,"page-link",3,"click"],["aria-label",s,"href","",1,"page-link",3,"click"],["aria-label",o,"href","",1,"page-link",3,"click"],["aria-label",a,"href","",1,"page-link",3,"click"],["aria-label",l,"href","",1,"page-link",3,"click"]]},template:function(e,i){if(1&e&&(pe(0,fJ,2,0,"ng-template",null,0,Si),pe(2,pJ,2,0,"ng-template",null,1,Si),pe(4,mJ,2,0,"ng-template",null,2,Si),pe(6,gJ,2,0,"ng-template",null,3,Si),pe(8,_J,1,0,"ng-template",null,4,Si),pe(10,yJ,2,2,"ng-template",null,5,Si),pe(12,SJ,1,1,"ng-template",null,6,Si),re(14,"ul"),pe(15,EJ,3,9,"li",7),pe(16,PJ,3,8,"li",7),pe(17,OJ,0,0,"ng-template",8),pe(18,FJ,3,9,"li",7),pe(19,BJ,3,9,"li",7),ue()),2&e){const r=Ui(13);te(14),Qs("pagination"+(i.size?" pagination-"+i.size:"")),te(1),ie("ngIf",i.boundaryLinks),te(1),ie("ngIf",i.directionLinks),te(1),ie("ngTemplateOutlet",(null==i.tplPages?null:i.tplPages.templateRef)||r)("ngTemplateOutletContext",X_(8,jJ,i.page,i.pages,i.disabled)),te(1),ie("ngIf",i.directionLinks),te(1),ie("ngIf",i.boundaryLinks)}},dependencies:[sr,Wr,cs],encapsulation:2,changeDetection:0}),n})(),eN=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ht({type:n}),n.\u0275inj=jt({imports:[QO]}),n})(),nN=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ht({type:n}),n.\u0275inj=jt({}),n})(),HQ=(()=>{class n{constructor(){this.max=100,this.animated=!1,this.ariaLabel="progress bar",this.striped=!1,this.showValue=!1}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),zQ=(()=>{class n{constructor(e){this.value=0,this.max=e.max,this.animated=e.animated,this.ariaLabel=e.ariaLabel,this.striped=e.striped,this.textType=e.textType,this.type=e.type,this.showValue=e.showValue,this.height=e.height}set max(e){this._max=!Rn(e)||e<=0?100:e}get max(){return this._max}getValue(){return Im(this.value,this.max)}getPercentValue(){return 100*this.getValue()/this.max}}return n.\u0275fac=function(e){return new(e||n)(I(HQ))},n.\u0275cmp=Tt({type:n,selectors:[["ngb-progressbar"]],hostAttrs:["role","progressbar","aria-valuemin","0",1,"progress"],hostVars:5,hostBindings:function(e,i){2&e&&(wt("aria-valuenow",i.getValue())("aria-valuemax",i.max)("aria-label",i.ariaLabel),_l("height",i.height))},inputs:{max:"max",animated:"animated",ariaLabel:"ariaLabel",striped:"striped",showValue:"showValue",textType:"textType",type:"type",value:"value",height:"height"},standalone:!0,features:[Nn],ngContentSelectors:Am,decls:3,vars:11,consts:function(){let t;return t=$localize`:@@ngb.progressbar.value:${"\ufffd0\ufffd"}:INTERPOLATION:`,[[4,"ngIf"],t]},template:function(e,i){1&e&&(fu(),re(0,"div"),pe(1,VJ,3,3,"span",0),pu(2),ue()),2&e&&(yD("progress-bar",i.type?i.textType?" bg-"+i.type:" text-bg-"+i.type:"","",i.textType?" text-"+i.textType:"",""),_l("width",i.getPercentValue(),"%"),Je("progress-bar-animated",i.animated)("progress-bar-striped",i.striped),te(1),ie("ngIf",i.showValue))},dependencies:[sr,UR],encapsulation:2,changeDetection:0}),n})(),iN=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ht({type:n}),n.\u0275inj=jt({imports:[zQ]}),n})(),WQ=(()=>{class n{constructor(){this.max=10,this.readonly=!1,this.resettable=!1,this.tabindex=0}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),$Q=(()=>{class n{constructor(e,i){this._changeDetectorRef=i,this.contexts=[],this.disabled=!1,this.hover=new Ce,this.leave=new Ce,this.rateChange=new Ce(!0),this.onChange=r=>{},this.onTouched=()=>{},this.max=e.max,this.readonly=e.readonly,this.tabindex=e.tabindex}ariaValueText(e,i){return`${e} out of ${i}`}isInteractive(){return!this.readonly&&!this.disabled}enter(e){this.isInteractive()&&this._updateState(e),this.hover.emit(e)}handleBlur(){this.onTouched()}handleClick(e){this.isInteractive()&&this.update(this.resettable&&this.rate===e?0:e)}handleKeyDown(e){switch(e.which){case Rt.ArrowDown:case Rt.ArrowLeft:this.update(this.rate-1);break;case Rt.ArrowUp:case Rt.ArrowRight:this.update(this.rate+1);break;case Rt.Home:this.update(0);break;case Rt.End:this.update(this.max);break;default:return}e.preventDefault()}ngOnChanges(e){e.rate&&this.update(this.rate),e.max&&this._updateMax()}ngOnInit(){this._setupContexts(),this._updateState(this.rate)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}reset(){this.leave.emit(this.nextRate),this._updateState(this.rate)}setDisabledState(e){this.disabled=e}update(e,i=!0){const r=Im(e,this.max,0);this.isInteractive()&&this.rate!==r&&(this.rate=r,this.rateChange.emit(this.rate)),i&&(this.onChange(this.rate),this.onTouched()),this._updateState(this.rate)}writeValue(e){this.update(e,!1),this._changeDetectorRef.markForCheck()}_updateState(e){this.nextRate=e,this.contexts.forEach((i,r)=>i.fill=Math.round(100*Im(e-r,1,0)))}_updateMax(){this.max>0&&(this._setupContexts(),this.update(this.rate))}_setupContexts(){this.contexts=Array.from({length:this.max},(e,i)=>({fill:0,index:i}))}}return n.\u0275fac=function(e){return new(e||n)(I(WQ),I(Hi))},n.\u0275cmp=Tt({type:n,selectors:[["ngb-rating"]],contentQueries:function(e,i,r){if(1&e&&Yt(r,nn,5),2&e){let s;Mt(s=xt())&&(i.starTemplateFromContent=s.first)}},hostAttrs:["role","slider","aria-valuemin","0",1,"d-inline-flex"],hostVars:5,hostBindings:function(e,i){1&e&&je("blur",function(){return i.handleBlur()})("keydown",function(s){return i.handleKeyDown(s)})("mouseleave",function(){return i.reset()}),2&e&&(ir("tabindex",i.disabled?-1:i.tabindex),wt("aria-valuemax",i.max)("aria-valuenow",i.nextRate)("aria-valuetext",i.ariaValueText(i.nextRate,i.max))("aria-disabled",!!i.readonly||null))},inputs:{max:"max",rate:"rate",readonly:"readonly",resettable:"resettable",starTemplate:"starTemplate",tabindex:"tabindex",ariaValueText:"ariaValueText"},outputs:{hover:"hover",leave:"leave",rateChange:"rateChange"},standalone:!0,features:[vt([{provide:Ki,useExisting:Oe(()=>n),multi:!0}]),gn,Nn],decls:3,vars:1,consts:[["t",""],["ngFor","",3,"ngForOf"],[1,"visually-hidden"],[3,"mouseenter","click"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,i){1&e&&(pe(0,UJ,1,1,"ng-template",null,0,Si),pe(2,zJ,4,5,"ng-template",1)),2&e&&(te(2),ie("ngForOf",i.contexts))},dependencies:[Wr,cs],encapsulation:2,changeDetection:0}),n})(),rN=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ht({type:n}),n.\u0275inj=jt({imports:[$Q]}),n})();class sN{constructor(t,e,i){this.hour=pi(t),this.minute=pi(e),this.second=pi(i)}changeHour(t=1){this.updateHour((isNaN(this.hour)?0:this.hour)+t)}updateHour(t){this.hour=Rn(t)?(t<0?24+t:t)%24:NaN}changeMinute(t=1){this.updateMinute((isNaN(this.minute)?0:this.minute)+t)}updateMinute(t){Rn(t)?(this.minute=t%60<0?60+t%60:t%60,this.changeHour(Math.floor(t/60))):this.minute=NaN}changeSecond(t=1){this.updateSecond((isNaN(this.second)?0:this.second)+t)}updateSecond(t){Rn(t)?(this.second=t<0?60+t%60:t%60,this.changeMinute(Math.floor(t/60))):this.second=NaN}isValid(t=!0){return Rn(this.hour)&&Rn(this.minute)&&(!t||Rn(this.second))}toString(){return`${this.hour||0}:${this.minute||0}:${this.second||0}`}}let qQ=(()=>{class n{constructor(){this.meridian=!1,this.spinners=!0,this.seconds=!1,this.hourStep=1,this.minuteStep=1,this.secondStep=1,this.disabled=!1,this.readonlyInputs=!1,this.size="medium"}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),oN=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=de({token:n,factory:function(){return function KQ(){return new XQ}()},providedIn:"root"}),n})(),XQ=(()=>{class n extends oN{fromModel(e){return e&&bn(e.hour)&&bn(e.minute)?{hour:e.hour,minute:e.minute,second:bn(e.second)?e.second:null}:null}toModel(e){return e&&bn(e.hour)&&bn(e.minute)?{hour:e.hour,minute:e.minute,second:bn(e.second)?e.second:null}:null}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=Xt(n)))(i||n)}}(),n.\u0275prov=de({token:n,factory:n.\u0275fac}),n})(),aN=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=de({token:n,factory:function(e){let i=null;return i=e?new e:function YQ(n){return new JQ(n)}(ye(rr)),i},providedIn:"root"}),n})(),JQ=(()=>{class n extends aN{constructor(e){super(),this._periods=DR(e,an.Standalone,st.Narrow)}getMorningPeriod(){return this._periods[0]}getAfternoonPeriod(){return this._periods[1]}}return n.\u0275fac=function(e){return new(e||n)(ye(rr))},n.\u0275prov=de({token:n,factory:n.\u0275fac}),n})();const ZQ=/[^0-9]/g;let QQ=(()=>{class n{constructor(e,i,r,s){this._config=e,this._ngbTimeAdapter=i,this._cd=r,this.i18n=s,this.onChange=o=>{},this.onTouched=()=>{},this.meridian=e.meridian,this.spinners=e.spinners,this.seconds=e.seconds,this.hourStep=e.hourStep,this.minuteStep=e.minuteStep,this.secondStep=e.secondStep,this.disabled=e.disabled,this.readonlyInputs=e.readonlyInputs,this.size=e.size}set hourStep(e){this._hourStep=bn(e)?e:this._config.hourStep}get hourStep(){return this._hourStep}set minuteStep(e){this._minuteStep=bn(e)?e:this._config.minuteStep}get minuteStep(){return this._minuteStep}set secondStep(e){this._secondStep=bn(e)?e:this._config.secondStep}get secondStep(){return this._secondStep}writeValue(e){const i=this._ngbTimeAdapter.fromModel(e);this.model=i?new sN(i.hour,i.minute,i.second):new sN,!this.seconds&&(!i||!Rn(i.second))&&(this.model.second=0),this._cd.markForCheck()}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.disabled=e}changeHour(e){this.model?.changeHour(e),this.propagateModelChange()}changeMinute(e){this.model?.changeMinute(e),this.propagateModelChange()}changeSecond(e){this.model?.changeSecond(e),this.propagateModelChange()}updateHour(e){const i=!!this.model&&this.model.hour>=12,r=pi(e);this.model?.updateHour(this.meridian&&(i&&r<12||!i&&12===r)?r+12:r),this.propagateModelChange()}updateMinute(e){this.model?.updateMinute(pi(e)),this.propagateModelChange()}updateSecond(e){this.model?.updateSecond(pi(e)),this.propagateModelChange()}toggleMeridian(){this.meridian&&this.changeHour(12)}formatInput(e){e.value=e.value.replace(ZQ,"")}formatHour(e){return Rn(e)?Rc(this.meridian?e%12==0?12:e%12:e%24):Rc(NaN)}formatMinSec(e){return Rc(Rn(e)?e:NaN)}handleBlur(){this.onTouched()}get isSmallSize(){return"small"===this.size}get isLargeSize(){return"large"===this.size}ngOnChanges(e){e.seconds&&!this.seconds&&this.model&&!Rn(this.model.second)&&(this.model.second=0,this.propagateModelChange(!1))}propagateModelChange(e=!0){e&&this.onTouched(),this.model?.isValid(this.seconds)?this.onChange(this._ngbTimeAdapter.toModel({hour:this.model.hour,minute:this.model.minute,second:this.model.second})):this.onChange(this._ngbTimeAdapter.toModel(null))}}return n.\u0275fac=function(e){return new(e||n)(I(qQ),I(oN),I(Hi),I(aN))},n.\u0275cmp=Tt({type:n,selectors:[["ngb-timepicker"]],inputs:{meridian:"meridian",spinners:"spinners",seconds:"seconds",hourStep:"hourStep",minuteStep:"minuteStep",secondStep:"secondStep",readonlyInputs:"readonlyInputs",size:"size"},exportAs:["ngbTimepicker"],standalone:!0,features:[vt([{provide:Ki,useExisting:Oe(()=>n),multi:!0}]),gn,Nn],decls:16,vars:25,consts:function(){let t,e,i,r,s,o,a,l,c,u,d,h,f,m;return t=$localize`:@@ngb.timepicker.HH:HH`,e=$localize`:@@ngb.timepicker.hours:Hours`,i=$localize`:@@ngb.timepicker.MM:MM`,r=$localize`:@@ngb.timepicker.minutes:Minutes`,s=$localize`:@@ngb.timepicker.increment-hours:Increment hours`,o=$localize`:@@ngb.timepicker.decrement-hours:Decrement hours`,a=$localize`:@@ngb.timepicker.increment-minutes:Increment minutes`,l=$localize`:@@ngb.timepicker.decrement-minutes:Decrement minutes`,c=$localize`:@@ngb.timepicker.SS:SS`,u=$localize`:@@ngb.timepicker.seconds:Seconds`,d=$localize`:@@ngb.timepicker.increment-seconds:Increment seconds`,h=$localize`:@@ngb.timepicker.decrement-seconds:Decrement seconds`,f=$localize`:@@ngb.timepicker.PM:${"\ufffd0\ufffd"}:INTERPOLATION:`,m=$localize`:@@ngb.timepicker.AM:${"\ufffd0\ufffd"}:INTERPOLATION:`,[[3,"disabled"],[1,"ngb-tp"],[1,"ngb-tp-input-container","ngb-tp-hour"],["tabindex","-1","type","button","class","btn btn-link",3,"btn-sm","btn-lg","disabled","click",4,"ngIf"],["type","text","maxlength","2","inputmode","numeric","placeholder",t,"aria-label",e,1,"ngb-tp-input","form-control",3,"value","readOnly","disabled","change","blur","input","keydown.ArrowUp","keydown.ArrowDown"],[1,"ngb-tp-spacer"],[1,"ngb-tp-input-container","ngb-tp-minute"],["type","text","maxlength","2","inputmode","numeric","placeholder",i,"aria-label",r,1,"ngb-tp-input","form-control",3,"value","readOnly","disabled","change","blur","input","keydown.ArrowUp","keydown.ArrowDown"],["class","ngb-tp-spacer",4,"ngIf"],["class","ngb-tp-input-container ngb-tp-second",4,"ngIf"],["class","ngb-tp-meridian",4,"ngIf"],["tabindex","-1","type","button",1,"btn","btn-link",3,"disabled","click"],[1,"chevron","ngb-tp-chevron"],[1,"visually-hidden"],s,[1,"chevron","ngb-tp-chevron","bottom"],o,a,l,[1,"ngb-tp-input-container","ngb-tp-second"],["type","text","maxlength","2","inputmode","numeric","placeholder",c,"aria-label",u,1,"ngb-tp-input","form-control",3,"value","readOnly","disabled","change","blur","input","keydown.ArrowUp","keydown.ArrowDown"],d,h,[1,"ngb-tp-meridian"],["type","button",1,"btn","btn-outline-primary",3,"disabled","click"],[4,"ngIf","ngIfElse"],["am",""],f,m]},template:function(e,i){1&e&&(re(0,"fieldset",0)(1,"div",1)(2,"div",2),pe(3,WJ,4,7,"button",3),re(4,"input",4),je("change",function(s){return i.updateHour(s.target.value)})("blur",function(){return i.handleBlur()})("input",function(s){return i.formatInput(s.target)})("keydown.ArrowUp",function(s){return i.changeHour(i.hourStep),s.preventDefault()})("keydown.ArrowDown",function(s){return i.changeHour(-i.hourStep),s.preventDefault()}),ue(),pe(5,$J,4,7,"button",3),ue(),re(6,"div",5),Ft(7,":"),ue(),re(8,"div",6),pe(9,qJ,4,7,"button",3),re(10,"input",7),je("change",function(s){return i.updateMinute(s.target.value)})("blur",function(){return i.handleBlur()})("input",function(s){return i.formatInput(s.target)})("keydown.ArrowUp",function(s){return i.changeMinute(i.minuteStep),s.preventDefault()})("keydown.ArrowDown",function(s){return i.changeMinute(-i.minuteStep),s.preventDefault()}),ue(),pe(11,KJ,4,7,"button",3),ue(),pe(12,XJ,2,0,"div",8),pe(13,ZJ,4,9,"div",9),pe(14,QJ,1,0,"div",8),pe(15,nZ,5,9,"div",10),ue()()),2&e&&(Je("disabled",i.disabled),ie("disabled",i.disabled),te(3),ie("ngIf",i.spinners),te(1),Je("form-control-sm",i.isSmallSize)("form-control-lg",i.isLargeSize),ie("value",i.formatHour(null==i.model?null:i.model.hour))("readOnly",i.readonlyInputs)("disabled",i.disabled),te(1),ie("ngIf",i.spinners),te(4),ie("ngIf",i.spinners),te(1),Je("form-control-sm",i.isSmallSize)("form-control-lg",i.isLargeSize),ie("value",i.formatMinSec(null==i.model?null:i.model.minute))("readOnly",i.readonlyInputs)("disabled",i.disabled),te(1),ie("ngIf",i.spinners),te(1),ie("ngIf",i.seconds),te(1),ie("ngIf",i.seconds),te(1),ie("ngIf",i.meridian),te(1),ie("ngIf",i.meridian))},dependencies:[sr],styles:['ngb-timepicker{font-size:1rem}.ngb-tp{display:flex;align-items:center}.ngb-tp-input-container{width:4em}.ngb-tp-chevron:before{border-style:solid;border-width:.29em .29em 0 0;content:"";display:inline-block;height:.69em;left:.05em;position:relative;top:.15em;transform:rotate(-45deg);vertical-align:middle;width:.69em}.ngb-tp-chevron.bottom:before{top:-.3em;transform:rotate(135deg)}.ngb-tp-input{text-align:center}.ngb-tp-hour,.ngb-tp-minute,.ngb-tp-second,.ngb-tp-meridian{display:flex;flex-direction:column;align-items:center;justify-content:space-around}.ngb-tp-spacer{width:1em;text-align:center}\n'],encapsulation:2}),n})(),lN=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ht({type:n}),n.\u0275inj=jt({imports:[QQ]}),n})();const eee=(n,t)=>{const{classList:e}=n;if(t)return e.add("fade"),Sc(n),e.add("show","showing"),()=>{e.remove("showing")};e.add("show")},tee=({classList:n})=>(n.add("showing"),()=>{n.remove("show","showing")});let nee=(()=>{class n{constructor(e){this._ngbConfig=e,this.autohide=!0,this.delay=5e3,this.ariaLive="polite"}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(e){this._animation=e}}return n.\u0275fac=function(e){return new(e||n)(ye(xa))},n.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),iee=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=he({type:n,selectors:[["","ngbToastHeader",""]],standalone:!0}),n})(),ree=(()=>{class n{constructor(e,i,r,s){this.ariaLive=e,this._zone=r,this._element=s,this.contentHeaderTpl=null,this.shown=new Ce,this.hidden=new Ce,null==this.ariaLive&&(this.ariaLive=i.ariaLive),this.delay=i.delay,this.autohide=i.autohide,this.animation=i.animation}ngAfterContentInit(){this._zone.onStable.asObservable().pipe(Bn(1)).subscribe(()=>{this._init(),this.show()})}ngOnChanges(e){"autohide"in e&&(this._clearTimeout(),this._init())}hide(){this._clearTimeout();const e=Jn(this._zone,this._element.nativeElement,tee,{animation:this.animation,runningTransition:"stop"});return e.subscribe(()=>{this.hidden.emit()}),e}show(){const e=Jn(this._zone,this._element.nativeElement,eee,{animation:this.animation,runningTransition:"continue"});return e.subscribe(()=>{this.shown.emit()}),e}_init(){this.autohide&&!this._timeoutID&&(this._timeoutID=setTimeout(()=>this.hide(),this.delay))}_clearTimeout(){this._timeoutID&&(clearTimeout(this._timeoutID),this._timeoutID=null)}}return n.\u0275fac=function(e){return new(e||n)(function Ys(n){return function sL(n,t){if("class"===t)return n.classes;if("style"===t)return n.styles;const e=n.attrs;if(e){const i=e.length;let r=0;for(;r<i;){const s=e[r];if(MM(s))break;if(0===s)r+=2;else if("number"==typeof s)for(r++;r<i&&"string"==typeof e[r];)r++;else{if(s===t)return e[r+1];r+=2}}}return null}(li(),n)}("aria-live"),I(nee),I(Dt),I(Nt))},n.\u0275cmp=Tt({type:n,selectors:[["ngb-toast"]],contentQueries:function(e,i,r){if(1&e&&Yt(r,iee,7,nn),2&e){let s;Mt(s=xt())&&(i.contentHeaderTpl=s.first)}},hostAttrs:["role","alert","aria-atomic","true",1,"toast"],hostVars:3,hostBindings:function(e,i){2&e&&(wt("aria-live",i.ariaLive),Je("fade",i.animation))},inputs:{animation:"animation",delay:"delay",autohide:"autohide",header:"header"},outputs:{shown:"shown",hidden:"hidden"},exportAs:["ngbToast"],standalone:!0,features:[gn,Nn],ngContentSelectors:Am,decls:5,vars:1,consts:function(){let t;return t=$localize`:@@ngb.toast.close-aria:Close`,[["headerTpl",""],[3,"ngIf"],[1,"toast-body"],[1,"me-auto"],[1,"toast-header"],[3,"ngTemplateOutlet"],["type","button","aria-label",t,1,"btn-close",3,"click"]]},template:function(e,i){1&e&&(fu(),pe(0,iZ,2,1,"ng-template",null,0,Si),pe(2,sZ,3,1,"ng-template",1),re(3,"div",2),pu(4),ue()),2&e&&(te(2),ie("ngIf",i.contentHeaderTpl||i.header))},dependencies:[sr,cs],styles:["ngb-toast{display:block}ngb-toast .toast-header .close{margin-left:auto;margin-bottom:.25rem}\n"],encapsulation:2}),n})(),cN=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ht({type:n}),n.\u0275inj=jt({imports:[ree]}),n})(),uN=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ht({type:n}),n.\u0275inj=jt({}),n})(),see=(()=>{class n{constructor(){this.highlightClass="ngb-highlight",this.accentSensitive=!0}ngOnChanges(e){!this.accentSensitive&&!String.prototype.normalize&&(console.warn("The `accentSensitive` input in `ngb-highlight` cannot be set to `false` in a browser that does not implement the `String.normalize` function. You will have to include a polyfill in your application to use this feature in the current browser."),this.accentSensitive=!0);const i=ZP(this.result),r=Array.isArray(this.term)?this.term:[this.term],s=c=>this.accentSensitive?c:tO(c),o=r.map(c=>function dZ(n){return n.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}(s(ZP(c)))).filter(c=>c),a=this.accentSensitive?i:tO(i),l=o.length?a.split(new RegExp(`(${o.join("|")})`,"gmi")):[i];if(this.accentSensitive)this.parts=l;else{let c=0;this.parts=l.map(u=>i.substring(c,c+=u.length))}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=Tt({type:n,selectors:[["ngb-highlight"]],inputs:{highlightClass:"highlightClass",result:"result",term:"term",accentSensitive:"accentSensitive"},standalone:!0,features:[gn,Nn],decls:1,vars:1,consts:[["ngFor","",3,"ngForOf"],[3,"class",4,"ngIf","ngIfElse"],["even",""]],template:function(e,i){1&e&&pe(0,lZ,3,2,"ng-template",0),2&e&&ie("ngForOf",i.parts)},dependencies:[sr,Wr],styles:[".ngb-highlight{font-weight:700}\n"],encapsulation:2,changeDetection:0}),n})();new Ne("live announcer delay",{providedIn:"root",factory:function oee(){return 100}});let dN=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ht({type:n}),n.\u0275inj=jt({imports:[see]}),n})(),hN=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ht({type:n}),n.\u0275inj=jt({}),n})();const aee=[dO,hO,pO,mO,FO,kO,VO,WO,hN,eN,nN,iN,rN,lN,cN,uN,dN];let fN=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ht({type:n}),n.\u0275inj=jt({imports:[aee,dO,hO,pO,mO,FO,kO,VO,WO,hN,eN,nN,iN,rN,lN,cN,uN,dN]}),n})(),pN=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ht({type:n}),n.\u0275inj=jt({imports:[RI,RI]}),n})(),lee=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ht({type:n}),n.\u0275inj=jt({imports:[fS,fN,pN,fS,fN,pN]}),n})(),cee=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ht({type:n,bootstrap:[qq]}),n.\u0275inj=jt({imports:[cW,lee]}),n})();TH().bootstrapModule(cee).catch(n=>console.error(n))}},Pt=>{Pt(Pt.s=113)}]);