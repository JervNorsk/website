"use strict";(self.webpackChunkjervnorsk_website_frontend=self.webpackChunkjervnorsk_website_frontend||[]).push([[179],{5361:(_n,Ke,te)=>{te.d(Ke,{v:()=>ie});var a=te(1571);let ie=(()=>{class pe{constructor(){this.title="< error />",this.subtitle=""}}return pe.\u0275fac=function(Ae){return new(Ae||pe)},pe.\u0275cmp=a.Xpm({type:pe,selectors:[["ng-component"]],decls:15,vars:4,consts:[[1,"error","d-flex","flex-column","justify-content-center"],[1,"stack","text-center",2,"--stacks","3"],[2,"--index","0"],[2,"--index","1"],[2,"--index","2"],[1,"stack","text-center",2,"--stacks","1"]],template:function(Ae,Qe){1&Ae&&(a.TgZ(0,"div",0)(1,"div",1)(2,"span",2)(3,"h1"),a._uU(4),a.qZA()(),a.TgZ(5,"span",3)(6,"h1"),a._uU(7),a.qZA()(),a.TgZ(8,"span",4)(9,"h1"),a._uU(10),a.qZA()()(),a.TgZ(11,"div",5)(12,"span",2)(13,"h6"),a._uU(14),a.qZA()()()()),2&Ae&&(a.xp6(4),a.Oqu(Qe.title),a.xp6(3),a.Oqu(Qe.title),a.xp6(3),a.Oqu(Qe.title),a.xp6(4),a.Oqu(Qe.subtitle))},styles:[".error[_ngcontent-%COMP%]{color:var(--color)}.error[_ngcontent-%COMP%]   .stack[_ngcontent-%COMP%]{display:grid}.error[_ngcontent-%COMP%]   .stack[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{grid-row-start:1;grid-column-start:1;--stack-height: calc(100% /var(--stacks) - 1px);--inverse-index: calc(calc(var(--stacks) - 1) - var(--index));--clip-top: calc(var(--stack-height) * var(--index));--clip-bottom: calc(var(--stack-height) * var(--inverse-index));clip-path:inset(var(--clip-top) 0 var(--clip-bottom) 0);animation-name:_ngcontent-%COMP%_stack,_ngcontent-%COMP%_glitch;animation-duration:.34s,2s;animation-timing-function:cubic-bezier(.46,.29,0,1.24),ease;animation-iteration-count:1,infinite;animation-delay:calc(var(--index) * .12s),2s;animation-fill-mode:backwards,none;animation-direction:normal,alternate-reverse}.error[_ngcontent-%COMP%]   .stack[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(odd){--glitch-translate: 8px}.error[_ngcontent-%COMP%]   .stack[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(even){--glitch-translate: -8px}@keyframes _ngcontent-%COMP%_stack{0%{opacity:0;transform:translate(-50%);text-shadow:-2px 3px 0 red,2px -3px 0 blue}60%{opacity:.5;transform:translate(50%)}80%{transform:none;opacity:1;text-shadow:2px -3px 0 red,-2px 3px 0 blue}to{text-shadow:none}}@keyframes _ngcontent-%COMP%_glitch{0%{text-shadow:-2px 3px 0 red,2px -3px 0 blue;transform:translate(var(--glitch-translate))}2%{text-shadow:2px -3px 0 red,-2px 3px 0 blue}4%,to{text-shadow:none;transform:none}}"]}),pe})()},5874:(_n,Ke,te)=>{te.d(Ke,{u:()=>pe});var a=te(5361),ie=te(1571);let pe=(()=>{class Ee extends a.v{constructor(){super(...arguments),this.title="< not found />",this.subtitle="Missing something?"}}return Ee.\u0275fac=function(){let Ae;return function(We){return(Ae||(Ae=ie.n5z(Ee)))(We||Ee)}}(),Ee.\u0275cmp=ie.Xpm({type:Ee,selectors:[["ng-component"]],features:[ie.qOj],decls:15,vars:4,consts:[[1,"error","d-flex","flex-column","justify-content-center"],[1,"stack","text-center",2,"--stacks","3"],[2,"--index","0"],[2,"--index","1"],[2,"--index","2"],[1,"stack","text-center",2,"--stacks","1"]],template:function(Qe,We){1&Qe&&(ie.TgZ(0,"div",0)(1,"div",1)(2,"span",2)(3,"h1"),ie._uU(4),ie.qZA()(),ie.TgZ(5,"span",3)(6,"h1"),ie._uU(7),ie.qZA()(),ie.TgZ(8,"span",4)(9,"h1"),ie._uU(10),ie.qZA()()(),ie.TgZ(11,"div",5)(12,"span",2)(13,"h6"),ie._uU(14),ie.qZA()()()()),2&Qe&&(ie.xp6(4),ie.Oqu(We.title),ie.xp6(3),ie.Oqu(We.title),ie.xp6(3),ie.Oqu(We.title),ie.xp6(4),ie.Oqu(We.subtitle))},styles:[".error[_ngcontent-%COMP%]{color:var(--color)}.error[_ngcontent-%COMP%]   .stack[_ngcontent-%COMP%]{display:grid}.error[_ngcontent-%COMP%]   .stack[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{grid-row-start:1;grid-column-start:1;--stack-height: calc(100% /var(--stacks) - 1px);--inverse-index: calc(calc(var(--stacks) - 1) - var(--index));--clip-top: calc(var(--stack-height) * var(--index));--clip-bottom: calc(var(--stack-height) * var(--inverse-index));clip-path:inset(var(--clip-top) 0 var(--clip-bottom) 0);animation-name:_ngcontent-%COMP%_stack,_ngcontent-%COMP%_glitch;animation-duration:.34s,2s;animation-timing-function:cubic-bezier(.46,.29,0,1.24),ease;animation-iteration-count:1,infinite;animation-delay:calc(var(--index) * .12s),2s;animation-fill-mode:backwards,none;animation-direction:normal,alternate-reverse}.error[_ngcontent-%COMP%]   .stack[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(odd){--glitch-translate: 8px}.error[_ngcontent-%COMP%]   .stack[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(even){--glitch-translate: -8px}@keyframes _ngcontent-%COMP%_stack{0%{opacity:0;transform:translate(-50%);text-shadow:-2px 3px 0 red,2px -3px 0 blue}60%{opacity:.5;transform:translate(50%)}80%{transform:none;opacity:1;text-shadow:2px -3px 0 red,-2px 3px 0 blue}to{text-shadow:none}}@keyframes _ngcontent-%COMP%_glitch{0%{text-shadow:-2px 3px 0 red,2px -3px 0 blue;transform:translate(var(--glitch-translate))}2%{text-shadow:2px -3px 0 red,-2px 3px 0 blue}4%,to{text-shadow:none;transform:none}}"]}),Ee})()},7832:(_n,Ke,te)=>{te.d(Ke,{l:()=>R_});var a=te(1571),ie=te(9751),pe=te(515),Ee=te(9646),Ae=te(7579),Qe=te(8421),We=te(5577),St=te(1144),ft=te(576),Ue=te(3268);const He=["addListener","removeListener"],rt=["addEventListener","removeEventListener"],Gt=["on","off"];function Xe(c,f,r,p){if((0,ft.m)(r)&&(p=r,r=void 0),p)return Xe(c,f,r).pipe((0,Ue.Z)(p));const[T,N]=function Qt(c){return(0,ft.m)(c.addEventListener)&&(0,ft.m)(c.removeEventListener)}(c)?rt.map(ne=>he=>c[ne](f,he,r)):function lt(c){return(0,ft.m)(c.addListener)&&(0,ft.m)(c.removeListener)}(c)?He.map(Ge(c,f)):function It(c){return(0,ft.m)(c.on)&&(0,ft.m)(c.off)}(c)?Gt.map(Ge(c,f)):[];if(!T&&(0,St.z)(c))return(0,We.z)(ne=>Xe(ne,f,r))((0,Qe.Xf)(c));if(!T)throw new TypeError("Invalid event target");return new ie.y(ne=>{const he=(...ge)=>ne.next(1<ge.length?ge:ge[0]);return T(he),()=>N(he)})}function Ge(c,f){return r=>p=>c[r](f,p)}var ti=te(727);class an extends ti.w0{constructor(f,r){super()}schedule(f,r=0){return this}}const Me={setInterval(c,f,...r){const{delegate:p}=Me;return p?.setInterval?p.setInterval(c,f,...r):setInterval(c,f,...r)},clearInterval(c){const{delegate:f}=Me;return(f?.clearInterval||clearInterval)(c)},delegate:void 0};var ot=te(8737),Ot=te(6063);class rn{constructor(f,r=rn.now){this.schedulerActionCtor=f,this.now=r}schedule(f,r=0,p){return new this.schedulerActionCtor(this,f).schedule(p,r)}}rn.now=Ot.l.now;const Jt=new class Zt extends rn{constructor(f,r=rn.now){super(f,r),this.actions=[],this._active=!1}flush(f){const{actions:r}=this;if(this._active)return void r.push(f);let p;this._active=!0;do{if(p=f.execute(f.state,f.delay))break}while(f=r.shift());if(this._active=!1,p){for(;f=r.shift();)f.unsubscribe();throw p}}}(class ke extends an{constructor(f,r){super(f,r),this.scheduler=f,this.work=r,this.pending=!1}schedule(f,r=0){var p;if(this.closed)return this;this.state=f;const T=this.id,N=this.scheduler;return null!=T&&(this.id=this.recycleAsyncId(N,T,r)),this.pending=!0,this.delay=r,this.id=null!==(p=this.id)&&void 0!==p?p:this.requestAsyncId(N,this.id,r),this}requestAsyncId(f,r,p=0){return Me.setInterval(f.flush.bind(f,this),p)}recycleAsyncId(f,r,p=0){if(null!=p&&this.delay===p&&!1===this.pending)return r;null!=r&&Me.clearInterval(r)}execute(f,r){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const p=this._execute(f,r);if(p)return p;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(f,r){let T,p=!1;try{this.work(f)}catch(N){p=!0,T=N||new Error("Scheduled action threw falsy error")}if(p)return this.unsubscribe(),T}unsubscribe(){if(!this.closed){const{id:f,scheduler:r}=this,{actions:p}=r;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ot.P)(p,this),null!=f&&(this.id=this.recycleAsyncId(r,f,null)),this.delay=null,super.unsubscribe()}}});var Kt=te(3532);function fn(c=0,f,r=Jt){let p=-1;return null!=f&&((0,Kt.K)(f)?r=f:p=f),new ie.y(T=>{let N=function yn(c){return c instanceof Date&&!isNaN(c)}(c)?+c-r.now():c;N<0&&(N=0);let ne=0;return r.schedule(function(){T.closed||(T.next(ne++),0<=p?this.schedule(void 0,p):T.complete())},N)})}const{isArray:$e}=Array;function Le(c){return 1===c.length&&$e(c[0])?c[0]:c}var Je=te(5403);var Dt=te(1135),Cn=te(9841),ui=te(5032);const tr=new ie.y(ui.Z);var Wn=te(3269);function Wt(...c){const f=(0,Wn.jO)(c),r=Le(c);return r.length?new ie.y(p=>{let T=r.map(()=>[]),N=r.map(()=>!1);p.add(()=>{T=N=null});for(let ne=0;!p.closed&&ne<r.length;ne++)(0,Qe.Xf)(r[ne]).subscribe((0,Je.x)(p,he=>{if(T[ne].push(he),T.every(ge=>ge.length)){const ge=T.map(De=>De.shift());p.next(f?f(...ge):ge),T.some((De,Ie)=>!De.length&&N[Ie])&&p.complete()}},()=>{N[ne]=!0,!T[ne].length&&p.complete()}));return()=>{T=N=null}}):pe.E}var Ri=te(6451),Es=te(7272),wn=te(2722),cr=te(9300),Si=te(5698),Ur=te(4004),us=te(8675),Qr=te(4671),Ia=te(4482);function Sr(c,f=Qr.y){return c=c??lo,(0,Ia.e)((r,p)=>{let T,N=!0;r.subscribe((0,Je.x)(p,ne=>{const he=f(ne);(N||!c(T,he))&&(N=!1,T=he,p.next(ne))}))})}function lo(c,f){return c===f}var $o=te(3900),qi=te(8505);function Cr(...c){const f=(0,Wn.jO)(c);return(0,Ia.e)((r,p)=>{const T=c.length,N=new Array(T);let ne=c.map(()=>!1),he=!1;for(let ge=0;ge<T;ge++)(0,Qe.Xf)(c[ge]).subscribe((0,Je.x)(p,De=>{N[ge]=De,!he&&!ne[ge]&&(ne[ge]=!0,(he=ne.every(Qr.y))&&(ne=null))},ui.Z));r.subscribe((0,Je.x)(p,ge=>{if(he){const De=[ge,...N];p.next(f?f(...De):De)}}))})}te(9718);var Ye=te(6895);te(2076),te(4742),te(1810);const mn=new a.OlP("NgValueAccessor");function sg(c,f){}function og(c,f){if(1&c&&(a.TgZ(0,"button",3),a._uU(1),a.YNc(2,sg,0,0,"ng-template",4),a.qZA()),2&c){const r=f.$implicit;a.Q6J("ngbPanelToggle",r),a.xp6(1),a.hij(" ",r.title," "),a.xp6(1),a.Q6J("ngTemplateOutlet",null==r.titleTpl?null:r.titleTpl.templateRef)}}function ag(c,f){}function Zd(c,f){}function xp(c,f){if(1&c){const r=a.EpF();a.TgZ(0,"div",8),a.NdJ("ngbRef",function(T){a.CHM(r);const N=a.oxw().$implicit;return a.KtG(N.panelDiv=T)}),a.TgZ(1,"div",9),a.YNc(2,Zd,0,0,"ng-template",4),a.qZA()()}if(2&c){const r=a.oxw().$implicit;a.s9C("id",r.id),a.uIk("aria-labelledby",r.id+"-header"),a.xp6(2),a.Q6J("ngTemplateOutlet",(null==r.contentTpl?null:r.contentTpl.templateRef)||null)}}Math,Math,Math;const lg=function(c,f){return{$implicit:c,opened:f}};function Dp(c,f){if(1&c&&(a.TgZ(0,"div")(1,"div",5),a.YNc(2,ag,0,0,"ng-template",6),a.qZA(),a.YNc(3,xp,3,3,"div",7),a.qZA()),2&c){const r=f.$implicit,p=a.oxw(),T=a.MAs(1);a.Tol("accordion-item "+(r.cardClass||"")),a.xp6(1),a.Tol("accordion-header "+(r.type?"bg-"+r.type:p.type?"bg-"+p.type:"")),a.MGl("id","",r.id,"-header"),a.xp6(1),a.Q6J("ngTemplateOutlet",(null==r.headerTpl?null:r.headerTpl.templateRef)||T)("ngTemplateOutletContext",a.WLB(8,lg,r,r.isOpen)),a.xp6(1),a.Q6J("ngIf",!p.destroyOnHide||r.isOpen||r.transitionRunning)}}const nv=["ngbAccordionBody",""];function wp(c,f){}function iv(c,f){if(1&c){const r=a.EpF();a.TgZ(0,"button",1),a.NdJ("click",function(){a.CHM(r);const T=a.oxw();return a.KtG(T.close())}),a.qZA()}}const Kd=["*"];function cg(c,f){if(1&c){const r=a.EpF();a.TgZ(0,"button",6),a.NdJ("click",function(){const N=a.CHM(r).$implicit,ne=a.oxw();return ne.focus(),a.KtG(ne.select(N.id,ne.NgbSlideEventSource.INDICATOR))}),a.qZA()}if(2&c){const r=f.$implicit,p=a.oxw();a.ekj("active",r.id===p.activeId),a.uIk("aria-labelledby","slide-"+r.id)("aria-controls","slide-"+r.id)("aria-selected",r.id===p.activeId)}}function Xh(c,f){}function rv(c,f){if(1&c&&(a.TgZ(0,"div",7)(1,"span",8),a.SDv(2,9),a.qZA(),a.YNc(3,Xh,0,0,"ng-template",10),a.qZA()),2&c){const r=f.$implicit,p=f.index,T=f.count;a.Q6J("id","slide-"+r.id),a.xp6(2),a.pQV(p+1)(T),a.QtT(2),a.xp6(1),a.Q6J("ngTemplateOutlet",r.tplRef)}}function sv(c,f){if(1&c){const r=a.EpF();a.TgZ(0,"button",11),a.NdJ("click",function(){a.CHM(r);const T=a.oxw();return a.KtG(T.arrowLeft())}),a._UZ(1,"span",12),a.TgZ(2,"span",8),a.SDv(3,13),a.qZA()()}}function Qh(c,f){if(1&c){const r=a.EpF();a.TgZ(0,"button",14),a.NdJ("click",function(){a.CHM(r);const T=a.oxw();return a.KtG(T.arrowRight())}),a._UZ(1,"span",15),a.TgZ(2,"span",8),a.SDv(3,16),a.qZA()()}}const ov=["ngbDatepickerDayView",""],av=["month"],lv=["year"];function cv(c,f){if(1&c&&(a.TgZ(0,"option",5),a._uU(1),a.qZA()),2&c){const r=f.$implicit,p=a.oxw();a.Q6J("value",r),a.uIk("aria-label",p.i18n.getMonthFullName(r,p.date.year)),a.xp6(1),a.Oqu(p.i18n.getMonthShortName(r,p.date.year))}}function uv(c,f){if(1&c&&(a.TgZ(0,"option",5),a._uU(1),a.qZA()),2&c){const r=f.$implicit,p=a.oxw();a.Q6J("value",r),a.xp6(1),a.Oqu(p.i18n.getYearNumerals(r))}}function ug(c,f){if(1&c){const r=a.EpF();a.TgZ(0,"ngb-datepicker-navigation-select",7),a.NdJ("select",function(T){a.CHM(r);const N=a.oxw();return a.KtG(N.select.emit(T))}),a.qZA()}if(2&c){const r=a.oxw();a.Q6J("date",r.date)("disabled",r.disabled)("months",r.selectBoxes.months)("years",r.selectBoxes.years)}}function Rp(c,f){1&c&&a._UZ(0,"div",0)}function ef(c,f){1&c&&a._UZ(0,"div",0)}function Sp(c,f){if(1&c&&(a.YNc(0,Rp,1,0,"div",9),a.TgZ(1,"div",10),a._uU(2),a.qZA(),a.YNc(3,ef,1,0,"div",9)),2&c){const r=f.$implicit,p=f.index,T=a.oxw(2);a.Q6J("ngIf",p>0),a.xp6(2),a.hij(" ",T.i18n.getMonthLabel(r.firstDate)," "),a.xp6(1),a.Q6J("ngIf",p!==T.months.length-1)}}function Cp(c,f){if(1&c&&a.YNc(0,Sp,4,3,"ng-template",8),2&c){const r=a.oxw();a.Q6J("ngForOf",r.months)}}function Ep(c,f){if(1&c&&(a.TgZ(0,"div",5),a._uU(1),a.qZA()),2&c){const r=a.oxw(2);a.xp6(1),a.Oqu(r.i18n.getWeekLabel())}}function el(c,f){if(1&c&&(a.TgZ(0,"div",6),a._uU(1),a.qZA()),2&c){const r=f.$implicit;a.xp6(1),a.Oqu(r)}}function dg(c,f){if(1&c&&(a.TgZ(0,"div",2),a.YNc(1,Ep,2,1,"div",3),a.YNc(2,el,2,1,"div",4),a.qZA()),2&c){const r=a.oxw();a.xp6(1),a.Q6J("ngIf",r.datepicker.showWeekNumbers),a.xp6(1),a.Q6J("ngForOf",r.viewModel.weekdays)}}function hg(c,f){if(1&c&&(a.TgZ(0,"div",11),a._uU(1),a.qZA()),2&c){const r=a.oxw(2).$implicit,p=a.oxw();a.xp6(1),a.Oqu(p.i18n.getWeekNumerals(r.number))}}function fg(c,f){}function Ap(c,f){if(1&c&&a.YNc(0,fg,0,0,"ng-template",14),2&c){const r=a.oxw().$implicit,p=a.oxw(3);a.Q6J("ngTemplateOutlet",p.datepicker.dayTemplate)("ngTemplateOutletContext",r.context)}}function tf(c,f){if(1&c){const r=a.EpF();a.TgZ(0,"div",12),a.NdJ("click",function(T){const ne=a.CHM(r).$implicit;return a.oxw(3).doSelect(ne),a.KtG(T.preventDefault())}),a.YNc(1,Ap,1,2,"ng-template",13),a.qZA()}if(2&c){const r=f.$implicit;a.ekj("disabled",r.context.disabled)("hidden",r.hidden)("ngb-dp-today",r.context.today),a.Q6J("tabindex",r.tabindex),a.uIk("aria-label",r.ariaLabel),a.xp6(1),a.Q6J("ngIf",!r.hidden)}}function pg(c,f){if(1&c&&(a.TgZ(0,"div",8),a.YNc(1,hg,2,1,"div",9),a.YNc(2,tf,2,9,"div",10),a.qZA()),2&c){const r=a.oxw().$implicit,p=a.oxw();a.xp6(1),a.Q6J("ngIf",p.datepicker.showWeekNumbers),a.xp6(1),a.Q6J("ngForOf",r.days)}}function mg(c,f){1&c&&a.YNc(0,pg,3,2,"div",7),2&c&&a.Q6J("ngIf",!f.$implicit.collapsed)}const gg=["defaultDayTemplate"],Ip=["content"];function _g(c,f){if(1&c&&a._UZ(0,"div",7),2&c){const p=f.currentMonth,T=f.selected,N=f.disabled,ne=f.focused;a.Q6J("date",f.date)("currentMonth",p)("selected",T)("disabled",N)("focused",ne)}}function vg(c,f){if(1&c&&(a.TgZ(0,"div",12),a._uU(1),a.qZA()),2&c){const r=a.oxw().$implicit,p=a.oxw(2);a.xp6(1),a.hij(" ",p.i18n.getMonthLabel(r.firstDate)," ")}}function yo(c,f){if(1&c&&(a.TgZ(0,"div",9),a.YNc(1,vg,2,1,"div",10),a._UZ(2,"ngb-datepicker-month",11),a.qZA()),2&c){const r=f.$implicit,p=a.oxw(2);a.xp6(1),a.Q6J("ngIf","none"===p.navigation||p.displayMonths>1&&"select"===p.navigation),a.xp6(1),a.Q6J("month",r.firstDate)}}function nf(c,f){if(1&c&&a.YNc(0,yo,3,2,"div",8),2&c){const r=a.oxw();a.Q6J("ngForOf",r.model.months)}}function Pp(c,f){if(1&c){const r=a.EpF();a.TgZ(0,"ngb-datepicker-navigation",13),a.NdJ("navigate",function(T){a.CHM(r);const N=a.oxw();return a.KtG(N.onNavigateEvent(T))})("select",function(T){a.CHM(r);const N=a.oxw();return a.KtG(N.onNavigateDateSelect(T))}),a.qZA()}if(2&c){const r=a.oxw();a.Q6J("date",r.model.firstDate)("months",r.model.months)("disabled",r.model.disabled)("showSelect","select"===r.model.navigation)("prevDisabled",r.model.prevDisabled)("nextDisabled",r.model.nextDisabled)("selectBoxes",r.model.selectBoxes)}}function rf(c,f){}function Xs(c,f){}const od=["dialog"],Op=["ngbNavOutlet",""];function Np(c,f){}const yg=function(c){return{$implicit:c}};function Fp(c,f){if(1&c&&(a.TgZ(0,"div",2),a.YNc(1,Np,0,0,"ng-template",3),a.qZA()),2&c){const r=a.oxw().$implicit,p=a.oxw();a.Q6J("item",r)("nav",p.nav)("role",p.paneRole),a.xp6(1),a.Q6J("ngTemplateOutlet",(null==r.contentTpl?null:r.contentTpl.templateRef)||null)("ngTemplateOutletContext",a.VKq(5,yg,r.active||p.isPanelTransitioning(r)))}}function bg(c,f){if(1&c&&a.YNc(0,Fp,2,7,"div",1),2&c){const r=f.$implicit,p=a.oxw();a.Q6J("ngIf",r.isPanelInDom()||p.isPanelTransitioning(r))}}function Lp(c,f){1&c&&(a.TgZ(0,"span",9),a.SDv(1,10),a.qZA())}function Tg(c,f){1&c&&(a.TgZ(0,"span",9),a.SDv(1,11),a.qZA())}function Bp(c,f){1&c&&(a.TgZ(0,"span",9),a.SDv(1,12),a.qZA())}function Mg(c,f){1&c&&(a.TgZ(0,"span",9),a.SDv(1,13),a.qZA())}function xg(c,f){1&c&&a._uU(0,"...")}function sf(c,f){1&c&&(a.TgZ(0,"span",15),a._uU(1,"(current)"),a.qZA())}function af(c,f){if(1&c&&(a._uU(0),a.YNc(1,sf,2,0,"span",14)),2&c){const r=f.$implicit,p=f.currentPage;a.hij(" ",r," "),a.xp6(1),a.Q6J("ngIf",r===p)}}function Dg(c,f){}const ad=function(c){return{disabled:!0,currentPage:c}};function wg(c,f){if(1&c&&(a.TgZ(0,"a",20),a.YNc(1,Dg,0,0,"ng-template",8),a.qZA()),2&c){const r=a.oxw(2).$implicit,p=a.oxw(),T=a.MAs(9);a.xp6(1),a.Q6J("ngTemplateOutlet",(null==p.tplEllipsis?null:p.tplEllipsis.templateRef)||T)("ngTemplateOutletContext",a.VKq(2,ad,r))}}function Rg(c,f){}const lf=function(c,f,r){return{disabled:c,$implicit:f,currentPage:r}};function cf(c,f){if(1&c){const r=a.EpF();a.TgZ(0,"a",21),a.NdJ("click",function(T){a.CHM(r);const N=a.oxw().$implicit;return a.oxw(2).selectPage(N),a.KtG(T.preventDefault())}),a.YNc(1,Rg,0,0,"ng-template",8),a.qZA()}if(2&c){const r=a.oxw().$implicit,p=a.oxw(),T=p.disabled,N=p.$implicit,ne=a.oxw(),he=a.MAs(11);a.uIk("tabindex",T?"-1":null)("aria-disabled",T?"true":null),a.xp6(1),a.Q6J("ngTemplateOutlet",(null==ne.tplNumber?null:ne.tplNumber.templateRef)||he)("ngTemplateOutletContext",a.kEZ(4,lf,T,r,N))}}function jp(c,f){if(1&c&&(a.TgZ(0,"li",17),a.YNc(1,wg,2,4,"a",18),a.YNc(2,cf,2,8,"a",19),a.qZA()),2&c){const r=f.$implicit,p=a.oxw(),T=p.$implicit,N=p.disabled,ne=a.oxw();a.ekj("active",r===T)("disabled",ne.isEllipsis(r)||N),a.uIk("aria-current",r===T?"page":null),a.xp6(1),a.Q6J("ngIf",ne.isEllipsis(r)),a.xp6(1),a.Q6J("ngIf",!ne.isEllipsis(r))}}function fu(c,f){1&c&&a.YNc(0,jp,3,7,"li",16),2&c&&a.Q6J("ngForOf",f.pages)}function uf(c,f){}const Xd=function(c,f){return{disabled:c,currentPage:f}};function Sg(c,f){if(1&c){const r=a.EpF();a.TgZ(0,"li",17)(1,"a",22),a.NdJ("click",function(T){return a.CHM(r),a.oxw().selectPage(1),a.KtG(T.preventDefault())}),a.YNc(2,uf,0,0,"ng-template",8),a.qZA()()}if(2&c){const r=a.oxw(),p=a.MAs(1);a.ekj("disabled",r.previousDisabled()),a.xp6(1),a.uIk("tabindex",r.previousDisabled()?"-1":null)("aria-disabled",r.previousDisabled()?"true":null),a.xp6(1),a.Q6J("ngTemplateOutlet",(null==r.tplFirst?null:r.tplFirst.templateRef)||p)("ngTemplateOutletContext",a.WLB(6,Xd,r.previousDisabled(),r.page))}}function df(c,f){}const Cg=function(c){return{disabled:c}};function Eg(c,f){if(1&c){const r=a.EpF();a.TgZ(0,"li",17)(1,"a",23),a.NdJ("click",function(T){a.CHM(r);const N=a.oxw();return N.selectPage(N.page-1),a.KtG(T.preventDefault())}),a.YNc(2,df,0,0,"ng-template",8),a.qZA()()}if(2&c){const r=a.oxw(),p=a.MAs(3);a.ekj("disabled",r.previousDisabled()),a.xp6(1),a.uIk("tabindex",r.previousDisabled()?"-1":null)("aria-disabled",r.previousDisabled()?"true":null),a.xp6(1),a.Q6J("ngTemplateOutlet",(null==r.tplPrevious?null:r.tplPrevious.templateRef)||p)("ngTemplateOutletContext",a.VKq(6,Cg,r.previousDisabled()))}}function Ag(c,f){}function Ig(c,f){}function Pg(c,f){if(1&c){const r=a.EpF();a.TgZ(0,"li",17)(1,"a",24),a.NdJ("click",function(T){a.CHM(r);const N=a.oxw();return N.selectPage(N.page+1),a.KtG(T.preventDefault())}),a.YNc(2,Ig,0,0,"ng-template",8),a.qZA()()}if(2&c){const r=a.oxw(),p=a.MAs(5);a.ekj("disabled",r.nextDisabled()),a.xp6(1),a.uIk("tabindex",r.nextDisabled()?"-1":null)("aria-disabled",r.nextDisabled()?"true":null),a.xp6(1),a.Q6J("ngTemplateOutlet",(null==r.tplNext?null:r.tplNext.templateRef)||p)("ngTemplateOutletContext",a.WLB(6,Xd,r.nextDisabled(),r.page))}}function Og(c,f){}function kp(c,f){if(1&c){const r=a.EpF();a.TgZ(0,"li",17)(1,"a",25),a.NdJ("click",function(T){a.CHM(r);const N=a.oxw();return N.selectPage(N.pageCount),a.KtG(T.preventDefault())}),a.YNc(2,Og,0,0,"ng-template",8),a.qZA()()}if(2&c){const r=a.oxw(),p=a.MAs(7);a.ekj("disabled",r.nextDisabled()),a.xp6(1),a.uIk("tabindex",r.nextDisabled()?"-1":null)("aria-disabled",r.nextDisabled()?"true":null),a.xp6(1),a.Q6J("ngTemplateOutlet",(null==r.tplLast?null:r.tplLast.templateRef)||p)("ngTemplateOutletContext",a.WLB(6,Xd,r.nextDisabled(),r.page))}}const hf=function(c,f,r){return{$implicit:c,pages:f,disabled:r}};function Ng(c,f){if(1&c&&(a.TgZ(0,"span"),a.SDv(1,1),a.ALo(2,"percent"),a.qZA()),2&c){const r=a.oxw();a.xp6(2),a.pQV(a.lcZ(2,1,r.getValue()/r.max)),a.QtT(1)}}function Vp(c,f){1&c&&a._uU(0),2&c&&a.Oqu(100===f.fill?"\u2605":"\u2606")}function Up(c,f){}function Lc(c,f){if(1&c){const r=a.EpF();a.TgZ(0,"span",2),a._uU(1),a.qZA(),a.TgZ(2,"span",3),a.NdJ("mouseenter",function(){const N=a.CHM(r).index,ne=a.oxw();return a.KtG(ne.enter(N+1))})("click",function(){const N=a.CHM(r).index,ne=a.oxw();return a.KtG(ne.handleClick(N+1))}),a.YNc(3,Up,0,0,"ng-template",4),a.qZA()}if(2&c){const r=f.index,p=a.oxw(),T=a.MAs(1);a.xp6(1),a.hij("(",r<p.nextRate?"*":" ",")"),a.xp6(1),a.Udp("cursor",p.isInteractive()?"pointer":"default"),a.xp6(1),a.Q6J("ngTemplateOutlet",p.starTemplate||p.starTemplateFromContent||T)("ngTemplateOutletContext",p.contexts[r])}}function Hp(c,f){if(1&c){const r=a.EpF();a.TgZ(0,"button",11),a.NdJ("click",function(){a.CHM(r);const T=a.oxw();return a.KtG(T.changeHour(T.hourStep))}),a._UZ(1,"span",12),a.TgZ(2,"span",13),a.SDv(3,14),a.qZA()()}if(2&c){const r=a.oxw();a.ekj("btn-sm",r.isSmallSize)("btn-lg",r.isLargeSize)("disabled",r.disabled),a.Q6J("disabled",r.disabled)}}function zp(c,f){if(1&c){const r=a.EpF();a.TgZ(0,"button",11),a.NdJ("click",function(){a.CHM(r);const T=a.oxw();return a.KtG(T.changeHour(-T.hourStep))}),a._UZ(1,"span",15),a.TgZ(2,"span",13),a.SDv(3,16),a.qZA()()}if(2&c){const r=a.oxw();a.ekj("btn-sm",r.isSmallSize)("btn-lg",r.isLargeSize)("disabled",r.disabled),a.Q6J("disabled",r.disabled)}}function Fg(c,f){if(1&c){const r=a.EpF();a.TgZ(0,"button",11),a.NdJ("click",function(){a.CHM(r);const T=a.oxw();return a.KtG(T.changeMinute(T.minuteStep))}),a._UZ(1,"span",12),a.TgZ(2,"span",13),a.SDv(3,17),a.qZA()()}if(2&c){const r=a.oxw();a.ekj("btn-sm",r.isSmallSize)("btn-lg",r.isLargeSize)("disabled",r.disabled),a.Q6J("disabled",r.disabled)}}function hv(c,f){if(1&c){const r=a.EpF();a.TgZ(0,"button",11),a.NdJ("click",function(){a.CHM(r);const T=a.oxw();return a.KtG(T.changeMinute(-T.minuteStep))}),a._UZ(1,"span",15),a.TgZ(2,"span",13),a.SDv(3,18),a.qZA()()}if(2&c){const r=a.oxw();a.ekj("btn-sm",r.isSmallSize)("btn-lg",r.isLargeSize)("disabled",r.disabled),a.Q6J("disabled",r.disabled)}}function Qd(c,f){1&c&&(a.TgZ(0,"div",5),a._uU(1,":"),a.qZA())}function Lg(c,f){if(1&c){const r=a.EpF();a.TgZ(0,"button",11),a.NdJ("click",function(){a.CHM(r);const T=a.oxw(2);return a.KtG(T.changeSecond(T.secondStep))}),a._UZ(1,"span",12),a.TgZ(2,"span",13),a.SDv(3,21),a.qZA()()}if(2&c){const r=a.oxw(2);a.ekj("btn-sm",r.isSmallSize)("btn-lg",r.isLargeSize)("disabled",r.disabled),a.Q6J("disabled",r.disabled)}}function Wp(c,f){if(1&c){const r=a.EpF();a.TgZ(0,"button",11),a.NdJ("click",function(){a.CHM(r);const T=a.oxw(2);return a.KtG(T.changeSecond(-T.secondStep))}),a._UZ(1,"span",15),a.TgZ(2,"span",13),a.SDv(3,22),a.qZA()()}if(2&c){const r=a.oxw(2);a.ekj("btn-sm",r.isSmallSize)("btn-lg",r.isLargeSize)("disabled",r.disabled),a.Q6J("disabled",r.disabled)}}function $p(c,f){if(1&c){const r=a.EpF();a.TgZ(0,"div",19),a.YNc(1,Lg,4,7,"button",3),a.TgZ(2,"input",20),a.NdJ("change",function(T){a.CHM(r);const N=a.oxw();return a.KtG(N.updateSecond(T.target.value))})("blur",function(){a.CHM(r);const T=a.oxw();return a.KtG(T.handleBlur())})("input",function(T){a.CHM(r);const N=a.oxw();return a.KtG(N.formatInput(T.target))})("keydown.ArrowUp",function(T){a.CHM(r);const N=a.oxw();return N.changeSecond(N.secondStep),a.KtG(T.preventDefault())})("keydown.ArrowDown",function(T){a.CHM(r);const N=a.oxw();return N.changeSecond(-N.secondStep),a.KtG(T.preventDefault())}),a.qZA(),a.YNc(3,Wp,4,7,"button",3),a.qZA()}if(2&c){const r=a.oxw();a.xp6(1),a.Q6J("ngIf",r.spinners),a.xp6(1),a.ekj("form-control-sm",r.isSmallSize)("form-control-lg",r.isLargeSize),a.Q6J("value",r.formatMinSec(null==r.model?null:r.model.second))("readOnly",r.readonlyInputs)("disabled",r.disabled),a.xp6(1),a.Q6J("ngIf",r.spinners)}}function Yp(c,f){1&c&&a._UZ(0,"div",5)}function pf(c,f){if(1&c&&(a.ynx(0),a.SDv(1,27),a.BQk()),2&c){const r=a.oxw(2);a.xp6(1),a.pQV(r.i18n.getAfternoonPeriod()),a.QtT(1)}}function Jp(c,f){if(1&c&&a.SDv(0,28),2&c){const r=a.oxw(2);a.pQV(r.i18n.getMorningPeriod()),a.QtT(0)}}function eh(c,f){if(1&c){const r=a.EpF();a.TgZ(0,"div",23)(1,"button",24),a.NdJ("click",function(){a.CHM(r);const T=a.oxw();return a.KtG(T.toggleMeridian())}),a.YNc(2,pf,2,1,"ng-container",25),a.YNc(3,Jp,1,1,"ng-template",null,26,a.W1O),a.qZA()()}if(2&c){const r=a.MAs(4),p=a.oxw();a.xp6(1),a.ekj("btn-sm",p.isSmallSize)("btn-lg",p.isLargeSize)("disabled",p.disabled),a.Q6J("disabled",p.disabled),a.xp6(1),a.Q6J("ngIf",p.model&&p.model.hour>=12)("ngIfElse",r)}}function th(c,f){if(1&c&&(a.TgZ(0,"strong",3),a._uU(1),a.qZA()),2&c){const r=a.oxw();a.xp6(1),a.Oqu(r.header)}}function qp(c,f){}function Zp(c,f){if(1&c){const r=a.EpF();a.TgZ(0,"div",4),a.YNc(1,qp,0,0,"ng-template",5),a.TgZ(2,"button",6),a.NdJ("click",function(){a.CHM(r);const T=a.oxw();return a.KtG(T.hide())}),a.qZA()()}if(2&c){const r=a.oxw(),p=a.MAs(1);a.xp6(1),a.Q6J("ngTemplateOutlet",r.contentHeaderTpl||p)}}function Kp(c,f){if(1&c&&(a.TgZ(0,"span"),a._uU(1),a.qZA()),2&c){const r=a.oxw().$implicit,p=a.oxw();a.Tol(p.highlightClass),a.xp6(1),a.Oqu(r)}}function Xp(c,f){if(1&c&&a._uU(0),2&c){const r=a.oxw().$implicit;a.Oqu(r)}}function nh(c,f){if(1&c&&(a.YNc(0,Kp,2,3,"span",1),a.YNc(1,Xp,1,1,"ng-template",null,2,a.W1O)),2&c){const r=f.odd,p=a.MAs(2);a.Q6J("ngIf",r)("ngIfElse",p)}}function Qs(c){return parseInt(`${c}`,10)}function Qp(c){return null!=c?`${c}`:""}function ih(c,f,r=0){return Math.max(Math.min(c,f),r)}function sc(c){return"string"==typeof c}function Or(c){return!isNaN(Qs(c))}function or(c){return"number"==typeof c&&isFinite(c)&&Math.floor(c)===c}function pu(c){return null!=c}function rh(c){return Or(c)?`0${c}`.slice(-2):""}function mf(c,f){return c&&c.className&&c.className.split&&c.className.split(/\s+/).indexOf(f)>=0}function mu(c){return(c||document.body).getBoundingClientRect()}function _f(c){return c.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}const em={animation:!0,transitionTimerDelayMs:5},Gg=()=>{},{transitionTimerDelayMs:Vg}=em,sh=new Map,Rs=(c,f,r,p)=>{let T=p.context||{};const N=sh.get(f);if(N)switch(p.runningTransition){case"continue":return pe.E;case"stop":c.run(()=>N.transition$.complete()),T=Object.assign(N.context,T),sh.delete(f)}const ne=r(f,p.animation,T)||Gg;if(!p.animation||"none"===window.getComputedStyle(f).transitionProperty)return c.run(()=>ne()),(0,Ee.of)(void 0).pipe(function gf(c){return f=>new ie.y(r=>f.subscribe({next:ne=>c.run(()=>r.next(ne)),error:ne=>c.run(()=>r.error(ne)),complete:()=>c.run(()=>r.complete())}))}(c));const he=new Ae.x,ge=new Ae.x,De=he.pipe(function Sn(...c){return f=>(0,Es.z)(f,(0,Ee.of)(...c))}(!0));sh.set(f,{transition$:he,complete:()=>{ge.next(),ge.complete()},context:T});const Ie=function kg(c){const{transitionDelay:f,transitionDuration:r}=window.getComputedStyle(c);return 1e3*(parseFloat(f)+parseFloat(r))}(f);return c.runOutsideAngular(()=>{const Lt=Xe(f,"transitionend").pipe((0,wn.R)(De),(0,cr.h)(({target:jt})=>jt===f));(function nt(...c){return 1===(c=Le(c)).length?(0,Qe.Xf)(c[0]):new ie.y(function wt(c){return f=>{let r=[];for(let p=0;r&&!f.closed&&p<c.length;p++)r.push((0,Qe.Xf)(c[p]).subscribe((0,Je.x)(f,T=>{if(r){for(let N=0;N<r.length;N++)N!==p&&r[N].unsubscribe();r=null}f.next(T)})))}}(c))})(fn(Ie+Vg).pipe((0,wn.R)(De)),Lt,ge).pipe((0,wn.R)(De)).subscribe(()=>{sh.delete(f),c.run(()=>{ne(),he.next(),he.complete()})})}),he.asObservable()},tm=(c,f,r)=>{let{direction:p,maxSize:T,dimension:N}=r;const{classList:ne}=c;function he(){ne.add("collapse"),"show"===p?ne.add("show"):ne.remove("show")}if(f)return T||(T=function _v(c,f){if(typeof navigator>"u")return"0px";const{classList:r}=c,p=r.contains("show");p||r.add("show"),c.style[f]="";const T=c.getBoundingClientRect()[f]+"px";return p||r.remove("show"),T}(c,N),r.maxSize=T,c.style[N]="show"!==p?T:"0px",ne.remove("collapse"),ne.remove("collapsing"),ne.remove("show"),mu(c),ne.add("collapsing")),c.style[N]="show"===p?T:"0px",()=>{he(),ne.remove("collapsing"),c.style[N]=""};he()};let Vo=(()=>{class c{constructor(){this.animation=em.animation}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275prov=a.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),ld=(()=>{class c{constructor(r){this._ngbConfig=r,this.closeOthers=!1}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(r){this._animation=r}}return c.\u0275fac=function(r){return new(r||c)(a.LFG(Vo))},c.\u0275prov=a.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),hi=0,Ut=(()=>{class c{constructor(r){this.templateRef=r}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(a.Rgc))},c.\u0275dir=a.lG2({type:c,selectors:[["ng-template","ngbPanelHeader",""]],standalone:!0}),c})(),tl=(()=>{class c{constructor(r){this.templateRef=r}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(a.Rgc))},c.\u0275dir=a.lG2({type:c,selectors:[["ng-template","ngbPanelTitle",""]],standalone:!0}),c})(),oh=(()=>{class c{constructor(r){this.templateRef=r}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(a.Rgc))},c.\u0275dir=a.lG2({type:c,selectors:[["ng-template","ngbPanelContent",""]],standalone:!0}),c})(),nm=(()=>{class c{constructor(){this.disabled=!1,this.id="ngb-panel-"+hi++,this.isOpen=!1,this.initClassDone=!1,this.transitionRunning=!1,this.shown=new a.vpe,this.hidden=new a.vpe}ngAfterContentChecked(){this.titleTpl=this.titleTpls.first,this.headerTpl=this.headerTpls.first,this.contentTpl=this.contentTpls.first}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275dir=a.lG2({type:c,selectors:[["ngb-panel"]],contentQueries:function(r,p,T){if(1&r&&(a.Suo(T,tl,4),a.Suo(T,Ut,4),a.Suo(T,oh,4)),2&r){let N;a.iGM(N=a.CRH())&&(p.titleTpls=N),a.iGM(N=a.CRH())&&(p.headerTpls=N),a.iGM(N=a.CRH())&&(p.contentTpls=N)}},inputs:{disabled:"disabled",id:"id",title:"title",type:"type",cardClass:"cardClass"},outputs:{shown:"shown",hidden:"hidden"},standalone:!0}),c})(),vv=(()=>{class c{constructor(r){this._El=r,this.ngbRef=new a.vpe}ngOnInit(){this.ngbRef.emit(this._El.nativeElement)}ngOnDestroy(){this.ngbRef.emit(null)}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(a.SBq))},c.\u0275dir=a.lG2({type:c,selectors:[["","ngbRef",""]],outputs:{ngbRef:"ngbRef"},standalone:!0}),c})(),vf=(()=>{class c{constructor(r,p){this.accordion=r,this.panel=p}set ngbPanelToggle(r){r&&(this.panel=r)}}return c.\u0275fac=function(r){return new(r||c)(a.Y36((0,a.Gpc)(()=>yf)),a.Y36(nm,9))},c.\u0275dir=a.lG2({type:c,selectors:[["button","ngbPanelToggle",""]],hostAttrs:["type","button"],hostVars:5,hostBindings:function(r,p){1&r&&a.NdJ("click",function(){return p.accordion.toggle(p.panel.id)}),2&r&&(a.Ikx("disabled",p.panel.disabled),a.uIk("aria-expanded",p.panel.isOpen)("aria-controls",p.panel.id),a.ekj("collapsed",!p.panel.isOpen))},inputs:{ngbPanelToggle:"ngbPanelToggle"},standalone:!0}),c})(),yf=(()=>{class c{constructor(r,p,T){this._ngZone=p,this._changeDetector=T,this.activeIds=[],this.destroyOnHide=!0,this.panelChange=new a.vpe,this.shown=new a.vpe,this.hidden=new a.vpe,this.animation=r.animation,this.type=r.type,this.closeOtherPanels=r.closeOthers}isExpanded(r){return this.activeIds.indexOf(r)>-1}expand(r){this._changeOpenState(this._findPanelById(r),!0)}expandAll(){this.closeOtherPanels?0===this.activeIds.length&&this.panels.length&&this._changeOpenState(this.panels.first,!0):this.panels.forEach(r=>this._changeOpenState(r,!0))}collapse(r){this._changeOpenState(this._findPanelById(r),!1)}collapseAll(){this.panels.forEach(r=>{this._changeOpenState(r,!1)})}toggle(r){const p=this._findPanelById(r);p&&this._changeOpenState(p,!p.isOpen)}ngAfterContentChecked(){sc(this.activeIds)&&(this.activeIds=this.activeIds.split(/\s*,\s*/)),this.panels.forEach(r=>{r.isOpen=!r.disabled&&this.activeIds.indexOf(r.id)>-1}),this.activeIds.length>1&&this.closeOtherPanels&&(this._closeOthers(this.activeIds[0],!1),this._updateActiveIds()),this._ngZone.onStable.pipe((0,Si.q)(1)).subscribe(()=>{this.panels.forEach(r=>{const p=r.panelDiv;p?r.initClassDone||(r.initClassDone=!0,Rs(this._ngZone,p,tm,{animation:!1,runningTransition:"continue",context:{direction:r.isOpen?"show":"hide",dimension:"height"}})):r.initClassDone=!1})})}_changeOpenState(r,p){if(null!=r&&!r.disabled&&r.isOpen!==p){let T=!1;this.panelChange.emit({panelId:r.id,nextState:p,preventDefault:()=>{T=!0}}),T||(r.isOpen=p,r.transitionRunning=!0,p&&this.closeOtherPanels&&this._closeOthers(r.id),this._updateActiveIds(),this._runTransitions(this.animation))}}_closeOthers(r,p=!0){this.panels.forEach(T=>{T.id!==r&&T.isOpen&&(T.isOpen=!1,T.transitionRunning=p)})}_findPanelById(r){return this.panels.find(p=>p.id===r)||null}_updateActiveIds(){this.activeIds=this.panels.filter(r=>r.isOpen&&!r.disabled).map(r=>r.id)}_runTransitions(r){this._changeDetector.detectChanges(),this.panels.forEach(p=>{p.transitionRunning&&Rs(this._ngZone,p.panelDiv,tm,{animation:r,runningTransition:"stop",context:{direction:p.isOpen?"show":"hide",dimension:"height"}}).subscribe(()=>{p.transitionRunning=!1;const{id:N}=p;p.isOpen?(p.shown.emit(),this.shown.emit(N)):(p.hidden.emit(),this.hidden.emit(N))})})}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(ld),a.Y36(a.R0b),a.Y36(a.sBO))},c.\u0275cmp=a.Xpm({type:c,selectors:[["ngb-accordion"]],contentQueries:function(r,p,T){if(1&r&&a.Suo(T,nm,4),2&r){let N;a.iGM(N=a.CRH())&&(p.panels=N)}},hostAttrs:["role","tablist",1,"accordion"],hostVars:1,hostBindings:function(r,p){2&r&&a.uIk("aria-multiselectable",!p.closeOtherPanels)},inputs:{animation:"animation",activeIds:"activeIds",closeOtherPanels:["closeOthers","closeOtherPanels"],destroyOnHide:"destroyOnHide",type:"type"},outputs:{panelChange:"panelChange",shown:"shown",hidden:"hidden"},exportAs:["ngbAccordion"],standalone:!0,features:[a.jDz],decls:3,vars:1,consts:[["ngbPanelHeader",""],["t",""],["ngFor","",3,"ngForOf"],[1,"accordion-button",3,"ngbPanelToggle"],[3,"ngTemplateOutlet"],["role","tab",3,"id"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["role","tabpanel",3,"id","ngbRef",4,"ngIf"],["role","tabpanel",3,"id","ngbRef"],[1,"accordion-body"]],template:function(r,p){1&r&&(a.YNc(0,og,3,3,"ng-template",0,1,a.W1O),a.YNc(2,Dp,4,11,"ng-template",2)),2&r&&(a.xp6(2),a.Q6J("ngForOf",p.panels))},dependencies:[Ye.ax,Ye.tP,vf,vv,Ut,Ye.O5],encapsulation:2}),c})(),Ug=(()=>{class c{constructor(r){this._ngbConfig=r,this.horizontal=!1}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(r){this._animation=r}}return c.\u0275fac=function(r){return new(r||c)(a.LFG(Vo))},c.\u0275prov=a.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),im=(()=>{class c{constructor(r,p,T){this._element=r,this._zone=T,this._afterInit=!1,this._isCollapsed=!1,this.ngbCollapseChange=new a.vpe,this.shown=new a.vpe,this.hidden=new a.vpe,this.animation=p.animation,this.horizontal=p.horizontal}set collapsed(r){this._isCollapsed!==r&&(this._isCollapsed=r,this._afterInit&&this._runTransitionWithEvents(r,this.animation))}ngOnInit(){this._runTransition(this._isCollapsed,!1),this._afterInit=!0}toggle(r=this._isCollapsed){this.collapsed=!r,this.ngbCollapseChange.next(this._isCollapsed)}_runTransition(r,p){return Rs(this._zone,this._element.nativeElement,tm,{animation:p,runningTransition:"stop",context:{direction:r?"hide":"show",dimension:this.horizontal?"width":"height"}})}_runTransitionWithEvents(r,p){this._runTransition(r,p).subscribe(()=>{r?this.hidden.emit():this.shown.emit()})}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(a.SBq),a.Y36(Ug),a.Y36(a.R0b))},c.\u0275dir=a.lG2({type:c,selectors:[["","ngbCollapse",""]],hostVars:2,hostBindings:function(r,p){2&r&&a.ekj("collapse-horizontal",p.horizontal)},inputs:{animation:"animation",collapsed:["ngbCollapse","collapsed"],horizontal:"horizontal"},outputs:{ngbCollapseChange:"ngbCollapseChange",shown:"shown",hidden:"hidden"},exportAs:["ngbCollapse"],standalone:!0}),c})(),bf=0,Dl=(()=>{class c{constructor(r){this._item=r}template(){return!1===this._item.destroyOnHide||this._item.animatingBodyCollapse?this._bodyTpl:null}}return c.\u0275fac=function(r){return new(r||c)(a.Y36((0,a.Gpc)(()=>nl)))},c.\u0275cmp=a.Xpm({type:c,selectors:[["","ngbAccordionBody",""]],contentQueries:function(r,p,T){if(1&r&&a.Suo(T,a.Rgc,7),2&r){let N;a.iGM(N=a.CRH())&&(p._bodyTpl=N.first)}},hostVars:2,hostBindings:function(r,p){2&r&&a.ekj("accordion-body",!0)},standalone:!0,features:[a.jDz],attrs:nv,decls:1,vars:1,consts:[[3,"ngTemplateOutlet"]],template:function(r,p){1&r&&a.YNc(0,wp,0,0,"ng-template",0),2&r&&a.Q6J("ngTemplateOutlet",p.template())},dependencies:[Ye.tP],encapsulation:2}),c})(),Ca=(()=>{class c{constructor(r,p){this.item=r,this.ngbCollapse=p}}return c.\u0275fac=function(r){return new(r||c)(a.Y36((0,a.Gpc)(()=>nl)),a.Y36(im))},c.\u0275dir=a.lG2({type:c,selectors:[["","ngbAccordionCollapse",""]],hostAttrs:["role","region"],hostVars:4,hostBindings:function(r,p){2&r&&(a.Ikx("id",p.item.collapseId),a.uIk("aria-labelledby",p.item.toggleId),a.ekj("accordion-collapse",!0))},exportAs:["ngbAccordionCollapse"],standalone:!0,features:[a.zW0([im])]}),c})(),nl=(()=>{class c{constructor(r,p){this._accordion=r,this._cd=p,this._subscriptions=[],this._collapsed=!0,this._id="ngb-accordion-item-"+bf++,this.animatingBodyCollapse=!1,this.destroyOnHide=this._accordion.destroyOnHide,this.disabled=!1,this.shown=new a.vpe,this.hidden=new a.vpe}set id(r){sc(r)&&""!==r&&(this._id=r)}set collapsed(r){this.collapsed!==r&&(this._collapsed=r,this._cd.markForCheck(),this._collapsed||(this.animatingBodyCollapse=!0,this._cd.detectChanges()),this._collapse.ngbCollapse.animation=this._accordion.animation,this._collapse.ngbCollapse.collapsed=r)}get collapsed(){return this._collapsed}get id(){return`${this._id}`}get toggleId(){return`${this.id}-toggle`}get collapseId(){return`${this.id}-collapse`}ngAfterContentInit(){const{ngbCollapse:r}=this._collapse;r.animation=!1,r.collapsed=this.collapsed,r.animation=this._accordion.animation,this._subscriptions.push(r.hidden.subscribe(()=>{this.animatingBodyCollapse=!1,this.hidden.emit(),this._accordion.hidden.emit(this.id)}),r.shown.subscribe(()=>{this.shown.emit(),this._accordion.shown.emit(this.id)}))}ngOnDestroy(){this._subscriptions.forEach(r=>r.unsubscribe())}toggle(){this.collapsed=!this.collapsed}}return c.\u0275fac=function(r){return new(r||c)(a.Y36((0,a.Gpc)(()=>oc)),a.Y36(a.sBO))},c.\u0275dir=a.lG2({type:c,selectors:[["","ngbAccordionItem",""]],contentQueries:function(r,p,T){if(1&r&&a.Suo(T,Ca,7),2&r){let N;a.iGM(N=a.CRH())&&(p._collapse=N.first)}},hostVars:3,hostBindings:function(r,p){2&r&&(a.Ikx("id",p.id),a.ekj("accordion-item",!0))},inputs:{id:["ngbAccordionItem","id"],destroyOnHide:"destroyOnHide",disabled:"disabled",collapsed:"collapsed"},outputs:{shown:"shown",hidden:"hidden"},exportAs:["ngbAccordionItem"],standalone:!0}),c})(),oc=(()=>{class c{constructor(r){this.destroyOnHide=!0,this.shown=new a.vpe,this.hidden=new a.vpe,this.animation=r.animation,this.closeOthers=r.closeOthers}toggle(r){const p=this._getItem(r);if(p){const T=p.collapsed;this._items.forEach(N=>{N===p?N.toggle():this.closeOthers&&T&&(N.collapsed=!0)})}}expand(r){const p=this._getItem(r);p&&this._items.forEach(T=>{T===p?p.collapsed=!1:this.closeOthers&&(T.collapsed=!0)})}expandAll(){this.closeOthers?this._items.find(r=>!r.collapsed)||(this._items.get(0).collapsed=!1):this._items.forEach(r=>{r.collapsed=!1})}collapse(r){const p=this._getItem(r);p&&(p.collapsed=!0)}collapseAll(){this._items.forEach(r=>r.collapsed=!0)}isExpanded(r){const p=this._getItem(r);return!!p&&!p.collapsed}_getItem(r){return this._items.find(p=>p.id===r)}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(ld))},c.\u0275dir=a.lG2({type:c,selectors:[["","ngbAccordion",""]],contentQueries:function(r,p,T){if(1&r&&a.Suo(T,nl,4),2&r){let N;a.iGM(N=a.CRH())&&(p._items=N)}},hostVars:2,hostBindings:function(r,p){2&r&&a.ekj("accordion",!0)},inputs:{animation:"animation",closeOthers:"closeOthers",destroyOnHide:"destroyOnHide"},outputs:{shown:"shown",hidden:"hidden"},exportAs:["ngbAccordion"],standalone:!0}),c})(),rm=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=a.oAB({type:c}),c.\u0275inj=a.cJS({imports:[yf,Dl]}),c})();const ch=({classList:c})=>{c.remove("show")};let Mf=(()=>{class c{constructor(r){this._ngbConfig=r,this.dismissible=!0,this.type="warning"}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(r){this._animation=r}}return c.\u0275fac=function(r){return new(r||c)(a.LFG(Vo))},c.\u0275prov=a.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),Hg=(()=>{class c{constructor(r,p,T,N){this._renderer=p,this._element=T,this._zone=N,this.closed=new a.vpe,this.dismissible=r.dismissible,this.type=r.type,this.animation=r.animation}close(){const r=Rs(this._zone,this._element.nativeElement,ch,{animation:this.animation,runningTransition:"continue"});return r.subscribe(()=>this.closed.emit()),r}ngOnChanges(r){const p=r.type;p&&!p.firstChange&&(this._renderer.removeClass(this._element.nativeElement,`alert-${p.previousValue}`),this._renderer.addClass(this._element.nativeElement,`alert-${p.currentValue}`))}ngOnInit(){this._renderer.addClass(this._element.nativeElement,`alert-${this.type}`)}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(Mf),a.Y36(a.Qsj),a.Y36(a.SBq),a.Y36(a.R0b))},c.\u0275cmp=a.Xpm({type:c,selectors:[["ngb-alert"]],hostAttrs:["role","alert",1,"alert","show"],hostVars:4,hostBindings:function(r,p){2&r&&a.ekj("fade",p.animation)("alert-dismissible",p.dismissible)},inputs:{animation:"animation",dismissible:"dismissible",type:"type"},outputs:{closed:"closed"},exportAs:["ngbAlert"],standalone:!0,features:[a.TTD,a.jDz],ngContentSelectors:Kd,decls:2,vars:1,consts:function(){let f;return f=$localize`:@@ngb.alert.close:Close`,[["type","button","class","btn-close","aria-label",f,3,"click",4,"ngIf"],["type","button","aria-label",f,1,"btn-close",3,"click"]]},template:function(r,p){1&r&&(a.F$t(),a.Hsn(0),a.YNc(1,iv,1,0,"button",0)),2&r&&(a.xp6(1),a.Q6J("ngIf",p.dismissible))},dependencies:[Ye.O5],styles:["ngb-alert{display:block}\n"],encapsulation:2,changeDetection:0}),c})(),uh=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=a.oAB({type:c}),c.\u0275inj=a.cJS({imports:[Hg]}),c})();var wl=(()=>{return(c=wl||(wl={})).START="start",c.END="end",wl;var c})();const xf=({classList:c})=>c.contains("carousel-item-start")||c.contains("carousel-item-end"),gu=c=>{c.remove("carousel-item-start"),c.remove("carousel-item-end")},_u=c=>{gu(c),c.remove("carousel-item-prev"),c.remove("carousel-item-next")},zg=(c,f,{direction:r})=>{const{classList:p}=c;return f?(xf(c)?gu(p):(p.add("carousel-item-"+(r===wl.START?"next":"prev")),mu(c),p.add("carousel-item-"+r)),()=>{_u(p),p.add("active")}):(gu(p),_u(p),void p.add("active"))},sm=(c,f,{direction:r})=>{const{classList:p}=c;return f?(xf(c)?gu(p):p.add("carousel-item-"+r),()=>{_u(p),p.remove("active")}):(gu(p),_u(p),void p.remove("active"))};let dh=(()=>{class c{constructor(r){this._ngbConfig=r,this.interval=5e3,this.wrap=!0,this.keyboard=!0,this.pauseOnHover=!0,this.pauseOnFocus=!0,this.showNavigationArrows=!0,this.showNavigationIndicators=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(r){this._animation=r}}return c.\u0275fac=function(r){return new(r||c)(a.LFG(Vo))},c.\u0275prov=a.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),Wg=0,Df=(()=>{class c{constructor(r){this.tplRef=r,this.id="ngb-slide-"+Wg++,this.slid=new a.vpe}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(a.Rgc))},c.\u0275dir=a.lG2({type:c,selectors:[["ng-template","ngbSlide",""]],inputs:{id:"id"},outputs:{slid:"slid"},standalone:!0}),c})(),$g=(()=>{class c{constructor(r,p,T,N,ne){this._platformId=p,this._ngZone=T,this._cd=N,this._container=ne,this.NgbSlideEventSource=mr,this._destroy$=new Ae.x,this._interval$=new Dt.X(0),this._mouseHover$=new Dt.X(!1),this._focused$=new Dt.X(!1),this._pauseOnHover$=new Dt.X(!1),this._pauseOnFocus$=new Dt.X(!1),this._pause$=new Dt.X(!1),this._wrap$=new Dt.X(!1),this.slide=new a.vpe,this.slid=new a.vpe,this._transitionIds=null,this.animation=r.animation,this.interval=r.interval,this.wrap=r.wrap,this.keyboard=r.keyboard,this.pauseOnHover=r.pauseOnHover,this.pauseOnFocus=r.pauseOnFocus,this.showNavigationArrows=r.showNavigationArrows,this.showNavigationIndicators=r.showNavigationIndicators}set interval(r){this._interval$.next(r)}get interval(){return this._interval$.value}set wrap(r){this._wrap$.next(r)}get wrap(){return this._wrap$.value}set pauseOnHover(r){this._pauseOnHover$.next(r)}get pauseOnHover(){return this._pauseOnHover$.value}set pauseOnFocus(r){this._pauseOnFocus$.next(r)}get pauseOnFocus(){return this._pauseOnFocus$.value}set mouseHover(r){this._mouseHover$.next(r)}get mouseHover(){return this._mouseHover$.value}set focused(r){this._focused$.next(r)}get focused(){return this._focused$.value}arrowLeft(){this.focus(),this.prev(mr.ARROW_LEFT)}arrowRight(){this.focus(),this.next(mr.ARROW_RIGHT)}ngAfterContentInit(){(0,Ye.NF)(this._platformId)&&this._ngZone.runOutsideAngular(()=>{const r=(0,Cn.a)([this.slide.pipe((0,Ur.U)(p=>p.current),(0,us.O)(this.activeId)),this._wrap$,this.slides.changes.pipe((0,us.O)(null))]).pipe((0,Ur.U)(([p,T])=>{const N=this.slides.toArray(),ne=this._getSlideIdxById(p);return T?N.length>1:ne<N.length-1}),Sr());(0,Cn.a)([this._pause$,this._pauseOnHover$,this._mouseHover$,this._pauseOnFocus$,this._focused$,this._interval$,r]).pipe((0,Ur.U)(([p,T,N,ne,he,ge,De])=>p||T&&N||ne&&he||!De?0:ge),Sr(),(0,$o.w)(p=>p>0?fn(p,p):tr),(0,wn.R)(this._destroy$)).subscribe(()=>this._ngZone.run(()=>this.next(mr.TIMER)))}),this.slides.changes.pipe((0,wn.R)(this._destroy$)).subscribe(()=>{this._transitionIds?.forEach(r=>(c=>{sh.get(c)?.complete()})(this._getSlideElement(r))),this._transitionIds=null,this._cd.markForCheck(),this._ngZone.onStable.pipe((0,Si.q)(1)).subscribe(()=>{for(const{id:r}of this.slides){const p=this._getSlideElement(r);r===this.activeId?p.classList.add("active"):p.classList.remove("active")}})})}ngAfterContentChecked(){let r=this._getSlideById(this.activeId);this.activeId=r?r.id:this.slides.length?this.slides.first.id:""}ngAfterViewInit(){if(this.activeId){const r=this._getSlideElement(this.activeId);r&&r.classList.add("active")}}ngOnDestroy(){this._destroy$.next()}select(r,p){this._cycleToSelected(r,this._getSlideEventDirection(this.activeId,r),p)}prev(r){this._cycleToSelected(this._getPrevSlide(this.activeId),wl.END,r)}next(r){this._cycleToSelected(this._getNextSlide(this.activeId),wl.START,r)}pause(){this._pause$.next(!0)}cycle(){this._pause$.next(!1)}focus(){this._container.nativeElement.focus()}_cycleToSelected(r,p,T){const N=this._transitionIds;if(N&&(N[0]!==r||N[1]!==this.activeId))return;let ne=this._getSlideById(r);if(ne&&ne.id!==this.activeId){this._transitionIds=[this.activeId,r],this.slide.emit({prev:this.activeId,current:ne.id,direction:p,paused:this._pause$.value,source:T});const he={animation:this.animation,runningTransition:"stop",context:{direction:p}},ge=[],De=this._getSlideById(this.activeId);if(De){const jt=Rs(this._ngZone,this._getSlideElement(De.id),sm,he);jt.subscribe(()=>{De.slid.emit({isShown:!1,direction:p,source:T})}),ge.push(jt)}const Ie=this.activeId;this.activeId=ne.id;const Lt=this._getSlideById(this.activeId),ct=Rs(this._ngZone,this._getSlideElement(ne.id),zg,he);ct.subscribe(()=>{Lt?.slid.emit({isShown:!0,direction:p,source:T})}),ge.push(ct),Wt(...ge).pipe((0,Si.q)(1)).subscribe(()=>{this._transitionIds=null,this.slid.emit({prev:Ie,current:ne.id,direction:p,paused:this._pause$.value,source:T})})}this._cd.markForCheck()}_getSlideEventDirection(r,p){return this._getSlideIdxById(r)>this._getSlideIdxById(p)?wl.END:wl.START}_getSlideById(r){return this.slides.find(p=>p.id===r)||null}_getSlideIdxById(r){const p=this._getSlideById(r);return null!=p?this.slides.toArray().indexOf(p):-1}_getNextSlide(r){const p=this.slides.toArray(),T=this._getSlideIdxById(r);return T===p.length-1?this.wrap?p[0].id:p[p.length-1].id:p[T+1].id}_getPrevSlide(r){const p=this.slides.toArray(),T=this._getSlideIdxById(r);return 0===T?this.wrap?p[p.length-1].id:p[0].id:p[T-1].id}_getSlideElement(r){return this._container.nativeElement.querySelector(`#slide-${r}`)}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(dh),a.Y36(a.Lbi),a.Y36(a.R0b),a.Y36(a.sBO),a.Y36(a.SBq))},c.\u0275cmp=a.Xpm({type:c,selectors:[["ngb-carousel"]],contentQueries:function(r,p,T){if(1&r&&a.Suo(T,Df,4),2&r){let N;a.iGM(N=a.CRH())&&(p.slides=N)}},hostAttrs:["tabIndex","0",1,"carousel","slide"],hostVars:3,hostBindings:function(r,p){1&r&&a.NdJ("keydown.arrowLeft",function(){return p.keyboard&&p.arrowLeft()})("keydown.arrowRight",function(){return p.keyboard&&p.arrowRight()})("mouseenter",function(){return p.mouseHover=!0})("mouseleave",function(){return p.mouseHover=!1})("focusin",function(){return p.focused=!0})("focusout",function(){return p.focused=!1}),2&r&&(a.uIk("aria-activedescendant","slide-"+p.activeId),a.Udp("display","block"))},inputs:{animation:"animation",activeId:"activeId",interval:"interval",wrap:"wrap",keyboard:"keyboard",pauseOnHover:"pauseOnHover",pauseOnFocus:"pauseOnFocus",showNavigationArrows:"showNavigationArrows",showNavigationIndicators:"showNavigationIndicators"},outputs:{slide:"slide",slid:"slid"},exportAs:["ngbCarousel"],standalone:!0,features:[a.jDz],decls:6,vars:6,consts:function(){let f,r,p;return f=$localize`:Currently selected slide number read by screen reader@@ngb.carousel.slide-number: Slide ${"\ufffd0\ufffd"}:INTERPOLATION: of ${"\ufffd1\ufffd"}:INTERPOLATION_1: `,r=$localize`:@@ngb.carousel.previous:Previous`,p=$localize`:@@ngb.carousel.next:Next`,[["role","tablist",1,"carousel-indicators"],["type","button","data-bs-target","","role","tab",3,"active","click",4,"ngFor","ngForOf"],[1,"carousel-inner"],["class","carousel-item","role","tabpanel",3,"id",4,"ngFor","ngForOf"],["class","carousel-control-prev","type","button",3,"click",4,"ngIf"],["class","carousel-control-next","type","button",3,"click",4,"ngIf"],["type","button","data-bs-target","","role","tab",3,"click"],["role","tabpanel",1,"carousel-item",3,"id"],[1,"visually-hidden"],f,[3,"ngTemplateOutlet"],["type","button",1,"carousel-control-prev",3,"click"],["aria-hidden","true",1,"carousel-control-prev-icon"],r,["type","button",1,"carousel-control-next",3,"click"],["aria-hidden","true",1,"carousel-control-next-icon"],p]},template:function(r,p){1&r&&(a.TgZ(0,"div",0),a.YNc(1,cg,1,5,"button",1),a.qZA(),a.TgZ(2,"div",2),a.YNc(3,rv,4,4,"div",3),a.qZA(),a.YNc(4,sv,4,0,"button",4),a.YNc(5,Qh,4,0,"button",5)),2&r&&(a.ekj("visually-hidden",!p.showNavigationIndicators),a.xp6(1),a.Q6J("ngForOf",p.slides),a.xp6(2),a.Q6J("ngForOf",p.slides),a.xp6(1),a.Q6J("ngIf",p.showNavigationArrows),a.xp6(1),a.Q6J("ngIf",p.showNavigationArrows))},dependencies:[Ye.ax,Ye.tP,Ye.O5],encapsulation:2,changeDetection:0}),c})();var mr=(()=>{return(c=mr||(mr={})).TIMER="timer",c.ARROW_LEFT="arrowLeft",c.ARROW_RIGHT="arrowRight",c.INDICATOR="indicator",mr;var c})();let om=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=a.oAB({type:c}),c.\u0275inj=a.cJS({imports:[$g]}),c})(),am=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=a.oAB({type:c}),c.\u0275inj=a.cJS({}),c})();class qr{constructor(f,r,p){this.year=or(f)?f:null,this.month=or(r)?r:null,this.day=or(p)?p:null}static from(f){return f instanceof qr?f:f?new qr(f.year,f.month,f.day):null}equals(f){return null!=f&&this.year===f.year&&this.month===f.month&&this.day===f.day}before(f){return!!f&&(this.year===f.year?this.month===f.month?this.day!==f.day&&this.day<f.day:this.month<f.month:this.year<f.year)}after(f){return!!f&&(this.year===f.year?this.month===f.month?this.day!==f.day&&this.day>f.day:this.month>f.month:this.year>f.year)}}function ac(c,f){return!function lm(c,f){return!c&&!f||!!c&&!!f&&c.equals(f)}(c,f)}function wf(c,f){return!(!c&&!f||c&&f&&c.year===f.year&&c.month===f.month)}function cd(c,f,r){return c&&f&&c.before(f)?f:c&&r&&c.after(r)?r:c||null}function ud(c,f){const{minDate:r,maxDate:p,disabled:T,markDisabled:N}=f;return!(null==c||T||N&&N(c,{year:c.year,month:c.month})||r&&c.before(r)||p&&c.after(p))}function qg(c){return new qr(c.getFullYear(),c.getMonth()+1,c.getDate())}function hh(c){const f=new Date(c.year,c.month-1,c.day,12);return isNaN(f.getTime())||f.setFullYear(c.year),f}let hd=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275prov=a.Yz7({token:c,factory:function(){return function dm(){return new Rf}()},providedIn:"root"}),c})(),Rf=(()=>{class c extends hd{getDaysPerWeek(){return 7}getMonths(){return[1,2,3,4,5,6,7,8,9,10,11,12]}getWeeksPerMonth(){return 6}getNext(r,p="d",T=1){let N=hh(r),ne=!0,he=N.getMonth();switch(p){case"y":N.setFullYear(N.getFullYear()+T);break;case"m":he+=T,N.setMonth(he),he%=12,he<0&&(he+=12);break;case"d":N.setDate(N.getDate()+T),ne=!1;break;default:return r}return ne&&N.getMonth()!==he&&N.setDate(0),qg(N)}getPrev(r,p="d",T=1){return this.getNext(r,p,-T)}getWeekday(r){let T=hh(r).getDay();return 0===T?7:T}getWeekNumber(r,p){7===p&&(p=0);const ne=hh(r[(11-p)%7]);ne.setDate(ne.getDate()+4-(ne.getDay()||7));const he=ne.getTime();return ne.setMonth(0),ne.setDate(1),Math.floor(Math.round((he-ne.getTime())/864e5)/7)+1}getToday(){return qg(new Date)}isValid(r){if(!(r&&or(r.year)&&or(r.month)&&or(r.day)&&0!==r.year))return!1;const p=hh(r);return!isNaN(p.getTime())&&p.getFullYear()===r.year&&p.getMonth()+1===r.month&&p.getDate()===r.day}}return c.\u0275fac=function(){let f;return function(p){return(f||(f=a.n5z(c)))(p||c)}}(),c.\u0275prov=a.Yz7({token:c,factory:c.\u0275fac}),c})(),Rl=(()=>{class c{getMonthLabel(r){return`${this.getMonthFullName(r.month,r.year)} ${this.getYearNumerals(r.year)}`}getDayNumerals(r){return`${r.day}`}getWeekNumerals(r){return`${r}`}getYearNumerals(r){return`${r}`}getWeekLabel(){return""}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275prov=a.Yz7({token:c,factory:function(r){let p=null;return p=r?new r:function yv(c){return new Zg(c)}(a.LFG(a.soG)),p},providedIn:"root"}),c})(),Zg=(()=>{class c extends Rl{constructor(r){super(),this._locale=r,this._monthsShort=(0,Ye.UT)(r,Ye.x.Standalone,Ye.Tn.Abbreviated),this._monthsFull=(0,Ye.UT)(r,Ye.x.Standalone,Ye.Tn.Wide)}getWeekdayLabel(r,p){const T=(0,Ye.Mn)(this._locale,Ye.x.Standalone,void 0===p?Ye.Tn.Short:p);return T.map((ne,he)=>T[(he+1)%7])[r-1]||""}getMonthShortName(r){return this._monthsShort[r-1]||""}getMonthFullName(r){return this._monthsFull[r-1]||""}getDayAriaLabel(r){const p=new Date(r.year,r.month-1,r.day);return(0,Ye.p6)(p,"fullDate",this._locale)}}return c.\u0275fac=function(r){return new(r||c)(a.LFG(a.soG))},c.\u0275prov=a.Yz7({token:c,factory:c.\u0275fac}),c})(),fd=(()=>{class c{constructor(r,p){this._calendar=r,this._i18n=p,this._VALIDATORS={dayTemplateData:T=>{if(this._state.dayTemplateData!==T)return{dayTemplateData:T}},displayMonths:T=>{if(or(T=Qs(T))&&T>0&&this._state.displayMonths!==T)return{displayMonths:T}},disabled:T=>{if(this._state.disabled!==T)return{disabled:T}},firstDayOfWeek:T=>{if(or(T=Qs(T))&&T>=0&&this._state.firstDayOfWeek!==T)return{firstDayOfWeek:T}},focusVisible:T=>{if(this._state.focusVisible!==T&&!this._state.disabled)return{focusVisible:T}},markDisabled:T=>{if(this._state.markDisabled!==T)return{markDisabled:T}},maxDate:T=>{const N=this.toValidDate(T,null);if(ac(this._state.maxDate,N))return{maxDate:N}},minDate:T=>{const N=this.toValidDate(T,null);if(ac(this._state.minDate,N))return{minDate:N}},navigation:T=>{if(this._state.navigation!==T)return{navigation:T}},outsideDays:T=>{if(this._state.outsideDays!==T)return{outsideDays:T}},weekdays:T=>{const N=!0===T||!1===T?Ye.Tn.Short:T,ne=!0!==T&&!1!==T||T;if(this._state.weekdayWidth!==N||this._state.weekdaysVisible!==ne)return{weekdayWidth:N,weekdaysVisible:ne}}},this._model$=new Ae.x,this._dateSelect$=new Ae.x,this._state={dayTemplateData:null,markDisabled:null,maxDate:null,minDate:null,disabled:!1,displayMonths:1,firstDate:null,firstDayOfWeek:1,lastDate:null,focusDate:null,focusVisible:!1,months:[],navigation:"select",outsideDays:"visible",prevDisabled:!1,nextDisabled:!1,selectedDate:null,selectBoxes:{years:[],months:[]},weekdayWidth:Ye.Tn.Short,weekdaysVisible:!0}}get model$(){return this._model$.pipe((0,cr.h)(r=>r.months.length>0))}get dateSelect$(){return this._dateSelect$.pipe((0,cr.h)(r=>null!==r))}set(r){let p=Object.keys(r).map(T=>this._VALIDATORS[T](r[T])).reduce((T,N)=>({...T,...N}),{});Object.keys(p).length>0&&this._nextState(p)}focus(r){const p=this.toValidDate(r,null);null!=p&&!this._state.disabled&&ac(this._state.focusDate,p)&&this._nextState({focusDate:r})}focusSelect(){ud(this._state.focusDate,this._state)&&this.select(this._state.focusDate,{emitEvent:!0})}open(r){const p=this.toValidDate(r,this._calendar.getToday());null!=p&&!this._state.disabled&&(!this._state.firstDate||wf(this._state.firstDate,p))&&this._nextState({firstDate:p})}select(r,p={}){const T=this.toValidDate(r,null);null!=T&&!this._state.disabled&&(ac(this._state.selectedDate,T)&&this._nextState({selectedDate:T}),p.emitEvent&&ud(T,this._state)&&this._dateSelect$.next(T))}toValidDate(r,p){const T=qr.from(r);return void 0===p&&(p=this._calendar.getToday()),this._calendar.isValid(T)?T:p}getMonth(r){for(let p of this._state.months)if(r.month===p.number&&r.year===p.year)return p;throw new Error(`month ${r.month} of year ${r.year} not found`)}_nextState(r){const p=this._updateState(r);this._patchContexts(p),this._state=p,this._model$.next(this._state)}_patchContexts(r){const{months:p,displayMonths:T,selectedDate:N,focusDate:ne,focusVisible:he,disabled:ge,outsideDays:De}=r;r.months.forEach(Ie=>{Ie.weeks.forEach(Lt=>{Lt.days.forEach(ct=>{ne&&(ct.context.focused=ne.equals(ct.date)&&he),ct.tabindex=!ge&&ne&&ct.date.equals(ne)&&ne.month===Ie.number?0:-1,!0===ge&&(ct.context.disabled=!0),void 0!==N&&(ct.context.selected=null!==N&&N.equals(ct.date)),Ie.number!==ct.date.month&&(ct.hidden="hidden"===De||"collapsed"===De||T>1&&ct.date.after(p[0].firstDate)&&ct.date.before(p[T-1].lastDate))})})})}_updateState(r){const p=Object.assign({},this._state,r);let T=p.firstDate;if(("minDate"in r||"maxDate"in r)&&(function cm(c,f){if(f&&c&&f.before(c))throw new Error(`'maxDate' ${f} should be greater than 'minDate' ${c}`)}(p.minDate,p.maxDate),p.focusDate=cd(p.focusDate,p.minDate,p.maxDate),p.firstDate=cd(p.firstDate,p.minDate,p.maxDate),T=p.focusDate),"disabled"in r&&(p.focusVisible=!1),"selectedDate"in r&&0===this._state.months.length&&(T=p.selectedDate),"focusVisible"in r||"focusDate"in r&&(p.focusDate=cd(p.focusDate,p.minDate,p.maxDate),T=p.focusDate,0!==p.months.length&&p.focusDate&&!p.focusDate.before(p.firstDate)&&!p.focusDate.after(p.lastDate)))return p;if("firstDate"in r&&(p.firstDate=cd(p.firstDate,p.minDate,p.maxDate),T=p.firstDate),T){const ne=function ss(c,f,r,p,T){const{displayMonths:N,months:ne}=r,he=ne.splice(0,ne.length);return Array.from({length:N},(De,Ie)=>{const Lt=Object.assign(c.getNext(f,"m",Ie),{day:1});if(ne[Ie]=null,!T){const ct=he.findIndex(jt=>jt.firstDate.equals(Lt));-1!==ct&&(ne[Ie]=he.splice(ct,1)[0])}return Lt}).forEach((De,Ie)=>{null===ne[Ie]&&(ne[Ie]=function dd(c,f,r,p,T={}){const{dayTemplateData:N,minDate:ne,maxDate:he,firstDayOfWeek:ge,markDisabled:De,outsideDays:Ie,weekdayWidth:Lt,weekdaysVisible:ct}=r,jt=c.getToday();T.firstDate=null,T.lastDate=null,T.number=f.month,T.year=f.year,T.weeks=T.weeks||[],T.weekdays=T.weekdays||[],f=function um(c,f,r){const p=c.getDaysPerWeek(),T=new qr(f.year,f.month,1),N=c.getWeekday(T)%p;return c.getPrev(T,"d",(p+N-r)%p)}(c,f,ge),ct||(T.weekdays.length=0);for(let Vn=0;Vn<c.getWeeksPerMonth();Vn++){let Tn=T.weeks[Vn];Tn||(Tn=T.weeks[Vn]={number:0,days:[],collapsed:!0});const Mn=Tn.days;for(let ri=0;ri<c.getDaysPerWeek();ri++){0===Vn&&ct&&(T.weekdays[ri]=p.getWeekdayLabel(c.getWeekday(f),Lt));const Qn=new qr(f.year,f.month,f.day),Ti=c.getNext(Qn),vi=p.getDayAriaLabel(Qn);let ai=!!(ne&&Qn.before(ne)||he&&Qn.after(he));!ai&&De&&(ai=De(Qn,{month:T.number,year:T.year}));let si=Qn.equals(jt),Ni=N?N(Qn,{month:T.number,year:T.year}):void 0;null===T.firstDate&&Qn.month===T.number&&(T.firstDate=Qn),Qn.month===T.number&&Ti.month!==T.number&&(T.lastDate=Qn);let Fi=Mn[ri];Fi||(Fi=Mn[ri]={}),Fi.date=Qn,Fi.context=Object.assign(Fi.context||{},{$implicit:Qn,date:Qn,data:Ni,currentMonth:T.number,currentYear:T.year,disabled:ai,focused:!1,selected:!1,today:si}),Fi.tabindex=-1,Fi.ariaLabel=vi,Fi.hidden=!1,f=Ti}Tn.number=c.getWeekNumber(Mn.map(ri=>ri.date),ge),Tn.collapsed="collapsed"===Ie&&Mn[0].date.month!==T.number&&Mn[Mn.length-1].date.month!==T.number}return T}(c,De,r,p,he.shift()||{}))}),ne}(this._calendar,T,p,this._i18n,"dayTemplateData"in r||"firstDayOfWeek"in r||"markDisabled"in r||"minDate"in r||"maxDate"in r||"disabled"in r||"outsideDays"in r||"weekdaysVisible"in r);p.months=ne,p.firstDate=ne[0].firstDate,p.lastDate=ne[ne.length-1].lastDate,"selectedDate"in r&&!ud(p.selectedDate,p)&&(p.selectedDate=null),"firstDate"in r&&(!p.focusDate||p.focusDate.before(p.firstDate)||p.focusDate.after(p.lastDate))&&(p.focusDate=T);const he=!this._state.firstDate||this._state.firstDate.year!==p.firstDate.year,ge=!this._state.firstDate||this._state.firstDate.month!==p.firstDate.month;"select"===p.navigation?(("minDate"in r||"maxDate"in r||0===p.selectBoxes.years.length||he)&&(p.selectBoxes.years=function Jg(c,f,r){if(!c)return[];const p=f?Math.max(f.year,c.year-500):c.year-10,N=(r?Math.min(r.year,c.year+500):c.year+10)-p+1,ne=Array(N);for(let he=0;he<N;he++)ne[he]=p+he;return ne}(p.firstDate,p.minDate,p.maxDate)),("minDate"in r||"maxDate"in r||0===p.selectBoxes.months.length||he)&&(p.selectBoxes.months=function Yg(c,f,r,p){if(!f)return[];let T=c.getMonths(f.year);if(r&&f.year===r.year){const N=T.findIndex(ne=>ne===r.month);T=T.slice(N)}if(p&&f.year===p.year){const N=T.findIndex(ne=>ne===p.month);T=T.slice(0,N+1)}return T}(this._calendar,p.firstDate,p.minDate,p.maxDate))):p.selectBoxes={years:[],months:[]},("arrows"===p.navigation||"select"===p.navigation)&&(ge||he||"minDate"in r||"maxDate"in r||"disabled"in r)&&(p.prevDisabled=p.disabled||function Zr(c,f,r){const p=Object.assign(c.getPrev(f,"m"),{day:1});return null!=r&&(p.year===r.year&&p.month<r.month||p.year<r.year&&1===r.month)}(this._calendar,p.firstDate,p.minDate),p.nextDisabled=p.disabled||function il(c,f,r){const p=Object.assign(c.getNext(f,"m"),{day:1});return null!=r&&p.after(r)}(this._calendar,p.lastDate,p.maxDate))}return p}}return c.\u0275fac=function(r){return new(r||c)(a.LFG(hd),a.LFG(Rl))},c.\u0275prov=a.Yz7({token:c,factory:c.\u0275fac}),c})();var Bc=(()=>{return(c=Bc||(Bc={}))[c.PREV=0]="PREV",c[c.NEXT=1]="NEXT",Bc;var c})();let hm=(()=>{class c{constructor(r){this.i18n=r}isMuted(){return!this.selected&&(this.date.month!==this.currentMonth||this.disabled)}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(Rl))},c.\u0275cmp=a.Xpm({type:c,selectors:[["","ngbDatepickerDayView",""]],hostAttrs:[1,"btn-light"],hostVars:10,hostBindings:function(r,p){2&r&&a.ekj("bg-primary",p.selected)("text-white",p.selected)("text-muted",p.isMuted())("outside",p.isMuted())("active",p.focused)},inputs:{currentMonth:"currentMonth",date:"date",disabled:"disabled",focused:"focused",selected:"selected"},standalone:!0,features:[a.jDz],attrs:ov,decls:1,vars:1,template:function(r,p){1&r&&a._uU(0),2&r&&a.Oqu(p.i18n.getDayNumerals(p.date))},styles:["[ngbDatepickerDayView]{text-align:center;width:2rem;height:2rem;line-height:2rem;border-radius:.25rem;background:transparent}[ngbDatepickerDayView]:hover:not(.bg-primary),[ngbDatepickerDayView].active:not(.bg-primary){background-color:var(--bs-btn-bg);outline:1px solid var(--bs-border-color)}[ngbDatepickerDayView].outside{opacity:.5}\n"],encapsulation:2,changeDetection:0}),c})(),jc=(()=>{class c{constructor(r,p){this.i18n=r,this._renderer=p,this.select=new a.vpe,this._month=-1,this._year=-1}changeMonth(r){this.select.emit(new qr(this.date.year,Qs(r),1))}changeYear(r){this.select.emit(new qr(Qs(r),this.date.month,1))}ngAfterViewChecked(){this.date&&(this.date.month!==this._month&&(this._month=this.date.month,this._renderer.setProperty(this.monthSelect.nativeElement,"value",this._month)),this.date.year!==this._year&&(this._year=this.date.year,this._renderer.setProperty(this.yearSelect.nativeElement,"value",this._year)))}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(Rl),a.Y36(a.Qsj))},c.\u0275cmp=a.Xpm({type:c,selectors:[["ngb-datepicker-navigation-select"]],viewQuery:function(r,p){if(1&r&&(a.Gf(av,7,a.SBq),a.Gf(lv,7,a.SBq)),2&r){let T;a.iGM(T=a.CRH())&&(p.monthSelect=T.first),a.iGM(T=a.CRH())&&(p.yearSelect=T.first)}},inputs:{date:"date",disabled:"disabled",months:"months",years:"years"},outputs:{select:"select"},standalone:!0,features:[a.jDz],decls:6,vars:4,consts:function(){let f,r,p,T;return f=$localize`:@@ngb.datepicker.select-month:Select month`,r=$localize`:@@ngb.datepicker.select-month:Select month`,p=$localize`:@@ngb.datepicker.select-year:Select year`,T=$localize`:@@ngb.datepicker.select-year:Select year`,[["aria-label",f,"title",r,1,"form-select",3,"disabled","change"],["month",""],[3,"value",4,"ngFor","ngForOf"],["aria-label",p,"title",T,1,"form-select",3,"disabled","change"],["year",""],[3,"value"]]},template:function(r,p){1&r&&(a.TgZ(0,"select",0,1),a.NdJ("change",function(N){return p.changeMonth(N.target.value)}),a.YNc(2,cv,2,3,"option",2),a.qZA(),a.TgZ(3,"select",3,4),a.NdJ("change",function(N){return p.changeYear(N.target.value)}),a.YNc(5,uv,2,2,"option",2),a.qZA()),2&r&&(a.Q6J("disabled",p.disabled),a.xp6(2),a.Q6J("ngForOf",p.months),a.xp6(1),a.Q6J("disabled",p.disabled),a.xp6(2),a.Q6J("ngForOf",p.years))},dependencies:[Ye.ax],styles:["ngb-datepicker-navigation-select>.form-select{flex:1 1 auto;padding:0 .5rem;font-size:.875rem;height:1.85rem}ngb-datepicker-navigation-select>.form-select:focus{z-index:1}ngb-datepicker-navigation-select>.form-select::-ms-value{background-color:transparent!important}\n"],encapsulation:2,changeDetection:0}),c})(),Kg=(()=>{class c{constructor(r){this.i18n=r,this.navigation=Bc,this.months=[],this.navigate=new a.vpe,this.select=new a.vpe}onClickPrev(r){r.currentTarget.focus(),this.navigate.emit(this.navigation.PREV)}onClickNext(r){r.currentTarget.focus(),this.navigate.emit(this.navigation.NEXT)}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(Rl))},c.\u0275cmp=a.Xpm({type:c,selectors:[["ngb-datepicker-navigation"]],inputs:{date:"date",disabled:"disabled",months:"months",showSelect:"showSelect",prevDisabled:"prevDisabled",nextDisabled:"nextDisabled",selectBoxes:"selectBoxes"},outputs:{navigate:"navigate",select:"select"},standalone:!0,features:[a.jDz],decls:8,vars:4,consts:function(){let f,r,p,T;return f=$localize`:@@ngb.datepicker.previous-month:Previous month`,r=$localize`:@@ngb.datepicker.previous-month:Previous month`,p=$localize`:@@ngb.datepicker.next-month:Next month`,T=$localize`:@@ngb.datepicker.next-month:Next month`,[[1,"ngb-dp-arrow"],["type","button","aria-label",f,"title",r,1,"btn","btn-link","ngb-dp-arrow-btn",3,"disabled","click"],[1,"ngb-dp-navigation-chevron"],["class","ngb-dp-navigation-select",3,"date","disabled","months","years","select",4,"ngIf"],[4,"ngIf"],[1,"ngb-dp-arrow","right"],["type","button","aria-label",p,"title",T,1,"btn","btn-link","ngb-dp-arrow-btn",3,"disabled","click"],[1,"ngb-dp-navigation-select",3,"date","disabled","months","years","select"],["ngFor","",3,"ngForOf"],["class","ngb-dp-arrow",4,"ngIf"],[1,"ngb-dp-month-name"]]},template:function(r,p){1&r&&(a.TgZ(0,"div",0)(1,"button",1),a.NdJ("click",function(N){return p.onClickPrev(N)}),a._UZ(2,"span",2),a.qZA()(),a.YNc(3,ug,1,4,"ngb-datepicker-navigation-select",3),a.YNc(4,Cp,1,1,null,4),a.TgZ(5,"div",5)(6,"button",6),a.NdJ("click",function(N){return p.onClickNext(N)}),a._UZ(7,"span",2),a.qZA()()),2&r&&(a.xp6(1),a.Q6J("disabled",p.prevDisabled),a.xp6(2),a.Q6J("ngIf",p.showSelect),a.xp6(1),a.Q6J("ngIf",!p.showSelect),a.xp6(2),a.Q6J("disabled",p.nextDisabled))},dependencies:[Ye.O5,Ye.ax,jc],styles:["ngb-datepicker-navigation{display:flex;align-items:center}.ngb-dp-navigation-chevron{border-style:solid;border-width:.2em .2em 0 0;display:inline-block;width:.75em;height:.75em;margin-left:.25em;margin-right:.15em;transform:rotate(-135deg)}.ngb-dp-arrow{display:flex;flex:1 1 auto;padding-right:0;padding-left:0;margin:0;width:2rem;height:2rem}.ngb-dp-arrow.right{justify-content:flex-end}.ngb-dp-arrow.right .ngb-dp-navigation-chevron{transform:rotate(45deg);margin-left:.15em;margin-right:.25em}.ngb-dp-arrow-btn{padding:0 .25rem;margin:0 .5rem;border:none;background-color:transparent;z-index:1}.ngb-dp-arrow-btn:focus{outline-width:1px;outline-style:auto}@media all and (-ms-high-contrast: none),(-ms-high-contrast: active){.ngb-dp-arrow-btn:focus{outline-style:solid}}.ngb-dp-month-name{font-size:larger;height:2rem;line-height:2rem;text-align:center}.ngb-dp-navigation-select{display:flex;flex:1 1 9rem}\n"],encapsulation:2,changeDetection:0}),c})();var _i=(()=>{return(c=_i||(_i={}))[c.Tab=9]="Tab",c[c.Enter=13]="Enter",c[c.Escape=27]="Escape",c[c.Space=32]="Space",c[c.PageUp=33]="PageUp",c[c.PageDown=34]="PageDown",c[c.End=35]="End",c[c.Home=36]="Home",c[c.ArrowLeft=37]="ArrowLeft",c[c.ArrowUp=38]="ArrowUp",c[c.ArrowRight=39]="ArrowRight",c[c.ArrowDown=40]="ArrowDown",_i;var c})();let fh=(()=>{class c{processKey(r,p){const{state:T,calendar:N}=p;switch(r.which){case _i.PageUp:p.focusDate(N.getPrev(T.focusedDate,r.shiftKey?"y":"m",1));break;case _i.PageDown:p.focusDate(N.getNext(T.focusedDate,r.shiftKey?"y":"m",1));break;case _i.End:p.focusDate(r.shiftKey?T.maxDate:T.lastDate);break;case _i.Home:p.focusDate(r.shiftKey?T.minDate:T.firstDate);break;case _i.ArrowLeft:p.focusDate(N.getPrev(T.focusedDate,"d",1));break;case _i.ArrowUp:p.focusDate(N.getPrev(T.focusedDate,"d",N.getDaysPerWeek()));break;case _i.ArrowRight:p.focusDate(N.getNext(T.focusedDate,"d",1));break;case _i.ArrowDown:p.focusDate(N.getNext(T.focusedDate,"d",N.getDaysPerWeek()));break;case _i.Enter:case _i.Space:p.focusSelect();break;default:return}r.preventDefault(),r.stopPropagation()}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275prov=a.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),Sf=(()=>{class c{constructor(){this.displayMonths=1,this.firstDayOfWeek=1,this.navigation="select",this.outsideDays="visible",this.showWeekNumbers=!1,this.weekdays=Ye.Tn.Short}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275prov=a.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),vu=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275prov=a.Yz7({token:c,factory:function(){return function Cf(){return new kc}()},providedIn:"root"}),c})(),kc=(()=>{class c extends vu{fromModel(r){return r&&or(r.year)&&or(r.month)&&or(r.day)?{year:r.year,month:r.month,day:r.day}:null}toModel(r){return r&&or(r.year)&&or(r.month)&&or(r.day)?{year:r.year,month:r.month,day:r.day}:null}}return c.\u0275fac=function(){let f;return function(p){return(f||(f=a.n5z(c)))(p||c)}}(),c.\u0275prov=a.Yz7({token:c,factory:c.\u0275fac}),c})(),Ef=(()=>{class c{constructor(r){this.templateRef=r}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(a.Rgc))},c.\u0275dir=a.lG2({type:c,selectors:[["ng-template","ngbDatepickerContent",""]],standalone:!0}),c})(),pd=(()=>{class c{constructor(r,p,T,N){this.i18n=r,this.datepicker=p,this._keyboardService=T,this._service=N}set month(r){this.viewModel=this._service.getMonth(r)}onKeyDown(r){this._keyboardService.processKey(r,this.datepicker)}doSelect(r){!r.context.disabled&&!r.hidden&&this.datepicker.onDateSelect(r.date)}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(Rl),a.Y36((0,a.Gpc)(()=>ph)),a.Y36(fh),a.Y36(fd))},c.\u0275cmp=a.Xpm({type:c,selectors:[["ngb-datepicker-month"]],hostAttrs:["role","grid"],hostBindings:function(r,p){1&r&&a.NdJ("keydown",function(N){return p.onKeyDown(N)})},inputs:{month:"month"},standalone:!0,features:[a.jDz],decls:2,vars:2,consts:[["class","ngb-dp-week ngb-dp-weekdays","role","row",4,"ngIf"],["ngFor","",3,"ngForOf"],["role","row",1,"ngb-dp-week","ngb-dp-weekdays"],["class","ngb-dp-weekday ngb-dp-showweek small",4,"ngIf"],["class","ngb-dp-weekday small","role","columnheader",4,"ngFor","ngForOf"],[1,"ngb-dp-weekday","ngb-dp-showweek","small"],["role","columnheader",1,"ngb-dp-weekday","small"],["class","ngb-dp-week","role","row",4,"ngIf"],["role","row",1,"ngb-dp-week"],["class","ngb-dp-week-number small text-muted",4,"ngIf"],["class","ngb-dp-day","role","gridcell",3,"disabled","tabindex","hidden","ngb-dp-today","click",4,"ngFor","ngForOf"],[1,"ngb-dp-week-number","small","text-muted"],["role","gridcell",1,"ngb-dp-day",3,"tabindex","click"],[3,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(r,p){1&r&&(a.YNc(0,dg,3,2,"div",0),a.YNc(1,mg,1,1,"ng-template",1)),2&r&&(a.Q6J("ngIf",p.viewModel.weekdays.length>0),a.xp6(1),a.Q6J("ngForOf",p.viewModel.weeks))},dependencies:[Ye.O5,Ye.ax,Ye.tP],styles:['ngb-datepicker-month{display:block}.ngb-dp-weekday,.ngb-dp-week-number{line-height:2rem;text-align:center;font-style:italic}.ngb-dp-weekday{color:var(--bs-info)}.ngb-dp-week{border-radius:.25rem;display:flex}.ngb-dp-weekdays{border-bottom:1px solid var(--bs-border-color);border-radius:0;background-color:var(--bs-light)}.ngb-dp-day,.ngb-dp-weekday,.ngb-dp-week-number{width:2rem;height:2rem}.ngb-dp-day{cursor:pointer}.ngb-dp-day.disabled,.ngb-dp-day.hidden{cursor:default;pointer-events:none}.ngb-dp-day[tabindex="0"]{z-index:1}\n'],encapsulation:2}),c})(),ph=(()=>{class c{constructor(r,p,T,N,ne,he,ge,De){this._service=r,this._calendar=p,this.i18n=T,this._elementRef=he,this._ngbDateAdapter=ge,this._ngZone=De,this._controlValue=null,this._destroyed$=new Ae.x,this._publicState={},this.navigate=new a.vpe,this.dateSelect=new a.vpe,this.onChange=Ie=>{},this.onTouched=()=>{},["dayTemplate","dayTemplateData","displayMonths","firstDayOfWeek","footerTemplate","markDisabled","minDate","maxDate","navigation","outsideDays","showWeekNumbers","startDate","weekdays"].forEach(Ie=>this[Ie]=N[Ie]),r.dateSelect$.pipe((0,wn.R)(this._destroyed$)).subscribe(Ie=>{this.dateSelect.emit(Ie)}),r.model$.pipe((0,wn.R)(this._destroyed$)).subscribe(Ie=>{const Lt=Ie.firstDate,ct=this.model?this.model.firstDate:null;this._publicState={maxDate:Ie.maxDate,minDate:Ie.minDate,firstDate:Ie.firstDate,lastDate:Ie.lastDate,focusedDate:Ie.focusDate,months:Ie.months.map(ri=>ri.firstDate)};let jt=!1;if(!Lt.equals(ct)&&(this.navigate.emit({current:ct?{year:ct.year,month:ct.month}:null,next:{year:Lt.year,month:Lt.month},preventDefault:()=>jt=!0}),jt&&null!==ct))return void this._service.open(ct);const Vn=Ie.selectedDate,Tn=Ie.focusDate,Mn=this.model?this.model.focusDate:null;this.model=Ie,ac(Vn,this._controlValue)&&(this._controlValue=Vn,this.onTouched(),this.onChange(this._ngbDateAdapter.toModel(Vn))),ac(Tn,Mn)&&Mn&&Ie.focusVisible&&this.focus(),ne.markForCheck()})}get state(){return this._publicState}get calendar(){return this._calendar}focusDate(r){this._service.focus(qr.from(r))}focusSelect(){this._service.focusSelect()}focus(){this._ngZone.onStable.asObservable().pipe((0,Si.q)(1)).subscribe(()=>{const r=this._elementRef.nativeElement.querySelector('div.ngb-dp-day[tabindex="0"]');r&&r.focus()})}navigateTo(r){this._service.open(qr.from(r?r.day?r:{...r,day:1}:null))}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{const r=Xe(this._contentEl.nativeElement,"focusin"),p=Xe(this._contentEl.nativeElement,"focusout"),{nativeElement:T}=this._elementRef;(0,Ri.T)(r,p).pipe((0,cr.h)(({target:N,relatedTarget:ne})=>!(mf(N,"ngb-dp-day")&&mf(ne,"ngb-dp-day")&&T.contains(N)&&T.contains(ne))),(0,wn.R)(this._destroyed$)).subscribe(({type:N})=>this._ngZone.run(()=>this._service.set({focusVisible:"focusin"===N})))})}ngOnDestroy(){this._destroyed$.next()}ngOnInit(){if(void 0===this.model){const r={};["dayTemplateData","displayMonths","markDisabled","firstDayOfWeek","navigation","minDate","maxDate","outsideDays","weekdays"].forEach(p=>r[p]=this[p]),this._service.set(r),this.navigateTo(this.startDate)}this.dayTemplate||(this.dayTemplate=this._defaultDayTemplate)}ngOnChanges(r){const p={};if(["dayTemplateData","displayMonths","markDisabled","firstDayOfWeek","navigation","minDate","maxDate","outsideDays","weekdays"].filter(T=>T in r).forEach(T=>p[T]=this[T]),this._service.set(p),"startDate"in r){const{currentValue:T,previousValue:N}=r.startDate;wf(N,T)&&this.navigateTo(this.startDate)}}onDateSelect(r){this._service.focus(r),this._service.select(r,{emitEvent:!0})}onNavigateDateSelect(r){this._service.open(r)}onNavigateEvent(r){switch(r){case Bc.PREV:this._service.open(this._calendar.getPrev(this.model.firstDate,"m",1));break;case Bc.NEXT:this._service.open(this._calendar.getNext(this.model.firstDate,"m",1))}}registerOnChange(r){this.onChange=r}registerOnTouched(r){this.onTouched=r}setDisabledState(r){this._service.set({disabled:r})}writeValue(r){this._controlValue=qr.from(this._ngbDateAdapter.fromModel(r)),this._service.select(this._controlValue)}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(fd),a.Y36(hd),a.Y36(Rl),a.Y36(Sf),a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(vu),a.Y36(a.R0b))},c.\u0275cmp=a.Xpm({type:c,selectors:[["ngb-datepicker"]],contentQueries:function(r,p,T){if(1&r&&a.Suo(T,Ef,7),2&r){let N;a.iGM(N=a.CRH())&&(p.contentTemplate=N.first)}},viewQuery:function(r,p){if(1&r&&(a.Gf(gg,7),a.Gf(Ip,7)),2&r){let T;a.iGM(T=a.CRH())&&(p._defaultDayTemplate=T.first),a.iGM(T=a.CRH())&&(p._contentEl=T.first)}},hostVars:2,hostBindings:function(r,p){2&r&&a.ekj("disabled",p.model.disabled)},inputs:{dayTemplate:"dayTemplate",dayTemplateData:"dayTemplateData",displayMonths:"displayMonths",firstDayOfWeek:"firstDayOfWeek",footerTemplate:"footerTemplate",markDisabled:"markDisabled",maxDate:"maxDate",minDate:"minDate",navigation:"navigation",outsideDays:"outsideDays",showWeekNumbers:"showWeekNumbers",startDate:"startDate",weekdays:"weekdays"},outputs:{navigate:"navigate",dateSelect:"dateSelect"},exportAs:["ngbDatepicker"],standalone:!0,features:[a._Bn([{provide:mn,useExisting:(0,a.Gpc)(()=>c),multi:!0},fd]),a.TTD,a.jDz],decls:10,vars:5,consts:[["defaultDayTemplate",""],["defaultContentTemplate",""],[1,"ngb-dp-header"],[3,"date","months","disabled","showSelect","prevDisabled","nextDisabled","selectBoxes","navigate","select",4,"ngIf"],[1,"ngb-dp-content"],["content",""],[3,"ngTemplateOutlet"],["ngbDatepickerDayView","",3,"date","currentMonth","selected","disabled","focused"],["class","ngb-dp-month",4,"ngFor","ngForOf"],[1,"ngb-dp-month"],["class","ngb-dp-month-name",4,"ngIf"],[3,"month"],[1,"ngb-dp-month-name"],[3,"date","months","disabled","showSelect","prevDisabled","nextDisabled","selectBoxes","navigate","select"]],template:function(r,p){if(1&r&&(a.YNc(0,_g,1,5,"ng-template",null,0,a.W1O),a.YNc(2,nf,1,1,"ng-template",null,1,a.W1O),a.TgZ(4,"div",2),a.YNc(5,Pp,1,7,"ngb-datepicker-navigation",3),a.qZA(),a.TgZ(6,"div",4,5),a.YNc(8,rf,0,0,"ng-template",6),a.qZA(),a.YNc(9,Xs,0,0,"ng-template",6)),2&r){const T=a.MAs(3);a.xp6(5),a.Q6J("ngIf","none"!==p.navigation),a.xp6(1),a.ekj("ngb-dp-months",!p.contentTemplate),a.xp6(2),a.Q6J("ngTemplateOutlet",(null==p.contentTemplate?null:p.contentTemplate.templateRef)||T),a.xp6(1),a.Q6J("ngTemplateOutlet",p.footerTemplate)}},dependencies:[Ye.O5,Ye.ax,Ye.tP,hm,pd,Kg],styles:["ngb-datepicker{border:1px solid var(--bs-border-color);border-radius:.25rem;display:inline-block}ngb-datepicker-month{pointer-events:auto}ngb-datepicker.dropdown-menu{padding:0}ngb-datepicker.disabled .ngb-dp-weekday,ngb-datepicker.disabled .ngb-dp-week-number,ngb-datepicker.disabled .ngb-dp-month-name{color:var(--bs-text-muted)}.ngb-dp-body{z-index:1055}.ngb-dp-header{border-bottom:0;border-radius:.25rem .25rem 0 0;padding-top:.25rem;background-color:var(--bs-light)}.ngb-dp-months{display:flex}.ngb-dp-month{pointer-events:none}.ngb-dp-month-name{font-size:larger;height:2rem;line-height:2rem;text-align:center;background-color:var(--bs-light)}.ngb-dp-month+.ngb-dp-month .ngb-dp-month-name,.ngb-dp-month+.ngb-dp-month .ngb-dp-week{padding-left:1rem}.ngb-dp-month:last-child .ngb-dp-week{padding-right:.25rem}.ngb-dp-month:first-child .ngb-dp-week{padding-left:.25rem}.ngb-dp-month .ngb-dp-week:last-child{padding-bottom:.25rem}\n"],encapsulation:2,changeDetection:0}),c})();typeof navigator<"u"&&navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));const pm=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function gh(c){const f=Array.from(c.querySelectorAll(pm)).filter(r=>-1!==r.tabIndex);return[f[0],f[f.length-1]]}new Date(1882,10,12),new Date(2174,10,25);let Ls=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=a.oAB({type:c}),c.\u0275inj=a.cJS({imports:[ph,pd]}),c})(),Rh=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=a.oAB({type:c}),c.\u0275inj=a.cJS({}),c})();class sl{constructor(f,r,p){this.nodes=f,this.viewRef=r,this.componentRef=p}}let Td=(()=>{class c{constructor(r,p){this._el=r,this._zone=p}ngOnInit(){this._zone.onStable.asObservable().pipe((0,Si.q)(1)).subscribe(()=>{Rs(this._zone,this._el.nativeElement,(r,p)=>{p&&mu(r),r.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return Rs(this._zone,this._el.nativeElement,({classList:r})=>r.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(a.SBq),a.Y36(a.R0b))},c.\u0275cmp=a.Xpm({type:c,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(r,p){2&r&&(a.Tol("modal-backdrop"+(p.backdropClass?" "+p.backdropClass:"")),a.ekj("show",!p.animation)("fade",p.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},standalone:!0,features:[a.jDz],decls:0,vars:0,template:function(r,p){},encapsulation:2}),c})();class Md{close(f){}dismiss(f){}}class Sm{constructor(f,r,p,T){this._windowCmptRef=f,this._contentRef=r,this._backdropCmptRef=p,this._beforeDismiss=T,this._closed=new Ae.x,this._dismissed=new Ae.x,this._hidden=new Ae.x,f.instance.dismissEvent.subscribe(N=>{this.dismiss(N)}),this.result=new Promise((N,ne)=>{this._resolve=N,this._reject=ne}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe((0,wn.R)(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe((0,wn.R)(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(f){this._windowCmptRef&&(this._closed.next(f),this._resolve(f),this._removeModalElements())}_dismiss(f){this._dismissed.next(f),this._reject(f),this._removeModalElements()}dismiss(f){if(this._windowCmptRef)if(this._beforeDismiss){const r=this._beforeDismiss();!function jg(c){return c&&c.then}(r)?!1!==r&&this._dismiss(f):r.then(p=>{!1!==p&&this._dismiss(f)},()=>{})}else this._dismiss(f)}_removeModalElements(){const f=this._windowCmptRef.instance.hide(),r=this._backdropCmptRef?this._backdropCmptRef.instance.hide():(0,Ee.of)(void 0);f.subscribe(()=>{const{nativeElement:p}=this._windowCmptRef.location;p.parentNode.removeChild(p),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),r.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:p}=this._backdropCmptRef.location;p.parentNode.removeChild(p),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),Wt(f,r).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var dc=(()=>{return(c=dc||(dc={}))[c.BACKDROP_CLICK=0]="BACKDROP_CLICK",c[c.ESC=1]="ESC",dc;var c})();let __=(()=>{class c{constructor(r,p,T){this._document=r,this._elRef=p,this._zone=T,this._closed$=new Ae.x,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new a.vpe,this.shown=new Ae.x,this.hidden=new Ae.x}get fullscreenClass(){return!0===this.fullscreen?" modal-fullscreen":sc(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(r){this.dismissEvent.emit(r)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe((0,Si.q)(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:r}=this._elRef,p={animation:this.animation,runningTransition:"stop"},ne=Wt(Rs(this._zone,r,()=>r.classList.remove("show"),p),Rs(this._zone,this._dialogEl.nativeElement,()=>{},p));return ne.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),ne}_show(){const r={animation:this.animation,runningTransition:"continue"};Wt(Rs(this._zone,this._elRef.nativeElement,(N,ne)=>{ne&&mu(N),N.classList.add("show")},r),Rs(this._zone,this._dialogEl.nativeElement,()=>{},r)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:r}=this._elRef;this._zone.runOutsideAngular(()=>{Xe(r,"keydown").pipe((0,wn.R)(this._closed$),(0,cr.h)(T=>T.which===_i.Escape)).subscribe(T=>{this.keyboard?requestAnimationFrame(()=>{T.defaultPrevented||this._zone.run(()=>this.dismiss(dc.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let p=!1;Xe(this._dialogEl.nativeElement,"mousedown").pipe((0,wn.R)(this._closed$),(0,qi.b)(()=>p=!1),(0,$o.w)(()=>Xe(r,"mouseup").pipe((0,wn.R)(this._closed$),(0,Si.q)(1))),(0,cr.h)(({target:T})=>r===T)).subscribe(()=>{p=!0}),Xe(r,"click").pipe((0,wn.R)(this._closed$)).subscribe(({target:T})=>{r===T&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!p&&this._zone.run(()=>this.dismiss(dc.BACKDROP_CLICK))),p=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:r}=this._elRef;if(!r.contains(document.activeElement)){const p=r.querySelector("[ngbAutofocus]"),T=gh(r)[0];(p||T||r).focus()}}_restoreFocus(){const r=this._document.body,p=this._elWithFocus;let T;T=p&&p.focus&&r.contains(p)?p:r,this._zone.runOutsideAngular(()=>{setTimeout(()=>T.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&Rs(this._zone,this._elRef.nativeElement,({classList:r})=>(r.add("modal-static"),()=>r.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(Ye.K0),a.Y36(a.SBq),a.Y36(a.R0b))},c.\u0275cmp=a.Xpm({type:c,selectors:[["ngb-modal-window"]],viewQuery:function(r,p){if(1&r&&a.Gf(od,7),2&r){let T;a.iGM(T=a.CRH())&&(p._dialogEl=T.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(r,p){2&r&&(a.uIk("aria-modal",!0)("aria-labelledby",p.ariaLabelledBy)("aria-describedby",p.ariaDescribedBy),a.Tol("modal d-block"+(p.windowClass?" "+p.windowClass:"")),a.ekj("fade",p.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},standalone:!0,features:[a.jDz],ngContentSelectors:Kd,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(r,p){1&r&&(a.F$t(),a.TgZ(0,"div",0,1)(2,"div",2),a.Hsn(3),a.qZA()()),2&r&&a.Tol("modal-dialog"+(p.size?" modal-"+p.size:"")+(p.centered?" modal-dialog-centered":"")+p.fullscreenClass+(p.scrollable?" modal-dialog-scrollable":"")+(p.modalDialogClass?" "+p.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}\n"],encapsulation:2}),c})(),Uf=(()=>{class c{constructor(r){this._document=r}hide(){const r=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),p=this._document.body,T=p.style,{overflow:N,paddingRight:ne}=T;if(r>0){const he=parseFloat(window.getComputedStyle(p).paddingRight);T.paddingRight=`${he+r}px`}return T.overflow="hidden",()=>{r>0&&(T.paddingRight=ne),T.overflow=N}}}return c.\u0275fac=function(r){return new(r||c)(a.LFG(Ye.K0))},c.\u0275prov=a.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),Al=(()=>{class c{constructor(r,p,T,N,ne,he,ge){this._applicationRef=r,this._injector=p,this._environmentInjector=T,this._document=N,this._scrollBar=ne,this._rendererFactory=he,this._ngZone=ge,this._activeWindowCmptHasChanged=new Ae.x,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._backdropAttributes=["animation","backdropClass"],this._modalRefs=[],this._windowAttributes=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","scrollable","size","windowClass","modalDialogClass"],this._windowCmpts=[],this._activeInstances=new a.vpe,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const De=this._windowCmpts[this._windowCmpts.length-1];((c,f,r,p=!1)=>{c.runOutsideAngular(()=>{const T=Xe(f,"focusin").pipe((0,wn.R)(r),(0,Ur.U)(N=>N.target));Xe(f,"keydown").pipe((0,wn.R)(r),(0,cr.h)(N=>N.which===_i.Tab),Cr(T)).subscribe(([N,ne])=>{const[he,ge]=gh(f);(ne===he||ne===f)&&N.shiftKey&&(ge.focus(),N.preventDefault()),ne===ge&&!N.shiftKey&&(he.focus(),N.preventDefault())}),p&&Xe(f,"click").pipe((0,wn.R)(r),Cr(T),(0,Ur.U)(N=>N[1])).subscribe(N=>N.focus())})})(this._ngZone,De.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(De.location.nativeElement)}})}_restoreScrollBar(){const r=this._scrollBarRestoreFn;r&&(this._scrollBarRestoreFn=null,r())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(r,p,T){const N=T.container instanceof HTMLElement?T.container:pu(T.container)?this._document.querySelector(T.container):this._document.body,ne=this._rendererFactory.createRenderer(null,null);if(!N)throw new Error(`The specified modal container "${T.container||"body"}" was not found in the DOM.`);this._hideScrollBar();const he=new Md,ge=(r=T.injector||r).get(a.lqb,null)||this._environmentInjector,De=this._getContentRef(r,ge,p,he,T);let Ie=!1!==T.backdrop?this._attachBackdrop(N):void 0,Lt=this._attachWindowComponent(N,De.nodes),ct=new Sm(Lt,De,Ie,T.beforeDismiss);return this._registerModalRef(ct),this._registerWindowCmpt(Lt),ct.hidden.pipe((0,Si.q)(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(ne.removeClass(this._document.body,"modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),he.close=jt=>{ct.close(jt)},he.dismiss=jt=>{ct.dismiss(jt)},this._applyWindowOptions(Lt.instance,T),1===this._modalRefs.length&&ne.addClass(this._document.body,"modal-open"),Ie&&Ie.instance&&(this._applyBackdropOptions(Ie.instance,T),Ie.changeDetectorRef.detectChanges()),Lt.changeDetectorRef.detectChanges(),ct}get activeInstances(){return this._activeInstances}dismissAll(r){this._modalRefs.forEach(p=>p.dismiss(r))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(r){let p=(0,a.LMc)(Td,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(p.hostView),r.appendChild(p.location.nativeElement),p}_attachWindowComponent(r,p){let T=(0,a.LMc)(__,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:p});return this._applicationRef.attachView(T.hostView),r.appendChild(T.location.nativeElement),T}_applyWindowOptions(r,p){this._windowAttributes.forEach(T=>{pu(p[T])&&(r[T]=p[T])})}_applyBackdropOptions(r,p){this._backdropAttributes.forEach(T=>{pu(p[T])&&(r[T]=p[T])})}_getContentRef(r,p,T,N,ne){return T?T instanceof a.Rgc?this._createFromTemplateRef(T,N):sc(T)?this._createFromString(T):this._createFromComponent(r,p,T,N,ne):new sl([])}_createFromTemplateRef(r,p){const N=r.createEmbeddedView({$implicit:p,close(ne){p.close(ne)},dismiss(ne){p.dismiss(ne)}});return this._applicationRef.attachView(N),new sl([N.rootNodes],N)}_createFromString(r){const p=this._document.createTextNode(`${r}`);return new sl([[p]])}_createFromComponent(r,p,T,N,ne){const he=a.zs3.create({providers:[{provide:Md,useValue:N}],parent:r}),ge=(0,a.LMc)(T,{environmentInjector:p,elementInjector:he}),De=ge.location.nativeElement;return ne.scrollable&&De.classList.add("component-host-scrollable"),this._applicationRef.attachView(ge.hostView),new sl([[De]],ge.hostView,ge)}_setAriaHidden(r){const p=r.parentElement;p&&r!==this._document.body&&(Array.from(p.children).forEach(T=>{T!==r&&"SCRIPT"!==T.nodeName&&(this._ariaHiddenValues.set(T,T.getAttribute("aria-hidden")),T.setAttribute("aria-hidden","true"))}),this._setAriaHidden(p))}_revertAriaHidden(){this._ariaHiddenValues.forEach((r,p)=>{r?p.setAttribute("aria-hidden",r):p.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(r){const p=()=>{const T=this._modalRefs.indexOf(r);T>-1&&(this._modalRefs.splice(T,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(r),this._activeInstances.emit(this._modalRefs),r.result.then(p,p)}_registerWindowCmpt(r){this._windowCmpts.push(r),this._activeWindowCmptHasChanged.next(),r.onDestroy(()=>{const p=this._windowCmpts.indexOf(r);p>-1&&(this._windowCmpts.splice(p,1),this._activeWindowCmptHasChanged.next())})}}return c.\u0275fac=function(r){return new(r||c)(a.LFG(a.z2F),a.LFG(a.zs3),a.LFG(a.lqb),a.LFG(Ye.K0),a.LFG(Uf),a.LFG(a.FYo),a.LFG(a.R0b))},c.\u0275prov=a.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),Hf=(()=>{class c{constructor(r){this._ngbConfig=r,this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(r){this._animation=r}}return c.\u0275fac=function(r){return new(r||c)(a.LFG(Vo))},c.\u0275prov=a.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),v_=(()=>{class c{constructor(r,p,T){this._injector=r,this._modalStack=p,this._config=T}open(r,p={}){const T={...this._config,animation:this._config.animation,...p};return this._modalStack.open(this._injector,r,T)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(r){this._modalStack.dismissAll(r)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return c.\u0275fac=function(r){return new(r||c)(a.LFG(a.zs3),a.LFG(Al),a.LFG(Hf))},c.\u0275prov=a.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),Sh=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=a.oAB({type:c}),c.\u0275inj=a.cJS({providers:[v_]}),c})();const Uc=({classList:c})=>(c.remove("show"),()=>c.remove("active")),Eh=(c,f)=>{f&&mu(c),c.classList.add("show")};let Dd=(()=>{class c{constructor(r){this.elRef=r}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(a.SBq))},c.\u0275dir=a.lG2({type:c,selectors:[["","ngbNavPane",""]],hostAttrs:[1,"tab-pane"],hostVars:5,hostBindings:function(r,p){2&r&&(a.Ikx("id",p.item.panelDomId),a.uIk("role",p.role?p.role:p.nav.roles?"tabpanel":void 0)("aria-labelledby",p.item.domId),a.ekj("fade",p.nav.animation))},inputs:{item:"item",nav:"nav",role:"role"},standalone:!0}),c})(),Hc=(()=>{class c{constructor(r,p){this._cd=r,this._ngZone=p,this._activePane=null}isPanelTransitioning(r){return this._activePane?.item===r}ngAfterViewInit(){this._updateActivePane(),this.nav.navItemChange$.pipe((0,wn.R)(this.nav.destroy$),(0,us.O)(this._activePane?.item||null),Sr(),function tn(c){return(0,cr.h)((f,r)=>c<=r)}(1)).subscribe(r=>{const p={animation:this.nav.animation,runningTransition:"stop"};this._cd.detectChanges(),this._activePane?Rs(this._ngZone,this._activePane.elRef.nativeElement,Uc,p).subscribe(()=>{const T=this._activePane?.item;this._activePane=this._getPaneForItem(r),this._cd.markForCheck(),this._activePane&&(this._activePane.elRef.nativeElement.classList.add("active"),Rs(this._ngZone,this._activePane.elRef.nativeElement,Eh,p).subscribe(()=>{r&&(r.shown.emit(),this.nav.shown.emit(r.id))})),T&&(T.hidden.emit(),this.nav.hidden.emit(T.id))}):this._updateActivePane()})}_updateActivePane(){this._activePane=this._getActivePane(),this._activePane?.elRef.nativeElement.classList.add("show"),this._activePane?.elRef.nativeElement.classList.add("active")}_getPaneForItem(r){return this._panes&&this._panes.find(p=>p.item===r)||null}_getActivePane(){return this._panes&&this._panes.find(r=>r.item.active)||null}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(a.sBO),a.Y36(a.R0b))},c.\u0275cmp=a.Xpm({type:c,selectors:[["","ngbNavOutlet",""]],viewQuery:function(r,p){if(1&r&&a.Gf(Dd,5),2&r){let T;a.iGM(T=a.CRH())&&(p._panes=T)}},hostVars:2,hostBindings:function(r,p){2&r&&a.ekj("tab-content",!0)},inputs:{paneRole:"paneRole",nav:["ngbNavOutlet","nav"]},standalone:!0,features:[a.jDz],attrs:Op,decls:1,vars:1,consts:[["ngFor","",3,"ngForOf"],["ngbNavPane","",3,"item","nav","role",4,"ngIf"],["ngbNavPane","",3,"item","nav","role"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(r,p){1&r&&a.YNc(0,bg,1,1,"ng-template",0),2&r&&a.Q6J("ngForOf",p.nav.items)},dependencies:[Dd,Ye.ax,Ye.O5,Ye.tP],encapsulation:2,changeDetection:0}),c})(),Ru=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=a.oAB({type:c}),c.\u0275inj=a.cJS({imports:[Hc]}),c})(),Am=(()=>{class c{constructor(){this.disabled=!1,this.boundaryLinks=!1,this.directionLinks=!0,this.ellipses=!0,this.maxSize=0,this.pageSize=10,this.rotate=!1}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275prov=a.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),bo=(()=>{class c{constructor(r){this.templateRef=r}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(a.Rgc))},c.\u0275dir=a.lG2({type:c,selectors:[["ng-template","ngbPaginationEllipsis",""]],standalone:!0}),c})(),Ah=(()=>{class c{constructor(r){this.templateRef=r}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(a.Rgc))},c.\u0275dir=a.lG2({type:c,selectors:[["ng-template","ngbPaginationFirst",""]],standalone:!0}),c})(),Ih=(()=>{class c{constructor(r){this.templateRef=r}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(a.Rgc))},c.\u0275dir=a.lG2({type:c,selectors:[["ng-template","ngbPaginationLast",""]],standalone:!0}),c})(),$f=(()=>{class c{constructor(r){this.templateRef=r}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(a.Rgc))},c.\u0275dir=a.lG2({type:c,selectors:[["ng-template","ngbPaginationNext",""]],standalone:!0}),c})(),Ph=(()=>{class c{constructor(r){this.templateRef=r}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(a.Rgc))},c.\u0275dir=a.lG2({type:c,selectors:[["ng-template","ngbPaginationNumber",""]],standalone:!0}),c})(),Bs=(()=>{class c{constructor(r){this.templateRef=r}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(a.Rgc))},c.\u0275dir=a.lG2({type:c,selectors:[["ng-template","ngbPaginationPrevious",""]],standalone:!0}),c})(),zc=(()=>{class c{constructor(r){this.templateRef=r}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(a.Rgc))},c.\u0275dir=a.lG2({type:c,selectors:[["ng-template","ngbPaginationPages",""]],standalone:!0}),c})(),Yf=(()=>{class c{constructor(r){this.pageCount=0,this.pages=[],this.page=1,this.pageChange=new a.vpe(!0),this.disabled=r.disabled,this.boundaryLinks=r.boundaryLinks,this.directionLinks=r.directionLinks,this.ellipses=r.ellipses,this.maxSize=r.maxSize,this.pageSize=r.pageSize,this.rotate=r.rotate,this.size=r.size}hasPrevious(){return this.page>1}hasNext(){return this.page<this.pageCount}nextDisabled(){return!this.hasNext()||this.disabled}previousDisabled(){return!this.hasPrevious()||this.disabled}selectPage(r){this._updatePages(r)}ngOnChanges(r){this._updatePages(this.page)}isEllipsis(r){return-1===r}_applyEllipses(r,p){this.ellipses&&(r>0&&(r>2?this.pages.unshift(-1):2===r&&this.pages.unshift(2),this.pages.unshift(1)),p<this.pageCount&&(p<this.pageCount-2?this.pages.push(-1):p===this.pageCount-2&&this.pages.push(this.pageCount-1),this.pages.push(this.pageCount)))}_applyRotation(){let r=0,p=this.pageCount,T=Math.floor(this.maxSize/2);return this.page<=T?p=this.maxSize:this.pageCount-this.page<T?r=this.pageCount-this.maxSize:(r=this.page-T-1,p=this.page+(this.maxSize%2==0?T-1:T)),[r,p]}_applyPagination(){let p=(Math.ceil(this.page/this.maxSize)-1)*this.maxSize;return[p,p+this.maxSize]}_setPageInRange(r){const p=this.page;this.page=ih(r,this.pageCount,1),this.page!==p&&Or(this.collectionSize)&&this.pageChange.emit(this.page)}_updatePages(r){this.pageCount=Math.ceil(this.collectionSize/this.pageSize),Or(this.pageCount)||(this.pageCount=0),this.pages.length=0;for(let p=1;p<=this.pageCount;p++)this.pages.push(p);if(this._setPageInRange(r),this.maxSize>0&&this.pageCount>this.maxSize){let p=0,T=this.pageCount;[p,T]=this.rotate?this._applyRotation():this._applyPagination(),this.pages=this.pages.slice(p,T),this._applyEllipses(p,T)}}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(Am))},c.\u0275cmp=a.Xpm({type:c,selectors:[["ngb-pagination"]],contentQueries:function(r,p,T){if(1&r&&(a.Suo(T,bo,5),a.Suo(T,Ah,5),a.Suo(T,Ih,5),a.Suo(T,$f,5),a.Suo(T,Ph,5),a.Suo(T,Bs,5),a.Suo(T,zc,5)),2&r){let N;a.iGM(N=a.CRH())&&(p.tplEllipsis=N.first),a.iGM(N=a.CRH())&&(p.tplFirst=N.first),a.iGM(N=a.CRH())&&(p.tplLast=N.first),a.iGM(N=a.CRH())&&(p.tplNext=N.first),a.iGM(N=a.CRH())&&(p.tplNumber=N.first),a.iGM(N=a.CRH())&&(p.tplPrevious=N.first),a.iGM(N=a.CRH())&&(p.tplPages=N.first)}},hostAttrs:["role","navigation"],inputs:{disabled:"disabled",boundaryLinks:"boundaryLinks",directionLinks:"directionLinks",ellipses:"ellipses",rotate:"rotate",collectionSize:"collectionSize",maxSize:"maxSize",page:"page",pageSize:"pageSize",size:"size"},outputs:{pageChange:"pageChange"},standalone:!0,features:[a.TTD,a.jDz],decls:20,vars:12,consts:function(){let f,r,p,T,N,ne,he,ge;return f=$localize`:@@ngb.pagination.first:««`,r=$localize`:@@ngb.pagination.previous:«`,p=$localize`:@@ngb.pagination.next:»`,T=$localize`:@@ngb.pagination.last:»»`,N=$localize`:@@ngb.pagination.first-aria:First`,ne=$localize`:@@ngb.pagination.previous-aria:Previous`,he=$localize`:@@ngb.pagination.next-aria:Next`,ge=$localize`:@@ngb.pagination.last-aria:Last`,[["first",""],["previous",""],["next",""],["last",""],["ellipsis",""],["defaultNumber",""],["defaultPages",""],["class","page-item",3,"disabled",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["aria-hidden","true"],f,r,p,T,["class","visually-hidden",4,"ngIf"],[1,"visually-hidden"],["class","page-item",3,"active","disabled",4,"ngFor","ngForOf"],[1,"page-item"],["class","page-link","tabindex","-1","aria-disabled","true",4,"ngIf"],["class","page-link","href","",3,"click",4,"ngIf"],["tabindex","-1","aria-disabled","true",1,"page-link"],["href","",1,"page-link",3,"click"],["aria-label",N,"href","",1,"page-link",3,"click"],["aria-label",ne,"href","",1,"page-link",3,"click"],["aria-label",he,"href","",1,"page-link",3,"click"],["aria-label",ge,"href","",1,"page-link",3,"click"]]},template:function(r,p){if(1&r&&(a.YNc(0,Lp,2,0,"ng-template",null,0,a.W1O),a.YNc(2,Tg,2,0,"ng-template",null,1,a.W1O),a.YNc(4,Bp,2,0,"ng-template",null,2,a.W1O),a.YNc(6,Mg,2,0,"ng-template",null,3,a.W1O),a.YNc(8,xg,1,0,"ng-template",null,4,a.W1O),a.YNc(10,af,2,2,"ng-template",null,5,a.W1O),a.YNc(12,fu,1,1,"ng-template",null,6,a.W1O),a.TgZ(14,"ul"),a.YNc(15,Sg,3,9,"li",7),a.YNc(16,Eg,3,8,"li",7),a.YNc(17,Ag,0,0,"ng-template",8),a.YNc(18,Pg,3,9,"li",7),a.YNc(19,kp,3,9,"li",7),a.qZA()),2&r){const T=a.MAs(13);a.xp6(14),a.Tol("pagination"+(p.size?" pagination-"+p.size:"")),a.xp6(1),a.Q6J("ngIf",p.boundaryLinks),a.xp6(1),a.Q6J("ngIf",p.directionLinks),a.xp6(1),a.Q6J("ngTemplateOutlet",(null==p.tplPages?null:p.tplPages.templateRef)||T)("ngTemplateOutletContext",a.kEZ(8,hf,p.page,p.pages,p.disabled)),a.xp6(1),a.Q6J("ngIf",p.directionLinks),a.xp6(1),a.Q6J("ngIf",p.boundaryLinks)}},dependencies:[Ye.O5,Ye.ax,Ye.tP],encapsulation:2,changeDetection:0}),c})(),Wc=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=a.oAB({type:c}),c.\u0275inj=a.cJS({imports:[Yf]}),c})(),b_=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=a.oAB({type:c}),c.\u0275inj=a.cJS({}),c})(),Bv=(()=>{class c{constructor(){this.max=100,this.animated=!1,this.ariaLabel="progress bar",this.striped=!1,this.showValue=!1}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275prov=a.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),_s=(()=>{class c{constructor(r){this.value=0,this.max=r.max,this.animated=r.animated,this.ariaLabel=r.ariaLabel,this.striped=r.striped,this.textType=r.textType,this.type=r.type,this.showValue=r.showValue,this.height=r.height}set max(r){this._max=!Or(r)||r<=0?100:r}get max(){return this._max}getValue(){return ih(this.value,this.max)}getPercentValue(){return 100*this.getValue()/this.max}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(Bv))},c.\u0275cmp=a.Xpm({type:c,selectors:[["ngb-progressbar"]],hostAttrs:["role","progressbar","aria-valuemin","0",1,"progress"],hostVars:5,hostBindings:function(r,p){2&r&&(a.uIk("aria-valuenow",p.getValue())("aria-valuemax",p.max)("aria-label",p.ariaLabel),a.Udp("height",p.height))},inputs:{max:"max",animated:"animated",ariaLabel:"ariaLabel",striped:"striped",showValue:"showValue",textType:"textType",type:"type",value:"value",height:"height"},standalone:!0,features:[a.jDz],ngContentSelectors:Kd,decls:3,vars:11,consts:function(){let f;return f=$localize`:@@ngb.progressbar.value:${"\ufffd0\ufffd"}:INTERPOLATION:`,[[4,"ngIf"],f]},template:function(r,p){1&r&&(a.F$t(),a.TgZ(0,"div"),a.YNc(1,Ng,3,3,"span",0),a.Hsn(2),a.qZA()),2&r&&(a.MT6("progress-bar",p.type?p.textType?" bg-"+p.type:" text-bg-"+p.type:"","",p.textType?" text-"+p.textType:"",""),a.Udp("width",p.getPercentValue(),"%"),a.ekj("progress-bar-animated",p.animated)("progress-bar-striped",p.striped),a.xp6(1),a.Q6J("ngIf",p.showValue))},dependencies:[Ye.O5,Ye.Zx],encapsulation:2,changeDetection:0}),c})(),Cu=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=a.oAB({type:c}),c.\u0275inj=a.cJS({imports:[_s]}),c})(),T_=(()=>{class c{constructor(){this.max=10,this.readonly=!1,this.resettable=!1,this.tabindex=0}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275prov=a.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),Zf=(()=>{class c{constructor(r,p){this._changeDetectorRef=p,this.contexts=[],this.disabled=!1,this.hover=new a.vpe,this.leave=new a.vpe,this.rateChange=new a.vpe(!0),this.onChange=T=>{},this.onTouched=()=>{},this.max=r.max,this.readonly=r.readonly,this.tabindex=r.tabindex}ariaValueText(r,p){return`${r} out of ${p}`}isInteractive(){return!this.readonly&&!this.disabled}enter(r){this.isInteractive()&&this._updateState(r),this.hover.emit(r)}handleBlur(){this.onTouched()}handleClick(r){this.isInteractive()&&this.update(this.resettable&&this.rate===r?0:r)}handleKeyDown(r){switch(r.which){case _i.ArrowDown:case _i.ArrowLeft:this.update(this.rate-1);break;case _i.ArrowUp:case _i.ArrowRight:this.update(this.rate+1);break;case _i.Home:this.update(0);break;case _i.End:this.update(this.max);break;default:return}r.preventDefault()}ngOnChanges(r){r.rate&&this.update(this.rate),r.max&&this._updateMax()}ngOnInit(){this._setupContexts(),this._updateState(this.rate)}registerOnChange(r){this.onChange=r}registerOnTouched(r){this.onTouched=r}reset(){this.leave.emit(this.nextRate),this._updateState(this.rate)}setDisabledState(r){this.disabled=r}update(r,p=!0){const T=ih(r,this.max,0);this.isInteractive()&&this.rate!==T&&(this.rate=T,this.rateChange.emit(this.rate)),p&&(this.onChange(this.rate),this.onTouched()),this._updateState(this.rate)}writeValue(r){this.update(r,!1),this._changeDetectorRef.markForCheck()}_updateState(r){this.nextRate=r,this.contexts.forEach((p,T)=>p.fill=Math.round(100*ih(r-T,1,0)))}_updateMax(){this.max>0&&(this._setupContexts(),this.update(this.rate))}_setupContexts(){this.contexts=Array.from({length:this.max},(r,p)=>({fill:0,index:p}))}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(T_),a.Y36(a.sBO))},c.\u0275cmp=a.Xpm({type:c,selectors:[["ngb-rating"]],contentQueries:function(r,p,T){if(1&r&&a.Suo(T,a.Rgc,5),2&r){let N;a.iGM(N=a.CRH())&&(p.starTemplateFromContent=N.first)}},hostAttrs:["role","slider","aria-valuemin","0",1,"d-inline-flex"],hostVars:5,hostBindings:function(r,p){1&r&&a.NdJ("blur",function(){return p.handleBlur()})("keydown",function(N){return p.handleKeyDown(N)})("mouseleave",function(){return p.reset()}),2&r&&(a.Ikx("tabindex",p.disabled?-1:p.tabindex),a.uIk("aria-valuemax",p.max)("aria-valuenow",p.nextRate)("aria-valuetext",p.ariaValueText(p.nextRate,p.max))("aria-disabled",!!p.readonly||null))},inputs:{max:"max",rate:"rate",readonly:"readonly",resettable:"resettable",starTemplate:"starTemplate",tabindex:"tabindex",ariaValueText:"ariaValueText"},outputs:{hover:"hover",leave:"leave",rateChange:"rateChange"},standalone:!0,features:[a._Bn([{provide:mn,useExisting:(0,a.Gpc)(()=>c),multi:!0}]),a.TTD,a.jDz],decls:3,vars:1,consts:[["t",""],["ngFor","",3,"ngForOf"],[1,"visually-hidden"],[3,"mouseenter","click"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(r,p){1&r&&(a.YNc(0,Vp,1,1,"ng-template",null,0,a.W1O),a.YNc(2,Lc,4,5,"ng-template",1)),2&r&&(a.xp6(2),a.Q6J("ngForOf",p.contexts))},dependencies:[Ye.ax,Ye.tP],encapsulation:2,changeDetection:0}),c})(),Eu=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=a.oAB({type:c}),c.\u0275inj=a.cJS({imports:[Zf]}),c})();class Nh{constructor(f,r,p){this.hour=Qs(f),this.minute=Qs(r),this.second=Qs(p)}changeHour(f=1){this.updateHour((isNaN(this.hour)?0:this.hour)+f)}updateHour(f){this.hour=Or(f)?(f<0?24+f:f)%24:NaN}changeMinute(f=1){this.updateMinute((isNaN(this.minute)?0:this.minute)+f)}updateMinute(f){Or(f)?(this.minute=f%60<0?60+f%60:f%60,this.changeHour(Math.floor(f/60))):this.minute=NaN}changeSecond(f=1){this.updateSecond((isNaN(this.second)?0:this.second)+f)}updateSecond(f){Or(f)?(this.second=f<0?60+f%60:f%60,this.changeMinute(Math.floor(f/60))):this.second=NaN}isValid(f=!0){return Or(this.hour)&&Or(this.minute)&&(!f||Or(this.second))}toString(){return`${this.hour||0}:${this.minute||0}:${this.second||0}`}}let Kf=(()=>{class c{constructor(){this.meridian=!1,this.spinners=!0,this.seconds=!1,this.hourStep=1,this.minuteStep=1,this.secondStep=1,this.disabled=!1,this.readonlyInputs=!1,this.size="medium"}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275prov=a.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),Fh=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275prov=a.Yz7({token:c,factory:function(){return function Xf(){return new Nm}()},providedIn:"root"}),c})(),Nm=(()=>{class c extends Fh{fromModel(r){return r&&or(r.hour)&&or(r.minute)?{hour:r.hour,minute:r.minute,second:or(r.second)?r.second:null}:null}toModel(r){return r&&or(r.hour)&&or(r.minute)?{hour:r.hour,minute:r.minute,second:or(r.second)?r.second:null}:null}}return c.\u0275fac=function(){let f;return function(p){return(f||(f=a.n5z(c)))(p||c)}}(),c.\u0275prov=a.Yz7({token:c,factory:c.\u0275fac}),c})(),wd=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275prov=a.Yz7({token:c,factory:function(r){let p=null;return p=r?new r:function M_(c){return new Lh(c)}(a.LFG(a.soG)),p},providedIn:"root"}),c})(),Lh=(()=>{class c extends wd{constructor(r){super(),this._periods=(0,Ye.ol)(r,Ye.x.Standalone,Ye.Tn.Narrow)}getMorningPeriod(){return this._periods[0]}getAfternoonPeriod(){return this._periods[1]}}return c.\u0275fac=function(r){return new(r||c)(a.LFG(a.soG))},c.\u0275prov=a.Yz7({token:c,factory:c.\u0275fac}),c})();const pc=/[^0-9]/g;let jv=(()=>{class c{constructor(r,p,T,N){this._config=r,this._ngbTimeAdapter=p,this._cd=T,this.i18n=N,this.onChange=ne=>{},this.onTouched=()=>{},this.meridian=r.meridian,this.spinners=r.spinners,this.seconds=r.seconds,this.hourStep=r.hourStep,this.minuteStep=r.minuteStep,this.secondStep=r.secondStep,this.disabled=r.disabled,this.readonlyInputs=r.readonlyInputs,this.size=r.size}set hourStep(r){this._hourStep=or(r)?r:this._config.hourStep}get hourStep(){return this._hourStep}set minuteStep(r){this._minuteStep=or(r)?r:this._config.minuteStep}get minuteStep(){return this._minuteStep}set secondStep(r){this._secondStep=or(r)?r:this._config.secondStep}get secondStep(){return this._secondStep}writeValue(r){const p=this._ngbTimeAdapter.fromModel(r);this.model=p?new Nh(p.hour,p.minute,p.second):new Nh,!this.seconds&&(!p||!Or(p.second))&&(this.model.second=0),this._cd.markForCheck()}registerOnChange(r){this.onChange=r}registerOnTouched(r){this.onTouched=r}setDisabledState(r){this.disabled=r}changeHour(r){this.model?.changeHour(r),this.propagateModelChange()}changeMinute(r){this.model?.changeMinute(r),this.propagateModelChange()}changeSecond(r){this.model?.changeSecond(r),this.propagateModelChange()}updateHour(r){const p=!!this.model&&this.model.hour>=12,T=Qs(r);this.model?.updateHour(this.meridian&&(p&&T<12||!p&&12===T)?T+12:T),this.propagateModelChange()}updateMinute(r){this.model?.updateMinute(Qs(r)),this.propagateModelChange()}updateSecond(r){this.model?.updateSecond(Qs(r)),this.propagateModelChange()}toggleMeridian(){this.meridian&&this.changeHour(12)}formatInput(r){r.value=r.value.replace(pc,"")}formatHour(r){return Or(r)?rh(this.meridian?r%12==0?12:r%12:r%24):rh(NaN)}formatMinSec(r){return rh(Or(r)?r:NaN)}handleBlur(){this.onTouched()}get isSmallSize(){return"small"===this.size}get isLargeSize(){return"large"===this.size}ngOnChanges(r){r.seconds&&!this.seconds&&this.model&&!Or(this.model.second)&&(this.model.second=0,this.propagateModelChange(!1))}propagateModelChange(r=!0){r&&this.onTouched(),this.model?.isValid(this.seconds)?this.onChange(this._ngbTimeAdapter.toModel({hour:this.model.hour,minute:this.model.minute,second:this.model.second})):this.onChange(this._ngbTimeAdapter.toModel(null))}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(Kf),a.Y36(Fh),a.Y36(a.sBO),a.Y36(wd))},c.\u0275cmp=a.Xpm({type:c,selectors:[["ngb-timepicker"]],inputs:{meridian:"meridian",spinners:"spinners",seconds:"seconds",hourStep:"hourStep",minuteStep:"minuteStep",secondStep:"secondStep",readonlyInputs:"readonlyInputs",size:"size"},exportAs:["ngbTimepicker"],standalone:!0,features:[a._Bn([{provide:mn,useExisting:(0,a.Gpc)(()=>c),multi:!0}]),a.TTD,a.jDz],decls:16,vars:25,consts:function(){let f,r,p,T,N,ne,he,ge,De,Ie,Lt,ct,jt,Vn;return f=$localize`:@@ngb.timepicker.HH:HH`,r=$localize`:@@ngb.timepicker.hours:Hours`,p=$localize`:@@ngb.timepicker.MM:MM`,T=$localize`:@@ngb.timepicker.minutes:Minutes`,N=$localize`:@@ngb.timepicker.increment-hours:Increment hours`,ne=$localize`:@@ngb.timepicker.decrement-hours:Decrement hours`,he=$localize`:@@ngb.timepicker.increment-minutes:Increment minutes`,ge=$localize`:@@ngb.timepicker.decrement-minutes:Decrement minutes`,De=$localize`:@@ngb.timepicker.SS:SS`,Ie=$localize`:@@ngb.timepicker.seconds:Seconds`,Lt=$localize`:@@ngb.timepicker.increment-seconds:Increment seconds`,ct=$localize`:@@ngb.timepicker.decrement-seconds:Decrement seconds`,jt=$localize`:@@ngb.timepicker.PM:${"\ufffd0\ufffd"}:INTERPOLATION:`,Vn=$localize`:@@ngb.timepicker.AM:${"\ufffd0\ufffd"}:INTERPOLATION:`,[[3,"disabled"],[1,"ngb-tp"],[1,"ngb-tp-input-container","ngb-tp-hour"],["tabindex","-1","type","button","class","btn btn-link",3,"btn-sm","btn-lg","disabled","click",4,"ngIf"],["type","text","maxlength","2","inputmode","numeric","placeholder",f,"aria-label",r,1,"ngb-tp-input","form-control",3,"value","readOnly","disabled","change","blur","input","keydown.ArrowUp","keydown.ArrowDown"],[1,"ngb-tp-spacer"],[1,"ngb-tp-input-container","ngb-tp-minute"],["type","text","maxlength","2","inputmode","numeric","placeholder",p,"aria-label",T,1,"ngb-tp-input","form-control",3,"value","readOnly","disabled","change","blur","input","keydown.ArrowUp","keydown.ArrowDown"],["class","ngb-tp-spacer",4,"ngIf"],["class","ngb-tp-input-container ngb-tp-second",4,"ngIf"],["class","ngb-tp-meridian",4,"ngIf"],["tabindex","-1","type","button",1,"btn","btn-link",3,"disabled","click"],[1,"chevron","ngb-tp-chevron"],[1,"visually-hidden"],N,[1,"chevron","ngb-tp-chevron","bottom"],ne,he,ge,[1,"ngb-tp-input-container","ngb-tp-second"],["type","text","maxlength","2","inputmode","numeric","placeholder",De,"aria-label",Ie,1,"ngb-tp-input","form-control",3,"value","readOnly","disabled","change","blur","input","keydown.ArrowUp","keydown.ArrowDown"],Lt,ct,[1,"ngb-tp-meridian"],["type","button",1,"btn","btn-outline-primary",3,"disabled","click"],[4,"ngIf","ngIfElse"],["am",""],jt,Vn]},template:function(r,p){1&r&&(a.TgZ(0,"fieldset",0)(1,"div",1)(2,"div",2),a.YNc(3,Hp,4,7,"button",3),a.TgZ(4,"input",4),a.NdJ("change",function(N){return p.updateHour(N.target.value)})("blur",function(){return p.handleBlur()})("input",function(N){return p.formatInput(N.target)})("keydown.ArrowUp",function(N){return p.changeHour(p.hourStep),N.preventDefault()})("keydown.ArrowDown",function(N){return p.changeHour(-p.hourStep),N.preventDefault()}),a.qZA(),a.YNc(5,zp,4,7,"button",3),a.qZA(),a.TgZ(6,"div",5),a._uU(7,":"),a.qZA(),a.TgZ(8,"div",6),a.YNc(9,Fg,4,7,"button",3),a.TgZ(10,"input",7),a.NdJ("change",function(N){return p.updateMinute(N.target.value)})("blur",function(){return p.handleBlur()})("input",function(N){return p.formatInput(N.target)})("keydown.ArrowUp",function(N){return p.changeMinute(p.minuteStep),N.preventDefault()})("keydown.ArrowDown",function(N){return p.changeMinute(-p.minuteStep),N.preventDefault()}),a.qZA(),a.YNc(11,hv,4,7,"button",3),a.qZA(),a.YNc(12,Qd,2,0,"div",8),a.YNc(13,$p,4,9,"div",9),a.YNc(14,Yp,1,0,"div",8),a.YNc(15,eh,5,9,"div",10),a.qZA()()),2&r&&(a.ekj("disabled",p.disabled),a.Q6J("disabled",p.disabled),a.xp6(3),a.Q6J("ngIf",p.spinners),a.xp6(1),a.ekj("form-control-sm",p.isSmallSize)("form-control-lg",p.isLargeSize),a.Q6J("value",p.formatHour(null==p.model?null:p.model.hour))("readOnly",p.readonlyInputs)("disabled",p.disabled),a.xp6(1),a.Q6J("ngIf",p.spinners),a.xp6(4),a.Q6J("ngIf",p.spinners),a.xp6(1),a.ekj("form-control-sm",p.isSmallSize)("form-control-lg",p.isLargeSize),a.Q6J("value",p.formatMinSec(null==p.model?null:p.model.minute))("readOnly",p.readonlyInputs)("disabled",p.disabled),a.xp6(1),a.Q6J("ngIf",p.spinners),a.xp6(1),a.Q6J("ngIf",p.seconds),a.xp6(1),a.Q6J("ngIf",p.seconds),a.xp6(1),a.Q6J("ngIf",p.meridian),a.xp6(1),a.Q6J("ngIf",p.meridian))},dependencies:[Ye.O5],styles:['ngb-timepicker{font-size:1rem}.ngb-tp{display:flex;align-items:center}.ngb-tp-input-container{width:4em}.ngb-tp-chevron:before{border-style:solid;border-width:.29em .29em 0 0;content:"";display:inline-block;height:.69em;left:.05em;position:relative;top:.15em;transform:rotate(-45deg);vertical-align:middle;width:.69em}.ngb-tp-chevron.bottom:before{top:-.3em;transform:rotate(135deg)}.ngb-tp-input{text-align:center}.ngb-tp-hour,.ngb-tp-minute,.ngb-tp-second,.ngb-tp-meridian{display:flex;flex-direction:column;align-items:center;justify-content:space-around}.ngb-tp-spacer{width:1em;text-align:center}\n'],encapsulation:2}),c})(),Bh=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=a.oAB({type:c}),c.\u0275inj=a.cJS({imports:[jv]}),c})();const kv=(c,f)=>{const{classList:r}=c;if(f)return r.add("fade"),mu(c),r.add("show","showing"),()=>{r.remove("showing")};r.add("show")},Fm=({classList:c})=>(c.add("showing"),()=>{c.remove("show","showing")});let Au=(()=>{class c{constructor(r){this._ngbConfig=r,this.autohide=!0,this.delay=5e3,this.ariaLive="polite"}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(r){this._animation=r}}return c.\u0275fac=function(r){return new(r||c)(a.LFG(Vo))},c.\u0275prov=a.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),Qf=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275dir=a.lG2({type:c,selectors:[["","ngbToastHeader",""]],standalone:!0}),c})(),Lm=(()=>{class c{constructor(r,p,T,N){this.ariaLive=r,this._zone=T,this._element=N,this.contentHeaderTpl=null,this.shown=new a.vpe,this.hidden=new a.vpe,null==this.ariaLive&&(this.ariaLive=p.ariaLive),this.delay=p.delay,this.autohide=p.autohide,this.animation=p.animation}ngAfterContentInit(){this._zone.onStable.asObservable().pipe((0,Si.q)(1)).subscribe(()=>{this._init(),this.show()})}ngOnChanges(r){"autohide"in r&&(this._clearTimeout(),this._init())}hide(){this._clearTimeout();const r=Rs(this._zone,this._element.nativeElement,Fm,{animation:this.animation,runningTransition:"stop"});return r.subscribe(()=>{this.hidden.emit()}),r}show(){const r=Rs(this._zone,this._element.nativeElement,kv,{animation:this.animation,runningTransition:"continue"});return r.subscribe(()=>{this.shown.emit()}),r}_init(){this.autohide&&!this._timeoutID&&(this._timeoutID=setTimeout(()=>this.hide(),this.delay))}_clearTimeout(){this._timeoutID&&(clearTimeout(this._timeoutID),this._timeoutID=null)}}return c.\u0275fac=function(r){return new(r||c)(a.$8M("aria-live"),a.Y36(Au),a.Y36(a.R0b),a.Y36(a.SBq))},c.\u0275cmp=a.Xpm({type:c,selectors:[["ngb-toast"]],contentQueries:function(r,p,T){if(1&r&&a.Suo(T,Qf,7,a.Rgc),2&r){let N;a.iGM(N=a.CRH())&&(p.contentHeaderTpl=N.first)}},hostAttrs:["role","alert","aria-atomic","true",1,"toast"],hostVars:3,hostBindings:function(r,p){2&r&&(a.uIk("aria-live",p.ariaLive),a.ekj("fade",p.animation))},inputs:{animation:"animation",delay:"delay",autohide:"autohide",header:"header"},outputs:{shown:"shown",hidden:"hidden"},exportAs:["ngbToast"],standalone:!0,features:[a.TTD,a.jDz],ngContentSelectors:Kd,decls:5,vars:1,consts:function(){let f;return f=$localize`:@@ngb.toast.close-aria:Close`,[["headerTpl",""],[3,"ngIf"],[1,"toast-body"],[1,"me-auto"],[1,"toast-header"],[3,"ngTemplateOutlet"],["type","button","aria-label",f,1,"btn-close",3,"click"]]},template:function(r,p){1&r&&(a.F$t(),a.YNc(0,th,2,1,"ng-template",null,0,a.W1O),a.YNc(2,Zp,3,1,"ng-template",1),a.TgZ(3,"div",2),a.Hsn(4),a.qZA()),2&r&&(a.xp6(2),a.Q6J("ngIf",p.contentHeaderTpl||p.header))},dependencies:[Ye.O5,Ye.tP],styles:["ngb-toast{display:block}ngb-toast .toast-header .close{margin-left:auto;margin-bottom:.25rem}\n"],encapsulation:2}),c})(),Iu=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=a.oAB({type:c}),c.\u0275inj=a.cJS({imports:[Lm]}),c})(),Gh=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=a.oAB({type:c}),c.\u0275inj=a.cJS({}),c})(),Bm=(()=>{class c{constructor(){this.highlightClass="ngb-highlight",this.accentSensitive=!0}ngOnChanges(r){!this.accentSensitive&&!String.prototype.normalize&&(console.warn("The `accentSensitive` input in `ngb-highlight` cannot be set to `false` in a browser that does not implement the `String.normalize` function. You will have to include a polyfill in your application to use this feature in the current browser."),this.accentSensitive=!0);const p=Qp(this.result),T=Array.isArray(this.term)?this.term:[this.term],N=De=>this.accentSensitive?De:_f(De),ne=T.map(De=>function pv(c){return c.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}(N(Qp(De)))).filter(De=>De),he=this.accentSensitive?p:_f(p),ge=ne.length?he.split(new RegExp(`(${ne.join("|")})`,"gmi")):[p];if(this.accentSensitive)this.parts=ge;else{let De=0;this.parts=ge.map(Ie=>p.substring(De,De+=Ie.length))}}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=a.Xpm({type:c,selectors:[["ngb-highlight"]],inputs:{highlightClass:"highlightClass",result:"result",term:"term",accentSensitive:"accentSensitive"},standalone:!0,features:[a.TTD,a.jDz],decls:1,vars:1,consts:[["ngFor","",3,"ngForOf"],[3,"class",4,"ngIf","ngIfElse"],["even",""]],template:function(r,p){1&r&&a.YNc(0,nh,3,2,"ng-template",0),2&r&&a.Q6J("ngForOf",p.parts)},dependencies:[Ye.O5,Ye.ax],styles:[".ngb-highlight{font-weight:700}\n"],encapsulation:2,changeDetection:0}),c})();new a.OlP("live announcer delay",{providedIn:"root",factory:function $c(){return 100}});let Sd=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=a.oAB({type:c}),c.\u0275inj=a.cJS({imports:[Bm]}),c})(),Nu=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=a.oAB({type:c}),c.\u0275inj=a.cJS({}),c})();const w_=[rm,uh,om,am,Ls,Rh,Sh,Ru,Nu,Wc,b_,Cu,Eu,Bh,Iu,Gh,Sd];let Um=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=a.oAB({type:c}),c.\u0275inj=a.cJS({imports:[w_,rm,uh,om,am,Ls,Rh,Sh,Ru,Nu,Wc,b_,Cu,Eu,Bh,Iu,Gh,Sd]}),c})(),R_=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=a.oAB({type:c}),c.\u0275inj=a.cJS({imports:[Ye.ez,Um,Ye.ez,Um]}),c})()},984:(_n,Ke,te)=>{te.d(Ke,{S:()=>pe});var a=te(9694),ie=te(1571);let pe=(()=>{class Ee{}return Ee.\u0275fac=function(Qe){return new(Qe||Ee)},Ee.\u0275mod=ie.oAB({type:Ee}),Ee.\u0275inj=ie.cJS({imports:[a.HLk,a.HLk]}),Ee})()},5966:(_n,Ke,te)=>{te.d(Ke,{d:()=>Ee});var a=te(9694),ie=te(2329),pe=te(1571);let Ee=(()=>{class Ae{constructor(){this.config={unit:{position:new ie.Pa4(0,0,0),radius:.01,padding:.5},size:{x:10,y:10},animation:{count:0,speed:.05,amplitude:.2,inflate:.05}}}set position(We){We instanceof ie.Pa4?this.config.unit.position.set(We.x,We.y,We.z):this.config.unit.position.set(We[0],We[1],We[2])}set padding(We){this.config.unit.padding=We}set size(We){this.config.size.x=We[0],this.config.size.y=We[1]}ngAfterContentInit(){}ngAfterViewInit(){console.log("ngAfterViewInit","th-grid",this.geometry),this.setGeometryAttributes()}setGeometryAttributes(){const We=this.config.unit.padding,St=this.config.size.x,ft=this.config.size.y,Ue=St*ft,He=new Float32Array(3*Ue),rt=new Float32Array(Ue);let Gt=0,Xe=0;for(let Ge=0;Ge<St;Ge++)for(let lt=0;lt<ft;lt++)He[Gt]=this.config.unit.position.x+Ge*We-St*We/2,He[Gt+1]=this.config.unit.position.y,He[Gt+2]=this.config.unit.position.z+lt*We-ft*We/2,rt[Xe]=.05,Gt+=3,Xe++;this.geometry&&(this.geometry.objRef.setAttribute("position",new ie.TlE(He,3)),this.geometry.objRef.setAttribute("scale",new ie.TlE(rt,1)))}getVertexShader(){return"\n        attribute float scale;\n\n        void main() {\n            vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\n            gl_PointSize = scale * ( 300.0 / - mvPosition.z );\n            gl_Position = projectionMatrix * mvPosition;\n        }\n        "}getFragmentShader(){return"\n        uniform vec3 color;\n\n        void main() {\n\n            if ( length( gl_PointCoord - vec2( 0.5, 0.5 ) ) > 0.475 )\n                discard;\n\n            gl_FragColor = vec4( color, 1.0 );\n\n        }\n        "}getUniforms(){return{color:{value:new ie.Ilk(16777215)}}}onBeforeRender(We){if(this.geometry){const St=this.geometry.objRef.attributes.position.array,ft=this.geometry.objRef.attributes.scale.array,He=this.config.size.x,rt=this.config.size.y;let Gt=0,Xe=0;for(let Ge=0;Ge<He;Ge++)for(let lt=0;lt<rt;lt++)St[Gt+1]=Math.sin(.3*(Ge+this.config.animation.count))*this.config.animation.amplitude+Math.sin(.5*(lt+this.config.animation.count))*this.config.animation.amplitude,ft[Xe]=(Math.sin(.3*(Ge+this.config.animation.count))+1)*this.config.animation.inflate+(Math.sin(.5*(lt+this.config.animation.count))+1)*this.config.animation.inflate,Gt+=3,Xe++;this.geometry.objRef.attributes.position.needsUpdate=!0,this.geometry.objRef.attributes.scale.needsUpdate=!0}this.config.animation.count+=this.config.animation.speed}}return Ae.\u0275fac=function(We){return new(We||Ae)},Ae.\u0275cmp=pe.Xpm({type:Ae,selectors:[["th-prefab-wave"]],viewQuery:function(We,St){if(1&We&&(pe.Gf(a.XHp,7),pe.Gf(a.sI,7)),2&We){let ft;pe.iGM(ft=pe.CRH())&&(St.points=ft.first),pe.iGM(ft=pe.CRH())&&(St.geometry=ft.first)}},inputs:{position:"position",padding:"padding",size:"size"},decls:3,vars:3,consts:[[3,"beforeRender"],[3,"vertexShader","fragmentShader","uniforms"]],template:function(We,St){1&We&&(pe.TgZ(0,"th-points",0),pe.NdJ("beforeRender",function(Ue){return St.onBeforeRender(Ue)}),pe._UZ(1,"th-bufferGeometry")(2,"th-shaderMaterial",1),pe.qZA()),2&We&&(pe.xp6(2),pe.Q6J("vertexShader",St.getVertexShader())("fragmentShader",St.getFragmentShader())("uniforms",St.getUniforms()))},dependencies:[a.XHp,a.DOm,a.sI,a.VIe],encapsulation:2}),Ae})()},5755:(_n,Ke,te)=>{te.r(Ke),te.d(Ke,{JnWebsiteThreeModule:()=>ti});var a=te(984),ie=te(2655),pe=te(1571),Ee=te(9694);let Ae=(()=>{class an{}return an.\u0275fac=function(ot){return new(ot||an)},an.\u0275cmp=pe.Xpm({type:an,selectors:[["jn-website-th"]],decls:3,vars:1,consts:[[1,"position-absolute","w-100","h-100",2,"z-index","-1"],[3,"disableDefaultView"]],template:function(ot,ke){1&ot&&(pe.TgZ(0,"div",0)(1,"th-canvas",1),pe._UZ(2,"router-outlet"),pe.qZA()()),2&ot&&(pe.xp6(1),pe.Q6J("disableDefaultView",!1))},dependencies:[ie.lC,Ee.lFy],encapsulation:2}),an})(),Qe=(()=>{class an extends Ee.pN9{ngOnInit(){super.ngOnInit(),this.scene&&(this.scene.objRef=this.objRef),this.fixCanvasInit()}fixCanvasInit(){let ot=this.parent;ot.contentScene=this,ot.contentCamera=this.camera}}return an.\u0275fac=function(){let Me;return function(ke){return(Me||(Me=pe.n5z(an)))(ke||an)}}(),an.\u0275cmp=pe.Xpm({type:an,selectors:[["ng-component"]],viewQuery:function(ot,ke){if(1&ot&&(pe.Gf(Ee.pN9,7),pe.Gf(Ee.Pts,7)),2&ot){let Ot;pe.iGM(Ot=pe.CRH())&&(ke.scene=Ot.first),pe.iGM(Ot=pe.CRH())&&(ke.camera=Ot.first)}},features:[pe.qOj],decls:0,vars:0,template:function(ot,ke){},encapsulation:2}),an})();var We=te(5966);const St=function(){return[5,5,5]},ft=function(an){return[0,an,0]},Ue=function(){return[0,.2,0]},He=function(){return[50,50]},rt=function(an){return[an,0,0]},Gt=function(){return[2e3,2e3]},Xe=function(){return{color:"#222222",depthWrite:!1}},Ge=function(){return[200,40,"#ffffff","#aaaaaa"]},It=[{path:"",component:Ae,children:[{path:"scenes",children:[{path:"environment",component:(()=>{class an extends Qe{constructor(){super(...arguments),this.Math=Math}}return an.\u0275fac=function(){let Me;return function(ke){return(Me||(Me=pe.n5z(an)))(ke||an)}}(),an.\u0275cmp=pe.Xpm({type:an,selectors:[["jn-website-th-scene-environment"]],features:[pe.qOj],decls:8,vars:20,consts:[[3,"position","lookAt"],[3,"position","size","padding"],[3,"rotation","receiveShadow"],[3,"args"]],template:function(ot,ke){1&ot&&(pe.TgZ(0,"th-scene"),pe._UZ(1,"th-ambientLight")(2,"th-perspectiveCamera",0)(3,"th-prefab-wave",1),pe.TgZ(4,"th-mesh",2),pe._UZ(5,"th-planeGeometry",3)(6,"th-meshPhongMaterial",3),pe.qZA(),pe._UZ(7,"th-gridHelper",3),pe.qZA()),2&ot&&(pe.xp6(2),pe.Q6J("position",pe.DdM(10,St))("lookAt",pe.VKq(11,ft,-2)),pe.xp6(1),pe.Q6J("position",pe.DdM(13,Ue))("size",pe.DdM(14,He))("padding",.5),pe.xp6(1),pe.Q6J("rotation",pe.VKq(15,rt,-.5*ke.Math.PI))("receiveShadow",!0),pe.xp6(1),pe.Q6J("args",pe.DdM(17,Gt)),pe.xp6(1),pe.Q6J("args",pe.DdM(18,Xe)),pe.xp6(1),pe.Q6J("args",pe.DdM(19,Ge)))},dependencies:[Ee.RjQ,Ee.UG5,Ee.ITp,Ee.YRQ,Ee.pN9,Ee.o8H,Ee.TfJ,We.d],encapsulation:2,changeDetection:0}),an})()}]}]}];let Qt=(()=>{class an{}return an.\u0275fac=function(ot){return new(ot||an)},an.\u0275mod=pe.oAB({type:an}),an.\u0275inj=pe.cJS({imports:[ie.Bz.forChild(It),ie.Bz]}),an})(),ti=(()=>{class an{}return an.\u0275fac=function(ot){return new(ot||an)},an.\u0275mod=pe.oAB({type:an}),an.\u0275inj=pe.cJS({imports:[Qt,a.S]}),an})()},6695:(_n,Ke,te)=>{var a=te(1481),ie=te(1571),pe=te(2655);const Ee=["jn-website-app",""];let Ae=(()=>{class Ge{}return Ge.\u0275fac=function(It){return new(It||Ge)},Ge.\u0275cmp=ie.Xpm({type:Ge,selectors:[["","jn-website-app",""]],attrs:Ee,decls:1,vars:0,template:function(It,Qt){1&It&&ie._UZ(0,"router-outlet")},dependencies:[pe.lC],styles:["html{overflow:hidden}main{display:flex;width:100%;height:100%;color:#fff;font-family:fantasy}router-outlet{display:none}ng-component{display:flex;width:100%;height:100%;justify-content:space-around}\n"],encapsulation:2}),Ge})();var Qe=te(7832),We=te(5874),St=te(5361);const Ue=[{path:"",pathMatch:"full",component:(()=>{class Ge extends St.v{constructor(){super(...arguments),this.title="< building />",this.subtitle="Content under development."}}return Ge.\u0275fac=function(){let lt;return function(Qt){return(lt||(lt=ie.n5z(Ge)))(Qt||Ge)}}(),Ge.\u0275cmp=ie.Xpm({type:Ge,selectors:[["ng-component"]],features:[ie.qOj],decls:15,vars:4,consts:[[1,"error","d-flex","flex-column","justify-content-center"],[1,"stack","text-center",2,"--stacks","3"],[2,"--index","0"],[2,"--index","1"],[2,"--index","2"],[1,"stack","text-center",2,"--stacks","1"]],template:function(It,Qt){1&It&&(ie.TgZ(0,"div",0)(1,"div",1)(2,"span",2)(3,"h1"),ie._uU(4),ie.qZA()(),ie.TgZ(5,"span",3)(6,"h1"),ie._uU(7),ie.qZA()(),ie.TgZ(8,"span",4)(9,"h1"),ie._uU(10),ie.qZA()()(),ie.TgZ(11,"div",5)(12,"span",2)(13,"h6"),ie._uU(14),ie.qZA()()()()),2&It&&(ie.xp6(4),ie.Oqu(Qt.title),ie.xp6(3),ie.Oqu(Qt.title),ie.xp6(3),ie.Oqu(Qt.title),ie.xp6(4),ie.Oqu(Qt.subtitle))},styles:[".error[_ngcontent-%COMP%]{color:var(--color)}.error[_ngcontent-%COMP%]   .stack[_ngcontent-%COMP%]{display:grid}.error[_ngcontent-%COMP%]   .stack[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{grid-row-start:1;grid-column-start:1;--stack-height: calc(100% /var(--stacks) - 1px);--inverse-index: calc(calc(var(--stacks) - 1) - var(--index));--clip-top: calc(var(--stack-height) * var(--index));--clip-bottom: calc(var(--stack-height) * var(--inverse-index));clip-path:inset(var(--clip-top) 0 var(--clip-bottom) 0);animation-name:_ngcontent-%COMP%_stack,_ngcontent-%COMP%_glitch;animation-duration:.34s,2s;animation-timing-function:cubic-bezier(.46,.29,0,1.24),ease;animation-iteration-count:1,infinite;animation-delay:calc(var(--index) * .12s),2s;animation-fill-mode:backwards,none;animation-direction:normal,alternate-reverse}.error[_ngcontent-%COMP%]   .stack[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(odd){--glitch-translate: 8px}.error[_ngcontent-%COMP%]   .stack[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(even){--glitch-translate: -8px}@keyframes _ngcontent-%COMP%_stack{0%{opacity:0;transform:translate(-50%);text-shadow:-2px 3px 0 red,2px -3px 0 blue}60%{opacity:.5;transform:translate(50%)}80%{transform:none;opacity:1;text-shadow:2px -3px 0 red,-2px 3px 0 blue}to{text-shadow:none}}@keyframes _ngcontent-%COMP%_glitch{0%{text-shadow:-2px 3px 0 red,2px -3px 0 blue;transform:translate(var(--glitch-translate))}2%{text-shadow:2px -3px 0 red,-2px 3px 0 blue}4%,to{text-shadow:none;transform:none}}"]}),Ge})()},{path:"",children:[{path:"webgl/three",loadChildren:()=>Promise.resolve().then(te.bind(te,5755)).then(Ge=>Ge.JnWebsiteThreeModule)},{path:"projects",children:[{path:"streaming",loadChildren:()=>te.e(512).then(te.bind(te,4512)).then(Ge=>Ge.JnStreamingAppModule)}]}]},{path:"**",component:We.u}];let He=(()=>{class Ge{}return Ge.\u0275fac=function(It){return new(It||Ge)},Ge.\u0275mod=ie.oAB({type:Ge}),Ge.\u0275inj=ie.cJS({imports:[pe.Bz.forRoot(Ue,{enableTracing:!1}),pe.Bz]}),Ge})();var rt=te(5755);let Gt=(()=>{class Ge{}return Ge.\u0275fac=function(It){return new(It||Ge)},Ge.\u0275mod=ie.oAB({type:Ge,bootstrap:[Ae]}),Ge.\u0275inj=ie.cJS({imports:[He,rt.JnWebsiteThreeModule,Qe.l,a.b2]}),Ge})();a.q6().bootstrapModule(Gt).catch(Ge=>console.error(Ge))},1135:(_n,Ke,te)=>{te.d(Ke,{X:()=>ie});var a=te(7579);class ie extends a.x{constructor(Ee){super(),this._value=Ee}get value(){return this.getValue()}_subscribe(Ee){const Ae=super._subscribe(Ee);return!Ae.closed&&Ee.next(this._value),Ae}getValue(){const{hasError:Ee,thrownError:Ae,_value:Qe}=this;if(Ee)throw Ae;return this._throwIfClosed(),Qe}next(Ee){super.next(this._value=Ee)}}},9751:(_n,Ke,te)=>{te.d(Ke,{y:()=>St});var a=te(930),ie=te(727),pe=te(8822),Ee=te(9635),Ae=te(2416),Qe=te(576),We=te(2806);let St=(()=>{class rt{constructor(Xe){Xe&&(this._subscribe=Xe)}lift(Xe){const Ge=new rt;return Ge.source=this,Ge.operator=Xe,Ge}subscribe(Xe,Ge,lt){const It=function He(rt){return rt&&rt instanceof a.Lv||function Ue(rt){return rt&&(0,Qe.m)(rt.next)&&(0,Qe.m)(rt.error)&&(0,Qe.m)(rt.complete)}(rt)&&(0,ie.Nn)(rt)}(Xe)?Xe:new a.Hp(Xe,Ge,lt);return(0,We.x)(()=>{const{operator:Qt,source:ti}=this;It.add(Qt?Qt.call(It,ti):ti?this._subscribe(It):this._trySubscribe(It))}),It}_trySubscribe(Xe){try{return this._subscribe(Xe)}catch(Ge){Xe.error(Ge)}}forEach(Xe,Ge){return new(Ge=ft(Ge))((lt,It)=>{const Qt=new a.Hp({next:ti=>{try{Xe(ti)}catch(an){It(an),Qt.unsubscribe()}},error:It,complete:lt});this.subscribe(Qt)})}_subscribe(Xe){var Ge;return null===(Ge=this.source)||void 0===Ge?void 0:Ge.subscribe(Xe)}[pe.L](){return this}pipe(...Xe){return(0,Ee.U)(Xe)(this)}toPromise(Xe){return new(Xe=ft(Xe))((Ge,lt)=>{let It;this.subscribe(Qt=>It=Qt,Qt=>lt(Qt),()=>Ge(It))})}}return rt.create=Gt=>new rt(Gt),rt})();function ft(rt){var Gt;return null!==(Gt=rt??Ae.v.Promise)&&void 0!==Gt?Gt:Promise}},7579:(_n,Ke,te)=>{te.d(Ke,{x:()=>We});var a=te(9751),ie=te(727);const Ee=(0,te(3888).d)(ft=>function(){ft(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ae=te(8737),Qe=te(2806);let We=(()=>{class ft extends a.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(He){const rt=new St(this,this);return rt.operator=He,rt}_throwIfClosed(){if(this.closed)throw new Ee}next(He){(0,Qe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const rt of this.currentObservers)rt.next(He)}})}error(He){(0,Qe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=He;const{observers:rt}=this;for(;rt.length;)rt.shift().error(He)}})}complete(){(0,Qe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:He}=this;for(;He.length;)He.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var He;return(null===(He=this.observers)||void 0===He?void 0:He.length)>0}_trySubscribe(He){return this._throwIfClosed(),super._trySubscribe(He)}_subscribe(He){return this._throwIfClosed(),this._checkFinalizedStatuses(He),this._innerSubscribe(He)}_innerSubscribe(He){const{hasError:rt,isStopped:Gt,observers:Xe}=this;return rt||Gt?ie.Lc:(this.currentObservers=null,Xe.push(He),new ie.w0(()=>{this.currentObservers=null,(0,Ae.P)(Xe,He)}))}_checkFinalizedStatuses(He){const{hasError:rt,thrownError:Gt,isStopped:Xe}=this;rt?He.error(Gt):Xe&&He.complete()}asObservable(){const He=new a.y;return He.source=this,He}}return ft.create=(Ue,He)=>new St(Ue,He),ft})();class St extends We{constructor(Ue,He){super(),this.destination=Ue,this.source=He}next(Ue){var He,rt;null===(rt=null===(He=this.destination)||void 0===He?void 0:He.next)||void 0===rt||rt.call(He,Ue)}error(Ue){var He,rt;null===(rt=null===(He=this.destination)||void 0===He?void 0:He.error)||void 0===rt||rt.call(He,Ue)}complete(){var Ue,He;null===(He=null===(Ue=this.destination)||void 0===Ue?void 0:Ue.complete)||void 0===He||He.call(Ue)}_subscribe(Ue){var He,rt;return null!==(rt=null===(He=this.source)||void 0===He?void 0:He.subscribe(Ue))&&void 0!==rt?rt:ie.Lc}}},930:(_n,Ke,te)=>{te.d(Ke,{Hp:()=>lt,Lv:()=>rt});var a=te(576),ie=te(727),pe=te(2416),Ee=te(7849),Ae=te(5032);const Qe=ft("C",void 0,void 0);function ft(Me,ot,ke){return{kind:Me,value:ot,error:ke}}var Ue=te(3410),He=te(2806);class rt extends ie.w0{constructor(ot){super(),this.isStopped=!1,ot?(this.destination=ot,(0,ie.Nn)(ot)&&ot.add(this)):this.destination=an}static create(ot,ke,Ot){return new lt(ot,ke,Ot)}next(ot){this.isStopped?ti(function St(Me){return ft("N",Me,void 0)}(ot),this):this._next(ot)}error(ot){this.isStopped?ti(function We(Me){return ft("E",void 0,Me)}(ot),this):(this.isStopped=!0,this._error(ot))}complete(){this.isStopped?ti(Qe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(ot){this.destination.next(ot)}_error(ot){try{this.destination.error(ot)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Gt=Function.prototype.bind;function Xe(Me,ot){return Gt.call(Me,ot)}class Ge{constructor(ot){this.partialObserver=ot}next(ot){const{partialObserver:ke}=this;if(ke.next)try{ke.next(ot)}catch(Ot){It(Ot)}}error(ot){const{partialObserver:ke}=this;if(ke.error)try{ke.error(ot)}catch(Ot){It(Ot)}else It(ot)}complete(){const{partialObserver:ot}=this;if(ot.complete)try{ot.complete()}catch(ke){It(ke)}}}class lt extends rt{constructor(ot,ke,Ot){let rn;if(super(),(0,a.m)(ot)||!ot)rn={next:ot??void 0,error:ke??void 0,complete:Ot??void 0};else{let Zt;this&&pe.v.useDeprecatedNextContext?(Zt=Object.create(ot),Zt.unsubscribe=()=>this.unsubscribe(),rn={next:ot.next&&Xe(ot.next,Zt),error:ot.error&&Xe(ot.error,Zt),complete:ot.complete&&Xe(ot.complete,Zt)}):rn=ot}this.destination=new Ge(rn)}}function It(Me){pe.v.useDeprecatedSynchronousErrorHandling?(0,He.O)(Me):(0,Ee.h)(Me)}function ti(Me,ot){const{onStoppedNotification:ke}=pe.v;ke&&Ue.z.setTimeout(()=>ke(Me,ot))}const an={closed:!0,next:Ae.Z,error:function Qt(Me){throw Me},complete:Ae.Z}},727:(_n,Ke,te)=>{te.d(Ke,{Lc:()=>Qe,w0:()=>Ae,Nn:()=>We});var a=te(576);const pe=(0,te(3888).d)(ft=>function(He){ft(this),this.message=He?`${He.length} errors occurred during unsubscription:\n${He.map((rt,Gt)=>`${Gt+1}) ${rt.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=He});var Ee=te(8737);class Ae{constructor(Ue){this.initialTeardown=Ue,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let Ue;if(!this.closed){this.closed=!0;const{_parentage:He}=this;if(He)if(this._parentage=null,Array.isArray(He))for(const Xe of He)Xe.remove(this);else He.remove(this);const{initialTeardown:rt}=this;if((0,a.m)(rt))try{rt()}catch(Xe){Ue=Xe instanceof pe?Xe.errors:[Xe]}const{_finalizers:Gt}=this;if(Gt){this._finalizers=null;for(const Xe of Gt)try{St(Xe)}catch(Ge){Ue=Ue??[],Ge instanceof pe?Ue=[...Ue,...Ge.errors]:Ue.push(Ge)}}if(Ue)throw new pe(Ue)}}add(Ue){var He;if(Ue&&Ue!==this)if(this.closed)St(Ue);else{if(Ue instanceof Ae){if(Ue.closed||Ue._hasParent(this))return;Ue._addParent(this)}(this._finalizers=null!==(He=this._finalizers)&&void 0!==He?He:[]).push(Ue)}}_hasParent(Ue){const{_parentage:He}=this;return He===Ue||Array.isArray(He)&&He.includes(Ue)}_addParent(Ue){const{_parentage:He}=this;this._parentage=Array.isArray(He)?(He.push(Ue),He):He?[He,Ue]:Ue}_removeParent(Ue){const{_parentage:He}=this;He===Ue?this._parentage=null:Array.isArray(He)&&(0,Ee.P)(He,Ue)}remove(Ue){const{_finalizers:He}=this;He&&(0,Ee.P)(He,Ue),Ue instanceof Ae&&Ue._removeParent(this)}}Ae.EMPTY=(()=>{const ft=new Ae;return ft.closed=!0,ft})();const Qe=Ae.EMPTY;function We(ft){return ft instanceof Ae||ft&&"closed"in ft&&(0,a.m)(ft.remove)&&(0,a.m)(ft.add)&&(0,a.m)(ft.unsubscribe)}function St(ft){(0,a.m)(ft)?ft():ft.unsubscribe()}},2416:(_n,Ke,te)=>{te.d(Ke,{v:()=>a});const a={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},9841:(_n,Ke,te)=>{te.d(Ke,{a:()=>Ue});var a=te(9751),ie=te(4742),pe=te(2076),Ee=te(4671),Ae=te(3268),Qe=te(3269),We=te(1810),St=te(5403),ft=te(9672);function Ue(...Gt){const Xe=(0,Qe.yG)(Gt),Ge=(0,Qe.jO)(Gt),{args:lt,keys:It}=(0,ie.D)(Gt);if(0===lt.length)return(0,pe.D)([],Xe);const Qt=new a.y(function He(Gt,Xe,Ge=Ee.y){return lt=>{rt(Xe,()=>{const{length:It}=Gt,Qt=new Array(It);let ti=It,an=It;for(let Me=0;Me<It;Me++)rt(Xe,()=>{const ot=(0,pe.D)(Gt[Me],Xe);let ke=!1;ot.subscribe((0,St.x)(lt,Ot=>{Qt[Me]=Ot,ke||(ke=!0,an--),an||lt.next(Ge(Qt.slice()))},()=>{--ti||lt.complete()}))},lt)},lt)}}(lt,Xe,It?ti=>(0,We.n)(It,ti):Ee.y));return Ge?Qt.pipe((0,Ae.Z)(Ge)):Qt}function rt(Gt,Xe,Ge){Gt?(0,ft.f)(Ge,Gt,Xe):Xe()}},7272:(_n,Ke,te)=>{te.d(Ke,{z:()=>Ae});var a=te(8189),pe=te(3269),Ee=te(2076);function Ae(...Qe){return function ie(){return(0,a.J)(1)}()((0,Ee.D)(Qe,(0,pe.yG)(Qe)))}},515:(_n,Ke,te)=>{te.d(Ke,{E:()=>ie});const ie=new(te(9751).y)(Ae=>Ae.complete())},2076:(_n,Ke,te)=>{te.d(Ke,{D:()=>Ot});var a=te(8421),ie=te(9672),pe=te(4482),Ee=te(5403);function Ae(rn,Zt=0){return(0,pe.e)((vn,Jt)=>{vn.subscribe((0,Ee.x)(Jt,Kt=>(0,ie.f)(Jt,rn,()=>Jt.next(Kt),Zt),()=>(0,ie.f)(Jt,rn,()=>Jt.complete(),Zt),Kt=>(0,ie.f)(Jt,rn,()=>Jt.error(Kt),Zt)))})}function Qe(rn,Zt=0){return(0,pe.e)((vn,Jt)=>{Jt.add(rn.schedule(()=>vn.subscribe(Jt),Zt))})}var ft=te(9751),He=te(2202),rt=te(576);function Xe(rn,Zt){if(!rn)throw new Error("Iterable cannot be null");return new ft.y(vn=>{(0,ie.f)(vn,Zt,()=>{const Jt=rn[Symbol.asyncIterator]();(0,ie.f)(vn,Zt,()=>{Jt.next().then(Kt=>{Kt.done?vn.complete():vn.next(Kt.value)})},0,!0)})})}var Ge=te(3670),lt=te(8239),It=te(1144),Qt=te(6495),ti=te(2206),an=te(4532),Me=te(3260);function Ot(rn,Zt){return Zt?function ke(rn,Zt){if(null!=rn){if((0,Ge.c)(rn))return function We(rn,Zt){return(0,a.Xf)(rn).pipe(Qe(Zt),Ae(Zt))}(rn,Zt);if((0,It.z)(rn))return function Ue(rn,Zt){return new ft.y(vn=>{let Jt=0;return Zt.schedule(function(){Jt===rn.length?vn.complete():(vn.next(rn[Jt++]),vn.closed||this.schedule())})})}(rn,Zt);if((0,lt.t)(rn))return function St(rn,Zt){return(0,a.Xf)(rn).pipe(Qe(Zt),Ae(Zt))}(rn,Zt);if((0,ti.D)(rn))return Xe(rn,Zt);if((0,Qt.T)(rn))return function Gt(rn,Zt){return new ft.y(vn=>{let Jt;return(0,ie.f)(vn,Zt,()=>{Jt=rn[He.h](),(0,ie.f)(vn,Zt,()=>{let Kt,yn;try{({value:Kt,done:yn}=Jt.next())}catch(fn){return void vn.error(fn)}yn?vn.complete():vn.next(Kt)},0,!0)}),()=>(0,rt.m)(Jt?.return)&&Jt.return()})}(rn,Zt);if((0,Me.L)(rn))return function ot(rn,Zt){return Xe((0,Me.Q)(rn),Zt)}(rn,Zt)}throw(0,an.z)(rn)}(rn,Zt):(0,a.Xf)(rn)}},8421:(_n,Ke,te)=>{te.d(Ke,{Xf:()=>Gt});var a=te(655),ie=te(1144),pe=te(8239),Ee=te(9751),Ae=te(3670),Qe=te(2206),We=te(4532),St=te(6495),ft=te(3260),Ue=te(576),He=te(7849),rt=te(8822);function Gt(Me){if(Me instanceof Ee.y)return Me;if(null!=Me){if((0,Ae.c)(Me))return function Xe(Me){return new Ee.y(ot=>{const ke=Me[rt.L]();if((0,Ue.m)(ke.subscribe))return ke.subscribe(ot);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Me);if((0,ie.z)(Me))return function Ge(Me){return new Ee.y(ot=>{for(let ke=0;ke<Me.length&&!ot.closed;ke++)ot.next(Me[ke]);ot.complete()})}(Me);if((0,pe.t)(Me))return function lt(Me){return new Ee.y(ot=>{Me.then(ke=>{ot.closed||(ot.next(ke),ot.complete())},ke=>ot.error(ke)).then(null,He.h)})}(Me);if((0,Qe.D)(Me))return Qt(Me);if((0,St.T)(Me))return function It(Me){return new Ee.y(ot=>{for(const ke of Me)if(ot.next(ke),ot.closed)return;ot.complete()})}(Me);if((0,ft.L)(Me))return function ti(Me){return Qt((0,ft.Q)(Me))}(Me)}throw(0,We.z)(Me)}function Qt(Me){return new Ee.y(ot=>{(function an(Me,ot){var ke,Ot,rn,Zt;return(0,a.mG)(this,void 0,void 0,function*(){try{for(ke=(0,a.KL)(Me);!(Ot=yield ke.next()).done;)if(ot.next(Ot.value),ot.closed)return}catch(vn){rn={error:vn}}finally{try{Ot&&!Ot.done&&(Zt=ke.return)&&(yield Zt.call(ke))}finally{if(rn)throw rn.error}}ot.complete()})})(Me,ot).catch(ke=>ot.error(ke))})}},6451:(_n,Ke,te)=>{te.d(Ke,{T:()=>Qe});var a=te(8189),ie=te(8421),pe=te(515),Ee=te(3269),Ae=te(2076);function Qe(...We){const St=(0,Ee.yG)(We),ft=(0,Ee._6)(We,1/0),Ue=We;return Ue.length?1===Ue.length?(0,ie.Xf)(Ue[0]):(0,a.J)(ft)((0,Ae.D)(Ue,St)):pe.E}},9646:(_n,Ke,te)=>{te.d(Ke,{of:()=>pe});var a=te(3269),ie=te(2076);function pe(...Ee){const Ae=(0,a.yG)(Ee);return(0,ie.D)(Ee,Ae)}},5403:(_n,Ke,te)=>{te.d(Ke,{x:()=>ie});var a=te(930);function ie(Ee,Ae,Qe,We,St){return new pe(Ee,Ae,Qe,We,St)}class pe extends a.Lv{constructor(Ae,Qe,We,St,ft,Ue){super(Ae),this.onFinalize=ft,this.shouldUnsubscribe=Ue,this._next=Qe?function(He){try{Qe(He)}catch(rt){Ae.error(rt)}}:super._next,this._error=St?function(He){try{St(He)}catch(rt){Ae.error(rt)}finally{this.unsubscribe()}}:super._error,this._complete=We?function(){try{We()}catch(He){Ae.error(He)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var Ae;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Qe}=this;super.unsubscribe(),!Qe&&(null===(Ae=this.onFinalize)||void 0===Ae||Ae.call(this))}}}},9300:(_n,Ke,te)=>{te.d(Ke,{h:()=>pe});var a=te(4482),ie=te(5403);function pe(Ee,Ae){return(0,a.e)((Qe,We)=>{let St=0;Qe.subscribe((0,ie.x)(We,ft=>Ee.call(Ae,ft,St++)&&We.next(ft)))})}},4004:(_n,Ke,te)=>{te.d(Ke,{U:()=>pe});var a=te(4482),ie=te(5403);function pe(Ee,Ae){return(0,a.e)((Qe,We)=>{let St=0;Qe.subscribe((0,ie.x)(We,ft=>{We.next(Ee.call(Ae,ft,St++))}))})}},9718:(_n,Ke,te)=>{te.d(Ke,{h:()=>ie});var a=te(4004);function ie(pe){return(0,a.U)(()=>pe)}},8189:(_n,Ke,te)=>{te.d(Ke,{J:()=>pe});var a=te(5577),ie=te(4671);function pe(Ee=1/0){return(0,a.z)(ie.y,Ee)}},5577:(_n,Ke,te)=>{te.d(Ke,{z:()=>St});var a=te(4004),ie=te(8421),pe=te(4482),Ee=te(9672),Ae=te(5403),We=te(576);function St(ft,Ue,He=1/0){return(0,We.m)(Ue)?St((rt,Gt)=>(0,a.U)((Xe,Ge)=>Ue(rt,Xe,Gt,Ge))((0,ie.Xf)(ft(rt,Gt))),He):("number"==typeof Ue&&(He=Ue),(0,pe.e)((rt,Gt)=>function Qe(ft,Ue,He,rt,Gt,Xe,Ge,lt){const It=[];let Qt=0,ti=0,an=!1;const Me=()=>{an&&!It.length&&!Qt&&Ue.complete()},ot=Ot=>Qt<rt?ke(Ot):It.push(Ot),ke=Ot=>{Xe&&Ue.next(Ot),Qt++;let rn=!1;(0,ie.Xf)(He(Ot,ti++)).subscribe((0,Ae.x)(Ue,Zt=>{Gt?.(Zt),Xe?ot(Zt):Ue.next(Zt)},()=>{rn=!0},void 0,()=>{if(rn)try{for(Qt--;It.length&&Qt<rt;){const Zt=It.shift();Ge?(0,Ee.f)(Ue,Ge,()=>ke(Zt)):ke(Zt)}Me()}catch(Zt){Ue.error(Zt)}}))};return ft.subscribe((0,Ae.x)(Ue,ot,()=>{an=!0,Me()})),()=>{lt?.()}}(rt,Gt,ft,He)))}},8675:(_n,Ke,te)=>{te.d(Ke,{O:()=>Ee});var a=te(7272),ie=te(3269),pe=te(4482);function Ee(...Ae){const Qe=(0,ie.yG)(Ae);return(0,pe.e)((We,St)=>{(Qe?(0,a.z)(Ae,We,Qe):(0,a.z)(Ae,We)).subscribe(St)})}},3900:(_n,Ke,te)=>{te.d(Ke,{w:()=>Ee});var a=te(8421),ie=te(4482),pe=te(5403);function Ee(Ae,Qe){return(0,ie.e)((We,St)=>{let ft=null,Ue=0,He=!1;const rt=()=>He&&!ft&&St.complete();We.subscribe((0,pe.x)(St,Gt=>{ft?.unsubscribe();let Xe=0;const Ge=Ue++;(0,a.Xf)(Ae(Gt,Ge)).subscribe(ft=(0,pe.x)(St,lt=>St.next(Qe?Qe(Gt,lt,Ge,Xe++):lt),()=>{ft=null,rt()}))},()=>{He=!0,rt()}))})}},5698:(_n,Ke,te)=>{te.d(Ke,{q:()=>Ee});var a=te(515),ie=te(4482),pe=te(5403);function Ee(Ae){return Ae<=0?()=>a.E:(0,ie.e)((Qe,We)=>{let St=0;Qe.subscribe((0,pe.x)(We,ft=>{++St<=Ae&&(We.next(ft),Ae<=St&&We.complete())}))})}},2722:(_n,Ke,te)=>{te.d(Ke,{R:()=>Ae});var a=te(4482),ie=te(5403),pe=te(8421),Ee=te(5032);function Ae(Qe){return(0,a.e)((We,St)=>{(0,pe.Xf)(Qe).subscribe((0,ie.x)(St,()=>St.complete(),Ee.Z)),!St.closed&&We.subscribe(St)})}},8505:(_n,Ke,te)=>{te.d(Ke,{b:()=>Ae});var a=te(576),ie=te(4482),pe=te(5403),Ee=te(4671);function Ae(Qe,We,St){const ft=(0,a.m)(Qe)||We||St?{next:Qe,error:We,complete:St}:Qe;return ft?(0,ie.e)((Ue,He)=>{var rt;null===(rt=ft.subscribe)||void 0===rt||rt.call(ft);let Gt=!0;Ue.subscribe((0,pe.x)(He,Xe=>{var Ge;null===(Ge=ft.next)||void 0===Ge||Ge.call(ft,Xe),He.next(Xe)},()=>{var Xe;Gt=!1,null===(Xe=ft.complete)||void 0===Xe||Xe.call(ft),He.complete()},Xe=>{var Ge;Gt=!1,null===(Ge=ft.error)||void 0===Ge||Ge.call(ft,Xe),He.error(Xe)},()=>{var Xe,Ge;Gt&&(null===(Xe=ft.unsubscribe)||void 0===Xe||Xe.call(ft)),null===(Ge=ft.finalize)||void 0===Ge||Ge.call(ft)}))}):Ee.y}},6063:(_n,Ke,te)=>{te.d(Ke,{l:()=>a});const a={now:()=>(a.delegate||Date).now(),delegate:void 0}},3410:(_n,Ke,te)=>{te.d(Ke,{z:()=>a});const a={setTimeout(ie,pe,...Ee){const{delegate:Ae}=a;return Ae?.setTimeout?Ae.setTimeout(ie,pe,...Ee):setTimeout(ie,pe,...Ee)},clearTimeout(ie){const{delegate:pe}=a;return(pe?.clearTimeout||clearTimeout)(ie)},delegate:void 0}},2202:(_n,Ke,te)=>{te.d(Ke,{h:()=>ie});const ie=function a(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(_n,Ke,te)=>{te.d(Ke,{L:()=>a});const a="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(_n,Ke,te)=>{te.d(Ke,{_6:()=>Qe,jO:()=>Ee,yG:()=>Ae});var a=te(576),ie=te(3532);function pe(We){return We[We.length-1]}function Ee(We){return(0,a.m)(pe(We))?We.pop():void 0}function Ae(We){return(0,ie.K)(pe(We))?We.pop():void 0}function Qe(We,St){return"number"==typeof pe(We)?We.pop():St}},4742:(_n,Ke,te)=>{te.d(Ke,{D:()=>Ae});const{isArray:a}=Array,{getPrototypeOf:ie,prototype:pe,keys:Ee}=Object;function Ae(We){if(1===We.length){const St=We[0];if(a(St))return{args:St,keys:null};if(function Qe(We){return We&&"object"==typeof We&&ie(We)===pe}(St)){const ft=Ee(St);return{args:ft.map(Ue=>St[Ue]),keys:ft}}}return{args:We,keys:null}}},8737:(_n,Ke,te)=>{function a(ie,pe){if(ie){const Ee=ie.indexOf(pe);0<=Ee&&ie.splice(Ee,1)}}te.d(Ke,{P:()=>a})},3888:(_n,Ke,te)=>{function a(ie){const Ee=ie(Ae=>{Error.call(Ae),Ae.stack=(new Error).stack});return Ee.prototype=Object.create(Error.prototype),Ee.prototype.constructor=Ee,Ee}te.d(Ke,{d:()=>a})},1810:(_n,Ke,te)=>{function a(ie,pe){return ie.reduce((Ee,Ae,Qe)=>(Ee[Ae]=pe[Qe],Ee),{})}te.d(Ke,{n:()=>a})},2806:(_n,Ke,te)=>{te.d(Ke,{O:()=>Ee,x:()=>pe});var a=te(2416);let ie=null;function pe(Ae){if(a.v.useDeprecatedSynchronousErrorHandling){const Qe=!ie;if(Qe&&(ie={errorThrown:!1,error:null}),Ae(),Qe){const{errorThrown:We,error:St}=ie;if(ie=null,We)throw St}}else Ae()}function Ee(Ae){a.v.useDeprecatedSynchronousErrorHandling&&ie&&(ie.errorThrown=!0,ie.error=Ae)}},9672:(_n,Ke,te)=>{function a(ie,pe,Ee,Ae=0,Qe=!1){const We=pe.schedule(function(){Ee(),Qe?ie.add(this.schedule(null,Ae)):this.unsubscribe()},Ae);if(ie.add(We),!Qe)return We}te.d(Ke,{f:()=>a})},4671:(_n,Ke,te)=>{function a(ie){return ie}te.d(Ke,{y:()=>a})},1144:(_n,Ke,te)=>{te.d(Ke,{z:()=>a});const a=ie=>ie&&"number"==typeof ie.length&&"function"!=typeof ie},2206:(_n,Ke,te)=>{te.d(Ke,{D:()=>ie});var a=te(576);function ie(pe){return Symbol.asyncIterator&&(0,a.m)(pe?.[Symbol.asyncIterator])}},576:(_n,Ke,te)=>{function a(ie){return"function"==typeof ie}te.d(Ke,{m:()=>a})},3670:(_n,Ke,te)=>{te.d(Ke,{c:()=>pe});var a=te(8822),ie=te(576);function pe(Ee){return(0,ie.m)(Ee[a.L])}},6495:(_n,Ke,te)=>{te.d(Ke,{T:()=>pe});var a=te(2202),ie=te(576);function pe(Ee){return(0,ie.m)(Ee?.[a.h])}},8239:(_n,Ke,te)=>{te.d(Ke,{t:()=>ie});var a=te(576);function ie(pe){return(0,a.m)(pe?.then)}},3260:(_n,Ke,te)=>{te.d(Ke,{L:()=>Ee,Q:()=>pe});var a=te(655),ie=te(576);function pe(Ae){return(0,a.FC)(this,arguments,function*(){const We=Ae.getReader();try{for(;;){const{value:St,done:ft}=yield(0,a.qq)(We.read());if(ft)return yield(0,a.qq)(void 0);yield yield(0,a.qq)(St)}}finally{We.releaseLock()}})}function Ee(Ae){return(0,ie.m)(Ae?.getReader)}},3532:(_n,Ke,te)=>{te.d(Ke,{K:()=>ie});var a=te(576);function ie(pe){return pe&&(0,a.m)(pe.schedule)}},4482:(_n,Ke,te)=>{te.d(Ke,{A:()=>ie,e:()=>pe});var a=te(576);function ie(Ee){return(0,a.m)(Ee?.lift)}function pe(Ee){return Ae=>{if(ie(Ae))return Ae.lift(function(Qe){try{return Ee(Qe,this)}catch(We){this.error(We)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(_n,Ke,te)=>{te.d(Ke,{Z:()=>Ee});var a=te(4004);const{isArray:ie}=Array;function Ee(Ae){return(0,a.U)(Qe=>function pe(Ae,Qe){return ie(Qe)?Ae(...Qe):Ae(Qe)}(Ae,Qe))}},5032:(_n,Ke,te)=>{function a(){}te.d(Ke,{Z:()=>a})},9635:(_n,Ke,te)=>{te.d(Ke,{U:()=>pe,z:()=>ie});var a=te(4671);function ie(...Ee){return pe(Ee)}function pe(Ee){return 0===Ee.length?a.y:1===Ee.length?Ee[0]:function(Qe){return Ee.reduce((We,St)=>St(We),Qe)}}},7849:(_n,Ke,te)=>{te.d(Ke,{h:()=>pe});var a=te(2416),ie=te(3410);function pe(Ee){ie.z.setTimeout(()=>{const{onUnhandledError:Ae}=a.v;if(!Ae)throw Ee;Ae(Ee)})}},4532:(_n,Ke,te)=>{function a(ie){return new TypeError(`You provided ${null!==ie&&"object"==typeof ie?"an invalid object":`'${ie}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}te.d(Ke,{z:()=>a})},655:(_n,Ke,te)=>{function rt($e,Le,Je,nt){return new(Je||(Je=Promise))(function(Dt,Cn){function ui(Wn){try{Pn(nt.next(Wn))}catch(Wt){Cn(Wt)}}function tr(Wn){try{Pn(nt.throw(Wn))}catch(Wt){Cn(Wt)}}function Pn(Wn){Wn.done?Dt(Wn.value):function wt(Dt){return Dt instanceof Je?Dt:new Je(function(Cn){Cn(Dt)})}(Wn.value).then(ui,tr)}Pn((nt=nt.apply($e,Le||[])).next())})}function Me($e){return this instanceof Me?(this.v=$e,this):new Me($e)}function ot($e,Le,Je){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var wt,nt=Je.apply($e,Le||[]),Dt=[];return wt={},Cn("next"),Cn("throw"),Cn("return"),wt[Symbol.asyncIterator]=function(){return this},wt;function Cn(Ri){nt[Ri]&&(wt[Ri]=function(Es){return new Promise(function(Sn,wn){Dt.push([Ri,Es,Sn,wn])>1||ui(Ri,Es)})})}function ui(Ri,Es){try{!function tr(Ri){Ri.value instanceof Me?Promise.resolve(Ri.value.v).then(Pn,Wn):Wt(Dt[0][2],Ri)}(nt[Ri](Es))}catch(Sn){Wt(Dt[0][3],Sn)}}function Pn(Ri){ui("next",Ri)}function Wn(Ri){ui("throw",Ri)}function Wt(Ri,Es){Ri(Es),Dt.shift(),Dt.length&&ui(Dt[0][0],Dt[0][1])}}function Ot($e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Je,Le=$e[Symbol.asyncIterator];return Le?Le.call($e):($e=function lt($e){var Le="function"==typeof Symbol&&Symbol.iterator,Je=Le&&$e[Le],nt=0;if(Je)return Je.call($e);if($e&&"number"==typeof $e.length)return{next:function(){return $e&&nt>=$e.length&&($e=void 0),{value:$e&&$e[nt++],done:!$e}}};throw new TypeError(Le?"Object is not iterable.":"Symbol.iterator is not defined.")}($e),Je={},nt("next"),nt("throw"),nt("return"),Je[Symbol.asyncIterator]=function(){return this},Je);function nt(Dt){Je[Dt]=$e[Dt]&&function(Cn){return new Promise(function(ui,tr){!function wt(Dt,Cn,ui,tr){Promise.resolve(tr).then(function(Pn){Dt({value:Pn,done:ui})},Cn)}(ui,tr,(Cn=$e[Dt](Cn)).done,Cn.value)})}}}te.d(Ke,{FC:()=>ot,KL:()=>Ot,mG:()=>rt,qq:()=>Me})},6895:(_n,Ke,te)=>{te.d(Ke,{Do:()=>ti,EM:()=>ta,HT:()=>Ee,JF:()=>po,K0:()=>Qe,Mn:()=>nt,Mx:()=>Ei,NF:()=>zd,O5:()=>ys,S$:()=>lt,Tn:()=>Kt,UT:()=>wt,V_:()=>ft,Ye:()=>an,Zx:()=>ea,ax:()=>On,b0:()=>Qt,bD:()=>Ba,ez:()=>$l,ol:()=>Je,p6:()=>fa,q:()=>pe,tP:()=>Mr,w_:()=>Ae,x:()=>Jt});var a=te(1571);let ie=null;function pe(){return ie}function Ee(O){ie||(ie=O)}class Ae{}const Qe=new a.OlP("DocumentToken");let We=(()=>{class O{historyGo(B){throw new Error("Not implemented")}}return O.\u0275fac=function(B){return new(B||O)},O.\u0275prov=a.Yz7({token:O,factory:function(){return function St(){return(0,a.LFG)(Ue)}()},providedIn:"platform"}),O})();const ft=new a.OlP("Location Initialized");let Ue=(()=>{class O extends We{constructor(B){super(),this._doc=B,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return pe().getBaseHref(this._doc)}onPopState(B){const X=pe().getGlobalEventTarget(this._doc,"window");return X.addEventListener("popstate",B,!1),()=>X.removeEventListener("popstate",B)}onHashChange(B){const X=pe().getGlobalEventTarget(this._doc,"window");return X.addEventListener("hashchange",B,!1),()=>X.removeEventListener("hashchange",B)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(B){this._location.pathname=B}pushState(B,X,ue){He()?this._history.pushState(B,X,ue):this._location.hash=ue}replaceState(B,X,ue){He()?this._history.replaceState(B,X,ue):this._location.hash=ue}forward(){this._history.forward()}back(){this._history.back()}historyGo(B=0){this._history.go(B)}getState(){return this._history.state}}return O.\u0275fac=function(B){return new(B||O)(a.LFG(Qe))},O.\u0275prov=a.Yz7({token:O,factory:function(){return function rt(){return new Ue((0,a.LFG)(Qe))}()},providedIn:"platform"}),O})();function He(){return!!window.history.pushState}function Gt(O,W){if(0==O.length)return W;if(0==W.length)return O;let B=0;return O.endsWith("/")&&B++,W.startsWith("/")&&B++,2==B?O+W.substring(1):1==B?O+W:O+"/"+W}function Xe(O){const W=O.match(/#|\?|$/),B=W&&W.index||O.length;return O.slice(0,B-("/"===O[B-1]?1:0))+O.slice(B)}function Ge(O){return O&&"?"!==O[0]?"?"+O:O}let lt=(()=>{class O{historyGo(B){throw new Error("Not implemented")}}return O.\u0275fac=function(B){return new(B||O)},O.\u0275prov=a.Yz7({token:O,factory:function(){return(0,a.f3M)(Qt)},providedIn:"root"}),O})();const It=new a.OlP("appBaseHref");let Qt=(()=>{class O extends lt{constructor(B,X){super(),this._platformLocation=B,this._removeListenerFns=[],this._baseHref=X??this._platformLocation.getBaseHrefFromDOM()??(0,a.f3M)(Qe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(B){this._removeListenerFns.push(this._platformLocation.onPopState(B),this._platformLocation.onHashChange(B))}getBaseHref(){return this._baseHref}prepareExternalUrl(B){return Gt(this._baseHref,B)}path(B=!1){const X=this._platformLocation.pathname+Ge(this._platformLocation.search),ue=this._platformLocation.hash;return ue&&B?`${X}${ue}`:X}pushState(B,X,ue,Pe){const et=this.prepareExternalUrl(ue+Ge(Pe));this._platformLocation.pushState(B,X,et)}replaceState(B,X,ue,Pe){const et=this.prepareExternalUrl(ue+Ge(Pe));this._platformLocation.replaceState(B,X,et)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(B=0){this._platformLocation.historyGo?.(B)}}return O.\u0275fac=function(B){return new(B||O)(a.LFG(We),a.LFG(It,8))},O.\u0275prov=a.Yz7({token:O,factory:O.\u0275fac,providedIn:"root"}),O})(),ti=(()=>{class O extends lt{constructor(B,X){super(),this._platformLocation=B,this._baseHref="",this._removeListenerFns=[],null!=X&&(this._baseHref=X)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(B){this._removeListenerFns.push(this._platformLocation.onPopState(B),this._platformLocation.onHashChange(B))}getBaseHref(){return this._baseHref}path(B=!1){let X=this._platformLocation.hash;return null==X&&(X="#"),X.length>0?X.substring(1):X}prepareExternalUrl(B){const X=Gt(this._baseHref,B);return X.length>0?"#"+X:X}pushState(B,X,ue,Pe){let et=this.prepareExternalUrl(ue+Ge(Pe));0==et.length&&(et=this._platformLocation.pathname),this._platformLocation.pushState(B,X,et)}replaceState(B,X,ue,Pe){let et=this.prepareExternalUrl(ue+Ge(Pe));0==et.length&&(et=this._platformLocation.pathname),this._platformLocation.replaceState(B,X,et)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(B=0){this._platformLocation.historyGo?.(B)}}return O.\u0275fac=function(B){return new(B||O)(a.LFG(We),a.LFG(It,8))},O.\u0275prov=a.Yz7({token:O,factory:O.\u0275fac}),O})(),an=(()=>{class O{constructor(B){this._subject=new a.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=B;const X=this._locationStrategy.getBaseHref();this._basePath=function Ot(O){if(new RegExp("^(https?:)?//").test(O)){const[,B]=O.split(/\/\/[^\/]+/);return B}return O}(Xe(ke(X))),this._locationStrategy.onPopState(ue=>{this._subject.emit({url:this.path(!0),pop:!0,state:ue.state,type:ue.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(B=!1){return this.normalize(this._locationStrategy.path(B))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(B,X=""){return this.path()==this.normalize(B+Ge(X))}normalize(B){return O.stripTrailingSlash(function ot(O,W){if(!O||!W.startsWith(O))return W;const B=W.substring(O.length);return""===B||["/",";","?","#"].includes(B[0])?B:W}(this._basePath,ke(B)))}prepareExternalUrl(B){return B&&"/"!==B[0]&&(B="/"+B),this._locationStrategy.prepareExternalUrl(B)}go(B,X="",ue=null){this._locationStrategy.pushState(ue,"",B,X),this._notifyUrlChangeListeners(this.prepareExternalUrl(B+Ge(X)),ue)}replaceState(B,X="",ue=null){this._locationStrategy.replaceState(ue,"",B,X),this._notifyUrlChangeListeners(this.prepareExternalUrl(B+Ge(X)),ue)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(B=0){this._locationStrategy.historyGo?.(B)}onUrlChange(B){return this._urlChangeListeners.push(B),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(X=>{this._notifyUrlChangeListeners(X.url,X.state)})),()=>{const X=this._urlChangeListeners.indexOf(B);this._urlChangeListeners.splice(X,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(B="",X){this._urlChangeListeners.forEach(ue=>ue(B,X))}subscribe(B,X,ue){return this._subject.subscribe({next:B,error:X,complete:ue})}}return O.normalizeQueryParams=Ge,O.joinWithSlash=Gt,O.stripTrailingSlash=Xe,O.\u0275fac=function(B){return new(B||O)(a.LFG(lt))},O.\u0275prov=a.Yz7({token:O,factory:function(){return function Me(){return new an((0,a.LFG)(lt))}()},providedIn:"root"}),O})();function ke(O){return O.replace(/\/index.html$/,"")}var Zt=(()=>((Zt=Zt||{})[Zt.Decimal=0]="Decimal",Zt[Zt.Percent=1]="Percent",Zt[Zt.Currency=2]="Currency",Zt[Zt.Scientific=3]="Scientific",Zt))(),Jt=(()=>((Jt=Jt||{})[Jt.Format=0]="Format",Jt[Jt.Standalone=1]="Standalone",Jt))(),Kt=(()=>((Kt=Kt||{})[Kt.Narrow=0]="Narrow",Kt[Kt.Abbreviated=1]="Abbreviated",Kt[Kt.Wide=2]="Wide",Kt[Kt.Short=3]="Short",Kt))(),yn=(()=>((yn=yn||{})[yn.Short=0]="Short",yn[yn.Medium=1]="Medium",yn[yn.Long=2]="Long",yn[yn.Full=3]="Full",yn))(),fn=(()=>((fn=fn||{})[fn.Decimal=0]="Decimal",fn[fn.Group=1]="Group",fn[fn.List=2]="List",fn[fn.PercentSign=3]="PercentSign",fn[fn.PlusSign=4]="PlusSign",fn[fn.MinusSign=5]="MinusSign",fn[fn.Exponential=6]="Exponential",fn[fn.SuperscriptingExponent=7]="SuperscriptingExponent",fn[fn.PerMille=8]="PerMille",fn[fn.Infinity=9]="Infinity",fn[fn.NaN=10]="NaN",fn[fn.TimeSeparator=11]="TimeSeparator",fn[fn.CurrencyDecimal=12]="CurrencyDecimal",fn[fn.CurrencyGroup=13]="CurrencyGroup",fn))();function Je(O,W,B){const X=(0,a.cg1)(O),Pe=Sr([X[a.wAp.DayPeriodsFormat],X[a.wAp.DayPeriodsStandalone]],W);return Sr(Pe,B)}function nt(O,W,B){const X=(0,a.cg1)(O),Pe=Sr([X[a.wAp.DaysFormat],X[a.wAp.DaysStandalone]],W);return Sr(Pe,B)}function wt(O,W,B){const X=(0,a.cg1)(O),Pe=Sr([X[a.wAp.MonthsFormat],X[a.wAp.MonthsStandalone]],W);return Sr(Pe,B)}function tr(O,W){return Sr((0,a.cg1)(O)[a.wAp.DateFormat],W)}function Pn(O,W){return Sr((0,a.cg1)(O)[a.wAp.TimeFormat],W)}function Wn(O,W){return Sr((0,a.cg1)(O)[a.wAp.DateTimeFormat],W)}function Wt(O,W){const B=(0,a.cg1)(O),X=B[a.wAp.NumberSymbols][W];if(typeof X>"u"){if(W===fn.CurrencyDecimal)return B[a.wAp.NumberSymbols][fn.Decimal];if(W===fn.CurrencyGroup)return B[a.wAp.NumberSymbols][fn.Group]}return X}function Ur(O){if(!O[a.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${O[a.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Sr(O,W){for(let B=W;B>-1;B--)if(typeof O[B]<"u")return O[B];throw new Error("Locale data API: locale data undefined")}function lo(O){const[W,B]=O.split(":");return{hours:+W,minutes:+B}}const As=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,bn={},Vs=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Li=(()=>((Li=Li||{})[Li.Short=0]="Short",Li[Li.ShortGMT=1]="ShortGMT",Li[Li.Long=2]="Long",Li[Li.Extended=3]="Extended",Li))(),tn=(()=>((tn=tn||{})[tn.FullYear=0]="FullYear",tn[tn.Month=1]="Month",tn[tn.Date=2]="Date",tn[tn.Hours=3]="Hours",tn[tn.Minutes=4]="Minutes",tn[tn.Seconds=5]="Seconds",tn[tn.FractionalSeconds=6]="FractionalSeconds",tn[tn.Day=7]="Day",tn))(),Ye=(()=>((Ye=Ye||{})[Ye.DayPeriods=0]="DayPeriods",Ye[Ye.Days=1]="Days",Ye[Ye.Months=2]="Months",Ye[Ye.Eras=3]="Eras",Ye))();function fa(O,W,B,X){let ue=function hl(O){if(we(O))return O;if("number"==typeof O&&!isNaN(O))return new Date(O);if("string"==typeof O){if(O=O.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(O)){const[ue,Pe=1,et=1]=O.split("-").map(sn=>+sn);return Bn(ue,Pe-1,et)}const B=parseFloat(O);if(!isNaN(O-B))return new Date(B);let X;if(X=O.match(As))return function Bl(O){const W=new Date(0);let B=0,X=0;const ue=O[8]?W.setUTCFullYear:W.setFullYear,Pe=O[8]?W.setUTCHours:W.setHours;O[9]&&(B=Number(O[9]+O[10]),X=Number(O[9]+O[11])),ue.call(W,Number(O[1]),Number(O[2])-1,Number(O[3]));const et=Number(O[4]||0)-B,sn=Number(O[5]||0)-X,ni=Number(O[6]||0),$n=Math.floor(1e3*parseFloat("0."+(O[7]||0)));return Pe.call(W,et,sn,ni,$n),W}(X)}const W=new Date(O);if(!we(W))throw new Error(`Unable to convert "${O}" into a date`);return W}(O);W=Hr(B,W)||W;let sn,et=[];for(;W;){if(sn=Vs.exec(W),!sn){et.push(W);break}{et=et.concat(sn.slice(1));const Nt=et.pop();if(!Nt)break;W=Nt}}let ni=ue.getTimezoneOffset();X&&(ni=Jo(X,ni),ue=function co(O,W,B){const X=B?-1:1,ue=O.getTimezoneOffset();return function wo(O,W){return(O=new Date(O.getTime())).setMinutes(O.getMinutes()+W),O}(O,X*(Jo(W,ue)-ue))}(ue,X,!0));let $n="";return et.forEach(Nt=>{const Kn=function $s(O){if(br[O])return br[O];let W;switch(O){case"G":case"GG":case"GGG":W=fi(Ye.Eras,Kt.Abbreviated);break;case"GGGG":W=fi(Ye.Eras,Kt.Wide);break;case"GGGGG":W=fi(Ye.Eras,Kt.Narrow);break;case"y":W=mn(tn.FullYear,1,0,!1,!0);break;case"yy":W=mn(tn.FullYear,2,0,!0,!0);break;case"yyy":W=mn(tn.FullYear,3,0,!1,!0);break;case"yyyy":W=mn(tn.FullYear,4,0,!1,!0);break;case"Y":W=yi(1);break;case"YY":W=yi(2,!0);break;case"YYY":W=yi(3);break;case"YYYY":W=yi(4);break;case"M":case"L":W=mn(tn.Month,1,1);break;case"MM":case"LL":W=mn(tn.Month,2,1);break;case"MMM":W=fi(Ye.Months,Kt.Abbreviated);break;case"MMMM":W=fi(Ye.Months,Kt.Wide);break;case"MMMMM":W=fi(Ye.Months,Kt.Narrow);break;case"LLL":W=fi(Ye.Months,Kt.Abbreviated,Jt.Standalone);break;case"LLLL":W=fi(Ye.Months,Kt.Wide,Jt.Standalone);break;case"LLLLL":W=fi(Ye.Months,Kt.Narrow,Jt.Standalone);break;case"w":W=$i(1);break;case"ww":W=$i(2);break;case"W":W=$i(1,!0);break;case"d":W=mn(tn.Date,1);break;case"dd":W=mn(tn.Date,2);break;case"c":case"cc":W=mn(tn.Day,1);break;case"ccc":W=fi(Ye.Days,Kt.Abbreviated,Jt.Standalone);break;case"cccc":W=fi(Ye.Days,Kt.Wide,Jt.Standalone);break;case"ccccc":W=fi(Ye.Days,Kt.Narrow,Jt.Standalone);break;case"cccccc":W=fi(Ye.Days,Kt.Short,Jt.Standalone);break;case"E":case"EE":case"EEE":W=fi(Ye.Days,Kt.Abbreviated);break;case"EEEE":W=fi(Ye.Days,Kt.Wide);break;case"EEEEE":W=fi(Ye.Days,Kt.Narrow);break;case"EEEEEE":W=fi(Ye.Days,Kt.Short);break;case"a":case"aa":case"aaa":W=fi(Ye.DayPeriods,Kt.Abbreviated);break;case"aaaa":W=fi(Ye.DayPeriods,Kt.Wide);break;case"aaaaa":W=fi(Ye.DayPeriods,Kt.Narrow);break;case"b":case"bb":case"bbb":W=fi(Ye.DayPeriods,Kt.Abbreviated,Jt.Standalone,!0);break;case"bbbb":W=fi(Ye.DayPeriods,Kt.Wide,Jt.Standalone,!0);break;case"bbbbb":W=fi(Ye.DayPeriods,Kt.Narrow,Jt.Standalone,!0);break;case"B":case"BB":case"BBB":W=fi(Ye.DayPeriods,Kt.Abbreviated,Jt.Format,!0);break;case"BBBB":W=fi(Ye.DayPeriods,Kt.Wide,Jt.Format,!0);break;case"BBBBB":W=fi(Ye.DayPeriods,Kt.Narrow,Jt.Format,!0);break;case"h":W=mn(tn.Hours,1,-12);break;case"hh":W=mn(tn.Hours,2,-12);break;case"H":W=mn(tn.Hours,1);break;case"HH":W=mn(tn.Hours,2);break;case"m":W=mn(tn.Minutes,1);break;case"mm":W=mn(tn.Minutes,2);break;case"s":W=mn(tn.Seconds,1);break;case"ss":W=mn(tn.Seconds,2);break;case"S":W=mn(tn.FractionalSeconds,1);break;case"SS":W=mn(tn.FractionalSeconds,2);break;case"SSS":W=mn(tn.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":W=Do(Li.Short);break;case"ZZZZZ":W=Do(Li.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":W=Do(Li.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":W=Do(Li.Long);break;default:return null}return br[O]=W,W}(Nt);$n+=Kn?Kn(ue,B,ni):"''"===Nt?"'":Nt.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),$n}function Bn(O,W,B){const X=new Date(0);return X.setFullYear(O,W,B),X.setHours(0,0,0),X}function Hr(O,W){const B=function Le(O){return(0,a.cg1)(O)[a.wAp.LocaleId]}(O);if(bn[B]=bn[B]||{},bn[B][W])return bn[B][W];let X="";switch(W){case"shortDate":X=tr(O,yn.Short);break;case"mediumDate":X=tr(O,yn.Medium);break;case"longDate":X=tr(O,yn.Long);break;case"fullDate":X=tr(O,yn.Full);break;case"shortTime":X=Pn(O,yn.Short);break;case"mediumTime":X=Pn(O,yn.Medium);break;case"longTime":X=Pn(O,yn.Long);break;case"fullTime":X=Pn(O,yn.Full);break;case"short":const ue=Hr(O,"shortTime"),Pe=Hr(O,"shortDate");X=Us(Wn(O,yn.Short),[ue,Pe]);break;case"medium":const et=Hr(O,"mediumTime"),sn=Hr(O,"mediumDate");X=Us(Wn(O,yn.Medium),[et,sn]);break;case"long":const ni=Hr(O,"longTime"),$n=Hr(O,"longDate");X=Us(Wn(O,yn.Long),[ni,$n]);break;case"full":const Nt=Hr(O,"fullTime"),Kn=Hr(O,"fullDate");X=Us(Wn(O,yn.Full),[Nt,Kn])}return X&&(bn[B][W]=X),X}function Us(O,W){return W&&(O=O.replace(/\{([^}]+)}/g,function(B,X){return null!=W&&X in W?W[X]:B})),O}function nr(O,W,B="-",X,ue){let Pe="";(O<0||ue&&O<=0)&&(ue?O=1-O:(O=-O,Pe=B));let et=String(O);for(;et.length<W;)et="0"+et;return X&&(et=et.slice(et.length-W)),Pe+et}function mn(O,W,B=0,X=!1,ue=!1){return function(Pe,et){let sn=function Yo(O,W){switch(O){case tn.FullYear:return W.getFullYear();case tn.Month:return W.getMonth();case tn.Date:return W.getDate();case tn.Hours:return W.getHours();case tn.Minutes:return W.getMinutes();case tn.Seconds:return W.getSeconds();case tn.FractionalSeconds:return W.getMilliseconds();case tn.Day:return W.getDay();default:throw new Error(`Unknown DateType value "${O}".`)}}(O,Pe);if((B>0||sn>-B)&&(sn+=B),O===tn.Hours)0===sn&&-12===B&&(sn=12);else if(O===tn.FractionalSeconds)return function An(O,W){return nr(O,3).substring(0,W)}(sn,W);const ni=Wt(et,fn.MinusSign);return nr(sn,W,ni,X,ue)}}function fi(O,W,B=Jt.Format,X=!1){return function(ue,Pe){return function xo(O,W,B,X,ue,Pe){switch(B){case Ye.Months:return wt(W,ue,X)[O.getMonth()];case Ye.Days:return nt(W,ue,X)[O.getDay()];case Ye.DayPeriods:const et=O.getHours(),sn=O.getMinutes();if(Pe){const $n=function us(O){const W=(0,a.cg1)(O);return Ur(W),(W[a.wAp.ExtraData][2]||[]).map(X=>"string"==typeof X?lo(X):[lo(X[0]),lo(X[1])])}(W),Nt=function Qr(O,W,B){const X=(0,a.cg1)(O);Ur(X);const Pe=Sr([X[a.wAp.ExtraData][0],X[a.wAp.ExtraData][1]],W)||[];return Sr(Pe,B)||[]}(W,ue,X),Kn=$n.findIndex(mi=>{if(Array.isArray(mi)){const[H,C]=mi,u=et>=H.hours&&sn>=H.minutes,U=et<C.hours||et===C.hours&&sn<C.minutes;if(H.hours<C.hours){if(u&&U)return!0}else if(u||U)return!0}else if(mi.hours===et&&mi.minutes===sn)return!0;return!1});if(-1!==Kn)return Nt[Kn]}return Je(W,ue,X)[et<12?0:1];case Ye.Eras:return function Dt(O,W){return Sr((0,a.cg1)(O)[a.wAp.Eras],W)}(W,X)[O.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${B}`)}}(ue,Pe,O,W,B,X)}}function Do(O){return function(W,B,X){const ue=-1*X,Pe=Wt(B,fn.MinusSign),et=ue>0?Math.floor(ue/60):Math.ceil(ue/60);switch(O){case Li.Short:return(ue>=0?"+":"")+nr(et,2,Pe)+nr(Math.abs(ue%60),2,Pe);case Li.ShortGMT:return"GMT"+(ue>=0?"+":"")+nr(et,1,Pe);case Li.Long:return"GMT"+(ue>=0?"+":"")+nr(et,2,Pe)+":"+nr(Math.abs(ue%60),2,Pe);case Li.Extended:return 0===X?"Z":(ue>=0?"+":"")+nr(et,2,Pe)+":"+nr(Math.abs(ue%60),2,Pe);default:throw new Error(`Unknown zone width "${O}"`)}}}const Hs=0,zs=4;function es(O){return Bn(O.getFullYear(),O.getMonth(),O.getDate()+(zs-O.getDay()))}function $i(O,W=!1){return function(B,X){let ue;if(W){const Pe=new Date(B.getFullYear(),B.getMonth(),1).getDay()-1,et=B.getDate();ue=1+Math.floor((et+Pe)/7)}else{const Pe=es(B),et=function Ws(O){const W=Bn(O,Hs,1).getDay();return Bn(O,0,1+(W<=zs?zs:zs+7)-W)}(Pe.getFullYear()),sn=Pe.getTime()-et.getTime();ue=1+Math.round(sn/6048e5)}return nr(ue,O,Wt(X,fn.MinusSign))}}function yi(O,W=!1){return function(B,X){return nr(es(B).getFullYear(),O,Wt(X,fn.MinusSign),W)}}const br={};function Jo(O,W){O=O.replace(/:/g,"");const B=Date.parse("Jan 01, 1970 00:00:00 "+O)/6e4;return isNaN(B)?W:B}function we(O){return O instanceof Date&&!isNaN(O.valueOf())}const ve=/^(\d+)?\.((\d+)(-(\d+))?)?$/,ae=22,Re=".",Fe="0",Yt=";",zn=",",Bi="#";function Ys(O){const W=parseInt(O);if(isNaN(W))throw new Error("Invalid integer literal when parsing "+O);return W}function Ei(O,W){W=encodeURIComponent(W);for(const B of O.split(";")){const X=B.indexOf("="),[ue,Pe]=-1==X?[B,""]:[B.slice(0,X),B.slice(X+1)];if(ue.trim()===W)return decodeURIComponent(Pe)}return null}class Vt{constructor(W,B,X,ue){this.$implicit=W,this.ngForOf=B,this.index=X,this.count=ue}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let On=(()=>{class O{set ngForOf(B){this._ngForOf=B,this._ngForOfDirty=!0}set ngForTrackBy(B){this._trackByFn=B}get ngForTrackBy(){return this._trackByFn}constructor(B,X,ue){this._viewContainer=B,this._template=X,this._differs=ue,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(B){B&&(this._template=B)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const B=this._ngForOf;!this._differ&&B&&(this._differ=this._differs.find(B).create(this.ngForTrackBy))}if(this._differ){const B=this._differ.diff(this._ngForOf);B&&this._applyChanges(B)}}_applyChanges(B){const X=this._viewContainer;B.forEachOperation((ue,Pe,et)=>{if(null==ue.previousIndex)X.createEmbeddedView(this._template,new Vt(ue.item,this._ngForOf,-1,-1),null===et?void 0:et);else if(null==et)X.remove(null===Pe?void 0:Pe);else if(null!==Pe){const sn=X.get(Pe);X.move(sn,et),Ai(sn,ue)}});for(let ue=0,Pe=X.length;ue<Pe;ue++){const sn=X.get(ue).context;sn.index=ue,sn.count=Pe,sn.ngForOf=this._ngForOf}B.forEachIdentityChange(ue=>{Ai(X.get(ue.currentIndex),ue)})}static ngTemplateContextGuard(B,X){return!0}}return O.\u0275fac=function(B){return new(B||O)(a.Y36(a.s_b),a.Y36(a.Rgc),a.Y36(a.ZZ4))},O.\u0275dir=a.lG2({type:O,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),O})();function Ai(O,W){O.context.$implicit=W.item}let ys=(()=>{class O{constructor(B,X){this._viewContainer=B,this._context=new Yi,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=X}set ngIf(B){this._context.$implicit=this._context.ngIf=B,this._updateView()}set ngIfThen(B){Ro("ngIfThen",B),this._thenTemplateRef=B,this._thenViewRef=null,this._updateView()}set ngIfElse(B){Ro("ngIfElse",B),this._elseTemplateRef=B,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(B,X){return!0}}return O.\u0275fac=function(B){return new(B||O)(a.Y36(a.s_b),a.Y36(a.Rgc))},O.\u0275dir=a.lG2({type:O,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),O})();class Yi{constructor(){this.$implicit=null,this.ngIf=null}}function Ro(O,W){if(W&&!W.createEmbeddedView)throw new Error(`${O} must be a TemplateRef, but received '${(0,a.AaK)(W)}'.`)}let Mr=(()=>{class O{constructor(B){this._viewContainerRef=B,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(B){if(B.ngTemplateOutlet||B.ngTemplateOutletInjector){const X=this._viewContainerRef;if(this._viewRef&&X.remove(X.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:ue,ngTemplateOutletContext:Pe,ngTemplateOutletInjector:et}=this;this._viewRef=X.createEmbeddedView(ue,Pe,et?{injector:et}:void 0)}else this._viewRef=null}else this._viewRef&&B.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return O.\u0275fac=function(B){return new(B||O)(a.Y36(a.s_b))},O.\u0275dir=a.lG2({type:O,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[a.TTD]}),O})();let ea=(()=>{class O{constructor(B){this._locale=B}transform(B,X,ue){if(!function zl(O){return!(null==O||""===O||O!=O)}(B))return null;ue=ue||this._locale;try{return function Pa(O,W,B){return function Tr(O,W,B,X,ue,Pe,et=!1){let sn="",ni=!1;if(isFinite(O)){let $n=function uo(O){let X,ue,Pe,et,sn,W=Math.abs(O)+"",B=0;for((ue=W.indexOf(Re))>-1&&(W=W.replace(Re,"")),(Pe=W.search(/e/i))>0?(ue<0&&(ue=Pe),ue+=+W.slice(Pe+1),W=W.substring(0,Pe)):ue<0&&(ue=W.length),Pe=0;W.charAt(Pe)===Fe;Pe++);if(Pe===(sn=W.length))X=[0],ue=1;else{for(sn--;W.charAt(sn)===Fe;)sn--;for(ue-=Pe,X=[],et=0;Pe<=sn;Pe++,et++)X[et]=Number(W.charAt(Pe))}return ue>ae&&(X=X.splice(0,ae-1),B=ue-1,ue=1),{digits:X,exponent:B,integerLen:ue}}(O);et&&($n=function jl(O){if(0===O.digits[0])return O;const W=O.digits.length-O.integerLen;return O.exponent?O.exponent+=2:(0===W?O.digits.push(0,0):1===W&&O.digits.push(0),O.integerLen+=2),O}($n));let Nt=W.minInt,Kn=W.minFrac,mi=W.maxFrac;if(Pe){const nn=Pe.match(ve);if(null===nn)throw new Error(`${Pe} is not a valid digit info`);const ii=nn[1],Xi=nn[3],hr=nn[5];null!=ii&&(Nt=Ys(ii)),null!=Xi&&(Kn=Ys(Xi)),null!=hr?mi=Ys(hr):null!=Xi&&Kn>mi&&(mi=Kn)}!function Zo(O,W,B){if(W>B)throw new Error(`The minimum number of digits after fraction (${W}) is higher than the maximum (${B}).`);let X=O.digits,ue=X.length-O.integerLen;const Pe=Math.min(Math.max(W,ue),B);let et=Pe+O.integerLen,sn=X[et];if(et>0){X.splice(Math.max(O.integerLen,et));for(let Kn=et;Kn<X.length;Kn++)X[Kn]=0}else{ue=Math.max(0,ue),O.integerLen=1,X.length=Math.max(1,et=Pe+1),X[0]=0;for(let Kn=1;Kn<et;Kn++)X[Kn]=0}if(sn>=5)if(et-1<0){for(let Kn=0;Kn>et;Kn--)X.unshift(0),O.integerLen++;X.unshift(1),O.integerLen++}else X[et-1]++;for(;ue<Math.max(0,Pe);ue++)X.push(0);let ni=0!==Pe;const $n=W+O.integerLen,Nt=X.reduceRight(function(Kn,mi,H,C){return C[H]=(mi+=Kn)<10?mi:mi-10,ni&&(0===C[H]&&H>=$n?C.pop():ni=!1),mi>=10?1:0},0);Nt&&(X.unshift(Nt),O.integerLen++)}($n,Kn,mi);let H=$n.digits,C=$n.integerLen;const u=$n.exponent;let U=[];for(ni=H.every(nn=>!nn);C<Nt;C++)H.unshift(0);for(;C<0;C++)H.unshift(0);C>0?U=H.splice(C,H.length):(U=H,H=[0]);const Ve=[];for(H.length>=W.lgSize&&Ve.unshift(H.splice(-W.lgSize,H.length).join(""));H.length>W.gSize;)Ve.unshift(H.splice(-W.gSize,H.length).join(""));H.length&&Ve.unshift(H.join("")),sn=Ve.join(Wt(B,X)),U.length&&(sn+=Wt(B,ue)+U.join("")),u&&(sn+=Wt(B,fn.Exponential)+"+"+u)}else sn=Wt(B,fn.Infinity);return sn=O<0&&!ni?W.negPre+sn+W.negSuf:W.posPre+sn+W.posSuf,sn}(O,function qo(O,W="-"){const B={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},X=O.split(Yt),ue=X[0],Pe=X[1],et=-1!==ue.indexOf(Re)?ue.split(Re):[ue.substring(0,ue.lastIndexOf(Fe)+1),ue.substring(ue.lastIndexOf(Fe)+1)],sn=et[0],ni=et[1]||"";B.posPre=sn.substring(0,sn.indexOf(Bi));for(let Nt=0;Nt<ni.length;Nt++){const Kn=ni.charAt(Nt);Kn===Fe?B.minFrac=B.maxFrac=Nt+1:Kn===Bi?B.maxFrac=Nt+1:B.posSuf+=Kn}const $n=sn.split(zn);if(B.gSize=$n[1]?$n[1].length:0,B.lgSize=$n[2]||$n[1]?($n[2]||$n[1]).length:0,Pe){const Nt=ue.length-B.posPre.length-B.posSuf.length,Kn=Pe.indexOf(Bi);B.negPre=Pe.substring(0,Kn).replace(/'/g,""),B.negSuf=Pe.slice(Kn+Nt).replace(/'/g,"")}else B.negPre=W+B.posPre,B.negSuf=B.posSuf;return B}(function Ri(O,W){return(0,a.cg1)(O)[a.wAp.NumberFormats][W]}(W,Zt.Percent),Wt(W,fn.MinusSign)),W,fn.Group,fn.Decimal,B,!0).replace(new RegExp("%","g"),Wt(W,fn.PercentSign))}(function gl(O){if("string"==typeof O&&!isNaN(Number(O)-parseFloat(O)))return Number(O);if("number"!=typeof O)throw new Error(`${O} is not a number`);return O}(B),ue,X)}catch(Pe){throw function Lr(O,W){return new a.vHH(2100,!1)}()}}}return O.\u0275fac=function(B){return new(B||O)(a.Y36(a.soG,16))},O.\u0275pipe=a.Yjl({name:"percent",type:O,pure:!0,standalone:!0}),O})();let $l=(()=>{class O{}return O.\u0275fac=function(B){return new(B||O)},O.\u0275mod=a.oAB({type:O}),O.\u0275inj=a.cJS({}),O})();const Ba="browser";function zd(O){return O===Ba}let ta=(()=>{class O{}return O.\u0275prov=(0,a.Yz7)({token:O,providedIn:"root",factory:()=>new ja((0,a.LFG)(Qe),window)}),O})();class ja{constructor(W,B){this.document=W,this.window=B,this.offset=()=>[0,0]}setOffset(W){this.offset=Array.isArray(W)?()=>W:W}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(W){this.supportsScrolling()&&this.window.scrollTo(W[0],W[1])}scrollToAnchor(W){if(!this.supportsScrolling())return;const B=function Ar(O,W){const B=O.getElementById(W)||O.getElementsByName(W)[0];if(B)return B;if("function"==typeof O.createTreeWalker&&O.body&&(O.body.createShadowRoot||O.body.attachShadow)){const X=O.createTreeWalker(O.body,NodeFilter.SHOW_ELEMENT);let ue=X.currentNode;for(;ue;){const Pe=ue.shadowRoot;if(Pe){const et=Pe.getElementById(W)||Pe.querySelector(`[name="${W}"]`);if(et)return et}ue=X.nextNode()}}return null}(this.document,W);B&&(this.scrollToElement(B),B.focus())}setHistoryScrollRestoration(W){if(this.supportScrollRestoration()){const B=this.window.history;B&&B.scrollRestoration&&(B.scrollRestoration=W)}}scrollToElement(W){const B=W.getBoundingClientRect(),X=B.left+this.window.pageXOffset,ue=B.top+this.window.pageYOffset,Pe=this.offset();this.window.scrollTo(X-Pe[0],ue-Pe[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const W=$r(this.window.history)||$r(Object.getPrototypeOf(this.window.history));return!(!W||!W.writable&&!W.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function $r(O){return Object.getOwnPropertyDescriptor(O,"scrollRestoration")}class po{}},1571:(_n,Ke,te)=>{te.d(Ke,{tb:()=>Zb,AFp:()=>kb,ip1:()=>jb,CZH:()=>Ty,hGG:()=>PM,z2F:()=>xy,sBO:()=>gM,Sil:()=>XT,_Vd:()=>md,EJc:()=>ZT,Xts:()=>Zr,SBq:()=>gd,lqb:()=>kc,qLn:()=>vd,vpe:()=>to,XFs:()=>bn,OlP:()=>Ui,zs3:()=>rl,ZZ4:()=>F0,aQg:()=>L0,soG:()=>My,YKP:()=>en,h0i:()=>gn,PXZ:()=>dM,R0b:()=>Rc,FiY:()=>id,Lbi:()=>YT,g9A:()=>Vb,Qsj:()=>vm,FYo:()=>If,JOm:()=>el,tp0:()=>Sa,Rgc:()=>wi,dDg:()=>aM,eoX:()=>Jb,GfV:()=>Of,s_b:()=>Yu,ifc:()=>ae,LMc:()=>FM,MMx:()=>me,Lck:()=>li,eFA:()=>Xb,Gpc:()=>Ge,f3M:()=>br,$WT:()=>zr,_c5:()=>IM,c2e:()=>JT,zSh:()=>_i,wAp:()=>Fn,vHH:()=>Me,lri:()=>$b,rWj:()=>Yb,D6c:()=>OM,cg1:()=>Yh,kL8:()=>a0,dqk:()=>Bn,Z0I:()=>us,eJc:()=>y0,CqO:()=>Gu,QGY:()=>Ol,F4k:()=>ll,RDi:()=>mv,AaK:()=>rt,zW0:()=>r,qOj:()=>Vm,TTD:()=>Jl,_Bn:()=>zt,jDz:()=>qe,xp6:()=>xm,uIk:()=>vi,Tol:()=>Kv,MT6:()=>ry,ekj:()=>F_,Suo:()=>mb,Xpm:()=>Pa,lG2:()=>io,Yz7:()=>wn,cJS:()=>Si,oAB:()=>uo,Yjl:()=>ma,Y36:()=>Al,_UZ:()=>Hh,BQk:()=>Ad,ynx:()=>zh,qZA:()=>Ed,TgZ:()=>ku,EpF:()=>Uo,n5z:()=>ms,Ikx:()=>ay,SDv:()=>xt,QtT:()=>Ht,pQV:()=>tt,LFG:()=>$i,$8M:()=>Ml,$Z:()=>Hf,NdJ:()=>Vu,CRH:()=>gb,oxw:()=>op,ALo:()=>Ne,lcZ:()=>oi,Hsn:()=>Nl,F$t:()=>Uv,Q6J:()=>Pl,s9C:()=>Hu,MGl:()=>ap,DdM:()=>pn,VKq:()=>In,WLB:()=>Zi,kEZ:()=>ks,iGM:()=>fb,MAs:()=>ju,KtG:()=>dr,CHM:()=>Eo,P3R:()=>ud,Udp:()=>N_,YNc:()=>Il,W1O:()=>bb,_uU:()=>ty,Oqu:()=>Zc,hij:()=>V_,Gf:()=>pb});var a=te(7579),ie=te(727),pe=te(9751),Ee=te(6451),Ae=te(8421),Qe=te(930),We=te(4482);function ft(n,i,...o){if(!0===i)return void n();if(!1===i)return;const d=new Qe.Hp({next:()=>{d.unsubscribe(),n()}});return(0,Ae.Xf)(i(...o)).subscribe(d)}function Ue(n){for(let i in n)if(n[i]===Ue)return i;throw Error("Could not find renamed property on target object.")}function He(n,i){for(const o in i)i.hasOwnProperty(o)&&!n.hasOwnProperty(o)&&(n[o]=i[o])}function rt(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(rt).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const i=n.toString();if(null==i)return""+i;const o=i.indexOf("\n");return-1===o?i:i.substring(0,o)}function Gt(n,i){return null==n||""===n?null===i?"":i:null==i||""===i?n:n+" "+i}const Xe=Ue({__forward_ref__:Ue});function Ge(n){return n.__forward_ref__=Ge,n.toString=function(){return rt(this())},n}function lt(n){return It(n)?n():n}function It(n){return"function"==typeof n&&n.hasOwnProperty(Xe)&&n.__forward_ref__===Ge}function Qt(n){return n&&!!n.\u0275providers}const an="https://g.co/ng/security#xss";class Me extends Error{constructor(i,o){super(ot(i,o)),this.code=i}}function ot(n,i){return`NG0${Math.abs(n)}${i?": "+i.trim():""}`}function ke(n){return"string"==typeof n?n:null==n?"":String(n)}function Jt(n,i){throw new Me(-201,!1)}function Wt(n,i,o,d){throw new Error(`ASSERTION ERROR: ${n}`+(null==d?"":` [Expected=> ${o} ${d} ${i} <=Actual]`))}function wn(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Si(n){return{providers:n.providers||[],imports:n.imports||[]}}function Ur(n){return Qr(n,$o)||Qr(n,Cr)}function us(n){return null!==Ur(n)}function Qr(n,i){return n.hasOwnProperty(i)?n[i]:null}function lo(n){return n&&(n.hasOwnProperty(qi)||n.hasOwnProperty(As))?n[qi]:null}const $o=Ue({\u0275prov:Ue}),qi=Ue({\u0275inj:Ue}),Cr=Ue({ngInjectableDef:Ue}),As=Ue({ngInjectorDef:Ue});var bn=(()=>((bn=bn||{})[bn.Default=0]="Default",bn[bn.Host=1]="Host",bn[bn.Self=2]="Self",bn[bn.SkipSelf=4]="SkipSelf",bn[bn.Optional=8]="Optional",bn))();let Vs;function tn(n){const i=Vs;return Vs=n,i}function Ye(n,i,o){const d=Ur(n);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:o&bn.Optional?null:void 0!==i?i:void Jt(rt(n))}const Bn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),An={},mn="__NG_DI_FLAG__",Yo="ngTempTokenPath",fi="ngTokenPath",xo=/\n/gm,Do="\u0275",Hs="__source";let zs;function Ws(n){const i=zs;return zs=n,i}function es(n,i=bn.Default){if(void 0===zs)throw new Me(-203,!1);return null===zs?Ye(n,void 0,i):zs.get(n,i&bn.Optional?null:void 0,i)}function $i(n,i=bn.Default){return(function Li(){return Vs}()||es)(lt(n),i)}function br(n,i=bn.Default){return $i(n,$s(i))}function $s(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Jo(n){const i=[];for(let o=0;o<n.length;o++){const d=lt(n[o]);if(Array.isArray(d)){if(0===d.length)throw new Me(900,!1);let m,y=bn.Default;for(let D=0;D<d.length;D++){const I=d[D],F=co(I);"number"==typeof F?-1===F?m=I.token:y|=F:m=I}i.push($i(m,y))}else i.push($i(d))}return i}function wo(n,i){return n[mn]=i,n.prototype[mn]=i,n}function co(n){return n[mn]}function we(n){return{toString:n}.toString()}var ve=(()=>((ve=ve||{})[ve.OnPush=0]="OnPush",ve[ve.Default=1]="Default",ve))(),ae=(()=>{return(n=ae||(ae={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",ae;var n})();const Re={},Fe=[],Yt=Ue({\u0275cmp:Ue}),zn=Ue({\u0275dir:Ue}),Bi=Ue({\u0275pipe:Ue}),Ki=Ue({\u0275mod:Ue}),Is=Ue({\u0275fac:Ue}),Tr=Ue({__NG_ELEMENT_ID__:Ue});let pa=0;function Pa(n){return we(()=>{const i=Sc(n),o={...i,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===ve.OnPush,directiveDefs:null,pipeDefs:null,dependencies:i.standalone&&n.dependencies||null,getStandaloneInjector:null,data:n.data||{},encapsulation:n.encapsulation||ae.Emulated,id:"c"+pa++,styles:n.styles||Fe,_:null,schemas:n.schemas||null,tView:null};Na(o);const d=n.dependencies;return o.directiveDefs=Js(d,!1),o.pipeDefs=Js(d,!0),o})}function qo(n){return pi(n)||ir(n)}function jl(n){return null!==n}function uo(n){return we(()=>({type:n.type,bootstrap:n.bootstrap||Fe,declarations:n.declarations||Fe,imports:n.imports||Fe,exports:n.exports||Fe,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Ys(n,i){if(null==n)return Re;const o={};for(const d in n)if(n.hasOwnProperty(d)){let m=n[d],y=m;Array.isArray(m)&&(y=m[1],m=m[0]),o[m]=d,i&&(i[m]=y)}return o}function io(n){return we(()=>{const i=Sc(n);return Na(i),i})}function ma(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function pi(n){return n[Yt]||null}function ir(n){return n[zn]||null}function Ei(n){return n[Bi]||null}function zr(n){const i=pi(n)||ir(n)||Ei(n);return null!==i&&i.standalone}function Fr(n,i){const o=n[Ki]||null;if(!o&&!0===i)throw new Error(`Type ${rt(n)} does not have '\u0275mod' property.`);return o}function Sc(n){const i={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:i,exportAs:n.exportAs||null,standalone:!0===n.standalone,selectors:n.selectors||Fe,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Ys(n.inputs,i),outputs:Ys(n.outputs)}}function Na(n){n.features?.forEach(i=>i(n))}function Js(n,i){if(!n)return null;const o=i?Ei:qo;return()=>("function"==typeof n?n():n).map(d=>o(d)).filter(jl)}const qs=0,Vt=1,On=2,Ai=3,ts=4,ys=5,Yi=6,Ro=7,Oi=8,So=9,ho=10,jn=11,kl=12,Zs=13,Co=14,fo=15,Mr=16,Fa=17,Lr=18,ds=19,Ko=20,bs=21,Dn=22,Vl=1,ro=2,fl=7,Xo=8,Wr=9,ur=10;function xr(n){return Array.isArray(n)&&"object"==typeof n[Vl]}function Er(n){return Array.isArray(n)&&!0===n[Vl]}function ga(n){return 0!=(4&n.flags)}function La(n){return n.componentOffset>-1}function Ul(n){return 1==(1&n.flags)}function ns(n){return!!n.template}function Qo(n){return 0!=(256&n[On])}function $r(n,i){return n.hasOwnProperty(Is)?n[Is]:null}class Ar{constructor(i,o,d){this.previousValue=i,this.currentValue=o,this.firstChange=d}isFirstChange(){return this.firstChange}}function Jl(){return po}function po(n){return n.type.prototype.ngOnChanges&&(n.setInput=Ir),ka}function ka(){const n=_l(this),i=n?.current;if(i){const o=n.previous;if(o===Re)n.previous=i;else for(let d in i)o[d]=i[d];n.current=null,this.ngOnChanges(i)}}function Ir(n,i,o,d){const m=this.declaredInputs[o],y=_l(n)||function tu(n,i){return n[rr]=i}(n,{previous:Re,current:null}),D=y.current||(y.current={}),I=y.previous,F=I[m];D[m]=new Ar(F&&F.currentValue,i,I===Re),n[d]=i}Jl.ngInherit=!0;const rr="__ngSimpleChanges__";function _l(n){return n[rr]||null}const hs=function(n,i,o){};function ji(n){for(;Array.isArray(n);)n=n[qs];return n}function ia(n,i){return ji(i[n])}function Ts(n,i){return ji(i[n.index])}function Zl(n,i){return n.data[i]}function mo(n,i){return n[i]}function Br(n,i){const o=i[n];return xr(o)?o:o[qs]}function Ps(n){return 64==(64&n[On])}function is(n,i){return null==i?null:n[i]}function ki(n){n[Lr]=0}function ba(n,i){n[ys]+=i;let o=n,d=n[Ai];for(;null!==d&&(1===i&&1===o[ys]||-1===i&&0===o[ys]);)d[ys]+=i,o=d,d=d[Ai]}const Oe={lFrame:ra(null),bindingsEnabled:!0};function Ta(){return Oe.bindingsEnabled}function pt(){return Oe.lFrame.lView}function Rn(){return Oe.lFrame.tView}function Eo(n){return Oe.lFrame.contextLView=n,n[Oi]}function dr(n){return Oe.lFrame.contextLView=null,n}function Gi(){let n=vl();for(;null!==n&&64===n.type;)n=n.parent;return n}function vl(){return Oe.lFrame.currentTNode}function go(){const n=Oe.lFrame,i=n.currentTNode;return n.isParent?i:i.parent}function Ms(n,i){const o=Oe.lFrame;o.currentTNode=n,o.isParent=i}function Xt(){return Oe.lFrame.isParent}function so(){Oe.lFrame.isParent=!1}function jr(){const n=Oe.lFrame;let i=n.bindingRootIndex;return-1===i&&(i=n.bindingRootIndex=n.tView.bindingStartIndex),i}function Dr(){return Oe.lFrame.bindingIndex}function rs(){return Oe.lFrame.bindingIndex++}function fs(n){const i=Oe.lFrame,o=i.bindingIndex;return i.bindingIndex=i.bindingIndex+n,o}function Xl(n){Oe.lFrame.inI18n=n}function Ha(n,i){const o=Oe.lFrame;o.bindingIndex=o.bindingRootIndex=n,wr(i)}function wr(n){Oe.lFrame.currentDirectiveIndex=n}function za(){return Oe.lFrame.currentQueryIndex}function Ma(n){Oe.lFrame.currentQueryIndex=n}function Io(n){const i=n[Vt];return 2===i.type?i.declTNode:1===i.type?n[Yi]:null}function Os(n,i,o){if(o&bn.SkipSelf){let m=i,y=n;for(;!(m=m.parent,null!==m||o&bn.Host||(m=Io(y),null===m||(y=y[fo],10&m.type))););if(null===m)return!1;i=m,n=y}const d=Oe.lFrame=Wa();return d.currentTNode=i,d.lView=n,!0}function xs(n){const i=Wa(),o=n[Vt];Oe.lFrame=i,i.currentTNode=o.firstChild,i.lView=n,i.tView=o,i.contextLView=n,i.bindingIndex=o.bindingStartIndex,i.inI18n=!1}function Wa(){const n=Oe.lFrame,i=null===n?null:n.child;return null===i?ra(n):i}function ra(n){const i={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=i),i}function sa(){const n=Oe.lFrame;return Oe.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Po=sa;function _o(){const n=sa();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Rr(){return Oe.lFrame.selectedIndex}function Ds(n){Oe.lFrame.selectedIndex=n}function Vi(){const n=Oe.lFrame;return Zl(n.tView,n.selectedIndex)}function B(n,i){for(let o=i.directiveStart,d=i.directiveEnd;o<d;o++){const y=n.data[o].type.prototype,{ngAfterContentInit:D,ngAfterContentChecked:I,ngAfterViewInit:F,ngAfterViewChecked:z,ngOnDestroy:Q}=y;D&&(n.contentHooks??(n.contentHooks=[])).push(-o,D),I&&((n.contentHooks??(n.contentHooks=[])).push(o,I),(n.contentCheckHooks??(n.contentCheckHooks=[])).push(o,I)),F&&(n.viewHooks??(n.viewHooks=[])).push(-o,F),z&&((n.viewHooks??(n.viewHooks=[])).push(o,z),(n.viewCheckHooks??(n.viewCheckHooks=[])).push(o,z)),null!=Q&&(n.destroyHooks??(n.destroyHooks=[])).push(o,Q)}}function X(n,i,o){et(n,i,3,o)}function ue(n,i,o,d){(3&n[On])===o&&et(n,i,o,d)}function Pe(n,i){let o=n[On];(3&o)===i&&(o&=2047,o+=1,n[On]=o)}function et(n,i,o,d){const y=d??-1,D=i.length-1;let I=0;for(let F=void 0!==d?65535&n[Lr]:0;F<D;F++)if("number"==typeof i[F+1]){if(I=i[F],null!=d&&I>=d)break}else i[F]<0&&(n[Lr]+=65536),(I<y||-1==y)&&(sn(n,o,i,F),n[Lr]=(4294901760&n[Lr])+F+2),F++}function sn(n,i,o,d){const m=o[d]<0,y=o[d+1],I=n[m?-o[d]:o[d]];if(m){if(n[On]>>11<n[Lr]>>16&&(3&n[On])===i){n[On]+=2048,hs(4,I,y);try{y.call(I)}finally{hs(5,I,y)}}}else{hs(4,I,y);try{y.call(I)}finally{hs(5,I,y)}}}const ni=-1;class $n{constructor(i,o,d){this.factory=i,this.resolving=!1,this.canSeeViewProviders=o,this.injectImpl=d}}function nn(n,i,o){let d=0;for(;d<o.length;){const m=o[d];if("number"==typeof m){if(0!==m)break;d++;const y=o[d++],D=o[d++],I=o[d++];n.setAttribute(i,D,I,y)}else{const y=m,D=o[++d];Xi(y)?n.setProperty(i,y,D):n.setAttribute(i,y,D),d++}}return d}function ii(n){return 3===n||4===n||6===n}function Xi(n){return 64===n.charCodeAt(0)}function hr(n,i){if(null!==i&&0!==i.length)if(null===n||0===n.length)n=i.slice();else{let o=-1;for(let d=0;d<i.length;d++){const m=i[d];"number"==typeof m?o=m:0===o||$a(n,o,m,null,-1===o||2===o?i[++d]:null)}}return n}function $a(n,i,o,d,m){let y=0,D=n.length;if(-1===i)D=-1;else for(;y<n.length;){const I=n[y++];if("number"==typeof I){if(I===i){D=-1;break}if(I>i){D=y-1;break}}}for(;y<n.length;){const I=n[y];if("number"==typeof I)break;if(I===o){if(null===d)return void(null!==m&&(n[y+1]=m));if(d===n[y+1])return void(n[y+2]=m)}y++,null!==d&&y++,null!==m&&y++}-1!==D&&(n.splice(D,0,i),y=D+1),n.splice(y++,0,o),null!==d&&n.splice(y++,0,d),null!==m&&n.splice(y++,0,m)}function Ns(n){return n!==ni}function aa(n){return 32767&n}function Da(n,i){let o=function No(n){return n>>16}(n),d=i;for(;o>0;)d=d[fo],o--;return d}let Ya=!0;function Pc(n){const i=Ya;return Ya=n,i}const su=255,ou=5;let Oc=0;const Fo={};function Jr(n,i){const o=bi(n,i);if(-1!==o)return o;const d=i[Vt];d.firstCreatePass&&(n.injectorIndex=i.length,oo(d.data,n),oo(i,null),oo(d.blueprint,null));const m=Lo(n,i),y=n.injectorIndex;if(Ns(m)){const D=aa(m),I=Da(m,i),F=I[Vt].data;for(let z=0;z<8;z++)i[y+z]=I[D+z]|F[D+z]}return i[y+8]=m,y}function oo(n,i){n.push(0,0,0,0,0,0,0,0,i)}function bi(n,i){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===i[n.injectorIndex+8]?-1:n.injectorIndex}function Lo(n,i){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let o=0,d=null,m=i;for(;null!==m;){if(d=Zh(m),null===d)return ni;if(o++,m=m[fo],-1!==d.injectorIndex)return d.injectorIndex|o<<16}return ni}function fr(n,i,o){!function Yd(n,i,o){let d;"string"==typeof o?d=o.charCodeAt(0)||0:o.hasOwnProperty(Tr)&&(d=o[Tr]),null==d&&(d=o[Tr]=Oc++);const m=d&su;i.data[n+(m>>ou)]|=1<<m}(n,i,o)}function Ks(n,i,o){if(o&bn.Optional||void 0!==n)return n;Jt()}function la(n,i,o,d){if(o&bn.Optional&&void 0===d&&(d=null),!(o&(bn.Self|bn.Host))){const m=n[So],y=tn(void 0);try{return m?m.get(i,d,o&bn.Optional):Ye(i,d,o&bn.Optional)}finally{tn(y)}}return Ks(d,0,o)}function ec(n,i,o,d=bn.Default,m){if(null!==n){if(1024&i[On]){const D=function Jd(n,i,o,d,m){let y=n,D=i;for(;null!==y&&null!==D&&1024&D[On]&&!(256&D[On]);){const I=qa(y,D,o,d|bn.Self,Fo);if(I!==Fo)return I;let F=y.parent;if(!F){const z=D[bs];if(z){const Q=z.get(o,Fo,d);if(Q!==Fo)return Q}F=Zh(D),D=D[fo]}y=F}return m}(n,i,o,d,Fo);if(D!==Fo)return D}const y=qa(n,i,o,d,Fo);if(y!==Fo)return y}return la(i,o,d,m)}function qa(n,i,o,d,m){const y=function gr(n){if("string"==typeof n)return n.charCodeAt(0)||0;const i=n.hasOwnProperty(Tr)?n[Tr]:void 0;return"number"==typeof i?i>=0?i&su:kr:i}(o);if("function"==typeof y){if(!Os(i,n,d))return d&bn.Host?Ks(m,0,d):la(i,o,d,m);try{const D=y(d);if(null!=D||d&bn.Optional)return D;Jt()}finally{Po()}}else if("number"==typeof y){let D=null,I=bi(n,i),F=ni,z=d&bn.Host?i[Mr][Yi]:null;for((-1===I||d&bn.SkipSelf)&&(F=-1===I?Lo(n,i):i[I+8],F!==ni&&Qi(d,!1)?(D=i[Vt],I=aa(F),i=Da(F,i)):I=-1);-1!==I;){const Q=i[Vt];if(ca(y,I,Q.data)){const oe=Nc(I,i,o,D,d,z);if(oe!==Fo)return oe}F=i[I+8],F!==ni&&Qi(d,i[Vt].data[I+8]===z)&&ca(y,I,i)?(D=Q,I=aa(F),i=Da(F,i)):I=-1}}return m}function Nc(n,i,o,d,m,y){const D=i[Vt],I=D.data[n+8],Q=ps(I,D,o,null==d?La(I)&&Ya:d!=D&&0!=(3&I.type),m&bn.Host&&y===I);return null!==Q?ao(i,D,Q,I):Fo}function ps(n,i,o,d,m){const y=n.providerIndexes,D=i.data,I=1048575&y,F=n.directiveStart,Q=y>>20,ye=m?I+Q:n.directiveEnd;for(let Ce=d?I:I+Q;Ce<ye;Ce++){const it=D[Ce];if(Ce<F&&o===it||Ce>=F&&it.type===o)return Ce}if(m){const Ce=D[F];if(Ce&&ns(Ce)&&Ce.type===o)return F}return null}function ao(n,i,o,d){let m=n[o];const y=i.data;if(function Nt(n){return n instanceof $n}(m)){const D=m;D.resolving&&function rn(n,i){const o=i?`. Dependency path: ${i.join(" > ")} > ${n}`:"";throw new Me(-200,`Circular dependency in DI detected for ${n}${o}`)}(function Ot(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():ke(n)}(y[o]));const I=Pc(D.canSeeViewProviders);D.resolving=!0;const F=D.injectImpl?tn(D.injectImpl):null;Os(n,d,bn.Default);try{m=n[o]=D.factory(void 0,y,n,d),i.firstCreatePass&&o>=d.directiveStart&&function W(n,i,o){const{ngOnChanges:d,ngOnInit:m,ngDoCheck:y}=i.type.prototype;if(d){const D=po(i);(o.preOrderHooks??(o.preOrderHooks=[])).push(n,D),(o.preOrderCheckHooks??(o.preOrderCheckHooks=[])).push(n,D)}m&&(o.preOrderHooks??(o.preOrderHooks=[])).push(0-n,m),y&&((o.preOrderHooks??(o.preOrderHooks=[])).push(n,y),(o.preOrderCheckHooks??(o.preOrderCheckHooks=[])).push(n,y))}(o,y[o],i)}finally{null!==F&&tn(F),Pc(I),D.resolving=!1,Po()}}return m}function ca(n,i,o){return!!(o[i+(n>>ou)]&1<<n)}function Qi(n,i){return!(n&bn.Self||n&bn.Host&&i)}class ws{constructor(i,o){this._tNode=i,this._lView=o}get(i,o,d){return ec(this._tNode,this._lView,i,$s(d),o)}}function kr(){return new ws(Gi(),pt())}function ms(n){return we(()=>{const i=n.prototype.constructor,o=i[Is]||Tl(i),d=Object.prototype;let m=Object.getPrototypeOf(n.prototype).constructor;for(;m&&m!==d;){const y=m[Is]||Tl(m);if(y&&y!==o)return y;m=Object.getPrototypeOf(m)}return y=>new y})}function Tl(n){return It(n)?()=>{const i=Tl(lt(n));return i&&i()}:$r(n)}function Zh(n){const i=n[Vt],o=i.type;return 2===o?i.declTNode:1===o?n[Yi]:null}function Ml(n){return function Ja(n,i){if("class"===i)return n.classes;if("style"===i)return n.styles;const o=n.attrs;if(o){const d=o.length;let m=0;for(;m<d;){const y=o[m];if(ii(y))break;if(0===y)m+=2;else if("number"==typeof y)for(m++;m<d&&"string"==typeof o[m];)m++;else{if(y===i)return o[m+1];m+=2}}}return null}(Gi(),n)}const wa="__parameters__";function Za(n,i,o){return we(()=>{const d=function Qu(n){return function(...o){if(n){const d=n(...o);for(const m in d)this[m]=d[m]}}}(i);function m(...y){if(this instanceof m)return d.apply(this,y),this;const D=new m(...y);return I.annotation=D,I;function I(F,z,Q){const oe=F.hasOwnProperty(wa)?F[wa]:Object.defineProperty(F,wa,{value:[]})[wa];for(;oe.length<=Q;)oe.push(null);return(oe[Q]=oe[Q]||[]).push(D),F}}return o&&(m.prototype=Object.create(o.prototype)),m.prototype.ngMetadataName=n,m.annotationCls=m,m})}class Ui{constructor(i,o){this._desc=i,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof o?this.__NG_ELEMENT_ID__=o:void 0!==o&&(this.\u0275prov=wn({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function ua(n,i){n.forEach(o=>Array.isArray(o)?ua(o,i):i(o))}function w(n,i,o){i>=n.length?n.push(o):n.splice(i,0,o)}function R(n,i){return i>=n.length-1?n.pop():n.splice(i,1)[0]}function M(n,i){const o=[];for(let d=0;d<n;d++)o.push(i);return o}function be(n,i,o){let d=Ft(n,i);return d>=0?n[1|d]=o:(d=~d,function q(n,i,o,d){let m=n.length;if(m==i)n.push(o,d);else if(1===m)n.push(d,n[0]),n[0]=o;else{for(m--,n.push(n[m-1],n[m]);m>i;)n[m]=n[m-2],m--;n[i]=o,n[i+1]=d}}(n,d,i,o)),d}function Ze(n,i){const o=Ft(n,i);if(o>=0)return n[1|o]}function Ft(n,i){return function gi(n,i,o){let d=0,m=n.length>>o;for(;m!==d;){const y=d+(m-d>>1),D=n[y<<o];if(i===D)return y<<o;D>i?m=y:d=y+1}return~(m<<o)}(n,i,1)}const id=wo(Za("Optional"),8),Sa=wo(Za("SkipSelf"),4);var el=(()=>((el=el||{})[el.Important=1]="Important",el[el.DashCase=2]="DashCase",el))();const dg=/^>|^->|<!--|-->|--!>|<!-$/g,hg=/(<|>)/,fg="\u200b$1\u200b";const tf=new Map;let pg=0;const rf="__ngContext__";function Xs(n,i){xr(i)?(n[rf]=i[Ko],function gg(n){tf.set(n[Ko],n)}(i)):n[rf]=i}let sf;function af(n,i){return sf(n,i)}function ad(n){const i=n[Ai];return Er(i)?i[Ai]:i}function lf(n){return jp(n[Zs])}function cf(n){return jp(n[ts])}function jp(n){for(;null!==n&&!Er(n);)n=n[ts];return n}function fu(n,i,o,d,m){if(null!=d){let y,D=!1;Er(d)?y=d:xr(d)&&(D=!0,d=d[qs]);const I=ji(d);0===n&&null!==o?null==m?Hp(i,o,I):Lc(i,o,I,m||null,!0):1===n&&null!==o?Lc(i,o,I,m||null,!0):2===n?Kp(i,I,D):3===n&&i.destroyNode(I),null!=y&&function fv(n,i,o,d,m){const y=o[fl];y!==ji(o)&&fu(i,n,d,y,m);for(let I=ur;I<o.length;I++){const F=o[I];nh(F[Vt],F,n,i,d,y)}}(i,n,y,o,m)}}function uf(n,i){return n.createText(i)}function Xd(n,i,o){n.setValue(i,o)}function Sg(n,i){return n.createComment(function Ap(n){return n.replace(dg,i=>i.replace(hg,fg))}(i))}function df(n,i,o){return n.createElement(i,o)}function kp(n,i){const o=n[Wr],d=o.indexOf(i),m=i[Ai];512&i[On]&&(i[On]&=-513,ba(m,-1)),o.splice(d,1)}function hf(n,i){if(n.length<=ur)return;const o=ur+i,d=n[o];if(d){const m=d[Fa];null!==m&&m!==n&&kp(m,d),i>0&&(n[o-1][ts]=d[ts]);const y=R(n,ur+i);!function Cg(n,i){nh(n,i,i[jn],2,null,null),i[qs]=null,i[Yi]=null}(d[Vt],d);const D=y[ds];null!==D&&D.detachView(y[Vt]),d[Ai]=null,d[ts]=null,d[On]&=-65}return d}function Gp(n,i){if(!(128&i[On])){const o=i[jn];o.destroyNode&&nh(n,i,o,3,null,null),function Ig(n){let i=n[Zs];if(!i)return ff(n[Vt],n);for(;i;){let o=null;if(xr(i))o=i[Zs];else{const d=i[ur];d&&(o=d)}if(!o){for(;i&&!i[ts]&&i!==n;)xr(i)&&ff(i[Vt],i),i=i[Ai];null===i&&(i=n),xr(i)&&ff(i[Vt],i),o=i&&i[ts]}i=o}}(i)}}function ff(n,i){if(!(128&i[On])){i[On]&=-65,i[On]|=128,function Ng(n,i){let o;if(null!=n&&null!=(o=n.destroyHooks))for(let d=0;d<o.length;d+=2){const m=i[o[d]];if(!(m instanceof $n)){const y=o[d+1];if(Array.isArray(y))for(let D=0;D<y.length;D+=2){const I=m[y[D]],F=y[D+1];hs(4,I,F);try{F.call(I)}finally{hs(5,I,F)}}else{hs(4,m,y);try{y.call(m)}finally{hs(5,m,y)}}}}}(n,i),function dv(n,i){const o=n.cleanup,d=i[Ro];let m=-1;if(null!==o)for(let y=0;y<o.length-1;y+=2)if("string"==typeof o[y]){const D=o[y+3];D>=0?d[m=D]():d[m=-D].unsubscribe(),y+=2}else{const D=d[m=o[y+1]];o[y].call(D)}if(null!==d){for(let y=m+1;y<d.length;y++)(0,d[y])();i[Ro]=null}}(n,i),1===i[Vt].type&&i[jn].destroy();const o=i[Fa];if(null!==o&&Er(i[Ai])){o!==i[Ai]&&kp(o,i);const d=i[ds];null!==d&&d.detachView(n)}!function _g(n){tf.delete(n[Ko])}(i)}}function Vp(n,i,o){return Up(n,i.parent,o)}function Up(n,i,o){let d=i;for(;null!==d&&40&d.type;)d=(i=d).parent;if(null===d)return o[qs];{const{componentOffset:m}=d;if(m>-1){const{encapsulation:y}=n.data[d.directiveStart+m];if(y===ae.None||y===ae.Emulated)return null}return Ts(d,o)}}function Lc(n,i,o,d,m){n.insertBefore(i,o,d,m)}function Hp(n,i,o){n.appendChild(i,o)}function zp(n,i,o,d,m){null!==d?Lc(n,i,o,d,m):Hp(n,i,o)}function Qd(n,i){return n.parentNode(i)}function Wp(n,i,o){return Yp(n,i,o)}function $p(n,i,o){return 40&n.type?Ts(n,o):null}let pf,sc,mf,gf,Yp=$p;function Jp(n,i){Yp=n,pf=i}function eh(n,i,o,d){const m=Vp(n,d,i),y=i[jn],I=Wp(d.parent||i[Yi],d,i);if(null!=m)if(Array.isArray(o))for(let F=0;F<o.length;F++)zp(y,m,o[F],I,!1);else zp(y,m,o,I,!1);void 0!==pf&&pf(y,d,i,o,m)}function th(n,i){if(null!==i){const o=i.type;if(3&o)return Ts(i,n);if(4&o)return Zp(-1,n[i.index]);if(8&o){const d=i.child;if(null!==d)return th(n,d);{const m=n[i.index];return Er(m)?Zp(-1,m):ji(m)}}if(32&o)return af(i,n)()||ji(n[i.index]);{const d=qp(n,i);return null!==d?Array.isArray(d)?d[0]:th(ad(n[Mr]),d):th(n,i.next)}}return null}function qp(n,i){return null!==i?n[Mr][Yi].projection[i.projection]:null}function Zp(n,i){const o=ur+n+1;if(o<i.length){const d=i[o],m=d[Vt].firstChild;if(null!==m)return th(d,m)}return i[fl]}function Kp(n,i,o){const d=Qd(n,i);d&&function Fg(n,i,o,d){n.removeChild(i,o,d)}(n,d,i,o)}function Xp(n,i,o,d,m,y,D){for(;null!=o;){const I=d[o.index],F=o.type;if(D&&0===i&&(I&&Xs(ji(I),d),o.flags|=2),32!=(32&o.flags))if(8&F)Xp(n,i,o.child,d,m,y,!1),fu(i,n,m,I,y);else if(32&F){const z=af(o,d);let Q;for(;Q=z();)fu(i,n,m,Q,y);fu(i,n,m,I,y)}else 16&F?Bg(n,i,d,o,m,y):fu(i,n,m,I,y);o=D?o.projectionNext:o.next}}function nh(n,i,o,d,m,y){Xp(o,d,n.firstChild,i,m,y,!1)}function Bg(n,i,o,d,m,y){const D=o[Mr],F=D[Yi].projection[d.projection];if(Array.isArray(F))for(let z=0;z<F.length;z++)fu(i,n,m,F[z],y);else Xp(n,i,F,D[Ai],m,y,!0)}function Qp(n,i,o){""===o?n.removeAttribute(i,"class"):n.setAttribute(i,"class",o)}function ih(n,i,o){const{mergedAttrs:d,classes:m,styles:y}=o;null!==d&&nn(n,i,d),null!==m&&Qp(n,i,m),null!==y&&function Qs(n,i,o){n.setAttribute(i,"style",o)}(n,i,y)}function or(n){return function Or(){if(void 0===sc&&(sc=null,Bn.trustedTypes))try{sc=Bn.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return sc}()?.createHTML(n)||n}function mv(n){mf=n}function Gg(n){return function _f(){if(void 0===gf&&(gf=null,Bn.trustedTypes))try{gf=Bn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return gf}()?.createScriptURL(n)||n}class Vg{constructor(i){this.changingThisBreaksApplicationSecurity=i}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${an})`}}function Vo(n){return n instanceof Vg?n.changingThisBreaksApplicationSecurity:n}function ld(n,i){const o=function hi(n){return n instanceof Vg&&n.getTypeName()||null}(n);if(null!=o&&o!==i){if("ResourceURL"===o&&"URL"===i)return!0;throw new Error(`Required a safe ${i}, got a ${o} (see ${an})`)}return o===i}class yf{constructor(i){this.inertDocumentHelper=i}getInertBodyElement(i){i="<body><remove></remove>"+i;try{const o=(new window.DOMParser).parseFromString(or(i),"text/html").body;return null===o?this.inertDocumentHelper.getInertBodyElement(i):(o.removeChild(o.firstChild),o)}catch{return null}}}class Ug{constructor(i){this.defaultDoc=i,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(i){const o=this.inertDocument.createElement("template");return o.innerHTML=or(i),o}}const bf=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Dl(n){return(n=String(n)).match(bf)?n:"unsafe:"+n}function Ca(n){const i={};for(const o of n.split(","))i[o]=!0;return i}function da(...n){const i={};for(const o of n)for(const d in o)o.hasOwnProperty(d)&&(i[d]=!0);return i}const ah=Ca("area,br,col,hr,img,wbr"),Tf=Ca("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),nl=Ca("rp,rt"),ch=da(ah,da(Tf,Ca("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),da(nl,Ca("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),da(nl,Tf)),Mf=Ca("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),wl=da(Mf,Ca("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Ca("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"));var mr=(()=>((mr=mr||{})[mr.NONE=0]="NONE",mr[mr.HTML=1]="HTML",mr[mr.STYLE=2]="STYLE",mr[mr.SCRIPT=3]="SCRIPT",mr[mr.URL=4]="URL",mr[mr.RESOURCE_URL=5]="RESOURCE_URL",mr))();function qr(n){const i=il();return i?i.sanitize(mr.URL,n)||"":ld(n,"URL")?Vo(n):Dl(ke(n))}function ac(n){const i=il();if(i)return Gg(i.sanitize(mr.RESOURCE_URL,n)||"");if(ld(n,"ResourceURL"))return Gg(Vo(n));throw new Me(904,!1)}function ud(n,i,o){return function cd(n,i){return"src"===i&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===i&&("base"===n||"link"===n)?ac:qr}(i,o)(n)}function il(){const n=pt();return n&&n[kl]}const Zr=new Ui("ENVIRONMENT_INITIALIZER"),ss=new Ui("INJECTOR",-1),dd=new Ui("INJECTOR_DEF_TYPES");class um{get(i,o=An){if(o===An){const d=new Error(`NullInjectorError: No provider for ${rt(i)}!`);throw d.name="NullInjectorError",d}return o}}function hh(...n){return{\u0275providers:dm(0,n),\u0275fromNgModule:!0}}function dm(n,...i){const o=[],d=new Set;let m;return ua(i,y=>{const D=y;Rf(D,o,[],d)&&(m||(m=[]),m.push(D))}),void 0!==m&&hd(m,o),o}function hd(n,i){for(let o=0;o<n.length;o++){const{providers:m}=n[o];Rl(m,y=>{i.push(y)})}}function Rf(n,i,o,d){if(!(n=lt(n)))return!1;let m=null,y=lo(n);const D=!y&&pi(n);if(y||D){if(D&&!D.standalone)return!1;m=n}else{const F=n.ngModule;if(y=lo(F),!y)return!1;m=F}const I=d.has(m);if(D){if(I)return!1;if(d.add(m),D.dependencies){const F="function"==typeof D.dependencies?D.dependencies():D.dependencies;for(const z of F)Rf(z,i,o,d)}}else{if(!y)return!1;{if(null!=y.imports&&!I){let z;d.add(m);try{ua(y.imports,Q=>{Rf(Q,i,o,d)&&(z||(z=[]),z.push(Q))})}finally{}void 0!==z&&hd(z,i)}if(!I){const z=$r(m)||(()=>new m);i.push({provide:m,useFactory:z,deps:Fe},{provide:dd,useValue:m,multi:!0},{provide:Zr,useValue:()=>$i(m),multi:!0})}const F=y.providers;null==F||I||Rl(F,Q=>{i.push(Q)})}}return m!==n&&void 0!==n.providers}function Rl(n,i){for(let o of n)Qt(o)&&(o=o.\u0275providers),Array.isArray(o)?Rl(o,i):i(o)}const Zg=Ue({provide:String,useValue:Ue});function fd(n){return null!==n&&"object"==typeof n&&Zg in n}function jc(n){return"function"==typeof n}const _i=new Ui("Set Injector scope."),fh={},Sf={};let Cf;function vu(){return void 0===Cf&&(Cf=new um),Cf}class kc{}class Ef extends kc{get destroyed(){return this._destroyed}constructor(i,o,d,m){super(),this.parent=o,this.source=d,this.scopes=m,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,gh(i,D=>this.processProvider(D)),this.records.set(ss,yu(void 0,this)),m.has("environment")&&this.records.set(kc,yu(void 0,this));const y=this.records.get(_i);null!=y&&"string"==typeof y.value&&this.scopes.add(y.value),this.injectorDefTypes=new Set(this.get(dd.multi,Fe,bn.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const i of this._ngOnDestroyHooks)i.ngOnDestroy();for(const i of this._onDestroyHooks)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(i){this._onDestroyHooks.push(i)}runInContext(i){this.assertNotDestroyed();const o=Ws(this),d=tn(void 0);try{return i()}finally{Ws(o),tn(d)}}get(i,o=An,d=bn.Default){this.assertNotDestroyed(),d=$s(d);const m=Ws(this),y=tn(void 0);try{if(!(d&bn.SkipSelf)){let I=this.records.get(i);if(void 0===I){const F=function pm(n){return"function"==typeof n||"object"==typeof n&&n instanceof Ui}(i)&&Ur(i);I=F&&this.injectableDefInScope(F)?yu(pd(i),fh):null,this.records.set(i,I)}if(null!=I)return this.hydrate(i,I)}return(d&bn.Self?vu():this.parent).get(i,o=d&bn.Optional&&o===An?null:o)}catch(D){if("NullInjectorError"===D.name){if((D[Yo]=D[Yo]||[]).unshift(rt(i)),m)throw D;return function hl(n,i,o,d){const m=n[Yo];throw i[Hs]&&m.unshift(i[Hs]),n.message=function Bl(n,i,o,d=null){n=n&&"\n"===n.charAt(0)&&n.charAt(1)==Do?n.slice(2):n;let m=rt(i);if(Array.isArray(i))m=i.map(rt).join(" -> ");else if("object"==typeof i){let y=[];for(let D in i)if(i.hasOwnProperty(D)){let I=i[D];y.push(D+":"+("string"==typeof I?JSON.stringify(I):rt(I)))}m=`{${y.join(", ")}}`}return`${o}${d?"("+d+")":""}[${m}]: ${n.replace(xo,"\n  ")}`}("\n"+n.message,m,o,d),n[fi]=m,n[Yo]=null,n}(D,i,"R3InjectorError",this.source)}throw D}finally{tn(y),Ws(m)}}resolveInjectorInitializers(){const i=Ws(this),o=tn(void 0);try{const d=this.get(Zr.multi,Fe,bn.Self);for(const m of d)m()}finally{Ws(i),tn(o)}}toString(){const i=[],o=this.records;for(const d of o.keys())i.push(rt(d));return`R3Injector[${i.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Me(205,!1)}processProvider(i){let o=jc(i=lt(i))?i:lt(i&&i.provide);const d=function mh(n){return fd(n)?yu(void 0,n.useValue):yu(Af(n),fh)}(i);if(jc(i)||!0!==i.multi)this.records.get(o);else{let m=this.records.get(o);m||(m=yu(void 0,fh,!0),m.factory=()=>Jo(m.multi),this.records.set(o,m)),o=i,m.multi.push(i)}this.records.set(o,d)}hydrate(i,o){return o.value===fh&&(o.value=Sf,o.value=o.factory()),"object"==typeof o.value&&o.value&&function fm(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(o.value)&&this._ngOnDestroyHooks.add(o.value),o.value}injectableDefInScope(i){if(!i.providedIn)return!1;const o=lt(i.providedIn);return"string"==typeof o?"any"===o||this.scopes.has(o):this.injectorDefTypes.has(o)}}function pd(n){const i=Ur(n),o=null!==i?i.factory:$r(n);if(null!==o)return o;if(n instanceof Ui)throw new Me(204,!1);if(n instanceof Function)return function ph(n){const i=n.length;if(i>0)throw M(i,"?"),new Me(204,!1);const o=function Ia(n){const i=n&&(n[$o]||n[Cr]);return i?(function Sr(n){if(n.hasOwnProperty("name"))return n.name;(""+n).match(/^function\s*([^\s(]+)/)}(n),i):null}(n);return null!==o?()=>o.factory(n):()=>new n}(n);throw new Me(204,!1)}function Af(n,i,o){let d;if(jc(n)){const m=lt(n);return $r(m)||pd(m)}if(fd(n))d=()=>lt(n.useValue);else if(function hm(n){return!(!n||!n.useFactory)}(n))d=()=>n.useFactory(...Jo(n.deps||[]));else if(function Bc(n){return!(!n||!n.useExisting)}(n))d=()=>$i(lt(n.useExisting));else{const m=lt(n&&(n.useClass||n.provide));if(!function Xg(n){return!!n.deps}(n))return $r(m)||pd(m);d=()=>new m(...Jo(n.deps))}return d}function yu(n,i,o=!1){return{factory:n,value:i,multi:o?[]:void 0}}function gh(n,i){for(const o of n)Array.isArray(o)?gh(o,i):o&&Qt(o)?gh(o.\u0275providers,i):i(o)}class mm{}class gm{}class e_{resolveComponentFactory(i){throw function Qg(n){const i=Error(`No component factory found for ${rt(n)}. Did you add it to @NgModule.entryComponents?`);return i.ngComponent=n,i}(i)}}let md=(()=>{class n{}return n.NULL=new e_,n})();function t_(){return bu(Gi(),pt())}function bu(n,i){return new gd(Ts(n,i))}let gd=(()=>{class n{constructor(o){this.nativeElement=o}}return n.__NG_ELEMENT_ID__=t_,n})();function n_(n){return n instanceof gd?n.nativeElement:n}class If{}let vm=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function _h(){const n=pt(),o=Br(Gi().index,n);return(xr(o)?o:n)[jn]}(),n})(),Pf=(()=>{class n{}return n.\u0275prov=wn({token:n,providedIn:"root",factory:()=>null}),n})();class Of{constructor(i){this.full=i,this.major=i.split(".")[0],this.minor=i.split(".")[1],this.patch=i.split(".").slice(2).join(".")}}const vh=new Of("15.2.7"),_d={},Nf="ngOriginalError";function ym(n){return n[Nf]}class vd{constructor(){this._console=console}handleError(i){const o=this._findOriginalError(i);this._console.error("ERROR",i),o&&this._console.error("ORIGINAL ERROR",o)}_findOriginalError(i){let o=i&&ym(i);for(;o&&ym(o);)o=ym(o);return o||null}}function lc(n){return n instanceof Function?n():n}function o_(n,i,o){let d=n.length;for(;;){const m=n.indexOf(i,o);if(-1===m)return m;if(0===m||n.charCodeAt(m-1)<=32){const y=i.length;if(m+y===d||n.charCodeAt(m+y)<=32)return m}o=m+1}}const a_="ng-template";function Av(n,i,o){let d=0,m=!0;for(;d<n.length;){let y=n[d++];if("string"==typeof y&&m){const D=n[d++];if(o&&"class"===y&&-1!==o_(D.toLowerCase(),i,0))return!0}else{if(1===y){for(;d<n.length&&"string"==typeof(y=n[d++]);)if(y.toLowerCase()===i)return!0;return!1}"number"==typeof y&&(m=!1)}}return!1}function Ff(n){return 4===n.type&&n.value!==a_}function Iv(n,i,o){return i===(4!==n.type||o?n.value:a_)}function Ea(n,i,o){let d=4;const m=n.attrs||[],y=function l_(n){for(let i=0;i<n.length;i++)if(ii(n[i]))return i;return n.length}(m);let D=!1;for(let I=0;I<i.length;I++){const F=i[I];if("number"!=typeof F){if(!D)if(4&d){if(d=2|1&d,""!==F&&!Iv(n,F,o)||""===F&&1===i.length){if(Pi(d))return!1;D=!0}}else{const z=8&d?F:i[++I];if(8&d&&null!==n.attrs){if(!Av(n.attrs,z,o)){if(Pi(d))return!1;D=!0}continue}const oe=Lf(8&d?"class":F,m,Ff(n),o);if(-1===oe){if(Pi(d))return!1;D=!0;continue}if(""!==z){let ye;ye=oe>y?"":m[oe+1].toLowerCase();const Ce=8&d?ye:null;if(Ce&&-1!==o_(Ce,z,0)||2&d&&z!==ye){if(Pi(d))return!1;D=!0}}}}else{if(!D&&!Pi(d)&&!Pi(F))return!1;if(D&&Pi(F))continue;D=!1,d=F|1&d}}return Pi(d)||D}function Pi(n){return 0==(1&n)}function Lf(n,i,o,d){if(null===i)return-1;let m=0;if(d||!o){let y=!1;for(;m<i.length;){const D=i[m];if(D===n)return m;if(3===D||6===D)y=!0;else{if(1===D||2===D){let I=i[++m];for(;"string"==typeof I;)I=i[++m];continue}if(4===D)break;if(0===D){m+=4;continue}}m+=y?1:2}return-1}return function c_(n,i){let o=n.indexOf(4);if(o>-1)for(o++;o<n.length;){const d=n[o];if("number"==typeof d)return-1;if(d===i)return o;o++}return-1}(i,n)}function Bf(n,i,o=!1){for(let d=0;d<i.length;d++)if(Ea(n,i[d],o))return!0;return!1}function bh(n,i){e:for(let o=0;o<i.length;o++){const d=i[o];if(n.length===d.length){for(let m=0;m<n.length;m++)if(n[m]!==d[m])continue e;return!0}}return!1}function Tm(n,i){return n?":not("+i.trim()+")":i}function yd(n){let i=n[0],o=1,d=2,m="",y=!1;for(;o<n.length;){let D=n[o];if("string"==typeof D)if(2&d){const I=n[++o];m+="["+D+(I.length>0?'="'+I+'"':"")+"]"}else 8&d?m+="."+D:4&d&&(m+=" "+D);else""!==m&&!Pi(D)&&(i+=Tm(y,m),m=""),d=D,y=y||!Pi(d);o++}return""!==m&&(i+=Tm(y,m)),i}const Xn={};function xm(n){Dm(Rn(),pt(),Rr()+n,!1)}function Dm(n,i,o,d){if(!d)if(3==(3&i[On])){const y=n.preOrderCheckHooks;null!==y&&X(i,y,o)}else{const y=n.preOrderHooks;null!==y&&ue(i,y,0,o)}Ds(o)}function d_(n,i=null,o=null,d){const m=h_(n,i,o,d);return m.resolveInjectorInitializers(),m}function h_(n,i=null,o=null,d,m=new Set){const y=[o||Fe,hh(n)];return d=d||("object"==typeof n?void 0:rt(n)),new Ef(y,i||vu(),d||null,m)}let rl=(()=>{class n{static create(o,d){if(Array.isArray(o))return d_({name:""},d,o,"");{const m=o.name??"";return d_({name:m},o.parent,o.providers,m)}}}return n.THROW_IF_NOT_FOUND=An,n.NULL=new um,n.\u0275prov=wn({token:n,providedIn:"any",factory:()=>$i(ss)}),n.__NG_ELEMENT_ID__=-1,n})();function Al(n,i=bn.Default){const o=pt();return null===o?$i(n,i):ec(Gi(),o,lt(n),i)}function Hf(){throw new Error("invalid")}function Sh(n,i){const o=n.contentQueries;if(null!==o)for(let d=0;d<o.length;d+=2){const y=o[d+1];if(-1!==y){const D=n.data[y];Ma(o[d]),D.contentQueries(2,i[y],y)}}}function Ch(n,i,o,d,m,y,D,I,F,z,Q){const oe=i.blueprint.slice();return oe[qs]=m,oe[On]=76|d,(null!==Q||n&&1024&n[On])&&(oe[On]|=1024),ki(oe),oe[Ai]=oe[fo]=n,oe[Oi]=o,oe[ho]=D||n&&n[ho],oe[jn]=I||n&&n[jn],oe[kl]=F||n&&n[kl]||null,oe[So]=z||n&&n[So]||null,oe[Yi]=y,oe[Ko]=function mg(){return pg++}(),oe[bs]=Q,oe[Mr]=2==i.type?n[Mr]:oe,oe}function hc(n,i,o,d,m){let y=n.data[i];if(null===y)y=Wf(n,i,o,d,m),function Ic(){return Oe.lFrame.inI18n}()&&(y.flags|=32);else if(64&y.type){y.type=o,y.value=d,y.attrs=m;const D=go();y.injectorIndex=null===D?-1:D.injectorIndex}return Ms(y,!0),y}function Wf(n,i,o,d,m){const y=vl(),D=Xt(),F=n.data[i]=function bo(n,i,o,d,m,y){return{type:o,index:d,insertBeforeIndex:null,injectorIndex:i?i.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:m,attrs:y,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:i,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,D?y:y&&y.parent,o,i,d,m);return null===n.firstChild&&(n.firstChild=F),null!==y&&(D?null==y.child&&null!==F.parent&&(y.child=F):null===y.next&&(y.next=F,F.prev=y)),F}function ol(n,i,o,d){if(0===o)return-1;const m=i.length;for(let y=0;y<o;y++)i.push(d),n.blueprint.push(d),n.data.push(null);return m}function ha(n,i,o){xs(i);try{const d=n.viewQuery;null!==d&&Bh(1,d,o);const m=n.template;null!==m&&Em(n,i,m,1,o),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&Sh(n,i),n.staticViewQueries&&Bh(2,n.viewQuery,o);const y=n.components;null!==y&&function zf(n,i){for(let o=0;o<i.length;o++)Nm(n,i[o])}(i,y)}catch(d){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),d}finally{i[On]&=-5,_o()}}function fc(n,i,o,d){const m=i[On];if(128!=(128&m)){xs(i);try{ki(i),function Ii(n){return Oe.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==o&&Em(n,i,o,2,d);const D=3==(3&m);if(D){const z=n.preOrderCheckHooks;null!==z&&X(i,z,null)}else{const z=n.preOrderHooks;null!==z&&ue(i,z,0,null),Pe(i,0)}if(function Kf(n){for(let i=lf(n);null!==i;i=cf(i)){if(!i[ro])continue;const o=i[Wr];for(let d=0;d<o.length;d++){const m=o[d];512&m[On]||ba(m[Ai],1),m[On]|=512}}}(i),function Nh(n){for(let i=lf(n);null!==i;i=cf(i))for(let o=ur;o<i.length;o++){const d=i[o],m=d[Vt];Ps(d)&&fc(m,d,m.template,d[Oi])}}(i),null!==n.contentQueries&&Sh(n,i),D){const z=n.contentCheckHooks;null!==z&&X(i,z)}else{const z=n.contentHooks;null!==z&&ue(i,z,1),Pe(i,1)}!function v_(n,i){const o=n.hostBindingOpCodes;if(null!==o)try{for(let d=0;d<o.length;d++){const m=o[d];if(m<0)Ds(~m);else{const y=m,D=o[++d],I=o[++d];Ha(D,y),I(2,i[y])}}}finally{Ds(-1)}}(n,i);const I=n.components;null!==I&&function Cm(n,i){for(let o=0;o<i.length;o++)Xf(n,i[o])}(i,I);const F=n.viewQuery;if(null!==F&&Bh(2,F,d),D){const z=n.viewCheckHooks;null!==z&&X(i,z)}else{const z=n.viewHooks;null!==z&&ue(i,z,2),Pe(i,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),i[On]&=-41,512&i[On]&&(i[On]&=-513,ba(i[Ai],-1))}finally{_o()}}}function Em(n,i,o,d,m){const y=Rr(),D=2&d;try{Ds(-1),D&&i.length>Dn&&Dm(n,i,Dn,!1),hs(D?2:0,m),o(d,m)}finally{Ds(y),hs(D?3:1,m)}}function xd(n,i,o){if(ga(i)){const m=i.directiveEnd;for(let y=i.directiveStart;y<m;y++){const D=n.data[y];D.contentQueries&&D.contentQueries(1,o[y],y)}}}function Uc(n,i,o){Ta()&&(function Jf(n,i,o,d){const m=o.directiveStart,y=o.directiveEnd;La(o)&&function Bv(n,i,o){const d=Ts(i,n),m=Dd(o),y=n[ho],D=wd(n,Ch(n,m,null,o.onPush?32:16,d,i,y,y.createRenderer(d,o),null,null,null));n[i.index]=D}(i,o,n.data[m+o.componentOffset]),n.firstCreatePass||Jr(o,i),Xs(d,i);const D=o.initialInputs;for(let I=m;I<y;I++){const F=n.data[I],z=ao(i,n,I,o);Xs(z,i),null!==D&&T_(0,I-m,z,F,0,D),ns(F)&&(Br(o.index,i)[Oi]=ao(i,n,I,o))}}(n,i,o,Ts(o,i)),64==(64&o.flags)&&Su(n,i,o))}function Eh(n,i,o=Ts){const d=i.localNames;if(null!==d){let m=i.index+1;for(let y=0;y<d.length;y+=2){const D=d[y+1],I=-1===D?o(i,n):n[D];n[m++]=I}}}function Dd(n){const i=n.tView;return null===i||i.incompleteFirstPass?n.tView=Hc(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):i}function Hc(n,i,o,d,m,y,D,I,F,z){const Q=Dn+d,oe=Q+m,ye=function Nv(n,i){const o=[];for(let d=0;d<i;d++)o.push(d<n?null:Xn);return o}(Q,oe),Ce="function"==typeof z?z():z;return ye[Vt]={type:n,blueprint:ye,template:o,queries:null,viewQuery:I,declTNode:i,data:ye.slice().fill(null,Q),bindingStartIndex:Q,expandoStartIndex:oe,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof y?y():y,pipeRegistry:"function"==typeof D?D():D,firstChild:null,schemas:F,consts:Ce,incompleteFirstPass:!1}}function Am(n,i,o,d){const m=Fm(i);null===o?m.push(d):(m.push(o),n.firstCreatePass&&Au(n).push(d,m.length-1))}function Ah(n,i,o,d){for(let m in n)if(n.hasOwnProperty(m)){o=null===o?{}:o;const y=n[m];null===d?Ih(o,i,m,y):d.hasOwnProperty(m)&&Ih(o,i,d[m],y)}return o}function Ih(n,i,o,d){n.hasOwnProperty(o)?n[o].push(i,d):n[o]=[i,d]}function Bs(n,i,o,d,m,y,D,I){const F=Ts(i,o);let Q,z=i.inputs;!I&&null!=z&&(Q=z[d])?(Iu(n,o,Q,d,m),La(i)&&function zc(n,i){const o=Br(i,n);16&o[On]||(o[On]|=32)}(o,i.index)):3&i.type&&(d=function Ph(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(d),m=null!=D?D(m,i.value||"",d):m,y.setProperty(F,d,m))}function Wc(n,i,o,d){if(Ta()){const m=null===d?null:{"":-1},y=function y_(n,i){const o=n.directiveRegistry;let d=null,m=null;if(o)for(let y=0;y<o.length;y++){const D=o[y];if(Bf(i,D.selectors,!1))if(d||(d=[]),ns(D))if(null!==D.findHostDirectiveDefs){const I=[];m=m||new Map,D.findHostDirectiveDefs(D,I,m),d.unshift(...I,D),qf(n,i,I.length)}else d.unshift(D),qf(n,i,0);else m=m||new Map,D.findHostDirectiveDefs?.(D,d,m),d.push(D)}return null===d?null:[d,m]}(n,o);let D,I;null===y?D=I=null:[D,I]=y,null!==D&&Im(n,i,o,D,m,I),m&&function Py(n,i,o){if(i){const d=n.localNames=[];for(let m=0;m<i.length;m+=2){const y=o[i[m+1]];if(null==y)throw new Me(-301,!1);d.push(i[m],y)}}}(o,d,m)}o.mergedAttrs=hr(o.mergedAttrs,o.attrs)}function Im(n,i,o,d,m,y){for(let z=0;z<d.length;z++)fr(Jr(o,i),n,d[z].type);!function Lv(n,i,o){n.flags|=1,n.directiveStart=i,n.directiveEnd=i+o,n.providerIndexes=i}(o,n.data.length,d.length);for(let z=0;z<d.length;z++){const Q=d[z];Q.providersResolver&&Q.providersResolver(Q)}let D=!1,I=!1,F=ol(n,i,d.length,null);for(let z=0;z<d.length;z++){const Q=d[z];o.mergedAttrs=hr(o.mergedAttrs,Q.hostAttrs),b_(n,o,i,F,Q),Oy(F,Q,m),null!==Q.contentQueries&&(o.flags|=4),(null!==Q.hostBindings||null!==Q.hostAttrs||0!==Q.hostVars)&&(o.flags|=64);const oe=Q.type.prototype;!D&&(oe.ngOnChanges||oe.ngOnInit||oe.ngDoCheck)&&((n.preOrderHooks??(n.preOrderHooks=[])).push(o.index),D=!0),!I&&(oe.ngOnChanges||oe.ngDoCheck)&&((n.preOrderCheckHooks??(n.preOrderCheckHooks=[])).push(o.index),I=!0),F++}!function $f(n,i,o){const m=i.directiveEnd,y=n.data,D=i.attrs,I=[];let F=null,z=null;for(let Q=i.directiveStart;Q<m;Q++){const oe=y[Q],ye=o?o.get(oe):null,it=ye?ye.outputs:null;F=Ah(oe.inputs,Q,F,ye?ye.inputs:null),z=Ah(oe.outputs,Q,z,it);const Rt=null===F||null===D||Ff(i)?null:Zf(F,Q,D);I.push(Rt)}null!==F&&(F.hasOwnProperty("class")&&(i.flags|=8),F.hasOwnProperty("style")&&(i.flags|=16)),i.initialInputs=I,i.inputs=F,i.outputs=z}(n,o,y)}function Su(n,i,o){const d=o.directiveStart,m=o.directiveEnd,y=o.index,D=function $d(){return Oe.lFrame.currentDirectiveIndex}();try{Ds(y);for(let I=d;I<m;I++){const F=n.data[I],z=i[I];wr(I),(null!==F.hostBindings||0!==F.hostVars||null!==F.hostAttrs)&&Oh(F,z)}}finally{Ds(-1),wr(D)}}function Oh(n,i){null!==n.hostBindings&&n.hostBindings(1,i)}function qf(n,i,o){i.componentOffset=o,(n.components??(n.components=[])).push(i.index)}function Oy(n,i,o){if(o){if(i.exportAs)for(let d=0;d<i.exportAs.length;d++)o[i.exportAs[d]]=n;ns(i)&&(o[""]=n)}}function b_(n,i,o,d,m){n.data[d]=m;const y=m.factory||(m.factory=$r(m.type)),D=new $n(y,ns(m),Al);n.blueprint[d]=D,o[d]=D,function Pm(n,i,o,d,m){const y=m.hostBindings;if(y){let D=n.hostBindingOpCodes;null===D&&(D=n.hostBindingOpCodes=[]);const I=~i.index;(function Om(n){let i=n.length;for(;i>0;){const o=n[--i];if("number"==typeof o&&o<0)return o}return 0})(D)!=I&&D.push(I),D.push(o,d,y)}}(n,i,d,ol(n,o,m.hostVars,Xn),m)}function Cu(n,i,o,d,m,y,D){if(null==y)n.removeAttribute(i,m,o);else{const I=null==D?ke(y):D(y,d||"",m);n.setAttribute(i,m,I,o)}}function T_(n,i,o,d,m,y){const D=y[i];if(null!==D){const I=d.setInput;for(let F=0;F<D.length;){const z=D[F++],Q=D[F++],oe=D[F++];null!==I?d.setInput(o,oe,z,Q):o[Q]=oe}}}function Zf(n,i,o){let d=null,m=0;for(;m<o.length;){const y=o[m];if(0!==y)if(5!==y){if("number"==typeof y)break;if(n.hasOwnProperty(y)){null===d&&(d=[]);const D=n[y];for(let I=0;I<D.length;I+=2)if(D[I]===i){d.push(y,D[I+1],o[m+1]);break}}m+=2}else m+=2;else m+=4}return d}function Eu(n,i,o,d){return[n,!0,!1,i,null,0,d,o,null,null]}function Xf(n,i){const o=Br(i,n);if(Ps(o)){const d=o[Vt];48&o[On]?fc(d,o,d.template,o[Oi]):o[ys]>0&&Fh(o)}}function Fh(n){for(let d=lf(n);null!==d;d=cf(d))for(let m=ur;m<d.length;m++){const y=d[m];if(Ps(y))if(512&y[On]){const D=y[Vt];fc(D,y,D.template,y[Oi])}else y[ys]>0&&Fh(y)}const o=n[Vt].components;if(null!==o)for(let d=0;d<o.length;d++){const m=Br(o[d],n);Ps(m)&&m[ys]>0&&Fh(m)}}function Nm(n,i){const o=Br(i,n),d=o[Vt];(function M_(n,i){for(let o=i.length;o<n.blueprint.length;o++)i.push(n.blueprint[o])})(d,o),ha(d,o,o[Oi])}function wd(n,i){return n[Zs]?n[Co][ts]=i:n[Zs]=i,n[Co]=i,i}function Lh(n){for(;n;){n[On]|=32;const i=ad(n);if(Qo(n)&&!i)return n;n=i}return null}function pc(n,i,o,d=!0){const m=i[ho];m.begin&&m.begin();try{fc(n,i,n.template,o)}catch(D){throw d&&Lm(i,D),D}finally{m.end&&m.end()}}function Bh(n,i,o){Ma(0),i(n,o)}function Fm(n){return n[Ro]||(n[Ro]=[])}function Au(n){return n.cleanup||(n.cleanup=[])}function Lm(n,i){const o=n[So],d=o?o.get(vd,null):null;d&&d.handleError(i)}function Iu(n,i,o,d,m){for(let y=0;y<o.length;){const D=o[y++],I=o[y++],F=i[D],z=n.data[D];null!==z.setInput?z.setInput(F,m,d,I):F[I]=m}}function jh(n,i,o){let d=o?n.styles:null,m=o?n.classes:null,y=0;if(null!==i)for(let D=0;D<i.length;D++){const I=i[D];"number"==typeof I?y=I:1==y?m=Gt(m,I):2==y&&(d=Gt(d,I+": "+i[++D]+";"))}o?n.styles=d:n.stylesWithoutHost=d,o?n.classes=m:n.classesWithoutHost=m}function kh(n,i,o,d,m=!1){for(;null!==o;){const y=i[o.index];if(null!==y&&d.push(ji(y)),Er(y))for(let I=ur;I<y.length;I++){const F=y[I],z=F[Vt].firstChild;null!==z&&kh(F[Vt],F,z,d)}const D=o.type;if(8&D)kh(n,i,o.child,d);else if(32&D){const I=af(o,i);let F;for(;F=I();)d.push(F)}else if(16&D){const I=qp(i,o);if(Array.isArray(I))d.push(...I);else{const F=ad(i[Mr]);kh(F[Vt],F,I,d,!0)}}o=m?o.projectionNext:o.next}return d}class Rd{get rootNodes(){const i=this._lView,o=i[Vt];return kh(o,i,o.firstChild,[])}constructor(i,o){this._lView=i,this._cdRefInjectingView=o,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Oi]}set context(i){this._lView[Oi]=i}get destroyed(){return 128==(128&this._lView[On])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const i=this._lView[Ai];if(Er(i)){const o=i[Xo],d=o?o.indexOf(this):-1;d>-1&&(hf(i,d),R(o,d))}this._attachedToViewContainer=!1}Gp(this._lView[Vt],this._lView)}onDestroy(i){Am(this._lView[Vt],this._lView,null,i)}markForCheck(){Lh(this._cdRefInjectingView||this._lView)}detach(){this._lView[On]&=-65}reattach(){this._lView[On]|=64}detectChanges(){pc(this._lView[Vt],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Me(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Ag(n,i){nh(n,i,i[jn],2,null,null)}(this._lView[Vt],this._lView)}attachToAppRef(i){if(this._attachedToViewContainer)throw new Me(902,!1);this._appRef=i}}class Gh extends Rd{constructor(i){super(i),this._view=i}detectChanges(){const i=this._view;pc(i[Vt],i,i[Oi],!1)}checkNoChanges(){}get context(){return null}}class Bm extends md{constructor(i){super(),this.ngModule=i}resolveComponentFactory(i){const o=pi(i);return new $c(o,this.ngModule)}}function Vh(n){const i=[];for(let o in n)n.hasOwnProperty(o)&&i.push({propName:n[o],templateName:o});return i}class jm{constructor(i,o){this.injector=i,this.parentInjector=o}get(i,o,d){d=$s(d);const m=this.injector.get(i,_d,d);return m!==_d||o===_d?m:this.parentInjector.get(i,o,d)}}class $c extends gm{get inputs(){return Vh(this.componentDef.inputs)}get outputs(){return Vh(this.componentDef.outputs)}constructor(i,o){super(),this.componentDef=i,this.ngModule=o,this.componentType=i.type,this.selector=function Th(n){return n.map(yd).join(",")}(i.selectors),this.ngContentSelectors=i.ngContentSelectors?i.ngContentSelectors:[],this.isBoundToModule=!!o}create(i,o,d,m){let y=(m=m||this.ngModule)instanceof kc?m:m?.injector;y&&null!==this.componentDef.getStandaloneInjector&&(y=this.componentDef.getStandaloneInjector(y)||y);const D=y?new jm(i,y):i,I=D.get(If,null);if(null===I)throw new Me(407,!1);const F=D.get(Pf,null),z=I.createRenderer(null,this.componentDef),Q=this.componentDef.selectors[0][0]||"div",oe=d?function Ru(n,i,o){return n.selectRootElement(i,o===ae.ShadowDom)}(z,d,this.componentDef.encapsulation):df(z,Q,function ep(n){const i=n.toLowerCase();return"svg"===i?"svg":"math"===i?"math":null}(Q)),ye=this.componentDef.onPush?288:272,Ce=Hc(0,null,null,1,0,null,null,null,null,null),it=Ch(null,Ce,null,ye,null,null,I,z,F,D,null);let Rt,$t;xs(it);try{const hn=this.componentDef;let Nn,Mt=null;hn.findHostDirectiveDefs?(Nn=[],Mt=new Map,hn.findHostDirectiveDefs(hn,Nn,Mt),Nn.push(hn)):Nn=[hn];const ci=function Pu(n,i){const o=n[Vt],d=Dn;return n[d]=i,hc(o,d,2,"#host",null)}(it,oe),cs=function km(n,i,o,d,m,y,D,I){const F=m[Vt];!function Sd(n,i,o,d){for(const m of n)i.mergedAttrs=hr(i.mergedAttrs,m.hostAttrs);null!==i.mergedAttrs&&(jh(i,i.mergedAttrs,!0),null!==o&&ih(d,o,i))}(d,n,i,D);const z=y.createRenderer(i,o),Q=Ch(m,Dd(o),null,o.onPush?32:16,m[n.index],n,y,z,I||null,null,null);return F.firstCreatePass&&qf(F,n,d.length-1),wd(m,Q),m[n.index]=Q}(ci,oe,hn,Nn,it,I,z);$t=Zl(Ce,Dn),oe&&function Gm(n,i,o,d){if(d)nn(n,o,["ng-version",vh.full]);else{const{attrs:m,classes:y}=function Mm(n){const i=[],o=[];let d=1,m=2;for(;d<n.length;){let y=n[d];if("string"==typeof y)2===m?""!==y&&i.push(y,n[++d]):8===m&&o.push(y);else{if(!Pi(m))break;m=y}d++}return{attrs:i,classes:o}}(i.selectors[0]);m&&nn(n,o,m),y&&y.length>0&&Qp(n,o,y.join(" "))}}(z,hn,oe,d),void 0!==o&&function np(n,i,o){const d=n.projection=[];for(let m=0;m<i.length;m++){const y=o[m];d.push(null!=y?Array.from(y):null)}}($t,this.ngContentSelectors,o),Rt=function tp(n,i,o,d,m,y){const D=Gi(),I=m[Vt],F=Ts(D,m);Im(I,m,D,o,null,d);for(let Q=0;Q<o.length;Q++)Xs(ao(m,I,D.directiveStart+Q,D),m);Su(I,m,D),F&&Xs(F,m);const z=ao(m,I,D.directiveStart+D.componentOffset,D);if(n[Oi]=m[Oi]=z,null!==y)for(const Q of y)Q(z,i);return xd(I,D,n),z}(cs,hn,Nn,Mt,it,[Gv]),ha(Ce,it,null)}finally{_o()}return new Uh(this.componentType,Rt,bu($t,it),it,$t)}}class Uh extends mm{constructor(i,o,d,m,y){super(),this.location=d,this._rootLView=m,this._tNode=y,this.instance=o,this.hostView=this.changeDetectorRef=new Gh(m),this.componentType=i}setInput(i,o){const d=this._tNode.inputs;let m;if(null!==d&&(m=d[i])){const y=this._rootLView;Iu(y[Vt],y,m,i,o),Lh(Br(this._tNode.index,y))}}get injector(){return new ws(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(i){this.hostView.onDestroy(i)}}function Gv(){const n=Gi();B(pt()[Vt],n)}function Vm(n){let i=function Ou(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),o=!0;const d=[n];for(;i;){let m;if(ns(n))m=i.\u0275cmp||i.\u0275dir;else{if(i.\u0275cmp)throw new Me(903,!1);m=i.\u0275dir}if(m){if(o){d.push(m);const D=n;D.inputs=gc(n.inputs),D.declaredInputs=gc(n.declaredInputs),D.outputs=gc(n.outputs);const I=m.hostBindings;I&&Um(n,I);const F=m.viewQuery,z=m.contentQueries;if(F&&Nu(n,F),z&&w_(n,z),He(n.inputs,m.inputs),He(n.declaredInputs,m.declaredInputs),He(n.outputs,m.outputs),ns(m)&&m.data.animation){const Q=n.data;Q.animation=(Q.animation||[]).concat(m.data.animation)}}const y=m.features;if(y)for(let D=0;D<y.length;D++){const I=y[D];I&&I.ngInherit&&I(n),I===Vm&&(o=!1)}}i=Object.getPrototypeOf(i)}!function D_(n){let i=0,o=null;for(let d=n.length-1;d>=0;d--){const m=n[d];m.hostVars=i+=m.hostVars,m.hostAttrs=hr(m.hostAttrs,o=hr(o,m.hostAttrs))}}(d)}function gc(n){return n===Re?{}:n===Fe?[]:n}function Nu(n,i){const o=n.viewQuery;n.viewQuery=o?(d,m)=>{i(d,m),o(d,m)}:i}function w_(n,i){const o=n.contentQueries;n.contentQueries=o?(d,m,y)=>{i(d,m,y),o(d,m,y)}:i}function Um(n,i){const o=n.hostBindings;n.hostBindings=o?(d,m)=>{i(d,m),o(d,m)}:i}function r(n){return i=>{i.findHostDirectiveDefs=p,i.hostDirectives=(Array.isArray(n)?n:n()).map(o=>"function"==typeof o?{directive:lt(o),inputs:Re,outputs:Re}:{directive:lt(o.directive),inputs:T(o.inputs),outputs:T(o.outputs)})}}function p(n,i,o){if(null!==n.hostDirectives)for(const d of n.hostDirectives){const m=ir(d.directive);N(m.declaredInputs,d.inputs),p(m,i,o),o.set(m,d),i.push(m)}}function T(n){if(void 0===n||0===n.length)return Re;const i={};for(let o=0;o<n.length;o+=2)i[n[o]]=n[o+1];return i}function N(n,i){for(const o in i)i.hasOwnProperty(o)&&(n[i[o]]=n[o])}function De(n){return!!ct(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function ct(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Vn(n,i,o){return n[i]=o}function Mn(n,i,o){return!Object.is(n[i],o)&&(n[i]=o,!0)}function ri(n,i,o,d){const m=Mn(n,i,o);return Mn(n,i+1,d)||m}function vi(n,i,o,d){const m=pt();return Mn(m,rs(),i)&&(Rn(),function _s(n,i,o,d,m,y){const D=Ts(n,i);Cu(i[jn],D,y,n.value,o,d,m)}(Vi(),m,n,i,o,d)),vi}function si(n,i,o,d){return Mn(n,rs(),o)?i+ke(o)+d:Xn}function Il(n,i,o,d,m,y,D,I){const F=pt(),z=Rn(),Q=n+Dn,oe=z.firstCreatePass?function Tc(n,i,o,d,m,y,D,I,F){const z=i.consts,Q=hc(i,n,4,D||null,is(z,I));Wc(i,o,Q,is(z,F)),B(i,Q);const oe=Q.tView=Hc(2,Q,d,m,y,i.directiveRegistry,i.pipeRegistry,null,i.schemas,z);return null!==i.queries&&(i.queries.template(i,Q),oe.queries=i.queries.embeddedTView(Q)),Q}(Q,z,F,i,o,d,m,y,D):z.data[Q];Ms(oe,!1);const ye=F[jn].createComment("");eh(z,F,ye,oe),Xs(ye,F),wd(F,F[Q]=Eu(ye,F,ye,oe)),Ul(oe)&&Uc(z,F,oe),null!=D&&Eh(F,oe,I)}function ju(n){return mo(function Ao(){return Oe.lFrame.contextLView}(),Dn+n)}function Pl(n,i,o){const d=pt();return Mn(d,rs(),i)&&Bs(Rn(),Vi(),d,n,i,d[jn],o,!1),Pl}function Cd(n,i,o,d,m){const D=m?"class":"style";Iu(n,o,i.inputs[D],D,d)}function ku(n,i,o,d){const m=pt(),y=Rn(),D=Dn+n,I=m[jn],F=y.firstCreatePass?function S_(n,i,o,d,m,y){const D=i.consts,F=hc(i,n,2,d,is(D,m));return Wc(i,o,F,is(D,y)),null!==F.attrs&&jh(F,F.attrs,!1),null!==F.mergedAttrs&&jh(F,F.mergedAttrs,!0),null!==i.queries&&i.queries.elementStart(i,F),F}(D,y,m,i,o,d):y.data[D],z=m[D]=df(I,i,function O(){return Oe.lFrame.currentNamespace}()),Q=Ul(F);return Ms(F,!0),ih(I,z,F),32!=(32&F.flags)&&eh(y,m,z,F),0===function Kl(){return Oe.lFrame.elementDepthCount}()&&Xs(z,m),function sr(){Oe.lFrame.elementDepthCount++}(),Q&&(Uc(y,m,F),xd(y,F,m)),null!==d&&Eh(m,F),ku}function Ed(){let n=Gi();Xt()?so():(n=n.parent,Ms(n,!1));const i=n;!function Ga(){Oe.lFrame.elementDepthCount--}();const o=Rn();return o.firstCreatePass&&(B(o,n),ga(n)&&o.queries.elementEnd(n)),null!=i.classesWithoutHost&&function C(n){return 0!=(8&n.flags)}(i)&&Cd(o,i,pt(),i.classesWithoutHost,!0),null!=i.stylesWithoutHost&&function u(n){return 0!=(16&n.flags)}(i)&&Cd(o,i,pt(),i.stylesWithoutHost,!1),Ed}function Hh(n,i,o,d){return ku(n,i,o,d),Ed(),Hh}function zh(n,i,o){const d=pt(),m=Rn(),y=n+Dn,D=m.firstCreatePass?function C_(n,i,o,d,m){const y=i.consts,D=is(y,d),I=hc(i,n,8,"ng-container",D);return null!==D&&jh(I,D,!0),Wc(i,o,I,is(y,m)),null!==i.queries&&i.queries.elementStart(i,I),I}(y,m,d,i,o):m.data[y];Ms(D,!0);const I=d[y]=d[jn].createComment("");return eh(m,d,I,D),Xs(I,d),Ul(D)&&(Uc(m,d,D),xd(m,D,d)),null!=o&&Eh(d,D),zh}function Ad(){let n=Gi();const i=Rn();return Xt()?so():(n=n.parent,Ms(n,!1)),i.firstCreatePass&&(B(i,n),ga(n)&&i.queries.elementEnd(n)),Ad}function Uo(){return pt()}function Ol(n){return!!n&&"function"==typeof n.then}function ll(n){return!!n&&"function"==typeof n.subscribe}const Gu=ll;function Vu(n,i,o,d){const m=pt(),y=Rn(),D=Gi();return function sp(n,i,o,d,m,y,D){const I=Ul(d),z=n.firstCreatePass&&Au(n),Q=i[Oi],oe=Fm(i);let ye=!0;if(3&d.type||D){const Rt=Ts(d,i),$t=D?D(Rt):Rt,hn=oe.length,Nn=D?ci=>D(ji(ci[d.index])):d.index;let Mt=null;if(!D&&I&&(Mt=function rp(n,i,o,d){const m=n.cleanup;if(null!=m)for(let y=0;y<m.length-1;y+=2){const D=m[y];if(D===o&&m[y+1]===d){const I=i[Ro],F=m[y+2];return I.length>F?I[F]:null}"string"==typeof D&&(y+=2)}return null}(n,i,m,d.index)),null!==Mt)(Mt.__ngLastListenerFn__||Mt).__ngNextListenerFn__=y,Mt.__ngLastListenerFn__=y,ye=!1;else{y=Uu(d,i,Q,y,!1);const ci=o.listen($t,m,y);oe.push(y,ci),z&&z.push(m,Nn,hn,hn+1)}}else y=Uu(d,i,Q,y,!1);const Ce=d.outputs;let it;if(ye&&null!==Ce&&(it=Ce[m])){const Rt=it.length;if(Rt)for(let $t=0;$t<Rt;$t+=2){const cs=i[it[$t]][it[$t+1]].subscribe(y),Gs=oe.length;oe.push(y,cs),z&&z.push(m,d.index,Gs,-(Gs+1))}}}(y,m,m[jn],D,n,i,d),Vu}function Hm(n,i,o,d){try{return hs(6,i,o),!1!==o(d)}catch(m){return Lm(n,m),!1}finally{hs(7,i,o)}}function Uu(n,i,o,d,m){return function y(D){if(D===Function)return d;Lh(n.componentOffset>-1?Br(n.index,i):i);let F=Hm(i,o,d,D),z=y.__ngNextListenerFn__;for(;z;)F=Hm(i,o,z,D)&&F,z=z.__ngNextListenerFn__;return m&&!1===F&&(D.preventDefault(),D.returnValue=!1),F}}function op(n=1){return function Oo(n){return(Oe.lFrame.contextLView=function oa(n,i){for(;n>0;)i=i[fo],n--;return i}(n,Oe.lFrame.contextLView))[Oi]}(n)}function Vv(n,i){let o=null;const d=function jf(n){const i=n.attrs;if(null!=i){const o=i.indexOf(5);if(!(1&o))return i[o+1]}return null}(n);for(let m=0;m<i.length;m++){const y=i[m];if("*"!==y){if(null===d?Bf(n,y,!0):bh(d,y))return m}else o=m}return o}function Uv(n){const i=pt()[Mr][Yi];if(!i.projection){const d=i.projection=M(n?n.length:1,null),m=d.slice();let y=i.child;for(;null!==y;){const D=n?Vv(y,n):0;null!==D&&(m[D]?m[D].projectionNext=y:d[D]=y,m[D]=y),y=y.next}}}function Nl(n,i=0,o){const d=pt(),m=Rn(),y=hc(m,Dn+n,16,null,o||null);null===y.projection&&(y.projection=i),so(),32!=(32&y.flags)&&function Sy(n,i,o){Bg(i[jn],0,i,o,Vp(n,o,i),Wp(o.parent||i[Yi],o,i))}(m,d,y)}function Hu(n,i,o){return ap(n,"",i,"",o),Hu}function ap(n,i,o,d,m){const y=pt(),D=si(y,i,o,d);return D!==Xn&&Bs(Rn(),Vi(),y,n,D,y[jn],m,!1),ap}function Jc(n,i){return n<<17|i<<2}function qc(n){return n>>17&32767}function Fl(n){return 2|n}function Od(n){return(131068&n)>>2}function Mc(n,i){return-131069&n|i<<2}function $v(n){return 1|n}function A_(n,i,o,d,m){const y=n[o+1],D=null===i;let I=d?qc(y):Od(y),F=!1;for(;0!==I&&(!1===F||D);){const Q=n[I+1];Fy(n[I],i)&&(F=!0,n[I+1]=d?$v(Q):Fl(Q)),I=d?qc(Q):Od(Q)}F&&(n[o+1]=d?Fl(y):$v(y))}function Fy(n,i){return null===n||null==i||(Array.isArray(n)?n[1]:n)===i||!(!Array.isArray(n)||"string"!=typeof i)&&Ft(n,i)>=0}const vs={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function I_(n){return n.substring(vs.key,vs.keyEnd)}function Jv(n,i){const o=vs.textEnd;return o===i?-1:(i=vs.keyEnd=function By(n,i,o){for(;i<o&&n.charCodeAt(i)>32;)i++;return i}(n,vs.key=i,o),zu(n,i,o))}function zu(n,i,o){for(;i<o&&n.charCodeAt(i)<=32;)i++;return i}function N_(n,i,o){return Dc(n,i,o,!1),N_}function F_(n,i){return Dc(n,i,null,!0),F_}function Kv(n){Ll(be,xc,n,!0)}function xc(n,i){for(let o=function V0(n){return function $h(n){vs.key=0,vs.keyEnd=0,vs.value=0,vs.valueEnd=0,vs.textEnd=n.length}(n),Jv(n,zu(n,0,vs.textEnd))}(i);o>=0;o=Jv(i,o))be(n,I_(i),!0)}function Dc(n,i,o,d){const m=pt(),y=Rn(),D=fs(2);y.firstUpdatePass&&B_(y,n,D,d),i!==Xn&&Mn(m,D,i)&&Gy(y,y.data[Rr()],m,m[jn],n,m[D+1]=function Fd(n,i){return null==n||""===n||("string"==typeof i?n+=i:"object"==typeof n&&(n=rt(Vo(n)))),n}(i,o),d,D)}function Ll(n,i,o,d){const m=Rn(),y=fs(2);m.firstUpdatePass&&B_(m,null,y,d);const D=pt();if(o!==Xn&&Mn(D,y,o)){const I=m.data[Rr()];if(G_(I,d)&&!L_(m,y)){let F=d?I.classesWithoutHost:I.stylesWithoutHost;null!==F&&(o=Gt(F,o||"")),Cd(m,I,D,o,d)}else!function Nd(n,i,o,d,m,y,D,I){m===Xn&&(m=Fe);let F=0,z=0,Q=0<m.length?m[0]:null,oe=0<y.length?y[0]:null;for(;null!==Q||null!==oe;){const ye=F<m.length?m[F+1]:void 0,Ce=z<y.length?y[z+1]:void 0;let Rt,it=null;Q===oe?(F+=2,z+=2,ye!==Ce&&(it=oe,Rt=Ce)):null===oe||null!==Q&&Q<oe?(F+=2,it=Q):(z+=2,it=oe,Rt=Ce),null!==it&&Gy(n,i,o,d,it,Rt,D,I),Q=F<m.length?m[F]:null,oe=z<y.length?y[z]:null}}(m,I,D,D[jn],D[y+1],D[y+1]=function ey(n,i,o){if(null==o||""===o)return Fe;const d=[],m=Vo(o);if(Array.isArray(m))for(let y=0;y<m.length;y++)n(d,m[y],!0);else if("object"==typeof m)for(const y in m)m.hasOwnProperty(y)&&n(d,y,m[y]);else"string"==typeof m&&i(d,m);return d}(n,i,o),d,y)}}function L_(n,i){return i>=n.expandoStartIndex}function B_(n,i,o,d){const m=n.data;if(null===m[o+1]){const y=m[Rr()],D=L_(n,o);G_(y,d)&&null===i&&!D&&(i=!1),i=function H0(n,i,o,d){const m=function ce(n){const i=Oe.lFrame.currentDirectiveIndex;return-1===i?null:n[i]}(n);let y=d?i.residualClasses:i.residualStyles;if(null===m)0===(d?i.classBindings:i.styleBindings)&&(o=Wm(o=Qv(null,n,i,o,d),i.attrs,d),y=null);else{const D=i.directiveStylingLast;if(-1===D||n[D]!==m)if(o=Qv(m,n,i,o,d),null===y){let F=function zm(n,i,o){const d=o?i.classBindings:i.styleBindings;if(0!==Od(d))return n[qc(d)]}(n,i,d);void 0!==F&&Array.isArray(F)&&(F=Qv(null,n,i,F[1],d),F=Wm(F,i.attrs,d),function Xv(n,i,o,d){n[qc(o?i.classBindings:i.styleBindings)]=d}(n,i,d,F))}else y=function z0(n,i,o){let d;const m=i.directiveEnd;for(let y=1+i.directiveStylingLast;y<m;y++)d=Wm(d,n[y].hostAttrs,o);return Wm(d,i.attrs,o)}(n,i,d)}return void 0!==y&&(d?i.residualClasses=y:i.residualStyles=y),o}(m,y,i,d),function k0(n,i,o,d,m,y){let D=y?i.classBindings:i.styleBindings,I=qc(D),F=Od(D);n[d]=o;let Q,z=!1;if(Array.isArray(o)?(Q=o[1],(null===Q||Ft(o,Q)>0)&&(z=!0)):Q=o,m)if(0!==F){const ye=qc(n[I+1]);n[d+1]=Jc(ye,I),0!==ye&&(n[ye+1]=Mc(n[ye+1],d)),n[I+1]=function B0(n,i){return 131071&n|i<<17}(n[I+1],d)}else n[d+1]=Jc(I,0),0!==I&&(n[I+1]=Mc(n[I+1],d)),I=d;else n[d+1]=Jc(F,0),0===I?I=d:n[F+1]=Mc(n[F+1],d),F=d;z&&(n[d+1]=Fl(n[d+1])),A_(n,Q,d,!0),A_(n,Q,d,!1),function G0(n,i,o,d,m){const y=m?n.residualClasses:n.residualStyles;null!=y&&"string"==typeof i&&Ft(y,i)>=0&&(o[d+1]=$v(o[d+1]))}(i,Q,n,d,y),D=Jc(I,F),y?i.classBindings=D:i.styleBindings=D}(m,y,i,o,D,d)}}function Qv(n,i,o,d,m){let y=null;const D=o.directiveEnd;let I=o.directiveStylingLast;for(-1===I?I=o.directiveStart:I++;I<D&&(y=i[I],d=Wm(d,y.hostAttrs,m),y!==n);)I++;return null!==n&&(o.directiveStylingLast=I),d}function Wm(n,i,o){const d=o?1:2;let m=-1;if(null!==i)for(let y=0;y<i.length;y++){const D=i[y];"number"==typeof D?m=D:m===d&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),be(n,D,!!o||i[++y]))}return void 0===n?null:n}function Gy(n,i,o,d,m,y,D,I){if(!(3&i.type))return;const F=n.data,z=F[I+1],Q=function j0(n){return 1==(1&n)}(z)?k_(F,i,o,m,Od(z),D):void 0;dp(Q)||(dp(y)||function Ny(n){return 2==(2&n)}(z)&&(y=k_(F,null,o,m,I,D)),function Cy(n,i,o,d,m){if(i)m?n.addClass(o,d):n.removeClass(o,d);else{let y=-1===d.indexOf("-")?void 0:el.DashCase;null==m?n.removeStyle(o,d,y):("string"==typeof m&&m.endsWith("!important")&&(m=m.slice(0,-10),y|=el.Important),n.setStyle(o,d,m,y))}}(d,D,ia(Rr(),o),m,y))}function k_(n,i,o,d,m,y){const D=null===i;let I;for(;m>0;){const F=n[m],z=Array.isArray(F),Q=z?F[1]:F,oe=null===Q;let ye=o[m+1];ye===Xn&&(ye=oe?Fe:void 0);let Ce=oe?Ze(ye,d):Q===d?ye:void 0;if(z&&!dp(Ce)&&(Ce=Ze(F,d)),dp(Ce)&&(I=Ce,D))return I;const it=n[m+1];m=D?qc(it):Od(it)}if(null!==i){let F=y?i.residualClasses:i.residualStyles;null!=F&&(I=Ze(F,d))}return I}function dp(n){return void 0!==n}function G_(n,i){return 0!=(n.flags&(i?8:16))}function ty(n,i=""){const o=pt(),d=Rn(),m=n+Dn,y=d.firstCreatePass?hc(d,m,1,i,null):d.data[m],D=o[m]=uf(o[jn],i);eh(d,o,D,y),Ms(y,!1)}function Zc(n){return V_("",n,""),Zc}function V_(n,i,o){const d=pt(),m=si(d,n,i,o);return m!==Xn&&function mc(n,i,o){const d=ia(i,n);Xd(n[jn],d,o)}(d,Rr(),m),V_}function ry(n,i,o,d,m){Ll(be,xc,function Ni(n,i,o,d,m,y){const I=ri(n,Dr(),o,m);return fs(2),I?i+ke(o)+d+ke(m)+y:Xn}(pt(),n,i,o,d,m),!0)}function ay(n,i,o){const d=pt();return Mn(d,rs(),i)&&Bs(Rn(),Vi(),d,n,i,d[jn],o,!0),ay}const wc=void 0;var ly=["en",[["a","p"],["AM","PM"],wc],[["AM","PM"],wc,wc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],wc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],wc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",wc,"{1} 'at' {0}",wc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Y0(n){const o=Math.floor(Math.abs(n)),d=n.toString().replace(/^[^.]*\.?/,"").length;return 1===o&&0===d?1:5}];let hp={};function Yh(n){const i=function uy(n){return n.toLowerCase().replace(/_/g,"-")}(n);let o=J_(i);if(o)return o;const d=i.split("-")[0];if(o=J_(d),o)return o;if("en"===d)return ly;throw new Me(701,!1)}function a0(n){return Yh(n)[Fn.PluralCase]}function J_(n){return n in hp||(hp[n]=Bn.ng&&Bn.ng.common&&Bn.ng.common.locales&&Bn.ng.common.locales[n]),hp[n]}var Fn=(()=>((Fn=Fn||{})[Fn.LocaleId=0]="LocaleId",Fn[Fn.DayPeriodsFormat=1]="DayPeriodsFormat",Fn[Fn.DayPeriodsStandalone=2]="DayPeriodsStandalone",Fn[Fn.DaysFormat=3]="DaysFormat",Fn[Fn.DaysStandalone=4]="DaysStandalone",Fn[Fn.MonthsFormat=5]="MonthsFormat",Fn[Fn.MonthsStandalone=6]="MonthsStandalone",Fn[Fn.Eras=7]="Eras",Fn[Fn.FirstDayOfWeek=8]="FirstDayOfWeek",Fn[Fn.WeekendRange=9]="WeekendRange",Fn[Fn.DateFormat=10]="DateFormat",Fn[Fn.TimeFormat=11]="TimeFormat",Fn[Fn.DateTimeFormat=12]="DateTimeFormat",Fn[Fn.NumberSymbols=13]="NumberSymbols",Fn[Fn.NumberFormats=14]="NumberFormats",Fn[Fn.CurrencyCode=15]="CurrencyCode",Fn[Fn.CurrencySymbol=16]="CurrencySymbol",Fn[Fn.CurrencyName=17]="CurrencyName",Fn[Fn.Currencies=18]="Currencies",Fn[Fn.Directionality=19]="Directionality",Fn[Fn.PluralCase=20]="PluralCase",Fn[Fn.ExtraData=21]="ExtraData",Fn))();const dy=["zero","one","two","few","many"],Jh="en-US",fp={marker:"element"},Bd={marker:"ICU"};var Kr=(()=>((Kr=Kr||{})[Kr.SHIFT=2]="SHIFT",Kr[Kr.APPEND_EAGERLY=1]="APPEND_EAGERLY",Kr[Kr.COMMENT=2]="COMMENT",Kr))();let pp=Jh;function Xr(n){(function Wn(n,i){null==n&&Wt(i,n,null,"!=")})(n,"Expected localeId to be defined"),"string"==typeof n&&(pp=n.toLowerCase().replace(/_/g,"-"))}function as(n,i,o){const d=i.insertBeforeIndex,m=Array.isArray(d)?d[0]:d;return null===m?$p(n,0,o):ji(o[m])}function mp(n,i,o,d,m){const y=i.insertBeforeIndex;if(Array.isArray(y)){let D=d,I=null;if(3&i.type||(I=D,D=m),null!==D&&-1===i.componentOffset)for(let F=1;F<y.length;F++)Lc(n,D,o[y[F]],I,!1)}}function l0(n,i){if(n.push(i),n.length>1)for(let o=n.length-2;o>=0;o--){const d=n[o];c0(d)||K0(d,i)&&null===hy(d)&&Ym(d,i.index)}}function c0(n){return!(64&n.type)}function K0(n,i){return c0(i)||n.index>i.index}function hy(n){const i=n.insertBeforeIndex;return Array.isArray(i)?i[0]:i}function Ym(n,i){const o=n.insertBeforeIndex;Array.isArray(o)?o[0]=i:(Jp(as,mp),n.insertBeforeIndex=i)}function jd(n,i){const o=n.data[i];return null===o||"string"==typeof o?null:o.hasOwnProperty("currentCaseLViewIndex")?o:o.value}function eb(n,i,o){const d=Wf(n,o,64,null,null);return l0(i,d),d}function ul(n,i){const o=i[n.currentCaseLViewIndex];return null===o?o:o<0?~o:o}function fy(n){return n>>>17}function py(n){return(131070&n)>>>1}let Jm=0,qm=0;function u0(n,i,o,d){const m=o[jn];let D,y=null;for(let I=0;I<i.length;I++){const F=i[I];if("string"==typeof F){const z=i[++I];null===o[z]&&(o[z]=uf(m,F))}else if("number"==typeof F)switch(1&F){case 0:const z=fy(F);let Q,oe;if(null===y&&(y=z,D=Qd(m,d)),z===y?(Q=d,oe=D):(Q=null,oe=ji(o[z])),null!==oe){const Rt=py(F);Lc(m,oe,o[Rt],Q,!1);const hn=jd(n,Rt);if(null!==hn&&"object"==typeof hn){const Nn=ul(hn,o);null!==Nn&&u0(n,hn.create[Nn],o,o[hn.anchorIdx])}}break;case 1:const Ce=i[++I],it=i[++I];Cu(m,ia(F>>>1,o),null,null,Ce,it,null)}else switch(F){case Bd:const z=i[++I],Q=i[++I];null===o[Q]&&Xs(o[Q]=Sg(m,z),o);break;case fp:const oe=i[++I],ye=i[++I];null===o[ye]&&Xs(o[ye]=df(m,oe,null),o)}}}function d0(n,i,o,d,m){for(let y=0;y<o.length;y++){const D=o[y],I=o[++y];if(D&m){let F="";for(let z=y+1;z<=y+I;z++){const Q=o[z];if("string"==typeof Q)F+=Q;else if("number"==typeof Q)if(Q<0)F+=ke(i[d-Q]);else{const oe=Q>>>2;switch(3&Q){case 1:const ye=o[++z],Ce=o[++z],it=n.data[oe];"string"==typeof it?Cu(i[jn],i[oe],null,it,ye,F,Ce):Bs(n,it,i,ye,F,i[jn],Ce,!1);break;case 0:const Rt=i[oe];null!==Rt&&Xd(i[jn],Rt,F);break;case 2:sb(n,jd(n,oe),i,F);break;case 3:h0(n,jd(n,oe),d,i)}}}}else{const F=o[y+1];if(F>0&&3==(3&F)){const Q=jd(n,F>>>2);i[Q.currentCaseLViewIndex]<0&&h0(n,Q,d,i)}}y+=I}}function h0(n,i,o,d){let m=d[i.currentCaseLViewIndex];if(null!==m){let y=Jm;m<0&&(m=d[i.currentCaseLViewIndex]=~m,y=-1),d0(n,d,i.update[m],o,y)}}function sb(n,i,o,d){const m=function ob(n,i){let o=n.cases.indexOf(i);if(-1===o)switch(n.type){case 1:{const d=function J0(n,i){const o=a0(i)(parseInt(n,10)),d=dy[o];return void 0!==d?d:"other"}(i,function Z0(){return pp}());o=n.cases.indexOf(d),-1===o&&"other"!==d&&(o=n.cases.indexOf("other"));break}case 0:o=n.cases.indexOf("other")}return-1===o?null:o}(i,d);if(ul(i,o)!==m&&(f0(n,i,o),o[i.currentCaseLViewIndex]=null===m?null:~m,null!==m)){const D=o[i.anchorIdx];D&&u0(n,i.create[m],o,D)}}function f0(n,i,o){let d=ul(i,o);if(null!==d){const m=i.remove[d];for(let y=0;y<m.length;y++){const D=m[y];if(D>0){const I=ia(D,o);null!==I&&Kp(o[jn],I)}else f0(n,jd(n,~D),o)}}}function ab(){const n=[];let o,d,i=-1;function y(I,F){i=0;const z=ul(I,F);d=null!==z?I.remove[z]:Fe}function D(){if(i<d.length){const I=d[i++];return I>0?o[I]:(n.push(i,d),y(o[Vt].data[~I],o),D())}return 0===n.length?null:(d=n.pop(),i=n.pop(),D())}return function m(I,F){for(o=F;n.length;)n.pop();return y(I.value,F),D}}const q_=/\ufffd(\d+):?\d*\ufffd/gi,cb=/\ufffd(\d+)\ufffd/,m0=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,Zm="\ufffd",ub=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,v=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,e=/\uE500/g;function h(n,i,o,d,m,y,D){const I=ol(n,d,1,null);let F=I<<Kr.SHIFT,z=go();i===z&&(z=null),null===z&&(F|=Kr.APPEND_EAGERLY),D&&(F|=Kr.COMMENT,function Dg(n){void 0===sf&&(sf=n())}(ab)),m.push(F,null===y?"":y);const Q=Wf(n,I,D?32:1,null===y?"":y,null);l0(o,Q);const oe=Q.index;return Ms(Q,!1),null!==z&&i!==z&&function Q0(n,i){let o=n.insertBeforeIndex;null===o?(Jp(as,mp),o=n.insertBeforeIndex=[null,i]):(function Le(n,i,o){n!=i&&Wt(o,n,i,"==")}(Array.isArray(o),!0,"Expecting array here"),o.push(i))}(z,oe),Q}function g(n,i,o,d,m,y,D){const I=D.match(q_),F=h(n,i,o,y,d,I?null:D,!1);I&&b(m,D,F.index,null,0,null)}function b(n,i,o,d,m,y){const D=n.length,I=D+1;n.push(null,null);const F=D+2,z=i.split(q_);let Q=0;for(let oe=0;oe<z.length;oe++){const ye=z[oe];if(1&oe){const Ce=m+parseInt(ye,10);n.push(-1-Ce),Q|=S(Ce)}else""!==ye&&n.push(ye)}return n.push(o<<2|(d?1:0)),d&&n.push(d,y),n[D]=Q,n[I]=n.length-F,Q}function S(n){return 1<<Math.min(n,31)}function E(n){let i,y,o="",d=0,m=!1;for(;null!==(i=ub.exec(n));)m?i[0]===`${Zm}/*${y}${Zm}`&&(d=i.index,m=!1):(o+=n.substring(d,i.index+i[0].length),y=i[1],m=!0);return o+=n.slice(d),o}function G(n,i,o,d,m,y){let D=0;const I={type:m.type,currentCaseLViewIndex:ol(n,i,1,null),anchorIdx:y,cases:[],create:[],remove:[],update:[]};(function se(n,i,o){n.push(S(i.mainBinding),2,-1-i.mainBinding,o<<2|2)})(o,m,y),function X0(n,i,o){const d=n.data[i];null===d?n.data[i]=o:d.value=o}(n,y,I);const F=m.values;for(let z=0;z<F.length;z++){const Q=F[z],oe=[];for(let ye=0;ye<Q.length;ye++){const Ce=Q[ye];if("string"!=typeof Ce){const it=oe.push(Ce)-1;Q[ye]=`\x3c!--\ufffd${it}\ufffd--\x3e`}}D=Y(n,I,i,o,d,m.cases[z],Q.join(""),oe)|D}D&&function de(n,i,o){n.push(i,1,o<<2|3)}(o,D,y)}function j(n){const i=[],o=[];let d=1,m=0;const y=k(n=n.replace(m0,function(D,I,F){return d="select"===F?0:1,m=parseInt(I.slice(1),10),""}));for(let D=0;D<y.length;){let I=y[D++].trim();1===d&&(I=I.replace(/\s*(?:=)?(\w+)\s*/,"$1")),I.length&&i.push(I);const F=k(y[D++]);i.length>o.length&&o.push(F)}return{type:d,mainBinding:m,cases:i,values:o}}function k(n){if(!n)return[];let i=0;const o=[],d=[],m=/[{}]/g;let y;for(m.lastIndex=0;y=m.exec(n);){const I=y.index;if("}"==y[0]){if(o.pop(),0==o.length){const F=n.substring(i,I);m0.test(F)?d.push(j(F)):d.push(F),i=I+1}}else{if(0==o.length){const F=n.substring(i,I);d.push(F),i=I+1}o.push("{")}}const D=n.substring(i);return d.push(D),d}function Y(n,i,o,d,m,y,D,I){const F=[],z=[],Q=[];i.cases.push(y),i.create.push(F),i.remove.push(z),i.update.push(Q);const ye=function vf(n){const i=new Ug(n);return function im(){try{return!!(new window.DOMParser).parseFromString(or(""),"text/html")}catch{return!1}}()?new yf(i):i}(function mu(){return void 0!==mf?mf:typeof document<"u"?document:void 0}()).getInertBodyElement(D),Ce=function Df(n){return"content"in n&&function $g(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}(ye)||ye;return Ce?Z(n,i,o,d,F,z,Q,Ce,m,I,0):0}function Z(n,i,o,d,m,y,D,I,F,z,Q){let oe=0,ye=I.firstChild;for(;ye;){const Ce=ol(n,o,1,null);switch(ye.nodeType){case Node.ELEMENT_NODE:const it=ye,Rt=it.tagName.toLowerCase();if(ch.hasOwnProperty(Rt)){_e(m,fp,Rt,F,Ce),n.data[Ce]=Rt;const Mt=it.attributes;for(let ci=0;ci<Mt.length;ci++){const cs=Mt.item(ci),Gs=cs.name.toLowerCase();cs.value.match(q_)?wl.hasOwnProperty(Gs)&&b(D,cs.value,Ce,cs.name,0,Mf[Gs]?Dl:null):K(m,Ce,cs)}oe=Z(n,i,o,d,m,y,D,ye,Ce,z,Q+1)|oe,$(y,Ce,Q)}break;case Node.TEXT_NODE:const $t=ye.textContent||"",hn=$t.match(q_);_e(m,null,hn?"":$t,F,Ce),$(y,Ce,Q),hn&&(oe=b(D,$t,Ce,null,0,null)|oe);break;case Node.COMMENT_NODE:const Nn=cb.exec(ye.textContent||"");if(Nn){const ci=z[parseInt(Nn[1],10)];_e(m,Bd,"",F,Ce),G(n,o,d,F,ci,Ce),J(y,Ce,Q)}}ye=ye.nextSibling}return oe}function $(n,i,o){0===o&&n.push(i)}function J(n,i,o){0===o&&(n.push(~i),n.push(i))}function _e(n,i,o,d,m){null!==i&&n.push(i),n.push(o,m,function tb(n,i,o){return n|i<<17|o<<1}(0,d,m))}function K(n,i,o){n.push(i<<1|1,o.name,o.value)}function _t(n,i,o=-1){const d=Rn(),m=pt(),y=Dn+n,D=is(d.consts,i),I=go();d.firstCreatePass&&function l(n,i,o,d,m,y){const D=go(),I=[],F=[],z=[[]];m=function L(n,i){if(function A(n){return-1===n}(i))return E(n);{const o=n.indexOf(`:${i}${Zm}`)+2+i.toString().length,d=n.search(new RegExp(`${Zm}\\/\\*\\d+:${i}${Zm}`));return E(n.substring(o,d))}}(m,y);const Q=function t(n){return n.replace(e," ")}(m).split(v);for(let oe=0;oe<Q.length;oe++){let ye=Q[oe];if(1&oe){const Ce=47===ye.charCodeAt(0),Rt=(ye.charCodeAt(Ce?1:0),Dn+Number.parseInt(ye.substring(Ce?2:1)));if(Ce)z.shift(),Ms(go(),!1);else{const $t=eb(n,z[0],Rt);z.unshift([]),Ms($t,!0)}}else{const Ce=k(ye);for(let it=0;it<Ce.length;it++){let Rt=Ce[it];if(1&it){const $t=Rt;if("object"!=typeof $t)throw new Error(`Unable to parse ICU expression in "${m}" message.`);G(n,o,F,i,$t,h(n,D,z[0],o,I,"",!0).index)}else""!==Rt&&g(n,D,z[0],I,F,o,Rt)}}}n.data[d]={create:I,update:F}}(d,null===I?0:I.index,m,y,D,o);const F=d.data[y],Q=Up(d,I===m[Yi]?null:I,m);(function rb(n,i,o,d){const m=n[jn];for(let y=0;y<i.length;y++){const D=i[y++],I=i[y],z=(D&Kr.APPEND_EAGERLY)===Kr.APPEND_EAGERLY,Q=D>>>Kr.SHIFT;let oe=n[Q];null===oe&&(oe=n[Q]=(D&Kr.COMMENT)===Kr.COMMENT?m.createComment(I):uf(m,I)),z&&null!==o&&Lc(m,o,oe,d,!1)}})(m,F.create,Q,I&&8&I.type?m[I.index]:null),Xl(!0)}function xt(n,i,o){_t(n,i,o),function Pt(){Xl(!1)}()}function tt(n){return function nb(n){n&&(Jm|=1<<Math.min(qm,31)),qm++}(Mn(pt(),rs(),n)),tt}function Ht(n){!function ib(n,i,o){if(qm>0){const d=n.data[o];d0(n,i,Array.isArray(d)?d:d.update,Dr()-qm-1,Jm)}Jm=0,qm=0}(Rn(),pt(),n+Dn)}function ht(n,i,o,d,m){if(n=lt(n),Array.isArray(n))for(let y=0;y<n.length;y++)ht(n[y],i,o,d,m);else{const y=Rn(),D=pt();let I=jc(n)?n:lt(n.provide),F=Af(n);const z=Gi(),Q=1048575&z.providerIndexes,oe=z.directiveStart,ye=z.providerIndexes>>20;if(jc(n)||!n.multi){const Ce=new $n(F,m,Al),it=Yn(I,i,m?Q:Q+ye,oe);-1===it?(fr(Jr(z,D),y,I),qn(y,n,i.length),i.push(I),z.directiveStart++,z.directiveEnd++,m&&(z.providerIndexes+=1048576),o.push(Ce),D.push(Ce)):(o[it]=Ce,D[it]=Ce)}else{const Ce=Yn(I,i,Q+ye,oe),it=Yn(I,i,Q,Q+ye),$t=it>=0&&o[it];if(m&&!$t||!m&&!(Ce>=0&&o[Ce])){fr(Jr(z,D),y,I);const hn=function yt(n,i,o,d,m){const y=new $n(n,o,Al);return y.multi=[],y.index=i,y.componentProviders=0,xn(y,m,d&&!o),y}(m?Mi:cn,o.length,m,d,F);!m&&$t&&(o[it].providerFactory=hn),qn(y,n,i.length,0),i.push(I),z.directiveStart++,z.directiveEnd++,m&&(z.providerIndexes+=1048576),o.push(hn),D.push(hn)}else qn(y,n,Ce>-1?Ce:it,xn(o[m?it:Ce],F,!m&&d));!m&&d&&$t&&o[it].componentProviders++}}}function qn(n,i,o,d){const m=jc(i),y=function Kg(n){return!!n.useClass}(i);if(m||y){const F=(y?lt(i.useClass):i).prototype.ngOnDestroy;if(F){const z=n.destroyHooks||(n.destroyHooks=[]);if(!m&&i.multi){const Q=z.indexOf(o);-1===Q?z.push(o,[d,F]):z[Q+1].push(d,F)}else z.push(o,F)}}}function xn(n,i,o){return o&&n.componentProviders++,n.multi.push(i)-1}function Yn(n,i,o,d){for(let m=o;m<d;m++)if(i[m]===n)return m;return-1}function cn(n,i,o,d){return vt(this.multi,[])}function Mi(n,i,o,d){const m=this.multi;let y;if(this.providerFactory){const D=this.providerFactory.componentProviders,I=ao(o,o[Vt],this.providerFactory.index,d);y=I.slice(0,D),vt(m,y);for(let F=D;F<I.length;F++)y.push(I[F])}else y=[],vt(m,y);return y}function vt(n,i){for(let o=0;o<n.length;o++)i.push((0,n[o])());return i}function zt(n,i=[]){return o=>{o.providersResolver=(d,m)=>function on(n,i,o){const d=Rn();if(d.firstCreatePass){const m=ns(n);ht(o,d.data,d.blueprint,m,!0),ht(i,d.data,d.blueprint,m,!1)}}(d,m?m(n):n,i)}}class gn{}class en{}function li(n,i){return new kn(n,i??null)}class kn extends gn{constructor(i,o){super(),this._parent=o,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Bm(this);const d=Fr(i);this._bootstrapComponents=lc(d.bootstrap),this._r3Injector=h_(i,o,[{provide:gn,useValue:this},{provide:md,useValue:this.componentFactoryResolver}],rt(i),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(i)}get injector(){return this._r3Injector}destroy(){const i=this._r3Injector;!i.destroyed&&i.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(i){this.destroyCbs.push(i)}}class yr extends en{constructor(i){super(),this.moduleType=i}create(i){return new kn(this.moduleType,i)}}class lr extends gn{constructor(i,o,d){super(),this.componentFactoryResolver=new Bm(this),this.instance=null;const m=new Ef([...i,{provide:gn,useValue:this},{provide:md,useValue:this.componentFactoryResolver}],o||vu(),d,new Set(["environment"]));this.injector=m,m.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(i){this.injector.onDestroy(i)}}function me(n,i,o=null){return new lr(n,i,o).injector}let re=(()=>{class n{constructor(o){this._injector=o,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(o){if(!o.standalone)return null;if(!this.cachedInjectors.has(o.id)){const d=dm(0,o.type),m=d.length>0?me([d],this._injector,`Standalone[${o.type.name}]`):null;this.cachedInjectors.set(o.id,m)}return this.cachedInjectors.get(o.id)}ngOnDestroy(){try{for(const o of this.cachedInjectors.values())null!==o&&o.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=wn({token:n,providedIn:"environment",factory:()=>new n($i(kc))}),n})();function qe(n){n.getStandaloneInjector=i=>i.get(re).getOrCreateStandaloneInjector(n)}function pn(n,i,o){const d=jr()+n,m=pt();return m[d]===Xn?Vn(m,d,o?i.call(o):i()):function Tn(n,i){return n[i]}(m,d)}function In(n,i,o,d){return _y(pt(),jr(),n,i,o,d)}function Zi(n,i,o,d,m){return function vy(n,i,o,d,m,y,D){const I=i+o;return ri(n,I,m,y)?Vn(n,I+2,D?d.call(D,m,y):d(m,y)):gp(n,I+2)}(pt(),jr(),n,i,o,d,m)}function ks(n,i,o,d,m,y){return function le(n,i,o,d,m,y,D,I){const F=i+o;return function Qn(n,i,o,d,m){const y=ri(n,i,o,d);return Mn(n,i+2,m)||y}(n,F,m,y,D)?Vn(n,F+3,I?d.call(I,m,y,D):d(m,y,D)):gp(n,F+3)}(pt(),jr(),n,i,o,d,m,y)}function gp(n,i){const o=n[i];return o===Xn?void 0:o}function _y(n,i,o,d,m,y){const D=i+o;return Mn(n,D,m)?Vn(n,D+1,y?d.call(y,m):d(m)):gp(n,D+1)}function Ne(n,i){const o=Rn();let d;const m=n+Dn;o.firstCreatePass?(d=function mt(n,i){if(i)for(let o=i.length-1;o>=0;o--){const d=i[o];if(n===d.name)return d}}(i,o.pipeRegistry),o.data[m]=d,d.onDestroy&&(o.destroyHooks??(o.destroyHooks=[])).push(m,d.onDestroy)):d=o.data[m];const y=d.factory||(d.factory=$r(d.type)),D=tn(Al);try{const I=Pc(!1),F=y();return Pc(I),function Bu(n,i,o,d){o>=n.data.length&&(n.data[o]=null,n.blueprint[o]=null),i[o]=d}(o,pt(),m,F),F}finally{tn(D)}}function oi(n,i,o){const d=n+Dn,m=pt(),y=mo(m,d);return function Di(n,i){return n[Vt].data[i].pure}(m,d)?_y(m,jr(),i,y.transform,o,y):y.transform(o)}function Ho(n){return i=>{setTimeout(n,void 0,i)}}const to=class Cs extends a.x{constructor(i=!1){super(),this.__isAsync=i}emit(i){super.next(i)}subscribe(i,o,d){let m=i,y=o||(()=>null),D=d;if(i&&"object"==typeof i){const F=i;m=F.next?.bind(F),y=F.error?.bind(F),D=F.complete?.bind(F)}this.__isAsync&&(y=Ho(y),m&&(m=Ho(m)),D&&(D=Ho(D)));const I=super.subscribe({next:m,error:y,complete:D});return i instanceof ie.w0&&i.add(I),I}};function Gd(){return this._results[Symbol.iterator]()}class ls{get changes(){return this._changes||(this._changes=new to)}constructor(i=!1){this._emitDistinctChangesOnly=i,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const o=ls.prototype;o[Symbol.iterator]||(o[Symbol.iterator]=Gd)}get(i){return this._results[i]}map(i){return this._results.map(i)}filter(i){return this._results.filter(i)}find(i){return this._results.find(i)}reduce(i,o){return this._results.reduce(i,o)}forEach(i){this._results.forEach(i)}some(i){return this._results.some(i)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(i,o){const d=this;d.dirty=!1;const m=function Fs(n){return n.flat(Number.POSITIVE_INFINITY)}(i);(this._changesDetected=!function Ra(n,i,o){if(n.length!==i.length)return!1;for(let d=0;d<n.length;d++){let m=n[d],y=i[d];if(o&&(m=o(m),y=o(y)),y!==m)return!1}return!0}(d._results,m,o))&&(d._results=m,d.length=m.length,d.last=m[this.length-1],d.first=m[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let wi=(()=>{class n{}return n.__NG_ELEMENT_ID__=Vd,n})();const Z_=wi,no=class extends Z_{constructor(i,o,d){super(),this._declarationLView=i,this._declarationTContainer=o,this.elementRef=d}createEmbeddedView(i,o){const d=this._declarationTContainer.tView,m=Ch(this._declarationLView,d,i,16,null,d.declTNode,null,null,null,null,o||null);m[Fa]=this._declarationLView[this._declarationTContainer.index];const D=this._declarationLView[ds];return null!==D&&(m[ds]=D.createEmbeddedView(d)),ha(d,m,i),new Rd(m)}};function Vd(){return _p(Gi(),pt())}function _p(n,i){return 4&n.type?new no(i,n,bu(n,i)):null}let Yu=(()=>{class n{}return n.__NG_ELEMENT_ID__=K_,n})();function K_(){return Xm(Gi(),pt())}const zo=Yu,Ju=class extends zo{constructor(i,o,d){super(),this._lContainer=i,this._hostTNode=o,this._hostLView=d}get element(){return bu(this._hostTNode,this._hostLView)}get injector(){return new ws(this._hostTNode,this._hostLView)}get parentInjector(){const i=Lo(this._hostTNode,this._hostLView);if(Ns(i)){const o=Da(i,this._hostLView),d=aa(i);return new ws(o[Vt].data[d+8],o)}return new ws(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(i){const o=Km(this._lContainer);return null!==o&&o[i]||null}get length(){return this._lContainer.length-ur}createEmbeddedView(i,o,d){let m,y;"number"==typeof d?m=d:null!=d&&(m=d.index,y=d.injector);const D=i.createEmbeddedView(o||{},y);return this.insert(D,m),D}createComponent(i,o,d,m,y){const D=i&&!function Xa(n){return"function"==typeof n}(i);let I;if(D)I=o;else{const oe=o||{};I=oe.index,d=oe.injector,m=oe.projectableNodes,y=oe.environmentInjector||oe.ngModuleRef}const F=D?i:new $c(pi(i)),z=d||this.parentInjector;if(!y&&null==F.ngModule){const ye=(D?z:this.parentInjector).get(kc,null);ye&&(y=ye)}const Q=F.create(z,m,void 0,y);return this.insert(Q.hostView,I),Q}insert(i,o){const d=i._lView,m=d[Vt];if(function ya(n){return Er(n[Ai])}(d)){const Q=this.indexOf(i);if(-1!==Q)this.detach(Q);else{const oe=d[Ai],ye=new Ju(oe,oe[Yi],oe[Ai]);ye.detach(ye.indexOf(i))}}const y=this._adjustIndex(o),D=this._lContainer;!function Pg(n,i,o,d){const m=ur+d,y=o.length;d>0&&(o[m-1][ts]=i),d<y-ur?(i[ts]=o[m],w(o,ur+d,i)):(o.push(i),i[ts]=null),i[Ai]=o;const D=i[Fa];null!==D&&o!==D&&function Og(n,i){const o=n[Wr];i[Mr]!==i[Ai][Ai][Mr]&&(n[ro]=!0),null===o?n[Wr]=[i]:o.push(i)}(D,i);const I=i[ds];null!==I&&I.insertView(n),i[On]|=64}(m,d,D,y);const I=Zp(y,D),F=d[jn],z=Qd(F,D[fl]);return null!==z&&function Eg(n,i,o,d,m,y){d[qs]=m,d[Yi]=i,nh(n,d,o,1,m,y)}(m,D[Yi],F,d,z,I),i.attachToViewContainerRef(),w(Wo(D),y,i),i}move(i,o){return this.insert(i,o)}indexOf(i){const o=Km(this._lContainer);return null!==o?o.indexOf(i):-1}remove(i){const o=this._adjustIndex(i,-1),d=hf(this._lContainer,o);d&&(R(Wo(this._lContainer),o),Gp(d[Vt],d))}detach(i){const o=this._adjustIndex(i,-1),d=hf(this._lContainer,o);return d&&null!=R(Wo(this._lContainer),o)?new Rd(d):null}_adjustIndex(i,o=0){return i??this.length+o}};function Km(n){return n[Xo]}function Wo(n){return n[Xo]||(n[Xo]=[])}function Xm(n,i){let o;const d=i[n.index];if(Er(d))o=d;else{let m;if(8&n.type)m=ji(d);else{const y=i[jn];m=y.createComment("");const D=Ts(n,i);Lc(y,Qd(y,D),m,function Lg(n,i){return n.nextSibling(i)}(y,D),!1)}i[n.index]=o=Eu(d,i,m,n),wd(i,o)}return new Ju(o,n,i)}class X_{constructor(i){this.queryList=i,this.matches=null}clone(){return new X_(this.queryList)}setDirty(){this.queryList.setDirty()}}class Qm{constructor(i=[]){this.queries=i}createEmbeddedView(i){const o=i.queries;if(null!==o){const d=null!==i.contentQueries?i.contentQueries[0]:o.length,m=[];for(let y=0;y<d;y++){const D=o.getByIndex(y);m.push(this.queries[D.indexInDeclarationView].clone())}return new Qm(m)}return null}insertView(i){this.dirtyQueriesWithMatches(i)}detachView(i){this.dirtyQueriesWithMatches(i)}dirtyQueriesWithMatches(i){for(let o=0;o<this.queries.length;o++)null!==yb(i,o).matches&&this.queries[o].setDirty()}}class db{constructor(i,o,d=null){this.predicate=i,this.flags=o,this.read=d}}class g0{constructor(i=[]){this.queries=i}elementStart(i,o){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(i,o)}elementEnd(i){for(let o=0;o<this.queries.length;o++)this.queries[o].elementEnd(i)}embeddedTView(i){let o=null;for(let d=0;d<this.length;d++){const m=null!==o?o.length:0,y=this.getByIndex(d).embeddedTView(i,m);y&&(y.indexInDeclarationView=d,null!==o?o.push(y):o=[y])}return null!==o?new g0(o):null}template(i,o){for(let d=0;d<this.queries.length;d++)this.queries[d].template(i,o)}getByIndex(i){return this.queries[i]}get length(){return this.queries.length}track(i){this.queries.push(i)}}class _0{constructor(i,o=-1){this.metadata=i,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=o}elementStart(i,o){this.isApplyingToNode(o)&&this.matchTNode(i,o)}elementEnd(i){this._declarationNodeIndex===i.index&&(this._appliesToNextNode=!1)}template(i,o){this.elementStart(i,o)}embeddedTView(i,o){return this.isApplyingToNode(i)?(this.crossesNgTemplate=!0,this.addMatch(-i.index,o),new _0(this.metadata)):null}isApplyingToNode(i){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const o=this._declarationNodeIndex;let d=i.parent;for(;null!==d&&8&d.type&&d.index!==o;)d=d.parent;return o===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(i,o){const d=this.metadata.predicate;if(Array.isArray(d))for(let m=0;m<d.length;m++){const y=d[m];this.matchTNodeWithReadOption(i,o,MT(o,y)),this.matchTNodeWithReadOption(i,o,ps(o,i,y,!1,!1))}else d===wi?4&o.type&&this.matchTNodeWithReadOption(i,o,-1):this.matchTNodeWithReadOption(i,o,ps(o,i,d,!1,!1))}matchTNodeWithReadOption(i,o,d){if(null!==d){const m=this.metadata.read;if(null!==m)if(m===gd||m===Yu||m===wi&&4&o.type)this.addMatch(o.index,-2);else{const y=ps(o,i,m,!1,!1);null!==y&&this.addMatch(o.index,y)}else this.addMatch(o.index,d)}}addMatch(i,o){null===this.matches?this.matches=[i,o]:this.matches.push(i,o)}}function MT(n,i){const o=n.localNames;if(null!==o)for(let d=0;d<o.length;d+=2)if(o[d]===i)return o[d+1];return null}function DT(n,i,o,d){return-1===o?function xT(n,i){return 11&n.type?bu(n,i):4&n.type?_p(n,i):null}(i,n):-2===o?function wT(n,i,o){return o===gd?bu(i,n):o===wi?_p(i,n):o===Yu?Xm(i,n):void 0}(n,i,d):ao(n,n[Vt],o,i)}function hb(n,i,o,d){const m=i[ds].queries[d];if(null===m.matches){const y=n.data,D=o.matches,I=[];for(let F=0;F<D.length;F+=2){const z=D[F];I.push(z<0?null:DT(i,y[z],D[F+1],o.metadata.read))}m.matches=I}return m.matches}function v0(n,i,o,d){const m=n.queries.getByIndex(o),y=m.matches;if(null!==y){const D=hb(n,i,m,o);for(let I=0;I<y.length;I+=2){const F=y[I];if(F>0)d.push(D[I/2]);else{const z=y[I+1],Q=i[-F];for(let oe=ur;oe<Q.length;oe++){const ye=Q[oe];ye[Fa]===ye[Ai]&&v0(ye[Vt],ye,z,d)}if(null!==Q[Wr]){const oe=Q[Wr];for(let ye=0;ye<oe.length;ye++){const Ce=oe[ye];v0(Ce[Vt],Ce,z,d)}}}}}return d}function fb(n){const i=pt(),o=Rn(),d=za();Ma(d+1);const m=yb(o,d);if(n.dirty&&function Ac(n){return 4==(4&n[On])}(i)===(2==(2&m.metadata.flags))){if(null===m.matches)n.reset([]);else{const y=m.crossesNgTemplate?v0(o,i,d,[]):hb(o,i,m,d);n.reset(y,n_),n.notifyOnChanges()}return!0}return!1}function pb(n,i,o){const d=Rn();d.firstCreatePass&&(vb(d,new db(n,i,o),-1),2==(2&i)&&(d.staticViewQueries=!0)),_b(d,pt(),i)}function mb(n,i,o,d){const m=Rn();if(m.firstCreatePass){const y=Gi();vb(m,new db(i,o,d),y.index),function ST(n,i){const o=n.contentQueries||(n.contentQueries=[]);i!==(o.length?o[o.length-1]:-1)&&o.push(n.queries.length-1,i)}(m,n),2==(2&o)&&(m.staticContentQueries=!0)}_b(m,pt(),o)}function gb(){return function RT(n,i){return n[ds].queries[i].queryList}(pt(),za())}function _b(n,i,o){const d=new ls(4==(4&o));Am(n,i,d,d.destroy),null===i[ds]&&(i[ds]=new Qm),i[ds].queries.push(new X_(d))}function vb(n,i,o){null===n.queries&&(n.queries=new g0),n.queries.track(new _0(i,o))}function yb(n,i){return n.queries.getByIndex(i)}function bb(n,i){return _p(n,i)}function y0(n){return!!Fr(n)}function by(...n){}const jb=new Ui("Application Initializer");let Ty=(()=>{class n{constructor(o){this.appInits=o,this.resolve=by,this.reject=by,this.initialized=!1,this.done=!1,this.donePromise=new Promise((d,m)=>{this.resolve=d,this.reject=m})}runInitializers(){if(this.initialized)return;const o=[],d=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let m=0;m<this.appInits.length;m++){const y=this.appInits[m]();if(Ol(y))o.push(y);else if(Gu(y)){const D=new Promise((I,F)=>{y.subscribe({complete:I,error:F})});o.push(D)}}Promise.all(o).then(()=>{d()}).catch(m=>{this.reject(m)}),0===o.length&&d(),this.initialized=!0}}return n.\u0275fac=function(o){return new(o||n)($i(jb,8))},n.\u0275prov=wn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const kb=new Ui("AppId",{providedIn:"root",factory:function Gb(){return`${D0()}${D0()}${D0()}`}});function D0(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Vb=new Ui("Platform Initializer"),YT=new Ui("Platform ID",{providedIn:"platform",factory:()=>"unknown"});let JT=(()=>{class n{log(o){console.log(o)}warn(o){console.warn(o)}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=wn({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const My=new Ui("LocaleId",{providedIn:"root",factory:()=>br(My,bn.Optional|bn.SkipSelf)||function qT(){return typeof $localize<"u"&&$localize.locale||Jh}()}),ZT=new Ui("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class KT{constructor(i,o){this.ngModuleFactory=i,this.componentFactories=o}}let XT=(()=>{class n{compileModuleSync(o){return new yr(o)}compileModuleAsync(o){return Promise.resolve(this.compileModuleSync(o))}compileModuleAndAllComponentsSync(o){const d=this.compileModuleSync(o),y=lc(Fr(o).declarations).reduce((D,I)=>{const F=pi(I);return F&&D.push(new $c(F)),D},[]);return new KT(d,y)}compileModuleAndAllComponentsAsync(o){return Promise.resolve(this.compileModuleAndAllComponentsSync(o))}clearCache(){}clearCacheFor(o){}getModuleId(o){}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=wn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const tM=(()=>Promise.resolve(0))();function w0(n){typeof Zone>"u"?tM.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class Rc{constructor({enableLongStackTrace:i=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new to(!1),this.onMicrotaskEmpty=new to(!1),this.onStable=new to(!1),this.onError=new to(!1),typeof Zone>"u")throw new Me(908,!1);Zone.assertZonePatched();const m=this;m._nesting=0,m._outer=m._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(m._inner=m._inner.fork(new Zone.TaskTrackingZoneSpec)),i&&Zone.longStackTraceZoneSpec&&(m._inner=m._inner.fork(Zone.longStackTraceZoneSpec)),m.shouldCoalesceEventChangeDetection=!d&&o,m.shouldCoalesceRunChangeDetection=d,m.lastRequestAnimationFrameId=-1,m.nativeRequestAnimationFrame=function nM(){let n=Bn.requestAnimationFrame,i=Bn.cancelAnimationFrame;if(typeof Zone<"u"&&n&&i){const o=n[Zone.__symbol__("OriginalDelegate")];o&&(n=o);const d=i[Zone.__symbol__("OriginalDelegate")];d&&(i=d)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:i}}().nativeRequestAnimationFrame,function sM(n){const i=()=>{!function rM(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Bn,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,S0(n),n.isCheckStableRunning=!0,R0(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),S0(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(o,d,m,y,D,I)=>{try{return zb(n),o.invokeTask(m,y,D,I)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===y.type||n.shouldCoalesceRunChangeDetection)&&i(),Wb(n)}},onInvoke:(o,d,m,y,D,I,F)=>{try{return zb(n),o.invoke(m,y,D,I,F)}finally{n.shouldCoalesceRunChangeDetection&&i(),Wb(n)}},onHasTask:(o,d,m,y)=>{o.hasTask(m,y),d===m&&("microTask"==y.change?(n._hasPendingMicrotasks=y.microTask,S0(n),R0(n)):"macroTask"==y.change&&(n.hasPendingMacrotasks=y.macroTask))},onHandleError:(o,d,m,y)=>(o.handleError(m,y),n.runOutsideAngular(()=>n.onError.emit(y)),!1)})}(m)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Rc.isInAngularZone())throw new Me(909,!1)}static assertNotInAngularZone(){if(Rc.isInAngularZone())throw new Me(909,!1)}run(i,o,d){return this._inner.run(i,o,d)}runTask(i,o,d,m){const y=this._inner,D=y.scheduleEventTask("NgZoneEvent: "+m,i,iM,by,by);try{return y.runTask(D,o,d)}finally{y.cancelTask(D)}}runGuarded(i,o,d){return this._inner.runGuarded(i,o,d)}runOutsideAngular(i){return this._outer.run(i)}}const iM={};function R0(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function S0(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function zb(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function Wb(n){n._nesting--,R0(n)}class oM{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new to,this.onMicrotaskEmpty=new to,this.onStable=new to,this.onError=new to}run(i,o,d){return i.apply(o,d)}runGuarded(i,o,d){return i.apply(o,d)}runOutsideAngular(i){return i()}runTask(i,o,d,m){return i.apply(o,d)}}const $b=new Ui(""),Yb=new Ui("");let C0,aM=(()=>{class n{constructor(o,d,m){this._ngZone=o,this.registry=d,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,C0||(function lM(n){C0=n}(m),m.addToWindow(d)),this._watchAngularEvents(),o.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Rc.assertNotInAngularZone(),w0(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())w0(()=>{for(;0!==this._callbacks.length;){let o=this._callbacks.pop();clearTimeout(o.timeoutId),o.doneCb(this._didWork)}this._didWork=!1});else{let o=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(o)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(o=>({source:o.source,creationLocation:o.creationLocation,data:o.data})):[]}addCallback(o,d,m){let y=-1;d&&d>0&&(y=setTimeout(()=>{this._callbacks=this._callbacks.filter(D=>D.timeoutId!==y),o(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:o,timeoutId:y,updateCb:m})}whenStable(o,d,m){if(m&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(o,d,m),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(o){this.registry.registerApplication(o,this)}unregisterApplication(o){this.registry.unregisterApplication(o)}findProviders(o,d,m){return[]}}return n.\u0275fac=function(o){return new(o||n)($i(Rc),$i(Jb),$i(Yb))},n.\u0275prov=wn({token:n,factory:n.\u0275fac}),n})(),Jb=(()=>{class n{constructor(){this._applications=new Map}registerApplication(o,d){this._applications.set(o,d)}unregisterApplication(o){this._applications.delete(o)}unregisterAllApplications(){this._applications.clear()}getTestability(o){return this._applications.get(o)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(o,d=!0){return C0?.findTestabilityInTree(this,o,d)??null}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=wn({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const Ud=!1;let qh=null;const qb=new Ui("AllowMultipleToken"),E0=new Ui("PlatformDestroyListeners"),Zb=new Ui("appBootstrapListener");class dM{constructor(i,o){this.name=i,this.token=o}}function Xb(n,i,o=[]){const d=`Platform: ${i}`,m=new Ui(d);return(y=[])=>{let D=A0();if(!D||D.injector.get(qb,!1)){const I=[...o,...y,{provide:m,useValue:!0}];n?n(I):function hM(n){if(qh&&!qh.get(qb,!1))throw new Me(400,!1);qh=n;const i=n.get(eT);(function Kb(n){const i=n.get(Vb,null);i&&i.forEach(o=>o())})(n)}(function Qb(n=[],i){return rl.create({name:i,providers:[{provide:_i,useValue:"platform"},{provide:E0,useValue:new Set([()=>qh=null])},...n]})}(I,d))}return function pM(n){const i=A0();if(!i)throw new Me(401,!1);return i}()}}function A0(){return qh?.get(eT)??null}let eT=(()=>{class n{constructor(o){this._injector=o,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(o,d){const m=function nT(n,i){let o;return o="noop"===n?new oM:("zone.js"===n?void 0:n)||new Rc(i),o}(d?.ngZone,function tT(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(d)),y=[{provide:Rc,useValue:m}];return m.run(()=>{const D=rl.create({providers:y,parent:this.injector,name:o.moduleType.name}),I=o.create(D),F=I.injector.get(vd,null);if(!F)throw new Me(402,!1);return m.runOutsideAngular(()=>{const z=m.onError.subscribe({next:Q=>{F.handleError(Q)}});I.onDestroy(()=>{Dy(this._modules,I),z.unsubscribe()})}),function iT(n,i,o){try{const d=o();return Ol(d)?d.catch(m=>{throw i.runOutsideAngular(()=>n.handleError(m)),m}):d}catch(d){throw i.runOutsideAngular(()=>n.handleError(d)),d}}(F,m,()=>{const z=I.injector.get(Ty);return z.runInitializers(),z.donePromise.then(()=>(Xr(I.injector.get(My,Jh)||Jh),this._moduleDoBootstrap(I),I))})})}bootstrapModule(o,d=[]){const m=rT({},d);return function cM(n,i,o){const d=new yr(o);return Promise.resolve(d)}(0,0,o).then(y=>this.bootstrapModuleFactory(y,m))}_moduleDoBootstrap(o){const d=o.injector.get(xy);if(o._bootstrapComponents.length>0)o._bootstrapComponents.forEach(m=>d.bootstrap(m));else{if(!o.instance.ngDoBootstrap)throw new Me(-403,!1);o.instance.ngDoBootstrap(d)}this._modules.push(o)}onDestroy(o){this._destroyListeners.push(o)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Me(404,!1);this._modules.slice().forEach(d=>d.destroy()),this._destroyListeners.forEach(d=>d());const o=this._injector.get(E0,null);o&&(o.forEach(d=>d()),o.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(o){return new(o||n)($i(rl))},n.\u0275prov=wn({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function rT(n,i){return Array.isArray(i)?i.reduce(rT,n):{...n,...i}}let xy=(()=>{class n{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(o,d,m){this._zone=o,this._injector=d,this._exceptionHandler=m,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const y=new pe.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),D=new pe.y(I=>{let F;this._zone.runOutsideAngular(()=>{F=this._zone.onStable.subscribe(()=>{Rc.assertNotInAngularZone(),w0(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const z=this._zone.onUnstable.subscribe(()=>{Rc.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{F.unsubscribe(),z.unsubscribe()}});this.isStable=(0,Ee.T)(y,D.pipe(function St(n={}){const{connector:i=(()=>new a.x),resetOnError:o=!0,resetOnComplete:d=!0,resetOnRefCountZero:m=!0}=n;return y=>{let D,I,F,z=0,Q=!1,oe=!1;const ye=()=>{I?.unsubscribe(),I=void 0},Ce=()=>{ye(),D=F=void 0,Q=oe=!1},it=()=>{const Rt=D;Ce(),Rt?.unsubscribe()};return(0,We.e)((Rt,$t)=>{z++,!oe&&!Q&&ye();const hn=F=F??i();$t.add(()=>{z--,0===z&&!oe&&!Q&&(I=ft(it,m))}),hn.subscribe($t),!D&&z>0&&(D=new Qe.Hp({next:Nn=>hn.next(Nn),error:Nn=>{oe=!0,ye(),I=ft(Ce,o,Nn),hn.error(Nn)},complete:()=>{Q=!0,ye(),I=ft(Ce,d),hn.complete()}}),(0,Ae.Xf)(Rt).subscribe(D))})(y)}}()))}bootstrap(o,d){const m=o instanceof gm;if(!this._injector.get(Ty).done){!m&&zr(o);throw new Me(405,Ud)}let D;D=m?o:this._injector.get(md).resolveComponentFactory(o),this.componentTypes.push(D.componentType);const I=function uM(n){return n.isBoundToModule}(D)?void 0:this._injector.get(gn),z=D.create(rl.NULL,[],d||D.selector,I),Q=z.location.nativeElement,oe=z.injector.get($b,null);return oe?.registerApplication(Q),z.onDestroy(()=>{this.detachView(z.hostView),Dy(this.components,z),oe?.unregisterApplication(Q)}),this._loadComponent(z),z}tick(){if(this._runningTick)throw new Me(101,!1);try{this._runningTick=!0;for(let o of this._views)o.detectChanges()}catch(o){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(o))}finally{this._runningTick=!1}}attachView(o){const d=o;this._views.push(d),d.attachToAppRef(this)}detachView(o){const d=o;Dy(this._views,d),d.detachFromAppRef()}_loadComponent(o){this.attachView(o.hostView),this.tick(),this.components.push(o);const d=this._injector.get(Zb,[]);d.push(...this._bootstrapListeners),d.forEach(m=>m(o))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(o=>o()),this._views.slice().forEach(o=>o.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(o){return this._destroyListeners.push(o),()=>Dy(this._destroyListeners,o)}destroy(){if(this._destroyed)throw new Me(406,!1);const o=this._injector;o.destroy&&!o.destroyed&&o.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(o){return new(o||n)($i(Rc),$i(kc),$i(vd))},n.\u0275prov=wn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Dy(n,i){const o=n.indexOf(i);o>-1&&n.splice(o,1)}let gM=(()=>{class n{}return n.__NG_ELEMENT_ID__=_M,n})();function _M(n){return function vM(n,i,o){if(La(n)&&!o){const d=Br(n.index,i);return new Rd(d,d)}return 47&n.type?new Rd(i[Mr],i):null}(Gi(),pt(),16==(16&n))}class cT{constructor(){}supports(i){return De(i)}create(i){return new DM(i)}}const xM=(n,i)=>i;class DM{constructor(i){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=i||xM}forEachItem(i){let o;for(o=this._itHead;null!==o;o=o._next)i(o)}forEachOperation(i){let o=this._itHead,d=this._removalsHead,m=0,y=null;for(;o||d;){const D=!d||o&&o.currentIndex<dT(d,m,y)?o:d,I=dT(D,m,y),F=D.currentIndex;if(D===d)m--,d=d._nextRemoved;else if(o=o._next,null==D.previousIndex)m++;else{y||(y=[]);const z=I-m,Q=F-m;if(z!=Q){for(let ye=0;ye<z;ye++){const Ce=ye<y.length?y[ye]:y[ye]=0,it=Ce+ye;Q<=it&&it<z&&(y[ye]=Ce+1)}y[D.previousIndex]=Q-z}}I!==F&&i(D,I,F)}}forEachPreviousItem(i){let o;for(o=this._previousItHead;null!==o;o=o._nextPrevious)i(o)}forEachAddedItem(i){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)i(o)}forEachMovedItem(i){let o;for(o=this._movesHead;null!==o;o=o._nextMoved)i(o)}forEachRemovedItem(i){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)i(o)}forEachIdentityChange(i){let o;for(o=this._identityChangesHead;null!==o;o=o._nextIdentityChange)i(o)}diff(i){if(null==i&&(i=[]),!De(i))throw new Me(900,!1);return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let m,y,D,o=this._itHead,d=!1;if(Array.isArray(i)){this.length=i.length;for(let I=0;I<this.length;I++)y=i[I],D=this._trackByFn(I,y),null!==o&&Object.is(o.trackById,D)?(d&&(o=this._verifyReinsertion(o,y,D,I)),Object.is(o.item,y)||this._addIdentityChange(o,y)):(o=this._mismatch(o,y,D,I),d=!0),o=o._next}else m=0,function Lt(n,i){if(Array.isArray(n))for(let o=0;o<n.length;o++)i(n[o]);else{const o=n[Symbol.iterator]();let d;for(;!(d=o.next()).done;)i(d.value)}}(i,I=>{D=this._trackByFn(m,I),null!==o&&Object.is(o.trackById,D)?(d&&(o=this._verifyReinsertion(o,I,D,m)),Object.is(o.item,I)||this._addIdentityChange(o,I)):(o=this._mismatch(o,I,D,m),d=!0),o=o._next,m++}),this.length=m;return this._truncate(o),this.collection=i,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let i;for(i=this._previousItHead=this._itHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._additionsHead;null!==i;i=i._nextAdded)i.previousIndex=i.currentIndex;for(this._additionsHead=this._additionsTail=null,i=this._movesHead;null!==i;i=i._nextMoved)i.previousIndex=i.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(i,o,d,m){let y;return null===i?y=this._itTail:(y=i._prev,this._remove(i)),null!==(i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(i.item,o)||this._addIdentityChange(i,o),this._reinsertAfter(i,y,m)):null!==(i=null===this._linkedRecords?null:this._linkedRecords.get(d,m))?(Object.is(i.item,o)||this._addIdentityChange(i,o),this._moveAfter(i,y,m)):i=this._addAfter(new wM(o,d),y,m),i}_verifyReinsertion(i,o,d,m){let y=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==y?i=this._reinsertAfter(y,i._prev,m):i.currentIndex!=m&&(i.currentIndex=m,this._addToMoves(i,m)),i}_truncate(i){for(;null!==i;){const o=i._next;this._addToRemovals(this._unlink(i)),i=o}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(i,o,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(i);const m=i._prevRemoved,y=i._nextRemoved;return null===m?this._removalsHead=y:m._nextRemoved=y,null===y?this._removalsTail=m:y._prevRemoved=m,this._insertAfter(i,o,d),this._addToMoves(i,d),i}_moveAfter(i,o,d){return this._unlink(i),this._insertAfter(i,o,d),this._addToMoves(i,d),i}_addAfter(i,o,d){return this._insertAfter(i,o,d),this._additionsTail=null===this._additionsTail?this._additionsHead=i:this._additionsTail._nextAdded=i,i}_insertAfter(i,o,d){const m=null===o?this._itHead:o._next;return i._next=m,i._prev=o,null===m?this._itTail=i:m._prev=i,null===o?this._itHead=i:o._next=i,null===this._linkedRecords&&(this._linkedRecords=new uT),this._linkedRecords.put(i),i.currentIndex=d,i}_remove(i){return this._addToRemovals(this._unlink(i))}_unlink(i){null!==this._linkedRecords&&this._linkedRecords.remove(i);const o=i._prev,d=i._next;return null===o?this._itHead=d:o._next=d,null===d?this._itTail=o:d._prev=o,i}_addToMoves(i,o){return i.previousIndex===o||(this._movesTail=null===this._movesTail?this._movesHead=i:this._movesTail._nextMoved=i),i}_addToRemovals(i){return null===this._unlinkedRecords&&(this._unlinkedRecords=new uT),this._unlinkedRecords.put(i),i.currentIndex=null,i._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=i,i._prevRemoved=null):(i._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=i),i}_addIdentityChange(i,o){return i.item=o,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=i:this._identityChangesTail._nextIdentityChange=i,i}}class wM{constructor(i,o){this.item=i,this.trackById=o,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class RM{constructor(){this._head=null,this._tail=null}add(i){null===this._head?(this._head=this._tail=i,i._nextDup=null,i._prevDup=null):(this._tail._nextDup=i,i._prevDup=this._tail,i._nextDup=null,this._tail=i)}get(i,o){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===o||o<=d.currentIndex)&&Object.is(d.trackById,i))return d;return null}remove(i){const o=i._prevDup,d=i._nextDup;return null===o?this._head=d:o._nextDup=d,null===d?this._tail=o:d._prevDup=o,null===this._head}}class uT{constructor(){this.map=new Map}put(i){const o=i.trackById;let d=this.map.get(o);d||(d=new RM,this.map.set(o,d)),d.add(i)}get(i,o){const m=this.map.get(i);return m?m.get(i,o):null}remove(i){const o=i.trackById;return this.map.get(o).remove(i)&&this.map.delete(o),i}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function dT(n,i,o){const d=n.previousIndex;if(null===d)return d;let m=0;return o&&d<o.length&&(m=o[d]),d+i+m}class hT{constructor(){}supports(i){return i instanceof Map||ct(i)}create(){return new SM}}class SM{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(i){let o;for(o=this._mapHead;null!==o;o=o._next)i(o)}forEachPreviousItem(i){let o;for(o=this._previousMapHead;null!==o;o=o._nextPrevious)i(o)}forEachChangedItem(i){let o;for(o=this._changesHead;null!==o;o=o._nextChanged)i(o)}forEachAddedItem(i){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)i(o)}forEachRemovedItem(i){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)i(o)}diff(i){if(i){if(!(i instanceof Map||ct(i)))throw new Me(900,!1)}else i=new Map;return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let o=this._mapHead;if(this._appendAfter=null,this._forEach(i,(d,m)=>{if(o&&o.key===m)this._maybeAddToChanges(o,d),this._appendAfter=o,o=o._next;else{const y=this._getOrCreateRecordForKey(m,d);o=this._insertBeforeOrAppend(o,y)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(let d=o;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(i,o){if(i){const d=i._prev;return o._next=i,o._prev=d,i._prev=o,d&&(d._next=o),i===this._mapHead&&(this._mapHead=o),this._appendAfter=i,i}return this._appendAfter?(this._appendAfter._next=o,o._prev=this._appendAfter):this._mapHead=o,this._appendAfter=o,null}_getOrCreateRecordForKey(i,o){if(this._records.has(i)){const m=this._records.get(i);this._maybeAddToChanges(m,o);const y=m._prev,D=m._next;return y&&(y._next=D),D&&(D._prev=y),m._next=null,m._prev=null,m}const d=new CM(i);return this._records.set(i,d),d.currentValue=o,this._addToAdditions(d),d}_reset(){if(this.isDirty){let i;for(this._previousMapHead=this._mapHead,i=this._previousMapHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._changesHead;null!==i;i=i._nextChanged)i.previousValue=i.currentValue;for(i=this._additionsHead;null!=i;i=i._nextAdded)i.previousValue=i.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(i,o){Object.is(o,i.currentValue)||(i.previousValue=i.currentValue,i.currentValue=o,this._addToChanges(i))}_addToAdditions(i){null===this._additionsHead?this._additionsHead=this._additionsTail=i:(this._additionsTail._nextAdded=i,this._additionsTail=i)}_addToChanges(i){null===this._changesHead?this._changesHead=this._changesTail=i:(this._changesTail._nextChanged=i,this._changesTail=i)}_forEach(i,o){i instanceof Map?i.forEach(o):Object.keys(i).forEach(d=>o(i[d],d))}}class CM{constructor(i){this.key=i,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function fT(){return new F0([new cT])}let F0=(()=>{class n{constructor(o){this.factories=o}static create(o,d){if(null!=d){const m=d.factories.slice();o=o.concat(m)}return new n(o)}static extend(o){return{provide:n,useFactory:d=>n.create(o,d||fT()),deps:[[n,new Sa,new id]]}}find(o){const d=this.factories.find(m=>m.supports(o));if(null!=d)return d;throw new Me(901,!1)}}return n.\u0275prov=wn({token:n,providedIn:"root",factory:fT}),n})();function pT(){return new L0([new hT])}let L0=(()=>{class n{constructor(o){this.factories=o}static create(o,d){if(d){const m=d.factories.slice();o=o.concat(m)}return new n(o)}static extend(o){return{provide:n,useFactory:d=>n.create(o,d||pT()),deps:[[n,new Sa,new id]]}}find(o){const d=this.factories.find(m=>m.supports(o));if(d)return d;throw new Me(901,!1)}}return n.\u0275prov=wn({token:n,providedIn:"root",factory:pT}),n})();const IM=Xb(null,"core",[]);let PM=(()=>{class n{constructor(o){}}return n.\u0275fac=function(o){return new(o||n)($i(xy))},n.\u0275mod=uo({type:n}),n.\u0275inj=Si({}),n})();function OM(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}function FM(n,i){const o=pi(n),d=i.elementInjector||vu();return new $c(o).create(d,i.projectableNodes,i.hostElement,i.environmentInjector)}},1481:(_n,Ke,te)=>{te.d(Ke,{Dx:()=>Li,b2:()=>qi,q6:()=>Ia});var a=te(6895),ie=te(1571);class pe extends a.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Ee extends pe{static makeCurrent(){(0,a.HT)(new Ee)}onAndCancel(ve,ae,Re){return ve.addEventListener(ae,Re,!1),()=>{ve.removeEventListener(ae,Re,!1)}}dispatchEvent(ve,ae){ve.dispatchEvent(ae)}remove(ve){ve.parentNode&&ve.parentNode.removeChild(ve)}createElement(ve,ae){return(ae=ae||this.getDefaultDocument()).createElement(ve)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(ve){return ve.nodeType===Node.ELEMENT_NODE}isShadowRoot(ve){return ve instanceof DocumentFragment}getGlobalEventTarget(ve,ae){return"window"===ae?window:"document"===ae?ve:"body"===ae?ve.body:null}getBaseHref(ve){const ae=function Qe(){return Ae=Ae||document.querySelector("base"),Ae?Ae.getAttribute("href"):null}();return null==ae?null:function St(we){We=We||document.createElement("a"),We.setAttribute("href",we);const ve=We.pathname;return"/"===ve.charAt(0)?ve:`/${ve}`}(ae)}resetBaseElement(){Ae=null}getUserAgent(){return window.navigator.userAgent}getCookie(ve){return(0,a.Mx)(document.cookie,ve)}}let We,Ae=null;const ft=new ie.OlP("TRANSITION_ID"),He=[{provide:ie.ip1,useFactory:function Ue(we,ve,ae){return()=>{ae.get(ie.CZH).donePromise.then(()=>{const Re=(0,a.q)(),Fe=ve.querySelectorAll(`style[ng-transition="${we}"]`);for(let Yt=0;Yt<Fe.length;Yt++)Re.remove(Fe[Yt])})}},deps:[ft,a.K0,ie.zs3],multi:!0}];let Gt=(()=>{class we{build(){return new XMLHttpRequest}}return we.\u0275fac=function(ae){return new(ae||we)},we.\u0275prov=ie.Yz7({token:we,factory:we.\u0275fac}),we})();const Xe=new ie.OlP("EventManagerPlugins");let Ge=(()=>{class we{constructor(ae,Re){this._zone=Re,this._eventNameToPlugin=new Map,ae.forEach(Fe=>{Fe.manager=this}),this._plugins=ae.slice().reverse()}addEventListener(ae,Re,Fe){return this._findPluginFor(Re).addEventListener(ae,Re,Fe)}addGlobalEventListener(ae,Re,Fe){return this._findPluginFor(Re).addGlobalEventListener(ae,Re,Fe)}getZone(){return this._zone}_findPluginFor(ae){const Re=this._eventNameToPlugin.get(ae);if(Re)return Re;const Fe=this._plugins;for(let Yt=0;Yt<Fe.length;Yt++){const zn=Fe[Yt];if(zn.supports(ae))return this._eventNameToPlugin.set(ae,zn),zn}throw new Error(`No event manager plugin found for event ${ae}`)}}return we.\u0275fac=function(ae){return new(ae||we)(ie.LFG(Xe),ie.LFG(ie.R0b))},we.\u0275prov=ie.Yz7({token:we,factory:we.\u0275fac}),we})();class lt{constructor(ve){this._doc=ve}addGlobalEventListener(ve,ae,Re){const Fe=(0,a.q)().getGlobalEventTarget(this._doc,ve);if(!Fe)throw new Error(`Unsupported event target ${Fe} for event ${ae}`);return this.addEventListener(Fe,ae,Re)}}let It=(()=>{class we{constructor(){this.usageCount=new Map}addStyles(ae){for(const Re of ae)1===this.changeUsageCount(Re,1)&&this.onStyleAdded(Re)}removeStyles(ae){for(const Re of ae)0===this.changeUsageCount(Re,-1)&&this.onStyleRemoved(Re)}onStyleRemoved(ae){}onStyleAdded(ae){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(ae,Re){const Fe=this.usageCount;let Yt=Fe.get(ae)??0;return Yt+=Re,Yt>0?Fe.set(ae,Yt):Fe.delete(ae),Yt}ngOnDestroy(){for(const ae of this.getAllStyles())this.onStyleRemoved(ae);this.usageCount.clear()}}return we.\u0275fac=function(ae){return new(ae||we)},we.\u0275prov=ie.Yz7({token:we,factory:we.\u0275fac}),we})(),Qt=(()=>{class we extends It{constructor(ae){super(),this.doc=ae,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(ae){for(const Re of this.hostNodes)this.addStyleToHost(Re,ae)}onStyleRemoved(ae){const Re=this.styleRef;Re.get(ae)?.forEach(Yt=>Yt.remove()),Re.delete(ae)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(ae){this.hostNodes.add(ae);for(const Re of this.getAllStyles())this.addStyleToHost(ae,Re)}removeHost(ae){this.hostNodes.delete(ae)}addStyleToHost(ae,Re){const Fe=this.doc.createElement("style");Fe.textContent=Re,ae.appendChild(Fe);const Yt=this.styleRef.get(Re);Yt?Yt.push(Fe):this.styleRef.set(Re,[Fe])}resetHostNodes(){const ae=this.hostNodes;ae.clear(),ae.add(this.doc.head)}}return we.\u0275fac=function(ae){return new(ae||we)(ie.LFG(a.K0))},we.\u0275prov=ie.Yz7({token:we,factory:we.\u0275fac}),we})();const ti={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},an=/%COMP%/g,Zt=new ie.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function Kt(we,ve){return ve.flat(100).map(ae=>ae.replace(an,we))}function yn(we){return ve=>{if("__ngUnwrap__"===ve)return we;!1===we(ve)&&(ve.preventDefault(),ve.returnValue=!1)}}let fn=(()=>{class we{constructor(ae,Re,Fe,Yt){this.eventManager=ae,this.sharedStylesHost=Re,this.appId=Fe,this.removeStylesOnCompDestory=Yt,this.rendererByCompId=new Map,this.defaultRenderer=new $e(ae)}createRenderer(ae,Re){if(!ae||!Re)return this.defaultRenderer;const Fe=this.getOrCreateRenderer(ae,Re);return Fe instanceof Cn?Fe.applyToHost(ae):Fe instanceof Dt&&Fe.applyStyles(),Fe}getOrCreateRenderer(ae,Re){const Fe=this.rendererByCompId;let Yt=Fe.get(Re.id);if(!Yt){const zn=this.eventManager,Bi=this.sharedStylesHost,Ki=this.removeStylesOnCompDestory;switch(Re.encapsulation){case ie.ifc.Emulated:Yt=new Cn(zn,Bi,Re,this.appId,Ki);break;case ie.ifc.ShadowDom:return new wt(zn,Bi,ae,Re);default:Yt=new Dt(zn,Bi,Re,Ki)}Yt.onDestroy=()=>Fe.delete(Re.id),Fe.set(Re.id,Yt)}return Yt}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return we.\u0275fac=function(ae){return new(ae||we)(ie.LFG(Ge),ie.LFG(Qt),ie.LFG(ie.AFp),ie.LFG(Zt))},we.\u0275prov=ie.Yz7({token:we,factory:we.\u0275fac}),we})();class $e{constructor(ve){this.eventManager=ve,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(ve,ae){return ae?document.createElementNS(ti[ae]||ae,ve):document.createElement(ve)}createComment(ve){return document.createComment(ve)}createText(ve){return document.createTextNode(ve)}appendChild(ve,ae){(nt(ve)?ve.content:ve).appendChild(ae)}insertBefore(ve,ae,Re){ve&&(nt(ve)?ve.content:ve).insertBefore(ae,Re)}removeChild(ve,ae){ve&&ve.removeChild(ae)}selectRootElement(ve,ae){let Re="string"==typeof ve?document.querySelector(ve):ve;if(!Re)throw new Error(`The selector "${ve}" did not match any elements`);return ae||(Re.textContent=""),Re}parentNode(ve){return ve.parentNode}nextSibling(ve){return ve.nextSibling}setAttribute(ve,ae,Re,Fe){if(Fe){ae=Fe+":"+ae;const Yt=ti[Fe];Yt?ve.setAttributeNS(Yt,ae,Re):ve.setAttribute(ae,Re)}else ve.setAttribute(ae,Re)}removeAttribute(ve,ae,Re){if(Re){const Fe=ti[Re];Fe?ve.removeAttributeNS(Fe,ae):ve.removeAttribute(`${Re}:${ae}`)}else ve.removeAttribute(ae)}addClass(ve,ae){ve.classList.add(ae)}removeClass(ve,ae){ve.classList.remove(ae)}setStyle(ve,ae,Re,Fe){Fe&(ie.JOm.DashCase|ie.JOm.Important)?ve.style.setProperty(ae,Re,Fe&ie.JOm.Important?"important":""):ve.style[ae]=Re}removeStyle(ve,ae,Re){Re&ie.JOm.DashCase?ve.style.removeProperty(ae):ve.style[ae]=""}setProperty(ve,ae,Re){ve[ae]=Re}setValue(ve,ae){ve.nodeValue=ae}listen(ve,ae,Re){return"string"==typeof ve?this.eventManager.addGlobalEventListener(ve,ae,yn(Re)):this.eventManager.addEventListener(ve,ae,yn(Re))}}function nt(we){return"TEMPLATE"===we.tagName&&void 0!==we.content}class wt extends $e{constructor(ve,ae,Re,Fe){super(ve),this.sharedStylesHost=ae,this.hostEl=Re,this.shadowRoot=Re.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Yt=Kt(Fe.id,Fe.styles);for(const zn of Yt){const Bi=document.createElement("style");Bi.textContent=zn,this.shadowRoot.appendChild(Bi)}}nodeOrShadowRoot(ve){return ve===this.hostEl?this.shadowRoot:ve}appendChild(ve,ae){return super.appendChild(this.nodeOrShadowRoot(ve),ae)}insertBefore(ve,ae,Re){return super.insertBefore(this.nodeOrShadowRoot(ve),ae,Re)}removeChild(ve,ae){return super.removeChild(this.nodeOrShadowRoot(ve),ae)}parentNode(ve){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(ve)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Dt extends $e{constructor(ve,ae,Re,Fe,Yt=Re.id){super(ve),this.sharedStylesHost=ae,this.removeStylesOnCompDestory=Fe,this.rendererUsageCount=0,this.styles=Kt(Yt,Re.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class Cn extends Dt{constructor(ve,ae,Re,Fe,Yt){const zn=Fe+"-"+Re.id;super(ve,ae,Re,Yt,zn),this.contentAttr=function vn(we){return"_ngcontent-%COMP%".replace(an,we)}(zn),this.hostAttr=function Jt(we){return"_nghost-%COMP%".replace(an,we)}(zn)}applyToHost(ve){this.applyStyles(),this.setAttribute(ve,this.hostAttr,"")}createElement(ve,ae){const Re=super.createElement(ve,ae);return super.setAttribute(Re,this.contentAttr,""),Re}}let ui=(()=>{class we extends lt{constructor(ae){super(ae)}supports(ae){return!0}addEventListener(ae,Re,Fe){return ae.addEventListener(Re,Fe,!1),()=>this.removeEventListener(ae,Re,Fe)}removeEventListener(ae,Re,Fe){return ae.removeEventListener(Re,Fe)}}return we.\u0275fac=function(ae){return new(ae||we)(ie.LFG(a.K0))},we.\u0275prov=ie.Yz7({token:we,factory:we.\u0275fac}),we})();const tr=["alt","control","meta","shift"],Pn={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Wn={alt:we=>we.altKey,control:we=>we.ctrlKey,meta:we=>we.metaKey,shift:we=>we.shiftKey};let Wt=(()=>{class we extends lt{constructor(ae){super(ae)}supports(ae){return null!=we.parseEventName(ae)}addEventListener(ae,Re,Fe){const Yt=we.parseEventName(Re),zn=we.eventCallback(Yt.fullKey,Fe,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,a.q)().onAndCancel(ae,Yt.domEventName,zn))}static parseEventName(ae){const Re=ae.toLowerCase().split("."),Fe=Re.shift();if(0===Re.length||"keydown"!==Fe&&"keyup"!==Fe)return null;const Yt=we._normalizeKey(Re.pop());let zn="",Bi=Re.indexOf("code");if(Bi>-1&&(Re.splice(Bi,1),zn="code."),tr.forEach(Is=>{const Tr=Re.indexOf(Is);Tr>-1&&(Re.splice(Tr,1),zn+=Is+".")}),zn+=Yt,0!=Re.length||0===Yt.length)return null;const Ki={};return Ki.domEventName=Fe,Ki.fullKey=zn,Ki}static matchEventFullKeyCode(ae,Re){let Fe=Pn[ae.key]||ae.key,Yt="";return Re.indexOf("code.")>-1&&(Fe=ae.code,Yt="code."),!(null==Fe||!Fe)&&(Fe=Fe.toLowerCase()," "===Fe?Fe="space":"."===Fe&&(Fe="dot"),tr.forEach(zn=>{zn!==Fe&&(0,Wn[zn])(ae)&&(Yt+=zn+".")}),Yt+=Fe,Yt===Re)}static eventCallback(ae,Re,Fe){return Yt=>{we.matchEventFullKeyCode(Yt,ae)&&Fe.runGuarded(()=>Re(Yt))}}static _normalizeKey(ae){return"esc"===ae?"escape":ae}}return we.\u0275fac=function(ae){return new(ae||we)(ie.LFG(a.K0))},we.\u0275prov=ie.Yz7({token:we,factory:we.\u0275fac}),we})();const Ia=(0,ie.eFA)(ie._c5,"browser",[{provide:ie.Lbi,useValue:a.bD},{provide:ie.g9A,useValue:function Si(){Ee.makeCurrent()},multi:!0},{provide:a.K0,useFactory:function us(){return(0,ie.RDi)(document),document},deps:[]}]),Sr=new ie.OlP(""),lo=[{provide:ie.rWj,useClass:class rt{addToWindow(ve){ie.dqk.getAngularTestability=(Re,Fe=!0)=>{const Yt=ve.findTestabilityInTree(Re,Fe);if(null==Yt)throw new Error("Could not find testability for element.");return Yt},ie.dqk.getAllAngularTestabilities=()=>ve.getAllTestabilities(),ie.dqk.getAllAngularRootElements=()=>ve.getAllRootElements(),ie.dqk.frameworkStabilizers||(ie.dqk.frameworkStabilizers=[]),ie.dqk.frameworkStabilizers.push(Re=>{const Fe=ie.dqk.getAllAngularTestabilities();let Yt=Fe.length,zn=!1;const Bi=function(Ki){zn=zn||Ki,Yt--,0==Yt&&Re(zn)};Fe.forEach(function(Ki){Ki.whenStable(Bi)})})}findTestabilityInTree(ve,ae,Re){return null==ae?null:ve.getTestability(ae)??(Re?(0,a.q)().isShadowRoot(ae)?this.findTestabilityInTree(ve,ae.host,!0):this.findTestabilityInTree(ve,ae.parentElement,!0):null)}},deps:[]},{provide:ie.lri,useClass:ie.dDg,deps:[ie.R0b,ie.eoX,ie.rWj]},{provide:ie.dDg,useClass:ie.dDg,deps:[ie.R0b,ie.eoX,ie.rWj]}],$o=[{provide:ie.zSh,useValue:"root"},{provide:ie.qLn,useFactory:function Ur(){return new ie.qLn},deps:[]},{provide:Xe,useClass:ui,multi:!0,deps:[a.K0,ie.R0b,ie.Lbi]},{provide:Xe,useClass:Wt,multi:!0,deps:[a.K0]},{provide:fn,useClass:fn,deps:[Ge,Qt,ie.AFp,Zt]},{provide:ie.FYo,useExisting:fn},{provide:It,useExisting:Qt},{provide:Qt,useClass:Qt,deps:[a.K0]},{provide:Ge,useClass:Ge,deps:[Xe,ie.R0b]},{provide:a.JF,useClass:Gt,deps:[]},[]];let qi=(()=>{class we{constructor(ae){}static withServerTransition(ae){return{ngModule:we,providers:[{provide:ie.AFp,useValue:ae.appId},{provide:ft,useExisting:ie.AFp},He]}}}return we.\u0275fac=function(ae){return new(ae||we)(ie.LFG(Sr,12))},we.\u0275mod=ie.oAB({type:we}),we.\u0275inj=ie.cJS({providers:[...$o,...lo],imports:[a.ez,ie.hGG]}),we})(),Li=(()=>{class we{constructor(ae){this._doc=ae}getTitle(){return this._doc.title}setTitle(ae){this._doc.title=ae||""}}return we.\u0275fac=function(ae){return new(ae||we)(ie.LFG(a.K0))},we.\u0275prov=ie.Yz7({token:we,factory:function(ae){let Re=null;return Re=ae?new ae:function Vs(){return new Li((0,ie.LFG)(a.K0))}(),Re},providedIn:"root"}),we})();typeof window<"u"&&window},2655:(_n,Ke,te)=>{te.d(Ke,{Bz:()=>jo,lC:()=>$r});var a=te(1571),ie=te(2076),pe=te(9646),Ee=te(1135);const Qe=(0,te(3888).d)(w=>function(){w(this),this.name="EmptyError",this.message="no elements in sequence"});var We=te(9841),St=te(7272),ft=te(9751),Ue=te(8421);function He(w){return new ft.y(R=>{(0,Ue.Xf)(w()).subscribe(R)})}var rt=te(9635),Gt=te(576);function Xe(w,R){const M=(0,Gt.m)(w)?w:()=>w,P=V=>V.error(M());return new ft.y(R?V=>R.schedule(P,0,V):P)}var Ge=te(515),lt=te(727),It=te(4482),Qt=te(5403);function ti(){return(0,It.e)((w,R)=>{let M=null;w._refCount++;const P=(0,Qt.x)(R,void 0,void 0,void 0,()=>{if(!w||w._refCount<=0||0<--w._refCount)return void(M=null);const V=w._connection,q=M;M=null,V&&(!q||V===q)&&V.unsubscribe(),R.unsubscribe()});w.subscribe(P),P.closed||(M=w.connect())})}class an extends ft.y{constructor(R,M){super(),this.source=R,this.subjectFactory=M,this._subject=null,this._refCount=0,this._connection=null,(0,It.A)(R)&&(this.lift=R.lift)}_subscribe(R){return this.getSubject().subscribe(R)}getSubject(){const R=this._subject;return(!R||R.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:R}=this;this._subject=this._connection=null,R?.unsubscribe()}connect(){let R=this._connection;if(!R){R=this._connection=new lt.w0;const M=this.getSubject();R.add(this.source.subscribe((0,Qt.x)(M,void 0,()=>{this._teardown(),M.complete()},P=>{this._teardown(),M.error(P)},()=>this._teardown()))),R.closed&&(this._connection=null,R=lt.w0.EMPTY)}return R}refCount(){return ti()(this)}}var Me=te(7579),ot=te(6895),ke=te(4004),Ot=te(3900),rn=te(5698),Zt=te(8675),vn=te(9300),Jt=te(5577);function Kt(w){return(0,It.e)((R,M)=>{let P=!1;R.subscribe((0,Qt.x)(M,V=>{P=!0,M.next(V)},()=>{P||M.next(w),M.complete()}))})}function yn(w=fn){return(0,It.e)((R,M)=>{let P=!1;R.subscribe((0,Qt.x)(M,V=>{P=!0,M.next(V)},()=>P?M.complete():M.error(w())))})}function fn(){return new Qe}var $e=te(4671);function Le(w,R){const M=arguments.length>=2;return P=>P.pipe(w?(0,vn.h)((V,q)=>w(V,q,P)):$e.y,(0,rn.q)(1),M?Kt(R):yn(()=>new Qe))}function Je(w,R){return(0,Gt.m)(R)?(0,Jt.z)(w,R,1):(0,Jt.z)(w,1)}var nt=te(8505);function wt(w){return(0,It.e)((R,M)=>{let q,P=null,V=!1;P=R.subscribe((0,Qt.x)(M,void 0,void 0,ee=>{q=(0,Ue.Xf)(w(ee,wt(w)(R))),P?(P.unsubscribe(),P=null,q.subscribe(M)):V=!0})),V&&(P.unsubscribe(),P=null,q.subscribe(M))})}function Cn(w,R){return(0,It.e)(function Dt(w,R,M,P,V){return(q,ee)=>{let be=M,Ze=R,Ft=0;q.subscribe((0,Qt.x)(ee,qt=>{const gi=Ft++;Ze=be?w(Ze,qt,gi):(be=!0,qt),P&&ee.next(Ze)},V&&(()=>{be&&ee.next(Ze),ee.complete()})))}}(w,R,arguments.length>=2,!0))}function ui(w){return w<=0?()=>Ge.E:(0,It.e)((R,M)=>{let P=[];R.subscribe((0,Qt.x)(M,V=>{P.push(V),w<P.length&&P.shift()},()=>{for(const V of P)M.next(V);M.complete()},void 0,()=>{P=null}))})}function tr(w,R){const M=arguments.length>=2;return P=>P.pipe(w?(0,vn.h)((V,q)=>w(V,q,P)):$e.y,ui(1),M?Kt(R):yn(()=>new Qe))}var Wn=te(9718);function Wt(w){return(0,It.e)((R,M)=>{try{R.subscribe(M)}finally{M.add(w)}})}var Ri=te(8189),Es=te(1481);const Sn="primary",wn=Symbol("RouteTitle");class cr{constructor(R){this.params=R||{}}has(R){return Object.prototype.hasOwnProperty.call(this.params,R)}get(R){if(this.has(R)){const M=this.params[R];return Array.isArray(M)?M[0]:M}return null}getAll(R){if(this.has(R)){const M=this.params[R];return Array.isArray(M)?M:[M]}return[]}get keys(){return Object.keys(this.params)}}function Si(w){return new cr(w)}function Ur(w,R,M){const P=M.path.split("/");if(P.length>w.length||"full"===M.pathMatch&&(R.hasChildren()||P.length<w.length))return null;const V={};for(let q=0;q<P.length;q++){const ee=P[q],be=w[q];if(ee.startsWith(":"))V[ee.substring(1)]=be;else if(ee!==be.path)return null}return{consumed:w.slice(0,P.length),posParams:V}}function Qr(w,R){const M=w?Object.keys(w):void 0,P=R?Object.keys(R):void 0;if(!M||!P||M.length!=P.length)return!1;let V;for(let q=0;q<M.length;q++)if(V=M[q],!Ia(w[V],R[V]))return!1;return!0}function Ia(w,R){if(Array.isArray(w)&&Array.isArray(R)){if(w.length!==R.length)return!1;const M=[...w].sort(),P=[...R].sort();return M.every((V,q)=>P[q]===V)}return w===R}function Sr(w){return Array.prototype.concat.apply([],w)}function lo(w){return w.length>0?w[w.length-1]:null}function qi(w,R){for(const M in w)w.hasOwnProperty(M)&&R(w[M],M)}function Cr(w){return(0,a.CqO)(w)?w:(0,a.QGY)(w)?(0,ie.D)(Promise.resolve(w)):(0,pe.of)(w)}const As=!1,bn={exact:function Ye(w,R,M){if(!fi(w.segments,R.segments)||!Us(w.segments,R.segments,M)||w.numberOfChildren!==R.numberOfChildren)return!1;for(const P in R.children)if(!w.children[P]||!Ye(w.children[P],R.children[P],M))return!1;return!0},subset:Bn},Vs={exact:function tn(w,R){return Qr(w,R)},subset:function fa(w,R){return Object.keys(R).length<=Object.keys(w).length&&Object.keys(R).every(M=>Ia(w[M],R[M]))},ignored:()=>!0};function Li(w,R,M){return bn[M.paths](w.root,R.root,M.matrixParams)&&Vs[M.queryParams](w.queryParams,R.queryParams)&&!("exact"===M.fragment&&w.fragment!==R.fragment)}function Bn(w,R,M){return Hr(w,R,R.segments,M)}function Hr(w,R,M,P){if(w.segments.length>M.length){const V=w.segments.slice(0,M.length);return!(!fi(V,M)||R.hasChildren()||!Us(V,M,P))}if(w.segments.length===M.length){if(!fi(w.segments,M)||!Us(w.segments,M,P))return!1;for(const V in R.children)if(!w.children[V]||!Bn(w.children[V],R.children[V],P))return!1;return!0}{const V=M.slice(0,w.segments.length),q=M.slice(w.segments.length);return!!(fi(w.segments,V)&&Us(w.segments,V,P)&&w.children[Sn])&&Hr(w.children[Sn],R,q,P)}}function Us(w,R,M){return R.every((P,V)=>Vs[M](w[V].parameters,P.parameters))}class nr{constructor(R=new An([],{}),M={},P=null){this.root=R,this.queryParams=M,this.fragment=P}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Si(this.queryParams)),this._queryParamMap}toString(){return zs.serialize(this)}}class An{constructor(R,M){this.segments=R,this.children=M,this.parent=null,qi(M,(P,V)=>P.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ws(this)}}class mn{constructor(R,M){this.path=R,this.parameters=M}get parameterMap(){return this._parameterMap||(this._parameterMap=Si(this.parameters)),this._parameterMap}toString(){return co(this)}}function fi(w,R){return w.length===R.length&&w.every((M,P)=>M.path===R[P].path)}let Do=(()=>{class w{}return w.\u0275fac=function(M){return new(M||w)},w.\u0275prov=a.Yz7({token:w,factory:function(){return new Hs},providedIn:"root"}),w})();class Hs{parse(R){const M=new zn(R);return new nr(M.parseRootSegment(),M.parseQueryParams(),M.parseFragment())}serialize(R){const M=`/${es(R.root,!0)}`,P=function Bl(w){const R=Object.keys(w).map(M=>{const P=w[M];return Array.isArray(P)?P.map(V=>`${yi(M)}=${yi(V)}`).join("&"):`${yi(M)}=${yi(P)}`}).filter(M=>!!M);return R.length?`?${R.join("&")}`:""}(R.queryParams);return`${M}${P}${"string"==typeof R.fragment?`#${function br(w){return encodeURI(w)}(R.fragment)}`:""}`}}const zs=new Hs;function Ws(w){return w.segments.map(R=>co(R)).join("/")}function es(w,R){if(!w.hasChildren())return Ws(w);if(R){const M=w.children[Sn]?es(w.children[Sn],!1):"",P=[];return qi(w.children,(V,q)=>{q!==Sn&&P.push(`${q}:${es(V,!1)}`)}),P.length>0?`${M}(${P.join("//")})`:M}{const M=function xo(w,R){let M=[];return qi(w.children,(P,V)=>{V===Sn&&(M=M.concat(R(P,V)))}),qi(w.children,(P,V)=>{V!==Sn&&(M=M.concat(R(P,V)))}),M}(w,(P,V)=>V===Sn?[es(w.children[Sn],!1)]:[`${V}:${es(P,!1)}`]);return 1===Object.keys(w.children).length&&null!=w.children[Sn]?`${Ws(w)}/${M[0]}`:`${Ws(w)}/(${M.join("//")})`}}function $i(w){return encodeURIComponent(w).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function yi(w){return $i(w).replace(/%3B/gi,";")}function $s(w){return $i(w).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Jo(w){return decodeURIComponent(w)}function wo(w){return Jo(w.replace(/\+/g,"%20"))}function co(w){return`${$s(w.path)}${function hl(w){return Object.keys(w).map(R=>`;${$s(R)}=${$s(w[R])}`).join("")}(w.parameters)}`}const we=/^[^\/()?;=#]+/;function ve(w){const R=w.match(we);return R?R[0]:""}const ae=/^[^=?&#]+/,Fe=/^[^&#]+/;class zn{constructor(R){this.url=R,this.remaining=R}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new An([],{}):new An([],this.parseChildren())}parseQueryParams(){const R={};if(this.consumeOptional("?"))do{this.parseQueryParam(R)}while(this.consumeOptional("&"));return R}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const R=[];for(this.peekStartsWith("(")||R.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),R.push(this.parseSegment());let M={};this.peekStartsWith("/(")&&(this.capture("/"),M=this.parseParens(!0));let P={};return this.peekStartsWith("(")&&(P=this.parseParens(!1)),(R.length>0||Object.keys(M).length>0)&&(P[Sn]=new An(R,M)),P}parseSegment(){const R=ve(this.remaining);if(""===R&&this.peekStartsWith(";"))throw new a.vHH(4009,As);return this.capture(R),new mn(Jo(R),this.parseMatrixParams())}parseMatrixParams(){const R={};for(;this.consumeOptional(";");)this.parseParam(R);return R}parseParam(R){const M=ve(this.remaining);if(!M)return;this.capture(M);let P="";if(this.consumeOptional("=")){const V=ve(this.remaining);V&&(P=V,this.capture(P))}R[Jo(M)]=Jo(P)}parseQueryParam(R){const M=function Re(w){const R=w.match(ae);return R?R[0]:""}(this.remaining);if(!M)return;this.capture(M);let P="";if(this.consumeOptional("=")){const ee=function Yt(w){const R=w.match(Fe);return R?R[0]:""}(this.remaining);ee&&(P=ee,this.capture(P))}const V=wo(M),q=wo(P);if(R.hasOwnProperty(V)){let ee=R[V];Array.isArray(ee)||(ee=[ee],R[V]=ee),ee.push(q)}else R[V]=q}parseParens(R){const M={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const P=ve(this.remaining),V=this.remaining[P.length];if("/"!==V&&")"!==V&&";"!==V)throw new a.vHH(4010,As);let q;P.indexOf(":")>-1?(q=P.slice(0,P.indexOf(":")),this.capture(q),this.capture(":")):R&&(q=Sn);const ee=this.parseChildren();M[q]=1===Object.keys(ee).length?ee[Sn]:new An([],ee),this.consumeOptional("//")}return M}peekStartsWith(R){return this.remaining.startsWith(R)}consumeOptional(R){return!!this.peekStartsWith(R)&&(this.remaining=this.remaining.substring(R.length),!0)}capture(R){if(!this.consumeOptional(R))throw new a.vHH(4011,As)}}function Bi(w){return w.segments.length>0?new An([],{[Sn]:w}):w}function Ki(w){const R={};for(const P of Object.keys(w.children)){const q=Ki(w.children[P]);(q.segments.length>0||q.hasChildren())&&(R[P]=q)}return function Is(w){if(1===w.numberOfChildren&&w.children[Sn]){const R=w.children[Sn];return new An(w.segments.concat(R.segments),R.children)}return w}(new An(w.segments,R))}function Tr(w){return w instanceof nr}const pa=!1;function jl(w,R,M,P,V){if(0===M.length)return Ys(R.root,R.root,R.root,P,V);const q=function pi(w){if("string"==typeof w[0]&&1===w.length&&"/"===w[0])return new ma(!0,0,w);let R=0,M=!1;const P=w.reduce((V,q,ee)=>{if("object"==typeof q&&null!=q){if(q.outlets){const be={};return qi(q.outlets,(Ze,Ft)=>{be[Ft]="string"==typeof Ze?Ze.split("/"):Ze}),[...V,{outlets:be}]}if(q.segmentPath)return[...V,q.segmentPath]}return"string"!=typeof q?[...V,q]:0===ee?(q.split("/").forEach((be,Ze)=>{0==Ze&&"."===be||(0==Ze&&""===be?M=!0:".."===be?R++:""!=be&&V.push(be))}),V):[...V,q]},[]);return new ma(M,R,P)}(M);return q.toRoot()?Ys(R.root,R.root,new An([],{}),P,V):function ee(Ze){const Ft=function zr(w,R,M,P){if(w.isAbsolute)return new ir(R.root,!0,0);if(-1===P)return new ir(M,M===R.root,0);return function Fr(w,R,M){let P=w,V=R,q=M;for(;q>V;){if(q-=V,P=P.parent,!P)throw new a.vHH(4005,pa&&"Invalid number of '../'");V=P.segments.length}return new ir(P,!1,V-q)}(M,P+(uo(w.commands[0])?0:1),w.numberOfDoubleDots)}(q,R,w.snapshot?._urlSegment,Ze),qt=Ft.processChildren?Js(Ft.segmentGroup,Ft.index,q.commands):Na(Ft.segmentGroup,Ft.index,q.commands);return Ys(R.root,Ft.segmentGroup,qt,P,V)}(w.snapshot?._lastPathIndex)}function uo(w){return"object"==typeof w&&null!=w&&!w.outlets&&!w.segmentPath}function Zo(w){return"object"==typeof w&&null!=w&&w.outlets}function Ys(w,R,M,P,V){let ee,q={};P&&qi(P,(Ze,Ft)=>{q[Ft]=Array.isArray(Ze)?Ze.map(qt=>`${qt}`):`${Ze}`}),ee=w===R?M:io(w,R,M);const be=Bi(Ki(ee));return new nr(be,q,V)}function io(w,R,M){const P={};return qi(w.children,(V,q)=>{P[q]=V===R?M:io(V,R,M)}),new An(w.segments,P)}class ma{constructor(R,M,P){if(this.isAbsolute=R,this.numberOfDoubleDots=M,this.commands=P,R&&P.length>0&&uo(P[0]))throw new a.vHH(4003,pa&&"Root segment cannot have matrix parameters");const V=P.find(Zo);if(V&&V!==lo(P))throw new a.vHH(4004,pa&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ir{constructor(R,M,P){this.segmentGroup=R,this.processChildren=M,this.index=P}}function Na(w,R,M){if(w||(w=new An([],{})),0===w.segments.length&&w.hasChildren())return Js(w,R,M);const P=function qs(w,R,M){let P=0,V=R;const q={match:!1,pathIndex:0,commandIndex:0};for(;V<w.segments.length;){if(P>=M.length)return q;const ee=w.segments[V],be=M[P];if(Zo(be))break;const Ze=`${be}`,Ft=P<M.length-1?M[P+1]:null;if(V>0&&void 0===Ze)break;if(Ze&&Ft&&"object"==typeof Ft&&void 0===Ft.outlets){if(!ts(Ze,Ft,ee))return q;P+=2}else{if(!ts(Ze,{},ee))return q;P++}V++}return{match:!0,pathIndex:V,commandIndex:P}}(w,R,M),V=M.slice(P.commandIndex);if(P.match&&P.pathIndex<w.segments.length){const q=new An(w.segments.slice(0,P.pathIndex),{});return q.children[Sn]=new An(w.segments.slice(P.pathIndex),w.children),Js(q,0,V)}return P.match&&0===V.length?new An(w.segments,{}):P.match&&!w.hasChildren()?Vt(w,R,M):P.match?Js(w,0,V):Vt(w,R,M)}function Js(w,R,M){if(0===M.length)return new An(w.segments,{});{const P=function Sc(w){return Zo(w[0])?w[0].outlets:{[Sn]:w}}(M),V={};if(!P[Sn]&&w.children[Sn]&&1===w.numberOfChildren&&0===w.children[Sn].segments.length){const q=Js(w.children[Sn],R,M);return new An(w.segments,q.children)}return qi(P,(q,ee)=>{"string"==typeof q&&(q=[q]),null!==q&&(V[ee]=Na(w.children[ee],R,q))}),qi(w.children,(q,ee)=>{void 0===P[ee]&&(V[ee]=q)}),new An(w.segments,V)}}function Vt(w,R,M){const P=w.segments.slice(0,R);let V=0;for(;V<M.length;){const q=M[V];if(Zo(q)){const Ze=On(q.outlets);return new An(P,Ze)}if(0===V&&uo(M[0])){P.push(new mn(w.segments[R].path,Ai(M[0]))),V++;continue}const ee=Zo(q)?q.outlets[Sn]:`${q}`,be=V<M.length-1?M[V+1]:null;ee&&be&&uo(be)?(P.push(new mn(ee,Ai(be))),V+=2):(P.push(new mn(ee,{})),V++)}return new An(P,{})}function On(w){const R={};return qi(w,(M,P)=>{"string"==typeof M&&(M=[M]),null!==M&&(R[P]=Vt(new An([],{}),0,M))}),R}function Ai(w){const R={};return qi(w,(M,P)=>R[P]=`${M}`),R}function ts(w,R,M){return w==M.path&&Qr(R,M.parameters)}const ys="imperative";class Yi{constructor(R,M){this.id=R,this.url=M}}class Ro extends Yi{constructor(R,M,P="imperative",V=null){super(R,M),this.type=0,this.navigationTrigger=P,this.restoredState=V}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Oi extends Yi{constructor(R,M,P){super(R,M),this.urlAfterRedirects=P,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class So extends Yi{constructor(R,M,P,V){super(R,M),this.reason=P,this.code=V,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class ho extends Yi{constructor(R,M,P,V){super(R,M),this.reason=P,this.code=V,this.type=16}}class jn extends Yi{constructor(R,M,P,V){super(R,M),this.error=P,this.target=V,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class kl extends Yi{constructor(R,M,P,V){super(R,M),this.urlAfterRedirects=P,this.state=V,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Zs extends Yi{constructor(R,M,P,V){super(R,M),this.urlAfterRedirects=P,this.state=V,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Co extends Yi{constructor(R,M,P,V,q){super(R,M),this.urlAfterRedirects=P,this.state=V,this.shouldActivate=q,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class fo extends Yi{constructor(R,M,P,V){super(R,M),this.urlAfterRedirects=P,this.state=V,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Mr extends Yi{constructor(R,M,P,V){super(R,M),this.urlAfterRedirects=P,this.state=V,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Fa{constructor(R){this.route=R,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Lr{constructor(R){this.route=R,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class ds{constructor(R){this.snapshot=R,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ko{constructor(R){this.snapshot=R,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class bs{constructor(R){this.snapshot=R,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Dn{constructor(R){this.snapshot=R,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Gl{constructor(R,M,P){this.routerEvent=R,this.position=M,this.anchor=P,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let fl=(()=>{class w{createUrlTree(M,P,V,q,ee,be){return jl(M||P.root,V,q,ee,be)}}return w.\u0275fac=function(M){return new(M||w)},w.\u0275prov=a.Yz7({token:w,factory:w.\u0275fac}),w})(),Wr=(()=>{class w{}return w.\u0275fac=function(M){return new(M||w)},w.\u0275prov=a.Yz7({token:w,factory:function(R){return fl.\u0275fac(R)},providedIn:"root"}),w})();class ur{constructor(R){this._root=R}get root(){return this._root.value}parent(R){const M=this.pathFromRoot(R);return M.length>1?M[M.length-2]:null}children(R){const M=Cc(R,this._root);return M?M.children.map(P=>P.value):[]}firstChild(R){const M=Cc(R,this._root);return M&&M.children.length>0?M.children[0].value:null}siblings(R){const M=xr(R,this._root);return M.length<2?[]:M[M.length-2].children.map(V=>V.value).filter(V=>V!==R)}pathFromRoot(R){return xr(R,this._root).map(M=>M.value)}}function Cc(w,R){if(w===R.value)return R;for(const M of R.children){const P=Cc(w,M);if(P)return P}return null}function xr(w,R){if(w===R.value)return[R];for(const M of R.children){const P=xr(w,M);if(P.length)return P.unshift(R),P}return[]}class Er{constructor(R,M){this.value=R,this.children=M}toString(){return`TreeNode(${this.value})`}}function ga(w){const R={};return w&&w.children.forEach(M=>R[M.value.outlet]=M),R}class La extends ur{constructor(R,M){super(R),this.snapshot=M,zl(this,R)}toString(){return this.snapshot.toString()}}function Ul(w,R){const M=function ns(w,R){const ee=new ea([],{},{},"",{},Sn,R,null,w.root,-1,{});return new Hl("",new Er(ee,[]))}(w,R),P=new Ee.X([new mn("",{})]),V=new Ee.X({}),q=new Ee.X({}),ee=new Ee.X({}),be=new Ee.X(""),Ze=new Qo(P,V,ee,be,q,Sn,R,M.root);return Ze.snapshot=M.root,new La(new Er(Ze,[]),M)}class Qo{constructor(R,M,P,V,q,ee,be,Ze){this.url=R,this.params=M,this.queryParams=P,this.fragment=V,this.data=q,this.outlet=ee,this.component=be,this.title=this.data?.pipe((0,ke.U)(Ft=>Ft[wn]))??(0,pe.of)(void 0),this._futureSnapshot=Ze}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,ke.U)(R=>Si(R)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,ke.U)(R=>Si(R)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function pl(w,R="emptyOnly"){const M=w.pathFromRoot;let P=0;if("always"!==R)for(P=M.length-1;P>=1;){const V=M[P],q=M[P-1];if(V.routeConfig&&""===V.routeConfig.path)P--;else{if(q.component)break;P--}}return function ml(w){return w.reduce((R,M)=>({params:{...R.params,...M.params},data:{...R.data,...M.data},resolve:{...M.data,...R.resolve,...M.routeConfig?.data,...M._resolvedData}}),{params:{},data:{},resolve:{}})}(M.slice(P))}class ea{get title(){return this.data?.[wn]}constructor(R,M,P,V,q,ee,be,Ze,Ft,qt,gi){this.url=R,this.params=M,this.queryParams=P,this.fragment=V,this.data=q,this.outlet=ee,this.component=be,this.routeConfig=Ze,this._urlSegment=Ft,this._lastPathIndex=qt,this._resolve=gi}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Si(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Si(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(P=>P.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Hl extends ur{constructor(R,M){super(M),this.url=R,zl(this,M)}toString(){return gl(this._root)}}function zl(w,R){R.value._routerState=w,R.children.forEach(M=>zl(w,M))}function gl(w){const R=w.children.length>0?` { ${w.children.map(gl).join(", ")} } `:"";return`${w.value}${R}`}function Wl(w){if(w.snapshot){const R=w.snapshot,M=w._futureSnapshot;w.snapshot=M,Qr(R.queryParams,M.queryParams)||w.queryParams.next(M.queryParams),R.fragment!==M.fragment&&w.fragment.next(M.fragment),Qr(R.params,M.params)||w.params.next(M.params),function us(w,R){if(w.length!==R.length)return!1;for(let M=0;M<w.length;++M)if(!Qr(w[M],R[M]))return!1;return!0}(R.url,M.url)||w.url.next(M.url),Qr(R.data,M.data)||w.data.next(M.data)}else w.snapshot=w._futureSnapshot,w.data.next(w._futureSnapshot.data)}function Qc(w,R){const M=Qr(w.params,R.params)&&function Yo(w,R){return fi(w,R)&&w.every((M,P)=>Qr(M.parameters,R[P].parameters))}(w.url,R.url);return M&&!(!w.parent!=!R.parent)&&(!w.parent||Qc(w.parent,R.parent))}function Ba(w,R,M){if(M&&w.shouldReuseRoute(R.value,M.value.snapshot)){const P=M.value;P._futureSnapshot=R.value;const V=function Hd(w,R,M){return R.children.map(P=>{for(const V of M.children)if(w.shouldReuseRoute(P.value,V.value.snapshot))return Ba(w,P,V);return Ba(w,P)})}(w,R,M);return new Er(P,V)}{if(w.shouldAttach(R.value)){const q=w.retrieve(R.value);if(null!==q){const ee=q.route;return ee.value._futureSnapshot=R.value,ee.children=R.children.map(be=>Ba(w,be)),ee}}const P=function qu(w){return new Qo(new Ee.X(w.url),new Ee.X(w.params),new Ee.X(w.queryParams),new Ee.X(w.fragment),new Ee.X(w.data),w.outlet,w.component,w)}(R.value),V=R.children.map(q=>Ba(w,q));return new Er(P,V)}}const eu="ngNavigationCancelingError";function zd(w,R){const{redirectTo:M,navigationBehaviorOptions:P}=Tr(R)?{redirectTo:R,navigationBehaviorOptions:void 0}:R,V=Wd(!1,0,R);return V.url=M,V.navigationBehaviorOptions=P,V}function Wd(w,R,M){const P=new Error("NavigationCancelingError: "+(w||""));return P[eu]=!0,P.cancellationCode=R,M&&(P.url=M),P}function Yl(w){return Zu(w)&&Tr(w.url)}function Zu(w){return w&&w[eu]}class yp{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new ta,this.attachRef=null}}let ta=(()=>{class w{constructor(){this.contexts=new Map}onChildOutletCreated(M,P){const V=this.getOrCreateContext(M);V.outlet=P,this.contexts.set(M,V)}onChildOutletDestroyed(M){const P=this.getContext(M);P&&(P.outlet=null,P.attachRef=null)}onOutletDeactivated(){const M=this.contexts;return this.contexts=new Map,M}onOutletReAttached(M){this.contexts=M}getOrCreateContext(M){let P=this.getContext(M);return P||(P=new yp,this.contexts.set(M,P)),P}getContext(M){return this.contexts.get(M)||null}}return w.\u0275fac=function(M){return new(M||w)},w.\u0275prov=a.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})();const ja=!1;let $r=(()=>{class w{constructor(){this.activated=null,this._activatedRoute=null,this.name=Sn,this.activateEvents=new a.vpe,this.deactivateEvents=new a.vpe,this.attachEvents=new a.vpe,this.detachEvents=new a.vpe,this.parentContexts=(0,a.f3M)(ta),this.location=(0,a.f3M)(a.s_b),this.changeDetector=(0,a.f3M)(a.sBO),this.environmentInjector=(0,a.f3M)(a.lqb)}ngOnChanges(M){if(M.name){const{firstChange:P,previousValue:V}=M.name;if(P)return;this.isTrackedInParentContexts(V)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(V)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(M){return this.parentContexts.getContext(M)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const M=this.parentContexts.getContext(this.name);M?.route&&(M.attachRef?this.attach(M.attachRef,M.route):this.activateWith(M.route,M.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new a.vHH(4012,ja);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new a.vHH(4012,ja);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new a.vHH(4012,ja);this.location.detach();const M=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(M.instance),M}attach(M,P){this.activated=M,this._activatedRoute=P,this.location.insert(M.hostView),this.attachEvents.emit(M.instance)}deactivate(){if(this.activated){const M=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(M)}}activateWith(M,P){if(this.isActivated)throw new a.vHH(4013,ja);this._activatedRoute=M;const V=this.location,ee=M.snapshot.component,be=this.parentContexts.getOrCreateContext(this.name).children,Ze=new Ar(M,be,V.injector);if(P&&function Jl(w){return!!w.resolveComponentFactory}(P)){const Ft=P.resolveComponentFactory(ee);this.activated=V.createComponent(Ft,V.length,Ze)}else this.activated=V.createComponent(ee,{index:V.length,injector:Ze,environmentInjector:P??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return w.\u0275fac=function(M){return new(M||w)},w.\u0275dir=a.lG2({type:w,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[a.TTD]}),w})();class Ar{constructor(R,M,P){this.route=R,this.childContexts=M,this.parent=P}get(R,M){return R===Qo?this.route:R===ta?this.childContexts:this.parent.get(R,M)}}let po=(()=>{class w{}return w.\u0275fac=function(M){return new(M||w)},w.\u0275cmp=a.Xpm({type:w,selectors:[["ng-component"]],standalone:!0,features:[a.jDz],decls:1,vars:0,template:function(M,P){1&M&&a._UZ(0,"router-outlet")},dependencies:[$r],encapsulation:2}),w})();function ka(w,R){return w.providers&&!w._injector&&(w._injector=(0,a.MMx)(w.providers,R,`Route: ${w.path}`)),w._injector??R}function ql(w){const R=w.children&&w.children.map(ql),M=R?{...w,children:R}:{...w};return!M.component&&!M.loadComponent&&(R||M.loadChildren)&&M.outlet&&M.outlet!==Sn&&(M.component=po),M}function ji(w){return w.outlet||Sn}function Ku(w,R){const M=w.filter(P=>ji(P)===R);return M.push(...w.filter(P=>ji(P)!==R)),M}function ia(w){if(!w)return null;if(w.routeConfig?._injector)return w.routeConfig._injector;for(let R=w.parent;R;R=R.parent){const M=R.routeConfig;if(M?._loadedInjector)return M._loadedInjector;if(M?._injector)return M._injector}return null}class Ec{constructor(R,M,P,V){this.routeReuseStrategy=R,this.futureState=M,this.currState=P,this.forwardEvent=V}activate(R){const M=this.futureState._root,P=this.currState?this.currState._root:null;this.deactivateChildRoutes(M,P,R),Wl(this.futureState.root),this.activateChildRoutes(M,P,R)}deactivateChildRoutes(R,M,P){const V=ga(M);R.children.forEach(q=>{const ee=q.value.outlet;this.deactivateRoutes(q,V[ee],P),delete V[ee]}),qi(V,(q,ee)=>{this.deactivateRouteAndItsChildren(q,P)})}deactivateRoutes(R,M,P){const V=R.value,q=M?M.value:null;if(V===q)if(V.component){const ee=P.getContext(V.outlet);ee&&this.deactivateChildRoutes(R,M,ee.children)}else this.deactivateChildRoutes(R,M,P);else q&&this.deactivateRouteAndItsChildren(M,P)}deactivateRouteAndItsChildren(R,M){R.value.component&&this.routeReuseStrategy.shouldDetach(R.value.snapshot)?this.detachAndStoreRouteSubtree(R,M):this.deactivateRouteAndOutlet(R,M)}detachAndStoreRouteSubtree(R,M){const P=M.getContext(R.value.outlet),V=P&&R.value.component?P.children:M,q=ga(R);for(const ee of Object.keys(q))this.deactivateRouteAndItsChildren(q[ee],V);if(P&&P.outlet){const ee=P.outlet.detach(),be=P.children.onOutletDeactivated();this.routeReuseStrategy.store(R.value.snapshot,{componentRef:ee,route:R,contexts:be})}}deactivateRouteAndOutlet(R,M){const P=M.getContext(R.value.outlet),V=P&&R.value.component?P.children:M,q=ga(R);for(const ee of Object.keys(q))this.deactivateRouteAndItsChildren(q[ee],V);P&&(P.outlet&&(P.outlet.deactivate(),P.children.onOutletDeactivated()),P.attachRef=null,P.resolver=null,P.route=null)}activateChildRoutes(R,M,P){const V=ga(M);R.children.forEach(q=>{this.activateRoutes(q,V[q.value.outlet],P),this.forwardEvent(new Dn(q.value.snapshot))}),R.children.length&&this.forwardEvent(new Ko(R.value.snapshot))}activateRoutes(R,M,P){const V=R.value,q=M?M.value:null;if(Wl(V),V===q)if(V.component){const ee=P.getOrCreateContext(V.outlet);this.activateChildRoutes(R,M,ee.children)}else this.activateChildRoutes(R,M,P);else if(V.component){const ee=P.getOrCreateContext(V.outlet);if(this.routeReuseStrategy.shouldAttach(V.snapshot)){const be=this.routeReuseStrategy.retrieve(V.snapshot);this.routeReuseStrategy.store(V.snapshot,null),ee.children.onOutletReAttached(be.contexts),ee.attachRef=be.componentRef,ee.route=be.route.value,ee.outlet&&ee.outlet.attach(be.componentRef,be.route.value),Wl(be.route.value),this.activateChildRoutes(R,null,ee.children)}else{const be=ia(V.snapshot),Ze=be?.get(a._Vd)??null;ee.attachRef=null,ee.route=V,ee.resolver=Ze,ee.injector=be,ee.outlet&&ee.outlet.activateWith(V,ee.injector),this.activateChildRoutes(R,null,ee.children)}}else this.activateChildRoutes(R,null,P)}}class Zl{constructor(R){this.path=R,this.route=this.path[this.path.length-1]}}class mo{constructor(R,M){this.component=R,this.route=M}}function Br(w,R,M){const P=w._root;return ya(P,R?R._root:null,M,[P.value])}function Ps(w,R){const M=Symbol(),P=R.get(w,M);return P===M?"function"!=typeof w||(0,a.Z0I)(w)?R.get(w):w:P}function ya(w,R,M,P,V={canDeactivateChecks:[],canActivateChecks:[]}){const q=ga(R);return w.children.forEach(ee=>{(function is(w,R,M,P,V={canDeactivateChecks:[],canActivateChecks:[]}){const q=w.value,ee=R?R.value:null,be=M?M.getContext(w.value.outlet):null;if(ee&&q.routeConfig===ee.routeConfig){const Ze=function ki(w,R,M){if("function"==typeof M)return M(w,R);switch(M){case"pathParamsChange":return!fi(w.url,R.url);case"pathParamsOrQueryParamsChange":return!fi(w.url,R.url)||!Qr(w.queryParams,R.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Qc(w,R)||!Qr(w.queryParams,R.queryParams);default:return!Qc(w,R)}}(ee,q,q.routeConfig.runGuardsAndResolvers);Ze?V.canActivateChecks.push(new Zl(P)):(q.data=ee.data,q._resolvedData=ee._resolvedData),ya(w,R,q.component?be?be.children:null:M,P,V),Ze&&be&&be.outlet&&be.outlet.isActivated&&V.canDeactivateChecks.push(new mo(be.outlet.component,ee))}else ee&&ba(R,be,V),V.canActivateChecks.push(new Zl(P)),ya(w,null,q.component?be?be.children:null:M,P,V)})(ee,q[ee.value.outlet],M,P.concat([ee.value]),V),delete q[ee.value.outlet]}),qi(q,(ee,be)=>ba(ee,M.getContext(be),V)),V}function ba(w,R,M){const P=ga(w),V=w.value;qi(P,(q,ee)=>{ba(q,V.component?R?R.children.getContext(ee):null:R,M)}),M.canDeactivateChecks.push(new mo(V.component&&R&&R.outlet&&R.outlet.isActivated?R.outlet.component:null,V))}function Oe(w){return"function"==typeof w}function pt(w){return w instanceof Qe||"EmptyError"===w?.name}const Rn=Symbol("INITIAL_VALUE");function Eo(){return(0,Ot.w)(w=>(0,We.a)(w.map(R=>R.pipe((0,rn.q)(1),(0,Zt.O)(Rn)))).pipe((0,ke.U)(R=>{for(const M of R)if(!0!==M){if(M===Rn)return Rn;if(!1===M||M instanceof nr)return M}return!0}),(0,vn.h)(R=>R!==Rn),(0,rn.q)(1)))}function bl(w){return(0,rt.z)((0,nt.b)(R=>{if(Tr(R))throw zd(0,R)}),(0,ke.U)(R=>!0===R))}const Dr={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Ii(w,R,M,P,V){const q=rs(w,R,M);return q.matched?function jr(w,R,M,P){const V=R.canMatch;if(!V||0===V.length)return(0,pe.of)(!0);const q=V.map(ee=>{const be=Ps(ee,w);return Cr(function Ta(w){return w&&Oe(w.canMatch)}(be)?be.canMatch(R,M):w.runInContext(()=>be(R,M)))});return(0,pe.of)(q).pipe(Eo(),bl())}(P=ka(R,P),R,M).pipe((0,ke.U)(ee=>!0===ee?q:{...Dr})):(0,pe.of)(q)}function rs(w,R,M){if(""===R.path)return"full"===R.pathMatch&&(w.hasChildren()||M.length>0)?{...Dr}:{matched:!0,consumedSegments:[],remainingSegments:M,parameters:{},positionalParamSegments:{}};const V=(R.matcher||Ur)(M,w,R);if(!V)return{...Dr};const q={};qi(V.posParams,(be,Ze)=>{q[Ze]=be.path});const ee=V.consumed.length>0?{...q,...V.consumed[V.consumed.length-1].parameters}:q;return{matched:!0,consumedSegments:V.consumed,remainingSegments:M.slice(V.consumed.length),parameters:ee,positionalParamSegments:V.posParams??{}}}function fs(w,R,M,P){if(M.length>0&&function Ha(w,R,M){return M.some(P=>wr(w,R,P)&&ji(P)!==Sn)}(w,M,P)){const q=new An(R,function Xl(w,R,M,P){const V={};V[Sn]=P,P._sourceSegment=w,P._segmentIndexShift=R.length;for(const q of M)if(""===q.path&&ji(q)!==Sn){const ee=new An([],{});ee._sourceSegment=w,ee._segmentIndexShift=R.length,V[ji(q)]=ee}return V}(w,R,P,new An(M,w.children)));return q._sourceSegment=w,q._segmentIndexShift=R.length,{segmentGroup:q,slicedSegments:[]}}if(0===M.length&&function $d(w,R,M){return M.some(P=>wr(w,R,P))}(w,M,P)){const q=new An(w.segments,function Ic(w,R,M,P,V){const q={};for(const ee of P)if(wr(w,M,ee)&&!V[ji(ee)]){const be=new An([],{});be._sourceSegment=w,be._segmentIndexShift=R.length,q[ji(ee)]=be}return{...V,...q}}(w,R,M,P,w.children));return q._sourceSegment=w,q._segmentIndexShift=R.length,{segmentGroup:q,slicedSegments:M}}const V=new An(w.segments,w.children);return V._sourceSegment=w,V._segmentIndexShift=R.length,{segmentGroup:V,slicedSegments:M}}function wr(w,R,M){return(!(w.hasChildren()||R.length>0)||"full"!==M.pathMatch)&&""===M.path}function ce(w,R,M,P){return!!(ji(w)===P||P!==Sn&&wr(R,M,w))&&("**"===w.path||rs(R,w,M).matched)}function za(w,R,M){return 0===R.length&&!w.children[M]}const Ma=!1;class Io{constructor(R){this.segmentGroup=R||null}}class Os{constructor(R){this.urlTree=R}}function xs(w){return Xe(new Io(w))}function Wa(w){return Xe(new Os(w))}class _o{constructor(R,M,P,V,q){this.injector=R,this.configLoader=M,this.urlSerializer=P,this.urlTree=V,this.config=q,this.allowRedirects=!0}apply(){const R=fs(this.urlTree.root,[],[],this.config).segmentGroup,M=new An(R.segments,R.children);return this.expandSegmentGroup(this.injector,this.config,M,Sn).pipe((0,ke.U)(q=>this.createUrlTree(Ki(q),this.urlTree.queryParams,this.urlTree.fragment))).pipe(wt(q=>{if(q instanceof Os)return this.allowRedirects=!1,this.match(q.urlTree);throw q instanceof Io?this.noMatchError(q):q}))}match(R){return this.expandSegmentGroup(this.injector,this.config,R.root,Sn).pipe((0,ke.U)(V=>this.createUrlTree(Ki(V),R.queryParams,R.fragment))).pipe(wt(V=>{throw V instanceof Io?this.noMatchError(V):V}))}noMatchError(R){return new a.vHH(4002,Ma)}createUrlTree(R,M,P){const V=Bi(R);return new nr(V,M,P)}expandSegmentGroup(R,M,P,V){return 0===P.segments.length&&P.hasChildren()?this.expandChildren(R,M,P).pipe((0,ke.U)(q=>new An([],q))):this.expandSegment(R,P,M,P.segments,V,!0)}expandChildren(R,M,P){const V=[];for(const q of Object.keys(P.children))"primary"===q?V.unshift(q):V.push(q);return(0,ie.D)(V).pipe(Je(q=>{const ee=P.children[q],be=Ku(M,q);return this.expandSegmentGroup(R,be,ee,q).pipe((0,ke.U)(Ze=>({segment:Ze,outlet:q})))}),Cn((q,ee)=>(q[ee.outlet]=ee.segment,q),{}),tr())}expandSegment(R,M,P,V,q,ee){return(0,ie.D)(P).pipe(Je(be=>this.expandSegmentAgainstRoute(R,M,P,be,V,q,ee).pipe(wt(Ft=>{if(Ft instanceof Io)return(0,pe.of)(null);throw Ft}))),Le(be=>!!be),wt((be,Ze)=>{if(pt(be))return za(M,V,q)?(0,pe.of)(new An([],{})):xs(M);throw be}))}expandSegmentAgainstRoute(R,M,P,V,q,ee,be){return ce(V,M,q,ee)?void 0===V.redirectTo?this.matchSegmentAgainstRoute(R,M,V,q,ee):be&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(R,M,P,V,q,ee):xs(M):xs(M)}expandSegmentAgainstRouteUsingRedirect(R,M,P,V,q,ee){return"**"===V.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(R,P,V,ee):this.expandRegularSegmentAgainstRouteUsingRedirect(R,M,P,V,q,ee)}expandWildCardWithParamsAgainstRouteUsingRedirect(R,M,P,V){const q=this.applyRedirectCommands([],P.redirectTo,{});return P.redirectTo.startsWith("/")?Wa(q):this.lineralizeSegments(P,q).pipe((0,Jt.z)(ee=>{const be=new An(ee,{});return this.expandSegment(R,be,M,ee,V,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(R,M,P,V,q,ee){const{matched:be,consumedSegments:Ze,remainingSegments:Ft,positionalParamSegments:qt}=rs(M,V,q);if(!be)return xs(M);const gi=this.applyRedirectCommands(Ze,V.redirectTo,qt);return V.redirectTo.startsWith("/")?Wa(gi):this.lineralizeSegments(V,gi).pipe((0,Jt.z)(er=>this.expandSegment(R,M,P,er.concat(Ft),ee,!1)))}matchSegmentAgainstRoute(R,M,P,V,q){return"**"===P.path?(R=ka(P,R),P.loadChildren?(P._loadedRoutes?(0,pe.of)({routes:P._loadedRoutes,injector:P._loadedInjector}):this.configLoader.loadChildren(R,P)).pipe((0,ke.U)(be=>(P._loadedRoutes=be.routes,P._loadedInjector=be.injector,new An(V,{})))):(0,pe.of)(new An(V,{}))):Ii(M,P,V,R).pipe((0,Ot.w)(({matched:ee,consumedSegments:be,remainingSegments:Ze})=>ee?this.getChildConfig(R=P._injector??R,P,V).pipe((0,Jt.z)(qt=>{const gi=qt.injector??R,er=qt.routes,{segmentGroup:ko,slicedSegments:pr}=fs(M,be,Ze,er),Go=new An(ko.segments,ko.children);if(0===pr.length&&Go.hasChildren())return this.expandChildren(gi,er,Go).pipe((0,ke.U)(nd=>new An(be,nd)));if(0===er.length&&0===pr.length)return(0,pe.of)(new An(be,{}));const gs=ji(P)===q;return this.expandSegment(gi,Go,er,pr,gs?Sn:q,!0).pipe((0,ke.U)(Qa=>new An(be.concat(Qa.segments),Qa.children)))})):xs(M)))}getChildConfig(R,M,P){return M.children?(0,pe.of)({routes:M.children,injector:R}):M.loadChildren?void 0!==M._loadedRoutes?(0,pe.of)({routes:M._loadedRoutes,injector:M._loadedInjector}):function yl(w,R,M,P){const V=R.canLoad;if(void 0===V||0===V.length)return(0,pe.of)(!0);const q=V.map(ee=>{const be=Ps(ee,w);return Cr(function nu(w){return w&&Oe(w.canLoad)}(be)?be.canLoad(R,M):w.runInContext(()=>be(R,M)))});return(0,pe.of)(q).pipe(Eo(),bl())}(R,M,P).pipe((0,Jt.z)(V=>V?this.configLoader.loadChildren(R,M).pipe((0,nt.b)(q=>{M._loadedRoutes=q.routes,M._loadedInjector=q.injector})):function sa(w){return Xe(Wd(Ma,3))}())):(0,pe.of)({routes:[],injector:R})}lineralizeSegments(R,M){let P=[],V=M.root;for(;;){if(P=P.concat(V.segments),0===V.numberOfChildren)return(0,pe.of)(P);if(V.numberOfChildren>1||!V.children[Sn])return R.redirectTo,Xe(new a.vHH(4e3,Ma));V=V.children[Sn]}}applyRedirectCommands(R,M,P){return this.applyRedirectCreateUrlTree(M,this.urlSerializer.parse(M),R,P)}applyRedirectCreateUrlTree(R,M,P,V){const q=this.createSegmentGroup(R,M.root,P,V);return new nr(q,this.createQueryParams(M.queryParams,this.urlTree.queryParams),M.fragment)}createQueryParams(R,M){const P={};return qi(R,(V,q)=>{if("string"==typeof V&&V.startsWith(":")){const be=V.substring(1);P[q]=M[be]}else P[q]=V}),P}createSegmentGroup(R,M,P,V){const q=this.createSegments(R,M.segments,P,V);let ee={};return qi(M.children,(be,Ze)=>{ee[Ze]=this.createSegmentGroup(R,be,P,V)}),new An(q,ee)}createSegments(R,M,P,V){return M.map(q=>q.path.startsWith(":")?this.findPosParam(R,q,V):this.findOrReturn(q,P))}findPosParam(R,M,P){const V=P[M.path.substring(1)];if(!V)throw new a.vHH(4001,Ma);return V}findOrReturn(R,M){let P=0;for(const V of M){if(V.path===R.path)return M.splice(P),V;P++}return R}}class Rr{}class xa{constructor(R,M,P,V,q,ee,be){this.injector=R,this.rootComponentType=M,this.config=P,this.urlTree=V,this.url=q,this.paramsInheritanceStrategy=ee,this.urlSerializer=be}recognize(){const R=fs(this.urlTree.root,[],[],this.config.filter(M=>void 0===M.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,R,Sn).pipe((0,ke.U)(M=>{if(null===M)return null;const P=new ea([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Sn,this.rootComponentType,null,this.urlTree.root,-1,{}),V=new Er(P,M),q=new Hl(this.url,V);return this.inheritParamsAndData(q._root),q}))}inheritParamsAndData(R){const M=R.value,P=pl(M,this.paramsInheritanceStrategy);M.params=Object.freeze(P.params),M.data=Object.freeze(P.data),R.children.forEach(V=>this.inheritParamsAndData(V))}processSegmentGroup(R,M,P,V){return 0===P.segments.length&&P.hasChildren()?this.processChildren(R,M,P):this.processSegment(R,M,P,P.segments,V)}processChildren(R,M,P){return(0,ie.D)(Object.keys(P.children)).pipe(Je(V=>{const q=P.children[V],ee=Ku(M,V);return this.processSegmentGroup(R,ee,q,V)}),Cn((V,q)=>V&&q?(V.push(...q),V):null),function Pn(w,R=!1){return(0,It.e)((M,P)=>{let V=0;M.subscribe((0,Qt.x)(P,q=>{const ee=w(q,V++);(ee||R)&&P.next(q),!ee&&P.complete()}))})}(V=>null!==V),Kt(null),tr(),(0,ke.U)(V=>{if(null===V)return null;const q=O(V);return function iu(w){w.sort((R,M)=>R.value.outlet===Sn?-1:M.value.outlet===Sn?1:R.value.outlet.localeCompare(M.value.outlet))}(q),q}))}processSegment(R,M,P,V,q){return(0,ie.D)(M).pipe(Je(ee=>this.processSegmentAgainstRoute(ee._injector??R,ee,P,V,q)),Le(ee=>!!ee),wt(ee=>{if(pt(ee))return za(P,V,q)?(0,pe.of)([]):(0,pe.of)(null);throw ee}))}processSegmentAgainstRoute(R,M,P,V,q){if(M.redirectTo||!ce(M,P,V,q))return(0,pe.of)(null);let ee;if("**"===M.path){const be=V.length>0?lo(V).parameters:{},Ze=X(P)+V.length,Ft=new ea(V,be,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Pe(M),ji(M),M.component??M._loadedComponent??null,M,B(P),Ze,et(M));ee=(0,pe.of)({snapshot:Ft,consumedSegments:[],remainingSegments:[]})}else ee=Ii(P,M,V,R).pipe((0,ke.U)(({matched:be,consumedSegments:Ze,remainingSegments:Ft,parameters:qt})=>{if(!be)return null;const gi=X(P)+Ze.length;return{snapshot:new ea(Ze,qt,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Pe(M),ji(M),M.component??M._loadedComponent??null,M,B(P),gi,et(M)),consumedSegments:Ze,remainingSegments:Ft}}));return ee.pipe((0,Ot.w)(be=>{if(null===be)return(0,pe.of)(null);const{snapshot:Ze,consumedSegments:Ft,remainingSegments:qt}=be;R=M._injector??R;const gi=M._loadedInjector??R,er=function Xu(w){return w.children?w.children:w.loadChildren?w._loadedRoutes:[]}(M),{segmentGroup:ko,slicedSegments:pr}=fs(P,Ft,qt,er.filter(gs=>void 0===gs.redirectTo));if(0===pr.length&&ko.hasChildren())return this.processChildren(gi,er,ko).pipe((0,ke.U)(gs=>null===gs?null:[new Er(Ze,gs)]));if(0===er.length&&0===pr.length)return(0,pe.of)([new Er(Ze,[])]);const Go=ji(M)===q;return this.processSegment(gi,er,ko,pr,Go?Sn:q).pipe((0,ke.U)(gs=>null===gs?null:[new Er(Ze,gs)]))}))}}function Ql(w){const R=w.value.routeConfig;return R&&""===R.path&&void 0===R.redirectTo}function O(w){const R=[],M=new Set;for(const P of w){if(!Ql(P)){R.push(P);continue}const V=R.find(q=>P.value.routeConfig===q.value.routeConfig);void 0!==V?(V.children.push(...P.children),M.add(V)):R.push(P)}for(const P of M){const V=O(P.children);R.push(new Er(P.value,V))}return R.filter(P=>!M.has(P))}function B(w){let R=w;for(;R._sourceSegment;)R=R._sourceSegment;return R}function X(w){let R=w,M=R._segmentIndexShift??0;for(;R._sourceSegment;)R=R._sourceSegment,M+=R._segmentIndexShift??0;return M-1}function Pe(w){return w.data||{}}function et(w){return w.resolve||{}}function H(w){return"string"==typeof w.title||null===w.title}function C(w){return(0,Ot.w)(R=>{const M=w(R);return M?(0,ie.D)(M).pipe((0,ke.U)(()=>R)):(0,pe.of)(R)})}const U=new a.OlP("ROUTES");let Ve=(()=>{class w{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,a.f3M)(a.Sil)}loadComponent(M){if(this.componentLoaders.get(M))return this.componentLoaders.get(M);if(M._loadedComponent)return(0,pe.of)(M._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(M);const P=Cr(M.loadComponent()).pipe((0,ke.U)(ii),(0,nt.b)(q=>{this.onLoadEndListener&&this.onLoadEndListener(M),M._loadedComponent=q}),Wt(()=>{this.componentLoaders.delete(M)})),V=new an(P,()=>new Me.x).pipe(ti());return this.componentLoaders.set(M,V),V}loadChildren(M,P){if(this.childrenLoaders.get(P))return this.childrenLoaders.get(P);if(P._loadedRoutes)return(0,pe.of)({routes:P._loadedRoutes,injector:P._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(P);const q=this.loadModuleFactoryOrRoutes(P.loadChildren).pipe((0,ke.U)(be=>{this.onLoadEndListener&&this.onLoadEndListener(P);let Ze,Ft,qt=!1;Array.isArray(be)?Ft=be:(Ze=be.create(M).injector,Ft=Sr(Ze.get(U,[],a.XFs.Self|a.XFs.Optional)));return{routes:Ft.map(ql),injector:Ze}}),Wt(()=>{this.childrenLoaders.delete(P)})),ee=new an(q,()=>new Me.x).pipe(ti());return this.childrenLoaders.set(P,ee),ee}loadModuleFactoryOrRoutes(M){return Cr(M()).pipe((0,ke.U)(ii),(0,Jt.z)(P=>P instanceof a.YKP||Array.isArray(P)?(0,pe.of)(P):(0,ie.D)(this.compiler.compileModuleAsync(P))))}}return w.\u0275fac=function(M){return new(M||w)},w.\u0275prov=a.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})();function ii(w){return function nn(w){return w&&"object"==typeof w&&"default"in w}(w)?w.default:w}let hr=(()=>{class w{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new Me.x,this.configLoader=(0,a.f3M)(Ve),this.environmentInjector=(0,a.f3M)(a.lqb),this.urlSerializer=(0,a.f3M)(Do),this.rootContexts=(0,a.f3M)(ta),this.navigationId=0,this.afterPreactivation=()=>(0,pe.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=V=>this.events.next(new Lr(V)),this.configLoader.onLoadStartListener=V=>this.events.next(new Fa(V))}complete(){this.transitions?.complete()}handleNavigationRequest(M){const P=++this.navigationId;this.transitions?.next({...this.transitions.value,...M,id:P})}setupNavigations(M){return this.transitions=new Ee.X({id:0,targetPageId:0,currentUrlTree:M.currentUrlTree,currentRawUrl:M.currentUrlTree,extractedUrl:M.urlHandlingStrategy.extract(M.currentUrlTree),urlAfterRedirects:M.urlHandlingStrategy.extract(M.currentUrlTree),rawUrl:M.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:ys,restoredState:null,currentSnapshot:M.routerState.snapshot,targetSnapshot:null,currentRouterState:M.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,vn.h)(P=>0!==P.id),(0,ke.U)(P=>({...P,extractedUrl:M.urlHandlingStrategy.extract(P.rawUrl)})),(0,Ot.w)(P=>{let V=!1,q=!1;return(0,pe.of)(P).pipe((0,nt.b)(ee=>{this.currentNavigation={id:ee.id,initialUrl:ee.rawUrl,extractedUrl:ee.extractedUrl,trigger:ee.source,extras:ee.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Ot.w)(ee=>{const be=M.browserUrlTree.toString(),Ze=!M.navigated||ee.extractedUrl.toString()!==be||be!==M.currentUrlTree.toString();if(!Ze&&"reload"!==(ee.extras.onSameUrlNavigation??M.onSameUrlNavigation)){const qt="";return this.events.next(new ho(ee.id,M.serializeUrl(P.rawUrl),qt,0)),M.rawUrlTree=ee.rawUrl,ee.resolve(null),Ge.E}if(M.urlHandlingStrategy.shouldProcessUrl(ee.rawUrl))return $a(ee.source)&&(M.browserUrlTree=ee.extractedUrl),(0,pe.of)(ee).pipe((0,Ot.w)(qt=>{const gi=this.transitions?.getValue();return this.events.next(new Ro(qt.id,this.urlSerializer.serialize(qt.extractedUrl),qt.source,qt.restoredState)),gi!==this.transitions?.getValue()?Ge.E:Promise.resolve(qt)}),function Oo(w,R,M,P){return(0,Ot.w)(V=>function Po(w,R,M,P,V){return new _o(w,R,M,P,V).apply()}(w,R,M,V.extractedUrl,P).pipe((0,ke.U)(q=>({...V,urlAfterRedirects:q}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,M.config),(0,nt.b)(qt=>{this.currentNavigation={...this.currentNavigation,finalUrl:qt.urlAfterRedirects},P.urlAfterRedirects=qt.urlAfterRedirects}),function sn(w,R,M,P,V){return(0,Jt.z)(q=>function Vi(w,R,M,P,V,q,ee="emptyOnly"){return new xa(w,R,M,P,V,ee,q).recognize().pipe((0,Ot.w)(be=>null===be?function Ds(w){return new ft.y(R=>R.error(w))}(new Rr):(0,pe.of)(be)))}(w,R,M,q.urlAfterRedirects,P.serialize(q.urlAfterRedirects),P,V).pipe((0,ke.U)(ee=>({...q,targetSnapshot:ee}))))}(this.environmentInjector,this.rootComponentType,M.config,this.urlSerializer,M.paramsInheritanceStrategy),(0,nt.b)(qt=>{if(P.targetSnapshot=qt.targetSnapshot,"eager"===M.urlUpdateStrategy){if(!qt.extras.skipLocationChange){const er=M.urlHandlingStrategy.merge(qt.urlAfterRedirects,qt.rawUrl);M.setBrowserUrl(er,qt)}M.browserUrlTree=qt.urlAfterRedirects}const gi=new kl(qt.id,this.urlSerializer.serialize(qt.extractedUrl),this.urlSerializer.serialize(qt.urlAfterRedirects),qt.targetSnapshot);this.events.next(gi)}));if(Ze&&M.urlHandlingStrategy.shouldProcessUrl(M.rawUrlTree)){const{id:qt,extractedUrl:gi,source:er,restoredState:ko,extras:pr}=ee,Go=new Ro(qt,this.urlSerializer.serialize(gi),er,ko);this.events.next(Go);const gs=Ul(gi,this.rootComponentType).snapshot;return P={...ee,targetSnapshot:gs,urlAfterRedirects:gi,extras:{...pr,skipLocationChange:!1,replaceUrl:!1}},(0,pe.of)(P)}{const qt="";return this.events.next(new ho(ee.id,M.serializeUrl(P.extractedUrl),qt,1)),M.rawUrlTree=ee.rawUrl,ee.resolve(null),Ge.E}}),(0,nt.b)(ee=>{const be=new Zs(ee.id,this.urlSerializer.serialize(ee.extractedUrl),this.urlSerializer.serialize(ee.urlAfterRedirects),ee.targetSnapshot);this.events.next(be)}),(0,ke.U)(ee=>P={...ee,guards:Br(ee.targetSnapshot,ee.currentSnapshot,this.rootContexts)}),function dr(w,R){return(0,Jt.z)(M=>{const{targetSnapshot:P,currentSnapshot:V,guards:{canActivateChecks:q,canDeactivateChecks:ee}}=M;return 0===ee.length&&0===q.length?(0,pe.of)({...M,guardsResult:!0}):function Gi(w,R,M,P){return(0,ie.D)(w).pipe((0,Jt.z)(V=>function Ao(w,R,M,P,V){const q=R&&R.routeConfig?R.routeConfig.canDeactivate:null;if(!q||0===q.length)return(0,pe.of)(!0);const ee=q.map(be=>{const Ze=ia(R)??V,Ft=Ps(be,Ze);return Cr(function Ga(w){return w&&Oe(w.canDeactivate)}(Ft)?Ft.canDeactivate(w,R,M,P):Ze.runInContext(()=>Ft(w,R,M,P))).pipe(Le())});return(0,pe.of)(ee).pipe(Eo())}(V.component,V.route,M,R,P)),Le(V=>!0!==V,!0))}(ee,P,V,w).pipe((0,Jt.z)(be=>be&&function Yr(w){return"boolean"==typeof w}(be)?function vl(w,R,M,P){return(0,ie.D)(R).pipe(Je(V=>(0,St.z)(function Ms(w,R){return null!==w&&R&&R(new ds(w)),(0,pe.of)(!0)}(V.route.parent,P),function go(w,R){return null!==w&&R&&R(new bs(w)),(0,pe.of)(!0)}(V.route,P),function so(w,R,M){const P=R[R.length-1],q=R.slice(0,R.length-1).reverse().map(ee=>function Ac(w){const R=w.routeConfig?w.routeConfig.canActivateChild:null;return R&&0!==R.length?{node:w,guards:R}:null}(ee)).filter(ee=>null!==ee).map(ee=>He(()=>{const be=ee.guards.map(Ze=>{const Ft=ia(ee.node)??M,qt=Ps(Ze,Ft);return Cr(function sr(w){return w&&Oe(w.canActivateChild)}(qt)?qt.canActivateChild(P,w):Ft.runInContext(()=>qt(P,w))).pipe(Le())});return(0,pe.of)(be).pipe(Eo())}));return(0,pe.of)(q).pipe(Eo())}(w,V.path,M),function Xt(w,R,M){const P=R.routeConfig?R.routeConfig.canActivate:null;if(!P||0===P.length)return(0,pe.of)(!0);const V=P.map(q=>He(()=>{const ee=ia(R)??M,be=Ps(q,ee);return Cr(function Kl(w){return w&&Oe(w.canActivate)}(be)?be.canActivate(R,w):ee.runInContext(()=>be(R,w))).pipe(Le())}));return(0,pe.of)(V).pipe(Eo())}(w,V.route,M))),Le(V=>!0!==V,!0))}(P,q,w,R):(0,pe.of)(be)),(0,ke.U)(be=>({...M,guardsResult:be})))})}(this.environmentInjector,ee=>this.events.next(ee)),(0,nt.b)(ee=>{if(P.guardsResult=ee.guardsResult,Tr(ee.guardsResult))throw zd(0,ee.guardsResult);const be=new Co(ee.id,this.urlSerializer.serialize(ee.extractedUrl),this.urlSerializer.serialize(ee.urlAfterRedirects),ee.targetSnapshot,!!ee.guardsResult);this.events.next(be)}),(0,vn.h)(ee=>!!ee.guardsResult||(M.restoreHistory(ee),this.cancelNavigationTransition(ee,"",3),!1)),C(ee=>{if(ee.guards.canActivateChecks.length)return(0,pe.of)(ee).pipe((0,nt.b)(be=>{const Ze=new fo(be.id,this.urlSerializer.serialize(be.extractedUrl),this.urlSerializer.serialize(be.urlAfterRedirects),be.targetSnapshot);this.events.next(Ze)}),(0,Ot.w)(be=>{let Ze=!1;return(0,pe.of)(be).pipe(function ni(w,R){return(0,Jt.z)(M=>{const{targetSnapshot:P,guards:{canActivateChecks:V}}=M;if(!V.length)return(0,pe.of)(M);let q=0;return(0,ie.D)(V).pipe(Je(ee=>function $n(w,R,M,P){const V=w.routeConfig,q=w._resolve;return void 0!==V?.title&&!H(V)&&(q[wn]=V.title),function Nt(w,R,M,P){const V=function Kn(w){return[...Object.keys(w),...Object.getOwnPropertySymbols(w)]}(w);if(0===V.length)return(0,pe.of)({});const q={};return(0,ie.D)(V).pipe((0,Jt.z)(ee=>function mi(w,R,M,P){const V=ia(R)??P,q=Ps(w,V);return Cr(q.resolve?q.resolve(R,M):V.runInContext(()=>q(R,M)))}(w[ee],R,M,P).pipe(Le(),(0,nt.b)(be=>{q[ee]=be}))),ui(1),(0,Wn.h)(q),wt(ee=>pt(ee)?Ge.E:Xe(ee)))}(q,w,R,P).pipe((0,ke.U)(ee=>(w._resolvedData=ee,w.data=pl(w,M).resolve,V&&H(V)&&(w.data[wn]=V.title),null)))}(ee.route,P,w,R)),(0,nt.b)(()=>q++),ui(1),(0,Jt.z)(ee=>q===V.length?(0,pe.of)(M):Ge.E))})}(M.paramsInheritanceStrategy,this.environmentInjector),(0,nt.b)({next:()=>Ze=!0,complete:()=>{Ze||(M.restoreHistory(be),this.cancelNavigationTransition(be,"",2))}}))}),(0,nt.b)(be=>{const Ze=new Mr(be.id,this.urlSerializer.serialize(be.extractedUrl),this.urlSerializer.serialize(be.urlAfterRedirects),be.targetSnapshot);this.events.next(Ze)}))}),C(ee=>{const be=Ze=>{const Ft=[];Ze.routeConfig?.loadComponent&&!Ze.routeConfig._loadedComponent&&Ft.push(this.configLoader.loadComponent(Ze.routeConfig).pipe((0,nt.b)(qt=>{Ze.component=qt}),(0,ke.U)(()=>{})));for(const qt of Ze.children)Ft.push(...be(qt));return Ft};return(0,We.a)(be(ee.targetSnapshot.root)).pipe(Kt(),(0,rn.q)(1))}),C(()=>this.afterPreactivation()),(0,ke.U)(ee=>{const be=function $l(w,R,M){const P=Ba(w,R._root,M?M._root:void 0);return new La(P,R)}(M.routeReuseStrategy,ee.targetSnapshot,ee.currentRouterState);return P={...ee,targetRouterState:be}}),(0,nt.b)(ee=>{M.currentUrlTree=ee.urlAfterRedirects,M.rawUrlTree=M.urlHandlingStrategy.merge(ee.urlAfterRedirects,ee.rawUrl),M.routerState=ee.targetRouterState,"deferred"===M.urlUpdateStrategy&&(ee.extras.skipLocationChange||M.setBrowserUrl(M.rawUrlTree,ee),M.browserUrlTree=ee.urlAfterRedirects)}),((w,R,M)=>(0,ke.U)(P=>(new Ec(R,P.targetRouterState,P.currentRouterState,M).activate(w),P)))(this.rootContexts,M.routeReuseStrategy,ee=>this.events.next(ee)),(0,rn.q)(1),(0,nt.b)({next:ee=>{V=!0,this.lastSuccessfulNavigation=this.currentNavigation,M.navigated=!0,this.events.next(new Oi(ee.id,this.urlSerializer.serialize(ee.extractedUrl),this.urlSerializer.serialize(M.currentUrlTree))),M.titleStrategy?.updateTitle(ee.targetRouterState.snapshot),ee.resolve(!0)},complete:()=>{V=!0}}),Wt(()=>{V||q||this.cancelNavigationTransition(P,"",1),this.currentNavigation?.id===P.id&&(this.currentNavigation=null)}),wt(ee=>{if(q=!0,Zu(ee)){Yl(ee)||(M.navigated=!0,M.restoreHistory(P,!0));const be=new So(P.id,this.urlSerializer.serialize(P.extractedUrl),ee.message,ee.cancellationCode);if(this.events.next(be),Yl(ee)){const Ze=M.urlHandlingStrategy.merge(ee.url,M.rawUrlTree),Ft={skipLocationChange:P.extras.skipLocationChange,replaceUrl:"eager"===M.urlUpdateStrategy||$a(P.source)};M.scheduleNavigation(Ze,ys,null,Ft,{resolve:P.resolve,reject:P.reject,promise:P.promise})}else P.resolve(!1)}else{M.restoreHistory(P,!0);const be=new jn(P.id,this.urlSerializer.serialize(P.extractedUrl),ee,P.targetSnapshot??void 0);this.events.next(be);try{P.resolve(M.errorHandler(ee))}catch(Ze){P.reject(Ze)}}return Ge.E}))}))}cancelNavigationTransition(M,P,V){const q=new So(M.id,this.urlSerializer.serialize(M.extractedUrl),P,V);this.events.next(q),M.resolve(!1)}}return w.\u0275fac=function(M){return new(M||w)},w.\u0275prov=a.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})();function $a(w){return w!==ys}let Ns=(()=>{class w{buildTitle(M){let P,V=M.root;for(;void 0!==V;)P=this.getResolvedTitleForRoute(V)??P,V=V.children.find(q=>q.outlet===Sn);return P}getResolvedTitleForRoute(M){return M.data[wn]}}return w.\u0275fac=function(M){return new(M||w)},w.\u0275prov=a.Yz7({token:w,factory:function(){return(0,a.f3M)(aa)},providedIn:"root"}),w})(),aa=(()=>{class w extends Ns{constructor(M){super(),this.title=M}updateTitle(M){const P=this.buildTitle(M);void 0!==P&&this.title.setTitle(P)}}return w.\u0275fac=function(M){return new(M||w)(a.LFG(Es.Dx))},w.\u0275prov=a.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})(),No=(()=>{class w{}return w.\u0275fac=function(M){return new(M||w)},w.\u0275prov=a.Yz7({token:w,factory:function(){return(0,a.f3M)(Ya)},providedIn:"root"}),w})();class Da{shouldDetach(R){return!1}store(R,M){}shouldAttach(R){return!1}retrieve(R){return null}shouldReuseRoute(R,M){return R.routeConfig===M.routeConfig}}let Ya=(()=>{class w extends Da{}return w.\u0275fac=function(){let R;return function(P){return(R||(R=a.n5z(w)))(P||w)}}(),w.\u0275prov=a.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})();const ru=new a.OlP("",{providedIn:"root",factory:()=>({})});let su=(()=>{class w{}return w.\u0275fac=function(M){return new(M||w)},w.\u0275prov=a.Yz7({token:w,factory:function(){return(0,a.f3M)(ou)},providedIn:"root"}),w})(),ou=(()=>{class w{shouldProcessUrl(M){return!0}extract(M){return M}merge(M,P){return M}}return w.\u0275fac=function(M){return new(M||w)},w.\u0275prov=a.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})();function Fo(w){throw w}function Yd(w,R,M){return R.parse("/")}const Jr={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},oo={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let bi=(()=>{class w{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,a.f3M)(a.c2e),this.isNgZoneEnabled=!1,this.options=(0,a.f3M)(ru,{optional:!0})||{},this.errorHandler=this.options.errorHandler||Fo,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Yd,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,a.f3M)(su),this.routeReuseStrategy=(0,a.f3M)(No),this.urlCreationStrategy=(0,a.f3M)(Wr),this.titleStrategy=(0,a.f3M)(Ns),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Sr((0,a.f3M)(U,{optional:!0})??[]),this.navigationTransitions=(0,a.f3M)(hr),this.urlSerializer=(0,a.f3M)(Do),this.location=(0,a.f3M)(ot.Ye),this.isNgZoneEnabled=(0,a.f3M)(a.R0b)instanceof a.R0b&&a.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new nr,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Ul(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(M=>{this.lastSuccessfulId=M.id,this.currentPageId=M.targetPageId},M=>{this.console.warn(`Unhandled Navigation Error: ${M}`)})}resetRootComponentType(M){this.routerState.root.component=M,this.navigationTransitions.rootComponentType=M}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const M=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),ys,M)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(M=>{const P="popstate"===M.type?"popstate":"hashchange";"popstate"===P&&setTimeout(()=>{this.navigateToSyncWithBrowser(M.url,P,M.state)},0)}))}navigateToSyncWithBrowser(M,P,V){const q={replaceUrl:!0},ee=V?.navigationId?V:null;if(V){const Ze={...V};delete Ze.navigationId,delete Ze.\u0275routerPageId,0!==Object.keys(Ze).length&&(q.state=Ze)}const be=this.parseUrl(M);this.scheduleNavigation(be,P,ee,q)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(M){this.config=M.map(ql),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(M,P={}){const{relativeTo:V,queryParams:q,fragment:ee,queryParamsHandling:be,preserveFragment:Ze}=P,Ft=Ze?this.currentUrlTree.fragment:ee;let qt=null;switch(be){case"merge":qt={...this.currentUrlTree.queryParams,...q};break;case"preserve":qt=this.currentUrlTree.queryParams;break;default:qt=q||null}return null!==qt&&(qt=this.removeEmptyProps(qt)),this.urlCreationStrategy.createUrlTree(V,this.routerState,this.currentUrlTree,M,qt,Ft??null)}navigateByUrl(M,P={skipLocationChange:!1}){const V=Tr(M)?M:this.parseUrl(M),q=this.urlHandlingStrategy.merge(V,this.rawUrlTree);return this.scheduleNavigation(q,ys,null,P)}navigate(M,P={skipLocationChange:!1}){return function Lo(w){for(let R=0;R<w.length;R++){const M=w[R];if(null==M)throw new a.vHH(4008,false)}}(M),this.navigateByUrl(this.createUrlTree(M,P),P)}serializeUrl(M){return this.urlSerializer.serialize(M)}parseUrl(M){let P;try{P=this.urlSerializer.parse(M)}catch(V){P=this.malformedUriErrorHandler(V,this.urlSerializer,M)}return P}isActive(M,P){let V;if(V=!0===P?{...Jr}:!1===P?{...oo}:P,Tr(M))return Li(this.currentUrlTree,M,V);const q=this.parseUrl(M);return Li(this.currentUrlTree,q,V)}removeEmptyProps(M){return Object.keys(M).reduce((P,V)=>{const q=M[V];return null!=q&&(P[V]=q),P},{})}scheduleNavigation(M,P,V,q,ee){if(this.disposed)return Promise.resolve(!1);let be,Ze,Ft,qt;return ee?(be=ee.resolve,Ze=ee.reject,Ft=ee.promise):Ft=new Promise((gi,er)=>{be=gi,Ze=er}),qt="computed"===this.canceledNavigationResolution?V&&V.\u0275routerPageId?V.\u0275routerPageId:q.replaceUrl||q.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:qt,source:P,restoredState:V,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:M,extras:q,resolve:be,reject:Ze,promise:Ft,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Ft.catch(gi=>Promise.reject(gi))}setBrowserUrl(M,P){const V=this.urlSerializer.serialize(M),q={...P.extras.state,...this.generateNgRouterState(P.id,P.targetPageId)};this.location.isCurrentPathEqualTo(V)||P.extras.replaceUrl?this.location.replaceState(V,"",q):this.location.go(V,"",q)}restoreHistory(M,P=!1){if("computed"===this.canceledNavigationResolution){const V=this.currentPageId-M.targetPageId;"popstate"!==M.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.getCurrentNavigation()?.finalUrl||0===V?this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===V&&(this.resetState(M),this.browserUrlTree=M.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(V)}else"replace"===this.canceledNavigationResolution&&(P&&this.resetState(M),this.resetUrlToCurrentUrlTree())}resetState(M){this.routerState=M.currentRouterState,this.currentUrlTree=M.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,M.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(M,P){return"computed"===this.canceledNavigationResolution?{navigationId:M,\u0275routerPageId:P}:{navigationId:M}}}return w.\u0275fac=function(M){return new(M||w)},w.\u0275prov=a.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})();class la{}let Nc=(()=>{class w{constructor(M,P,V,q,ee){this.router=M,this.injector=V,this.preloadingStrategy=q,this.loader=ee}setUpPreloading(){this.subscription=this.router.events.pipe((0,vn.h)(M=>M instanceof Oi),Je(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(M,P){const V=[];for(const q of P){q.providers&&!q._injector&&(q._injector=(0,a.MMx)(q.providers,M,`Route: ${q.path}`));const ee=q._injector??M,be=q._loadedInjector??ee;(q.loadChildren&&!q._loadedRoutes&&void 0===q.canLoad||q.loadComponent&&!q._loadedComponent)&&V.push(this.preloadConfig(ee,q)),(q.children||q._loadedRoutes)&&V.push(this.processRoutes(be,q.children??q._loadedRoutes))}return(0,ie.D)(V).pipe((0,Ri.J)())}preloadConfig(M,P){return this.preloadingStrategy.preload(P,()=>{let V;V=P.loadChildren&&void 0===P.canLoad?this.loader.loadChildren(M,P):(0,pe.of)(null);const q=V.pipe((0,Jt.z)(ee=>null===ee?(0,pe.of)(void 0):(P._loadedRoutes=ee.routes,P._loadedInjector=ee.injector,this.processRoutes(ee.injector??M,ee.routes))));if(P.loadComponent&&!P._loadedComponent){const ee=this.loader.loadComponent(P);return(0,ie.D)([q,ee]).pipe((0,Ri.J)())}return q})}}return w.\u0275fac=function(M){return new(M||w)(a.LFG(bi),a.LFG(a.Sil),a.LFG(a.lqb),a.LFG(la),a.LFG(Ve))},w.\u0275prov=a.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})();const ps=new a.OlP("");let ao=(()=>{class w{constructor(M,P,V,q,ee={}){this.urlSerializer=M,this.transitions=P,this.viewportScroller=V,this.zone=q,this.options=ee,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},ee.scrollPositionRestoration=ee.scrollPositionRestoration||"disabled",ee.anchorScrolling=ee.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(M=>{M instanceof Ro?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=M.navigationTrigger,this.restoredId=M.restoredState?M.restoredState.navigationId:0):M instanceof Oi&&(this.lastId=M.id,this.scheduleScrollEvent(M,this.urlSerializer.parse(M.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(M=>{M instanceof Gl&&(M.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(M.position):M.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(M.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(M,P){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Gl(M,"popstate"===this.lastSource?this.store[this.restoredId]:null,P))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return w.\u0275fac=function(M){a.$Z()},w.\u0275prov=a.Yz7({token:w,factory:w.\u0275fac}),w})();var gr=(()=>((gr=gr||{})[gr.COMPLETE=0]="COMPLETE",gr[gr.FAILED=1]="FAILED",gr[gr.REDIRECTING=2]="REDIRECTING",gr))();const Qi=!1;function ms(w,R){return{\u0275kind:w,\u0275providers:R}}const Tl=new a.OlP("",{providedIn:"root",factory:()=>!1});function tc(){const w=(0,a.f3M)(a.zs3);return R=>{const M=w.get(a.z2F);if(R!==M.components[0])return;const P=w.get(bi),V=w.get(wa);1===w.get(xl)&&P.initialNavigation(),w.get(vo,null,a.XFs.Optional)?.setUpPreloading(),w.get(ps,null,a.XFs.Optional)?.init(),P.resetRootComponentType(M.componentTypes[0]),V.closed||(V.next(),V.complete(),V.unsubscribe())}}const wa=new a.OlP(Qi?"bootstrap done indicator":"",{factory:()=>new Me.x}),xl=new a.OlP(Qi?"initial navigation":"",{providedIn:"root",factory:()=>1});function Za(){let w=[];return w=Qi?[{provide:a.Xts,multi:!0,useFactory:()=>{const R=(0,a.f3M)(bi);return()=>R.events.subscribe(M=>{console.group?.(`Router Event: ${M.constructor.name}`),console.log(function Vl(w){if(!("type"in w))return`Unknown Router Event: ${w.constructor.name}`;switch(w.type){case 14:return`ActivationEnd(path: '${w.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${w.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${w.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${w.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${w.id}, url: '${w.url}', urlAfterRedirects: '${w.urlAfterRedirects}', state: ${w.state}, shouldActivate: ${w.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${w.id}, url: '${w.url}', urlAfterRedirects: '${w.urlAfterRedirects}', state: ${w.state})`;case 2:return`NavigationCancel(id: ${w.id}, url: '${w.url}')`;case 16:return`NavigationSkipped(id: ${w.id}, url: '${w.url}')`;case 1:return`NavigationEnd(id: ${w.id}, url: '${w.url}', urlAfterRedirects: '${w.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${w.id}, url: '${w.url}', error: ${w.error})`;case 0:return`NavigationStart(id: ${w.id}, url: '${w.url}')`;case 6:return`ResolveEnd(id: ${w.id}, url: '${w.url}', urlAfterRedirects: '${w.urlAfterRedirects}', state: ${w.state})`;case 5:return`ResolveStart(id: ${w.id}, url: '${w.url}', urlAfterRedirects: '${w.urlAfterRedirects}', state: ${w.state})`;case 10:return`RouteConfigLoadEnd(path: ${w.route.path})`;case 9:return`RouteConfigLoadStart(path: ${w.route.path})`;case 4:return`RoutesRecognized(id: ${w.id}, url: '${w.url}', urlAfterRedirects: '${w.urlAfterRedirects}', state: ${w.state})`;case 15:return`Scroll(anchor: '${w.anchor}', position: '${w.position?`${w.position[0]}, ${w.position[1]}`:null}')`}}(M)),console.log(M),console.groupEnd?.()})}}]:[],ms(1,w)}const vo=new a.OlP(Qi?"router preloader":"");function au(w){return ms(0,[{provide:vo,useExisting:Nc},{provide:la,useExisting:w}])}const _r=!1,ed=new a.OlP(_r?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),nc=[ot.Ye,{provide:Do,useClass:Hs},bi,ta,{provide:Qo,useFactory:function kr(w){return w.routerState.root},deps:[bi]},Ve,_r?{provide:Tl,useValue:!0}:[]];function td(){return new a.PXZ("Router",bi)}let jo=(()=>{class w{constructor(M){}static forRoot(M,P){return{ngModule:w,providers:[nc,_r&&P?.enableTracing?Za().\u0275providers:[],{provide:U,multi:!0,useValue:M},{provide:ed,useFactory:ic,deps:[[bi,new a.FiY,new a.tp0]]},{provide:ru,useValue:P||{}},P?.useHash?{provide:ot.S$,useClass:ot.Do}:{provide:ot.S$,useClass:ot.b0},{provide:ps,useFactory:()=>{const w=(0,a.f3M)(ot.EM),R=(0,a.f3M)(a.R0b),M=(0,a.f3M)(ru),P=(0,a.f3M)(hr),V=(0,a.f3M)(Do);return M.scrollOffset&&w.setOffset(M.scrollOffset),new ao(V,P,w,R,M)}},P?.preloadingStrategy?au(P.preloadingStrategy).\u0275providers:[],{provide:a.PXZ,multi:!0,useFactory:td},P?.initialNavigation?Xa(P):[],[{provide:Ra,useFactory:tc},{provide:a.tb,multi:!0,useExisting:Ra}]]}}static forChild(M){return{ngModule:w,providers:[{provide:U,multi:!0,useValue:M}]}}}return w.\u0275fac=function(M){return new(M||w)(a.LFG(ed,8))},w.\u0275mod=a.oAB({type:w}),w.\u0275inj=a.cJS({imports:[po]}),w})();function ic(w){if(_r&&w)throw new a.vHH(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function Xa(w){return["disabled"===w.initialNavigation?ms(3,[{provide:a.ip1,multi:!0,useFactory:()=>{const R=(0,a.f3M)(bi);return()=>{R.setUpLocationChangeListener()}}},{provide:xl,useValue:2}]).\u0275providers:[],"enabledBlocking"===w.initialNavigation?ms(2,[{provide:xl,useValue:0},{provide:a.ip1,multi:!0,deps:[a.zs3],useFactory:R=>{const M=R.get(ot.V_,Promise.resolve());return()=>M.then(()=>new Promise(P=>{const V=R.get(bi),q=R.get(wa);(function ca(w,R){w.events.pipe((0,vn.h)(M=>M instanceof Oi||M instanceof So||M instanceof jn||M instanceof ho),(0,ke.U)(M=>M instanceof Oi||M instanceof ho?gr.COMPLETE:M instanceof So&&(0===M.code||1===M.code)?gr.REDIRECTING:gr.FAILED),(0,vn.h)(M=>M!==gr.REDIRECTING),(0,rn.q)(1)).subscribe(()=>{R()})})(V,()=>{P(!0)}),R.get(hr).afterPreactivation=()=>(P(!0),q.closed?(0,pe.of)(void 0):q),V.initialNavigation()}))}}]).\u0275providers:[]]}const Ra=new a.OlP(_r?"Router Initializer":"")},9694:(_n,Ke,te)=>{te.d(Ke,{HLk:()=>$n,ITp:()=>us,sI:()=>Us,Pts:()=>Le,lFy:()=>Ri,UG5:()=>io,YRQ:()=>Na,o8H:()=>ds,RjQ:()=>lo,TfJ:()=>Xo,XHp:()=>Er,VIe:()=>wr,pN9:()=>Je,DOm:()=>ns});var a=te(1571),ie=te(2329),pe=te(7579),Ee=te(6063);class Ae extends pe.x{constructor(C=1/0,u=1/0,U=Ee.l){super(),this._bufferSize=C,this._windowTime=u,this._timestampProvider=U,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=u===1/0,this._bufferSize=Math.max(1,C),this._windowTime=Math.max(1,u)}next(C){const{isStopped:u,_buffer:U,_infiniteTimeWindow:Ve,_timestampProvider:nn,_windowTime:ii}=this;u||(U.push(C),!Ve&&U.push(nn.now()+ii)),this._trimBuffer(),super.next(C)}_subscribe(C){this._throwIfClosed(),this._trimBuffer();const u=this._innerSubscribe(C),{_infiniteTimeWindow:U,_buffer:Ve}=this,nn=Ve.slice();for(let ii=0;ii<nn.length&&!C.closed;ii+=U?1:2)C.next(nn[ii]);return this._checkFinalizedStatuses(C),u}_trimBuffer(){const{_bufferSize:C,_timestampProvider:u,_buffer:U,_infiniteTimeWindow:Ve}=this,nn=(Ve?1:2)*C;if(C<1/0&&nn<U.length&&U.splice(0,U.length-nn),!Ve){const ii=u.now();let Xi=0;for(let hr=1;hr<U.length&&U[hr]<=ii;hr+=2)Xi=hr;Xi&&U.splice(0,Xi+1)}}}var Qe=te(2722),We=te(6895);const St=["rendererCanvas"];var It=(()=>{return(H=It||(It={})).mouseEnter="mouseEnter",H.mouseExit="mouseExit",H.click="click",H.pointerDown="pointerDown",H.pointerUp="pointerUp",It;var H})();const Qt=new a.OlP("A reference to the raycaster object",{factory:()=>new ie.iMs});let ti=(()=>{class H{constructor(){this.raycaster=(0,a.f3M)(Qt),this.selected=null,this.enabled=!0,this.groups=[],this.paused=!1,this.maxClickDistance=23,this.nid=H.instanceCnt++,this.onPointerMove=this.onPointerMove.bind(this),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerUp=this.onPointerUp.bind(this)}ngOnDestroy(){this.disable(),this.unsubscribe()}subscribe(){if(!this.canvas)throw new Error("missing canvas");this.canvas.addEventListener("pointermove",this.onPointerMove),this.canvas.addEventListener("pointerdown",this.onPointerDown),this.canvas.addEventListener("pointerup",this.onPointerUp)}unsubscribe(){if(!this.canvas)throw new Error("missing canvas");this.canvas.removeEventListener("pointermove",this.onPointerMove),this.canvas.removeEventListener("pointerdown",this.onPointerDown),this.canvas.removeEventListener("pointerup",this.onPointerUp)}enable(){this.enabled=!0}disable(){this.enabled=!1}pause(){this.paused=!0}resume(){this.paused=!1}get isEnabled(){return this.enabled}init(u,U){this.camera=u,this.canvas=U,this.subscribe()}addEventTarget(u){this.groups.push(u)}removeEventTarget(u){const U=this.groups.indexOf(u);U>=0&&this.groups.splice(U,1)}onPointerMove(u){if(!this.isReady())return;const U=this.getFirstIntersectedGroup(u.layerX,u.layerY,It.mouseEnter);if((!this.selected||this.selected!==U?.target)&&(this.selected&&(this.selected.host.objRef?.dispatchEvent({type:It.mouseExit,component:this.selected.host}),this.selected.emitOnMouseExit(),this.selected=null),U&&U.target)){this.selected=U.target;const Ve={type:It.mouseEnter,component:U.target.host,...U};this.selected.host.objRef?.dispatchEvent(Ve),this.selected.emitOnMouseEnter(Ve)}}onPointerDown(u){if(this.maxClickDistance=u.width,this.pointerDownEvent=u,!this.isReady())return;const U=this.getFirstIntersectedGroup(u.layerX,u.layerY,It.pointerDown);if(U&&U.target&&U.target.host.objRef){const Ve={type:It.pointerDown,component:U.target.host,...U};U.target.host.objRef.dispatchEvent(Ve),U.target.emitOnPointerDown(Ve)}}onPointerUp(u){const U=this.pointerDownEvent;if(this.pointerDownEvent=void 0,!this.isReady())return;let Ve=this.getFirstIntersectedGroup(u.layerX,u.layerY,It.pointerUp);if(Ve&&Ve.target&&Ve.target.host.objRef){const nn={type:It.pointerUp,component:Ve.target.host,...Ve};Ve.target.host.objRef.dispatchEvent(nn),Ve.target.emitOnPointerUp(nn)}if(!(this.calcPointerDownUpDinstance(u,U)>this.maxClickDistance)&&(Ve=this.getFirstIntersectedGroup(u.layerX,u.layerY,It.click),Ve&&Ve.target&&Ve.target.host.objRef)){const nn={type:It.click,component:Ve.target.host,...Ve};Ve.target.host.objRef.dispatchEvent(nn),Ve.target.emitOnClick(nn)}}isReady(u){return!!(this.enabled&&(u||!this.paused)&&this.camera&&this.camera.objRef&&this.groups&&this.groups.length>0)}calcPointerDownUpDinstance(u,U){if(!U)return Number.MAX_VALUE;const Ve=u.layerX-U.layerX,nn=u.layerY-U.layerY;return Math.sqrt(Ve*Ve+nn*nn)}getFirstIntersectedGroup(u,U,Ve){if(!this.camera||!this.canvas||!this.camera.objRef)return;const nn=new ie.FM8(u=u/this.canvas.clientWidth*2-1,U=-U/this.canvas.clientHeight*2+1);let ii,Xi;this.raycaster.setFromCamera(nn,this.camera.objRef);for(const hr of this.groups){const $a=hr.host.objRef;if(!hr[Ve]||!$a)continue;const Ns=this.raycaster.intersectObject($a,!0);Ns.length>0&&(!ii||ii.distance>Ns[0].distance)&&(ii=Ns[0],Xi=hr)}return Xi&&ii?{target:Xi,...ii}:void 0}}return H.instanceCnt=0,H.\u0275fac=function(u){return new(u||H)},H.\u0275prov=a.Yz7({token:H,factory:H.\u0275fac}),H})();function Me(H,C){return function an(H){return!(!H||!H.set)}(H)?void 0===C?H:Array.isArray(C)?(H.set(...C),H):H.copy&&C?(H.copy(C),H):void 0!==C?(H.set(C),H):H:C}function vn(H){return!0===H.__isProxy&&void 0===H.objRef}let Jt=(()=>{class H{set objRef(u){this.applyObjRef(u)}get objRef(){return this._objRef}constructor(){this.autoAddToParent=!0,this.autoDispose=!0}addToParent(){}removeFromParent(){}set threeEvents(u){this.removeEvents(),this.eventListeners=u,this.applyEvents()}get threeEvents(){return this.eventListeners}get onUpdate(){return this.updateEmitter||(this.updateEmitter=new a.vpe),this.updateEmitter}get objRef$(){return this._objRef$||(this._objRef$=new Ae(1)),this._objRef$}ngOnInit(){this.objRef||(this.objRef=this.createThreeInstance(this.args))}getType(){throw new Error("derive me")}createThreeInstance(u){return Array.isArray(u)?new(this.getType())(...u):new(this.getType())(u)}ngOnChanges(u){if(!this.objRef||vn(this.objRef)){u.objRef?.currentValue?this.objRef=u.objRef?.currentValue:this.objRef||(this.objRef=this.createThreeInstance(u.args?.currentValue));for(const U in u)this[U]=u[U].currentValue;this.emitPropertyChanges(u)}else this.emitPropertyChanges(u)}disposeObjRef(){(function ot(H){return!(!H||"function"!=typeof H.dispose)})(this.objRef)&&this.objRef.dispose()}ngOnDestroy(){this.removeEvents(),this.removeFromParent(),this.autoDispose&&this.disposeObjRef()}applyObjRef(u){this._objRef!==u&&(this.removeFromParent(),this._objRef=u,this.autoAddToParent&&this.addToParent()),this.emitObjRefChange()}emitObjRefChange(){this._objRef&&!vn(this._objRef)&&(this._objRef.dispatchEvent?.({type:"loaded",object:this._objRef}),this._objRef$&&this._objRef$.next(this._objRef))}emitPropertyChanges(u){this._objRef&&this._objRef.dispatchEvent?.({type:"changes",changes:u}),this.updateEmitter&&this.updateEmitter.next(u)}removeEvents(){if(this.eventListeners&&this._objRef){for(const u of Object.entries(this.eventListeners))this._objRef.removeEventListener(u[0],u[1]);this.eventListeners=void 0}}applyEvents(){if(this.eventListeners&&this._objRef)for(const u of Object.entries(this.eventListeners))this._objRef.addEventListener(u[0],u[1])}}return H.\u0275fac=function(u){return new(u||H)},H.\u0275cmp=a.Xpm({type:H,selectors:[["th-abs-wrapper"]],inputs:{autoAddToParent:"autoAddToParent",autoDispose:"autoDispose",objRef:"objRef",args:"args",threeEvents:"threeEvents"},outputs:{onUpdate:"onUpdate",objRef$:"objRef$"},features:[a.TTD],decls:0,vars:0,template:function(u,U){},encapsulation:2}),H})(),Kt=(()=>{class H extends Jt{constructor(u){super(),this.parent=u}addToParent(){this._objRef&&this.parent.objRef&&(!this._objRef.parent||this._objRef.parent.uuid!==this.parent.objRef.uuid)&&this.parent.objRef.add(this._objRef)}removeFromParent(){this._objRef?.parent?.remove(this._objRef)}applyObjRef(u){(this._objRef!==u||this._objRef?.parent?.uuid!==this.parent.objRef.uuid)&&(this.removeFromParent(),this._objRef=u,this.autoAddToParent&&this.addToParent()),this.emitObjRefChange()}attachToParent(u,U){!this.parent.objRef||u===U&&U?.parent?.uuid===this.parent.objRef.uuid||(U&&U.parent&&U.parent.remove(U),u&&(!u.parent||u.parent&&u.parent.uuid!==this.parent.objRef.uuid)&&this.parent.objRef.add(u))}set lookAt(u){Promise.resolve().then(()=>{this.objRef&&(Array.isArray(u)?this.objRef.lookAt(...u):this.objRef.lookAt(u))})}}return H.\u0275fac=function(u){return new(u||H)(a.Y36(H))},H.\u0275cmp=a.Xpm({type:H,selectors:[["th-abs-object"]],inputs:{lookAt:"lookAt"},features:[a.qOj],decls:0,vars:0,template:function(u,U){},encapsulation:2}),H})(),yn=(()=>{class H extends Kt{getType(){return ie.Tme}set id(u){this._objRef&&(this._objRef.id=u)}set uuid(u){this._objRef&&(this._objRef.uuid=u)}set name(u){this._objRef&&(this._objRef.name=u)}set type(u){this._objRef&&(this._objRef.type=u)}set children(u){this._objRef&&(this._objRef.children=u)}set up(u){this._objRef&&(this._objRef.up=Me(this._objRef.up,u))}set position(u){this._objRef&&Me(this._objRef.position,u)}set rotation(u){this._objRef&&Me(this._objRef.rotation,u)}set quaternion(u){this._objRef&&Me(this._objRef.quaternion,u)}set scale(u){this._objRef&&Me(this._objRef.scale,u)}set modelViewMatrix(u){this._objRef&&Me(this._objRef.modelViewMatrix,u)}set normalMatrix(u){this._objRef&&Me(this._objRef.normalMatrix,u)}set matrix(u){this._objRef&&(this._objRef.matrix=Me(this._objRef.matrix,u))}set matrixWorld(u){this._objRef&&(this._objRef.matrixWorld=Me(this._objRef.matrixWorld,u))}set matrixAutoUpdate(u){this._objRef&&(this._objRef.matrixAutoUpdate=u)}set matrixWorldAutoUpdate(u){this._objRef&&(this._objRef.matrixWorldAutoUpdate=u)}set matrixWorldNeedsUpdate(u){this._objRef&&(this._objRef.matrixWorldNeedsUpdate=u)}set layers(u){this._objRef&&(this._objRef.layers=Me(this._objRef.layers,u))}set visible(u){this._objRef&&(this._objRef.visible=u)}set castShadow(u){this._objRef&&(this._objRef.castShadow=u)}set receiveShadow(u){this._objRef&&(this._objRef.receiveShadow=u)}set frustumCulled(u){this._objRef&&(this._objRef.frustumCulled=u)}set renderOrder(u){this._objRef&&(this._objRef.renderOrder=u)}set animations(u){this._objRef&&(this._objRef.animations=u)}set userData(u){this._objRef&&(this._objRef.userData=u)}set customDepthMaterial(u){this._objRef&&(this._objRef.customDepthMaterial=u)}set customDistanceMaterial(u){this._objRef&&(this._objRef.customDistanceMaterial=u)}set onBeforeRender(u){this._objRef&&(this._objRef.onBeforeRender=u)}set onAfterRender(u){this._objRef&&(this._objRef.onAfterRender=u)}constructor(u){super(u)}}return H.\u0275fac=function(u){return new(u||H)(a.Y36(H,4))},H.\u0275cmp=a.Xpm({type:H,selectors:[["th-object3D"]],inputs:{id:"id",uuid:"uuid",name:"name",type:"type",children:"children",up:"up",position:"position",rotation:"rotation",quaternion:"quaternion",scale:"scale",modelViewMatrix:"modelViewMatrix",normalMatrix:"normalMatrix",matrix:"matrix",matrixWorld:"matrixWorld",matrixAutoUpdate:"matrixAutoUpdate",matrixWorldAutoUpdate:"matrixWorldAutoUpdate",matrixWorldNeedsUpdate:"matrixWorldNeedsUpdate",layers:"layers",visible:"visible",castShadow:"castShadow",receiveShadow:"receiveShadow",frustumCulled:"frustumCulled",renderOrder:"renderOrder",animations:"animations",userData:"userData",customDepthMaterial:"customDepthMaterial",customDistanceMaterial:"customDistanceMaterial",onBeforeRender:"onBeforeRender",onAfterRender:"onAfterRender"},features:[a._Bn([]),a.qOj],decls:0,vars:0,template:function(u,U){},encapsulation:2,changeDetection:0}),H})(),Le=(()=>{class H extends yn{getType(){return ie.V1s}set matrixWorldInverse(u){this._objRef&&(this._objRef.matrixWorldInverse=Me(this._objRef.matrixWorldInverse,u))}set projectionMatrix(u){this._objRef&&(this._objRef.projectionMatrix=Me(this._objRef.projectionMatrix,u))}set projectionMatrixInverse(u){this._objRef&&(this._objRef.projectionMatrixInverse=Me(this._objRef.projectionMatrixInverse,u))}}return H.\u0275fac=function(){let C;return function(U){return(C||(C=a.n5z(H)))(U||H)}}(),H.\u0275cmp=a.Xpm({type:H,selectors:[["th-camera"]],inputs:{matrixWorldInverse:"matrixWorldInverse",projectionMatrix:"projectionMatrix",projectionMatrixInverse:"projectionMatrixInverse"},features:[a._Bn([{provide:yn,useExisting:(0,a.Gpc)(()=>H)}]),a.qOj],decls:0,vars:0,template:function(u,U){},encapsulation:2,changeDetection:0}),H})(),Je=(()=>{class H extends yn{getType(){return ie.xsS}set type(u){this._objRef&&(this._objRef.type=u)}set fog(u){this._objRef&&(this._objRef.fog=u)}set backgroundBlurriness(u){this._objRef&&(this._objRef.backgroundBlurriness=u)}set backgroundIntensity(u){this._objRef&&(this._objRef.backgroundIntensity=u)}set overrideMaterial(u){this._objRef&&(this._objRef.overrideMaterial=u)}set background(u){this._objRef&&(this._objRef.background=Me(this._objRef.background,u))}set environment(u){this._objRef&&(this._objRef.environment=u)}}return H.\u0275fac=function(){let C;return function(U){return(C||(C=a.n5z(H)))(U||H)}}(),H.\u0275cmp=a.Xpm({type:H,selectors:[["th-scene"]],inputs:{type:"type",fog:"fog",backgroundBlurriness:"backgroundBlurriness",backgroundIntensity:"backgroundIntensity",overrideMaterial:"overrideMaterial",background:"background",environment:"environment"},features:[a._Bn([{provide:yn,useExisting:(0,a.Gpc)(()=>H)}]),a.qOj],decls:0,vars:0,template:function(u,U){},encapsulation:2,changeDetection:0}),H})();const nt={alpha:!0,antialias:!0,preserveDrawingBuffer:!0};let wt=(()=>{class H{get canvas(){return this.rendererParameters?.domElement}constructor(u){this.ngZone=u,this.clock=new ie.SUY,this.destroyed$=new pe.x,this.resizeEmitter=new a.vpe,this.beforeRenderEmitter=new a.vpe,this.views=[],this.beforeRender$=this.beforeRenderEmitter.pipe((0,Qe.R)(this.destroyed$)),this.resize$=this.resizeEmitter.pipe((0,Qe.R)(this.destroyed$))}get renderer(){return this._renderer}ngOnDestroy(){this.resizeObserver&&this.canvas&&this.resizeObserver.unobserve(this.canvas)}initResizeObserver(){this.ngZone.runOutsideAngular(()=>{if(!this.canvas)throw new Error("missing canvas element");this.resize(),this.resizeObserver||(this.resizeObserver=new ResizeObserver(()=>{this.resize()})),this.resizeObserver.observe(this.canvas)})}initRenderer(){this._renderer||(this._renderer=new ie.CP7({canvas:this.rendererParameters?.domElement,...nt}),Object.assign(this._renderer,{...nt,...this.rendererParameters}),this.resize())}setRenderer(u){this.rendererParameters=u,this.initRenderer(),this.initResizeObserver()}addView(u){this.views.push(u);const U=this.calcRendererSize();U&&this.adjustViewDimensions(u,U.width,U.height)}render(){this.beforeRenderEmitter.emit({engine:this,delta:this.clock.getDelta()});for(const u of this.views)this.renderView(u)}renderView(u){if(!this._renderer)return;const U=u.camera,Ve=u.scene;if(!(U&&Ve&&U.objRef&&Ve.objRef))return;const nn=this._renderer;(function ke(H){return void 0!==H&&(H.observed||H.observers?.length>0)})(u.onRender)&&this.ngZone.run(()=>u.onRender.emit({renderer:nn,scene:Ve,camera:U})),this.applyRendererParametersFromView(u),u.effectComposer?u.effectComposer.render():this._renderer.render(Ve.objRef,U.objRef)}applyRendererParametersFromView(u){this._renderer&&(u.viewPort&&(u.viewPort instanceof ie.Ltg?this._renderer.setViewport(u.viewPort):this._renderer.setViewport(u.viewPort.x,u.viewPort.y,u.viewPort.width,u.viewPort.height)),u.scissor&&(u.scissor instanceof ie.Ltg?this._renderer.setScissor(u.scissor):this._renderer.setScissor(u.scissor.x,u.scissor.y,u.scissor.width,u.scissor.height)),void 0!==u.scissorTest&&this._renderer.setScissorTest(u.scissorTest),u.clearColor&&this._renderer.setClearColor(u.clearColor),void 0!==u.clearAlpha&&this._renderer.setClearAlpha(u.clearAlpha),void 0!==u.shadow&&(this._renderer.shadowMap.enabled=!0))}resize(){if(!this._renderer||!this.canvas)return!1;const{width:u,height:U}=this.calcRendererSize();this._renderer.setSize(u,U,!1);for(const Ve of this.views)this.adjustViewDimensions(Ve,u,U);return this.resizeEmitter.emit({width:u,height:U}),!0}calcRendererSize(){if(!this._renderer||!this.canvas)return;const u=window.devicePixelRatio;return{width:(this.canvas.clientWidth??0)*u,height:(this.canvas.clientHeight??0)*u}}adjustViewDimensions(u,U,Ve){u.viewPort||(u.camera&&u.camera.objRef.aspect&&(u.camera.objRef.aspect=U/Ve,u.camera.objRef.updateProjectionMatrix()),u.effectComposer?.setSize(U,Ve))}}return H.\u0275fac=function(u){return new(u||H)(a.LFG(a.R0b))},H.\u0275prov=a.Yz7({token:H,factory:H.\u0275fac}),H})(),Dt=(()=>{class H{constructor(u,U){this.engServ=u,this.raycaster=U,this.onRender=new a.vpe}set contentScene(u){u&&(this.scene=u)}set effectComposer(u){this._effectComposer=u,this.configureEffectComposerRenderTarget()}get effectComposer(){return this._effectComposer}set camera(u){this._camera=u,this.initRaycaster()}get camera(){return this._camera}set contentCamera(u){u&&(this.camera=u)}set viewPort(u){this._viewPort=u,this.configureEffectComposerRenderTarget()}get viewPort(){return this._viewPort}ngOnInit(){this.initRaycaster()}initRaycaster(){this.camera&&this.engServ.canvas&&this.raycaster.init(this.camera,this.engServ.canvas)}add(u){}remove(u){}configureEffectComposerRenderTarget(){if(this.viewPort&&this.effectComposer){let u,U;this.viewPort instanceof ie.Ltg?(u=this.viewPort.z,U=this.viewPort?.width):(u=this.viewPort.width,U=this.viewPort.height),this.effectComposer.setSize(u,U)}}}return H.\u0275fac=function(u){return new(u||H)(a.Y36(wt),a.Y36(ti))},H.\u0275cmp=a.Xpm({type:H,selectors:[["th-view"]],contentQueries:function(u,U,Ve){if(1&u&&(a.Suo(Ve,Je,5),a.Suo(Ve,Le,5)),2&u){let nn;a.iGM(nn=a.CRH())&&(U.contentScene=nn.first),a.iGM(nn=a.CRH())&&(U.contentCamera=nn.first)}},inputs:{scene:"scene",effectComposer:"effectComposer",camera:"camera",shadow:"shadow",viewPort:"viewPort",scissor:"scissor",scissorTest:"scissorTest",clearColor:"clearColor",clearAlpha:"clearAlpha"},outputs:{onRender:"onRender"},features:[a._Bn([{provide:yn,useExisting:(0,a.Gpc)(()=>H)},{provide:Qt,useValue:new ie.iMs},ti])],decls:0,vars:0,template:function(u,U){},encapsulation:2}),H})(),Wt=(()=>{class H{constructor(u,U){this.engineService=u,this.ngZone=U,this.active=!0,this.destroyed$=new pe.x,this.beforeRender$=this.engineService.beforeRender$,this.engineService.resize$.pipe((0,Qe.R)(this.destroyed$)).subscribe(()=>this.requestAnimationFrame())}ngOnDestroy(){this.stop(),this.destroyed$.next(),this.destroyed$.complete()}start(){this.active||(this.active=!0,this.requestAnimationFrame())}stop(){this.active=!1,void 0!==this.frameId&&(cancelAnimationFrame(this.frameId),this.frameId=void 0)}isActive(){return this.active}requestAnimationFrame(){void 0===this.frameId&&this.ngZone.runOutsideAngular(()=>this.frameId=requestAnimationFrame(()=>{this.frameId=void 0,this.engineService.render(),this.active&&this.requestAnimationFrame()}))}}return H.\u0275fac=function(u){return new(u||H)(a.LFG(wt),a.LFG(a.R0b))},H.\u0275prov=a.Yz7({token:H,factory:H.\u0275fac}),H})(),Ri=(()=>{class H extends Dt{get obj(){return this}set views(u){u.forEach(U=>this.engServ.addView(U))}set rendererCanvas(u){u&&(this._rendererCanvas=u,u.nativeElement.id+=this.nid)}get rendererCanvas(){return this._rendererCanvas}constructor(u,U,Ve){super(u,Ve),this.engServ=u,this.animationLoop=U,this.raycaster=Ve,this.nid=H.instanceCnt++,this.disableDefaultView=!1}ngAfterContentChecked(){this.animationLoop.requestAnimationFrame()}ngAfterViewInit(){this.animationLoop.requestAnimationFrame()}ngOnInit(){this.applyRendererParameters(),super.ngOnInit(),this.disableDefaultView||this.engServ.addView(this)}applyRendererParameters(){if(!this.rendererCanvas)throw new Error("Missing Canvas");this.engServ.setRenderer({...this.rendererParameters,domElement:this.rendererCanvas.nativeElement})}}return H.instanceCnt=0,H.\u0275fac=function(u){return new(u||H)(a.Y36(wt),a.Y36(Wt),a.Y36((0,a.Gpc)(()=>ti)))},H.\u0275cmp=a.Xpm({type:H,selectors:[["th-canvas"]],contentQueries:function(u,U,Ve){if(1&u&&a.Suo(Ve,Dt,4),2&u){let nn;a.iGM(nn=a.CRH())&&(U.views=nn)}},viewQuery:function(u,U){if(1&u&&a.Gf(St,7),2&u){let Ve;a.iGM(Ve=a.CRH())&&(U.rendererCanvas=Ve.first)}},inputs:{rendererParameters:"rendererParameters",disableDefaultView:"disableDefaultView"},features:[a._Bn([{provide:yn,useExisting:(0,a.Gpc)(()=>H)},wt,Wt,{provide:Qt,useValue:new ie.iMs},(0,a.Gpc)(()=>ti),{provide:Dt,useExisting:(0,a.Gpc)(()=>H)}]),a.qOj],decls:2,vars:0,consts:[["id","rendererCanvas"],["rendererCanvas",""]],template:function(u,U){1&u&&a._UZ(0,"canvas",0,1)},styles:["[_nghost-%COMP%]{display:flex;flex:auto;line-height:0;height:100%}canvas[_ngcontent-%COMP%]{flex:auto;outline:none;width:100%;height:100%}"],changeDetection:0}),H})(),Ur=(()=>{class H extends yn{getType(){return ie._kC}set type(u){this._objRef&&(this._objRef.type=u)}set color(u){this._objRef&&(this._objRef.color=Me(this._objRef.color,u))}set intensity(u){this._objRef&&(this._objRef.intensity=u)}set shadow(u){this._objRef&&(this._objRef.shadow=u)}set shadowCameraFov(u){this._objRef&&(this._objRef.shadowCameraFov=u)}set shadowCameraLeft(u){this._objRef&&(this._objRef.shadowCameraLeft=u)}set shadowCameraRight(u){this._objRef&&(this._objRef.shadowCameraRight=u)}set shadowCameraTop(u){this._objRef&&(this._objRef.shadowCameraTop=u)}set shadowCameraBottom(u){this._objRef&&(this._objRef.shadowCameraBottom=u)}set shadowCameraNear(u){this._objRef&&(this._objRef.shadowCameraNear=u)}set shadowCameraFar(u){this._objRef&&(this._objRef.shadowCameraFar=u)}set shadowBias(u){this._objRef&&(this._objRef.shadowBias=u)}set shadowMapWidth(u){this._objRef&&(this._objRef.shadowMapWidth=u)}set shadowMapHeight(u){this._objRef&&(this._objRef.shadowMapHeight=u)}}return H.\u0275fac=function(){let C;return function(U){return(C||(C=a.n5z(H)))(U||H)}}(),H.\u0275cmp=a.Xpm({type:H,selectors:[["th-light"]],inputs:{type:"type",color:"color",intensity:"intensity",shadow:"shadow",shadowCameraFov:"shadowCameraFov",shadowCameraLeft:"shadowCameraLeft",shadowCameraRight:"shadowCameraRight",shadowCameraTop:"shadowCameraTop",shadowCameraBottom:"shadowCameraBottom",shadowCameraNear:"shadowCameraNear",shadowCameraFar:"shadowCameraFar",shadowBias:"shadowBias",shadowMapWidth:"shadowMapWidth",shadowMapHeight:"shadowMapHeight"},features:[a._Bn([{provide:yn,useExisting:(0,a.Gpc)(()=>H)}]),a.qOj],decls:0,vars:0,template:function(u,U){},encapsulation:2,changeDetection:0}),H})(),us=(()=>{class H extends Ur{getType(){return ie.Mig}set type(u){this._objRef&&(this._objRef.type=u)}}return H.\u0275fac=function(){let C;return function(U){return(C||(C=a.n5z(H)))(U||H)}}(),H.\u0275cmp=a.Xpm({type:H,selectors:[["th-ambientLight"]],inputs:{type:"type"},features:[a._Bn([{provide:yn,useExisting:(0,a.Gpc)(()=>H)}]),a.qOj],decls:0,vars:0,template:function(u,U){},encapsulation:2,changeDetection:0}),H})(),lo=(()=>{class H extends Le{getType(){return ie.cPb}set type(u){this._objRef&&(this._objRef.type=u)}set zoom(u){this._objRef&&(this._objRef.zoom=u)}set fov(u){this._objRef&&(this._objRef.fov=u)}set aspect(u){this._objRef&&(this._objRef.aspect=u)}set near(u){this._objRef&&(this._objRef.near=u)}set far(u){this._objRef&&(this._objRef.far=u)}set focus(u){this._objRef&&(this._objRef.focus=u)}set view(u){this._objRef&&(this._objRef.view=u)}set filmGauge(u){this._objRef&&(this._objRef.filmGauge=u)}set filmOffset(u){this._objRef&&(this._objRef.filmOffset=u)}}return H.\u0275fac=function(){let C;return function(U){return(C||(C=a.n5z(H)))(U||H)}}(),H.\u0275cmp=a.Xpm({type:H,selectors:[["th-perspectiveCamera"]],inputs:{type:"type",zoom:"zoom",fov:"fov",aspect:"aspect",near:"near",far:"far",focus:"focus",view:"view",filmGauge:"filmGauge",filmOffset:"filmOffset"},features:[a._Bn([{provide:yn,useExisting:(0,a.Gpc)(()=>H)},{provide:Le,useExisting:(0,a.Gpc)(()=>H)}]),a.qOj],decls:0,vars:0,template:function(u,U){},encapsulation:2,changeDetection:0}),H})(),bn=(()=>{class H extends yn{getType(){return ie.x12}set geometry(u){this._objRef&&(this._objRef.geometry=u)}set material(u){this._objRef&&(this._objRef.material=u)}set type(u){this._objRef&&(this._objRef.type=u)}set morphTargetInfluences(u){this._objRef&&(this._objRef.morphTargetInfluences=u)}set morphTargetDictionary(u){this._objRef&&(this._objRef.morphTargetDictionary=u)}}return H.\u0275fac=function(){let C;return function(U){return(C||(C=a.n5z(H)))(U||H)}}(),H.\u0275cmp=a.Xpm({type:H,selectors:[["th-line"]],inputs:{geometry:"geometry",material:"material",type:"type",morphTargetInfluences:"morphTargetInfluences",morphTargetDictionary:"morphTargetDictionary"},features:[a._Bn([{provide:yn,useExisting:(0,a.Gpc)(()=>H)}]),a.qOj],decls:0,vars:0,template:function(u,U){},encapsulation:2,changeDetection:0}),H})(),Vs=(()=>{class H extends bn{getType(){return ie.ejS}set type(u){this._objRef&&(this._objRef.type=u)}}return H.\u0275fac=function(){let C;return function(U){return(C||(C=a.n5z(H)))(U||H)}}(),H.\u0275cmp=a.Xpm({type:H,selectors:[["th-lineSegments"]],inputs:{type:"type"},features:[a._Bn([{provide:yn,useExisting:(0,a.Gpc)(()=>H)}]),a.qOj],decls:0,vars:0,template:function(u,U){},encapsulation:2,changeDetection:0}),H})(),Hr=(()=>{class H extends Jt{constructor(u){super(),this.parent=u}addToParent(){this.parent.objRef&&(this.parent.objRef.geometry=this.objRef,this.parent.objRef.updateMorphTargets&&this.parent.objRef.updateMorphTargets())}removeFromParent(){this._objRef&&this.parent&&this.parent.objRef&&(this.parent.objRef.geometry=void 0)}}return H.\u0275fac=function(u){return new(u||H)(a.Y36(yn))},H.\u0275cmp=a.Xpm({type:H,selectors:[["th-abs-geometry"]],features:[a.qOj],decls:0,vars:0,template:function(u,U){},encapsulation:2}),H})(),Us=(()=>{class H extends Hr{getType(){return ie.u9r}set id(u){this._objRef&&(this._objRef.id=u)}set uuid(u){this._objRef&&(this._objRef.uuid=u)}set name(u){this._objRef&&(this._objRef.name=u)}set type(u){this._objRef&&(this._objRef.type=u)}set index(u){this._objRef&&(this._objRef.index=Me(this._objRef.index,u))}set attributes(u){this._objRef&&(this._objRef.attributes=u)}set morphAttributes(u){this._objRef&&(this._objRef.morphAttributes=u)}set morphTargetsRelative(u){this._objRef&&(this._objRef.morphTargetsRelative=u)}set groups(u){this._objRef&&(this._objRef.groups=u)}set boundingBox(u){this._objRef&&(this._objRef.boundingBox=Me(this._objRef.boundingBox,u))}set boundingSphere(u){this._objRef&&(this._objRef.boundingSphere=Me(this._objRef.boundingSphere,u))}set drawRange(u){this._objRef&&(this._objRef.drawRange=u)}set userData(u){this._objRef&&(this._objRef.userData=u)}set drawcalls(u){this._objRef&&(this._objRef.drawcalls=u)}set offsets(u){this._objRef&&(this._objRef.offsets=u)}constructor(u){super(u)}}return H.\u0275fac=function(u){return new(u||H)(a.Y36(yn,4))},H.\u0275cmp=a.Xpm({type:H,selectors:[["th-bufferGeometry"]],inputs:{id:"id",uuid:"uuid",name:"name",type:"type",index:"index",attributes:"attributes",morphAttributes:"morphAttributes",morphTargetsRelative:"morphTargetsRelative",groups:"groups",boundingBox:"boundingBox",boundingSphere:"boundingSphere",drawRange:"drawRange",userData:"userData",drawcalls:"drawcalls",offsets:"offsets"},features:[a._Bn([]),a.qOj],decls:0,vars:0,template:function(u,U){},encapsulation:2,changeDetection:0}),H})(),io=(()=>{class H extends Vs{getType(){return ie.VLJ}set type(u){this._objRef&&(this._objRef.type=u)}}return H.\u0275fac=function(){let C;return function(U){return(C||(C=a.n5z(H)))(U||H)}}(),H.\u0275cmp=a.Xpm({type:H,selectors:[["th-gridHelper"]],inputs:{type:"type"},features:[a._Bn([{provide:yn,useExisting:(0,a.Gpc)(()=>H)}]),a.qOj],decls:0,vars:0,template:function(u,U){},encapsulation:2,changeDetection:0}),H})(),Na=(()=>{class H extends yn{getType(){return ie.Kj0}set geometry(u){this._objRef&&(this._objRef.geometry=u)}set material(u){this._objRef&&(this._objRef.material=u)}set morphTargetInfluences(u){this._objRef&&(this._objRef.morphTargetInfluences=u)}set morphTargetDictionary(u){this._objRef&&(this._objRef.morphTargetDictionary=u)}set type(u){this._objRef&&(this._objRef.type=u)}}return H.\u0275fac=function(){let C;return function(U){return(C||(C=a.n5z(H)))(U||H)}}(),H.\u0275cmp=a.Xpm({type:H,selectors:[["th-mesh"]],inputs:{geometry:"geometry",material:"material",morphTargetInfluences:"morphTargetInfluences",morphTargetDictionary:"morphTargetDictionary",type:"type"},features:[a._Bn([{provide:yn,useExisting:(0,a.Gpc)(()=>H)}]),a.qOj],decls:0,vars:0,template:function(u,U){},encapsulation:2,changeDetection:0}),H})(),On=(()=>{class H extends Jt{constructor(u){super(),this.parent=u}addToParent(){if(!this.parent.objRef)throw new Error("parent object doesn't hold a three js object instance");this.parent.objRef.material=this.objRef}removeFromParent(){this._objRef&&this.parent&&this.parent.objRef&&(this.parent.objRef.material=void 0)}}return H.\u0275fac=function(u){return new(u||H)(a.Y36(yn))},H.\u0275cmp=a.Xpm({type:H,selectors:[["th-abs-material"]],features:[a.qOj],decls:0,vars:0,template:function(u,U){},encapsulation:2}),H})(),Ai=(()=>{class H extends On{getType(){return ie.F5T}set alphaTest(u){this._objRef&&(this._objRef.alphaTest=u)}set alphaToCoverage(u){this._objRef&&(this._objRef.alphaToCoverage=u)}set blendDst(u){this._objRef&&(this._objRef.blendDst=u)}set blendDstAlpha(u){this._objRef&&(this._objRef.blendDstAlpha=u)}set blendEquation(u){this._objRef&&(this._objRef.blendEquation=u)}set blendEquationAlpha(u){this._objRef&&(this._objRef.blendEquationAlpha=u)}set blending(u){this._objRef&&(this._objRef.blending=u)}set blendSrc(u){this._objRef&&(this._objRef.blendSrc=u)}set blendSrcAlpha(u){this._objRef&&(this._objRef.blendSrcAlpha=u)}set clipIntersection(u){this._objRef&&(this._objRef.clipIntersection=u)}set clippingPlanes(u){this._objRef&&(this._objRef.clippingPlanes=u)}set clipShadows(u){this._objRef&&(this._objRef.clipShadows=u)}set colorWrite(u){this._objRef&&(this._objRef.colorWrite=u)}set defines(u){this._objRef&&(this._objRef.defines=u)}set depthFunc(u){this._objRef&&(this._objRef.depthFunc=u)}set depthTest(u){this._objRef&&(this._objRef.depthTest=u)}set depthWrite(u){this._objRef&&(this._objRef.depthWrite=u)}set id(u){this._objRef&&(this._objRef.id=u)}set stencilWrite(u){this._objRef&&(this._objRef.stencilWrite=u)}set stencilFunc(u){this._objRef&&(this._objRef.stencilFunc=u)}set stencilRef(u){this._objRef&&(this._objRef.stencilRef=u)}set stencilWriteMask(u){this._objRef&&(this._objRef.stencilWriteMask=u)}set stencilFuncMask(u){this._objRef&&(this._objRef.stencilFuncMask=u)}set stencilFail(u){this._objRef&&(this._objRef.stencilFail=u)}set stencilZFail(u){this._objRef&&(this._objRef.stencilZFail=u)}set stencilZPass(u){this._objRef&&(this._objRef.stencilZPass=u)}set name(u){this._objRef&&(this._objRef.name=u)}set needsUpdate(u){this._objRef&&(this._objRef.needsUpdate=u)}set opacity(u){this._objRef&&(this._objRef.opacity=u)}set polygonOffset(u){this._objRef&&(this._objRef.polygonOffset=u)}set polygonOffsetFactor(u){this._objRef&&(this._objRef.polygonOffsetFactor=u)}set polygonOffsetUnits(u){this._objRef&&(this._objRef.polygonOffsetUnits=u)}set precision(u){this._objRef&&(this._objRef.precision=u)}set premultipliedAlpha(u){this._objRef&&(this._objRef.premultipliedAlpha=u)}set dithering(u){this._objRef&&(this._objRef.dithering=u)}set side(u){this._objRef&&(this._objRef.side=u)}set shadowSide(u){this._objRef&&(this._objRef.shadowSide=u)}set toneMapped(u){this._objRef&&(this._objRef.toneMapped=u)}set transparent(u){this._objRef&&(this._objRef.transparent=u)}set type(u){this._objRef&&(this._objRef.type=u)}set uuid(u){this._objRef&&(this._objRef.uuid=u)}set vertexColors(u){this._objRef&&(this._objRef.vertexColors=u)}set visible(u){this._objRef&&(this._objRef.visible=u)}set userData(u){this._objRef&&(this._objRef.userData=u)}set version(u){this._objRef&&(this._objRef.version=u)}constructor(u){super(u)}}return H.\u0275fac=function(u){return new(u||H)(a.Y36(yn,4))},H.\u0275cmp=a.Xpm({type:H,selectors:[["th-material"]],inputs:{alphaTest:"alphaTest",alphaToCoverage:"alphaToCoverage",blendDst:"blendDst",blendDstAlpha:"blendDstAlpha",blendEquation:"blendEquation",blendEquationAlpha:"blendEquationAlpha",blending:"blending",blendSrc:"blendSrc",blendSrcAlpha:"blendSrcAlpha",clipIntersection:"clipIntersection",clippingPlanes:"clippingPlanes",clipShadows:"clipShadows",colorWrite:"colorWrite",defines:"defines",depthFunc:"depthFunc",depthTest:"depthTest",depthWrite:"depthWrite",id:"id",stencilWrite:"stencilWrite",stencilFunc:"stencilFunc",stencilRef:"stencilRef",stencilWriteMask:"stencilWriteMask",stencilFuncMask:"stencilFuncMask",stencilFail:"stencilFail",stencilZFail:"stencilZFail",stencilZPass:"stencilZPass",name:"name",needsUpdate:"needsUpdate",opacity:"opacity",polygonOffset:"polygonOffset",polygonOffsetFactor:"polygonOffsetFactor",polygonOffsetUnits:"polygonOffsetUnits",precision:"precision",premultipliedAlpha:"premultipliedAlpha",dithering:"dithering",side:"side",shadowSide:"shadowSide",toneMapped:"toneMapped",transparent:"transparent",type:"type",uuid:"uuid",vertexColors:"vertexColors",visible:"visible",userData:"userData",version:"version"},features:[a._Bn([]),a.qOj],decls:0,vars:0,template:function(u,U){},encapsulation:2,changeDetection:0}),H})(),ds=(()=>{class H extends Ai{getType(){return ie.xoR}set type(u){this._objRef&&(this._objRef.type=u)}set color(u){this._objRef&&(this._objRef.color=Me(this._objRef.color,u))}set specular(u){this._objRef&&(this._objRef.specular=Me(this._objRef.specular,u))}set shininess(u){this._objRef&&(this._objRef.shininess=u)}set map(u){this._objRef&&(this._objRef.map=u)}set lightMap(u){this._objRef&&(this._objRef.lightMap=u)}set lightMapIntensity(u){this._objRef&&(this._objRef.lightMapIntensity=u)}set aoMap(u){this._objRef&&(this._objRef.aoMap=u)}set aoMapIntensity(u){this._objRef&&(this._objRef.aoMapIntensity=u)}set emissive(u){this._objRef&&(this._objRef.emissive=Me(this._objRef.emissive,u))}set emissiveIntensity(u){this._objRef&&(this._objRef.emissiveIntensity=u)}set emissiveMap(u){this._objRef&&(this._objRef.emissiveMap=u)}set bumpMap(u){this._objRef&&(this._objRef.bumpMap=u)}set bumpScale(u){this._objRef&&(this._objRef.bumpScale=u)}set normalMap(u){this._objRef&&(this._objRef.normalMap=u)}set normalMapType(u){this._objRef&&(this._objRef.normalMapType=u)}set normalScale(u){this._objRef&&(this._objRef.normalScale=Me(this._objRef.normalScale,u))}set displacementMap(u){this._objRef&&(this._objRef.displacementMap=u)}set displacementScale(u){this._objRef&&(this._objRef.displacementScale=u)}set displacementBias(u){this._objRef&&(this._objRef.displacementBias=u)}set specularMap(u){this._objRef&&(this._objRef.specularMap=u)}set alphaMap(u){this._objRef&&(this._objRef.alphaMap=u)}set envMap(u){this._objRef&&(this._objRef.envMap=u)}set combine(u){this._objRef&&(this._objRef.combine=u)}set reflectivity(u){this._objRef&&(this._objRef.reflectivity=u)}set refractionRatio(u){this._objRef&&(this._objRef.refractionRatio=u)}set wireframe(u){this._objRef&&(this._objRef.wireframe=u)}set wireframeLinewidth(u){this._objRef&&(this._objRef.wireframeLinewidth=u)}set wireframeLinecap(u){this._objRef&&(this._objRef.wireframeLinecap=u)}set wireframeLinejoin(u){this._objRef&&(this._objRef.wireframeLinejoin=u)}set flatShading(u){this._objRef&&(this._objRef.flatShading=u)}set metal(u){this._objRef&&(this._objRef.metal=u)}set fog(u){this._objRef&&(this._objRef.fog=u)}}return H.\u0275fac=function(){let C;return function(U){return(C||(C=a.n5z(H)))(U||H)}}(),H.\u0275cmp=a.Xpm({type:H,selectors:[["th-meshPhongMaterial"]],inputs:{type:"type",color:"color",specular:"specular",shininess:"shininess",map:"map",lightMap:"lightMap",lightMapIntensity:"lightMapIntensity",aoMap:"aoMap",aoMapIntensity:"aoMapIntensity",emissive:"emissive",emissiveIntensity:"emissiveIntensity",emissiveMap:"emissiveMap",bumpMap:"bumpMap",bumpScale:"bumpScale",normalMap:"normalMap",normalMapType:"normalMapType",normalScale:"normalScale",displacementMap:"displacementMap",displacementScale:"displacementScale",displacementBias:"displacementBias",specularMap:"specularMap",alphaMap:"alphaMap",envMap:"envMap",combine:"combine",reflectivity:"reflectivity",refractionRatio:"refractionRatio",wireframe:"wireframe",wireframeLinewidth:"wireframeLinewidth",wireframeLinecap:"wireframeLinecap",wireframeLinejoin:"wireframeLinejoin",flatShading:"flatShading",metal:"metal",fog:"fog"},features:[a._Bn([{provide:Ai,useExisting:(0,a.Gpc)(()=>H)}]),a.qOj],decls:0,vars:0,template:function(u,U){},encapsulation:2,changeDetection:0}),H})(),Xo=(()=>{class H extends Us{getType(){return ie._12}set type(u){this._objRef&&(this._objRef.type=u)}set parameters(u){this._objRef&&(this._objRef.parameters=u)}}return H.\u0275fac=function(){let C;return function(U){return(C||(C=a.n5z(H)))(U||H)}}(),H.\u0275cmp=a.Xpm({type:H,selectors:[["th-planeGeometry"]],inputs:{type:"type",parameters:"parameters"},features:[a._Bn([{provide:Us,useExisting:(0,a.Gpc)(()=>H)}]),a.qOj],decls:0,vars:0,template:function(u,U){},encapsulation:2,changeDetection:0}),H})(),Er=(()=>{class H extends yn{getType(){return ie.woe}set type(u){this._objRef&&(this._objRef.type=u)}set morphTargetInfluences(u){this._objRef&&(this._objRef.morphTargetInfluences=u)}set morphTargetDictionary(u){this._objRef&&(this._objRef.morphTargetDictionary=u)}set geometry(u){this._objRef&&(this._objRef.geometry=u)}set material(u){this._objRef&&(this._objRef.material=u)}}return H.\u0275fac=function(){let C;return function(U){return(C||(C=a.n5z(H)))(U||H)}}(),H.\u0275cmp=a.Xpm({type:H,selectors:[["th-points"]],inputs:{type:"type",morphTargetInfluences:"morphTargetInfluences",morphTargetDictionary:"morphTargetDictionary",geometry:"geometry",material:"material"},features:[a._Bn([{provide:yn,useExisting:(0,a.Gpc)(()=>H)}]),a.qOj],decls:0,vars:0,template:function(u,U){},encapsulation:2,changeDetection:0}),H})(),ns=(()=>{class H extends Ai{getType(){return ie.jyz}set type(u){this._objRef&&(this._objRef.type=u)}set defines(u){this._objRef&&(this._objRef.defines=u)}set uniforms(u){this._objRef&&(this._objRef.uniforms=u)}set vertexShader(u){this._objRef&&(this._objRef.vertexShader=u)}set fragmentShader(u){this._objRef&&(this._objRef.fragmentShader=u)}set linewidth(u){this._objRef&&(this._objRef.linewidth=u)}set wireframe(u){this._objRef&&(this._objRef.wireframe=u)}set wireframeLinewidth(u){this._objRef&&(this._objRef.wireframeLinewidth=u)}set fog(u){this._objRef&&(this._objRef.fog=u)}set lights(u){this._objRef&&(this._objRef.lights=u)}set clipping(u){this._objRef&&(this._objRef.clipping=u)}set derivatives(u){this._objRef&&(this._objRef.derivatives=u)}set extensions(u){this._objRef&&(this._objRef.extensions=u)}set defaultAttributeValues(u){this._objRef&&(this._objRef.defaultAttributeValues=u)}set index0AttributeName(u){this._objRef&&(this._objRef.index0AttributeName=u)}set uniformsNeedUpdate(u){this._objRef&&(this._objRef.uniformsNeedUpdate=u)}set glslVersion(u){this._objRef&&(this._objRef.glslVersion=u)}set isShaderMaterial(u){this._objRef&&(this._objRef.isShaderMaterial=u)}}return H.\u0275fac=function(){let C;return function(U){return(C||(C=a.n5z(H)))(U||H)}}(),H.\u0275cmp=a.Xpm({type:H,selectors:[["th-shaderMaterial"]],inputs:{type:"type",defines:"defines",uniforms:"uniforms",vertexShader:"vertexShader",fragmentShader:"fragmentShader",linewidth:"linewidth",wireframe:"wireframe",wireframeLinewidth:"wireframeLinewidth",fog:"fog",lights:"lights",clipping:"clipping",derivatives:"derivatives",extensions:"extensions",defaultAttributeValues:"defaultAttributeValues",index0AttributeName:"index0AttributeName",uniformsNeedUpdate:"uniformsNeedUpdate",glslVersion:"glslVersion",isShaderMaterial:"isShaderMaterial"},features:[a._Bn([{provide:Ai,useExisting:(0,a.Gpc)(()=>H)}]),a.qOj],decls:0,vars:0,template:function(u,U){},encapsulation:2,changeDetection:0}),H})(),hs=(()=>{class H{}return H.\u0275fac=function(u){return new(u||H)},H.\u0275mod=a.oAB({type:H}),H.\u0275inj=a.cJS({}),H})(),wr=(()=>{class H{constructor(u,U){this.engineService=u,this.animationLoopService=U}get beforeRender(){return this.engineService.beforeRender$}get onResize(){return this.engineService.resize$}set renderOnDemand(u){u?this.animationLoopService.stop():this.animationLoopService.start()}get renderOnDemand(){return!this.animationLoopService.isActive()}}return H.\u0275fac=function(u){return new(u||H)(a.Y36(wt),a.Y36(Wt))},H.\u0275dir=a.lG2({type:H,selectors:[["","beforeRender",""],["","onResize",""],["","renderOnDemand",""]],inputs:{renderOnDemand:"renderOnDemand"},outputs:{beforeRender:"beforeRender",onResize:"onResize"}}),H})();new ie.Pa4,new ie.Pa4,new ie.Pa4;let $n=(()=>{class H{}return H.\u0275fac=function(u){return new(u||H)},H.\u0275mod=a.oAB({type:H}),H.\u0275inj=a.cJS({imports:[hs,We.ez,hs]}),H})()},2329:(_n,Ke,te)=>{function a(v,e,t,s,l,h,g){try{var _=v[h](g),b=_.value}catch(x){return void t(x)}_.done?e(b):Promise.resolve(b).then(s,l)}te.d(Ke,{Mig:()=>O_,TlE:()=>kr,u9r:()=>di,V1s:()=>ko,SUY:()=>k_,Ilk:()=>Xt,VLJ:()=>Jh,_kC:()=>A_,x12:()=>zc,ejS:()=>Wc,F5T:()=>gr,Kj0:()=>R,xoR:()=>Ed,Tme:()=>Jr,cPb:()=>pr,_12:()=>sd,woe:()=>y_,iMs:()=>oy,xsS:()=>xu,jyz:()=>er,FM8:()=>Oe,Pa4:()=>ce,Ltg:()=>Ii,CP7:()=>f_});const pe="148",Qe=0,We=1,St=2,He=1,rt=2,Gt=3,Xe=0,Ge=1,lt=2,It=3,Qt=0,ti=1,an=2,Me=3,ot=4,ke=5,Ot=100,rn=101,Zt=102,vn=103,Jt=104,Kt=200,yn=201,fn=202,$e=203,Le=204,Je=205,nt=206,wt=207,Dt=208,Cn=209,ui=210,tr=0,Pn=1,Wn=2,Wt=3,Ri=4,Es=5,Sn=6,wn=7,cr=0,Si=1,Ur=2,us=0,Qr=1,Ia=2,Sr=3,lo=4,$o=5,Cr=301,As=302,bn=303,Vs=304,Li=306,tn=1e3,Ye=1001,fa=1002,Bn=1003,Hr=1004,nr=1005,mn=1006,Yo=1007,xo=1008,Hs=1009,zs=1010,Ws=1011,es=1012,$i=1013,yi=1014,br=1015,$s=1016,Jo=1017,wo=1018,co=1020,hl=1021,Bl=1022,we=1023,ve=1024,ae=1025,Re=1026,Fe=1027,Yt=1028,zn=1029,Bi=1030,Ki=1031,Is=1033,Tr=33776,pa=33777,Pa=33778,Oa=33779,qo=35840,jl=35841,uo=35842,Zo=35843,Ys=36196,io=37492,ma=37496,pi=37808,ir=37809,Ei=37810,zr=37811,Fr=37812,Sc=37813,Na=37814,Js=37815,qs=37816,Vt=37817,On=37818,Ai=37819,ts=37820,ys=37821,Yi=36492,bs=3e3,Dn=3001,Vl=3201,ro=0,fl=1,Wr="srgb",ur="srgb-linear",ta="300 es",ja=1035;class $r{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const s=this._listeners;void 0===s[e]&&(s[e]=[]),-1===s[e].indexOf(t)&&s[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const s=this._listeners;return void 0!==s[e]&&-1!==s[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const l=this._listeners[e];if(void 0!==l){const h=l.indexOf(t);-1!==h&&l.splice(h,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const s=this._listeners[e.type];if(void 0!==s){e.target=this;const l=s.slice(0);for(let h=0,g=l.length;h<g;h++)l[h].call(this,e);e.target=null}}}const Ar=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],po=Math.PI/180,ka=180/Math.PI;function Ir(){const v=4294967295*Math.random()|0,e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,s=4294967295*Math.random()|0;return(Ar[255&v]+Ar[v>>8&255]+Ar[v>>16&255]+Ar[v>>24&255]+"-"+Ar[255&e]+Ar[e>>8&255]+"-"+Ar[e>>16&15|64]+Ar[e>>24&255]+"-"+Ar[63&t|128]+Ar[t>>8&255]+"-"+Ar[t>>16&255]+Ar[t>>24&255]+Ar[255&s]+Ar[s>>8&255]+Ar[s>>16&255]+Ar[s>>24&255]).toLowerCase()}function rr(v,e,t){return Math.max(e,Math.min(t,v))}function na(v,e,t){return(1-t)*v+t*e}function Br(v){return 0==(v&v-1)&&0!==v}function Ps(v){return Math.pow(2,Math.floor(Math.log(v)/Math.LN2))}function is(v,e){switch(e.constructor){case Float32Array:return v;case Uint16Array:return v/65535;case Uint8Array:return v/255;case Int16Array:return Math.max(v/32767,-1);case Int8Array:return Math.max(v/127,-1);default:throw new Error("Invalid component type.")}}function ki(v,e){switch(e.constructor){case Float32Array:return v;case Uint16Array:return Math.round(65535*v);case Uint8Array:return Math.round(255*v);case Int16Array:return Math.round(32767*v);case Int8Array:return Math.round(127*v);default:throw new Error("Invalid component type.")}}class Oe{constructor(e=0,t=0){Oe.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,s=this.y,l=e.elements;return this.x=l[0]*t+l[3]*s+l[6],this.y=l[1]*t+l[4]*s+l[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const s=this.length();return this.divideScalar(s||1).multiplyScalar(Math.max(e,Math.min(t,s)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,s=this.y-e.y;return t*t+s*s}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,s){return this.x=e.x+(t.x-e.x)*s,this.y=e.y+(t.y-e.y)*s,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const s=Math.cos(t),l=Math.sin(t),h=this.x-e.x,g=this.y-e.y;return this.x=h*s-g*l+e.x,this.y=h*l+g*s+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Yr{constructor(){Yr.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,s,l,h,g,_,b,x){const S=this.elements;return S[0]=e,S[1]=l,S[2]=_,S[3]=t,S[4]=h,S[5]=b,S[6]=s,S[7]=g,S[8]=x,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,s=e.elements;return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],this}extractBasis(e,t,s){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),s.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const s=e.elements,l=t.elements,h=this.elements,g=s[0],_=s[3],b=s[6],x=s[1],S=s[4],A=s[7],E=s[2],L=s[5],G=s[8],j=l[0],k=l[3],Y=l[6],Z=l[1],$=l[4],J=l[7],se=l[2],de=l[5],_e=l[8];return h[0]=g*j+_*Z+b*se,h[3]=g*k+_*$+b*de,h[6]=g*Y+_*J+b*_e,h[1]=x*j+S*Z+A*se,h[4]=x*k+S*$+A*de,h[7]=x*Y+S*J+A*_e,h[2]=E*j+L*Z+G*se,h[5]=E*k+L*$+G*de,h[8]=E*Y+L*J+G*_e,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],s=e[1],l=e[2],h=e[3],g=e[4],_=e[5],b=e[6],x=e[7],S=e[8];return t*g*S-t*_*x-s*h*S+s*_*b+l*h*x-l*g*b}invert(){const e=this.elements,t=e[0],s=e[1],l=e[2],h=e[3],g=e[4],_=e[5],b=e[6],x=e[7],S=e[8],A=S*g-_*x,E=_*b-S*h,L=x*h-g*b,G=t*A+s*E+l*L;if(0===G)return this.set(0,0,0,0,0,0,0,0,0);const j=1/G;return e[0]=A*j,e[1]=(l*x-S*s)*j,e[2]=(_*s-l*g)*j,e[3]=E*j,e[4]=(S*t-l*b)*j,e[5]=(l*h-_*t)*j,e[6]=L*j,e[7]=(s*b-x*t)*j,e[8]=(g*t-s*h)*j,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,s,l,h,g,_){const b=Math.cos(h),x=Math.sin(h);return this.set(s*b,s*x,-s*(b*g+x*_)+g+e,-l*x,l*b,-l*(-x*g+b*_)+_+t,0,0,1),this}scale(e,t){return this.premultiply(nu.makeScale(e,t)),this}rotate(e){return this.premultiply(nu.makeRotation(-e)),this}translate(e,t){return this.premultiply(nu.makeTranslation(e,t)),this}makeTranslation(e,t){return this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),s=Math.sin(e);return this.set(t,-s,0,s,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,s=e.elements;for(let l=0;l<9;l++)if(t[l]!==s[l])return!1;return!0}fromArray(e,t=0){for(let s=0;s<9;s++)this.elements[s]=e[s+t];return this}toArray(e=[],t=0){const s=this.elements;return e[t]=s[0],e[t+1]=s[1],e[t+2]=s[2],e[t+3]=s[3],e[t+4]=s[4],e[t+5]=s[5],e[t+6]=s[6],e[t+7]=s[7],e[t+8]=s[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}const nu=new Yr;function Kl(v){for(let e=v.length-1;e>=0;--e)if(v[e]>=65535)return!0;return!1}function Ta(v){return document.createElementNS("http://www.w3.org/1999/xhtml",v)}function Va(v){return v<.04045?.0773993808*v:Math.pow(.9478672986*v+.0521327014,2.4)}function Ua(v){return v<.0031308?12.92*v:1.055*Math.pow(v,.41666)-.055}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const pt={[Wr]:{[ur]:Va},[ur]:{[Wr]:Ua}},Rn={legacyMode:!0,get workingColorSpace(){return ur},set workingColorSpace(v){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(v,e,t){if(this.legacyMode||e===t||!e||!t)return v;if(pt[e]&&void 0!==pt[e][t]){const s=pt[e][t];return v.r=s(v.r),v.g=s(v.g),v.b=s(v.b),v}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(v,e){return this.convert(v,this.workingColorSpace,e)},toWorkingColorSpace:function(v,e){return this.convert(v,e,this.workingColorSpace)}},Eo={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},dr={r:0,g:0,b:0},Gi={h:0,s:0,l:0},vl={h:0,s:0,l:0};function go(v,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?v+6*(e-v)*t:t<.5?e:t<2/3?v+6*(e-v)*(2/3-t):v}function Ms(v,e){return e.r=v.r,e.g=v.g,e.b=v.b,e}let so,Xt=(()=>{class v{constructor(t,s,l){return this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===s&&void 0===l?this.set(t):this.setRGB(t,s,l)}set(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,s=Wr){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,Rn.toWorkingColorSpace(this,s),this}setRGB(t,s,l,h=Rn.workingColorSpace){return this.r=t,this.g=s,this.b=l,Rn.toWorkingColorSpace(this,h),this}setHSL(t,s,l,h=Rn.workingColorSpace){if(t=function _l(v,e){return(v%e+e)%e}(t,1),s=rr(s,0,1),l=rr(l,0,1),0===s)this.r=this.g=this.b=l;else{const g=l<=.5?l*(1+s):l+s-l*s,_=2*l-g;this.r=go(_,g,t+1/3),this.g=go(_,g,t),this.b=go(_,g,t-1/3)}return Rn.toWorkingColorSpace(this,h),this}setStyle(t,s=Wr){function l(g){void 0!==g&&parseFloat(g)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let h;if(h=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(t)){let g;const b=h[2];switch(h[1]){case"rgb":case"rgba":if(g=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(b))return this.r=Math.min(255,parseInt(g[1],10))/255,this.g=Math.min(255,parseInt(g[2],10))/255,this.b=Math.min(255,parseInt(g[3],10))/255,Rn.toWorkingColorSpace(this,s),l(g[4]),this;if(g=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(b))return this.r=Math.min(100,parseInt(g[1],10))/100,this.g=Math.min(100,parseInt(g[2],10))/100,this.b=Math.min(100,parseInt(g[3],10))/100,Rn.toWorkingColorSpace(this,s),l(g[4]),this;break;case"hsl":case"hsla":if(g=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(b)){const x=parseFloat(g[1])/360,S=parseFloat(g[2])/100,A=parseFloat(g[3])/100;return l(g[4]),this.setHSL(x,S,A,s)}}}else if(h=/^\#([A-Fa-f\d]+)$/.exec(t)){const g=h[1],_=g.length;if(3===_)return this.r=parseInt(g.charAt(0)+g.charAt(0),16)/255,this.g=parseInt(g.charAt(1)+g.charAt(1),16)/255,this.b=parseInt(g.charAt(2)+g.charAt(2),16)/255,Rn.toWorkingColorSpace(this,s),this;if(6===_)return this.r=parseInt(g.charAt(0)+g.charAt(1),16)/255,this.g=parseInt(g.charAt(2)+g.charAt(3),16)/255,this.b=parseInt(g.charAt(4)+g.charAt(5),16)/255,Rn.toWorkingColorSpace(this,s),this}return t&&t.length>0?this.setColorName(t,s):this}setColorName(t,s=Wr){const l=Eo[t.toLowerCase()];return void 0!==l?this.setHex(l,s):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=Va(t.r),this.g=Va(t.g),this.b=Va(t.b),this}copyLinearToSRGB(t){return this.r=Ua(t.r),this.g=Ua(t.g),this.b=Ua(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=Wr){return Rn.fromWorkingColorSpace(Ms(this,dr),t),rr(255*dr.r,0,255)<<16^rr(255*dr.g,0,255)<<8^rr(255*dr.b,0,255)<<0}getHexString(t=Wr){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,s=Rn.workingColorSpace){Rn.fromWorkingColorSpace(Ms(this,dr),s);const l=dr.r,h=dr.g,g=dr.b,_=Math.max(l,h,g),b=Math.min(l,h,g);let x,S;const A=(b+_)/2;if(b===_)x=0,S=0;else{const E=_-b;switch(S=A<=.5?E/(_+b):E/(2-_-b),_){case l:x=(h-g)/E+(h<g?6:0);break;case h:x=(g-l)/E+2;break;case g:x=(l-h)/E+4}x/=6}return t.h=x,t.s=S,t.l=A,t}getRGB(t,s=Rn.workingColorSpace){return Rn.fromWorkingColorSpace(Ms(this,dr),s),t.r=dr.r,t.g=dr.g,t.b=dr.b,t}getStyle(t=Wr){return Rn.fromWorkingColorSpace(Ms(this,dr),t),t!==Wr?`color(${t} ${dr.r} ${dr.g} ${dr.b})`:`rgb(${255*dr.r|0},${255*dr.g|0},${255*dr.b|0})`}offsetHSL(t,s,l){return this.getHSL(Gi),Gi.h+=t,Gi.s+=s,Gi.l+=l,this.setHSL(Gi.h,Gi.s,Gi.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,s){return this.r=t.r+s.r,this.g=t.g+s.g,this.b=t.b+s.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,s){return this.r+=(t.r-this.r)*s,this.g+=(t.g-this.g)*s,this.b+=(t.b-this.b)*s,this}lerpColors(t,s,l){return this.r=t.r+(s.r-t.r)*l,this.g=t.g+(s.g-t.g)*l,this.b=t.b+(s.b-t.b)*l,this}lerpHSL(t,s){this.getHSL(Gi),t.getHSL(vl);const l=na(Gi.h,vl.h,s),h=na(Gi.s,vl.s,s),g=na(Gi.l,vl.l,s);return this.setHSL(l,h,g),this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,s=0){return this.r=t[s],this.g=t[s+1],this.b=t[s+2],this}toArray(t=[],s=0){return t[s]=this.r,t[s+1]=this.g,t[s+2]=this.b,t}fromBufferAttribute(t,s){return this.r=t.getX(s),this.g=t.getY(s),this.b=t.getZ(s),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}return v.NAMES=Eo,v})();class Ao{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===so&&(so=Ta("canvas")),so.width=e.width,so.height=e.height;const s=so.getContext("2d");e instanceof ImageData?s.putImageData(e,0,0):s.drawImage(e,0,0,e.width,e.height),t=so}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Ta("canvas");t.width=e.width,t.height=e.height;const s=t.getContext("2d");s.drawImage(e,0,0,e.width,e.height);const l=s.getImageData(0,0,e.width,e.height),h=l.data;for(let g=0;g<h.length;g++)h[g]=255*Va(h[g]/255);return s.putImageData(l,0,0),t}if(e.data){const t=e.data.slice(0);for(let s=0;s<t.length;s++)t[s]=t instanceof Uint8Array||t instanceof Uint8ClampedArray?Math.floor(255*Va(t[s]/255)):Va(t[s]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class yl{constructor(e=null){this.isSource=!0,this.uuid=Ir(),this.data=e,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const s={uuid:this.uuid,url:""},l=this.data;if(null!==l){let h;if(Array.isArray(l)){h=[];for(let g=0,_=l.length;g<_;g++)h.push(bl(l[g].isDataTexture?l[g].image:l[g]))}else h=bl(l);s.url=h}return t||(e.images[this.uuid]=s),s}}function bl(v){return typeof HTMLImageElement<"u"&&v instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&v instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&v instanceof ImageBitmap?Ao.getDataURL(v):v.data?{data:Array.from(v.data),width:v.width,height:v.height,type:v.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let jr=0,Dr=(()=>{class v extends $r{constructor(t=v.DEFAULT_IMAGE,s=v.DEFAULT_MAPPING,l=Ye,h=Ye,g=mn,_=xo,b=we,x=Hs,S=v.DEFAULT_ANISOTROPY,A=bs){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:jr++}),this.uuid=Ir(),this.name="",this.source=new yl(t),this.mipmaps=[],this.mapping=s,this.wrapS=l,this.wrapT=h,this.magFilter=g,this.minFilter=_,this.anisotropy=S,this.format=b,this.internalFormat=null,this.type=x,this.offset=new Oe(0,0),this.repeat=new Oe(1,1),this.center=new Oe(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Yr,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=A,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(t){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const s=void 0===t||"string"==typeof t;if(!s&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const l={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(l.userData=this.userData),s||(t.textures[this.uuid]=l),l}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(300!==this.mapping)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case tn:t.x=t.x-Math.floor(t.x);break;case Ye:t.x=t.x<0?0:1;break;case fa:t.x=1===Math.abs(Math.floor(t.x)%2)?Math.ceil(t.x)-t.x:t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case tn:t.y=t.y-Math.floor(t.y);break;case Ye:t.y=t.y<0?0:1;break;case fa:t.y=1===Math.abs(Math.floor(t.y)%2)?Math.ceil(t.y)-t.y:t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){!0===t&&(this.version++,this.source.needsUpdate=!0)}}return v.DEFAULT_IMAGE=null,v.DEFAULT_MAPPING=300,v.DEFAULT_ANISOTROPY=1,v})();class Ii{constructor(e=0,t=0,s=0,l=1){Ii.prototype.isVector4=!0,this.x=e,this.y=t,this.z=s,this.w=l}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,s,l){return this.x=e,this.y=t,this.z=s,this.w=l,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,s=this.y,l=this.z,h=this.w,g=e.elements;return this.x=g[0]*t+g[4]*s+g[8]*l+g[12]*h,this.y=g[1]*t+g[5]*s+g[9]*l+g[13]*h,this.z=g[2]*t+g[6]*s+g[10]*l+g[14]*h,this.w=g[3]*t+g[7]*s+g[11]*l+g[15]*h,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,s,l,h;const b=e.elements,x=b[0],S=b[4],A=b[8],E=b[1],L=b[5],G=b[9],j=b[2],k=b[6],Y=b[10];if(Math.abs(S-E)<.01&&Math.abs(A-j)<.01&&Math.abs(G-k)<.01){if(Math.abs(S+E)<.1&&Math.abs(A+j)<.1&&Math.abs(G+k)<.1&&Math.abs(x+L+Y-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const $=(x+1)/2,J=(L+1)/2,se=(Y+1)/2,de=(S+E)/4,_e=(A+j)/4,K=(G+k)/4;return $>J&&$>se?$<.01?(s=0,l=.707106781,h=.707106781):(s=Math.sqrt($),l=de/s,h=_e/s):J>se?J<.01?(s=.707106781,l=0,h=.707106781):(l=Math.sqrt(J),s=de/l,h=K/l):se<.01?(s=.707106781,l=.707106781,h=0):(h=Math.sqrt(se),s=_e/h,l=K/h),this.set(s,l,h,t),this}let Z=Math.sqrt((k-G)*(k-G)+(A-j)*(A-j)+(E-S)*(E-S));return Math.abs(Z)<.001&&(Z=1),this.x=(k-G)/Z,this.y=(A-j)/Z,this.z=(E-S)/Z,this.w=Math.acos((x+L+Y-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const s=this.length();return this.divideScalar(s||1).multiplyScalar(Math.max(e,Math.min(t,s)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,s){return this.x=e.x+(t.x-e.x)*s,this.y=e.y+(t.y-e.y)*s,this.z=e.z+(t.z-e.z)*s,this.w=e.w+(t.w-e.w)*s,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class rs extends $r{constructor(e=1,t=1,s={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Ii(0,0,e,t),this.scissorTest=!1,this.viewport=new Ii(0,0,e,t),this.texture=new Dr({width:e,height:t,depth:1},s.mapping,s.wrapS,s.wrapT,s.magFilter,s.minFilter,s.format,s.type,s.anisotropy,s.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==s.generateMipmaps&&s.generateMipmaps,this.texture.internalFormat=void 0!==s.internalFormat?s.internalFormat:null,this.texture.minFilter=void 0!==s.minFilter?s.minFilter:mn,this.depthBuffer=void 0===s.depthBuffer||s.depthBuffer,this.stencilBuffer=void 0!==s.stencilBuffer&&s.stencilBuffer,this.depthTexture=void 0!==s.depthTexture?s.depthTexture:null,this.samples=void 0!==s.samples?s.samples:0}setSize(e,t,s=1){(this.width!==e||this.height!==t||this.depth!==s)&&(this.width=e,this.height=t,this.depth=s,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=s,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new yl(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class fs extends Dr{constructor(e=null,t=1,s=1,l=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:s,depth:l},this.magFilter=Bn,this.minFilter=Bn,this.wrapR=Ye,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Xl extends Dr{constructor(e=null,t=1,s=1,l=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:s,depth:l},this.magFilter=Bn,this.minFilter=Bn,this.wrapR=Ye,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class wr{constructor(e=0,t=0,s=0,l=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=s,this._w=l}static slerpFlat(e,t,s,l,h,g,_){let b=s[l+0],x=s[l+1],S=s[l+2],A=s[l+3];const E=h[g+0],L=h[g+1],G=h[g+2],j=h[g+3];if(0===_)return e[t+0]=b,e[t+1]=x,e[t+2]=S,void(e[t+3]=A);if(1===_)return e[t+0]=E,e[t+1]=L,e[t+2]=G,void(e[t+3]=j);if(A!==j||b!==E||x!==L||S!==G){let k=1-_;const Y=b*E+x*L+S*G+A*j,Z=Y>=0?1:-1,$=1-Y*Y;if($>Number.EPSILON){const se=Math.sqrt($),de=Math.atan2(se,Y*Z);k=Math.sin(k*de)/se,_=Math.sin(_*de)/se}const J=_*Z;if(b=b*k+E*J,x=x*k+L*J,S=S*k+G*J,A=A*k+j*J,k===1-_){const se=1/Math.sqrt(b*b+x*x+S*S+A*A);b*=se,x*=se,S*=se,A*=se}}e[t]=b,e[t+1]=x,e[t+2]=S,e[t+3]=A}static multiplyQuaternionsFlat(e,t,s,l,h,g){const _=s[l],b=s[l+1],x=s[l+2],S=s[l+3],A=h[g],E=h[g+1],L=h[g+2],G=h[g+3];return e[t]=_*G+S*A+b*L-x*E,e[t+1]=b*G+S*E+x*A-_*L,e[t+2]=x*G+S*L+_*E-b*A,e[t+3]=S*G-_*A-b*E-x*L,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,s,l){return this._x=e,this._y=t,this._z=s,this._w=l,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const s=e._x,l=e._y,h=e._z,g=e._order,_=Math.cos,b=Math.sin,x=_(s/2),S=_(l/2),A=_(h/2),E=b(s/2),L=b(l/2),G=b(h/2);switch(g){case"XYZ":this._x=E*S*A+x*L*G,this._y=x*L*A-E*S*G,this._z=x*S*G+E*L*A,this._w=x*S*A-E*L*G;break;case"YXZ":this._x=E*S*A+x*L*G,this._y=x*L*A-E*S*G,this._z=x*S*G-E*L*A,this._w=x*S*A+E*L*G;break;case"ZXY":this._x=E*S*A-x*L*G,this._y=x*L*A+E*S*G,this._z=x*S*G+E*L*A,this._w=x*S*A-E*L*G;break;case"ZYX":this._x=E*S*A-x*L*G,this._y=x*L*A+E*S*G,this._z=x*S*G-E*L*A,this._w=x*S*A+E*L*G;break;case"YZX":this._x=E*S*A+x*L*G,this._y=x*L*A+E*S*G,this._z=x*S*G-E*L*A,this._w=x*S*A-E*L*G;break;case"XZY":this._x=E*S*A-x*L*G,this._y=x*L*A-E*S*G,this._z=x*S*G+E*L*A,this._w=x*S*A+E*L*G;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+g)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const s=t/2,l=Math.sin(s);return this._x=e.x*l,this._y=e.y*l,this._z=e.z*l,this._w=Math.cos(s),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,s=t[0],l=t[4],h=t[8],g=t[1],_=t[5],b=t[9],x=t[2],S=t[6],A=t[10],E=s+_+A;if(E>0){const L=.5/Math.sqrt(E+1);this._w=.25/L,this._x=(S-b)*L,this._y=(h-x)*L,this._z=(g-l)*L}else if(s>_&&s>A){const L=2*Math.sqrt(1+s-_-A);this._w=(S-b)/L,this._x=.25*L,this._y=(l+g)/L,this._z=(h+x)/L}else if(_>A){const L=2*Math.sqrt(1+_-s-A);this._w=(h-x)/L,this._x=(l+g)/L,this._y=.25*L,this._z=(b+S)/L}else{const L=2*Math.sqrt(1+A-s-_);this._w=(g-l)/L,this._x=(h+x)/L,this._y=(b+S)/L,this._z=.25*L}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let s=e.dot(t)+1;return s<Number.EPSILON?(s=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=s):(this._x=0,this._y=-e.z,this._z=e.y,this._w=s)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=s),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(rr(this.dot(e),-1,1)))}rotateTowards(e,t){const s=this.angleTo(e);if(0===s)return this;const l=Math.min(1,t/s);return this.slerp(e,l),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const s=e._x,l=e._y,h=e._z,g=e._w,_=t._x,b=t._y,x=t._z,S=t._w;return this._x=s*S+g*_+l*x-h*b,this._y=l*S+g*b+h*_-s*x,this._z=h*S+g*x+s*b-l*_,this._w=g*S-s*_-l*b-h*x,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const s=this._x,l=this._y,h=this._z,g=this._w;let _=g*e._w+s*e._x+l*e._y+h*e._z;if(_<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,_=-_):this.copy(e),_>=1)return this._w=g,this._x=s,this._y=l,this._z=h,this;const b=1-_*_;if(b<=Number.EPSILON){const L=1-t;return this._w=L*g+t*this._w,this._x=L*s+t*this._x,this._y=L*l+t*this._y,this._z=L*h+t*this._z,this.normalize(),this._onChangeCallback(),this}const x=Math.sqrt(b),S=Math.atan2(x,_),A=Math.sin((1-t)*S)/x,E=Math.sin(t*S)/x;return this._w=g*A+this._w*E,this._x=s*A+this._x*E,this._y=l*A+this._y*E,this._z=h*A+this._z*E,this._onChangeCallback(),this}slerpQuaternions(e,t,s){return this.copy(e).slerp(t,s)}random(){const e=Math.random(),t=Math.sqrt(1-e),s=Math.sqrt(e),l=2*Math.PI*Math.random(),h=2*Math.PI*Math.random();return this.set(t*Math.cos(l),s*Math.sin(h),s*Math.cos(h),t*Math.sin(l))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class ce{constructor(e=0,t=0,s=0){ce.prototype.isVector3=!0,this.x=e,this.y=t,this.z=s}set(e,t,s){return void 0===s&&(s=this.z),this.x=e,this.y=t,this.z=s,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(Ma.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(Ma.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,s=this.y,l=this.z,h=e.elements;return this.x=h[0]*t+h[3]*s+h[6]*l,this.y=h[1]*t+h[4]*s+h[7]*l,this.z=h[2]*t+h[5]*s+h[8]*l,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,s=this.y,l=this.z,h=e.elements,g=1/(h[3]*t+h[7]*s+h[11]*l+h[15]);return this.x=(h[0]*t+h[4]*s+h[8]*l+h[12])*g,this.y=(h[1]*t+h[5]*s+h[9]*l+h[13])*g,this.z=(h[2]*t+h[6]*s+h[10]*l+h[14])*g,this}applyQuaternion(e){const t=this.x,s=this.y,l=this.z,h=e.x,g=e.y,_=e.z,b=e.w,x=b*t+g*l-_*s,S=b*s+_*t-h*l,A=b*l+h*s-g*t,E=-h*t-g*s-_*l;return this.x=x*b+E*-h+S*-_-A*-g,this.y=S*b+E*-g+A*-h-x*-_,this.z=A*b+E*-_+x*-g-S*-h,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,s=this.y,l=this.z,h=e.elements;return this.x=h[0]*t+h[4]*s+h[8]*l,this.y=h[1]*t+h[5]*s+h[9]*l,this.z=h[2]*t+h[6]*s+h[10]*l,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const s=this.length();return this.divideScalar(s||1).multiplyScalar(Math.max(e,Math.min(t,s)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,s){return this.x=e.x+(t.x-e.x)*s,this.y=e.y+(t.y-e.y)*s,this.z=e.z+(t.z-e.z)*s,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const s=e.x,l=e.y,h=e.z,g=t.x,_=t.y,b=t.z;return this.x=l*b-h*_,this.y=h*g-s*b,this.z=s*_-l*g,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const s=e.dot(this)/t;return this.copy(e).multiplyScalar(s)}projectOnPlane(e){return za.copy(this).projectOnVector(e),this.sub(za)}reflect(e){return this.sub(za.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const s=this.dot(e)/t;return Math.acos(rr(s,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,s=this.y-e.y,l=this.z-e.z;return t*t+s*s+l*l}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,s){const l=Math.sin(t)*e;return this.x=l*Math.sin(s),this.y=Math.cos(t)*e,this.z=l*Math.cos(s),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,s){return this.x=e*Math.sin(t),this.y=s,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),s=this.setFromMatrixColumn(e,1).length(),l=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=s,this.z=l,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,s=Math.sqrt(1-e**2);return this.x=s*Math.cos(t),this.y=s*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const za=new ce,Ma=new wr;class Io{constructor(e=new ce(1/0,1/0,1/0),t=new ce(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,s=1/0,l=1/0,h=-1/0,g=-1/0,_=-1/0;for(let b=0,x=e.length;b<x;b+=3){const S=e[b],A=e[b+1],E=e[b+2];S<t&&(t=S),A<s&&(s=A),E<l&&(l=E),S>h&&(h=S),A>g&&(g=A),E>_&&(_=E)}return this.min.set(t,s,l),this.max.set(h,g,_),this}setFromBufferAttribute(e){let t=1/0,s=1/0,l=1/0,h=-1/0,g=-1/0,_=-1/0;for(let b=0,x=e.count;b<x;b++){const S=e.getX(b),A=e.getY(b),E=e.getZ(b);S<t&&(t=S),A<s&&(s=A),E<l&&(l=E),S>h&&(h=S),A>g&&(g=A),E>_&&(_=E)}return this.min.set(t,s,l),this.max.set(h,g,_),this}setFromPoints(e){this.makeEmpty();for(let t=0,s=e.length;t<s;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const s=xs.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(s),this.max.copy(e).add(s),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const s=e.geometry;if(void 0!==s)if(t&&null!=s.attributes&&void 0!==s.attributes.position){const h=s.attributes.position;for(let g=0,_=h.count;g<_;g++)xs.fromBufferAttribute(h,g).applyMatrix4(e.matrixWorld),this.expandByPoint(xs)}else null===s.boundingBox&&s.computeBoundingBox(),Wa.copy(s.boundingBox),Wa.applyMatrix4(e.matrixWorld),this.union(Wa);const l=e.children;for(let h=0,g=l.length;h<g;h++)this.expandByObject(l[h],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,xs),xs.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,s;return e.normal.x>0?(t=e.normal.x*this.min.x,s=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,s=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,s+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,s+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,s+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,s+=e.normal.z*this.min.z),t<=-e.constant&&s>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Rr),Ds.subVectors(this.max,Rr),ra.subVectors(e.a,Rr),sa.subVectors(e.b,Rr),Po.subVectors(e.c,Rr),_o.subVectors(sa,ra),Oo.subVectors(Po,sa),oa.subVectors(ra,Po);let t=[0,-_o.z,_o.y,0,-Oo.z,Oo.y,0,-oa.z,oa.y,_o.z,0,-_o.x,Oo.z,0,-Oo.x,oa.z,0,-oa.x,-_o.y,_o.x,0,-Oo.y,Oo.x,0,-oa.y,oa.x,0];return!(!iu(t,ra,sa,Po,Ds)||(t=[1,0,0,0,1,0,0,0,1],!iu(t,ra,sa,Po,Ds)))&&(Vi.crossVectors(_o,Oo),t=[Vi.x,Vi.y,Vi.z],iu(t,ra,sa,Po,Ds))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return xs.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=.5*this.getSize(xs).length(),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(Os[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Os[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Os[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Os[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Os[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Os[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Os[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Os[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Os)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Os=[new ce,new ce,new ce,new ce,new ce,new ce,new ce,new ce],xs=new ce,Wa=new Io,ra=new ce,sa=new ce,Po=new ce,_o=new ce,Oo=new ce,oa=new ce,Rr=new ce,Ds=new ce,Vi=new ce,xa=new ce;function iu(v,e,t,s,l){for(let h=0,g=v.length-3;h<=g;h+=3){xa.fromArray(v,h);const _=l.x*Math.abs(xa.x)+l.y*Math.abs(xa.y)+l.z*Math.abs(xa.z),b=e.dot(xa),x=t.dot(xa),S=s.dot(xa);if(Math.max(-Math.max(b,x,S),Math.min(b,x,S))>_)return!1}return!0}const Xu=new Io,Ql=new ce,O=new ce;class W{constructor(e=new ce,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const s=this.center;void 0!==t?s.copy(t):Xu.setFromPoints(e).getCenter(s);let l=0;for(let h=0,g=e.length;h<g;h++)l=Math.max(l,s.distanceToSquared(e[h]));return this.radius=Math.sqrt(l),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const s=this.center.distanceToSquared(e);return t.copy(e),s>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Ql.subVectors(e,this.center);const t=Ql.lengthSq();if(t>this.radius*this.radius){const s=Math.sqrt(t),l=.5*(s-this.radius);this.center.addScaledVector(Ql,l/s),this.radius+=l}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(O.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Ql.copy(e.center).add(O)),this.expandByPoint(Ql.copy(e.center).sub(O))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const B=new ce,X=new ce,ue=new ce,Pe=new ce,et=new ce,sn=new ce,ni=new ce;class $n{constructor(e=new ce,t=new ce(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,B)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const s=t.dot(this.direction);return s<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(s).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=B.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(B.copy(this.direction).multiplyScalar(t).add(this.origin),B.distanceToSquared(e))}distanceSqToSegment(e,t,s,l){X.copy(e).add(t).multiplyScalar(.5),ue.copy(t).sub(e).normalize(),Pe.copy(this.origin).sub(X);const h=.5*e.distanceTo(t),g=-this.direction.dot(ue),_=Pe.dot(this.direction),b=-Pe.dot(ue),x=Pe.lengthSq(),S=Math.abs(1-g*g);let A,E,L,G;if(S>0)if(A=g*b-_,E=g*_-b,G=h*S,A>=0)if(E>=-G)if(E<=G){const j=1/S;A*=j,E*=j,L=A*(A+g*E+2*_)+E*(g*A+E+2*b)+x}else E=h,A=Math.max(0,-(g*E+_)),L=-A*A+E*(E+2*b)+x;else E=-h,A=Math.max(0,-(g*E+_)),L=-A*A+E*(E+2*b)+x;else E<=-G?(A=Math.max(0,-(-g*h+_)),E=A>0?-h:Math.min(Math.max(-h,-b),h),L=-A*A+E*(E+2*b)+x):E<=G?(A=0,E=Math.min(Math.max(-h,-b),h),L=E*(E+2*b)+x):(A=Math.max(0,-(g*h+_)),E=A>0?h:Math.min(Math.max(-h,-b),h),L=-A*A+E*(E+2*b)+x);else E=g>0?-h:h,A=Math.max(0,-(g*E+_)),L=-A*A+E*(E+2*b)+x;return s&&s.copy(this.direction).multiplyScalar(A).add(this.origin),l&&l.copy(ue).multiplyScalar(E).add(X),L}intersectSphere(e,t){B.subVectors(e.center,this.origin);const s=B.dot(this.direction),l=B.dot(B)-s*s,h=e.radius*e.radius;if(l>h)return null;const g=Math.sqrt(h-l),_=s-g,b=s+g;return _<0&&b<0?null:this.at(_<0?b:_,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const s=-(this.origin.dot(e.normal)+e.constant)/t;return s>=0?s:null}intersectPlane(e,t){const s=this.distanceToPlane(e);return null===s?null:this.at(s,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let s,l,h,g,_,b;const x=1/this.direction.x,S=1/this.direction.y,A=1/this.direction.z,E=this.origin;return x>=0?(s=(e.min.x-E.x)*x,l=(e.max.x-E.x)*x):(s=(e.max.x-E.x)*x,l=(e.min.x-E.x)*x),S>=0?(h=(e.min.y-E.y)*S,g=(e.max.y-E.y)*S):(h=(e.max.y-E.y)*S,g=(e.min.y-E.y)*S),s>g||h>l||((h>s||isNaN(s))&&(s=h),(g<l||isNaN(l))&&(l=g),A>=0?(_=(e.min.z-E.z)*A,b=(e.max.z-E.z)*A):(_=(e.max.z-E.z)*A,b=(e.min.z-E.z)*A),s>b||_>l)||((_>s||s!=s)&&(s=_),(b<l||l!=l)&&(l=b),l<0)?null:this.at(s>=0?s:l,t)}intersectsBox(e){return null!==this.intersectBox(e,B)}intersectTriangle(e,t,s,l,h){et.subVectors(t,e),sn.subVectors(s,e),ni.crossVectors(et,sn);let _,g=this.direction.dot(ni);if(g>0){if(l)return null;_=1}else{if(!(g<0))return null;_=-1,g=-g}Pe.subVectors(this.origin,e);const b=_*this.direction.dot(sn.crossVectors(Pe,sn));if(b<0)return null;const x=_*this.direction.dot(et.cross(Pe));if(x<0||b+x>g)return null;const S=-_*Pe.dot(ni);return S<0?null:this.at(S/g,h)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Nt{constructor(){Nt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,s,l,h,g,_,b,x,S,A,E,L,G,j,k){const Y=this.elements;return Y[0]=e,Y[4]=t,Y[8]=s,Y[12]=l,Y[1]=h,Y[5]=g,Y[9]=_,Y[13]=b,Y[2]=x,Y[6]=S,Y[10]=A,Y[14]=E,Y[3]=L,Y[7]=G,Y[11]=j,Y[15]=k,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Nt).fromArray(this.elements)}copy(e){const t=this.elements,s=e.elements;return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t[9]=s[9],t[10]=s[10],t[11]=s[11],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],this}copyPosition(e){const t=this.elements,s=e.elements;return t[12]=s[12],t[13]=s[13],t[14]=s[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,s){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),s.setFromMatrixColumn(this,2),this}makeBasis(e,t,s){return this.set(e.x,t.x,s.x,0,e.y,t.y,s.y,0,e.z,t.z,s.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,s=e.elements,l=1/Kn.setFromMatrixColumn(e,0).length(),h=1/Kn.setFromMatrixColumn(e,1).length(),g=1/Kn.setFromMatrixColumn(e,2).length();return t[0]=s[0]*l,t[1]=s[1]*l,t[2]=s[2]*l,t[3]=0,t[4]=s[4]*h,t[5]=s[5]*h,t[6]=s[6]*h,t[7]=0,t[8]=s[8]*g,t[9]=s[9]*g,t[10]=s[10]*g,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,s=e.x,l=e.y,h=e.z,g=Math.cos(s),_=Math.sin(s),b=Math.cos(l),x=Math.sin(l),S=Math.cos(h),A=Math.sin(h);if("XYZ"===e.order){const E=g*S,L=g*A,G=_*S,j=_*A;t[0]=b*S,t[4]=-b*A,t[8]=x,t[1]=L+G*x,t[5]=E-j*x,t[9]=-_*b,t[2]=j-E*x,t[6]=G+L*x,t[10]=g*b}else if("YXZ"===e.order){const E=b*S,L=b*A,G=x*S,j=x*A;t[0]=E+j*_,t[4]=G*_-L,t[8]=g*x,t[1]=g*A,t[5]=g*S,t[9]=-_,t[2]=L*_-G,t[6]=j+E*_,t[10]=g*b}else if("ZXY"===e.order){const E=b*S,L=b*A,G=x*S,j=x*A;t[0]=E-j*_,t[4]=-g*A,t[8]=G+L*_,t[1]=L+G*_,t[5]=g*S,t[9]=j-E*_,t[2]=-g*x,t[6]=_,t[10]=g*b}else if("ZYX"===e.order){const E=g*S,L=g*A,G=_*S,j=_*A;t[0]=b*S,t[4]=G*x-L,t[8]=E*x+j,t[1]=b*A,t[5]=j*x+E,t[9]=L*x-G,t[2]=-x,t[6]=_*b,t[10]=g*b}else if("YZX"===e.order){const E=g*b,L=g*x,G=_*b,j=_*x;t[0]=b*S,t[4]=j-E*A,t[8]=G*A+L,t[1]=A,t[5]=g*S,t[9]=-_*S,t[2]=-x*S,t[6]=L*A+G,t[10]=E-j*A}else if("XZY"===e.order){const E=g*b,L=g*x,G=_*b,j=_*x;t[0]=b*S,t[4]=-A,t[8]=x*S,t[1]=E*A+j,t[5]=g*S,t[9]=L*A-G,t[2]=G*A-L,t[6]=_*S,t[10]=j*A+E}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(H,e,C)}lookAt(e,t,s){const l=this.elements;return Ve.subVectors(e,t),0===Ve.lengthSq()&&(Ve.z=1),Ve.normalize(),u.crossVectors(s,Ve),0===u.lengthSq()&&(1===Math.abs(s.z)?Ve.x+=1e-4:Ve.z+=1e-4,Ve.normalize(),u.crossVectors(s,Ve)),u.normalize(),U.crossVectors(Ve,u),l[0]=u.x,l[4]=U.x,l[8]=Ve.x,l[1]=u.y,l[5]=U.y,l[9]=Ve.y,l[2]=u.z,l[6]=U.z,l[10]=Ve.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const s=e.elements,l=t.elements,h=this.elements,g=s[0],_=s[4],b=s[8],x=s[12],S=s[1],A=s[5],E=s[9],L=s[13],G=s[2],j=s[6],k=s[10],Y=s[14],Z=s[3],$=s[7],J=s[11],se=s[15],de=l[0],_e=l[4],K=l[8],fe=l[12],Te=l[1],ze=l[5],bt=l[9],je=l[13],Se=l[2],at=l[6],Tt=l[10],At=l[14],_t=l[3],Pt=l[7],xt=l[11],st=l[15];return h[0]=g*de+_*Te+b*Se+x*_t,h[4]=g*_e+_*ze+b*at+x*Pt,h[8]=g*K+_*bt+b*Tt+x*xt,h[12]=g*fe+_*je+b*At+x*st,h[1]=S*de+A*Te+E*Se+L*_t,h[5]=S*_e+A*ze+E*at+L*Pt,h[9]=S*K+A*bt+E*Tt+L*xt,h[13]=S*fe+A*je+E*At+L*st,h[2]=G*de+j*Te+k*Se+Y*_t,h[6]=G*_e+j*ze+k*at+Y*Pt,h[10]=G*K+j*bt+k*Tt+Y*xt,h[14]=G*fe+j*je+k*At+Y*st,h[3]=Z*de+$*Te+J*Se+se*_t,h[7]=Z*_e+$*ze+J*at+se*Pt,h[11]=Z*K+$*bt+J*Tt+se*xt,h[15]=Z*fe+$*je+J*At+se*st,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],s=e[4],l=e[8],h=e[12],g=e[1],_=e[5],b=e[9],x=e[13],S=e[2],A=e[6],E=e[10],L=e[14];return e[3]*(+h*b*A-l*x*A-h*_*E+s*x*E+l*_*L-s*b*L)+e[7]*(+t*b*L-t*x*E+h*g*E-l*g*L+l*x*S-h*b*S)+e[11]*(+t*x*A-t*_*L-h*g*A+s*g*L+h*_*S-s*x*S)+e[15]*(-l*_*S-t*b*A+t*_*E+l*g*A-s*g*E+s*b*S)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,s){const l=this.elements;return e.isVector3?(l[12]=e.x,l[13]=e.y,l[14]=e.z):(l[12]=e,l[13]=t,l[14]=s),this}invert(){const e=this.elements,t=e[0],s=e[1],l=e[2],h=e[3],g=e[4],_=e[5],b=e[6],x=e[7],S=e[8],A=e[9],E=e[10],L=e[11],G=e[12],j=e[13],k=e[14],Y=e[15],Z=A*k*x-j*E*x+j*b*L-_*k*L-A*b*Y+_*E*Y,$=G*E*x-S*k*x-G*b*L+g*k*L+S*b*Y-g*E*Y,J=S*j*x-G*A*x+G*_*L-g*j*L-S*_*Y+g*A*Y,se=G*A*b-S*j*b-G*_*E+g*j*E+S*_*k-g*A*k,de=t*Z+s*$+l*J+h*se;if(0===de)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const _e=1/de;return e[0]=Z*_e,e[1]=(j*E*h-A*k*h-j*l*L+s*k*L+A*l*Y-s*E*Y)*_e,e[2]=(_*k*h-j*b*h+j*l*x-s*k*x-_*l*Y+s*b*Y)*_e,e[3]=(A*b*h-_*E*h-A*l*x+s*E*x+_*l*L-s*b*L)*_e,e[4]=$*_e,e[5]=(S*k*h-G*E*h+G*l*L-t*k*L-S*l*Y+t*E*Y)*_e,e[6]=(G*b*h-g*k*h-G*l*x+t*k*x+g*l*Y-t*b*Y)*_e,e[7]=(g*E*h-S*b*h+S*l*x-t*E*x-g*l*L+t*b*L)*_e,e[8]=J*_e,e[9]=(G*A*h-S*j*h-G*s*L+t*j*L+S*s*Y-t*A*Y)*_e,e[10]=(g*j*h-G*_*h+G*s*x-t*j*x-g*s*Y+t*_*Y)*_e,e[11]=(S*_*h-g*A*h-S*s*x+t*A*x+g*s*L-t*_*L)*_e,e[12]=se*_e,e[13]=(S*j*l-G*A*l+G*s*E-t*j*E-S*s*k+t*A*k)*_e,e[14]=(G*_*l-g*j*l-G*s*b+t*j*b+g*s*k-t*_*k)*_e,e[15]=(g*A*l-S*_*l+S*s*b-t*A*b-g*s*E+t*_*E)*_e,this}scale(e){const t=this.elements,s=e.x,l=e.y,h=e.z;return t[0]*=s,t[4]*=l,t[8]*=h,t[1]*=s,t[5]*=l,t[9]*=h,t[2]*=s,t[6]*=l,t[10]*=h,t[3]*=s,t[7]*=l,t[11]*=h,this}getMaxScaleOnAxis(){const e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))}makeTranslation(e,t,s){return this.set(1,0,0,e,0,1,0,t,0,0,1,s,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),s=Math.sin(e);return this.set(1,0,0,0,0,t,-s,0,0,s,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),s=Math.sin(e);return this.set(t,0,s,0,0,1,0,0,-s,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),s=Math.sin(e);return this.set(t,-s,0,0,s,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const s=Math.cos(t),l=Math.sin(t),h=1-s,g=e.x,_=e.y,b=e.z,x=h*g,S=h*_;return this.set(x*g+s,x*_-l*b,x*b+l*_,0,x*_+l*b,S*_+s,S*b-l*g,0,x*b-l*_,S*b+l*g,h*b*b+s,0,0,0,0,1),this}makeScale(e,t,s){return this.set(e,0,0,0,0,t,0,0,0,0,s,0,0,0,0,1),this}makeShear(e,t,s,l,h,g){return this.set(1,s,h,0,e,1,g,0,t,l,1,0,0,0,0,1),this}compose(e,t,s){const l=this.elements,h=t._x,g=t._y,_=t._z,b=t._w,x=h+h,S=g+g,A=_+_,E=h*x,L=h*S,G=h*A,j=g*S,k=g*A,Y=_*A,Z=b*x,$=b*S,J=b*A,se=s.x,de=s.y,_e=s.z;return l[0]=(1-(j+Y))*se,l[1]=(L+J)*se,l[2]=(G-$)*se,l[3]=0,l[4]=(L-J)*de,l[5]=(1-(E+Y))*de,l[6]=(k+Z)*de,l[7]=0,l[8]=(G+$)*_e,l[9]=(k-Z)*_e,l[10]=(1-(E+j))*_e,l[11]=0,l[12]=e.x,l[13]=e.y,l[14]=e.z,l[15]=1,this}decompose(e,t,s){const l=this.elements;let h=Kn.set(l[0],l[1],l[2]).length();const g=Kn.set(l[4],l[5],l[6]).length(),_=Kn.set(l[8],l[9],l[10]).length();this.determinant()<0&&(h=-h),e.x=l[12],e.y=l[13],e.z=l[14],mi.copy(this);const x=1/h,S=1/g,A=1/_;return mi.elements[0]*=x,mi.elements[1]*=x,mi.elements[2]*=x,mi.elements[4]*=S,mi.elements[5]*=S,mi.elements[6]*=S,mi.elements[8]*=A,mi.elements[9]*=A,mi.elements[10]*=A,t.setFromRotationMatrix(mi),s.x=h,s.y=g,s.z=_,this}makePerspective(e,t,s,l,h,g){const _=this.elements,x=2*h/(s-l),S=(t+e)/(t-e),A=(s+l)/(s-l),E=-(g+h)/(g-h),L=-2*g*h/(g-h);return _[0]=2*h/(t-e),_[4]=0,_[8]=S,_[12]=0,_[1]=0,_[5]=x,_[9]=A,_[13]=0,_[2]=0,_[6]=0,_[10]=E,_[14]=L,_[3]=0,_[7]=0,_[11]=-1,_[15]=0,this}makeOrthographic(e,t,s,l,h,g){const _=this.elements,b=1/(t-e),x=1/(s-l),S=1/(g-h),A=(t+e)*b,E=(s+l)*x,L=(g+h)*S;return _[0]=2*b,_[4]=0,_[8]=0,_[12]=-A,_[1]=0,_[5]=2*x,_[9]=0,_[13]=-E,_[2]=0,_[6]=0,_[10]=-2*S,_[14]=-L,_[3]=0,_[7]=0,_[11]=0,_[15]=1,this}equals(e){const t=this.elements,s=e.elements;for(let l=0;l<16;l++)if(t[l]!==s[l])return!1;return!0}fromArray(e,t=0){for(let s=0;s<16;s++)this.elements[s]=e[s+t];return this}toArray(e=[],t=0){const s=this.elements;return e[t]=s[0],e[t+1]=s[1],e[t+2]=s[2],e[t+3]=s[3],e[t+4]=s[4],e[t+5]=s[5],e[t+6]=s[6],e[t+7]=s[7],e[t+8]=s[8],e[t+9]=s[9],e[t+10]=s[10],e[t+11]=s[11],e[t+12]=s[12],e[t+13]=s[13],e[t+14]=s[14],e[t+15]=s[15],e}}const Kn=new ce,mi=new Nt,H=new ce(0,0,0),C=new ce(1,1,1),u=new ce,U=new ce,Ve=new ce,nn=new Nt,ii=new wr;let Xi=(()=>{class v{constructor(t=0,s=0,l=0,h=v.DefaultOrder){this.isEuler=!0,this._x=t,this._y=s,this._z=l,this._order=h}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,s,l,h=this._order){return this._x=t,this._y=s,this._z=l,this._order=h,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,s=this._order,l=!0){const h=t.elements,g=h[0],_=h[4],b=h[8],x=h[1],S=h[5],A=h[9],E=h[2],L=h[6],G=h[10];switch(s){case"XYZ":this._y=Math.asin(rr(b,-1,1)),Math.abs(b)<.9999999?(this._x=Math.atan2(-A,G),this._z=Math.atan2(-_,g)):(this._x=Math.atan2(L,S),this._z=0);break;case"YXZ":this._x=Math.asin(-rr(A,-1,1)),Math.abs(A)<.9999999?(this._y=Math.atan2(b,G),this._z=Math.atan2(x,S)):(this._y=Math.atan2(-E,g),this._z=0);break;case"ZXY":this._x=Math.asin(rr(L,-1,1)),Math.abs(L)<.9999999?(this._y=Math.atan2(-E,G),this._z=Math.atan2(-_,S)):(this._y=0,this._z=Math.atan2(x,g));break;case"ZYX":this._y=Math.asin(-rr(E,-1,1)),Math.abs(E)<.9999999?(this._x=Math.atan2(L,G),this._z=Math.atan2(x,g)):(this._x=0,this._z=Math.atan2(-_,S));break;case"YZX":this._z=Math.asin(rr(x,-1,1)),Math.abs(x)<.9999999?(this._x=Math.atan2(-A,S),this._y=Math.atan2(-E,g)):(this._x=0,this._y=Math.atan2(b,G));break;case"XZY":this._z=Math.asin(-rr(_,-1,1)),Math.abs(_)<.9999999?(this._x=Math.atan2(L,S),this._y=Math.atan2(b,g)):(this._x=Math.atan2(-A,G),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+s)}return this._order=s,!0===l&&this._onChangeCallback(),this}setFromQuaternion(t,s,l){return nn.makeRotationFromQuaternion(t),this.setFromRotationMatrix(nn,s,l)}setFromVector3(t,s=this._order){return this.set(t.x,t.y,t.z,s)}reorder(t){return ii.setFromEuler(this),this.setFromQuaternion(ii,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],s=0){return t[s]=this._x,t[s+1]=this._y,t[s+2]=this._z,t[s+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}return v.DefaultOrder="XYZ",v.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],v})();class hr{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}isEnabled(e){return 0!=(this.mask&(1<<e|0))}}let $a=0;const Ns=new ce,aa=new wr,No=new Nt,Da=new ce,Ya=new ce,Pc=new ce,ru=new wr,su=new ce(1,0,0),ou=new ce(0,1,0),Oc=new ce(0,0,1),Fo={type:"added"},Yd={type:"removed"};let Jr=(()=>{class v extends $r{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:$a++}),this.uuid=Ir(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=v.DefaultUp.clone();const t=new ce,s=new Xi,l=new wr,h=new ce(1,1,1);s._onChange(function g(){l.setFromEuler(s,!1)}),l._onChange(function _(){s.setFromQuaternion(l,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:s},quaternion:{configurable:!0,enumerable:!0,value:l},scale:{configurable:!0,enumerable:!0,value:h},modelViewMatrix:{value:new Nt},normalMatrix:{value:new Yr}}),this.matrix=new Nt,this.matrixWorld=new Nt,this.matrixAutoUpdate=v.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=v.DefaultMatrixWorldAutoUpdate,this.layers=new hr,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,s){this.quaternion.setFromAxisAngle(t,s)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,s){return aa.setFromAxisAngle(t,s),this.quaternion.multiply(aa),this}rotateOnWorldAxis(t,s){return aa.setFromAxisAngle(t,s),this.quaternion.premultiply(aa),this}rotateX(t){return this.rotateOnAxis(su,t)}rotateY(t){return this.rotateOnAxis(ou,t)}rotateZ(t){return this.rotateOnAxis(Oc,t)}translateOnAxis(t,s){return Ns.copy(t).applyQuaternion(this.quaternion),this.position.add(Ns.multiplyScalar(s)),this}translateX(t){return this.translateOnAxis(su,t)}translateY(t){return this.translateOnAxis(ou,t)}translateZ(t){return this.translateOnAxis(Oc,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(No.copy(this.matrixWorld).invert())}lookAt(t,s,l){t.isVector3?Da.copy(t):Da.set(t,s,l);const h=this.parent;this.updateWorldMatrix(!0,!1),Ya.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?No.lookAt(Ya,Da,this.up):No.lookAt(Da,Ya,this.up),this.quaternion.setFromRotationMatrix(No),h&&(No.extractRotation(h.matrixWorld),aa.setFromRotationMatrix(No),this.quaternion.premultiply(aa.invert()))}add(t){if(arguments.length>1){for(let s=0;s<arguments.length;s++)this.add(arguments[s]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(Fo)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let l=0;l<arguments.length;l++)this.remove(arguments[l]);return this}const s=this.children.indexOf(t);return-1!==s&&(t.parent=null,this.children.splice(s,1),t.dispatchEvent(Yd)),this}removeFromParent(){const t=this.parent;return null!==t&&t.remove(this),this}clear(){for(let t=0;t<this.children.length;t++){const s=this.children[t];s.parent=null,s.dispatchEvent(Yd)}return this.children.length=0,this}attach(t){return this.updateWorldMatrix(!0,!1),No.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),No.multiply(t.parent.matrixWorld)),t.applyMatrix4(No),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,s){if(this[t]===s)return this;for(let l=0,h=this.children.length;l<h;l++){const _=this.children[l].getObjectByProperty(t,s);if(void 0!==_)return _}}getObjectsByProperty(t,s){let l=[];this[t]===s&&l.push(this);for(let h=0,g=this.children.length;h<g;h++){const _=this.children[h].getObjectsByProperty(t,s);_.length>0&&(l=l.concat(_))}return l}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ya,t,Pc),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ya,ru,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const s=this.matrixWorld.elements;return t.set(s[8],s[9],s[10]).normalize()}raycast(){}traverse(t){t(this);const s=this.children;for(let l=0,h=s.length;l<h;l++)s[l].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);const s=this.children;for(let l=0,h=s.length;l<h;l++)s[l].traverseVisible(t)}traverseAncestors(t){const s=this.parent;null!==s&&(t(s),s.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const s=this.children;for(let l=0,h=s.length;l<h;l++){const g=s[l];(!0===g.matrixWorldAutoUpdate||!0===t)&&g.updateMatrixWorld(t)}}updateWorldMatrix(t,s){const l=this.parent;if(!0===t&&null!==l&&!0===l.matrixWorldAutoUpdate&&l.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===s){const h=this.children;for(let g=0,_=h.length;g<_;g++){const b=h[g];!0===b.matrixWorldAutoUpdate&&b.updateWorldMatrix(!1,!0)}}}toJSON(t){const s=void 0===t||"string"==typeof t,l={};s&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},l.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const h={};function g(b,x){return void 0===b[x.uuid]&&(b[x.uuid]=x.toJSON(t)),x.uuid}if(h.uuid=this.uuid,h.type=this.type,""!==this.name&&(h.name=this.name),!0===this.castShadow&&(h.castShadow=!0),!0===this.receiveShadow&&(h.receiveShadow=!0),!1===this.visible&&(h.visible=!1),!1===this.frustumCulled&&(h.frustumCulled=!1),0!==this.renderOrder&&(h.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(h.userData=this.userData),h.layers=this.layers.mask,h.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(h.matrixAutoUpdate=!1),this.isInstancedMesh&&(h.type="InstancedMesh",h.count=this.count,h.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(h.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?h.background=this.background.toJSON():this.background.isTexture&&(h.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(h.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){h.geometry=g(t.geometries,this.geometry);const b=this.geometry.parameters;if(void 0!==b&&void 0!==b.shapes){const x=b.shapes;if(Array.isArray(x))for(let S=0,A=x.length;S<A;S++)g(t.shapes,x[S]);else g(t.shapes,x)}}if(this.isSkinnedMesh&&(h.bindMode=this.bindMode,h.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(g(t.skeletons,this.skeleton),h.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const b=[];for(let x=0,S=this.material.length;x<S;x++)b.push(g(t.materials,this.material[x]));h.material=b}else h.material=g(t.materials,this.material);if(this.children.length>0){h.children=[];for(let b=0;b<this.children.length;b++)h.children.push(this.children[b].toJSON(t).object)}if(this.animations.length>0){h.animations=[];for(let b=0;b<this.animations.length;b++)h.animations.push(g(t.animations,this.animations[b]))}if(s){const b=_(t.geometries),x=_(t.materials),S=_(t.textures),A=_(t.images),E=_(t.shapes),L=_(t.skeletons),G=_(t.animations),j=_(t.nodes);b.length>0&&(l.geometries=b),x.length>0&&(l.materials=x),S.length>0&&(l.textures=S),A.length>0&&(l.images=A),E.length>0&&(l.shapes=E),L.length>0&&(l.skeletons=L),G.length>0&&(l.animations=G),j.length>0&&(l.nodes=j)}return l.object=h,l;function _(b){const x=[];for(const S in b){const A=b[S];delete A.metadata,x.push(A)}return x}}clone(t){return(new this.constructor).copy(this,t)}copy(t,s=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===s)for(let l=0;l<t.children.length;l++)this.add(t.children[l].clone());return this}}return v.DefaultUp=new ce(0,1,0),v.DefaultMatrixAutoUpdate=!0,v.DefaultMatrixWorldAutoUpdate=!0,v})();const oo=new ce,bi=new ce,Lo=new ce,fr=new ce,Ja=new ce,Ks=new ce,la=new ce,ec=new ce,qa=new ce,Nc=new ce;class ps{constructor(e=new ce,t=new ce,s=new ce){this.a=e,this.b=t,this.c=s}static getNormal(e,t,s,l){l.subVectors(s,t),oo.subVectors(e,t),l.cross(oo);const h=l.lengthSq();return h>0?l.multiplyScalar(1/Math.sqrt(h)):l.set(0,0,0)}static getBarycoord(e,t,s,l,h){oo.subVectors(l,t),bi.subVectors(s,t),Lo.subVectors(e,t);const g=oo.dot(oo),_=oo.dot(bi),b=oo.dot(Lo),x=bi.dot(bi),S=bi.dot(Lo),A=g*x-_*_;if(0===A)return h.set(-2,-1,-1);const E=1/A,L=(x*b-_*S)*E,G=(g*S-_*b)*E;return h.set(1-L-G,G,L)}static containsPoint(e,t,s,l){return this.getBarycoord(e,t,s,l,fr),fr.x>=0&&fr.y>=0&&fr.x+fr.y<=1}static getUV(e,t,s,l,h,g,_,b){return this.getBarycoord(e,t,s,l,fr),b.set(0,0),b.addScaledVector(h,fr.x),b.addScaledVector(g,fr.y),b.addScaledVector(_,fr.z),b}static isFrontFacing(e,t,s,l){return oo.subVectors(s,t),bi.subVectors(e,t),oo.cross(bi).dot(l)<0}set(e,t,s){return this.a.copy(e),this.b.copy(t),this.c.copy(s),this}setFromPointsAndIndices(e,t,s,l){return this.a.copy(e[t]),this.b.copy(e[s]),this.c.copy(e[l]),this}setFromAttributeAndIndices(e,t,s,l){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,s),this.c.fromBufferAttribute(e,l),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return oo.subVectors(this.c,this.b),bi.subVectors(this.a,this.b),.5*oo.cross(bi).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return ps.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return ps.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,s,l,h){return ps.getUV(e,this.a,this.b,this.c,t,s,l,h)}containsPoint(e){return ps.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return ps.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const s=this.a,l=this.b,h=this.c;let g,_;Ja.subVectors(l,s),Ks.subVectors(h,s),ec.subVectors(e,s);const b=Ja.dot(ec),x=Ks.dot(ec);if(b<=0&&x<=0)return t.copy(s);qa.subVectors(e,l);const S=Ja.dot(qa),A=Ks.dot(qa);if(S>=0&&A<=S)return t.copy(l);const E=b*A-S*x;if(E<=0&&b>=0&&S<=0)return g=b/(b-S),t.copy(s).addScaledVector(Ja,g);Nc.subVectors(e,h);const L=Ja.dot(Nc),G=Ks.dot(Nc);if(G>=0&&L<=G)return t.copy(h);const j=L*x-b*G;if(j<=0&&x>=0&&G<=0)return _=x/(x-G),t.copy(s).addScaledVector(Ks,_);const k=S*G-L*A;if(k<=0&&A-S>=0&&L-G>=0)return la.subVectors(h,l),_=(A-S)/(A-S+(L-G)),t.copy(l).addScaledVector(la,_);const Y=1/(k+j+E);return g=j*Y,_=E*Y,t.copy(s).addScaledVector(Ja,g).addScaledVector(Ks,_)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let ao=0;class gr extends $r{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:ao++}),this.uuid=Ir(),this.name="",this.type="Material",this.blending=ti,this.side=Xe,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=Le,this.blendDst=Je,this.blendEquation=Ot,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Wt,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const s=e[t];if(void 0===s){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}const l=this[t];void 0!==l?l&&l.isColor?l.set(s):l&&l.isVector3&&s&&s.isVector3?l.copy(s):this[t]=s:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const s={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function l(h){const g=[];for(const _ in h){const b=h[_];delete b.metadata,g.push(b)}return g}if(s.uuid=this.uuid,s.type=this.type,""!==this.name&&(s.name=this.name),this.color&&this.color.isColor&&(s.color=this.color.getHex()),void 0!==this.roughness&&(s.roughness=this.roughness),void 0!==this.metalness&&(s.metalness=this.metalness),void 0!==this.sheen&&(s.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(s.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(s.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(s.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(s.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(s.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(s.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(s.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(s.shininess=this.shininess),void 0!==this.clearcoat&&(s.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(s.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(s.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(s.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(s.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,s.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(s.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(s.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(s.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(s.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(s.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(s.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(s.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(s.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(s.lightMap=this.lightMap.toJSON(e).uuid,s.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(s.aoMap=this.aoMap.toJSON(e).uuid,s.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(s.bumpMap=this.bumpMap.toJSON(e).uuid,s.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(s.normalMap=this.normalMap.toJSON(e).uuid,s.normalMapType=this.normalMapType,s.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(s.displacementMap=this.displacementMap.toJSON(e).uuid,s.displacementScale=this.displacementScale,s.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(s.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(s.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(s.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(s.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(s.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(s.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(s.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(s.combine=this.combine)),void 0!==this.envMapIntensity&&(s.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(s.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(s.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(s.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(s.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(s.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(s.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(s.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(s.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(s.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(s.size=this.size),null!==this.shadowSide&&(s.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(s.sizeAttenuation=this.sizeAttenuation),this.blending!==ti&&(s.blending=this.blending),this.side!==Xe&&(s.side=this.side),this.vertexColors&&(s.vertexColors=!0),this.opacity<1&&(s.opacity=this.opacity),!0===this.transparent&&(s.transparent=this.transparent),s.depthFunc=this.depthFunc,s.depthTest=this.depthTest,s.depthWrite=this.depthWrite,s.colorWrite=this.colorWrite,s.stencilWrite=this.stencilWrite,s.stencilWriteMask=this.stencilWriteMask,s.stencilFunc=this.stencilFunc,s.stencilRef=this.stencilRef,s.stencilFuncMask=this.stencilFuncMask,s.stencilFail=this.stencilFail,s.stencilZFail=this.stencilZFail,s.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(s.rotation=this.rotation),!0===this.polygonOffset&&(s.polygonOffset=!0),0!==this.polygonOffsetFactor&&(s.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(s.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(s.linewidth=this.linewidth),void 0!==this.dashSize&&(s.dashSize=this.dashSize),void 0!==this.gapSize&&(s.gapSize=this.gapSize),void 0!==this.scale&&(s.scale=this.scale),!0===this.dithering&&(s.dithering=!0),this.alphaTest>0&&(s.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(s.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(s.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(s.wireframe=this.wireframe),this.wireframeLinewidth>1&&(s.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(s.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(s.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(s.flatShading=this.flatShading),!1===this.visible&&(s.visible=!1),!1===this.toneMapped&&(s.toneMapped=!1),!1===this.fog&&(s.fog=!1),Object.keys(this.userData).length>0&&(s.userData=this.userData),t){const h=l(e.textures),g=l(e.images);h.length>0&&(s.textures=h),g.length>0&&(s.images=g)}return s}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let s=null;if(null!==t){const l=t.length;s=new Array(l);for(let h=0;h!==l;++h)s[h]=t[h].clone()}return this.clippingPlanes=s,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}class ca extends gr{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Xt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=cr,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Qi=new ce,ws=new Oe;class kr{constructor(e,t,s=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=s,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,s){e*=this.itemSize,s*=t.itemSize;for(let l=0,h=this.itemSize;l<h;l++)this.array[e+l]=t.array[s+l];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,s=this.count;t<s;t++)ws.fromBufferAttribute(this,t),ws.applyMatrix3(e),this.setXY(t,ws.x,ws.y);else if(3===this.itemSize)for(let t=0,s=this.count;t<s;t++)Qi.fromBufferAttribute(this,t),Qi.applyMatrix3(e),this.setXYZ(t,Qi.x,Qi.y,Qi.z);return this}applyMatrix4(e){for(let t=0,s=this.count;t<s;t++)Qi.fromBufferAttribute(this,t),Qi.applyMatrix4(e),this.setXYZ(t,Qi.x,Qi.y,Qi.z);return this}applyNormalMatrix(e){for(let t=0,s=this.count;t<s;t++)Qi.fromBufferAttribute(this,t),Qi.applyNormalMatrix(e),this.setXYZ(t,Qi.x,Qi.y,Qi.z);return this}transformDirection(e){for(let t=0,s=this.count;t<s;t++)Qi.fromBufferAttribute(this,t),Qi.transformDirection(e),this.setXYZ(t,Qi.x,Qi.y,Qi.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=is(t,this.array)),t}setX(e,t){return this.normalized&&(t=ki(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=is(t,this.array)),t}setY(e,t){return this.normalized&&(t=ki(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=is(t,this.array)),t}setZ(e,t){return this.normalized&&(t=ki(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=is(t,this.array)),t}setW(e,t){return this.normalized&&(t=ki(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,s){return e*=this.itemSize,this.normalized&&(t=ki(t,this.array),s=ki(s,this.array)),this.array[e+0]=t,this.array[e+1]=s,this}setXYZ(e,t,s,l){return e*=this.itemSize,this.normalized&&(t=ki(t,this.array),s=ki(s,this.array),l=ki(l,this.array)),this.array[e+0]=t,this.array[e+1]=s,this.array[e+2]=l,this}setXYZW(e,t,s,l,h){return e*=this.itemSize,this.normalized&&(t=ki(t,this.array),s=ki(s,this.array),l=ki(l,this.array),h=ki(h,this.array)),this.array[e+0]=t,this.array[e+1]=s,this.array[e+2]=l,this.array[e+3]=h,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),35044!==this.usage&&(e.usage=this.usage),(0!==this.updateRange.offset||-1!==this.updateRange.count)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class Ml extends kr{constructor(e,t,s){super(new Uint16Array(e),t,s)}}class wa extends kr{constructor(e,t,s){super(new Uint32Array(e),t,s)}}class dn extends kr{constructor(e,t,s){super(new Float32Array(e),t,s)}}let Za=0;const vo=new Nt,au=new Jr,Ui=new ce,Bo=new Io,Ka=new Io,_r=new ce;class di extends $r{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Za++}),this.uuid=Ir(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return this.index=Array.isArray(e)?new(Kl(e)?wa:Ml)(e,1):e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,s=0){this.groups.push({start:e,count:t,materialIndex:s})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const s=this.attributes.normal;if(void 0!==s){const h=(new Yr).getNormalMatrix(e);s.applyNormalMatrix(h),s.needsUpdate=!0}const l=this.attributes.tangent;return void 0!==l&&(l.transformDirection(e),l.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return vo.makeRotationFromQuaternion(e),this.applyMatrix4(vo),this}rotateX(e){return vo.makeRotationX(e),this.applyMatrix4(vo),this}rotateY(e){return vo.makeRotationY(e),this.applyMatrix4(vo),this}rotateZ(e){return vo.makeRotationZ(e),this.applyMatrix4(vo),this}translate(e,t,s){return vo.makeTranslation(e,t,s),this.applyMatrix4(vo),this}scale(e,t,s){return vo.makeScale(e,t,s),this.applyMatrix4(vo),this}lookAt(e){return au.lookAt(e),au.updateMatrix(),this.applyMatrix4(au.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Ui).negate(),this.translate(Ui.x,Ui.y,Ui.z),this}setFromPoints(e){const t=[];for(let s=0,l=e.length;s<l;s++){const h=e[s];t.push(h.x,h.y,h.z||0)}return this.setAttribute("position",new dn(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Io);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new ce(-1/0,-1/0,-1/0),new ce(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let s=0,l=t.length;s<l;s++)Bo.setFromBufferAttribute(t[s]),this.morphTargetsRelative?(_r.addVectors(this.boundingBox.min,Bo.min),this.boundingBox.expandByPoint(_r),_r.addVectors(this.boundingBox.max,Bo.max),this.boundingBox.expandByPoint(_r)):(this.boundingBox.expandByPoint(Bo.min),this.boundingBox.expandByPoint(Bo.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new W);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new ce,1/0);if(e){const s=this.boundingSphere.center;if(Bo.setFromBufferAttribute(e),t)for(let h=0,g=t.length;h<g;h++)Ka.setFromBufferAttribute(t[h]),this.morphTargetsRelative?(_r.addVectors(Bo.min,Ka.min),Bo.expandByPoint(_r),_r.addVectors(Bo.max,Ka.max),Bo.expandByPoint(_r)):(Bo.expandByPoint(Ka.min),Bo.expandByPoint(Ka.max));Bo.getCenter(s);let l=0;for(let h=0,g=e.count;h<g;h++)_r.fromBufferAttribute(e,h),l=Math.max(l,s.distanceToSquared(_r));if(t)for(let h=0,g=t.length;h<g;h++){const _=t[h],b=this.morphTargetsRelative;for(let x=0,S=_.count;x<S;x++)_r.fromBufferAttribute(_,x),b&&(Ui.fromBufferAttribute(e,x),_r.add(Ui)),l=Math.max(l,s.distanceToSquared(_r))}this.boundingSphere.radius=Math.sqrt(l),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const s=e.array,l=t.position.array,h=t.normal.array,g=t.uv.array,_=l.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new kr(new Float32Array(4*_),4));const b=this.getAttribute("tangent").array,x=[],S=[];for(let Te=0;Te<_;Te++)x[Te]=new ce,S[Te]=new ce;const A=new ce,E=new ce,L=new ce,G=new Oe,j=new Oe,k=new Oe,Y=new ce,Z=new ce;function $(Te,ze,bt){A.fromArray(l,3*Te),E.fromArray(l,3*ze),L.fromArray(l,3*bt),G.fromArray(g,2*Te),j.fromArray(g,2*ze),k.fromArray(g,2*bt),E.sub(A),L.sub(A),j.sub(G),k.sub(G);const je=1/(j.x*k.y-k.x*j.y);isFinite(je)&&(Y.copy(E).multiplyScalar(k.y).addScaledVector(L,-j.y).multiplyScalar(je),Z.copy(L).multiplyScalar(j.x).addScaledVector(E,-k.x).multiplyScalar(je),x[Te].add(Y),x[ze].add(Y),x[bt].add(Y),S[Te].add(Z),S[ze].add(Z),S[bt].add(Z))}let J=this.groups;0===J.length&&(J=[{start:0,count:s.length}]);for(let Te=0,ze=J.length;Te<ze;++Te){const bt=J[Te],je=bt.start;for(let at=je,Tt=je+bt.count;at<Tt;at+=3)$(s[at+0],s[at+1],s[at+2])}const se=new ce,de=new ce,_e=new ce,K=new ce;function fe(Te){_e.fromArray(h,3*Te),K.copy(_e);const ze=x[Te];se.copy(ze),se.sub(_e.multiplyScalar(_e.dot(ze))).normalize(),de.crossVectors(K,ze);const je=de.dot(S[Te])<0?-1:1;b[4*Te]=se.x,b[4*Te+1]=se.y,b[4*Te+2]=se.z,b[4*Te+3]=je}for(let Te=0,ze=J.length;Te<ze;++Te){const bt=J[Te],je=bt.start;for(let at=je,Tt=je+bt.count;at<Tt;at+=3)fe(s[at+0]),fe(s[at+1]),fe(s[at+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let s=this.getAttribute("normal");if(void 0===s)s=new kr(new Float32Array(3*t.count),3),this.setAttribute("normal",s);else for(let E=0,L=s.count;E<L;E++)s.setXYZ(E,0,0,0);const l=new ce,h=new ce,g=new ce,_=new ce,b=new ce,x=new ce,S=new ce,A=new ce;if(e)for(let E=0,L=e.count;E<L;E+=3){const G=e.getX(E+0),j=e.getX(E+1),k=e.getX(E+2);l.fromBufferAttribute(t,G),h.fromBufferAttribute(t,j),g.fromBufferAttribute(t,k),S.subVectors(g,h),A.subVectors(l,h),S.cross(A),_.fromBufferAttribute(s,G),b.fromBufferAttribute(s,j),x.fromBufferAttribute(s,k),_.add(S),b.add(S),x.add(S),s.setXYZ(G,_.x,_.y,_.z),s.setXYZ(j,b.x,b.y,b.z),s.setXYZ(k,x.x,x.y,x.z)}else for(let E=0,L=t.count;E<L;E+=3)l.fromBufferAttribute(t,E+0),h.fromBufferAttribute(t,E+1),g.fromBufferAttribute(t,E+2),S.subVectors(g,h),A.subVectors(l,h),S.cross(A),s.setXYZ(E+0,S.x,S.y,S.z),s.setXYZ(E+1,S.x,S.y,S.z),s.setXYZ(E+2,S.x,S.y,S.z);this.normalizeNormals(),s.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,s=e.count;t<s;t++)_r.fromBufferAttribute(e,t),_r.normalize(),e.setXYZ(t,_r.x,_r.y,_r.z)}toNonIndexed(){function e(_,b){const x=_.array,S=_.itemSize,A=_.normalized,E=new x.constructor(b.length*S);let L=0,G=0;for(let j=0,k=b.length;j<k;j++){L=_.isInterleavedBufferAttribute?b[j]*_.data.stride+_.offset:b[j]*S;for(let Y=0;Y<S;Y++)E[G++]=x[L++]}return new kr(E,S,A)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new di,s=this.index.array,l=this.attributes;for(const _ in l){const x=e(l[_],s);t.setAttribute(_,x)}const h=this.morphAttributes;for(const _ in h){const b=[],x=h[_];for(let S=0,A=x.length;S<A;S++){const L=e(x[S],s);b.push(L)}t.morphAttributes[_]=b}t.morphTargetsRelative=this.morphTargetsRelative;const g=this.groups;for(let _=0,b=g.length;_<b;_++){const x=g[_];t.addGroup(x.start,x.count,x.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const b=this.parameters;for(const x in b)void 0!==b[x]&&(e[x]=b[x]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const s=this.attributes;for(const b in s)e.data.attributes[b]=s[b].toJSON(e.data);const l={};let h=!1;for(const b in this.morphAttributes){const x=this.morphAttributes[b],S=[];for(let A=0,E=x.length;A<E;A++)S.push(x[A].toJSON(e.data));S.length>0&&(l[b]=S,h=!0)}h&&(e.data.morphAttributes=l,e.data.morphTargetsRelative=this.morphTargetsRelative);const g=this.groups;g.length>0&&(e.data.groups=JSON.parse(JSON.stringify(g)));const _=this.boundingSphere;return null!==_&&(e.data.boundingSphere={center:_.center.toArray(),radius:_.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const s=e.index;null!==s&&this.setIndex(s.clone(t));const l=e.attributes;for(const x in l)this.setAttribute(x,l[x].clone(t));const h=e.morphAttributes;for(const x in h){const S=[],A=h[x];for(let E=0,L=A.length;E<L;E++)S.push(A[E].clone(t));this.morphAttributes[x]=S}this.morphTargetsRelative=e.morphTargetsRelative;const g=e.groups;for(let x=0,S=g.length;x<S;x++){const A=g[x];this.addGroup(A.start,A.count,A.materialIndex)}const _=e.boundingBox;null!==_&&(this.boundingBox=_.clone());const b=e.boundingSphere;return null!==b&&(this.boundingSphere=b.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,void 0!==e.parameters&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const ed=new Nt,nc=new $n,td=new W,jo=new ce,lu=new ce,cu=new ce,Pr=new ce,ic=new ce,Xa=new Oe,Ra=new Oe,Fs=new Oe,ua=new ce,w=new ce;class R extends Jr{constructor(e=new di,t=new ca){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,s=Object.keys(t);if(s.length>0){const l=t[s[0]];if(void 0!==l){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let h=0,g=l.length;h<g;h++){const _=l[h].name||String(h);this.morphTargetInfluences.push(0),this.morphTargetDictionary[_]=h}}}}getVertexPosition(e,t){const s=this.geometry,h=s.morphAttributes.position,g=s.morphTargetsRelative;t.fromBufferAttribute(s.attributes.position,e);const _=this.morphTargetInfluences;if(h&&_){ic.set(0,0,0);for(let b=0,x=h.length;b<x;b++){const S=_[b];0!==S&&(Pr.fromBufferAttribute(h[b],e),ic.addScaledVector(g?Pr:Pr.sub(t),S))}t.add(ic)}return this.isSkinnedMesh&&this.boneTransform(e,t),t}raycast(e,t){const s=this.geometry,l=this.material,h=this.matrixWorld;if(void 0===l||(null===s.boundingSphere&&s.computeBoundingSphere(),td.copy(s.boundingSphere),td.applyMatrix4(h),!1===e.ray.intersectsSphere(td))||(ed.copy(h).invert(),nc.copy(e.ray).applyMatrix4(ed),null!==s.boundingBox&&!1===nc.intersectsBox(s.boundingBox)))return;let g;const _=s.index,b=s.attributes.position,x=s.attributes.uv,S=s.attributes.uv2,A=s.groups,E=s.drawRange;if(null!==_)if(Array.isArray(l))for(let L=0,G=A.length;L<G;L++){const j=A[L],k=l[j.materialIndex];for(let $=Math.max(j.start,E.start),J=Math.min(_.count,Math.min(j.start+j.count,E.start+E.count));$<J;$+=3){const se=_.getX($),de=_.getX($+1),_e=_.getX($+2);g=P(this,k,e,nc,x,S,se,de,_e),g&&(g.faceIndex=Math.floor($/3),g.face.materialIndex=j.materialIndex,t.push(g))}}else for(let j=Math.max(0,E.start),k=Math.min(_.count,E.start+E.count);j<k;j+=3){const Y=_.getX(j),Z=_.getX(j+1),$=_.getX(j+2);g=P(this,l,e,nc,x,S,Y,Z,$),g&&(g.faceIndex=Math.floor(j/3),t.push(g))}else if(void 0!==b)if(Array.isArray(l))for(let L=0,G=A.length;L<G;L++){const j=A[L],k=l[j.materialIndex];for(let $=Math.max(j.start,E.start),J=Math.min(b.count,Math.min(j.start+j.count,E.start+E.count));$<J;$+=3)g=P(this,k,e,nc,x,S,$,$+1,$+2),g&&(g.faceIndex=Math.floor($/3),g.face.materialIndex=j.materialIndex,t.push(g))}else for(let j=Math.max(0,E.start),k=Math.min(b.count,E.start+E.count);j<k;j+=3)g=P(this,l,e,nc,x,S,j,j+1,j+2),g&&(g.faceIndex=Math.floor(j/3),t.push(g))}}function P(v,e,t,s,l,h,g,_,b){v.getVertexPosition(g,jo),v.getVertexPosition(_,lu),v.getVertexPosition(b,cu);const x=function M(v,e,t,s,l,h,g,_){let b;if(b=e.side===Ge?s.intersectTriangle(g,h,l,!0,_):s.intersectTriangle(l,h,g,e.side===Xe,_),null===b)return null;w.copy(_),w.applyMatrix4(v.matrixWorld);const x=t.ray.origin.distanceTo(w);return x<t.near||x>t.far?null:{distance:x,point:w.clone(),object:v}}(v,e,t,s,jo,lu,cu,ua);if(x){l&&(Xa.fromBufferAttribute(l,g),Ra.fromBufferAttribute(l,_),Fs.fromBufferAttribute(l,b),x.uv=ps.getUV(ua,jo,lu,cu,Xa,Ra,Fs,new Oe)),h&&(Xa.fromBufferAttribute(h,g),Ra.fromBufferAttribute(h,_),Fs.fromBufferAttribute(h,b),x.uv2=ps.getUV(ua,jo,lu,cu,Xa,Ra,Fs,new Oe));const S={a:g,b:_,c:b,normal:new ce,materialIndex:0};ps.getNormal(jo,lu,cu,S.normal),x.face=S}return x}class V extends di{constructor(e=1,t=1,s=1,l=1,h=1,g=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:s,widthSegments:l,heightSegments:h,depthSegments:g};const _=this;l=Math.floor(l),h=Math.floor(h),g=Math.floor(g);const b=[],x=[],S=[],A=[];let E=0,L=0;function G(j,k,Y,Z,$,J,se,de,_e,K,fe){const Te=J/_e,ze=se/K,bt=J/2,je=se/2,Se=de/2,at=_e+1,Tt=K+1;let At=0,_t=0;const Pt=new ce;for(let xt=0;xt<Tt;xt++){const st=xt*ze-je;for(let tt=0;tt<at;tt++)Pt[j]=(tt*Te-bt)*Z,Pt[k]=st*$,Pt[Y]=Se,x.push(Pt.x,Pt.y,Pt.z),Pt[j]=0,Pt[k]=0,Pt[Y]=de>0?1:-1,S.push(Pt.x,Pt.y,Pt.z),A.push(tt/_e),A.push(1-xt/K),At+=1}for(let xt=0;xt<K;xt++)for(let st=0;st<_e;st++){const Ht=E+st+at*(xt+1),kt=E+(st+1)+at*(xt+1),on=E+(st+1)+at*xt;b.push(E+st+at*xt,Ht,on),b.push(Ht,kt,on),_t+=6}_.addGroup(L,_t,fe),L+=_t,E+=At}G("z","y","x",-1,-1,s,t,e,g,h,0),G("z","y","x",1,-1,s,t,-e,g,h,1),G("x","z","y",1,1,e,s,t,l,g,2),G("x","z","y",1,-1,e,s,-t,l,g,3),G("x","y","z",1,-1,e,t,s,l,h,4),G("x","y","z",-1,-1,e,t,-s,l,h,5),this.setIndex(b),this.setAttribute("position",new dn(x,3)),this.setAttribute("normal",new dn(S,3)),this.setAttribute("uv",new dn(A,2))}static fromJSON(e){return new V(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function q(v){const e={};for(const t in v){e[t]={};for(const s in v[t]){const l=v[t][s];e[t][s]=l&&(l.isColor||l.isMatrix3||l.isMatrix4||l.isVector2||l.isVector3||l.isVector4||l.isTexture||l.isQuaternion)?l.clone():Array.isArray(l)?l.slice():l}}return e}function ee(v){const e={};for(let t=0;t<v.length;t++){const s=q(v[t]);for(const l in s)e[l]=s[l]}return e}function Ze(v){return null===v.getRenderTarget()&&v.outputEncoding===Dn?Wr:ur}const Ft={clone:q,merge:ee};class er extends gr{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=q(e.uniforms),this.uniformsGroups=function be(v){const e=[];for(let t=0;t<v.length;t++)e.push(v[t].clone());return e}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const l in this.uniforms){const g=this.uniforms[l].value;t.uniforms[l]=g&&g.isTexture?{type:"t",value:g.toJSON(e).uuid}:g&&g.isColor?{type:"c",value:g.getHex()}:g&&g.isVector2?{type:"v2",value:g.toArray()}:g&&g.isVector3?{type:"v3",value:g.toArray()}:g&&g.isVector4?{type:"v4",value:g.toArray()}:g&&g.isMatrix3?{type:"m3",value:g.toArray()}:g&&g.isMatrix4?{type:"m4",value:g.toArray()}:{value:g}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const s={};for(const l in this.extensions)!0===this.extensions[l]&&(s[l]=!0);return Object.keys(s).length>0&&(t.extensions=s),t}}class ko extends Jr{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Nt,this.projectionMatrix=new Nt,this.projectionMatrixInverse=new Nt}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class pr extends ko{constructor(e=50,t=1,s=.1,l=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=s,this.far=l,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*ka*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*po*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*ka*Math.atan(Math.tan(.5*po*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,s,l,h,g){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=s,this.view.offsetY=l,this.view.width=h,this.view.height=g,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*po*this.fov)/this.zoom,s=2*t,l=this.aspect*s,h=-.5*l;const g=this.view;if(null!==this.view&&this.view.enabled){const b=g.fullWidth,x=g.fullHeight;h+=g.offsetX*l/b,t-=g.offsetY*s/x,l*=g.width/b,s*=g.height/x}const _=this.filmOffset;0!==_&&(h+=e*_/this.getFilmWidth()),this.projectionMatrix.makePerspective(h,h+l,t,t-s,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}class Kh extends Jr{constructor(e,t,s){super(),this.type="CubeCamera",this.renderTarget=s;const l=new pr(-90,1,e,t);l.layers=this.layers,l.up.set(0,1,0),l.lookAt(1,0,0),this.add(l);const h=new pr(-90,1,e,t);h.layers=this.layers,h.up.set(0,1,0),h.lookAt(-1,0,0),this.add(h);const g=new pr(-90,1,e,t);g.layers=this.layers,g.up.set(0,0,-1),g.lookAt(0,1,0),this.add(g);const _=new pr(-90,1,e,t);_.layers=this.layers,_.up.set(0,0,1),_.lookAt(0,-1,0),this.add(_);const b=new pr(-90,1,e,t);b.layers=this.layers,b.up.set(0,1,0),b.lookAt(0,0,1),this.add(b);const x=new pr(-90,1,e,t);x.layers=this.layers,x.up.set(0,1,0),x.lookAt(0,0,-1),this.add(x)}update(e,t){null===this.parent&&this.updateMatrixWorld();const s=this.renderTarget,[l,h,g,_,b,x]=this.children,S=e.getRenderTarget(),A=e.toneMapping,E=e.xr.enabled;e.toneMapping=us,e.xr.enabled=!1;const L=s.texture.generateMipmaps;s.texture.generateMipmaps=!1,e.setRenderTarget(s,0),e.render(t,l),e.setRenderTarget(s,1),e.render(t,h),e.setRenderTarget(s,2),e.render(t,g),e.setRenderTarget(s,3),e.render(t,_),e.setRenderTarget(s,4),e.render(t,b),s.texture.generateMipmaps=L,e.setRenderTarget(s,5),e.render(t,x),e.setRenderTarget(S),e.toneMapping=A,e.xr.enabled=E,s.texture.needsPMREMUpdate=!0}}class Qa extends Dr{constructor(e,t,s,l,h,g,_,b,x,S){super(e=void 0!==e?e:[],t=void 0!==t?t:Cr,s,l,h,g,_,b,x,S),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class nd extends rs{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const s={width:e,height:e,depth:1};this.texture=new Qa([s,s,s,s,s,s],t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:mn}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const s_uniforms={tEquirect:{value:null}},s_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",s_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",l=new V(5,5,5),h=new er({name:"CubemapFromEquirect",uniforms:q(s_uniforms),vertexShader:s_vertexShader,fragmentShader:s_fragmentShader,side:Ge,blending:Qt});h.uniforms.tEquirect.value=t;const g=new R(l,h),_=t.minFilter;return t.minFilter===xo&&(t.minFilter=mn),new Kh(1,10,this).update(e,g),t.minFilter=_,g.geometry.dispose(),g.material.dispose(),this}clear(e,t,s,l){const h=e.getRenderTarget();for(let g=0;g<6;g++)e.setRenderTarget(this,g),e.clear(t,s,l);e.setRenderTarget(h)}}const rc=new ce,id=new ce,bp=new Yr;class Sa{constructor(e=new ce(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,s,l){return this.normal.set(e,t,s),this.constant=l,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,s){const l=rc.subVectors(s,t).cross(id.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(l,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const s=e.delta(rc),l=this.normal.dot(s);if(0===l)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const h=-(e.start.dot(this.normal)+this.constant)/l;return h<0||h>1?null:t.copy(s).multiplyScalar(h).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),s=this.distanceToPoint(e.end);return t<0&&s>0||s<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const s=t||bp.getNormalMatrix(e),l=this.coplanarPoint(rc).applyMatrix4(e),h=this.normal.applyMatrix3(s).normalize();return this.constant=-l.dot(h),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const uu=new W,rd=new ce;class Fc{constructor(e=new Sa,t=new Sa,s=new Sa,l=new Sa,h=new Sa,g=new Sa){this.planes=[e,t,s,l,h,g]}set(e,t,s,l,h,g){const _=this.planes;return _[0].copy(e),_[1].copy(t),_[2].copy(s),_[3].copy(l),_[4].copy(h),_[5].copy(g),this}copy(e){const t=this.planes;for(let s=0;s<6;s++)t[s].copy(e.planes[s]);return this}setFromProjectionMatrix(e){const t=this.planes,s=e.elements,l=s[0],h=s[1],g=s[2],_=s[3],b=s[4],x=s[5],S=s[6],A=s[7],E=s[8],L=s[9],G=s[10],j=s[11],k=s[12],Y=s[13],Z=s[14],$=s[15];return t[0].setComponents(_-l,A-b,j-E,$-k).normalize(),t[1].setComponents(_+l,A+b,j+E,$+k).normalize(),t[2].setComponents(_+h,A+x,j+L,$+Y).normalize(),t[3].setComponents(_-h,A-x,j-L,$-Y).normalize(),t[4].setComponents(_-g,A-S,j-G,$-Z).normalize(),t[5].setComponents(_+g,A+S,j+G,$+Z).normalize(),this}intersectsObject(e){const t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),uu.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(uu)}intersectsSprite(e){return uu.center.set(0,0,0),uu.radius=.7071067811865476,uu.applyMatrix4(e.matrixWorld),this.intersectsSphere(uu)}intersectsSphere(e){const t=this.planes,s=e.center,l=-e.radius;for(let h=0;h<6;h++)if(t[h].distanceToPoint(s)<l)return!1;return!0}intersectsBox(e){const t=this.planes;for(let s=0;s<6;s++){const l=t[s];if(rd.x=l.normal.x>0?e.max.x:e.min.x,rd.y=l.normal.y>0?e.max.y:e.min.y,rd.z=l.normal.z>0?e.max.z:e.min.z,l.distanceToPoint(rd)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let s=0;s<6;s++)if(t[s].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function du(){let v=null,e=!1,t=null,s=null;function l(h,g){t(h,g),s=v.requestAnimationFrame(l)}return{start:function(){!0!==e&&null!==t&&(s=v.requestAnimationFrame(l),e=!0)},stop:function(){v.cancelAnimationFrame(s),e=!1},setAnimationLoop:function(h){t=h},setContext:function(h){v=h}}}function Tp(v,e){const t=e.isWebGL2,s=new WeakMap;return{get:function g(x){return x.isInterleavedBufferAttribute&&(x=x.data),s.get(x)},remove:function _(x){x.isInterleavedBufferAttribute&&(x=x.data);const S=s.get(x);S&&(v.deleteBuffer(S.buffer),s.delete(x))},update:function b(x,S){if(x.isGLBufferAttribute){const E=s.get(x);return void((!E||E.version<x.version)&&s.set(x,{buffer:x.buffer,type:x.type,bytesPerElement:x.elementSize,version:x.version}))}x.isInterleavedBufferAttribute&&(x=x.data);const A=s.get(x);void 0===A?s.set(x,function l(x,S){const A=x.array,E=x.usage,L=v.createBuffer();let G;if(v.bindBuffer(S,L),v.bufferData(S,A,E),x.onUploadCallback(),A instanceof Float32Array)G=5126;else if(A instanceof Uint16Array)if(x.isFloat16BufferAttribute){if(!t)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");G=5131}else G=5123;else if(A instanceof Int16Array)G=5122;else if(A instanceof Uint32Array)G=5125;else if(A instanceof Int32Array)G=5124;else if(A instanceof Int8Array)G=5120;else if(A instanceof Uint8Array)G=5121;else{if(!(A instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+A);G=5121}return{buffer:L,type:G,bytesPerElement:A.BYTES_PER_ELEMENT,version:x.version}}(x,S)):A.version<x.version&&(function h(x,S,A){const E=S.array,L=S.updateRange;v.bindBuffer(A,x),-1===L.count?v.bufferSubData(A,0,E):(t?v.bufferSubData(A,L.offset*E.BYTES_PER_ELEMENT,E,L.offset,L.count):v.bufferSubData(A,L.offset*E.BYTES_PER_ELEMENT,E.subarray(L.offset,L.offset+L.count)),L.count=-1),S.onUploadCallback()}(A.buffer,x,S),A.version=x.version)}}}class sd extends di{constructor(e=1,t=1,s=1,l=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:s,heightSegments:l};const h=e/2,g=t/2,_=Math.floor(s),b=Math.floor(l),x=_+1,S=b+1,A=e/_,E=t/b,L=[],G=[],j=[],k=[];for(let Y=0;Y<S;Y++){const Z=Y*E-g;for(let $=0;$<x;$++)G.push($*A-h,-Z,0),j.push(0,0,1),k.push($/_),k.push(1-Y/b)}for(let Y=0;Y<b;Y++)for(let Z=0;Z<_;Z++){const J=Z+x*(Y+1),se=Z+1+x*(Y+1),de=Z+1+x*Y;L.push(Z+x*Y,J,de),L.push(J,se,de)}this.setIndex(L),this.setAttribute("position",new dn(G,3)),this.setAttribute("normal",new dn(j,3)),this.setAttribute("uv",new dn(k,2))}static fromJSON(e){return new sd(e.width,e.height,e.widthSegments,e.heightSegments)}}const hi={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\n#ifdef USE_IRIDESCENCE\n\tvec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\t return vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat R21 = R12;\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );\n\t#else\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if defined( USE_SHADOWMAP ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_COORDS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef texture2DLodEXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},Ut={common:{diffuse:{value:new Xt(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Yr},uv2Transform:{value:new Yr},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Oe(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Xt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Xt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Yr}},sprite:{diffuse:{value:new Xt(16777215)},opacity:{value:1},center:{value:new Oe(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Yr}}},tl={basic:{uniforms:ee([Ut.common,Ut.specularmap,Ut.envmap,Ut.aomap,Ut.lightmap,Ut.fog]),vertexShader:hi.meshbasic_vert,fragmentShader:hi.meshbasic_frag},lambert:{uniforms:ee([Ut.common,Ut.specularmap,Ut.envmap,Ut.aomap,Ut.lightmap,Ut.emissivemap,Ut.bumpmap,Ut.normalmap,Ut.displacementmap,Ut.fog,Ut.lights,{emissive:{value:new Xt(0)}}]),vertexShader:hi.meshlambert_vert,fragmentShader:hi.meshlambert_frag},phong:{uniforms:ee([Ut.common,Ut.specularmap,Ut.envmap,Ut.aomap,Ut.lightmap,Ut.emissivemap,Ut.bumpmap,Ut.normalmap,Ut.displacementmap,Ut.fog,Ut.lights,{emissive:{value:new Xt(0)},specular:{value:new Xt(1118481)},shininess:{value:30}}]),vertexShader:hi.meshphong_vert,fragmentShader:hi.meshphong_frag},standard:{uniforms:ee([Ut.common,Ut.envmap,Ut.aomap,Ut.lightmap,Ut.emissivemap,Ut.bumpmap,Ut.normalmap,Ut.displacementmap,Ut.roughnessmap,Ut.metalnessmap,Ut.fog,Ut.lights,{emissive:{value:new Xt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:hi.meshphysical_vert,fragmentShader:hi.meshphysical_frag},toon:{uniforms:ee([Ut.common,Ut.aomap,Ut.lightmap,Ut.emissivemap,Ut.bumpmap,Ut.normalmap,Ut.displacementmap,Ut.gradientmap,Ut.fog,Ut.lights,{emissive:{value:new Xt(0)}}]),vertexShader:hi.meshtoon_vert,fragmentShader:hi.meshtoon_frag},matcap:{uniforms:ee([Ut.common,Ut.bumpmap,Ut.normalmap,Ut.displacementmap,Ut.fog,{matcap:{value:null}}]),vertexShader:hi.meshmatcap_vert,fragmentShader:hi.meshmatcap_frag},points:{uniforms:ee([Ut.points,Ut.fog]),vertexShader:hi.points_vert,fragmentShader:hi.points_frag},dashed:{uniforms:ee([Ut.common,Ut.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:hi.linedashed_vert,fragmentShader:hi.linedashed_frag},depth:{uniforms:ee([Ut.common,Ut.displacementmap]),vertexShader:hi.depth_vert,fragmentShader:hi.depth_frag},normal:{uniforms:ee([Ut.common,Ut.bumpmap,Ut.normalmap,Ut.displacementmap,{opacity:{value:1}}]),vertexShader:hi.meshnormal_vert,fragmentShader:hi.meshnormal_frag},sprite:{uniforms:ee([Ut.sprite,Ut.fog]),vertexShader:hi.sprite_vert,fragmentShader:hi.sprite_frag},background:{uniforms:{uvTransform:{value:new Yr},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:hi.background_vert,fragmentShader:hi.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:hi.backgroundCube_vert,fragmentShader:hi.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:hi.cube_vert,fragmentShader:hi.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:hi.equirect_vert,fragmentShader:hi.equirect_frag},distanceRGBA:{uniforms:ee([Ut.common,Ut.displacementmap,{referencePosition:{value:new ce},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:hi.distanceRGBA_vert,fragmentShader:hi.distanceRGBA_frag},shadow:{uniforms:ee([Ut.lights,Ut.fog,{color:{value:new Xt(0)},opacity:{value:1}}]),vertexShader:hi.shadow_vert,fragmentShader:hi.shadow_frag}};tl.physical={uniforms:ee([tl.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Oe(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new Xt(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Oe},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Xt(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new Xt(1,1,1)},specularColorMap:{value:null}}]),vertexShader:hi.meshphysical_vert,fragmentShader:hi.meshphysical_frag};const oh={r:0,b:0,g:0};function nm(v,e,t,s,l,h,g){const _=new Xt(0);let x,S,b=!0===h?0:1,A=null,E=0,L=null;function j(k,Y){k.getRGB(oh,Ze(v)),s.buffers.color.setClear(oh.r,oh.g,oh.b,Y,g)}return{getClearColor:function(){return _},setClearColor:function(k,Y=1){_.set(k),b=Y,j(_,b)},getClearAlpha:function(){return b},setClearAlpha:function(k){b=k,j(_,b)},render:function G(k,Y){let Z=!1,$=!0===Y.isScene?Y.background:null;$&&$.isTexture&&($=(Y.backgroundBlurriness>0?t:e).get($));const J=v.xr,se=J.getSession&&J.getSession();se&&"additive"===se.environmentBlendMode&&($=null),null===$?j(_,b):$&&$.isColor&&(j($,1),Z=!0),(v.autoClear||Z)&&v.clear(v.autoClearColor,v.autoClearDepth,v.autoClearStencil),$&&($.isCubeTexture||$.mapping===Li)?(void 0===S&&(S=new R(new V(1,1,1),new er({name:"BackgroundCubeMaterial",uniforms:q(tl.backgroundCube.uniforms),vertexShader:tl.backgroundCube.vertexShader,fragmentShader:tl.backgroundCube.fragmentShader,side:Ge,depthTest:!1,depthWrite:!1,fog:!1})),S.geometry.deleteAttribute("normal"),S.geometry.deleteAttribute("uv"),S.onBeforeRender=function(de,_e,K){this.matrixWorld.copyPosition(K.matrixWorld)},Object.defineProperty(S.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),l.update(S)),S.material.uniforms.envMap.value=$,S.material.uniforms.flipEnvMap.value=$.isCubeTexture&&!1===$.isRenderTargetTexture?-1:1,S.material.uniforms.backgroundBlurriness.value=Y.backgroundBlurriness,S.material.uniforms.backgroundIntensity.value=Y.backgroundIntensity,S.material.toneMapped=$.encoding!==Dn,(A!==$||E!==$.version||L!==v.toneMapping)&&(S.material.needsUpdate=!0,A=$,E=$.version,L=v.toneMapping),S.layers.enableAll(),k.unshift(S,S.geometry,S.material,0,0,null)):$&&$.isTexture&&(void 0===x&&(x=new R(new sd(2,2),new er({name:"BackgroundMaterial",uniforms:q(tl.background.uniforms),vertexShader:tl.background.vertexShader,fragmentShader:tl.background.fragmentShader,side:Xe,depthTest:!1,depthWrite:!1,fog:!1})),x.geometry.deleteAttribute("normal"),Object.defineProperty(x.material,"map",{get:function(){return this.uniforms.t2D.value}}),l.update(x)),x.material.uniforms.t2D.value=$,x.material.uniforms.backgroundIntensity.value=Y.backgroundIntensity,x.material.toneMapped=$.encoding!==Dn,!0===$.matrixAutoUpdate&&$.updateMatrix(),x.material.uniforms.uvTransform.value.copy($.matrix),(A!==$||E!==$.version||L!==v.toneMapping)&&(x.material.needsUpdate=!0,A=$,E=$.version,L=v.toneMapping),x.layers.enableAll(),k.unshift(x,x.geometry,x.material,0,0,null))}}}function vv(v,e,t,s){const l=v.getParameter(34921),h=s.isWebGL2?null:e.get("OES_vertex_array_object"),g=s.isWebGL2||null!==h,_={},b=k(null);let x=b,S=!1;function L(Se){return s.isWebGL2?v.bindVertexArray(Se):h.bindVertexArrayOES(Se)}function G(Se){return s.isWebGL2?v.deleteVertexArray(Se):h.deleteVertexArrayOES(Se)}function k(Se){const at=[],Tt=[],At=[];for(let _t=0;_t<l;_t++)at[_t]=0,Tt[_t]=0,At[_t]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:at,enabledAttributes:Tt,attributeDivisors:At,object:Se,attributes:{},index:null}}function $(){const Se=x.newAttributes;for(let at=0,Tt=Se.length;at<Tt;at++)Se[at]=0}function J(Se){se(Se,0)}function se(Se,at){const At=x.enabledAttributes,_t=x.attributeDivisors;x.newAttributes[Se]=1,0===At[Se]&&(v.enableVertexAttribArray(Se),At[Se]=1),_t[Se]!==at&&((s.isWebGL2?v:e.get("ANGLE_instanced_arrays"))[s.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](Se,at),_t[Se]=at)}function de(){const Se=x.newAttributes,at=x.enabledAttributes;for(let Tt=0,At=at.length;Tt<At;Tt++)at[Tt]!==Se[Tt]&&(v.disableVertexAttribArray(Tt),at[Tt]=0)}function _e(Se,at,Tt,At,_t,Pt){!0!==s.isWebGL2||5124!==Tt&&5125!==Tt?v.vertexAttribPointer(Se,at,Tt,At,_t,Pt):v.vertexAttribIPointer(Se,at,Tt,_t,Pt)}function bt(){je(),S=!0,x!==b&&(x=b,L(x.object))}function je(){b.geometry=null,b.program=null,b.wireframe=!1}return{setup:function A(Se,at,Tt,At,_t){let Pt=!1;if(g){const xt=function j(Se,at,Tt){const At=!0===Tt.wireframe;let _t=_[Se.id];void 0===_t&&(_t={},_[Se.id]=_t);let Pt=_t[at.id];void 0===Pt&&(Pt={},_t[at.id]=Pt);let xt=Pt[At];return void 0===xt&&(xt=k(function E(){return s.isWebGL2?v.createVertexArray():h.createVertexArrayOES()}()),Pt[At]=xt),xt}(At,Tt,at);x!==xt&&(x=xt,L(x.object)),Pt=function Y(Se,at,Tt,At){const _t=x.attributes,Pt=at.attributes;let xt=0;const st=Tt.getAttributes();for(const tt in st)if(st[tt].location>=0){const kt=_t[tt];let on=Pt[tt];if(void 0===on&&("instanceMatrix"===tt&&Se.instanceMatrix&&(on=Se.instanceMatrix),"instanceColor"===tt&&Se.instanceColor&&(on=Se.instanceColor)),void 0===kt||kt.attribute!==on||on&&kt.data!==on.data)return!0;xt++}return x.attributesNum!==xt||x.index!==At}(Se,At,Tt,_t),Pt&&function Z(Se,at,Tt,At){const _t={},Pt=at.attributes;let xt=0;const st=Tt.getAttributes();for(const tt in st)if(st[tt].location>=0){let kt=Pt[tt];void 0===kt&&("instanceMatrix"===tt&&Se.instanceMatrix&&(kt=Se.instanceMatrix),"instanceColor"===tt&&Se.instanceColor&&(kt=Se.instanceColor));const on={};on.attribute=kt,kt&&kt.data&&(on.data=kt.data),_t[tt]=on,xt++}x.attributes=_t,x.attributesNum=xt,x.index=At}(Se,At,Tt,_t)}else{const xt=!0===at.wireframe;(x.geometry!==At.id||x.program!==Tt.id||x.wireframe!==xt)&&(x.geometry=At.id,x.program=Tt.id,x.wireframe=xt,Pt=!0)}null!==_t&&t.update(_t,34963),(Pt||S)&&(S=!1,function K(Se,at,Tt,At){if(!1===s.isWebGL2&&(Se.isInstancedMesh||At.isInstancedBufferGeometry)&&null===e.get("ANGLE_instanced_arrays"))return;$();const _t=At.attributes,Pt=Tt.getAttributes(),xt=at.defaultAttributeValues;for(const st in Pt){const tt=Pt[st];if(tt.location>=0){let Ht=_t[st];if(void 0===Ht&&("instanceMatrix"===st&&Se.instanceMatrix&&(Ht=Se.instanceMatrix),"instanceColor"===st&&Se.instanceColor&&(Ht=Se.instanceColor)),void 0!==Ht){const kt=Ht.normalized,on=Ht.itemSize,ht=t.get(Ht);if(void 0===ht)continue;const qn=ht.buffer,xn=ht.type,Yn=ht.bytesPerElement;if(Ht.isInterleavedBufferAttribute){const cn=Ht.data,Mi=cn.stride,vt=Ht.offset;if(cn.isInstancedInterleavedBuffer){for(let yt=0;yt<tt.locationSize;yt++)se(tt.location+yt,cn.meshPerAttribute);!0!==Se.isInstancedMesh&&void 0===At._maxInstanceCount&&(At._maxInstanceCount=cn.meshPerAttribute*cn.count)}else for(let yt=0;yt<tt.locationSize;yt++)J(tt.location+yt);v.bindBuffer(34962,qn);for(let yt=0;yt<tt.locationSize;yt++)_e(tt.location+yt,on/tt.locationSize,xn,kt,Mi*Yn,(vt+on/tt.locationSize*yt)*Yn)}else{if(Ht.isInstancedBufferAttribute){for(let cn=0;cn<tt.locationSize;cn++)se(tt.location+cn,Ht.meshPerAttribute);!0!==Se.isInstancedMesh&&void 0===At._maxInstanceCount&&(At._maxInstanceCount=Ht.meshPerAttribute*Ht.count)}else for(let cn=0;cn<tt.locationSize;cn++)J(tt.location+cn);v.bindBuffer(34962,qn);for(let cn=0;cn<tt.locationSize;cn++)_e(tt.location+cn,on/tt.locationSize,xn,kt,on*Yn,on/tt.locationSize*cn*Yn)}}else if(void 0!==xt){const kt=xt[st];if(void 0!==kt)switch(kt.length){case 2:v.vertexAttrib2fv(tt.location,kt);break;case 3:v.vertexAttrib3fv(tt.location,kt);break;case 4:v.vertexAttrib4fv(tt.location,kt);break;default:v.vertexAttrib1fv(tt.location,kt)}}}}de()}(Se,at,Tt,At),null!==_t&&v.bindBuffer(34963,t.get(_t).buffer))},reset:bt,resetDefaultState:je,dispose:function fe(){bt();for(const Se in _){const at=_[Se];for(const Tt in at){const At=at[Tt];for(const _t in At)G(At[_t].object),delete At[_t];delete at[Tt]}delete _[Se]}},releaseStatesOfGeometry:function Te(Se){if(void 0===_[Se.id])return;const at=_[Se.id];for(const Tt in at){const At=at[Tt];for(const _t in At)G(At[_t].object),delete At[_t];delete at[Tt]}delete _[Se.id]},releaseStatesOfProgram:function ze(Se){for(const at in _){const Tt=_[at];if(void 0===Tt[Se.id])continue;const At=Tt[Se.id];for(const _t in At)G(At[_t].object),delete At[_t];delete Tt[Se.id]}},initAttributes:$,enableAttribute:J,disableUnusedAttributes:de}}function vf(v,e,t,s){const l=s.isWebGL2;let h;this.setMode=function g(x){h=x},this.render=function _(x,S){v.drawArrays(h,x,S),t.update(S,h,1)},this.renderInstances=function b(x,S,A){if(0===A)return;let E,L;if(l)E=v,L="drawArraysInstanced";else if(E=e.get("ANGLE_instanced_arrays"),L="drawArraysInstancedANGLE",null===E)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");E[L](h,x,S,A),t.update(S,h,A)}}function yf(v,e,t){let s;function h(_e){if("highp"===_e){if(v.getShaderPrecisionFormat(35633,36338).precision>0&&v.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";_e="mediump"}return"mediump"===_e&&v.getShaderPrecisionFormat(35633,36337).precision>0&&v.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const g=typeof WebGL2RenderingContext<"u"&&v instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&v instanceof WebGL2ComputeRenderingContext;let _=void 0!==t.precision?t.precision:"highp";const b=h(_);b!==_&&(console.warn("THREE.WebGLRenderer:",_,"not supported, using",b,"instead."),_=b);const x=g||e.has("WEBGL_draw_buffers"),S=!0===t.logarithmicDepthBuffer,A=v.getParameter(34930),E=v.getParameter(35660),L=v.getParameter(3379),G=v.getParameter(34076),j=v.getParameter(34921),k=v.getParameter(36347),Y=v.getParameter(36348),Z=v.getParameter(36349),$=E>0,J=g||e.has("OES_texture_float");return{isWebGL2:g,drawBuffers:x,getMaxAnisotropy:function l(){if(void 0!==s)return s;if(!0===e.has("EXT_texture_filter_anisotropic")){const _e=e.get("EXT_texture_filter_anisotropic");s=v.getParameter(_e.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else s=0;return s},getMaxPrecision:h,precision:_,logarithmicDepthBuffer:S,maxTextures:A,maxVertexTextures:E,maxTextureSize:L,maxCubemapSize:G,maxAttributes:j,maxVertexUniforms:k,maxVaryings:Y,maxFragmentUniforms:Z,vertexTextures:$,floatFragmentTextures:J,floatVertexTextures:$&&J,maxSamples:g?v.getParameter(36183):0}}function Ug(v){const e=this;let t=null,s=0,l=!1,h=!1;const g=new Sa,_=new Yr,b={value:null,needsUpdate:!1};function x(){b.value!==t&&(b.value=t,b.needsUpdate=s>0),e.numPlanes=s,e.numIntersection=0}function S(A,E,L,G){const j=null!==A?A.length:0;let k=null;if(0!==j){if(k=b.value,!0!==G||null===k){const Y=L+4*j,Z=E.matrixWorldInverse;_.getNormalMatrix(Z),(null===k||k.length<Y)&&(k=new Float32Array(Y));for(let $=0,J=L;$!==j;++$,J+=4)g.copy(A[$]).applyMatrix4(Z,_),g.normal.toArray(k,J),k[J+3]=g.constant}b.value=k,b.needsUpdate=!0}return e.numPlanes=j,e.numIntersection=0,k}this.uniform=b,this.numPlanes=0,this.numIntersection=0,this.init=function(A,E,L){const G=0!==A.length||E||0!==s||l;return l=E,t=S(A,L,0),s=A.length,G},this.beginShadows=function(){h=!0,S(null)},this.endShadows=function(){h=!1,x()},this.setState=function(A,E,L){const G=A.clippingPlanes,j=A.clipIntersection,k=A.clipShadows,Y=v.get(A);if(!l||null===G||0===G.length||h&&!k)h?S(null):x();else{const Z=h?0:s,$=4*Z;let J=Y.clippingState||null;b.value=J,J=S(G,E,$,L);for(let se=0;se!==$;++se)J[se]=t[se];Y.clippingState=J,this.numIntersection=j?this.numPlanes:0,this.numPlanes+=Z}}}function im(v){let e=new WeakMap;function t(g,_){return _===bn?g.mapping=Cr:_===Vs&&(g.mapping=As),g}function l(g){const _=g.target;_.removeEventListener("dispose",l);const b=e.get(_);void 0!==b&&(e.delete(_),b.dispose())}return{get:function s(g){if(g&&g.isTexture&&!1===g.isRenderTargetTexture){const _=g.mapping;if(_===bn||_===Vs){if(e.has(g))return t(e.get(g).texture,g.mapping);{const b=g.image;if(b&&b.height>0){const x=new nd(b.height/2);return x.fromEquirectangularTexture(v,g),e.set(g,x),g.addEventListener("dispose",l),t(x.texture,g.mapping)}return null}}}return g},dispose:function h(){e=new WeakMap}}}class bf extends ko{constructor(e=-1,t=1,s=1,l=-1,h=.1,g=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=s,this.bottom=l,this.near=h,this.far=g,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,s,l,h,g){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=s,this.view.offsetY=l,this.view.width=h,this.view.height=g,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),s=(this.right+this.left)/2,l=(this.top+this.bottom)/2;let h=s-e,g=s+e,_=l+t,b=l-t;if(null!==this.view&&this.view.enabled){const x=(this.right-this.left)/this.view.fullWidth/this.zoom,S=(this.top-this.bottom)/this.view.fullHeight/this.zoom;h+=x*this.view.offsetX,g=h+x*this.view.width,_-=S*this.view.offsetY,b=_-S*this.view.height}this.projectionMatrix.makeOrthographic(h,g,_,b,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}const Ca=[.125,.215,.35,.446,.526,.582],ah=new bf,Tf=new Xt;let nl=null;const oc=(1+Math.sqrt(5))/2,lh=1/oc,rm=[new ce(1,1,1),new ce(-1,1,1),new ce(1,1,-1),new ce(-1,1,-1),new ce(0,oc,lh),new ce(0,oc,-lh),new ce(lh,0,oc),new ce(-lh,0,oc),new ce(oc,lh,0),new ce(-oc,lh,0)];class ch{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,s=.1,l=100){nl=this._renderer.getRenderTarget(),this._setSize(256);const h=this._allocateTargets();return h.depthBuffer=!0,this._sceneToCubeUV(e,s,l,h),t>0&&this._blur(h,0,0,t),this._applyPMREM(h),this._cleanup(h),h}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=gu(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=xf(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(nl),e.scissorTest=!1,uh(e,0,0,e.width,e.height)}_fromTexture(e,t){this._setSize(e.mapping===Cr||e.mapping===As?0===e.image.length?16:e.image[0].width||e.image[0].image.width:e.image.width/4),nl=this._renderer.getRenderTarget();const s=t||this._allocateTargets();return this._textureToCubeUV(e,s),this._applyPMREM(s),this._cleanup(s),s}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,s={magFilter:mn,minFilter:mn,generateMipmaps:!1,type:$s,format:we,encoding:bs,depthBuffer:!1},l=Hg(e,t,s);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=Hg(e,t,s);const{_lodMax:h}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function Mf(v){const e=[],t=[],s=[];let l=v;const h=v-4+1+Ca.length;for(let g=0;g<h;g++){const _=Math.pow(2,l);t.push(_);let b=1/_;g>v-4?b=Ca[g-v+4-1]:0===g&&(b=0),s.push(b);const x=1/(_-2),S=-x,A=1+x,E=[S,S,A,S,A,A,S,S,A,A,S,A],L=6,G=6,j=3,k=2,Y=1,Z=new Float32Array(j*G*L),$=new Float32Array(k*G*L),J=new Float32Array(Y*G*L);for(let de=0;de<L;de++){const _e=de%3*2/3-1,K=de>2?0:-1;Z.set([_e,K,0,_e+2/3,K,0,_e+2/3,K+1,0,_e,K,0,_e+2/3,K+1,0,_e,K+1,0],j*G*de),$.set(E,k*G*de),J.set([de,de,de,de,de,de],Y*G*de)}const se=new di;se.setAttribute("position",new kr(Z,j)),se.setAttribute("uv",new kr($,k)),se.setAttribute("faceIndex",new kr(J,Y)),e.push(se),l>4&&l--}return{lodPlanes:e,sizeLods:t,sigmas:s}}(h)),this._blurMaterial=function wl(v,e,t){const s=new Float32Array(20),l=new ce(0,1,0);return new er({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${v}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:s},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:l}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:Qt,depthTest:!1,depthWrite:!1})}(h,e,t)}return l}_compileMaterial(e){const t=new R(this._lodPlanes[0],e);this._renderer.compile(t,ah)}_sceneToCubeUV(e,t,s,l){const _=new pr(90,1,t,s),b=[1,-1,1,1,1,1],x=[1,1,1,-1,-1,-1],S=this._renderer,A=S.autoClear,E=S.toneMapping;S.getClearColor(Tf),S.toneMapping=us,S.autoClear=!1;const L=new ca({name:"PMREM.Background",side:Ge,depthWrite:!1,depthTest:!1}),G=new R(new V,L);let j=!1;const k=e.background;k?k.isColor&&(L.color.copy(k),e.background=null,j=!0):(L.color.copy(Tf),j=!0);for(let Y=0;Y<6;Y++){const Z=Y%3;0===Z?(_.up.set(0,b[Y],0),_.lookAt(x[Y],0,0)):1===Z?(_.up.set(0,0,b[Y]),_.lookAt(0,x[Y],0)):(_.up.set(0,b[Y],0),_.lookAt(0,0,x[Y]));const $=this._cubeSize;uh(l,Z*$,Y>2?$:0,$,$),S.setRenderTarget(l),j&&S.render(G,_),S.render(e,_)}G.geometry.dispose(),G.material.dispose(),S.toneMapping=E,S.autoClear=A,e.background=k}_textureToCubeUV(e,t){const s=this._renderer,l=e.mapping===Cr||e.mapping===As;l?(null===this._cubemapMaterial&&(this._cubemapMaterial=gu()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=xf());const h=l?this._cubemapMaterial:this._equirectMaterial,g=new R(this._lodPlanes[0],h);h.uniforms.envMap.value=e;const b=this._cubeSize;uh(t,0,0,3*b,2*b),s.setRenderTarget(t),s.render(g,ah)}_applyPMREM(e){const t=this._renderer,s=t.autoClear;t.autoClear=!1;for(let l=1;l<this._lodPlanes.length;l++){const h=Math.sqrt(this._sigmas[l]*this._sigmas[l]-this._sigmas[l-1]*this._sigmas[l-1]);this._blur(e,l-1,l,h,rm[(l-1)%rm.length])}t.autoClear=s}_blur(e,t,s,l,h){const g=this._pingPongRenderTarget;this._halfBlur(e,g,t,s,l,"latitudinal",h),this._halfBlur(g,e,s,s,l,"longitudinal",h)}_halfBlur(e,t,s,l,h,g,_){const b=this._renderer,x=this._blurMaterial;"latitudinal"!==g&&"longitudinal"!==g&&console.error("blur direction must be either latitudinal or longitudinal!");const A=new R(this._lodPlanes[l],x),E=x.uniforms,L=this._sizeLods[s]-1,G=isFinite(h)?Math.PI/(2*L):2*Math.PI/39,j=h/G,k=isFinite(h)?1+Math.floor(3*j):20;k>20&&console.warn(`sigmaRadians, ${h}, is too large and will clip, as it requested ${k} samples when the maximum is set to 20`);const Y=[];let Z=0;for(let _e=0;_e<20;++_e){const K=_e/j,fe=Math.exp(-K*K/2);Y.push(fe),0===_e?Z+=fe:_e<k&&(Z+=2*fe)}for(let _e=0;_e<Y.length;_e++)Y[_e]=Y[_e]/Z;E.envMap.value=e.texture,E.samples.value=k,E.weights.value=Y,E.latitudinal.value="latitudinal"===g,_&&(E.poleAxis.value=_);const{_lodMax:$}=this;E.dTheta.value=G,E.mipInt.value=$-s;const J=this._sizeLods[l];uh(t,3*J*(l>$-4?l-$+4:0),4*(this._cubeSize-J),3*J,2*J),b.setRenderTarget(t),b.render(A,ah)}}function Hg(v,e,t){const s=new rs(v,e,t);return s.texture.mapping=Li,s.texture.name="PMREM.cubeUv",s.scissorTest=!0,s}function uh(v,e,t,s,l){v.viewport.set(e,t,s,l),v.scissor.set(e,t,s,l)}function xf(){return new er({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:Qt,depthTest:!1,depthWrite:!1})}function gu(){return new er({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:Qt,depthTest:!1,depthWrite:!1})}function zg(v){let e=new WeakMap,t=null;function h(_){const b=_.target;b.removeEventListener("dispose",h);const x=e.get(b);void 0!==x&&(e.delete(b),x.dispose())}return{get:function s(_){if(_&&_.isTexture){const b=_.mapping,x=b===bn||b===Vs,S=b===Cr||b===As;if(x||S){if(_.isRenderTargetTexture&&!0===_.needsPMREMUpdate){_.needsPMREMUpdate=!1;let A=e.get(_);return null===t&&(t=new ch(v)),A=x?t.fromEquirectangular(_,A):t.fromCubemap(_,A),e.set(_,A),A.texture}if(e.has(_))return e.get(_).texture;{const A=_.image;if(x&&A&&A.height>0||S&&A&&function l(_){let b=0;for(let S=0;S<6;S++)void 0!==_[S]&&b++;return 6===b}(A)){null===t&&(t=new ch(v));const E=x?t.fromEquirectangular(_):t.fromCubemap(_);return e.set(_,E),_.addEventListener("dispose",h),E.texture}return null}}}return _},dispose:function g(){e=new WeakMap,null!==t&&(t.dispose(),t=null)}}}function sm(v){const e={};function t(s){if(void 0!==e[s])return e[s];let l;switch(s){case"WEBGL_depth_texture":l=v.getExtension("WEBGL_depth_texture")||v.getExtension("MOZ_WEBGL_depth_texture")||v.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":l=v.getExtension("EXT_texture_filter_anisotropic")||v.getExtension("MOZ_EXT_texture_filter_anisotropic")||v.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":l=v.getExtension("WEBGL_compressed_texture_s3tc")||v.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||v.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":l=v.getExtension("WEBGL_compressed_texture_pvrtc")||v.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:l=v.getExtension(s)}return e[s]=l,l}return{has:function(s){return null!==t(s)},init:function(s){s.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(s){const l=t(s);return null===l&&console.warn("THREE.WebGLRenderer: "+s+" extension not supported."),l}}}function dh(v,e,t,s){const l={},h=new WeakMap;function g(A){const E=A.target;null!==E.index&&e.remove(E.index);for(const G in E.attributes)e.remove(E.attributes[G]);E.removeEventListener("dispose",g),delete l[E.id];const L=h.get(E);L&&(e.remove(L),h.delete(E)),s.releaseStatesOfGeometry(E),!0===E.isInstancedBufferGeometry&&delete E._maxInstanceCount,t.memory.geometries--}function x(A){const E=[],L=A.index,G=A.attributes.position;let j=0;if(null!==L){const Z=L.array;j=L.version;for(let $=0,J=Z.length;$<J;$+=3){const se=Z[$+0],de=Z[$+1],_e=Z[$+2];E.push(se,de,de,_e,_e,se)}}else{j=G.version;for(let $=0,J=G.array.length/3-1;$<J;$+=3){const se=$+0,de=$+1,_e=$+2;E.push(se,de,de,_e,_e,se)}}const k=new(Kl(E)?wa:Ml)(E,1);k.version=j;const Y=h.get(A);Y&&e.remove(Y),h.set(A,k)}return{get:function _(A,E){return!0===l[E.id]||(E.addEventListener("dispose",g),l[E.id]=!0,t.memory.geometries++),E},update:function b(A){const E=A.attributes;for(const G in E)e.update(E[G],34962);const L=A.morphAttributes;for(const G in L){const j=L[G];for(let k=0,Y=j.length;k<Y;k++)e.update(j[k],34962)}},getWireframeAttribute:function S(A){const E=h.get(A);if(E){const L=A.index;null!==L&&E.version<L.version&&x(A)}else x(A);return h.get(A)}}}function Wg(v,e,t,s){const l=s.isWebGL2;let h,_,b;this.setMode=function g(E){h=E},this.setIndex=function x(E){_=E.type,b=E.bytesPerElement},this.render=function S(E,L){v.drawElements(h,L,_,E*b),t.update(L,h,1)},this.renderInstances=function A(E,L,G){if(0===G)return;let j,k;if(l)j=v,k="drawElementsInstanced";else if(j=e.get("ANGLE_instanced_arrays"),k="drawElementsInstancedANGLE",null===j)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");j[k](h,L,_,E*b,G),t.update(L,h,G)}}function Df(v){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function l(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function s(h,g,_){switch(t.calls++,g){case 4:t.triangles+=_*(h/3);break;case 1:t.lines+=_*(h/2);break;case 3:t.lines+=_*(h-1);break;case 2:t.lines+=_*h;break;case 0:t.points+=_*h;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",g)}}}}function $g(v,e){return v[0]-e[0]}function mr(v,e){return Math.abs(e[1])-Math.abs(v[1])}function om(v,e,t){const s={},l=new Float32Array(8),h=new WeakMap,g=new Ii,_=[];for(let x=0;x<8;x++)_[x]=[x,0];return{update:function b(x,S,A,E){const L=x.morphTargetInfluences;if(!0===e.isWebGL2){const G=S.morphAttributes.position||S.morphAttributes.normal||S.morphAttributes.color,j=void 0!==G?G.length:0;let k=h.get(S);if(void 0===k||k.count!==j){let at=function(){je.dispose(),h.delete(S),S.removeEventListener("dispose",at)};void 0!==k&&k.texture.dispose();const $=void 0!==S.morphAttributes.position,J=void 0!==S.morphAttributes.normal,se=void 0!==S.morphAttributes.color,de=S.morphAttributes.position||[],_e=S.morphAttributes.normal||[],K=S.morphAttributes.color||[];let fe=0;!0===$&&(fe=1),!0===J&&(fe=2),!0===se&&(fe=3);let Te=S.attributes.position.count*fe,ze=1;Te>e.maxTextureSize&&(ze=Math.ceil(Te/e.maxTextureSize),Te=e.maxTextureSize);const bt=new Float32Array(Te*ze*4*j),je=new fs(bt,Te,ze,j);je.type=br,je.needsUpdate=!0;const Se=4*fe;for(let Tt=0;Tt<j;Tt++){const At=de[Tt],_t=_e[Tt],Pt=K[Tt],xt=Te*ze*4*Tt;for(let st=0;st<At.count;st++){const tt=st*Se;!0===$&&(g.fromBufferAttribute(At,st),bt[xt+tt+0]=g.x,bt[xt+tt+1]=g.y,bt[xt+tt+2]=g.z,bt[xt+tt+3]=0),!0===J&&(g.fromBufferAttribute(_t,st),bt[xt+tt+4]=g.x,bt[xt+tt+5]=g.y,bt[xt+tt+6]=g.z,bt[xt+tt+7]=0),!0===se&&(g.fromBufferAttribute(Pt,st),bt[xt+tt+8]=g.x,bt[xt+tt+9]=g.y,bt[xt+tt+10]=g.z,bt[xt+tt+11]=4===Pt.itemSize?g.w:1)}}k={count:j,texture:je,size:new Oe(Te,ze)},h.set(S,k),S.addEventListener("dispose",at)}let Y=0;for(let $=0;$<L.length;$++)Y+=L[$];const Z=S.morphTargetsRelative?1:1-Y;E.getUniforms().setValue(v,"morphTargetBaseInfluence",Z),E.getUniforms().setValue(v,"morphTargetInfluences",L),E.getUniforms().setValue(v,"morphTargetsTexture",k.texture,t),E.getUniforms().setValue(v,"morphTargetsTextureSize",k.size)}else{const G=void 0===L?0:L.length;let j=s[S.id];if(void 0===j||j.length!==G){j=[];for(let J=0;J<G;J++)j[J]=[J,0];s[S.id]=j}for(let J=0;J<G;J++){const se=j[J];se[0]=J,se[1]=L[J]}j.sort(mr);for(let J=0;J<8;J++)J<G&&j[J][1]?(_[J][0]=j[J][0],_[J][1]=j[J][1]):(_[J][0]=Number.MAX_SAFE_INTEGER,_[J][1]=0);_.sort($g);const k=S.morphAttributes.position,Y=S.morphAttributes.normal;let Z=0;for(let J=0;J<8;J++){const se=_[J],de=se[0],_e=se[1];de!==Number.MAX_SAFE_INTEGER&&_e?(k&&S.getAttribute("morphTarget"+J)!==k[de]&&S.setAttribute("morphTarget"+J,k[de]),Y&&S.getAttribute("morphNormal"+J)!==Y[de]&&S.setAttribute("morphNormal"+J,Y[de]),l[J]=_e,Z+=_e):(k&&!0===S.hasAttribute("morphTarget"+J)&&S.deleteAttribute("morphTarget"+J),Y&&!0===S.hasAttribute("morphNormal"+J)&&S.deleteAttribute("morphNormal"+J),l[J]=0)}const $=S.morphTargetsRelative?1:1-Z;E.getUniforms().setValue(v,"morphTargetBaseInfluence",$),E.getUniforms().setValue(v,"morphTargetInfluences",l)}}}}function am(v,e,t,s){let l=new WeakMap;function _(b){const x=b.target;x.removeEventListener("dispose",_),t.remove(x.instanceMatrix),null!==x.instanceColor&&t.remove(x.instanceColor)}return{update:function h(b){const x=s.render.frame,A=e.get(b,b.geometry);return l.get(A)!==x&&(e.update(A),l.set(A,x)),b.isInstancedMesh&&(!1===b.hasEventListener("dispose",_)&&b.addEventListener("dispose",_),t.update(b.instanceMatrix,34962),null!==b.instanceColor&&t.update(b.instanceColor,34962)),A},dispose:function g(){l=new WeakMap}}}const qr=new Dr,ac=new fs,wf=new Xl,lm=new Qa,cm=[],cd=[],ud=new Float32Array(16),Yg=new Float32Array(9),Jg=new Float32Array(4);function il(v,e,t){const s=v[0];if(s<=0||s>0)return v;const l=e*t;let h=cm[l];if(void 0===h&&(h=new Float32Array(l),cm[l]=h),0!==e){s.toArray(h,0);for(let g=1,_=0;g!==e;++g)_+=t,v[g].toArray(h,_)}return h}function Zr(v,e){if(v.length!==e.length)return!1;for(let t=0,s=v.length;t<s;t++)if(v[t]!==e[t])return!1;return!0}function ss(v,e){for(let t=0,s=e.length;t<s;t++)v[t]=e[t]}function dd(v,e){let t=cd[e];void 0===t&&(t=new Int32Array(e),cd[e]=t);for(let s=0;s!==e;++s)t[s]=v.allocateTextureUnit();return t}function um(v,e){const t=this.cache;t[0]!==e&&(v.uniform1f(this.addr,e),t[0]=e)}function qg(v,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(v.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Zr(t,e))return;v.uniform2fv(this.addr,e),ss(t,e)}}function hh(v,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(v.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(void 0!==e.r)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(v.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Zr(t,e))return;v.uniform3fv(this.addr,e),ss(t,e)}}function dm(v,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(v.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Zr(t,e))return;v.uniform4fv(this.addr,e),ss(t,e)}}function hd(v,e){const t=this.cache,s=e.elements;if(void 0===s){if(Zr(t,e))return;v.uniformMatrix2fv(this.addr,!1,e),ss(t,e)}else{if(Zr(t,s))return;Jg.set(s),v.uniformMatrix2fv(this.addr,!1,Jg),ss(t,s)}}function Rf(v,e){const t=this.cache,s=e.elements;if(void 0===s){if(Zr(t,e))return;v.uniformMatrix3fv(this.addr,!1,e),ss(t,e)}else{if(Zr(t,s))return;Yg.set(s),v.uniformMatrix3fv(this.addr,!1,Yg),ss(t,s)}}function yv(v,e){const t=this.cache,s=e.elements;if(void 0===s){if(Zr(t,e))return;v.uniformMatrix4fv(this.addr,!1,e),ss(t,e)}else{if(Zr(t,s))return;ud.set(s),v.uniformMatrix4fv(this.addr,!1,ud),ss(t,s)}}function Rl(v,e){const t=this.cache;t[0]!==e&&(v.uniform1i(this.addr,e),t[0]=e)}function Zg(v,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(v.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Zr(t,e))return;v.uniform2iv(this.addr,e),ss(t,e)}}function fd(v,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(v.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Zr(t,e))return;v.uniform3iv(this.addr,e),ss(t,e)}}function Bc(v,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(v.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Zr(t,e))return;v.uniform4iv(this.addr,e),ss(t,e)}}function hm(v,e){const t=this.cache;t[0]!==e&&(v.uniform1ui(this.addr,e),t[0]=e)}function jc(v,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(v.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Zr(t,e))return;v.uniform2uiv(this.addr,e),ss(t,e)}}function Kg(v,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(v.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Zr(t,e))return;v.uniform3uiv(this.addr,e),ss(t,e)}}function _i(v,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(v.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Zr(t,e))return;v.uniform4uiv(this.addr,e),ss(t,e)}}function fh(v,e,t){const s=this.cache,l=t.allocateTextureUnit();s[0]!==l&&(v.uniform1i(this.addr,l),s[0]=l),t.setTexture2D(e||qr,l)}function Sf(v,e,t){const s=this.cache,l=t.allocateTextureUnit();s[0]!==l&&(v.uniform1i(this.addr,l),s[0]=l),t.setTexture3D(e||wf,l)}function Cf(v,e,t){const s=this.cache,l=t.allocateTextureUnit();s[0]!==l&&(v.uniform1i(this.addr,l),s[0]=l),t.setTextureCube(e||lm,l)}function vu(v,e,t){const s=this.cache,l=t.allocateTextureUnit();s[0]!==l&&(v.uniform1i(this.addr,l),s[0]=l),t.setTexture2DArray(e||ac,l)}function Ef(v,e){v.uniform1fv(this.addr,e)}function pd(v,e){const t=il(e,this.size,2);v.uniform2fv(this.addr,t)}function ph(v,e){const t=il(e,this.size,3);v.uniform3fv(this.addr,t)}function mh(v,e){const t=il(e,this.size,4);v.uniform4fv(this.addr,t)}function Af(v,e){const t=il(e,this.size,4);v.uniformMatrix2fv(this.addr,!1,t)}function yu(v,e){const t=il(e,this.size,9);v.uniformMatrix3fv(this.addr,!1,t)}function Xg(v,e){const t=il(e,this.size,16);v.uniformMatrix4fv(this.addr,!1,t)}function fm(v,e){v.uniform1iv(this.addr,e)}function pm(v,e){v.uniform2iv(this.addr,e)}function gh(v,e){v.uniform3iv(this.addr,e)}function mm(v,e){v.uniform4iv(this.addr,e)}function gm(v,e){v.uniform1uiv(this.addr,e)}function Qg(v,e){v.uniform2uiv(this.addr,e)}function _m(v,e){v.uniform3uiv(this.addr,e)}function bv(v,e){v.uniform4uiv(this.addr,e)}function e_(v,e,t){const s=this.cache,l=e.length,h=dd(t,l);Zr(s,h)||(v.uniform1iv(this.addr,h),ss(s,h));for(let g=0;g!==l;++g)t.setTexture2D(e[g]||qr,h[g])}function md(v,e,t){const s=this.cache,l=e.length,h=dd(t,l);Zr(s,h)||(v.uniform1iv(this.addr,h),ss(s,h));for(let g=0;g!==l;++g)t.setTexture3D(e[g]||wf,h[g])}function t_(v,e,t){const s=this.cache,l=e.length,h=dd(t,l);Zr(s,h)||(v.uniform1iv(this.addr,h),ss(s,h));for(let g=0;g!==l;++g)t.setTextureCube(e[g]||lm,h[g])}function bu(v,e,t){const s=this.cache,l=e.length,h=dd(t,l);Zr(s,h)||(v.uniform1iv(this.addr,h),ss(s,h));for(let g=0;g!==l;++g)t.setTexture2DArray(e[g]||ac,h[g])}class n_{constructor(e,t,s){this.id=e,this.addr=s,this.cache=[],this.setValue=function kc(v){switch(v){case 5126:return um;case 35664:return qg;case 35665:return hh;case 35666:return dm;case 35674:return hd;case 35675:return Rf;case 35676:return yv;case 5124:case 35670:return Rl;case 35667:case 35671:return Zg;case 35668:case 35672:return fd;case 35669:case 35673:return Bc;case 5125:return hm;case 36294:return jc;case 36295:return Kg;case 36296:return _i;case 35678:case 36198:case 36298:case 36306:case 35682:return fh;case 35679:case 36299:case 36307:return Sf;case 35680:case 36300:case 36308:case 36293:return Cf;case 36289:case 36303:case 36311:case 36292:return vu}}(t.type)}}class If{constructor(e,t,s){this.id=e,this.addr=s,this.cache=[],this.size=t.size,this.setValue=function gd(v){switch(v){case 5126:return Ef;case 35664:return pd;case 35665:return ph;case 35666:return mh;case 35674:return Af;case 35675:return yu;case 35676:return Xg;case 5124:case 35670:return fm;case 35667:case 35671:return pm;case 35668:case 35672:return gh;case 35669:case 35673:return mm;case 5125:return gm;case 36294:return Qg;case 36295:return _m;case 36296:return bv;case 35678:case 36198:case 36298:case 36306:case 35682:return e_;case 35679:case 36299:case 36307:return md;case 35680:case 36300:case 36308:case 36293:return t_;case 36289:case 36303:case 36311:case 36292:return bu}}(t.type)}}class vm{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,s){const l=this.seq;for(let h=0,g=l.length;h!==g;++h){const _=l[h];_.setValue(e,t[_.id],s)}}}const _h=/(\w+)(\])?(\[|\.)?/g;function Pf(v,e){v.seq.push(e),v.map[e.id]=e}function Of(v,e,t){const s=v.name,l=s.length;for(_h.lastIndex=0;;){const h=_h.exec(s);let _=h[1];const x=h[3];if("]"===h[2]&&(_|=0),void 0===x||"["===x&&_h.lastIndex+2===l){Pf(t,void 0===x?new n_(_,v,e):new If(_,v,e));break}{let A=t.map[_];void 0===A&&(A=new vm(_),Pf(t,A)),t=A}}}class vh{constructor(e,t){this.seq=[],this.map={};const s=e.getProgramParameter(t,35718);for(let l=0;l<s;++l){const h=e.getActiveUniform(t,l);Of(h,e.getUniformLocation(t,h.name),this)}}setValue(e,t,s,l){const h=this.map[t];void 0!==h&&h.setValue(e,s,l)}setOptional(e,t,s){const l=t[s];void 0!==l&&this.setValue(e,s,l)}static upload(e,t,s,l){for(let h=0,g=t.length;h!==g;++h){const _=t[h],b=s[_.id];!1!==b.needsUpdate&&_.setValue(e,b.value,l)}}static seqWithValue(e,t){const s=[];for(let l=0,h=e.length;l!==h;++l){const g=e[l];g.id in t&&s.push(g)}return s}}function _d(v,e,t){const s=v.createShader(e);return v.shaderSource(s,t),v.compileShader(s),s}let Nf=0;function vd(v,e,t){const s=v.getShaderParameter(e,35713),l=v.getShaderInfoLog(e).trim();if(s&&""===l)return"";const h=/ERROR: 0:(\d+)/.exec(l);if(h){const g=parseInt(h[1]);return t.toUpperCase()+"\n\n"+l+"\n\n"+function i_(v,e){const t=v.split("\n"),s=[],l=Math.max(e-6,0),h=Math.min(e+6,t.length);for(let g=l;g<h;g++){const _=g+1;s.push(`${_===e?">":" "} ${_}: ${t[g]}`)}return s.join("\n")}(v.getShaderSource(e),g)}return l}function Tv(v,e){const t=function ym(v){switch(v){case bs:return["Linear","( value )"];case Dn:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",v),["Linear","( value )"]}}(e);return"vec4 "+v+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function Mv(v,e){let t;switch(e){case Qr:t="Linear";break;case Ia:t="Reinhard";break;case Sr:t="OptimizedCineon";break;case lo:t="ACESFilmic";break;case $o:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+v+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function yh(v){return""!==v}function r_(v,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return v.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function Tu(v,e){return v.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const lc=/^[ \t]*#include +<([\w\d./]+)>/gm;function bm(v){return v.replace(lc,Rv)}function Rv(v,e){const t=hi[e];if(void 0===t)throw new Error("Can not resolve #include <"+e+">");return bm(t)}const Sv=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Cv(v){return v.replace(Sv,s_)}function s_(v,e,t,s){let l="";for(let h=parseInt(e);h<parseInt(t);h++)l+=s.replace(/\[\s*i\s*\]/g,"[ "+h+" ]").replace(/UNROLLED_LOOP_INDEX/g,h);return l}function Ev(v){let e="precision "+v.precision+" float;\nprecision "+v.precision+" int;";return"highp"===v.precision?e+="\n#define HIGH_PRECISION":"mediump"===v.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===v.precision&&(e+="\n#define LOW_PRECISION"),e}function Ea(v,e,t,s){const l=v.getContext(),h=t.defines;let g=t.vertexShader,_=t.fragmentShader;const b=function o_(v){let e="SHADOWMAP_TYPE_BASIC";return v.shadowMapType===He?e="SHADOWMAP_TYPE_PCF":v.shadowMapType===rt?e="SHADOWMAP_TYPE_PCF_SOFT":v.shadowMapType===Gt&&(e="SHADOWMAP_TYPE_VSM"),e}(t),x=function a_(v){let e="ENVMAP_TYPE_CUBE";if(v.envMap)switch(v.envMapMode){case Cr:case As:e="ENVMAP_TYPE_CUBE";break;case Li:e="ENVMAP_TYPE_CUBE_UV"}return e}(t),S=function Av(v){let e="ENVMAP_MODE_REFLECTION";return v.envMap&&v.envMapMode===As&&(e="ENVMAP_MODE_REFRACTION"),e}(t),A=function Ff(v){let e="ENVMAP_BLENDING_NONE";if(v.envMap)switch(v.combine){case cr:e="ENVMAP_BLENDING_MULTIPLY";break;case Si:e="ENVMAP_BLENDING_MIX";break;case Ur:e="ENVMAP_BLENDING_ADD"}return e}(t),E=function Iv(v){const e=v.envMapCubeUVHeight;if(null===e)return null;const t=Math.log2(e)-2,s=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:s,maxMip:t}}(t),L=t.isWebGL2?"":function xv(v){return[v.extensionDerivatives||v.envMapCubeUVHeight||v.bumpMap||v.tangentSpaceNormalMap||v.clearcoatNormalMap||v.flatShading||"physical"===v.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(v.extensionFragDepth||v.logarithmicDepthBuffer)&&v.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",v.extensionDrawBuffers&&v.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(v.extensionShaderTextureLOD||v.envMap||v.transmission)&&v.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(yh).join("\n")}(t),G=function Dv(v){const e=[];for(const t in v){const s=v[t];!1!==s&&e.push("#define "+t+" "+s)}return e.join("\n")}(h),j=l.createProgram();let k,Y,Z=t.glslVersion?"#version "+t.glslVersion+"\n":"";t.isRawShaderMaterial?(k=[G].filter(yh).join("\n"),k.length>0&&(k+="\n"),Y=[L,G].filter(yh).join("\n"),Y.length>0&&(Y+="\n")):(k=[Ev(t),"#define SHADER_NAME "+t.shaderName,G,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+S:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&!1===t.flatShading?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+b:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(yh).join("\n"),Y=[L,Ev(t),"#define SHADER_NAME "+t.shaderName,G,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+x:"",t.envMap?"#define "+S:"",t.envMap?"#define "+A:"",E?"#define CUBEUV_TEXEL_WIDTH "+E.texelWidth:"",E?"#define CUBEUV_TEXEL_HEIGHT "+E.texelHeight:"",E?"#define CUBEUV_MAX_MIP "+E.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+b:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==us?"#define TONE_MAPPING":"",t.toneMapping!==us?hi.tonemapping_pars_fragment:"",t.toneMapping!==us?Mv("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",hi.encodings_pars_fragment,Tv("linearToOutputTexel",t.outputEncoding),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"","\n"].filter(yh).join("\n")),g=bm(g),g=r_(g,t),g=Tu(g,t),_=bm(_),_=r_(_,t),_=Tu(_,t),g=Cv(g),_=Cv(_),t.isWebGL2&&!0!==t.isRawShaderMaterial&&(Z="#version 300 es\n",k=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+k,Y=["#define varying in",t.glslVersion===ta?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===ta?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+Y);const J=Z+Y+_,se=_d(l,35633,Z+k+g),de=_d(l,35632,J);if(l.attachShader(j,se),l.attachShader(j,de),void 0!==t.index0AttributeName?l.bindAttribLocation(j,0,t.index0AttributeName):!0===t.morphTargets&&l.bindAttribLocation(j,0,"position"),l.linkProgram(j),v.debug.checkShaderErrors){const fe=l.getProgramInfoLog(j).trim(),Te=l.getShaderInfoLog(se).trim(),ze=l.getShaderInfoLog(de).trim();let bt=!0,je=!0;if(!1===l.getProgramParameter(j,35714)){bt=!1;const Se=vd(l,se,"vertex"),at=vd(l,de,"fragment");console.error("THREE.WebGLProgram: Shader Error "+l.getError()+" - VALIDATE_STATUS "+l.getProgramParameter(j,35715)+"\n\nProgram Info Log: "+fe+"\n"+Se+"\n"+at)}else""!==fe?console.warn("THREE.WebGLProgram: Program Info Log:",fe):(""===Te||""===ze)&&(je=!1);je&&(this.diagnostics={runnable:bt,programLog:fe,vertexShader:{log:Te,prefix:k},fragmentShader:{log:ze,prefix:Y}})}let _e,K;return l.deleteShader(se),l.deleteShader(de),this.getUniforms=function(){return void 0===_e&&(_e=new vh(l,j)),_e},this.getAttributes=function(){return void 0===K&&(K=function wv(v,e){const t={},s=v.getProgramParameter(e,35721);for(let l=0;l<s;l++){const h=v.getActiveAttrib(e,l),g=h.name;let _=1;35674===h.type&&(_=2),35675===h.type&&(_=3),35676===h.type&&(_=4),t[g]={type:h.type,location:v.getAttribLocation(e,g),locationSize:_}}return t}(l,j)),K},this.destroy=function(){s.releaseStatesOfProgram(this),l.deleteProgram(j),this.program=void 0},this.name=t.shaderName,this.id=Nf++,this.cacheKey=e,this.usedTimes=1,this.program=j,this.vertexShader=se,this.fragmentShader=de,this}let Pi=0;class Lf{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const s=e.fragmentShader,l=this._getShaderStage(e.vertexShader),h=this._getShaderStage(s),g=this._getShaderCacheForMaterial(e);return!1===g.has(l)&&(g.add(l),l.usedTimes++),!1===g.has(h)&&(g.add(h),h.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const s of t)s.usedTimes--,0===s.usedTimes&&this.shaderCache.delete(s.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let s=t.get(e);return void 0===s&&(s=new Set,t.set(e,s)),s}_getShaderStage(e){const t=this.shaderCache;let s=t.get(e);return void 0===s&&(s=new Bf(e),t.set(e,s)),s}}class Bf{constructor(e){this.id=Pi++,this.code=e,this.usedTimes=0}}function jf(v,e,t,s,l,h,g){const _=new hr,b=new Lf,x=[],S=l.isWebGL2,A=l.logarithmicDepthBuffer,E=l.vertexTextures;let L=l.precision;const G={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function j(K,fe,Te,ze,bt){const je=ze.fog,Se=bt.geometry,Tt=(K.isMeshStandardMaterial?t:e).get(K.envMap||(K.isMeshStandardMaterial?ze.environment:null)),At=Tt&&Tt.mapping===Li?Tt.image.height:null,_t=G[K.type];null!==K.precision&&(L=l.getMaxPrecision(K.precision),L!==K.precision&&console.warn("THREE.WebGLProgram.getParameters:",K.precision,"not supported, using",L,"instead."));const Pt=Se.morphAttributes.position||Se.morphAttributes.normal||Se.morphAttributes.color,xt=void 0!==Pt?Pt.length:0;let tt,Ht,kt,on,st=0;if(void 0!==Se.morphAttributes.position&&(st=1),void 0!==Se.morphAttributes.normal&&(st=2),void 0!==Se.morphAttributes.color&&(st=3),_t){const Mi=tl[_t];tt=Mi.vertexShader,Ht=Mi.fragmentShader}else tt=K.vertexShader,Ht=K.fragmentShader,b.update(K),kt=b.getVertexShaderID(K),on=b.getFragmentShaderID(K);const ht=v.getRenderTarget(),xn=K.clearcoat>0,Yn=K.iridescence>0;return{isWebGL2:S,shaderID:_t,shaderName:K.type,vertexShader:tt,fragmentShader:Ht,defines:K.defines,customVertexShaderID:kt,customFragmentShaderID:on,isRawShaderMaterial:!0===K.isRawShaderMaterial,glslVersion:K.glslVersion,precision:L,instancing:!0===bt.isInstancedMesh,instancingColor:!0===bt.isInstancedMesh&&null!==bt.instanceColor,supportsVertexTextures:E,outputEncoding:null===ht?v.outputEncoding:!0===ht.isXRRenderTarget?ht.texture.encoding:bs,map:!!K.map,matcap:!!K.matcap,envMap:!!Tt,envMapMode:Tt&&Tt.mapping,envMapCubeUVHeight:At,lightMap:!!K.lightMap,aoMap:!!K.aoMap,emissiveMap:!!K.emissiveMap,bumpMap:!!K.bumpMap,normalMap:!!K.normalMap,objectSpaceNormalMap:K.normalMapType===fl,tangentSpaceNormalMap:K.normalMapType===ro,decodeVideoTexture:!!K.map&&!0===K.map.isVideoTexture&&K.map.encoding===Dn,clearcoat:xn,clearcoatMap:xn&&!!K.clearcoatMap,clearcoatRoughnessMap:xn&&!!K.clearcoatRoughnessMap,clearcoatNormalMap:xn&&!!K.clearcoatNormalMap,iridescence:Yn,iridescenceMap:Yn&&!!K.iridescenceMap,iridescenceThicknessMap:Yn&&!!K.iridescenceThicknessMap,displacementMap:!!K.displacementMap,roughnessMap:!!K.roughnessMap,metalnessMap:!!K.metalnessMap,specularMap:!!K.specularMap,specularIntensityMap:!!K.specularIntensityMap,specularColorMap:!!K.specularColorMap,opaque:!1===K.transparent&&K.blending===ti,alphaMap:!!K.alphaMap,alphaTest:K.alphaTest>0,gradientMap:!!K.gradientMap,sheen:K.sheen>0,sheenColorMap:!!K.sheenColorMap,sheenRoughnessMap:!!K.sheenRoughnessMap,transmission:K.transmission>0,transmissionMap:!!K.transmissionMap,thicknessMap:!!K.thicknessMap,combine:K.combine,vertexTangents:!!K.normalMap&&!!Se.attributes.tangent,vertexColors:K.vertexColors,vertexAlphas:!0===K.vertexColors&&!!Se.attributes.color&&4===Se.attributes.color.itemSize,vertexUvs:!!(K.map||K.bumpMap||K.normalMap||K.specularMap||K.alphaMap||K.emissiveMap||K.roughnessMap||K.metalnessMap||K.clearcoatMap||K.clearcoatRoughnessMap||K.clearcoatNormalMap||K.iridescenceMap||K.iridescenceThicknessMap||K.displacementMap||K.transmissionMap||K.thicknessMap||K.specularIntensityMap||K.specularColorMap||K.sheenColorMap||K.sheenRoughnessMap),uvsVertexOnly:!(K.map||K.bumpMap||K.normalMap||K.specularMap||K.alphaMap||K.emissiveMap||K.roughnessMap||K.metalnessMap||K.clearcoatNormalMap||K.iridescenceMap||K.iridescenceThicknessMap||K.transmission>0||K.transmissionMap||K.thicknessMap||K.specularIntensityMap||K.specularColorMap||K.sheen>0||K.sheenColorMap||K.sheenRoughnessMap||!K.displacementMap),fog:!!je,useFog:!0===K.fog,fogExp2:je&&je.isFogExp2,flatShading:!!K.flatShading,sizeAttenuation:K.sizeAttenuation,logarithmicDepthBuffer:A,skinning:!0===bt.isSkinnedMesh,morphTargets:void 0!==Se.morphAttributes.position,morphNormals:void 0!==Se.morphAttributes.normal,morphColors:void 0!==Se.morphAttributes.color,morphTargetsCount:xt,morphTextureStride:st,numDirLights:fe.directional.length,numPointLights:fe.point.length,numSpotLights:fe.spot.length,numSpotLightMaps:fe.spotLightMap.length,numRectAreaLights:fe.rectArea.length,numHemiLights:fe.hemi.length,numDirLightShadows:fe.directionalShadowMap.length,numPointLightShadows:fe.pointShadowMap.length,numSpotLightShadows:fe.spotShadowMap.length,numSpotLightShadowsWithMaps:fe.numSpotLightShadowsWithMaps,numClippingPlanes:g.numPlanes,numClipIntersection:g.numIntersection,dithering:K.dithering,shadowMapEnabled:v.shadowMap.enabled&&Te.length>0,shadowMapType:v.shadowMap.type,toneMapping:K.toneMapped?v.toneMapping:us,physicallyCorrectLights:v.physicallyCorrectLights,premultipliedAlpha:K.premultipliedAlpha,doubleSided:K.side===lt,flipSided:K.side===Ge,useDepthPacking:!!K.depthPacking,depthPacking:K.depthPacking||0,index0AttributeName:K.index0AttributeName,extensionDerivatives:K.extensions&&K.extensions.derivatives,extensionFragDepth:K.extensions&&K.extensions.fragDepth,extensionDrawBuffers:K.extensions&&K.extensions.drawBuffers,extensionShaderTextureLOD:K.extensions&&K.extensions.shaderTextureLOD,rendererExtensionFragDepth:S||s.has("EXT_frag_depth"),rendererExtensionDrawBuffers:S||s.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:S||s.has("EXT_shader_texture_lod"),customProgramCacheKey:K.customProgramCacheKey()}},getProgramCacheKey:function k(K){const fe=[];if(K.shaderID?fe.push(K.shaderID):(fe.push(K.customVertexShaderID),fe.push(K.customFragmentShaderID)),void 0!==K.defines)for(const Te in K.defines)fe.push(Te),fe.push(K.defines[Te]);return!1===K.isRawShaderMaterial&&(function Y(K,fe){K.push(fe.precision),K.push(fe.outputEncoding),K.push(fe.envMapMode),K.push(fe.envMapCubeUVHeight),K.push(fe.combine),K.push(fe.vertexUvs),K.push(fe.fogExp2),K.push(fe.sizeAttenuation),K.push(fe.morphTargetsCount),K.push(fe.morphAttributeCount),K.push(fe.numDirLights),K.push(fe.numPointLights),K.push(fe.numSpotLights),K.push(fe.numSpotLightMaps),K.push(fe.numHemiLights),K.push(fe.numRectAreaLights),K.push(fe.numDirLightShadows),K.push(fe.numPointLightShadows),K.push(fe.numSpotLightShadows),K.push(fe.numSpotLightShadowsWithMaps),K.push(fe.shadowMapType),K.push(fe.toneMapping),K.push(fe.numClippingPlanes),K.push(fe.numClipIntersection),K.push(fe.depthPacking)}(fe,K),function Z(K,fe){_.disableAll(),fe.isWebGL2&&_.enable(0),fe.supportsVertexTextures&&_.enable(1),fe.instancing&&_.enable(2),fe.instancingColor&&_.enable(3),fe.map&&_.enable(4),fe.matcap&&_.enable(5),fe.envMap&&_.enable(6),fe.lightMap&&_.enable(7),fe.aoMap&&_.enable(8),fe.emissiveMap&&_.enable(9),fe.bumpMap&&_.enable(10),fe.normalMap&&_.enable(11),fe.objectSpaceNormalMap&&_.enable(12),fe.tangentSpaceNormalMap&&_.enable(13),fe.clearcoat&&_.enable(14),fe.clearcoatMap&&_.enable(15),fe.clearcoatRoughnessMap&&_.enable(16),fe.clearcoatNormalMap&&_.enable(17),fe.iridescence&&_.enable(18),fe.iridescenceMap&&_.enable(19),fe.iridescenceThicknessMap&&_.enable(20),fe.displacementMap&&_.enable(21),fe.specularMap&&_.enable(22),fe.roughnessMap&&_.enable(23),fe.metalnessMap&&_.enable(24),fe.gradientMap&&_.enable(25),fe.alphaMap&&_.enable(26),fe.alphaTest&&_.enable(27),fe.vertexColors&&_.enable(28),fe.vertexAlphas&&_.enable(29),fe.vertexUvs&&_.enable(30),fe.vertexTangents&&_.enable(31),fe.uvsVertexOnly&&_.enable(32),K.push(_.mask),_.disableAll(),fe.fog&&_.enable(0),fe.useFog&&_.enable(1),fe.flatShading&&_.enable(2),fe.logarithmicDepthBuffer&&_.enable(3),fe.skinning&&_.enable(4),fe.morphTargets&&_.enable(5),fe.morphNormals&&_.enable(6),fe.morphColors&&_.enable(7),fe.premultipliedAlpha&&_.enable(8),fe.shadowMapEnabled&&_.enable(9),fe.physicallyCorrectLights&&_.enable(10),fe.doubleSided&&_.enable(11),fe.flipSided&&_.enable(12),fe.useDepthPacking&&_.enable(13),fe.dithering&&_.enable(14),fe.specularIntensityMap&&_.enable(15),fe.specularColorMap&&_.enable(16),fe.transmission&&_.enable(17),fe.transmissionMap&&_.enable(18),fe.thicknessMap&&_.enable(19),fe.sheen&&_.enable(20),fe.sheenColorMap&&_.enable(21),fe.sheenRoughnessMap&&_.enable(22),fe.decodeVideoTexture&&_.enable(23),fe.opaque&&_.enable(24),K.push(_.mask)}(fe,K),fe.push(v.outputEncoding)),fe.push(K.customProgramCacheKey),fe.join()},getUniforms:function $(K){const fe=G[K.type];let Te;return Te=fe?Ft.clone(tl[fe].uniforms):K.uniforms,Te},acquireProgram:function J(K,fe){let Te;for(let ze=0,bt=x.length;ze<bt;ze++){const je=x[ze];if(je.cacheKey===fe){Te=je,++Te.usedTimes;break}}return void 0===Te&&(Te=new Ea(v,fe,K,h),x.push(Te)),Te},releaseProgram:function se(K){if(0==--K.usedTimes){const fe=x.indexOf(K);x[fe]=x[x.length-1],x.pop(),K.destroy()}},releaseShaderCache:function de(K){b.remove(K)},programs:x,dispose:function _e(){b.dispose()}}}function l_(){let v=new WeakMap;return{get:function e(h){let g=v.get(h);return void 0===g&&(g={},v.set(h,g)),g},remove:function t(h){v.delete(h)},update:function s(h,g,_){v.get(h)[g]=_},dispose:function l(){v=new WeakMap}}}function c_(v,e){return v.groupOrder!==e.groupOrder?v.groupOrder-e.groupOrder:v.renderOrder!==e.renderOrder?v.renderOrder-e.renderOrder:v.material.id!==e.material.id?v.material.id-e.material.id:v.z!==e.z?v.z-e.z:v.id-e.id}function bh(v,e){return v.groupOrder!==e.groupOrder?v.groupOrder-e.groupOrder:v.renderOrder!==e.renderOrder?v.renderOrder-e.renderOrder:v.z!==e.z?e.z-v.z:v.id-e.id}function Tm(){const v=[];let e=0;const t=[],s=[],l=[];function g(A,E,L,G,j,k){let Y=v[e];return void 0===Y?(Y={id:A.id,object:A,geometry:E,material:L,groupOrder:G,renderOrder:A.renderOrder,z:j,group:k},v[e]=Y):(Y.id=A.id,Y.object=A,Y.geometry=E,Y.material=L,Y.groupOrder=G,Y.renderOrder=A.renderOrder,Y.z=j,Y.group=k),e++,Y}return{opaque:t,transmissive:s,transparent:l,init:function h(){e=0,t.length=0,s.length=0,l.length=0},push:function _(A,E,L,G,j,k){const Y=g(A,E,L,G,j,k);L.transmission>0?s.push(Y):!0===L.transparent?l.push(Y):t.push(Y)},unshift:function b(A,E,L,G,j,k){const Y=g(A,E,L,G,j,k);L.transmission>0?s.unshift(Y):!0===L.transparent?l.unshift(Y):t.unshift(Y)},finish:function S(){for(let A=e,E=v.length;A<E;A++){const L=v[A];if(null===L.id)break;L.id=null,L.object=null,L.geometry=null,L.material=null,L.group=null}},sort:function x(A,E){t.length>1&&t.sort(A||c_),s.length>1&&s.sort(E||bh),l.length>1&&l.sort(E||bh)}}}function yd(){let v=new WeakMap;return{get:function e(s,l){const h=v.get(s);let g;return void 0===h?(g=new Tm,v.set(s,[g])):l>=h.length?(g=new Tm,h.push(g)):g=h[l],g},dispose:function t(){v=new WeakMap}}}function Th(){const v={};return{get:function(e){if(void 0!==v[e.id])return v[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new ce,color:new Xt};break;case"SpotLight":t={position:new ce,direction:new ce,color:new Xt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new ce,color:new Xt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new ce,skyColor:new Xt,groundColor:new Xt};break;case"RectAreaLight":t={color:new Xt,position:new ce,halfWidth:new ce,halfHeight:new ce}}return v[e.id]=t,t}}}let Xn=0;function xm(v,e){return(e.castShadow?2:0)-(v.castShadow?2:0)+(e.map?1:0)-(v.map?1:0)}function Dm(v,e){const t=new Th,s=function Mm(){const v={};return{get:function(e){if(void 0!==v[e.id])return v[e.id];let t;switch(e.type){case"DirectionalLight":case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Oe};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Oe,shadowCameraNear:1,shadowCameraFar:1e3}}return v[e.id]=t,t}}}(),l={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let S=0;S<9;S++)l.probe.push(new ce);const h=new ce,g=new Nt,_=new Nt;return{setup:function b(S,A){let E=0,L=0,G=0;for(let ze=0;ze<9;ze++)l.probe[ze].set(0,0,0);let j=0,k=0,Y=0,Z=0,$=0,J=0,se=0,de=0,_e=0,K=0;S.sort(xm);const fe=!0!==A?Math.PI:1;for(let ze=0,bt=S.length;ze<bt;ze++){const je=S[ze],Se=je.color,at=je.intensity,Tt=je.distance,At=je.shadow&&je.shadow.map?je.shadow.map.texture:null;if(je.isAmbientLight)E+=Se.r*at*fe,L+=Se.g*at*fe,G+=Se.b*at*fe;else if(je.isLightProbe)for(let _t=0;_t<9;_t++)l.probe[_t].addScaledVector(je.sh.coefficients[_t],at);else if(je.isDirectionalLight){const _t=t.get(je);if(_t.color.copy(je.color).multiplyScalar(je.intensity*fe),je.castShadow){const Pt=je.shadow,xt=s.get(je);xt.shadowBias=Pt.bias,xt.shadowNormalBias=Pt.normalBias,xt.shadowRadius=Pt.radius,xt.shadowMapSize=Pt.mapSize,l.directionalShadow[j]=xt,l.directionalShadowMap[j]=At,l.directionalShadowMatrix[j]=je.shadow.matrix,J++}l.directional[j]=_t,j++}else if(je.isSpotLight){const _t=t.get(je);_t.position.setFromMatrixPosition(je.matrixWorld),_t.color.copy(Se).multiplyScalar(at*fe),_t.distance=Tt,_t.coneCos=Math.cos(je.angle),_t.penumbraCos=Math.cos(je.angle*(1-je.penumbra)),_t.decay=je.decay,l.spot[Y]=_t;const Pt=je.shadow;if(je.map&&(l.spotLightMap[_e]=je.map,_e++,Pt.updateMatrices(je),je.castShadow&&K++),l.spotLightMatrix[Y]=Pt.matrix,je.castShadow){const xt=s.get(je);xt.shadowBias=Pt.bias,xt.shadowNormalBias=Pt.normalBias,xt.shadowRadius=Pt.radius,xt.shadowMapSize=Pt.mapSize,l.spotShadow[Y]=xt,l.spotShadowMap[Y]=At,de++}Y++}else if(je.isRectAreaLight){const _t=t.get(je);_t.color.copy(Se).multiplyScalar(at),_t.halfWidth.set(.5*je.width,0,0),_t.halfHeight.set(0,.5*je.height,0),l.rectArea[Z]=_t,Z++}else if(je.isPointLight){const _t=t.get(je);if(_t.color.copy(je.color).multiplyScalar(je.intensity*fe),_t.distance=je.distance,_t.decay=je.decay,je.castShadow){const Pt=je.shadow,xt=s.get(je);xt.shadowBias=Pt.bias,xt.shadowNormalBias=Pt.normalBias,xt.shadowRadius=Pt.radius,xt.shadowMapSize=Pt.mapSize,xt.shadowCameraNear=Pt.camera.near,xt.shadowCameraFar=Pt.camera.far,l.pointShadow[k]=xt,l.pointShadowMap[k]=At,l.pointShadowMatrix[k]=je.shadow.matrix,se++}l.point[k]=_t,k++}else if(je.isHemisphereLight){const _t=t.get(je);_t.skyColor.copy(je.color).multiplyScalar(at*fe),_t.groundColor.copy(je.groundColor).multiplyScalar(at*fe),l.hemi[$]=_t,$++}}Z>0&&(e.isWebGL2||!0===v.has("OES_texture_float_linear")?(l.rectAreaLTC1=Ut.LTC_FLOAT_1,l.rectAreaLTC2=Ut.LTC_FLOAT_2):!0===v.has("OES_texture_half_float_linear")?(l.rectAreaLTC1=Ut.LTC_HALF_1,l.rectAreaLTC2=Ut.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),l.ambient[0]=E,l.ambient[1]=L,l.ambient[2]=G;const Te=l.hash;(Te.directionalLength!==j||Te.pointLength!==k||Te.spotLength!==Y||Te.rectAreaLength!==Z||Te.hemiLength!==$||Te.numDirectionalShadows!==J||Te.numPointShadows!==se||Te.numSpotShadows!==de||Te.numSpotMaps!==_e)&&(l.directional.length=j,l.spot.length=Y,l.rectArea.length=Z,l.point.length=k,l.hemi.length=$,l.directionalShadow.length=J,l.directionalShadowMap.length=J,l.pointShadow.length=se,l.pointShadowMap.length=se,l.spotShadow.length=de,l.spotShadowMap.length=de,l.directionalShadowMatrix.length=J,l.pointShadowMatrix.length=se,l.spotLightMatrix.length=de+_e-K,l.spotLightMap.length=_e,l.numSpotLightShadowsWithMaps=K,Te.directionalLength=j,Te.pointLength=k,Te.spotLength=Y,Te.rectAreaLength=Z,Te.hemiLength=$,Te.numDirectionalShadows=J,Te.numPointShadows=se,Te.numSpotShadows=de,Te.numSpotMaps=_e,l.version=Xn++)},setupView:function x(S,A){let E=0,L=0,G=0,j=0,k=0;const Y=A.matrixWorldInverse;for(let Z=0,$=S.length;Z<$;Z++){const J=S[Z];if(J.isDirectionalLight){const se=l.directional[E];se.direction.setFromMatrixPosition(J.matrixWorld),h.setFromMatrixPosition(J.target.matrixWorld),se.direction.sub(h),se.direction.transformDirection(Y),E++}else if(J.isSpotLight){const se=l.spot[G];se.position.setFromMatrixPosition(J.matrixWorld),se.position.applyMatrix4(Y),se.direction.setFromMatrixPosition(J.matrixWorld),h.setFromMatrixPosition(J.target.matrixWorld),se.direction.sub(h),se.direction.transformDirection(Y),G++}else if(J.isRectAreaLight){const se=l.rectArea[j];se.position.setFromMatrixPosition(J.matrixWorld),se.position.applyMatrix4(Y),_.identity(),g.copy(J.matrixWorld),g.premultiply(Y),_.extractRotation(g),se.halfWidth.set(.5*J.width,0,0),se.halfHeight.set(0,.5*J.height,0),se.halfWidth.applyMatrix4(_),se.halfHeight.applyMatrix4(_),j++}else if(J.isPointLight){const se=l.point[L];se.position.setFromMatrixPosition(J.matrixWorld),se.position.applyMatrix4(Y),L++}else if(J.isHemisphereLight){const se=l.hemi[k];se.direction.setFromMatrixPosition(J.matrixWorld),se.direction.transformDirection(Y),k++}}},state:l}}function kf(v,e){const t=new Dm(v,e),s=[],l=[];return{init:function h(){s.length=0,l.length=0},state:{lightsArray:s,shadowsArray:l,lights:t},setupLights:function b(A){t.setup(s,A)},setupLightsView:function x(A){t.setupView(s,A)},pushLight:function g(A){s.push(A)},pushShadow:function _(A){l.push(A)}}}function Mu(v,e){let t=new WeakMap;return{get:function s(h,g=0){const _=t.get(h);let b;return void 0===_?(b=new kf(v,e),t.set(h,[b])):g>=_.length?(b=new kf(v,e),_.push(b)):b=_[g],b},dispose:function l(){t=new WeakMap}}}class cc extends gr{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class Gc extends gr{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new ce,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const Mh="void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",Gf="uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}";function xh(v,e,t){let s=new Fc;const l=new Oe,h=new Oe,g=new Ii,_=new cc({depthPacking:Vl}),b=new Gc,x={},S=t.maxTextureSize,A={0:Ge,1:Xe,2:lt},E=new er({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Oe},radius:{value:4}},vertexShader:Mh,fragmentShader:Gf}),L=E.clone();L.defines.HORIZONTAL_PASS=1;const G=new di;G.setAttribute("position",new kr(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const j=new R(G,E),k=this;function Y(J,se){const de=e.update(j);E.defines.VSM_SAMPLES!==J.blurSamples&&(E.defines.VSM_SAMPLES=J.blurSamples,L.defines.VSM_SAMPLES=J.blurSamples,E.needsUpdate=!0,L.needsUpdate=!0),null===J.mapPass&&(J.mapPass=new rs(l.x,l.y)),E.uniforms.shadow_pass.value=J.map.texture,E.uniforms.resolution.value=J.mapSize,E.uniforms.radius.value=J.radius,v.setRenderTarget(J.mapPass),v.clear(),v.renderBufferDirect(se,null,de,E,j,null),L.uniforms.shadow_pass.value=J.mapPass.texture,L.uniforms.resolution.value=J.mapSize,L.uniforms.radius.value=J.radius,v.setRenderTarget(J.map),v.clear(),v.renderBufferDirect(se,null,de,L,j,null)}function Z(J,se,de,_e,K,fe){let Te=null;const ze=!0===de.isPointLight?J.customDistanceMaterial:J.customDepthMaterial;if(void 0!==ze)Te=ze;else if(Te=!0===de.isPointLight?b:_,v.localClippingEnabled&&!0===se.clipShadows&&Array.isArray(se.clippingPlanes)&&0!==se.clippingPlanes.length||se.displacementMap&&0!==se.displacementScale||se.alphaMap&&se.alphaTest>0||se.map&&se.alphaTest>0){const bt=Te.uuid,je=se.uuid;let Se=x[bt];void 0===Se&&(Se={},x[bt]=Se);let at=Se[je];void 0===at&&(at=Te.clone(),Se[je]=at),Te=at}return Te.visible=se.visible,Te.wireframe=se.wireframe,Te.side=fe===Gt?null!==se.shadowSide?se.shadowSide:se.side:null!==se.shadowSide?se.shadowSide:A[se.side],Te.alphaMap=se.alphaMap,Te.alphaTest=se.alphaTest,Te.map=se.map,Te.clipShadows=se.clipShadows,Te.clippingPlanes=se.clippingPlanes,Te.clipIntersection=se.clipIntersection,Te.displacementMap=se.displacementMap,Te.displacementScale=se.displacementScale,Te.displacementBias=se.displacementBias,Te.wireframeLinewidth=se.wireframeLinewidth,Te.linewidth=se.linewidth,!0===de.isPointLight&&!0===Te.isMeshDistanceMaterial&&(Te.referencePosition.setFromMatrixPosition(de.matrixWorld),Te.nearDistance=_e,Te.farDistance=K),Te}function $(J,se,de,_e,K){if(!1===J.visible)return;if(J.layers.test(se.layers)&&(J.isMesh||J.isLine||J.isPoints)&&(J.castShadow||J.receiveShadow&&K===Gt)&&(!J.frustumCulled||s.intersectsObject(J))){J.modelViewMatrix.multiplyMatrices(de.matrixWorldInverse,J.matrixWorld);const ze=e.update(J),bt=J.material;if(Array.isArray(bt)){const je=ze.groups;for(let Se=0,at=je.length;Se<at;Se++){const Tt=je[Se],At=bt[Tt.materialIndex];if(At&&At.visible){const _t=Z(J,At,_e,de.near,de.far,K);v.renderBufferDirect(de,null,ze,_t,J,Tt)}}}else if(bt.visible){const je=Z(J,bt,_e,de.near,de.far,K);v.renderBufferDirect(de,null,ze,je,J,null)}}const Te=J.children;for(let ze=0,bt=Te.length;ze<bt;ze++)$(Te[ze],se,de,_e,K)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=He,this.render=function(J,se,de){if(!1===k.enabled||!1===k.autoUpdate&&!1===k.needsUpdate||0===J.length)return;const _e=v.getRenderTarget(),K=v.getActiveCubeFace(),fe=v.getActiveMipmapLevel(),Te=v.state;Te.setBlending(Qt),Te.buffers.color.setClear(1,1,1,1),Te.buffers.depth.setTest(!0),Te.setScissorTest(!1);for(let ze=0,bt=J.length;ze<bt;ze++){const je=J[ze],Se=je.shadow;if(void 0===Se){console.warn("THREE.WebGLShadowMap:",je,"has no shadow.");continue}if(!1===Se.autoUpdate&&!1===Se.needsUpdate)continue;l.copy(Se.mapSize);const at=Se.getFrameExtents();l.multiply(at),h.copy(Se.mapSize),(l.x>S||l.y>S)&&(l.x>S&&(h.x=Math.floor(S/at.x),l.x=h.x*at.x,Se.mapSize.x=h.x),l.y>S&&(h.y=Math.floor(S/at.y),l.y=h.y*at.y,Se.mapSize.y=h.y)),null===Se.map&&(Se.map=new rs(l.x,l.y,this.type!==Gt?{minFilter:Bn,magFilter:Bn}:{}),Se.map.texture.name=je.name+".shadowMap",Se.camera.updateProjectionMatrix()),v.setRenderTarget(Se.map),v.clear();const Tt=Se.getViewportCount();for(let At=0;At<Tt;At++){const _t=Se.getViewport(At);g.set(h.x*_t.x,h.y*_t.y,h.x*_t.z,h.y*_t.w),Te.viewport(g),Se.updateMatrices(je,At),s=Se.getFrustum(),$(se,de,Se.camera,je,this.type)}!0!==Se.isPointLightShadow&&this.type===Gt&&Y(Se,de),Se.needsUpdate=!1}k.needsUpdate=!1,v.setRenderTarget(_e,K,fe)}}function Vc(v,e,t){const s=t.isWebGL2,_=new function l(){let xe=!1;const ut=new Ii;let Et=null;const pn=new Ii(0,0,0,0);return{setMask:function(In){Et!==In&&!xe&&(v.colorMask(In,In,In,In),Et=In)},setLocked:function(In){xe=In},setClear:function(In,Zi,ks,Mo,kd){!0===kd&&(In*=Mo,Zi*=Mo,ks*=Mo),ut.set(In,Zi,ks,Mo),!1===pn.equals(ut)&&(v.clearColor(In,Zi,ks,Mo),pn.copy(ut))},reset:function(){xe=!1,Et=null,pn.set(-1,0,0,0)}}},b=new function h(){let xe=!1,ut=null,Et=null,pn=null;return{setTest:function(In){In?qn(2929):xn(2929)},setMask:function(In){ut!==In&&!xe&&(v.depthMask(In),ut=In)},setFunc:function(In){if(Et!==In){switch(In){case tr:v.depthFunc(512);break;case Pn:v.depthFunc(519);break;case Wn:v.depthFunc(513);break;case Wt:v.depthFunc(515);break;case Ri:v.depthFunc(514);break;case Es:v.depthFunc(518);break;case Sn:v.depthFunc(516);break;case wn:v.depthFunc(517);break;default:v.depthFunc(515)}Et=In}},setLocked:function(In){xe=In},setClear:function(In){pn!==In&&(v.clearDepth(In),pn=In)},reset:function(){xe=!1,ut=null,Et=null,pn=null}}},x=new function g(){let xe=!1,ut=null,Et=null,pn=null,In=null,Zi=null,ks=null,Mo=null,kd=null;return{setTest:function(Vr){xe||(Vr?qn(2960):xn(2960))},setMask:function(Vr){ut!==Vr&&!xe&&(v.stencilMask(Vr),ut=Vr)},setFunc:function(Vr,Kc,dl){(Et!==Vr||pn!==Kc||In!==dl)&&(v.stencilFunc(Vr,Kc,dl),Et=Vr,pn=Kc,In=dl)},setOp:function(Vr,Kc,dl){(Zi!==Vr||ks!==Kc||Mo!==dl)&&(v.stencilOp(Vr,Kc,dl),Zi=Vr,ks=Kc,Mo=dl)},setLocked:function(Vr){xe=Vr},setClear:function(Vr){kd!==Vr&&(v.clearStencil(Vr),kd=Vr)},reset:function(){xe=!1,ut=null,Et=null,pn=null,In=null,Zi=null,ks=null,Mo=null,kd=null}}},S=new WeakMap,A=new WeakMap;let E={},L={},G=new WeakMap,j=[],k=null,Y=!1,Z=null,$=null,J=null,se=null,de=null,_e=null,K=null,fe=!1,Te=null,ze=null,bt=null,je=null,Se=null;const at=v.getParameter(35661);let Tt=!1,At=0;const _t=v.getParameter(7938);-1!==_t.indexOf("WebGL")?(At=parseFloat(/^WebGL (\d)/.exec(_t)[1]),Tt=At>=1):-1!==_t.indexOf("OpenGL ES")&&(At=parseFloat(/^OpenGL ES (\d)/.exec(_t)[1]),Tt=At>=2);let Pt=null,xt={};const st=v.getParameter(3088),tt=v.getParameter(2978),Ht=(new Ii).fromArray(st),kt=(new Ii).fromArray(tt);function on(xe,ut,Et){const pn=new Uint8Array(4),In=v.createTexture();v.bindTexture(xe,In),v.texParameteri(xe,10241,9728),v.texParameteri(xe,10240,9728);for(let Zi=0;Zi<Et;Zi++)v.texImage2D(ut+Zi,0,6408,1,1,0,6408,5121,pn);return In}const ht={};function qn(xe){!0!==E[xe]&&(v.enable(xe),E[xe]=!0)}function xn(xe){!1!==E[xe]&&(v.disable(xe),E[xe]=!1)}ht[3553]=on(3553,3553,1),ht[34067]=on(34067,34069,6),_.setClear(0,0,0,1),b.setClear(1),x.setClear(0),qn(2929),b.setFunc(Wt),en(!1),li(We),qn(2884),zt(Qt);const vt={[Ot]:32774,[rn]:32778,[Zt]:32779};if(s)vt[vn]=32775,vt[Jt]=32776;else{const xe=e.get("EXT_blend_minmax");null!==xe&&(vt[vn]=xe.MIN_EXT,vt[Jt]=xe.MAX_EXT)}const yt={[Kt]:0,[yn]:1,[fn]:768,[Le]:770,[ui]:776,[Dt]:774,[nt]:772,[$e]:769,[Je]:771,[Cn]:775,[wt]:773};function zt(xe,ut,Et,pn,In,Zi,ks,Mo){if(xe!==Qt){if(!1===Y&&(qn(3042),Y=!0),xe===ke)In=In||ut,Zi=Zi||Et,ks=ks||pn,(ut!==$||In!==de)&&(v.blendEquationSeparate(vt[ut],vt[In]),$=ut,de=In),(Et!==J||pn!==se||Zi!==_e||ks!==K)&&(v.blendFuncSeparate(yt[Et],yt[pn],yt[Zi],yt[ks]),J=Et,se=pn,_e=Zi,K=ks),Z=xe,fe=!1;else if(xe!==Z||Mo!==fe){if(($!==Ot||de!==Ot)&&(v.blendEquation(32774),$=Ot,de=Ot),Mo)switch(xe){case ti:v.blendFuncSeparate(1,771,1,771);break;case an:v.blendFunc(1,1);break;case Me:v.blendFuncSeparate(0,769,0,1);break;case ot:v.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",xe)}else switch(xe){case ti:v.blendFuncSeparate(770,771,1,771);break;case an:v.blendFunc(770,1);break;case Me:v.blendFuncSeparate(0,769,0,1);break;case ot:v.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",xe)}J=null,se=null,_e=null,K=null,Z=xe,fe=Mo}}else!0===Y&&(xn(3042),Y=!1)}function en(xe){Te!==xe&&(v.frontFace(xe?2304:2305),Te=xe)}function li(xe){xe!==Qe?(qn(2884),xe!==ze&&v.cullFace(xe===We?1029:xe===St?1028:1032)):xn(2884),ze=xe}function kn(xe,ut,Et){xe?(qn(32823),(je!==ut||Se!==Et)&&(v.polygonOffset(ut,Et),je=ut,Se=Et)):xn(32823)}return{buffers:{color:_,depth:b,stencil:x},enable:qn,disable:xn,bindFramebuffer:function Yn(xe,ut){return L[xe]!==ut&&(v.bindFramebuffer(xe,ut),L[xe]=ut,s&&(36009===xe&&(L[36160]=ut),36160===xe&&(L[36009]=ut)),!0)},drawBuffers:function cn(xe,ut){let Et=j,pn=!1;if(xe)if(Et=G.get(ut),void 0===Et&&(Et=[],G.set(ut,Et)),xe.isWebGLMultipleRenderTargets){const In=xe.texture;if(Et.length!==In.length||36064!==Et[0]){for(let Zi=0,ks=In.length;Zi<ks;Zi++)Et[Zi]=36064+Zi;Et.length=In.length,pn=!0}}else 36064!==Et[0]&&(Et[0]=36064,pn=!0);else 1029!==Et[0]&&(Et[0]=1029,pn=!0);pn&&(t.isWebGL2?v.drawBuffers(Et):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(Et))},useProgram:function Mi(xe){return k!==xe&&(v.useProgram(xe),k=xe,!0)},setBlending:zt,setMaterial:function gn(xe,ut){xe.side===lt?xn(2884):qn(2884);let Et=xe.side===Ge;ut&&(Et=!Et),en(Et),xe.blending===ti&&!1===xe.transparent?zt(Qt):zt(xe.blending,xe.blendEquation,xe.blendSrc,xe.blendDst,xe.blendEquationAlpha,xe.blendSrcAlpha,xe.blendDstAlpha,xe.premultipliedAlpha),b.setFunc(xe.depthFunc),b.setTest(xe.depthTest),b.setMask(xe.depthWrite),_.setMask(xe.colorWrite);const pn=xe.stencilWrite;x.setTest(pn),pn&&(x.setMask(xe.stencilWriteMask),x.setFunc(xe.stencilFunc,xe.stencilRef,xe.stencilFuncMask),x.setOp(xe.stencilFail,xe.stencilZFail,xe.stencilZPass)),kn(xe.polygonOffset,xe.polygonOffsetFactor,xe.polygonOffsetUnits),!0===xe.alphaToCoverage?qn(32926):xn(32926)},setFlipSided:en,setCullFace:li,setLineWidth:function Jn(xe){xe!==bt&&(Tt&&v.lineWidth(xe),bt=xe)},setPolygonOffset:kn,setScissorTest:function yr(xe){xe?qn(3089):xn(3089)},activeTexture:function lr(xe){void 0===xe&&(xe=33984+at-1),Pt!==xe&&(v.activeTexture(xe),Pt=xe)},bindTexture:function me(xe,ut,Et){void 0===Et&&(Et=null===Pt?33984+at-1:Pt);let pn=xt[Et];void 0===pn&&(pn={type:void 0,texture:void 0},xt[Et]=pn),(pn.type!==xe||pn.texture!==ut)&&(Pt!==Et&&(v.activeTexture(Et),Pt=Et),v.bindTexture(xe,ut||ht[xe]),pn.type=xe,pn.texture=ut)},unbindTexture:function re(){const xe=xt[Pt];void 0!==xe&&void 0!==xe.type&&(v.bindTexture(xe.type,null),xe.type=void 0,xe.texture=void 0)},compressedTexImage2D:function qe(){try{v.compressedTexImage2D.apply(v,arguments)}catch(xe){console.error("THREE.WebGLState:",xe)}},compressedTexImage3D:function Ct(){try{v.compressedTexImage3D.apply(v,arguments)}catch(xe){console.error("THREE.WebGLState:",xe)}},texImage2D:function Zn(){try{v.texImage2D.apply(v,arguments)}catch(xe){console.error("THREE.WebGLState:",xe)}},texImage3D:function En(){try{v.texImage3D.apply(v,arguments)}catch(xe){console.error("THREE.WebGLState:",xe)}},updateUBOMapping:function Wi(xe,ut){let Et=A.get(ut);void 0===Et&&(Et=new WeakMap,A.set(ut,Et));let pn=Et.get(xe);void 0===pn&&(pn=v.getUniformBlockIndex(ut,xe.name),Et.set(xe,pn))},uniformBlockBinding:function Gr(xe,ut){const pn=A.get(ut).get(xe);S.get(ut)!==pn&&(v.uniformBlockBinding(ut,pn,xe.__bindingPointIndex),S.set(ut,pn))},texStorage2D:function gt(){try{v.texStorage2D.apply(v,arguments)}catch(xe){console.error("THREE.WebGLState:",xe)}},texStorage3D:function Ln(){try{v.texStorage3D.apply(v,arguments)}catch(xe){console.error("THREE.WebGLState:",xe)}},texSubImage2D:function Bt(){try{v.texSubImage2D.apply(v,arguments)}catch(xe){console.error("THREE.WebGLState:",xe)}},texSubImage3D:function ln(){try{v.texSubImage3D.apply(v,arguments)}catch(xe){console.error("THREE.WebGLState:",xe)}},compressedTexSubImage2D:function ei(){try{v.compressedTexSubImage2D.apply(v,arguments)}catch(xe){console.error("THREE.WebGLState:",xe)}},compressedTexSubImage3D:function un(){try{v.compressedTexSubImage3D.apply(v,arguments)}catch(xe){console.error("THREE.WebGLState:",xe)}},scissor:function Un(xe){!1===Ht.equals(xe)&&(v.scissor(xe.x,xe.y,xe.z,xe.w),Ht.copy(xe))},viewport:function Gn(xe){!1===kt.equals(xe)&&(v.viewport(xe.x,xe.y,xe.z,xe.w),kt.copy(xe))},reset:function eo(){v.disable(3042),v.disable(2884),v.disable(2929),v.disable(32823),v.disable(3089),v.disable(2960),v.disable(32926),v.blendEquation(32774),v.blendFunc(1,0),v.blendFuncSeparate(1,0,1,0),v.colorMask(!0,!0,!0,!0),v.clearColor(0,0,0,0),v.depthMask(!0),v.depthFunc(513),v.clearDepth(1),v.stencilMask(4294967295),v.stencilFunc(519,0,4294967295),v.stencilOp(7680,7680,7680),v.clearStencil(0),v.cullFace(1029),v.frontFace(2305),v.polygonOffset(0,0),v.activeTexture(33984),v.bindFramebuffer(36160,null),!0===s&&(v.bindFramebuffer(36009,null),v.bindFramebuffer(36008,null)),v.useProgram(null),v.lineWidth(1),v.scissor(0,0,v.canvas.width,v.canvas.height),v.viewport(0,0,v.canvas.width,v.canvas.height),E={},Pt=null,xt={},L={},G=new WeakMap,j=[],k=null,Y=!1,Z=null,$=null,J=null,se=null,de=null,_e=null,K=null,fe=!1,Te=null,ze=null,bt=null,je=null,Se=null,Ht.set(0,0,v.canvas.width,v.canvas.height),kt.set(0,0,v.canvas.width,v.canvas.height),_.reset(),b.reset(),x.reset()}}}function u_(v,e,t,s,l,h,g){const _=l.isWebGL2,b=l.maxTextures,x=l.maxCubemapSize,S=l.maxTextureSize,A=l.maxSamples,E=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,L=!(typeof navigator>"u")&&/OculusBrowser/g.test(navigator.userAgent),G=new WeakMap;let j;const k=new WeakMap;let Y=!1;try{Y=typeof OffscreenCanvas<"u"&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch{}function Z(me,re){return Y?new OffscreenCanvas(me,re):Ta("canvas")}function $(me,re,qe,Ct){let Bt=1;if((me.width>Ct||me.height>Ct)&&(Bt=Ct/Math.max(me.width,me.height)),Bt<1||!0===re){if(typeof HTMLImageElement<"u"&&me instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&me instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&me instanceof ImageBitmap){const ln=re?Ps:Math.floor,ei=ln(Bt*me.width),un=ln(Bt*me.height);void 0===j&&(j=Z(ei,un));const gt=qe?Z(ei,un):j;return gt.width=ei,gt.height=un,gt.getContext("2d").drawImage(me,0,0,ei,un),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+me.width+"x"+me.height+") to ("+ei+"x"+un+")."),gt}return"data"in me&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+me.width+"x"+me.height+")."),me}return me}function J(me){return Br(me.width)&&Br(me.height)}function de(me,re){return me.generateMipmaps&&re&&me.minFilter!==Bn&&me.minFilter!==mn}function _e(me){v.generateMipmap(me)}function K(me,re,qe,Ct,Bt=!1){if(!1===_)return re;if(null!==me){if(void 0!==v[me])return v[me];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+me+"'")}let ln=re;return 6403===re&&(5126===qe&&(ln=33326),5131===qe&&(ln=33325),5121===qe&&(ln=33321)),33319===re&&(5126===qe&&(ln=33328),5131===qe&&(ln=33327),5121===qe&&(ln=33323)),6408===re&&(5126===qe&&(ln=34836),5131===qe&&(ln=34842),5121===qe&&(ln=Ct===Dn&&!1===Bt?35907:32856),32819===qe&&(ln=32854),32820===qe&&(ln=32855)),(33325===ln||33326===ln||33327===ln||33328===ln||34842===ln||34836===ln)&&e.get("EXT_color_buffer_float"),ln}function fe(me,re,qe){return!0===de(me,qe)||me.isFramebufferTexture&&me.minFilter!==Bn&&me.minFilter!==mn?Math.log2(Math.max(re.width,re.height))+1:void 0!==me.mipmaps&&me.mipmaps.length>0?me.mipmaps.length:me.isCompressedTexture&&Array.isArray(me.image)?re.mipmaps.length:1}function Te(me){return me===Bn||me===Hr||me===nr?9728:9729}function ze(me){const re=me.target;re.removeEventListener("dispose",ze),function je(me){const re=s.get(me);if(void 0===re.__webglInit)return;const qe=me.source,Ct=k.get(qe);if(Ct){const Bt=Ct[re.__cacheKey];Bt.usedTimes--,0===Bt.usedTimes&&Se(me),0===Object.keys(Ct).length&&k.delete(qe)}s.remove(me)}(re),re.isVideoTexture&&G.delete(re)}function bt(me){const re=me.target;re.removeEventListener("dispose",bt),function at(me){const re=me.texture,qe=s.get(me),Ct=s.get(re);if(void 0!==Ct.__webglTexture&&(v.deleteTexture(Ct.__webglTexture),g.memory.textures--),me.depthTexture&&me.depthTexture.dispose(),me.isWebGLCubeRenderTarget)for(let Bt=0;Bt<6;Bt++)v.deleteFramebuffer(qe.__webglFramebuffer[Bt]),qe.__webglDepthbuffer&&v.deleteRenderbuffer(qe.__webglDepthbuffer[Bt]);else{if(v.deleteFramebuffer(qe.__webglFramebuffer),qe.__webglDepthbuffer&&v.deleteRenderbuffer(qe.__webglDepthbuffer),qe.__webglMultisampledFramebuffer&&v.deleteFramebuffer(qe.__webglMultisampledFramebuffer),qe.__webglColorRenderbuffer)for(let Bt=0;Bt<qe.__webglColorRenderbuffer.length;Bt++)qe.__webglColorRenderbuffer[Bt]&&v.deleteRenderbuffer(qe.__webglColorRenderbuffer[Bt]);qe.__webglDepthRenderbuffer&&v.deleteRenderbuffer(qe.__webglDepthRenderbuffer)}if(me.isWebGLMultipleRenderTargets)for(let Bt=0,ln=re.length;Bt<ln;Bt++){const ei=s.get(re[Bt]);ei.__webglTexture&&(v.deleteTexture(ei.__webglTexture),g.memory.textures--),s.remove(re[Bt])}s.remove(re),s.remove(me)}(re)}function Se(me){const re=s.get(me);v.deleteTexture(re.__webglTexture),delete k.get(me.source)[re.__cacheKey],g.memory.textures--}let Tt=0;function xt(me,re){const qe=s.get(me);if(me.isVideoTexture&&function yr(me){const re=g.render.frame;G.get(me)!==re&&(G.set(me,re),me.update())}(me),!1===me.isRenderTargetTexture&&me.version>0&&qe.__version!==me.version){const Ct=me.image;if(null===Ct)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==Ct.complete)return void xn(qe,me,re);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}t.bindTexture(3553,qe.__webglTexture,33984+re)}const kt={[tn]:10497,[Ye]:33071,[fa]:33648},on={[Bn]:9728,[Hr]:9984,[nr]:9986,[mn]:9729,[Yo]:9985,[xo]:9987};function ht(me,re,qe){if(qe?(v.texParameteri(me,10242,kt[re.wrapS]),v.texParameteri(me,10243,kt[re.wrapT]),(32879===me||35866===me)&&v.texParameteri(me,32882,kt[re.wrapR]),v.texParameteri(me,10240,on[re.magFilter]),v.texParameteri(me,10241,on[re.minFilter])):(v.texParameteri(me,10242,33071),v.texParameteri(me,10243,33071),(32879===me||35866===me)&&v.texParameteri(me,32882,33071),(re.wrapS!==Ye||re.wrapT!==Ye)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),v.texParameteri(me,10240,Te(re.magFilter)),v.texParameteri(me,10241,Te(re.minFilter)),re.minFilter!==Bn&&re.minFilter!==mn&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===e.has("EXT_texture_filter_anisotropic")){const Ct=e.get("EXT_texture_filter_anisotropic");if(re.magFilter===Bn||re.minFilter!==nr&&re.minFilter!==xo||re.type===br&&!1===e.has("OES_texture_float_linear")||!1===_&&re.type===$s&&!1===e.has("OES_texture_half_float_linear"))return;(re.anisotropy>1||s.get(re).__currentAnisotropy)&&(v.texParameterf(me,Ct.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(re.anisotropy,l.getMaxAnisotropy())),s.get(re).__currentAnisotropy=re.anisotropy)}}function qn(me,re){let qe=!1;void 0===me.__webglInit&&(me.__webglInit=!0,re.addEventListener("dispose",ze));const Ct=re.source;let Bt=k.get(Ct);void 0===Bt&&(Bt={},k.set(Ct,Bt));const ln=function Pt(me){const re=[];return re.push(me.wrapS),re.push(me.wrapT),re.push(me.wrapR||0),re.push(me.magFilter),re.push(me.minFilter),re.push(me.anisotropy),re.push(me.internalFormat),re.push(me.format),re.push(me.type),re.push(me.generateMipmaps),re.push(me.premultiplyAlpha),re.push(me.flipY),re.push(me.unpackAlignment),re.push(me.encoding),re.join()}(re);if(ln!==me.__cacheKey){void 0===Bt[ln]&&(Bt[ln]={texture:v.createTexture(),usedTimes:0},g.memory.textures++,qe=!0),Bt[ln].usedTimes++;const ei=Bt[me.__cacheKey];void 0!==ei&&(Bt[me.__cacheKey].usedTimes--,0===ei.usedTimes&&Se(re)),me.__cacheKey=ln,me.__webglTexture=Bt[ln].texture}return qe}function xn(me,re,qe){let Ct=3553;(re.isDataArrayTexture||re.isCompressedArrayTexture)&&(Ct=35866),re.isData3DTexture&&(Ct=32879);const Bt=qn(me,re),ln=re.source;t.bindTexture(Ct,me.__webglTexture,33984+qe);const ei=s.get(ln);if(ln.version!==ei.__version||!0===Bt){t.activeTexture(33984+qe),v.pixelStorei(37440,re.flipY),v.pixelStorei(37441,re.premultiplyAlpha),v.pixelStorei(3317,re.unpackAlignment),v.pixelStorei(37443,0);const un=function se(me){return!_&&(me.wrapS!==Ye||me.wrapT!==Ye||me.minFilter!==Bn&&me.minFilter!==mn)}(re)&&!1===J(re.image);let gt=$(re.image,un,!1,S);gt=lr(re,gt);const Ln=J(gt)||_,Zn=h.convert(re.format,re.encoding);let Gn,En=h.convert(re.type),Un=K(re.internalFormat,Zn,En,re.encoding,re.isVideoTexture);ht(Ct,re,Ln);const Wi=re.mipmaps,Gr=_&&!0!==re.isVideoTexture,eo=void 0===ei.__version||!0===Bt,xe=fe(re,gt,Ln);if(re.isDepthTexture)Un=6402,_?Un=re.type===br?36012:re.type===yi?33190:re.type===co?35056:33189:re.type===br&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),re.format===Re&&6402===Un&&re.type!==es&&re.type!==yi&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),re.type=yi,En=h.convert(re.type)),re.format===Fe&&6402===Un&&(Un=34041,re.type!==co&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),re.type=co,En=h.convert(re.type))),eo&&(Gr?t.texStorage2D(3553,1,Un,gt.width,gt.height):t.texImage2D(3553,0,Un,gt.width,gt.height,0,Zn,En,null));else if(re.isDataTexture)if(Wi.length>0&&Ln){Gr&&eo&&t.texStorage2D(3553,xe,Un,Wi[0].width,Wi[0].height);for(let ut=0,Et=Wi.length;ut<Et;ut++)Gn=Wi[ut],Gr?t.texSubImage2D(3553,ut,0,0,Gn.width,Gn.height,Zn,En,Gn.data):t.texImage2D(3553,ut,Un,Gn.width,Gn.height,0,Zn,En,Gn.data);re.generateMipmaps=!1}else Gr?(eo&&t.texStorage2D(3553,xe,Un,gt.width,gt.height),t.texSubImage2D(3553,0,0,0,gt.width,gt.height,Zn,En,gt.data)):t.texImage2D(3553,0,Un,gt.width,gt.height,0,Zn,En,gt.data);else if(re.isCompressedTexture)if(re.isCompressedArrayTexture){Gr&&eo&&t.texStorage3D(35866,xe,Un,Wi[0].width,Wi[0].height,gt.depth);for(let ut=0,Et=Wi.length;ut<Et;ut++)Gn=Wi[ut],re.format!==we?null!==Zn?Gr?t.compressedTexSubImage3D(35866,ut,0,0,0,Gn.width,Gn.height,gt.depth,Zn,Gn.data,0,0):t.compressedTexImage3D(35866,ut,Un,Gn.width,Gn.height,gt.depth,0,Gn.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Gr?t.texSubImage3D(35866,ut,0,0,0,Gn.width,Gn.height,gt.depth,Zn,En,Gn.data):t.texImage3D(35866,ut,Un,Gn.width,Gn.height,gt.depth,0,Zn,En,Gn.data)}else{Gr&&eo&&t.texStorage2D(3553,xe,Un,Wi[0].width,Wi[0].height);for(let ut=0,Et=Wi.length;ut<Et;ut++)Gn=Wi[ut],re.format!==we?null!==Zn?Gr?t.compressedTexSubImage2D(3553,ut,0,0,Gn.width,Gn.height,Zn,Gn.data):t.compressedTexImage2D(3553,ut,Un,Gn.width,Gn.height,0,Gn.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Gr?t.texSubImage2D(3553,ut,0,0,Gn.width,Gn.height,Zn,En,Gn.data):t.texImage2D(3553,ut,Un,Gn.width,Gn.height,0,Zn,En,Gn.data)}else if(re.isDataArrayTexture)Gr?(eo&&t.texStorage3D(35866,xe,Un,gt.width,gt.height,gt.depth),t.texSubImage3D(35866,0,0,0,0,gt.width,gt.height,gt.depth,Zn,En,gt.data)):t.texImage3D(35866,0,Un,gt.width,gt.height,gt.depth,0,Zn,En,gt.data);else if(re.isData3DTexture)Gr?(eo&&t.texStorage3D(32879,xe,Un,gt.width,gt.height,gt.depth),t.texSubImage3D(32879,0,0,0,0,gt.width,gt.height,gt.depth,Zn,En,gt.data)):t.texImage3D(32879,0,Un,gt.width,gt.height,gt.depth,0,Zn,En,gt.data);else if(re.isFramebufferTexture){if(eo)if(Gr)t.texStorage2D(3553,xe,Un,gt.width,gt.height);else{let ut=gt.width,Et=gt.height;for(let pn=0;pn<xe;pn++)t.texImage2D(3553,pn,Un,ut,Et,0,Zn,En,null),ut>>=1,Et>>=1}}else if(Wi.length>0&&Ln){Gr&&eo&&t.texStorage2D(3553,xe,Un,Wi[0].width,Wi[0].height);for(let ut=0,Et=Wi.length;ut<Et;ut++)Gn=Wi[ut],Gr?t.texSubImage2D(3553,ut,0,0,Zn,En,Gn):t.texImage2D(3553,ut,Un,Zn,En,Gn);re.generateMipmaps=!1}else Gr?(eo&&t.texStorage2D(3553,xe,Un,gt.width,gt.height),t.texSubImage2D(3553,0,0,0,Zn,En,gt)):t.texImage2D(3553,0,Un,Zn,En,gt);de(re,Ln)&&_e(Ct),ei.__version=ln.version,re.onUpdate&&re.onUpdate(re)}me.__version=re.version}function cn(me,re,qe,Ct,Bt){const ln=h.convert(qe.format,qe.encoding),ei=h.convert(qe.type),un=K(qe.internalFormat,ln,ei,qe.encoding);s.get(re).__hasExternalTextures||(32879===Bt||35866===Bt?t.texImage3D(Bt,0,un,re.width,re.height,re.depth,0,ln,ei,null):t.texImage2D(Bt,0,un,re.width,re.height,0,ln,ei,null)),t.bindFramebuffer(36160,me),kn(re)?E.framebufferTexture2DMultisampleEXT(36160,Ct,Bt,s.get(qe).__webglTexture,0,Jn(re)):(3553===Bt||Bt>=34069&&Bt<=34074)&&v.framebufferTexture2D(36160,Ct,Bt,s.get(qe).__webglTexture,0),t.bindFramebuffer(36160,null)}function Mi(me,re,qe){if(v.bindRenderbuffer(36161,me),re.depthBuffer&&!re.stencilBuffer){let Ct=33189;if(qe||kn(re)){const Bt=re.depthTexture;Bt&&Bt.isDepthTexture&&(Bt.type===br?Ct=36012:Bt.type===yi&&(Ct=33190));const ln=Jn(re);kn(re)?E.renderbufferStorageMultisampleEXT(36161,ln,Ct,re.width,re.height):v.renderbufferStorageMultisample(36161,ln,Ct,re.width,re.height)}else v.renderbufferStorage(36161,Ct,re.width,re.height);v.framebufferRenderbuffer(36160,36096,36161,me)}else if(re.depthBuffer&&re.stencilBuffer){const Ct=Jn(re);qe&&!1===kn(re)?v.renderbufferStorageMultisample(36161,Ct,35056,re.width,re.height):kn(re)?E.renderbufferStorageMultisampleEXT(36161,Ct,35056,re.width,re.height):v.renderbufferStorage(36161,34041,re.width,re.height),v.framebufferRenderbuffer(36160,33306,36161,me)}else{const Ct=!0===re.isWebGLMultipleRenderTargets?re.texture:[re.texture];for(let Bt=0;Bt<Ct.length;Bt++){const ln=Ct[Bt],ei=h.convert(ln.format,ln.encoding),un=h.convert(ln.type),gt=K(ln.internalFormat,ei,un,ln.encoding),Ln=Jn(re);qe&&!1===kn(re)?v.renderbufferStorageMultisample(36161,Ln,gt,re.width,re.height):kn(re)?E.renderbufferStorageMultisampleEXT(36161,Ln,gt,re.width,re.height):v.renderbufferStorage(36161,gt,re.width,re.height)}}v.bindRenderbuffer(36161,null)}function yt(me){const re=s.get(me),qe=!0===me.isWebGLCubeRenderTarget;if(me.depthTexture&&!re.__autoAllocateDepthBuffer){if(qe)throw new Error("target.depthTexture not supported in Cube render targets");!function vt(me,re){if(re&&re.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,me),!re.depthTexture||!re.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!s.get(re.depthTexture).__webglTexture||re.depthTexture.image.width!==re.width||re.depthTexture.image.height!==re.height)&&(re.depthTexture.image.width=re.width,re.depthTexture.image.height=re.height,re.depthTexture.needsUpdate=!0),xt(re.depthTexture,0);const Ct=s.get(re.depthTexture).__webglTexture,Bt=Jn(re);if(re.depthTexture.format===Re)kn(re)?E.framebufferTexture2DMultisampleEXT(36160,36096,3553,Ct,0,Bt):v.framebufferTexture2D(36160,36096,3553,Ct,0);else{if(re.depthTexture.format!==Fe)throw new Error("Unknown depthTexture format");kn(re)?E.framebufferTexture2DMultisampleEXT(36160,33306,3553,Ct,0,Bt):v.framebufferTexture2D(36160,33306,3553,Ct,0)}}(re.__webglFramebuffer,me)}else if(qe){re.__webglDepthbuffer=[];for(let Ct=0;Ct<6;Ct++)t.bindFramebuffer(36160,re.__webglFramebuffer[Ct]),re.__webglDepthbuffer[Ct]=v.createRenderbuffer(),Mi(re.__webglDepthbuffer[Ct],me,!1)}else t.bindFramebuffer(36160,re.__webglFramebuffer),re.__webglDepthbuffer=v.createRenderbuffer(),Mi(re.__webglDepthbuffer,me,!1);t.bindFramebuffer(36160,null)}function Jn(me){return Math.min(A,me.samples)}function kn(me){const re=s.get(me);return _&&me.samples>0&&!0===e.has("WEBGL_multisampled_render_to_texture")&&!1!==re.__useRenderToTexture}function lr(me,re){const qe=me.encoding,Ct=me.format,Bt=me.type;return!0===me.isCompressedTexture||!0===me.isVideoTexture||me.format===ja||qe!==bs&&(qe===Dn?!1===_?!0===e.has("EXT_sRGB")&&Ct===we?(me.format=ja,me.minFilter=mn,me.generateMipmaps=!1):re=Ao.sRGBToLinear(re):(Ct!==we||Bt!==Hs)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",qe)),re}this.allocateTextureUnit=function _t(){const me=Tt;return me>=b&&console.warn("THREE.WebGLTextures: Trying to use "+me+" texture units while this GPU supports only "+b),Tt+=1,me},this.resetTextureUnits=function At(){Tt=0},this.setTexture2D=xt,this.setTexture2DArray=function st(me,re){const qe=s.get(me);me.version>0&&qe.__version!==me.version?xn(qe,me,re):t.bindTexture(35866,qe.__webglTexture,33984+re)},this.setTexture3D=function tt(me,re){const qe=s.get(me);me.version>0&&qe.__version!==me.version?xn(qe,me,re):t.bindTexture(32879,qe.__webglTexture,33984+re)},this.setTextureCube=function Ht(me,re){const qe=s.get(me);me.version>0&&qe.__version!==me.version?function Yn(me,re,qe){if(6!==re.image.length)return;const Ct=qn(me,re),Bt=re.source;t.bindTexture(34067,me.__webglTexture,33984+qe);const ln=s.get(Bt);if(Bt.version!==ln.__version||!0===Ct){t.activeTexture(33984+qe),v.pixelStorei(37440,re.flipY),v.pixelStorei(37441,re.premultiplyAlpha),v.pixelStorei(3317,re.unpackAlignment),v.pixelStorei(37443,0);const ei=re.isCompressedTexture||re.image[0].isCompressedTexture,un=re.image[0]&&re.image[0].isDataTexture,gt=[];for(let ut=0;ut<6;ut++)gt[ut]=ei||un?un?re.image[ut].image:re.image[ut]:$(re.image[ut],!1,!0,x),gt[ut]=lr(re,gt[ut]);const Ln=gt[0],Zn=J(Ln)||_,En=h.convert(re.format,re.encoding),Un=h.convert(re.type),Gn=K(re.internalFormat,En,Un,re.encoding),Wi=_&&!0!==re.isVideoTexture,Gr=void 0===ln.__version||!0===Ct;let xe,eo=fe(re,Ln,Zn);if(ht(34067,re,Zn),ei){Wi&&Gr&&t.texStorage2D(34067,eo,Gn,Ln.width,Ln.height);for(let ut=0;ut<6;ut++){xe=gt[ut].mipmaps;for(let Et=0;Et<xe.length;Et++){const pn=xe[Et];re.format!==we?null!==En?Wi?t.compressedTexSubImage2D(34069+ut,Et,0,0,pn.width,pn.height,En,pn.data):t.compressedTexImage2D(34069+ut,Et,Gn,pn.width,pn.height,0,pn.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Wi?t.texSubImage2D(34069+ut,Et,0,0,pn.width,pn.height,En,Un,pn.data):t.texImage2D(34069+ut,Et,Gn,pn.width,pn.height,0,En,Un,pn.data)}}}else{xe=re.mipmaps,Wi&&Gr&&(xe.length>0&&eo++,t.texStorage2D(34067,eo,Gn,gt[0].width,gt[0].height));for(let ut=0;ut<6;ut++)if(un){Wi?t.texSubImage2D(34069+ut,0,0,0,gt[ut].width,gt[ut].height,En,Un,gt[ut].data):t.texImage2D(34069+ut,0,Gn,gt[ut].width,gt[ut].height,0,En,Un,gt[ut].data);for(let Et=0;Et<xe.length;Et++){const In=xe[Et].image[ut].image;Wi?t.texSubImage2D(34069+ut,Et+1,0,0,In.width,In.height,En,Un,In.data):t.texImage2D(34069+ut,Et+1,Gn,In.width,In.height,0,En,Un,In.data)}}else{Wi?t.texSubImage2D(34069+ut,0,0,0,En,Un,gt[ut]):t.texImage2D(34069+ut,0,Gn,En,Un,gt[ut]);for(let Et=0;Et<xe.length;Et++){const pn=xe[Et];Wi?t.texSubImage2D(34069+ut,Et+1,0,0,En,Un,pn.image[ut]):t.texImage2D(34069+ut,Et+1,Gn,En,Un,pn.image[ut])}}}de(re,Zn)&&_e(34067),ln.__version=Bt.version,re.onUpdate&&re.onUpdate(re)}me.__version=re.version}(qe,me,re):t.bindTexture(34067,qe.__webglTexture,33984+re)},this.rebindTextures=function zt(me,re,qe){const Ct=s.get(me);void 0!==re&&cn(Ct.__webglFramebuffer,me,me.texture,36064,3553),void 0!==qe&&yt(me)},this.setupRenderTarget=function gn(me){const re=me.texture,qe=s.get(me),Ct=s.get(re);me.addEventListener("dispose",bt),!0!==me.isWebGLMultipleRenderTargets&&(void 0===Ct.__webglTexture&&(Ct.__webglTexture=v.createTexture()),Ct.__version=re.version,g.memory.textures++);const Bt=!0===me.isWebGLCubeRenderTarget,ln=!0===me.isWebGLMultipleRenderTargets,ei=J(me)||_;if(Bt){qe.__webglFramebuffer=[];for(let un=0;un<6;un++)qe.__webglFramebuffer[un]=v.createFramebuffer()}else{if(qe.__webglFramebuffer=v.createFramebuffer(),ln)if(l.drawBuffers){const un=me.texture;for(let gt=0,Ln=un.length;gt<Ln;gt++){const Zn=s.get(un[gt]);void 0===Zn.__webglTexture&&(Zn.__webglTexture=v.createTexture(),g.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(_&&me.samples>0&&!1===kn(me)){const un=ln?re:[re];qe.__webglMultisampledFramebuffer=v.createFramebuffer(),qe.__webglColorRenderbuffer=[],t.bindFramebuffer(36160,qe.__webglMultisampledFramebuffer);for(let gt=0;gt<un.length;gt++){const Ln=un[gt];qe.__webglColorRenderbuffer[gt]=v.createRenderbuffer(),v.bindRenderbuffer(36161,qe.__webglColorRenderbuffer[gt]);const Zn=h.convert(Ln.format,Ln.encoding),En=h.convert(Ln.type),Un=K(Ln.internalFormat,Zn,En,Ln.encoding,!0===me.isXRRenderTarget),Gn=Jn(me);v.renderbufferStorageMultisample(36161,Gn,Un,me.width,me.height),v.framebufferRenderbuffer(36160,36064+gt,36161,qe.__webglColorRenderbuffer[gt])}v.bindRenderbuffer(36161,null),me.depthBuffer&&(qe.__webglDepthRenderbuffer=v.createRenderbuffer(),Mi(qe.__webglDepthRenderbuffer,me,!0)),t.bindFramebuffer(36160,null)}}if(Bt){t.bindTexture(34067,Ct.__webglTexture),ht(34067,re,ei);for(let un=0;un<6;un++)cn(qe.__webglFramebuffer[un],me,re,36064,34069+un);de(re,ei)&&_e(34067),t.unbindTexture()}else if(ln){const un=me.texture;for(let gt=0,Ln=un.length;gt<Ln;gt++){const Zn=un[gt],En=s.get(Zn);t.bindTexture(3553,En.__webglTexture),ht(3553,Zn,ei),cn(qe.__webglFramebuffer,me,Zn,36064+gt,3553),de(Zn,ei)&&_e(3553)}t.unbindTexture()}else{let un=3553;(me.isWebGL3DRenderTarget||me.isWebGLArrayRenderTarget)&&(_?un=me.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(un,Ct.__webglTexture),ht(un,re,ei),cn(qe.__webglFramebuffer,me,re,36064,un),de(re,ei)&&_e(un),t.unbindTexture()}me.depthBuffer&&yt(me)},this.updateRenderTargetMipmap=function en(me){const re=J(me)||_,qe=!0===me.isWebGLMultipleRenderTargets?me.texture:[me.texture];for(let Ct=0,Bt=qe.length;Ct<Bt;Ct++){const ln=qe[Ct];if(de(ln,re)){const ei=me.isWebGLCubeRenderTarget?34067:3553,un=s.get(ln).__webglTexture;t.bindTexture(ei,un),_e(ei),t.unbindTexture()}}},this.updateMultisampleRenderTarget=function li(me){if(_&&me.samples>0&&!1===kn(me)){const re=me.isWebGLMultipleRenderTargets?me.texture:[me.texture],qe=me.width,Ct=me.height;let Bt=16384;const ln=[],ei=me.stencilBuffer?33306:36096,un=s.get(me),gt=!0===me.isWebGLMultipleRenderTargets;if(gt)for(let Ln=0;Ln<re.length;Ln++)t.bindFramebuffer(36160,un.__webglMultisampledFramebuffer),v.framebufferRenderbuffer(36160,36064+Ln,36161,null),t.bindFramebuffer(36160,un.__webglFramebuffer),v.framebufferTexture2D(36009,36064+Ln,3553,null,0);t.bindFramebuffer(36008,un.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,un.__webglFramebuffer);for(let Ln=0;Ln<re.length;Ln++){ln.push(36064+Ln),me.depthBuffer&&ln.push(ei);const Zn=void 0!==un.__ignoreDepthValues&&un.__ignoreDepthValues;if(!1===Zn&&(me.depthBuffer&&(Bt|=256),me.stencilBuffer&&(Bt|=1024)),gt&&v.framebufferRenderbuffer(36008,36064,36161,un.__webglColorRenderbuffer[Ln]),!0===Zn&&(v.invalidateFramebuffer(36008,[ei]),v.invalidateFramebuffer(36009,[ei])),gt){const En=s.get(re[Ln]).__webglTexture;v.framebufferTexture2D(36009,36064,3553,En,0)}v.blitFramebuffer(0,0,qe,Ct,0,0,qe,Ct,Bt,9728),L&&v.invalidateFramebuffer(36008,ln)}if(t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,null),gt)for(let Ln=0;Ln<re.length;Ln++){t.bindFramebuffer(36160,un.__webglMultisampledFramebuffer),v.framebufferRenderbuffer(36160,36064+Ln,36161,un.__webglColorRenderbuffer[Ln]);const Zn=s.get(re[Ln]).__webglTexture;t.bindFramebuffer(36160,un.__webglFramebuffer),v.framebufferTexture2D(36009,36064+Ln,3553,Zn,0)}t.bindFramebuffer(36009,un.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=yt,this.setupFrameBufferTexture=cn,this.useMultisampledRTT=kn}function d_(v,e,t){const s=t.isWebGL2;return{convert:function l(h,g=null){let _;if(h===Hs)return 5121;if(h===Jo)return 32819;if(h===wo)return 32820;if(h===zs)return 5120;if(h===Ws)return 5122;if(h===es)return 5123;if(h===$i)return 5124;if(h===yi)return 5125;if(h===br)return 5126;if(h===$s)return s?5131:(_=e.get("OES_texture_half_float"),null!==_?_.HALF_FLOAT_OES:null);if(h===hl)return 6406;if(h===we)return 6408;if(h===ve)return 6409;if(h===ae)return 6410;if(h===Re)return 6402;if(h===Fe)return 34041;if(h===Bl)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(h===ja)return _=e.get("EXT_sRGB"),null!==_?_.SRGB_ALPHA_EXT:null;if(h===Yt)return 6403;if(h===zn)return 36244;if(h===Bi)return 33319;if(h===Ki)return 33320;if(h===Is)return 36249;if(h===Tr||h===pa||h===Pa||h===Oa)if(g===Dn){if(_=e.get("WEBGL_compressed_texture_s3tc_srgb"),null===_)return null;if(h===Tr)return _.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(h===pa)return _.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(h===Pa)return _.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(h===Oa)return _.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(_=e.get("WEBGL_compressed_texture_s3tc"),null===_)return null;if(h===Tr)return _.COMPRESSED_RGB_S3TC_DXT1_EXT;if(h===pa)return _.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(h===Pa)return _.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(h===Oa)return _.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(h===qo||h===jl||h===uo||h===Zo){if(_=e.get("WEBGL_compressed_texture_pvrtc"),null===_)return null;if(h===qo)return _.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(h===jl)return _.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(h===uo)return _.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(h===Zo)return _.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(h===Ys)return _=e.get("WEBGL_compressed_texture_etc1"),null!==_?_.COMPRESSED_RGB_ETC1_WEBGL:null;if(h===io||h===ma){if(_=e.get("WEBGL_compressed_texture_etc"),null===_)return null;if(h===io)return g===Dn?_.COMPRESSED_SRGB8_ETC2:_.COMPRESSED_RGB8_ETC2;if(h===ma)return g===Dn?_.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:_.COMPRESSED_RGBA8_ETC2_EAC}if(h===pi||h===ir||h===Ei||h===zr||h===Fr||h===Sc||h===Na||h===Js||h===qs||h===Vt||h===On||h===Ai||h===ts||h===ys){if(_=e.get("WEBGL_compressed_texture_astc"),null===_)return null;if(h===pi)return g===Dn?_.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:_.COMPRESSED_RGBA_ASTC_4x4_KHR;if(h===ir)return g===Dn?_.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:_.COMPRESSED_RGBA_ASTC_5x4_KHR;if(h===Ei)return g===Dn?_.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:_.COMPRESSED_RGBA_ASTC_5x5_KHR;if(h===zr)return g===Dn?_.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:_.COMPRESSED_RGBA_ASTC_6x5_KHR;if(h===Fr)return g===Dn?_.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:_.COMPRESSED_RGBA_ASTC_6x6_KHR;if(h===Sc)return g===Dn?_.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:_.COMPRESSED_RGBA_ASTC_8x5_KHR;if(h===Na)return g===Dn?_.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:_.COMPRESSED_RGBA_ASTC_8x6_KHR;if(h===Js)return g===Dn?_.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:_.COMPRESSED_RGBA_ASTC_8x8_KHR;if(h===qs)return g===Dn?_.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:_.COMPRESSED_RGBA_ASTC_10x5_KHR;if(h===Vt)return g===Dn?_.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:_.COMPRESSED_RGBA_ASTC_10x6_KHR;if(h===On)return g===Dn?_.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:_.COMPRESSED_RGBA_ASTC_10x8_KHR;if(h===Ai)return g===Dn?_.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:_.COMPRESSED_RGBA_ASTC_10x10_KHR;if(h===ts)return g===Dn?_.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:_.COMPRESSED_RGBA_ASTC_12x10_KHR;if(h===ys)return g===Dn?_.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:_.COMPRESSED_RGBA_ASTC_12x12_KHR}if(h===Yi){if(_=e.get("EXT_texture_compression_bptc"),null===_)return null;if(h===Yi)return g===Dn?_.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:_.COMPRESSED_RGBA_BPTC_UNORM_EXT}return h===co?s?34042:(_=e.get("WEBGL_depth_texture"),null!==_?_.UNSIGNED_INT_24_8_WEBGL:null):void 0!==v[h]?v[h]:null}}}class h_ extends pr{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class rl extends Jr{constructor(){super(),this.isGroup=!0,this.type="Group"}}const Pv={type:"move"};class Dh{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new rl,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new rl,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new ce,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new ce),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new rl,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new ce,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new ce),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const s of e.hand.values())this._getHandJoint(t,s)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,s){let l=null,h=null,g=null;const _=this._targetRay,b=this._grip,x=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(x&&e.hand){g=!0;for(const j of e.hand.values()){const k=t.getJointPose(j,s),Y=this._getHandJoint(x,j);null!==k&&(Y.matrix.fromArray(k.transform.matrix),Y.matrix.decompose(Y.position,Y.rotation,Y.scale),Y.jointRadius=k.radius),Y.visible=null!==k}const E=x.joints["index-finger-tip"].position.distanceTo(x.joints["thumb-tip"].position),L=.02,G=.005;x.inputState.pinching&&E>L+G?(x.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!x.inputState.pinching&&E<=L-G&&(x.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==b&&e.gripSpace&&(h=t.getPose(e.gripSpace,s),null!==h&&(b.matrix.fromArray(h.transform.matrix),b.matrix.decompose(b.position,b.rotation,b.scale),h.linearVelocity?(b.hasLinearVelocity=!0,b.linearVelocity.copy(h.linearVelocity)):b.hasLinearVelocity=!1,h.angularVelocity?(b.hasAngularVelocity=!0,b.angularVelocity.copy(h.angularVelocity)):b.hasAngularVelocity=!1));null!==_&&(l=t.getPose(e.targetRaySpace,s),null===l&&null!==h&&(l=h),null!==l&&(_.matrix.fromArray(l.transform.matrix),_.matrix.decompose(_.position,_.rotation,_.scale),l.linearVelocity?(_.hasLinearVelocity=!0,_.linearVelocity.copy(l.linearVelocity)):_.hasLinearVelocity=!1,l.angularVelocity?(_.hasAngularVelocity=!0,_.angularVelocity.copy(l.angularVelocity)):_.hasAngularVelocity=!1,this.dispatchEvent(Pv)))}return null!==_&&(_.visible=null!==l),null!==b&&(b.visible=null!==h),null!==x&&(x.visible=null!==g),this}_getHandJoint(e,t){if(void 0===e.joints[t.jointName]){const s=new rl;s.matrixAutoUpdate=!1,s.visible=!1,e.joints[t.jointName]=s,e.add(s)}return e.joints[t.jointName]}}class wm extends Dr{constructor(e,t,s,l,h,g,_,b,x,S){if((S=void 0!==S?S:Re)!==Re&&S!==Fe)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===s&&S===Re&&(s=yi),void 0===s&&S===Fe&&(s=co),super(null,l,h,g,_,b,S,s,x),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=void 0!==_?_:Bn,this.minFilter=void 0!==b?b:Bn,this.flipY=!1,this.generateMipmaps=!1}}class Ov extends $r{constructor(e,t){super();const s=this;let l=null,h=1,g=null,_="local-floor",b=null,x=null,S=null,A=null,E=null,L=null;const G=t.getContextAttributes();let j=null,k=null;const Y=[],Z=[],$=new Set,J=new Map,se=new pr;se.layers.enable(1),se.viewport=new Ii;const de=new pr;de.layers.enable(2),de.viewport=new Ii;const _e=[se,de],K=new h_;K.layers.enable(1),K.layers.enable(2);let fe=null,Te=null;function ze(st){const tt=Z.indexOf(st.inputSource);if(-1===tt)return;const Ht=Y[tt];void 0!==Ht&&Ht.dispatchEvent({type:st.type,data:st.inputSource})}function bt(){l.removeEventListener("select",ze),l.removeEventListener("selectstart",ze),l.removeEventListener("selectend",ze),l.removeEventListener("squeeze",ze),l.removeEventListener("squeezestart",ze),l.removeEventListener("squeezeend",ze),l.removeEventListener("end",bt),l.removeEventListener("inputsourceschange",je);for(let st=0;st<Y.length;st++){const tt=Z[st];null!==tt&&(Z[st]=null,Y[st].disconnect(tt))}fe=null,Te=null,e.setRenderTarget(j),E=null,A=null,S=null,l=null,k=null,xt.stop(),s.isPresenting=!1,s.dispatchEvent({type:"sessionend"})}function je(st){for(let tt=0;tt<st.removed.length;tt++){const Ht=st.removed[tt],kt=Z.indexOf(Ht);kt>=0&&(Z[kt]=null,Y[kt].disconnect(Ht))}for(let tt=0;tt<st.added.length;tt++){const Ht=st.added[tt];let kt=Z.indexOf(Ht);if(-1===kt){for(let ht=0;ht<Y.length;ht++){if(ht>=Z.length){Z.push(Ht),kt=ht;break}if(null===Z[ht]){Z[ht]=Ht,kt=ht;break}}if(-1===kt)break}const on=Y[kt];on&&on.connect(Ht)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(st){let tt=Y[st];return void 0===tt&&(tt=new Dh,Y[st]=tt),tt.getTargetRaySpace()},this.getControllerGrip=function(st){let tt=Y[st];return void 0===tt&&(tt=new Dh,Y[st]=tt),tt.getGripSpace()},this.getHand=function(st){let tt=Y[st];return void 0===tt&&(tt=new Dh,Y[st]=tt),tt.getHandSpace()},this.setFramebufferScaleFactor=function(st){h=st,!0===s.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(st){_=st,!0===s.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return b||g},this.setReferenceSpace=function(st){b=st},this.getBaseLayer=function(){return null!==A?A:E},this.getBinding=function(){return S},this.getFrame=function(){return L},this.getSession=function(){return l},this.setSession=function(){var st=function ie(v){return function(){var e=this,t=arguments;return new Promise(function(s,l){var h=v.apply(e,t);function g(b){a(h,s,l,g,_,"next",b)}function _(b){a(h,s,l,g,_,"throw",b)}g(void 0)})}}(function*(tt){if(l=tt,null!==l){if(j=e.getRenderTarget(),l.addEventListener("select",ze),l.addEventListener("selectstart",ze),l.addEventListener("selectend",ze),l.addEventListener("squeeze",ze),l.addEventListener("squeezestart",ze),l.addEventListener("squeezeend",ze),l.addEventListener("end",bt),l.addEventListener("inputsourceschange",je),!0!==G.xrCompatible&&(yield t.makeXRCompatible()),void 0===l.renderState.layers||!1===e.capabilities.isWebGL2)E=new XRWebGLLayer(l,t,{antialias:void 0!==l.renderState.layers||G.antialias,alpha:G.alpha,depth:G.depth,stencil:G.stencil,framebufferScaleFactor:h}),l.updateRenderState({baseLayer:E}),k=new rs(E.framebufferWidth,E.framebufferHeight,{format:we,type:Hs,encoding:e.outputEncoding,stencilBuffer:G.stencil});else{let Ht=null,kt=null,on=null;G.depth&&(on=G.stencil?35056:33190,Ht=G.stencil?Fe:Re,kt=G.stencil?co:yi);const ht={colorFormat:32856,depthFormat:on,scaleFactor:h};S=new XRWebGLBinding(l,t),A=S.createProjectionLayer(ht),l.updateRenderState({layers:[A]}),k=new rs(A.textureWidth,A.textureHeight,{format:we,type:Hs,depthTexture:new wm(A.textureWidth,A.textureHeight,kt,void 0,void 0,void 0,void 0,void 0,void 0,Ht),stencilBuffer:G.stencil,encoding:e.outputEncoding,samples:G.antialias?4:0}),e.properties.get(k).__ignoreDepthValues=A.ignoreDepthValues}k.isXRRenderTarget=!0,this.setFoveation(1),b=null,g=yield l.requestReferenceSpace(_),xt.setContext(l),xt.start(),s.isPresenting=!0,s.dispatchEvent({type:"sessionstart"})}});return function(tt){return st.apply(this,arguments)}}();const Se=new ce,at=new ce;function At(st,tt){null===tt?st.matrixWorld.copy(st.matrix):st.matrixWorld.multiplyMatrices(tt.matrixWorld,st.matrix),st.matrixWorldInverse.copy(st.matrixWorld).invert()}this.updateCamera=function(st){if(null===l)return;K.near=de.near=se.near=st.near,K.far=de.far=se.far=st.far,(fe!==K.near||Te!==K.far)&&(l.updateRenderState({depthNear:K.near,depthFar:K.far}),fe=K.near,Te=K.far);const tt=st.parent,Ht=K.cameras;At(K,tt);for(let on=0;on<Ht.length;on++)At(Ht[on],tt);K.matrixWorld.decompose(K.position,K.quaternion,K.scale),st.matrix.copy(K.matrix),st.matrix.decompose(st.position,st.quaternion,st.scale);const kt=st.children;for(let on=0,ht=kt.length;on<ht;on++)kt[on].updateMatrixWorld(!0);2===Ht.length?function Tt(st,tt,Ht){Se.setFromMatrixPosition(tt.matrixWorld),at.setFromMatrixPosition(Ht.matrixWorld);const kt=Se.distanceTo(at),on=tt.projectionMatrix.elements,ht=Ht.projectionMatrix.elements,qn=on[14]/(on[10]-1),xn=on[14]/(on[10]+1),Yn=(on[9]+1)/on[5],cn=(on[9]-1)/on[5],Mi=(on[8]-1)/on[0],vt=(ht[8]+1)/ht[0],yt=qn*Mi,zt=qn*vt,gn=kt/(-Mi+vt),en=gn*-Mi;tt.matrixWorld.decompose(st.position,st.quaternion,st.scale),st.translateX(en),st.translateZ(gn),st.matrixWorld.compose(st.position,st.quaternion,st.scale),st.matrixWorldInverse.copy(st.matrixWorld).invert();const li=qn+gn,Jn=xn+gn;st.projectionMatrix.makePerspective(yt-en,zt+(kt-en),Yn*xn/Jn*li,cn*xn/Jn*li,li,Jn)}(K,se,de):K.projectionMatrix.copy(se.projectionMatrix)},this.getCamera=function(){return K},this.getFoveation=function(){return null!==A?A.fixedFoveation:null!==E?E.fixedFoveation:void 0},this.setFoveation=function(st){null!==A&&(A.fixedFoveation=st),null!==E&&void 0!==E.fixedFoveation&&(E.fixedFoveation=st)},this.getPlanes=function(){return $};let _t=null;const xt=new du;xt.setAnimationLoop(function Pt(st,tt){if(x=tt.getViewerPose(b||g),L=tt,null!==x){const Ht=x.views;null!==E&&(e.setRenderTargetFramebuffer(k,E.framebuffer),e.setRenderTarget(k));let kt=!1;Ht.length!==K.cameras.length&&(K.cameras.length=0,kt=!0);for(let on=0;on<Ht.length;on++){const ht=Ht[on];let qn=null;if(null!==E)qn=E.getViewport(ht);else{const Yn=S.getViewSubImage(A,ht);qn=Yn.viewport,0===on&&(e.setRenderTargetTextures(k,Yn.colorTexture,A.ignoreDepthValues?void 0:Yn.depthStencilTexture),e.setRenderTarget(k))}let xn=_e[on];void 0===xn&&(xn=new pr,xn.layers.enable(on),xn.viewport=new Ii,_e[on]=xn),xn.matrix.fromArray(ht.transform.matrix),xn.projectionMatrix.fromArray(ht.projectionMatrix),xn.viewport.set(qn.x,qn.y,qn.width,qn.height),0===on&&K.matrix.copy(xn.matrix),!0===kt&&K.cameras.push(xn)}}for(let Ht=0;Ht<Y.length;Ht++){const kt=Z[Ht],on=Y[Ht];null!==kt&&void 0!==on&&on.update(kt,tt,b||g)}if(_t&&_t(st,tt),tt.detectedPlanes){s.dispatchEvent({type:"planesdetected",data:tt.detectedPlanes});let Ht=null;for(const kt of $)tt.detectedPlanes.has(kt)||(null===Ht&&(Ht=[]),Ht.push(kt));if(null!==Ht)for(const kt of Ht)$.delete(kt),J.delete(kt),s.dispatchEvent({type:"planeremoved",data:kt});for(const kt of tt.detectedPlanes)if($.has(kt)){const on=J.get(kt);kt.lastChangedTime>on&&(J.set(kt,kt.lastChangedTime),s.dispatchEvent({type:"planechanged",data:kt}))}else $.add(kt),J.set(kt,tt.lastChangedTime),s.dispatchEvent({type:"planeadded",data:kt})}L=null}),this.setAnimationLoop=function(st){_t=st},this.dispose=function(){}}}function Ey(v,e){function l(j,k){j.opacity.value=k.opacity,k.color&&j.diffuse.value.copy(k.color),k.emissive&&j.emissive.value.copy(k.emissive).multiplyScalar(k.emissiveIntensity),k.map&&(j.map.value=k.map),k.alphaMap&&(j.alphaMap.value=k.alphaMap),k.bumpMap&&(j.bumpMap.value=k.bumpMap,j.bumpScale.value=k.bumpScale,k.side===Ge&&(j.bumpScale.value*=-1)),k.displacementMap&&(j.displacementMap.value=k.displacementMap,j.displacementScale.value=k.displacementScale,j.displacementBias.value=k.displacementBias),k.emissiveMap&&(j.emissiveMap.value=k.emissiveMap),k.normalMap&&(j.normalMap.value=k.normalMap,j.normalScale.value.copy(k.normalScale),k.side===Ge&&j.normalScale.value.negate()),k.specularMap&&(j.specularMap.value=k.specularMap),k.alphaTest>0&&(j.alphaTest.value=k.alphaTest);const Y=e.get(k).envMap;if(Y&&(j.envMap.value=Y,j.flipEnvMap.value=Y.isCubeTexture&&!1===Y.isRenderTargetTexture?-1:1,j.reflectivity.value=k.reflectivity,j.ior.value=k.ior,j.refractionRatio.value=k.refractionRatio),k.lightMap){j.lightMap.value=k.lightMap;const J=!0!==v.physicallyCorrectLights?Math.PI:1;j.lightMapIntensity.value=k.lightMapIntensity*J}let Z,$;k.aoMap&&(j.aoMap.value=k.aoMap,j.aoMapIntensity.value=k.aoMapIntensity),k.map?Z=k.map:k.specularMap?Z=k.specularMap:k.displacementMap?Z=k.displacementMap:k.normalMap?Z=k.normalMap:k.bumpMap?Z=k.bumpMap:k.roughnessMap?Z=k.roughnessMap:k.metalnessMap?Z=k.metalnessMap:k.alphaMap?Z=k.alphaMap:k.emissiveMap?Z=k.emissiveMap:k.clearcoatMap?Z=k.clearcoatMap:k.clearcoatNormalMap?Z=k.clearcoatNormalMap:k.clearcoatRoughnessMap?Z=k.clearcoatRoughnessMap:k.iridescenceMap?Z=k.iridescenceMap:k.iridescenceThicknessMap?Z=k.iridescenceThicknessMap:k.specularIntensityMap?Z=k.specularIntensityMap:k.specularColorMap?Z=k.specularColorMap:k.transmissionMap?Z=k.transmissionMap:k.thicknessMap?Z=k.thicknessMap:k.sheenColorMap?Z=k.sheenColorMap:k.sheenRoughnessMap&&(Z=k.sheenRoughnessMap),void 0!==Z&&(Z.isWebGLRenderTarget&&(Z=Z.texture),!0===Z.matrixAutoUpdate&&Z.updateMatrix(),j.uvTransform.value.copy(Z.matrix)),k.aoMap?$=k.aoMap:k.lightMap&&($=k.lightMap),void 0!==$&&($.isWebGLRenderTarget&&($=$.texture),!0===$.matrixAutoUpdate&&$.updateMatrix(),j.uv2Transform.value.copy($.matrix))}return{refreshFogUniforms:function t(j,k){k.color.getRGB(j.fogColor.value,Ze(v)),k.isFog?(j.fogNear.value=k.near,j.fogFar.value=k.far):k.isFogExp2&&(j.fogDensity.value=k.density)},refreshMaterialUniforms:function s(j,k,Y,Z,$){k.isMeshBasicMaterial||k.isMeshLambertMaterial?l(j,k):k.isMeshToonMaterial?(l(j,k),function S(j,k){k.gradientMap&&(j.gradientMap.value=k.gradientMap)}(j,k)):k.isMeshPhongMaterial?(l(j,k),function x(j,k){j.specular.value.copy(k.specular),j.shininess.value=Math.max(k.shininess,1e-4)}(j,k)):k.isMeshStandardMaterial?(l(j,k),function A(j,k){j.roughness.value=k.roughness,j.metalness.value=k.metalness,k.roughnessMap&&(j.roughnessMap.value=k.roughnessMap),k.metalnessMap&&(j.metalnessMap.value=k.metalnessMap),e.get(k).envMap&&(j.envMapIntensity.value=k.envMapIntensity)}(j,k),k.isMeshPhysicalMaterial&&function E(j,k,Y){j.ior.value=k.ior,k.sheen>0&&(j.sheenColor.value.copy(k.sheenColor).multiplyScalar(k.sheen),j.sheenRoughness.value=k.sheenRoughness,k.sheenColorMap&&(j.sheenColorMap.value=k.sheenColorMap),k.sheenRoughnessMap&&(j.sheenRoughnessMap.value=k.sheenRoughnessMap)),k.clearcoat>0&&(j.clearcoat.value=k.clearcoat,j.clearcoatRoughness.value=k.clearcoatRoughness,k.clearcoatMap&&(j.clearcoatMap.value=k.clearcoatMap),k.clearcoatRoughnessMap&&(j.clearcoatRoughnessMap.value=k.clearcoatRoughnessMap),k.clearcoatNormalMap&&(j.clearcoatNormalScale.value.copy(k.clearcoatNormalScale),j.clearcoatNormalMap.value=k.clearcoatNormalMap,k.side===Ge&&j.clearcoatNormalScale.value.negate())),k.iridescence>0&&(j.iridescence.value=k.iridescence,j.iridescenceIOR.value=k.iridescenceIOR,j.iridescenceThicknessMinimum.value=k.iridescenceThicknessRange[0],j.iridescenceThicknessMaximum.value=k.iridescenceThicknessRange[1],k.iridescenceMap&&(j.iridescenceMap.value=k.iridescenceMap),k.iridescenceThicknessMap&&(j.iridescenceThicknessMap.value=k.iridescenceThicknessMap)),k.transmission>0&&(j.transmission.value=k.transmission,j.transmissionSamplerMap.value=Y.texture,j.transmissionSamplerSize.value.set(Y.width,Y.height),k.transmissionMap&&(j.transmissionMap.value=k.transmissionMap),j.thickness.value=k.thickness,k.thicknessMap&&(j.thicknessMap.value=k.thicknessMap),j.attenuationDistance.value=k.attenuationDistance,j.attenuationColor.value.copy(k.attenuationColor)),j.specularIntensity.value=k.specularIntensity,j.specularColor.value.copy(k.specularColor),k.specularIntensityMap&&(j.specularIntensityMap.value=k.specularIntensityMap),k.specularColorMap&&(j.specularColorMap.value=k.specularColorMap)}(j,k,$)):k.isMeshMatcapMaterial?(l(j,k),function L(j,k){k.matcap&&(j.matcap.value=k.matcap)}(j,k)):k.isMeshDepthMaterial?l(j,k):k.isMeshDistanceMaterial?(l(j,k),function G(j,k){j.referencePosition.value.copy(k.referencePosition),j.nearDistance.value=k.nearDistance,j.farDistance.value=k.farDistance}(j,k)):k.isMeshNormalMaterial?l(j,k):k.isLineBasicMaterial?(function h(j,k){j.diffuse.value.copy(k.color),j.opacity.value=k.opacity}(j,k),k.isLineDashedMaterial&&function g(j,k){j.dashSize.value=k.dashSize,j.totalSize.value=k.dashSize+k.gapSize,j.scale.value=k.scale}(j,k)):k.isPointsMaterial?function _(j,k,Y,Z){let $;j.diffuse.value.copy(k.color),j.opacity.value=k.opacity,j.size.value=k.size*Y,j.scale.value=.5*Z,k.map&&(j.map.value=k.map),k.alphaMap&&(j.alphaMap.value=k.alphaMap),k.alphaTest>0&&(j.alphaTest.value=k.alphaTest),k.map?$=k.map:k.alphaMap&&($=k.alphaMap),void 0!==$&&(!0===$.matrixAutoUpdate&&$.updateMatrix(),j.uvTransform.value.copy($.matrix))}(j,k,Y,Z):k.isSpriteMaterial?function b(j,k){let Y;j.diffuse.value.copy(k.color),j.opacity.value=k.opacity,j.rotation.value=k.rotation,k.map&&(j.map.value=k.map),k.alphaMap&&(j.alphaMap.value=k.alphaMap),k.alphaTest>0&&(j.alphaTest.value=k.alphaTest),k.map?Y=k.map:k.alphaMap&&(Y=k.alphaMap),void 0!==Y&&(!0===Y.matrixAutoUpdate&&Y.updateMatrix(),j.uvTransform.value.copy(Y.matrix))}(j,k):k.isShadowMaterial?(j.color.value.copy(k.color),j.opacity.value=k.opacity):k.isShaderMaterial&&(k.uniformsNeedUpdate=!1)}}}function Ay(v,e,t,s){let l={},h={},g=[];const _=t.isWebGL2?v.getParameter(35375):0;function L(Z,$,J){const se=Z.value;if(void 0===J[$]){if("number"==typeof se)J[$]=se;else{const de=Array.isArray(se)?se:[se],_e=[];for(let K=0;K<de.length;K++)_e.push(de[K].clone());J[$]=_e}return!0}if("number"==typeof se){if(J[$]!==se)return J[$]=se,!0}else{const de=Array.isArray(J[$])?J[$]:[J[$]],_e=Array.isArray(se)?se:[se];for(let K=0;K<de.length;K++){const fe=de[K];if(!1===fe.equals(_e[K]))return fe.copy(_e[K]),!0}}return!1}function j(Z){const $={boundary:0,storage:0};return"number"==typeof Z?($.boundary=4,$.storage=4):Z.isVector2?($.boundary=8,$.storage=8):Z.isVector3||Z.isColor?($.boundary=16,$.storage=12):Z.isVector4?($.boundary=16,$.storage=16):Z.isMatrix3?($.boundary=48,$.storage=48):Z.isMatrix4?($.boundary=64,$.storage=64):Z.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",Z),$}function k(Z){const $=Z.target;$.removeEventListener("dispose",k);const J=g.indexOf($.__bindingPointIndex);g.splice(J,1),v.deleteBuffer(l[$.id]),delete l[$.id],delete h[$.id]}return{bind:function b(Z,$){s.uniformBlockBinding(Z,$.program)},update:function x(Z,$){let J=l[Z.id];void 0===J&&(function G(Z){const $=Z.uniforms;let J=0;let de=0;for(let _e=0,K=$.length;_e<K;_e++){const fe=$[_e],Te={boundary:0,storage:0},ze=Array.isArray(fe.value)?fe.value:[fe.value];for(let bt=0,je=ze.length;bt<je;bt++){const at=j(ze[bt]);Te.boundary+=at.boundary,Te.storage+=at.storage}fe.__data=new Float32Array(Te.storage/Float32Array.BYTES_PER_ELEMENT),fe.__offset=J,_e>0&&(de=J%16,0!==de&&16-de-Te.boundary<0&&(J+=16-de,fe.__offset=J)),J+=Te.storage}de=J%16,de>0&&(J+=16-de),Z.__size=J,Z.__cache={}}(Z),J=function S(Z){const $=function A(){for(let Z=0;Z<_;Z++)if(-1===g.indexOf(Z))return g.push(Z),Z;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();Z.__bindingPointIndex=$;const J=v.createBuffer(),se=Z.__size,de=Z.usage;return v.bindBuffer(35345,J),v.bufferData(35345,se,de),v.bindBuffer(35345,null),v.bindBufferBase(35345,$,J),J}(Z),l[Z.id]=J,Z.addEventListener("dispose",k)),s.updateUBOMapping(Z,$.program);const de=e.render.frame;h[Z.id]!==de&&(function E(Z){const J=Z.uniforms,se=Z.__cache;v.bindBuffer(35345,l[Z.id]);for(let de=0,_e=J.length;de<_e;de++){const K=J[de];if(!0===L(K,de,se)){const fe=K.__offset,Te=Array.isArray(K.value)?K.value:[K.value];let ze=0;for(let bt=0;bt<Te.length;bt++){const je=Te[bt],Se=j(je);"number"==typeof je?(K.__data[0]=je,v.bufferSubData(35345,fe+ze,K.__data)):je.isMatrix3?(K.__data[0]=je.elements[0],K.__data[1]=je.elements[1],K.__data[2]=je.elements[2],K.__data[3]=je.elements[0],K.__data[4]=je.elements[3],K.__data[5]=je.elements[4],K.__data[6]=je.elements[5],K.__data[7]=je.elements[0],K.__data[8]=je.elements[6],K.__data[9]=je.elements[7],K.__data[10]=je.elements[8],K.__data[11]=je.elements[0]):(je.toArray(K.__data,ze),ze+=Se.storage/Float32Array.BYTES_PER_ELEMENT)}v.bufferSubData(35345,fe,K.__data)}}v.bindBuffer(35345,null)}(Z),h[Z.id]=de)},dispose:function Y(){for(const Z in l)v.deleteBuffer(l[Z]);g=[],l={},h={}}}}function f_(v={}){this.isWebGLRenderer=!0;const e=void 0!==v.canvas?v.canvas:function Iy(){const v=Ta("canvas");return v.style.display="block",v}(),t=void 0!==v.context?v.context:null,s=void 0===v.depth||v.depth,l=void 0===v.stencil||v.stencil,h=void 0!==v.antialias&&v.antialias,g=void 0===v.premultipliedAlpha||v.premultipliedAlpha,_=void 0!==v.preserveDrawingBuffer&&v.preserveDrawingBuffer,b=void 0!==v.powerPreference?v.powerPreference:"default",x=void 0!==v.failIfMajorPerformanceCaveat&&v.failIfMajorPerformanceCaveat;let S;S=null!==t?t.getContextAttributes().alpha:void 0!==v.alpha&&v.alpha;let A=null,E=null;const L=[],G=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=bs,this.physicallyCorrectLights=!1,this.toneMapping=us,this.toneMappingExposure=1;const j=this;let k=!1,Y=0,Z=0,$=null,J=-1,se=null;const de=new Ii,_e=new Ii;let K=null,fe=e.width,Te=e.height,ze=1,bt=null,je=null;const Se=new Ii(0,0,fe,Te),at=new Ii(0,0,fe,Te);let Tt=!1;const At=new Fc;let _t=!1,Pt=!1,xt=null;const st=new Nt,tt=new Oe,Ht=new ce,kt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function on(){return null===$?ze:1}let xn,Yn,cn,Mi,vt,yt,zt,gn,en,li,Jn,kn,yr,lr,me,re,qe,Ct,Bt,ln,ei,un,gt,Ln,ht=t;function qn(le,Be){for(let dt=0;dt<le.length;dt++){const mt=e.getContext(le[dt],Be);if(null!==mt)return mt}return null}try{const le={alpha:!0,depth:s,stencil:l,antialias:h,premultipliedAlpha:g,preserveDrawingBuffer:_,powerPreference:b,failIfMajorPerformanceCaveat:x};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${pe}`),e.addEventListener("webglcontextlost",Un,!1),e.addEventListener("webglcontextrestored",Gn,!1),e.addEventListener("webglcontextcreationerror",Wi,!1),null===ht){const Be=["webgl2","webgl","experimental-webgl"];if(!0===j.isWebGL1Renderer&&Be.shift(),ht=qn(Be,le),null===ht)throw qn(Be)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===ht.getShaderPrecisionFormat&&(ht.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(le){throw console.error("THREE.WebGLRenderer: "+le.message),le}function Zn(){xn=new sm(ht),Yn=new yf(ht,xn,v),xn.init(Yn),un=new d_(ht,xn,Yn),cn=new Vc(ht,xn,Yn),Mi=new Df,vt=new l_,yt=new u_(ht,xn,cn,vt,Yn,un,Mi),zt=new im(j),gn=new zg(j),en=new Tp(ht,Yn),gt=new vv(ht,xn,en,Yn),li=new dh(ht,en,Mi,gt),Jn=new am(ht,li,en,Mi),Bt=new om(ht,Yn,yt),re=new Ug(vt),kn=new jf(j,zt,gn,xn,Yn,gt,re),yr=new Ey(j,vt),lr=new yd,me=new Mu(xn,Yn),Ct=new nm(j,zt,gn,cn,Jn,S,g),qe=new xh(j,Jn,Yn),Ln=new Ay(ht,Mi,Yn,cn),ln=new vf(ht,xn,Mi,Yn),ei=new Wg(ht,xn,Mi,Yn),Mi.programs=kn.programs,j.capabilities=Yn,j.extensions=xn,j.properties=vt,j.renderLists=lr,j.shadowMap=qe,j.state=cn,j.info=Mi}Zn();const En=new Ov(j,ht);function Un(le){le.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),k=!0}function Gn(){console.log("THREE.WebGLRenderer: Context Restored."),k=!1;const le=Mi.autoReset,Be=qe.enabled,dt=qe.autoUpdate,Ne=qe.needsUpdate,mt=qe.type;Zn(),Mi.autoReset=le,qe.enabled=Be,qe.autoUpdate=dt,qe.needsUpdate=Ne,qe.type=mt}function Wi(le){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",le.statusMessage)}function Gr(le){const Be=le.target;Be.removeEventListener("dispose",Gr),function eo(le){(function xe(le){const Be=vt.get(le).programs;void 0!==Be&&(Be.forEach(function(dt){kn.releaseProgram(dt)}),le.isShaderMaterial&&kn.releaseShaderCache(le))})(le),vt.remove(le)}(Be)}this.xr=En,this.getContext=function(){return ht},this.getContextAttributes=function(){return ht.getContextAttributes()},this.forceContextLoss=function(){const le=xn.get("WEBGL_lose_context");le&&le.loseContext()},this.forceContextRestore=function(){const le=xn.get("WEBGL_lose_context");le&&le.restoreContext()},this.getPixelRatio=function(){return ze},this.setPixelRatio=function(le){void 0!==le&&(ze=le,this.setSize(fe,Te,!1))},this.getSize=function(le){return le.set(fe,Te)},this.setSize=function(le,Be,dt){En.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(fe=le,Te=Be,e.width=Math.floor(le*ze),e.height=Math.floor(Be*ze),!1!==dt&&(e.style.width=le+"px",e.style.height=Be+"px"),this.setViewport(0,0,le,Be))},this.getDrawingBufferSize=function(le){return le.set(fe*ze,Te*ze).floor()},this.setDrawingBufferSize=function(le,Be,dt){fe=le,Te=Be,ze=dt,e.width=Math.floor(le*dt),e.height=Math.floor(Be*dt),this.setViewport(0,0,le,Be)},this.getCurrentViewport=function(le){return le.copy(de)},this.getViewport=function(le){return le.copy(Se)},this.setViewport=function(le,Be,dt,Ne){le.isVector4?Se.set(le.x,le.y,le.z,le.w):Se.set(le,Be,dt,Ne),cn.viewport(de.copy(Se).multiplyScalar(ze).floor())},this.getScissor=function(le){return le.copy(at)},this.setScissor=function(le,Be,dt,Ne){le.isVector4?at.set(le.x,le.y,le.z,le.w):at.set(le,Be,dt,Ne),cn.scissor(_e.copy(at).multiplyScalar(ze).floor())},this.getScissorTest=function(){return Tt},this.setScissorTest=function(le){cn.setScissorTest(Tt=le)},this.setOpaqueSort=function(le){bt=le},this.setTransparentSort=function(le){je=le},this.getClearColor=function(le){return le.copy(Ct.getClearColor())},this.setClearColor=function(){Ct.setClearColor.apply(Ct,arguments)},this.getClearAlpha=function(){return Ct.getClearAlpha()},this.setClearAlpha=function(){Ct.setClearAlpha.apply(Ct,arguments)},this.clear=function(le=!0,Be=!0,dt=!0){let Ne=0;le&&(Ne|=16384),Be&&(Ne|=256),dt&&(Ne|=1024),ht.clear(Ne)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",Un,!1),e.removeEventListener("webglcontextrestored",Gn,!1),e.removeEventListener("webglcontextcreationerror",Wi,!1),lr.dispose(),me.dispose(),vt.dispose(),zt.dispose(),gn.dispose(),Jn.dispose(),gt.dispose(),Ln.dispose(),kn.dispose(),En.dispose(),En.removeEventListener("sessionstart",pn),En.removeEventListener("sessionend",In),xt&&(xt.dispose(),xt=null),Zi.stop()},this.renderBufferDirect=function(le,Be,dt,Ne,mt,Hn){null===Be&&(Be=kt);const oi=mt.isMesh&&mt.matrixWorld.determinant()<0,xi=function gp(le,Be,dt,Ne,mt){!0!==Be.isScene&&(Be=kt),yt.resetTextureUnits();const Hn=Be.fog,xi=null===$?j.outputEncoding:!0===$.isXRRenderTarget?$.texture.encoding:bs,Ci=(Ne.isMeshStandardMaterial?gn:zt).get(Ne.envMap||(Ne.isMeshStandardMaterial?Be.environment:null)),Ji=!0===Ne.vertexColors&&!!dt.attributes.color&&4===dt.attributes.color.itemSize,zi=!!Ne.normalMap&&!!dt.attributes.tangent,Di=!!dt.morphAttributes.position,Cs=!!dt.morphAttributes.normal,Ho=!!dt.morphAttributes.color,to=Ne.toneMapped?j.toneMapping:us,Gd=dt.morphAttributes.position||dt.morphAttributes.normal||dt.morphAttributes.color,ls=void 0!==Gd?Gd.length:0,wi=vt.get(Ne),Z_=E.state.lights;!0!==_t||!0!==Pt&&le===se||re.setState(Ne,le,le===se&&Ne.id===J);let no=!1;Ne.version===wi.__version?(wi.needsLights&&wi.lightsStateVersion!==Z_.state.version||wi.outputEncoding!==xi||mt.isInstancedMesh&&!1===wi.instancing||!mt.isInstancedMesh&&!0===wi.instancing||mt.isSkinnedMesh&&!1===wi.skinning||!mt.isSkinnedMesh&&!0===wi.skinning||wi.envMap!==Ci||!0===Ne.fog&&wi.fog!==Hn||void 0!==wi.numClippingPlanes&&(wi.numClippingPlanes!==re.numPlanes||wi.numIntersection!==re.numIntersection)||wi.vertexAlphas!==Ji||wi.vertexTangents!==zi||wi.morphTargets!==Di||wi.morphNormals!==Cs||wi.morphColors!==Ho||wi.toneMapping!==to||!0===Yn.isWebGL2&&wi.morphTargetsCount!==ls)&&(no=!0):(no=!0,wi.__version=Ne.version);let Vd=wi.currentProgram;!0===no&&(Vd=dl(Ne,Be,mt));let _p=!1,Yu=!1,K_=!1;const zo=Vd.getUniforms(),Ju=wi.uniforms;if(cn.useProgram(Vd.program)&&(_p=!0,Yu=!0,K_=!0),Ne.id!==J&&(J=Ne.id,Yu=!0),_p||se!==le){if(zo.setValue(ht,"projectionMatrix",le.projectionMatrix),Yn.logarithmicDepthBuffer&&zo.setValue(ht,"logDepthBufFC",2/(Math.log(le.far+1)/Math.LN2)),se!==le&&(se=le,Yu=!0,K_=!0),Ne.isShaderMaterial||Ne.isMeshPhongMaterial||Ne.isMeshToonMaterial||Ne.isMeshStandardMaterial||Ne.envMap){const Wo=zo.map.cameraPosition;void 0!==Wo&&Wo.setValue(ht,Ht.setFromMatrixPosition(le.matrixWorld))}(Ne.isMeshPhongMaterial||Ne.isMeshToonMaterial||Ne.isMeshLambertMaterial||Ne.isMeshBasicMaterial||Ne.isMeshStandardMaterial||Ne.isShaderMaterial)&&zo.setValue(ht,"isOrthographic",!0===le.isOrthographicCamera),(Ne.isMeshPhongMaterial||Ne.isMeshToonMaterial||Ne.isMeshLambertMaterial||Ne.isMeshBasicMaterial||Ne.isMeshStandardMaterial||Ne.isShaderMaterial||Ne.isShadowMaterial||mt.isSkinnedMesh)&&zo.setValue(ht,"viewMatrix",le.matrixWorldInverse)}if(mt.isSkinnedMesh){zo.setOptional(ht,mt,"bindMatrix"),zo.setOptional(ht,mt,"bindMatrixInverse");const Wo=mt.skeleton;Wo&&(Yn.floatVertexTextures?(null===Wo.boneTexture&&Wo.computeBoneTexture(),zo.setValue(ht,"boneTexture",Wo.boneTexture,yt),zo.setValue(ht,"boneTextureSize",Wo.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const Km=dt.morphAttributes;if((void 0!==Km.position||void 0!==Km.normal||void 0!==Km.color&&!0===Yn.isWebGL2)&&Bt.update(mt,dt,Ne,Vd),(Yu||wi.receiveShadow!==mt.receiveShadow)&&(wi.receiveShadow=mt.receiveShadow,zo.setValue(ht,"receiveShadow",mt.receiveShadow)),Ne.isMeshGouraudMaterial&&null!==Ne.envMap&&(Ju.envMap.value=Ci,Ju.flipEnvMap.value=Ci.isCubeTexture&&!1===Ci.isRenderTargetTexture?-1:1),Yu&&(zo.setValue(ht,"toneMappingExposure",j.toneMappingExposure),wi.needsLights&&function _y(le,Be){le.ambientLightColor.needsUpdate=Be,le.lightProbe.needsUpdate=Be,le.directionalLights.needsUpdate=Be,le.directionalLightShadows.needsUpdate=Be,le.pointLights.needsUpdate=Be,le.pointLightShadows.needsUpdate=Be,le.spotLights.needsUpdate=Be,le.spotLightShadows.needsUpdate=Be,le.rectAreaLights.needsUpdate=Be,le.hemisphereLights.needsUpdate=Be}(Ju,K_),Hn&&!0===Ne.fog&&yr.refreshFogUniforms(Ju,Hn),yr.refreshMaterialUniforms(Ju,Ne,ze,Te,xt),vh.upload(ht,wi.uniformsList,Ju,yt)),Ne.isShaderMaterial&&!0===Ne.uniformsNeedUpdate&&(vh.upload(ht,wi.uniformsList,Ju,yt),Ne.uniformsNeedUpdate=!1),Ne.isSpriteMaterial&&zo.setValue(ht,"center",mt.center),zo.setValue(ht,"modelViewMatrix",mt.modelViewMatrix),zo.setValue(ht,"normalMatrix",mt.normalMatrix),zo.setValue(ht,"modelMatrix",mt.matrixWorld),Ne.isShaderMaterial||Ne.isRawShaderMaterial){const Wo=Ne.uniformsGroups;for(let Xm=0,X_=Wo.length;Xm<X_;Xm++)if(Yn.isWebGL2){const Qm=Wo[Xm];Ln.update(Qm,Vd),Ln.bind(Qm,Vd)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Vd}(le,Be,dt,Ne,mt);cn.setMaterial(Ne,oi);let Ci=dt.index,Ji=1;!0===Ne.wireframe&&(Ci=li.getWireframeAttribute(dt),Ji=2);const zi=dt.drawRange,Di=dt.attributes.position;let Cs=zi.start*Ji,Ho=(zi.start+zi.count)*Ji;null!==Hn&&(Cs=Math.max(Cs,Hn.start*Ji),Ho=Math.min(Ho,(Hn.start+Hn.count)*Ji)),null!==Ci?(Cs=Math.max(Cs,0),Ho=Math.min(Ho,Ci.count)):null!=Di&&(Cs=Math.max(Cs,0),Ho=Math.min(Ho,Di.count));const to=Ho-Cs;if(to<0||to===1/0)return;gt.setup(mt,Ne,xi,dt,Ci);let Gd,ls=ln;if(null!==Ci&&(Gd=en.get(Ci),ls=ei,ls.setIndex(Gd)),mt.isMesh)!0===Ne.wireframe?(cn.setLineWidth(Ne.wireframeLinewidth*on()),ls.setMode(1)):ls.setMode(4);else if(mt.isLine){let wi=Ne.linewidth;void 0===wi&&(wi=1),cn.setLineWidth(wi*on()),ls.setMode(mt.isLineSegments?1:mt.isLineLoop?2:3)}else mt.isPoints?ls.setMode(0):mt.isSprite&&ls.setMode(4);if(mt.isInstancedMesh)ls.renderInstances(Cs,to,mt.count);else if(dt.isInstancedBufferGeometry){const Z_=Math.min(dt.instanceCount,void 0!==dt._maxInstanceCount?dt._maxInstanceCount:1/0);ls.renderInstances(Cs,to,Z_)}else ls.render(Cs,to)},this.compile=function(le,Be){function dt(Ne,mt,Hn){!0===Ne.transparent&&Ne.side===It?(Ne.side=Ge,Ne.needsUpdate=!0,dl(Ne,mt,Hn),Ne.side=Xe,Ne.needsUpdate=!0,dl(Ne,mt,Hn),Ne.side=It):dl(Ne,mt,Hn)}E=me.get(le),E.init(),G.push(E),le.traverseVisible(function(Ne){Ne.isLight&&Ne.layers.test(Be.layers)&&(E.pushLight(Ne),Ne.castShadow&&E.pushShadow(Ne))}),E.setupLights(j.physicallyCorrectLights),le.traverse(function(Ne){const mt=Ne.material;if(mt)if(Array.isArray(mt))for(let Hn=0;Hn<mt.length;Hn++)dt(mt[Hn],le,Ne);else dt(mt,le,Ne)}),G.pop(),E=null};let ut=null;function pn(){Zi.stop()}function In(){Zi.start()}const Zi=new du;function ks(le,Be,dt,Ne){if(!1===le.visible)return;if(le.layers.test(Be.layers))if(le.isGroup)dt=le.renderOrder;else if(le.isLOD)!0===le.autoUpdate&&le.update(Be);else if(le.isLight)E.pushLight(le),le.castShadow&&E.pushShadow(le);else if(le.isSprite){if(!le.frustumCulled||At.intersectsSprite(le)){Ne&&Ht.setFromMatrixPosition(le.matrixWorld).applyMatrix4(st);const oi=Jn.update(le),xi=le.material;xi.visible&&A.push(le,oi,xi,dt,Ht.z,null)}}else if((le.isMesh||le.isLine||le.isPoints)&&(le.isSkinnedMesh&&le.skeleton.frame!==Mi.render.frame&&(le.skeleton.update(),le.skeleton.frame=Mi.render.frame),!le.frustumCulled||At.intersectsObject(le))){Ne&&Ht.setFromMatrixPosition(le.matrixWorld).applyMatrix4(st);const oi=Jn.update(le),xi=le.material;if(Array.isArray(xi)){const Ci=oi.groups;for(let Ji=0,zi=Ci.length;Ji<zi;Ji++){const Di=Ci[Ji],Cs=xi[Di.materialIndex];Cs&&Cs.visible&&A.push(le,oi,Cs,dt,Ht.z,Di)}}else xi.visible&&A.push(le,oi,xi,dt,Ht.z,null)}const Hn=le.children;for(let oi=0,xi=Hn.length;oi<xi;oi++)ks(Hn[oi],Be,dt,Ne)}function Mo(le,Be,dt,Ne){const mt=le.opaque,Hn=le.transmissive,oi=le.transparent;E.setupLightsView(dt),Hn.length>0&&function kd(le,Be,dt){const Ne=Yn.isWebGL2;null===xt&&(xt=new rs(1,1,{generateMipmaps:!0,type:xn.has("EXT_color_buffer_half_float")?$s:Hs,minFilter:xo,samples:Ne&&!0===h?4:0})),j.getDrawingBufferSize(tt),Ne?xt.setSize(tt.x,tt.y):xt.setSize(Ps(tt.x),Ps(tt.y));const mt=j.getRenderTarget();j.setRenderTarget(xt),j.clear();const Hn=j.toneMapping;j.toneMapping=us,Vr(le,Be,dt),j.toneMapping=Hn,yt.updateMultisampleRenderTarget(xt),yt.updateRenderTargetMipmap(xt),j.setRenderTarget(mt)}(mt,Be,dt),Ne&&cn.viewport(de.copy(Ne)),mt.length>0&&Vr(mt,Be,dt),Hn.length>0&&Vr(Hn,Be,dt),oi.length>0&&Vr(oi,Be,dt),cn.buffers.depth.setTest(!0),cn.buffers.depth.setMask(!0),cn.buffers.color.setMask(!0),cn.setPolygonOffset(!1)}function Vr(le,Be,dt){const Ne=!0===Be.isScene?Be.overrideMaterial:null;for(let mt=0,Hn=le.length;mt<Hn;mt++){const oi=le[mt],xi=oi.object,Ci=oi.geometry,Ji=null===Ne?oi.material:Ne,zi=oi.group;xi.layers.test(dt.layers)&&Kc(xi,Be,dt,Ci,Ji,zi)}}function Kc(le,Be,dt,Ne,mt,Hn){le.onBeforeRender(j,Be,dt,Ne,mt,Hn),le.modelViewMatrix.multiplyMatrices(dt.matrixWorldInverse,le.matrixWorld),le.normalMatrix.getNormalMatrix(le.modelViewMatrix),mt.onBeforeRender(j,Be,dt,Ne,le,Hn),!0===mt.transparent&&mt.side===It?(mt.side=Ge,mt.needsUpdate=!0,j.renderBufferDirect(dt,Be,Ne,mt,le,Hn),mt.side=Xe,mt.needsUpdate=!0,j.renderBufferDirect(dt,Be,Ne,mt,le,Hn),mt.side=It):j.renderBufferDirect(dt,Be,Ne,mt,le,Hn),le.onAfterRender(j,Be,dt,Ne,mt,Hn)}function dl(le,Be,dt){!0!==Be.isScene&&(Be=kt);const Ne=vt.get(le),mt=E.state.lights,oi=mt.state.version,xi=kn.getParameters(le,mt.state,E.state.shadowsArray,Be,dt),Ci=kn.getProgramCacheKey(xi);let Ji=Ne.programs;Ne.environment=le.isMeshStandardMaterial?Be.environment:null,Ne.fog=Be.fog,Ne.envMap=(le.isMeshStandardMaterial?gn:zt).get(le.envMap||Ne.environment),void 0===Ji&&(le.addEventListener("dispose",Gr),Ji=new Map,Ne.programs=Ji);let zi=Ji.get(Ci);if(void 0!==zi){if(Ne.currentProgram===zi&&Ne.lightsStateVersion===oi)return gy(le,xi),zi}else xi.uniforms=kn.getUniforms(le),le.onBuild(dt,xi,j),le.onBeforeCompile(xi,j),zi=kn.acquireProgram(xi,Ci),Ji.set(Ci,zi),Ne.uniforms=xi.uniforms;const Di=Ne.uniforms;(!le.isShaderMaterial&&!le.isRawShaderMaterial||!0===le.clipping)&&(Di.clippingPlanes=re.uniform),gy(le,xi),Ne.needsLights=function vy(le){return le.isMeshLambertMaterial||le.isMeshToonMaterial||le.isMeshPhongMaterial||le.isMeshStandardMaterial||le.isShadowMaterial||le.isShaderMaterial&&!0===le.lights}(le),Ne.lightsStateVersion=oi,Ne.needsLights&&(Di.ambientLightColor.value=mt.state.ambient,Di.lightProbe.value=mt.state.probe,Di.directionalLights.value=mt.state.directional,Di.directionalLightShadows.value=mt.state.directionalShadow,Di.spotLights.value=mt.state.spot,Di.spotLightShadows.value=mt.state.spotShadow,Di.rectAreaLights.value=mt.state.rectArea,Di.ltc_1.value=mt.state.rectAreaLTC1,Di.ltc_2.value=mt.state.rectAreaLTC2,Di.pointLights.value=mt.state.point,Di.pointLightShadows.value=mt.state.pointShadow,Di.hemisphereLights.value=mt.state.hemi,Di.directionalShadowMap.value=mt.state.directionalShadowMap,Di.directionalShadowMatrix.value=mt.state.directionalShadowMatrix,Di.spotShadowMap.value=mt.state.spotShadowMap,Di.spotLightMatrix.value=mt.state.spotLightMatrix,Di.spotLightMap.value=mt.state.spotLightMap,Di.pointShadowMap.value=mt.state.pointShadowMap,Di.pointShadowMatrix.value=mt.state.pointShadowMatrix);const Cs=zi.getUniforms(),Ho=vh.seqWithValue(Cs.seq,Di);return Ne.currentProgram=zi,Ne.uniformsList=Ho,zi}function gy(le,Be){const dt=vt.get(le);dt.outputEncoding=Be.outputEncoding,dt.instancing=Be.instancing,dt.skinning=Be.skinning,dt.morphTargets=Be.morphTargets,dt.morphNormals=Be.morphNormals,dt.morphColors=Be.morphColors,dt.morphTargetsCount=Be.morphTargetsCount,dt.numClippingPlanes=Be.numClippingPlanes,dt.numIntersection=Be.numClipIntersection,dt.vertexAlphas=Be.vertexAlphas,dt.vertexTangents=Be.vertexTangents,dt.toneMapping=Be.toneMapping}Zi.setAnimationLoop(function Et(le){ut&&ut(le)}),typeof self<"u"&&Zi.setContext(self),this.setAnimationLoop=function(le){ut=le,En.setAnimationLoop(le),null===le?Zi.stop():Zi.start()},En.addEventListener("sessionstart",pn),En.addEventListener("sessionend",In),this.render=function(le,Be){if(void 0===Be||!0===Be.isCamera){if(!0!==k){if(!0===le.matrixWorldAutoUpdate&&le.updateMatrixWorld(),null===Be.parent&&!0===Be.matrixWorldAutoUpdate&&Be.updateMatrixWorld(),!0===En.enabled&&!0===En.isPresenting&&(!0===En.cameraAutoUpdate&&En.updateCamera(Be),Be=En.getCamera()),!0===le.isScene&&le.onBeforeRender(j,le,Be,$),E=me.get(le,G.length),E.init(),G.push(E),st.multiplyMatrices(Be.projectionMatrix,Be.matrixWorldInverse),At.setFromProjectionMatrix(st),Pt=this.localClippingEnabled,_t=re.init(this.clippingPlanes,Pt,Be),A=lr.get(le,L.length),A.init(),L.push(A),ks(le,Be,0,j.sortObjects),A.finish(),!0===j.sortObjects&&A.sort(bt,je),!0===_t&&re.beginShadows(),qe.render(E.state.shadowsArray,le,Be),!0===_t&&re.endShadows(),!0===this.info.autoReset&&this.info.reset(),Ct.render(A,le),E.setupLights(j.physicallyCorrectLights),Be.isArrayCamera){const Ne=Be.cameras;for(let mt=0,Hn=Ne.length;mt<Hn;mt++){const oi=Ne[mt];Mo(A,le,oi,oi.viewport)}}else Mo(A,le,Be);null!==$&&(yt.updateMultisampleRenderTarget($),yt.updateRenderTargetMipmap($)),!0===le.isScene&&le.onAfterRender(j,le,Be),gt.resetDefaultState(),J=-1,se=null,G.pop(),E=G.length>0?G[G.length-1]:null,L.pop(),A=L.length>0?L[L.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return Y},this.getActiveMipmapLevel=function(){return Z},this.getRenderTarget=function(){return $},this.setRenderTargetTextures=function(le,Be,dt){vt.get(le.texture).__webglTexture=Be,vt.get(le.depthTexture).__webglTexture=dt;const Ne=vt.get(le);Ne.__hasExternalTextures=!0,Ne.__hasExternalTextures&&(Ne.__autoAllocateDepthBuffer=void 0===dt,Ne.__autoAllocateDepthBuffer||!0===xn.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Ne.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(le,Be){const dt=vt.get(le);dt.__webglFramebuffer=Be,dt.__useDefaultFramebuffer=void 0===Be},this.setRenderTarget=function(le,Be=0,dt=0){$=le,Y=Be,Z=dt;let Ne=!0,mt=null,Hn=!1,oi=!1;if(le){const Ci=vt.get(le);void 0!==Ci.__useDefaultFramebuffer?(cn.bindFramebuffer(36160,null),Ne=!1):void 0===Ci.__webglFramebuffer?yt.setupRenderTarget(le):Ci.__hasExternalTextures&&yt.rebindTextures(le,vt.get(le.texture).__webglTexture,vt.get(le.depthTexture).__webglTexture);const Ji=le.texture;(Ji.isData3DTexture||Ji.isDataArrayTexture||Ji.isCompressedArrayTexture)&&(oi=!0);const zi=vt.get(le).__webglFramebuffer;le.isWebGLCubeRenderTarget?(mt=zi[Be],Hn=!0):mt=Yn.isWebGL2&&le.samples>0&&!1===yt.useMultisampledRTT(le)?vt.get(le).__webglMultisampledFramebuffer:zi,de.copy(le.viewport),_e.copy(le.scissor),K=le.scissorTest}else de.copy(Se).multiplyScalar(ze).floor(),_e.copy(at).multiplyScalar(ze).floor(),K=Tt;if(cn.bindFramebuffer(36160,mt)&&Yn.drawBuffers&&Ne&&cn.drawBuffers(le,mt),cn.viewport(de),cn.scissor(_e),cn.setScissorTest(K),Hn){const Ci=vt.get(le.texture);ht.framebufferTexture2D(36160,36064,34069+Be,Ci.__webglTexture,dt)}else if(oi){const Ci=vt.get(le.texture);ht.framebufferTextureLayer(36160,36064,Ci.__webglTexture,dt||0,Be||0)}J=-1},this.readRenderTargetPixels=function(le,Be,dt,Ne,mt,Hn,oi){if(!le||!le.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let xi=vt.get(le).__webglFramebuffer;if(le.isWebGLCubeRenderTarget&&void 0!==oi&&(xi=xi[oi]),xi){cn.bindFramebuffer(36160,xi);try{const Ci=le.texture,Ji=Ci.format,zi=Ci.type;if(Ji!==we&&un.convert(Ji)!==ht.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const Di=zi===$s&&(xn.has("EXT_color_buffer_half_float")||Yn.isWebGL2&&xn.has("EXT_color_buffer_float"));if(!(zi===Hs||un.convert(zi)===ht.getParameter(35738)||zi===br&&(Yn.isWebGL2||xn.has("OES_texture_float")||xn.has("WEBGL_color_buffer_float"))||Di))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");Be>=0&&Be<=le.width-Ne&&dt>=0&&dt<=le.height-mt&&ht.readPixels(Be,dt,Ne,mt,un.convert(Ji),un.convert(zi),Hn)}finally{const Ci=null!==$?vt.get($).__webglFramebuffer:null;cn.bindFramebuffer(36160,Ci)}}},this.copyFramebufferToTexture=function(le,Be,dt=0){const Ne=Math.pow(2,-dt),mt=Math.floor(Be.image.width*Ne),Hn=Math.floor(Be.image.height*Ne);yt.setTexture2D(Be,0),ht.copyTexSubImage2D(3553,dt,0,0,le.x,le.y,mt,Hn),cn.unbindTexture()},this.copyTextureToTexture=function(le,Be,dt,Ne=0){const mt=Be.image.width,Hn=Be.image.height,oi=un.convert(dt.format),xi=un.convert(dt.type);yt.setTexture2D(dt,0),ht.pixelStorei(37440,dt.flipY),ht.pixelStorei(37441,dt.premultiplyAlpha),ht.pixelStorei(3317,dt.unpackAlignment),Be.isDataTexture?ht.texSubImage2D(3553,Ne,le.x,le.y,mt,Hn,oi,xi,Be.image.data):Be.isCompressedTexture?ht.compressedTexSubImage2D(3553,Ne,le.x,le.y,Be.mipmaps[0].width,Be.mipmaps[0].height,oi,Be.mipmaps[0].data):ht.texSubImage2D(3553,Ne,le.x,le.y,oi,xi,Be.image),0===Ne&&dt.generateMipmaps&&ht.generateMipmap(3553),cn.unbindTexture()},this.copyTextureToTexture3D=function(le,Be,dt,Ne,mt=0){if(j.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const Hn=le.max.x-le.min.x+1,oi=le.max.y-le.min.y+1,xi=le.max.z-le.min.z+1,Ci=un.convert(Ne.format),Ji=un.convert(Ne.type);let zi;if(Ne.isData3DTexture)yt.setTexture3D(Ne,0),zi=32879;else{if(!Ne.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");yt.setTexture2DArray(Ne,0),zi=35866}ht.pixelStorei(37440,Ne.flipY),ht.pixelStorei(37441,Ne.premultiplyAlpha),ht.pixelStorei(3317,Ne.unpackAlignment);const Di=ht.getParameter(3314),Cs=ht.getParameter(32878),Ho=ht.getParameter(3316),to=ht.getParameter(3315),Gd=ht.getParameter(32877),ls=dt.isCompressedTexture?dt.mipmaps[0]:dt.image;ht.pixelStorei(3314,ls.width),ht.pixelStorei(32878,ls.height),ht.pixelStorei(3316,le.min.x),ht.pixelStorei(3315,le.min.y),ht.pixelStorei(32877,le.min.z),dt.isDataTexture||dt.isData3DTexture?ht.texSubImage3D(zi,mt,Be.x,Be.y,Be.z,Hn,oi,xi,Ci,Ji,ls.data):dt.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),ht.compressedTexSubImage3D(zi,mt,Be.x,Be.y,Be.z,Hn,oi,xi,Ci,ls.data)):ht.texSubImage3D(zi,mt,Be.x,Be.y,Be.z,Hn,oi,xi,Ci,Ji,ls),ht.pixelStorei(3314,Di),ht.pixelStorei(32878,Cs),ht.pixelStorei(3316,Ho),ht.pixelStorei(3315,to),ht.pixelStorei(32877,Gd),0===mt&&Ne.generateMipmaps&&ht.generateMipmap(zi),cn.unbindTexture()},this.initTexture=function(le){le.isCubeTexture?yt.setTextureCube(le,0):le.isData3DTexture?yt.setTexture3D(le,0):le.isDataArrayTexture||le.isCompressedArrayTexture?yt.setTexture2DArray(le,0):yt.setTexture2D(le,0),cn.unbindTexture()},this.resetState=function(){Y=0,Z=0,$=null,cn.reset(),gt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}(class p_ extends f_{}).prototype.isWebGL1Renderer=!0;class xu extends Jr{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(t.backgroundIntensity=this.backgroundIntensity),t}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}class bo extends gr{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Xt(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const Ah=new ce,Ih=new ce,$f=new Nt,Ph=new $n,Bs=new W;class zc extends Jr{constructor(e=new di,t=new bo){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,s=[0];for(let l=1,h=t.count;l<h;l++)Ah.fromBufferAttribute(t,l-1),Ih.fromBufferAttribute(t,l),s[l]=s[l-1],s[l]+=Ah.distanceTo(Ih);e.setAttribute("lineDistance",new dn(s,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const s=this.geometry,l=this.matrixWorld,h=e.params.Line.threshold,g=s.drawRange;if(null===s.boundingSphere&&s.computeBoundingSphere(),Bs.copy(s.boundingSphere),Bs.applyMatrix4(l),Bs.radius+=h,!1===e.ray.intersectsSphere(Bs))return;$f.copy(l).invert(),Ph.copy(e.ray).applyMatrix4($f);const _=h/((this.scale.x+this.scale.y+this.scale.z)/3),b=_*_,x=new ce,S=new ce,A=new ce,E=new ce,L=this.isLineSegments?2:1,G=s.index,k=s.attributes.position;if(null!==G)for(let $=Math.max(0,g.start),J=Math.min(G.count,g.start+g.count)-1;$<J;$+=L){const se=G.getX($),de=G.getX($+1);if(x.fromBufferAttribute(k,se),S.fromBufferAttribute(k,de),Ph.distanceSqToSegment(x,S,E,A)>b)continue;E.applyMatrix4(this.matrixWorld);const K=e.ray.origin.distanceTo(E);K<e.near||K>e.far||t.push({distance:K,point:A.clone().applyMatrix4(this.matrixWorld),index:$,face:null,faceIndex:null,object:this})}else for(let $=Math.max(0,g.start),J=Math.min(k.count,g.start+g.count)-1;$<J;$+=L){if(x.fromBufferAttribute(k,$),S.fromBufferAttribute(k,$+1),Ph.distanceSqToSegment(x,S,E,A)>b)continue;E.applyMatrix4(this.matrixWorld);const de=e.ray.origin.distanceTo(E);de<e.near||de>e.far||t.push({distance:de,point:A.clone().applyMatrix4(this.matrixWorld),index:$,face:null,faceIndex:null,object:this})}}updateMorphTargets(){const t=this.geometry.morphAttributes,s=Object.keys(t);if(s.length>0){const l=t[s[0]];if(void 0!==l){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let h=0,g=l.length;h<g;h++){const _=l[h].name||String(h);this.morphTargetInfluences.push(0),this.morphTargetDictionary[_]=h}}}}}const Yf=new ce,Fv=new ce;class Wc extends zc{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,s=[];for(let l=0,h=t.count;l<h;l+=2)Yf.fromBufferAttribute(t,l),Fv.fromBufferAttribute(t,l+1),s[l]=0===l?0:s[l-1],s[l+1]=s[l]+Yf.distanceTo(Fv);e.setAttribute("lineDistance",new dn(s,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class Pm extends gr{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Xt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const Om=new Nt,Jf=new $n,Su=new W,Oh=new ce;class y_ extends Jr{constructor(e=new di,t=new Pm){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const s=this.geometry,l=this.matrixWorld,h=e.params.Points.threshold,g=s.drawRange;if(null===s.boundingSphere&&s.computeBoundingSphere(),Su.copy(s.boundingSphere),Su.applyMatrix4(l),Su.radius+=h,!1===e.ray.intersectsSphere(Su))return;Om.copy(l).invert(),Jf.copy(e.ray).applyMatrix4(Om);const _=h/((this.scale.x+this.scale.y+this.scale.z)/3),b=_*_,x=s.index,A=s.attributes.position;if(null!==x)for(let G=Math.max(0,g.start),j=Math.min(x.count,g.start+g.count);G<j;G++){const k=x.getX(G);Oh.fromBufferAttribute(A,k),qf(Oh,k,b,l,e,t,this)}else for(let G=Math.max(0,g.start),j=Math.min(A.count,g.start+g.count);G<j;G++)Oh.fromBufferAttribute(A,G),qf(Oh,G,b,l,e,t,this)}updateMorphTargets(){const t=this.geometry.morphAttributes,s=Object.keys(t);if(s.length>0){const l=t[s[0]];if(void 0!==l){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let h=0,g=l.length;h<g;h++){const _=l[h].name||String(h);this.morphTargetInfluences.push(0),this.morphTargetDictionary[_]=h}}}}}function qf(v,e,t,s,l,h,g){const _=Jf.distanceSqToPoint(v);if(_<t){const b=new ce;Jf.closestPointToPoint(v,b),b.applyMatrix4(s);const x=l.ray.origin.distanceTo(b);if(x<l.near||x>l.far)return;h.push({distance:x,distanceToRay:Math.sqrt(_),point:b,index:e,face:null,object:g})}}class Ed extends gr{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Xt(16777215),this.specular=new Xt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Xt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ro,this.normalScale=new Oe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=cr,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}function Uo(v,e,t){return ll(v)?new v.constructor(v.subarray(e,void 0!==t?t:v.length)):v.slice(e,t)}function Ol(v,e,t){return!v||!t&&v.constructor===e?v:"number"==typeof e.BYTES_PER_ELEMENT?new e(v):Array.prototype.slice.call(v)}function ll(v){return ArrayBuffer.isView(v)&&!(v instanceof DataView)}class Uu{constructor(e,t,s,l){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==l?l:new t.constructor(s),this.sampleValues=t,this.valueSize=s,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let s=this._cachedIndex,l=t[s],h=t[s-1];e:{t:{let g;n:{i:if(!(e<l)){for(let _=s+2;;){if(void 0===l){if(e<h)break i;return s=t.length,this._cachedIndex=s,this.copySampleValue_(s-1)}if(s===_)break;if(h=l,l=t[++s],e<l)break t}g=t.length;break n}if(e>=h)break e;{const _=t[1];e<_&&(s=2,h=_);for(let b=s-2;;){if(void 0===h)return this._cachedIndex=0,this.copySampleValue_(0);if(s===b)break;if(l=h,h=t[--s-1],e>=h)break t}g=s,s=0}}for(;s<g;){const _=s+g>>>1;e<t[_]?g=_:s=_+1}if(l=t[s],h=t[s-1],void 0===h)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===l)return s=t.length,this._cachedIndex=s,this.copySampleValue_(s-1)}this._cachedIndex=s,this.intervalChanged_(s,h,l)}return this.interpolate_(s,h,e,l)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,s=this.sampleValues,l=this.valueSize,h=e*l;for(let g=0;g!==l;++g)t[g]=s[h+g];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class op extends Uu{constructor(e,t,s,l){super(e,t,s,l),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:2400,endingEnd:2400}}intervalChanged_(e,t,s){const l=this.parameterPositions;let h=e-2,g=e+1,_=l[h],b=l[g];if(void 0===_)switch(this.getSettings_().endingStart){case 2401:h=e,_=2*t-s;break;case 2402:h=l.length-2,_=t+l[h]-l[h+1];break;default:h=e,_=s}if(void 0===b)switch(this.getSettings_().endingEnd){case 2401:g=e,b=2*s-t;break;case 2402:g=1,b=s+l[1]-l[0];break;default:g=e-1,b=t}const x=.5*(s-t),S=this.valueSize;this._weightPrev=x/(t-_),this._weightNext=x/(b-s),this._offsetPrev=h*S,this._offsetNext=g*S}interpolate_(e,t,s,l){const h=this.resultBuffer,g=this.sampleValues,_=this.valueSize,b=e*_,x=b-_,S=this._offsetPrev,A=this._offsetNext,E=this._weightPrev,L=this._weightNext,G=(s-t)/(l-t),j=G*G,k=j*G,Y=-E*k+2*E*j-E*G,Z=(1+E)*k+(-1.5-2*E)*j+(-.5+E)*G+1,$=(-1-L)*k+(1.5+L)*j+.5*G,J=L*k-L*j;for(let se=0;se!==_;++se)h[se]=Y*g[S+se]+Z*g[x+se]+$*g[b+se]+J*g[A+se];return h}}class Vv extends Uu{constructor(e,t,s,l){super(e,t,s,l)}interpolate_(e,t,s,l){const h=this.resultBuffer,g=this.sampleValues,_=this.valueSize,b=e*_,x=b-_,S=(s-t)/(l-t),A=1-S;for(let E=0;E!==_;++E)h[E]=g[x+E]*A+g[b+E]*S;return h}}class Uv extends Uu{constructor(e,t,s,l){super(e,t,s,l)}interpolate_(e){return this.copySampleValue_(e-1)}}class Nl{constructor(e,t,s,l){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Ol(t,this.TimeBufferType),this.values=Ol(s,this.ValueBufferType),this.setInterpolation(l||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let s;if(t.toJSON!==this.toJSON)s=t.toJSON(e);else{s={name:e.name,times:Ol(e.times,Array),values:Ol(e.values,Array)};const l=e.getInterpolation();l!==e.DefaultInterpolation&&(s.interpolation=l)}return s.type=e.ValueTypeName,s}InterpolantFactoryMethodDiscrete(e){return new Uv(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Vv(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new op(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case 2300:t=this.InterpolantFactoryMethodDiscrete;break;case 2301:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const s="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(s);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",s),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let s=0,l=t.length;s!==l;++s)t[s]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let s=0,l=t.length;s!==l;++s)t[s]*=e}return this}trim(e,t){const s=this.times,l=s.length;let h=0,g=l-1;for(;h!==l&&s[h]<e;)++h;for(;-1!==g&&s[g]>t;)--g;if(++g,0!==h||g!==l){h>=g&&(g=Math.max(g,1),h=g-1);const _=this.getValueSize();this.times=Uo(s,h,g),this.values=Uo(this.values,h*_,g*_)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const s=this.times,l=this.values,h=s.length;0===h&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let g=null;for(let _=0;_!==h;_++){const b=s[_];if("number"==typeof b&&isNaN(b)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,_,b),e=!1;break}if(null!==g&&g>b){console.error("THREE.KeyframeTrack: Out of order keys.",this,_,b,g),e=!1;break}g=b}if(void 0!==l&&ll(l))for(let _=0,b=l.length;_!==b;++_){const x=l[_];if(isNaN(x)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,_,x),e=!1;break}}return e}optimize(){const e=Uo(this.times),t=Uo(this.values),s=this.getValueSize(),l=2302===this.getInterpolation(),h=e.length-1;let g=1;for(let _=1;_<h;++_){let b=!1;const x=e[_];if(x!==e[_+1]&&(1!==_||x!==e[0]))if(l)b=!0;else{const A=_*s,E=A-s,L=A+s;for(let G=0;G!==s;++G){const j=t[A+G];if(j!==t[E+G]||j!==t[L+G]){b=!0;break}}}if(b){if(_!==g){e[g]=e[_];const A=_*s,E=g*s;for(let L=0;L!==s;++L)t[E+L]=t[A+L]}++g}}if(h>0){e[g]=e[h];for(let _=h*s,b=g*s,x=0;x!==s;++x)t[b+x]=t[_+x];++g}return g!==e.length?(this.times=Uo(e,0,g),this.values=Uo(t,0,g*s)):(this.times=e,this.values=t),this}clone(){const e=Uo(this.times,0),t=Uo(this.values,0),l=new(0,this.constructor)(this.name,e,t);return l.createInterpolant=this.createInterpolant,l}}Nl.prototype.TimeBufferType=Float32Array,Nl.prototype.ValueBufferType=Float32Array,Nl.prototype.DefaultInterpolation=2301;class Hu extends Nl{}Hu.prototype.ValueTypeName="bool",Hu.prototype.ValueBufferType=Array,Hu.prototype.DefaultInterpolation=2300,Hu.prototype.InterpolantFactoryMethodLinear=void 0,Hu.prototype.InterpolantFactoryMethodSmooth=void 0;(class ap extends Nl{}).prototype.ValueTypeName="color";(class lp extends Nl{}).prototype.ValueTypeName="number";class Hv extends Uu{constructor(e,t,s,l){super(e,t,s,l)}interpolate_(e,t,s,l){const h=this.resultBuffer,g=this.sampleValues,_=this.valueSize,b=(s-t)/(l-t);let x=e*_;for(let S=x+_;x!==S;x+=4)wr.slerpFlat(h,0,g,x-_,g,x,b);return h}}class Wh extends Nl{InterpolantFactoryMethodLinear(e){return new Hv(this.times,this.values,this.getValueSize(),e)}}Wh.prototype.ValueTypeName="quaternion",Wh.prototype.DefaultInterpolation=2301,Wh.prototype.InterpolantFactoryMethodSmooth=void 0;class Pd extends Nl{}Pd.prototype.ValueTypeName="string",Pd.prototype.ValueBufferType=Array,Pd.prototype.DefaultInterpolation=2300,Pd.prototype.InterpolantFactoryMethodLinear=void 0,Pd.prototype.InterpolantFactoryMethodSmooth=void 0;(class cp extends Nl{}).prototype.ValueTypeName="vector";class Od extends Error{constructor(e,t){super(e),this.response=t}}class A_ extends Jr{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Xt(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}class O_ extends A_{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class k_{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=dp(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=dp();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function dp(){return(typeof performance>"u"?Date:performance).now()}const H_="\\[\\]\\.:\\/",ry=new RegExp("["+H_+"]","g"),z_="[^"+H_+"]",zy="[^"+H_.replace("\\.","")+"]",qy=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",z_)+/(WCOD+)?/.source.replace("WCOD",zy)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",z_)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",z_)+"$"),Zy=["material","materials","bones","map"];class Ky{constructor(e,t,s){const l=s||Nr.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,l)}getValue(e,t){this.bind();const l=this._bindings[this._targetGroup.nCachedObjects_];void 0!==l&&l.getValue(e,t)}setValue(e,t){const s=this._bindings;for(let l=this._targetGroup.nCachedObjects_,h=s.length;l!==h;++l)s[l].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,s=e.length;t!==s;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,s=e.length;t!==s;++t)e[t].unbind()}}let Nr=(()=>{class v{constructor(t,s,l){this.path=s,this.parsedPath=l||v.parseTrackName(s),this.node=v.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,s,l){return t&&t.isAnimationObjectGroup?new v.Composite(t,s,l):new v(t,s,l)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(ry,"")}static parseTrackName(t){const s=qy.exec(t);if(null===s)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const l={nodeName:s[2],objectName:s[3],objectIndex:s[4],propertyName:s[5],propertyIndex:s[6]},h=l.nodeName&&l.nodeName.lastIndexOf(".");if(void 0!==h&&-1!==h){const g=l.nodeName.substring(h+1);-1!==Zy.indexOf(g)&&(l.nodeName=l.nodeName.substring(0,h),l.objectName=g)}if(null===l.propertyName||0===l.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return l}static findNode(t,s){if(void 0===s||""===s||"."===s||-1===s||s===t.name||s===t.uuid)return t;if(t.skeleton){const l=t.skeleton.getBoneByName(s);if(void 0!==l)return l}if(t.children){const l=function(g){for(let _=0;_<g.length;_++){const b=g[_];if(b.name===s||b.uuid===s)return b;const x=l(b.children);if(x)return x}return null},h=l(t.children);if(h)return h}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,s){t[s]=this.targetObject[this.propertyName]}_getValue_array(t,s){const l=this.resolvedProperty;for(let h=0,g=l.length;h!==g;++h)t[s++]=l[h]}_getValue_arrayElement(t,s){t[s]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,s){this.resolvedProperty.toArray(t,s)}_setValue_direct(t,s){this.targetObject[this.propertyName]=t[s]}_setValue_direct_setNeedsUpdate(t,s){this.targetObject[this.propertyName]=t[s],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,s){this.targetObject[this.propertyName]=t[s],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,s){const l=this.resolvedProperty;for(let h=0,g=l.length;h!==g;++h)l[h]=t[s++]}_setValue_array_setNeedsUpdate(t,s){const l=this.resolvedProperty;for(let h=0,g=l.length;h!==g;++h)l[h]=t[s++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,s){const l=this.resolvedProperty;for(let h=0,g=l.length;h!==g;++h)l[h]=t[s++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,s){this.resolvedProperty[this.propertyIndex]=t[s]}_setValue_arrayElement_setNeedsUpdate(t,s){this.resolvedProperty[this.propertyIndex]=t[s],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,s){this.resolvedProperty[this.propertyIndex]=t[s],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,s){this.resolvedProperty.fromArray(t,s)}_setValue_fromArray_setNeedsUpdate(t,s){this.resolvedProperty.fromArray(t,s),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,s){this.resolvedProperty.fromArray(t,s),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,s){this.bind(),this.getValue(t,s)}_setValue_unbound(t,s){this.bind(),this.setValue(t,s)}bind(){let t=this.node;const s=this.parsedPath,l=s.objectName,h=s.propertyName;let g=s.propertyIndex;if(t||(t=v.findNode(this.rootNode,s.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(l){let S=s.objectIndex;switch(l){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let A=0;A<t.length;A++)if(t[A].name===S){S=A;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);t=t.material.map;break;default:if(void 0===t[l])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[l]}if(void 0!==S){if(void 0===t[S])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[S]}}const _=t[h];if(void 0===_)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+s.nodeName+"."+h+" but it wasn't found.",t);let b=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?b=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(b=this.Versioning.MatrixWorldNeedsUpdate);let x=this.BindingType.Direct;if(void 0!==g){if("morphTargetInfluences"===h){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[g]&&(g=t.morphTargetDictionary[g])}x=this.BindingType.ArrayElement,this.resolvedProperty=_,this.propertyIndex=g}else void 0!==_.fromArray&&void 0!==_.toArray?(x=this.BindingType.HasFromToArray,this.resolvedProperty=_):Array.isArray(_)?(x=this.BindingType.EntireArray,this.resolvedProperty=_):this.propertyName=h;this.getValue=this.GetterByBindingType[x],this.setValue=this.SetterByBindingTypeAndVersioning[x][b]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return v.Composite=Ky,v})();Nr.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Nr.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Nr.prototype.GetterByBindingType=[Nr.prototype._getValue_direct,Nr.prototype._getValue_array,Nr.prototype._getValue_arrayElement,Nr.prototype._getValue_toArray],Nr.prototype.SetterByBindingTypeAndVersioning=[[Nr.prototype._setValue_direct,Nr.prototype._setValue_direct_setNeedsUpdate,Nr.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Nr.prototype._setValue_array,Nr.prototype._setValue_array_setNeedsUpdate,Nr.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Nr.prototype._setValue_arrayElement,Nr.prototype._setValue_arrayElement_setNeedsUpdate,Nr.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Nr.prototype._setValue_fromArray,Nr.prototype._setValue_fromArray_setNeedsUpdate,Nr.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]],new Float32Array(1);class oy{constructor(e,t,s=0,l=1/0){this.ray=new $n(e,t),this.near=s,this.far=l,this.camera=null,this.layers=new hr,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,s=[]){return $m(e,this,s,t),s.sort(W_),s}intersectObjects(e,t=!0,s=[]){for(let l=0,h=e.length;l<h;l++)$m(e[l],this,s,t);return s.sort(W_),s}}function W_(v,e){return v.distance-e.distance}function $m(v,e,t,s){if(v.layers.test(e.layers)&&v.raycast(e,t),!0===s){const l=v.children;for(let h=0,g=l.length;h<g;h++)$m(l[h],e,t,!0)}}class Jh extends Wc{constructor(e=10,t=10,s=4473924,l=8947848){s=new Xt(s),l=new Xt(l);const h=t/2,g=e/t,_=e/2,b=[],x=[];for(let E=0,L=0,G=-_;E<=t;E++,G+=g){b.push(-_,0,G,_,0,G),b.push(G,0,-_,G,0,_);const j=E===h?s:l;j.toArray(x,L),L+=3,j.toArray(x,L),L+=3,j.toArray(x,L),L+=3,j.toArray(x,L),L+=3}const S=new di;S.setAttribute("position",new dn(b,3)),S.setAttribute("color",new dn(x,3)),super(S,new bo({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:pe}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=pe)}},_n=>{_n(_n.s=6695)}]);