"use strict";(self.webpackChunkjervnorsk_website_frontend=self.webpackChunkjervnorsk_website_frontend||[]).push([[179],{5361:(an,Qe,ee)=>{ee.d(Qe,{v:()=>W});var c=ee(1571);let W=(()=>{class be{constructor(){this.title="< error />",this.subtitle=""}}return be.\u0275fac=function(Se){return new(Se||be)},be.\u0275cmp=c.Xpm({type:be,selectors:[["ng-component"]],decls:15,vars:4,consts:[[1,"error","d-flex","flex-column","justify-content-center"],[1,"stack","text-center",2,"--stacks","3"],[2,"--index","0"],[2,"--index","1"],[2,"--index","2"],[1,"stack","text-center",2,"--stacks","1"]],template:function(Se,tt){1&Se&&(c.TgZ(0,"div",0)(1,"div",1)(2,"span",2)(3,"h1"),c._uU(4),c.qZA()(),c.TgZ(5,"span",3)(6,"h1"),c._uU(7),c.qZA()(),c.TgZ(8,"span",4)(9,"h1"),c._uU(10),c.qZA()()(),c.TgZ(11,"div",5)(12,"span",2)(13,"h6"),c._uU(14),c.qZA()()()()),2&Se&&(c.xp6(4),c.Oqu(tt.title),c.xp6(3),c.Oqu(tt.title),c.xp6(3),c.Oqu(tt.title),c.xp6(4),c.Oqu(tt.subtitle))},styles:[".error[_ngcontent-%COMP%]{color:var(--color)}.error[_ngcontent-%COMP%]   .stack[_ngcontent-%COMP%]{display:grid}.error[_ngcontent-%COMP%]   .stack[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{grid-row-start:1;grid-column-start:1;--stack-height: calc(100% /var(--stacks) - 1px);--inverse-index: calc(calc(var(--stacks) - 1) - var(--index));--clip-top: calc(var(--stack-height) * var(--index));--clip-bottom: calc(var(--stack-height) * var(--inverse-index));clip-path:inset(var(--clip-top) 0 var(--clip-bottom) 0);animation-name:_ngcontent-%COMP%_stack,_ngcontent-%COMP%_glitch;animation-duration:.34s,2s;animation-timing-function:cubic-bezier(.46,.29,0,1.24),ease;animation-iteration-count:1,infinite;animation-delay:calc(var(--index) * .12s),2s;animation-fill-mode:backwards,none;animation-direction:normal,alternate-reverse}.error[_ngcontent-%COMP%]   .stack[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(odd){--glitch-translate: 8px}.error[_ngcontent-%COMP%]   .stack[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(even){--glitch-translate: -8px}@keyframes _ngcontent-%COMP%_stack{0%{opacity:0;transform:translate(-50%);text-shadow:-2px 3px 0 red,2px -3px 0 blue}60%{opacity:.5;transform:translate(50%)}80%{transform:none;opacity:1;text-shadow:2px -3px 0 red,-2px 3px 0 blue}to{text-shadow:none}}@keyframes _ngcontent-%COMP%_glitch{0%{text-shadow:-2px 3px 0 red,2px -3px 0 blue;transform:translate(var(--glitch-translate))}2%{text-shadow:2px -3px 0 red,-2px 3px 0 blue}4%,to{text-shadow:none;transform:none}}"]}),be})()},5874:(an,Qe,ee)=>{ee.d(Qe,{u:()=>be});var c=ee(5361),W=ee(1571);let be=(()=>{class Oe extends c.v{constructor(){super(...arguments),this.title="< not found />",this.subtitle="Missing something?"}}return Oe.\u0275fac=function(){let Se;return function(ft){return(Se||(Se=W.n5z(Oe)))(ft||Oe)}}(),Oe.\u0275cmp=W.Xpm({type:Oe,selectors:[["ng-component"]],features:[W.qOj],decls:15,vars:4,consts:[[1,"error","d-flex","flex-column","justify-content-center"],[1,"stack","text-center",2,"--stacks","3"],[2,"--index","0"],[2,"--index","1"],[2,"--index","2"],[1,"stack","text-center",2,"--stacks","1"]],template:function(tt,ft){1&tt&&(W.TgZ(0,"div",0)(1,"div",1)(2,"span",2)(3,"h1"),W._uU(4),W.qZA()(),W.TgZ(5,"span",3)(6,"h1"),W._uU(7),W.qZA()(),W.TgZ(8,"span",4)(9,"h1"),W._uU(10),W.qZA()()(),W.TgZ(11,"div",5)(12,"span",2)(13,"h6"),W._uU(14),W.qZA()()()()),2&tt&&(W.xp6(4),W.Oqu(ft.title),W.xp6(3),W.Oqu(ft.title),W.xp6(3),W.Oqu(ft.title),W.xp6(4),W.Oqu(ft.subtitle))},styles:[".error[_ngcontent-%COMP%]{color:var(--color)}.error[_ngcontent-%COMP%]   .stack[_ngcontent-%COMP%]{display:grid}.error[_ngcontent-%COMP%]   .stack[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{grid-row-start:1;grid-column-start:1;--stack-height: calc(100% /var(--stacks) - 1px);--inverse-index: calc(calc(var(--stacks) - 1) - var(--index));--clip-top: calc(var(--stack-height) * var(--index));--clip-bottom: calc(var(--stack-height) * var(--inverse-index));clip-path:inset(var(--clip-top) 0 var(--clip-bottom) 0);animation-name:_ngcontent-%COMP%_stack,_ngcontent-%COMP%_glitch;animation-duration:.34s,2s;animation-timing-function:cubic-bezier(.46,.29,0,1.24),ease;animation-iteration-count:1,infinite;animation-delay:calc(var(--index) * .12s),2s;animation-fill-mode:backwards,none;animation-direction:normal,alternate-reverse}.error[_ngcontent-%COMP%]   .stack[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(odd){--glitch-translate: 8px}.error[_ngcontent-%COMP%]   .stack[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(even){--glitch-translate: -8px}@keyframes _ngcontent-%COMP%_stack{0%{opacity:0;transform:translate(-50%);text-shadow:-2px 3px 0 red,2px -3px 0 blue}60%{opacity:.5;transform:translate(50%)}80%{transform:none;opacity:1;text-shadow:2px -3px 0 red,-2px 3px 0 blue}to{text-shadow:none}}@keyframes _ngcontent-%COMP%_glitch{0%{text-shadow:-2px 3px 0 red,2px -3px 0 blue;transform:translate(var(--glitch-translate))}2%{text-shadow:2px -3px 0 red,-2px 3px 0 blue}4%,to{text-shadow:none;transform:none}}"]}),Oe})()},7832:(an,Qe,ee)=>{ee.d(Qe,{l:()=>id});var c=ee(1571),W=ee(9751),be=ee(515),Oe=ee(9646),Se=ee(7579),tt=ee(8421),ft=ee(5577),Vt=ee(1144),ht=ee(576),Ve=ee(3268);const He=["addListener","removeListener"],nt=["addEventListener","removeEventListener"],rn=["on","off"];function rt(l,f,s,p){if((0,ht.m)(s)&&(p=s,s=void 0),p)return rt(l,f,s).pipe((0,Ve.Z)(p));const[M,F]=function Kt(l){return(0,ht.m)(l.addEventListener)&&(0,ht.m)(l.removeEventListener)}(l)?nt.map(Q=>le=>l[Q](f,le,s)):function mt(l){return(0,ht.m)(l.addListener)&&(0,ht.m)(l.removeListener)}(l)?He.map(xt(l,f)):function en(l){return(0,ht.m)(l.on)&&(0,ht.m)(l.off)}(l)?rn.map(xt(l,f)):[];if(!M&&(0,Vt.z)(l))return(0,ft.z)(Q=>rt(Q,f,s))((0,tt.Xf)(l));if(!M)throw new TypeError("Invalid event target");return new W.y(Q=>{const le=(...de)=>Q.next(1<de.length?de:de[0]);return M(le),()=>F(le)})}function xt(l,f){return s=>p=>l[s](f,p)}var ci=ee(727);class vi extends ci.w0{constructor(f,s){super()}schedule(f,s=0){return this}}const Ne={setInterval(l,f,...s){const{delegate:p}=Ne;return p?.setInterval?p.setInterval(l,f,...s):setInterval(l,f,...s)},clearInterval(l){const{delegate:f}=Ne;return(f?.clearInterval||clearInterval)(l)},delegate:void 0};var dt=ee(8737),Ot=ee(6063);class Ut{constructor(f,s=Ut.now){this.schedulerActionCtor=f,this.now=s}schedule(f,s=0,p){return new this.schedulerActionCtor(this,f).schedule(p,s)}}Ut.now=Ot.l.now;const Ht=new class Lt extends Ut{constructor(f,s=Ut.now){super(f,s),this.actions=[],this._active=!1}flush(f){const{actions:s}=this;if(this._active)return void s.push(f);let p;this._active=!0;do{if(p=f.execute(f.state,f.delay))break}while(f=s.shift());if(this._active=!1,p){for(;f=s.shift();)f.unsubscribe();throw p}}}(class je extends vi{constructor(f,s){super(f,s),this.scheduler=f,this.work=s,this.pending=!1}schedule(f,s=0){var p;if(this.closed)return this;this.state=f;const M=this.id,F=this.scheduler;return null!=M&&(this.id=this.recycleAsyncId(F,M,s)),this.pending=!0,this.delay=s,this.id=null!==(p=this.id)&&void 0!==p?p:this.requestAsyncId(F,this.id,s),this}requestAsyncId(f,s,p=0){return Ne.setInterval(f.flush.bind(f,this),p)}recycleAsyncId(f,s,p=0){if(null!=p&&this.delay===p&&!1===this.pending)return s;null!=s&&Ne.clearInterval(s)}execute(f,s){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const p=this._execute(f,s);if(p)return p;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(f,s){let M,p=!1;try{this.work(f)}catch(F){p=!0,M=F||new Error("Scheduled action threw falsy error")}if(p)return this.unsubscribe(),M}unsubscribe(){if(!this.closed){const{id:f,scheduler:s}=this,{actions:p}=s;this.work=this.state=this.scheduler=null,this.pending=!1,(0,dt.P)(p,this),null!=f&&(this.id=this.recycleAsyncId(s,f,null)),this.delay=null,super.unsubscribe()}}});var Bt=ee(3532);function Jt(l=0,f,s=Ht){let p=-1;return null!=f&&((0,Bt.K)(f)?s=f:p=f),new W.y(M=>{let F=function Kn(l){return l instanceof Date&&!isNaN(l)}(l)?+l-s.now():l;F<0&&(F=0);let Q=0;return s.schedule(function(){M.closed||(M.next(Q++),0<=p?this.schedule(void 0,p):M.complete())},F)})}const{isArray:ke}=Array;function Be(l){return 1===l.length&&ke(l[0])?l[0]:l}var Ue=ee(5403);var yt=ee(1135),dn=ee(9841),Gn=ee(5032);const Vi=new W.y(Gn.Z);var Tn=ee(3269);function zt(...l){const f=(0,Tn.jO)(l),s=Be(l);return s.length?new W.y(p=>{let M=s.map(()=>[]),F=s.map(()=>!1);p.add(()=>{M=F=null});for(let Q=0;!p.closed&&Q<s.length;Q++)(0,tt.Xf)(s[Q]).subscribe((0,Ue.x)(p,le=>{if(M[Q].push(le),M.every(de=>de.length)){const de=M.map(ye=>ye.shift());p.next(f?f(...de):de),M.some((ye,we)=>!ye.length&&F[we])&&p.complete()}},()=>{F[Q]=!0,!M[Q].length&&p.complete()}));return()=>{M=F=null}}):be.E}var ii=ee(6451),ts=ee(7272),cn=ee(2722),cr=ee(9300),Qn=ee(5698),Ar=ee(4004),io=ee(8675),Ir=ee(4671),Sa=ee(4482);function yi(l,f=Ir.y){return l=l??ro,(0,Sa.e)((s,p)=>{let M,F=!0;s.subscribe((0,Ue.x)(p,Q=>{const le=f(Q);(F||!l(M,le))&&(F=!1,M=le,p.next(Q))}))})}function ro(l,f){return l===f}var Ro=ee(3900),Ui=ee(8505);function ns(...l){const f=(0,Tn.jO)(l);return(0,Sa.e)((s,p)=>{const M=l.length,F=new Array(M);let Q=l.map(()=>!1),le=!1;for(let de=0;de<M;de++)(0,tt.Xf)(l[de]).subscribe((0,Ue.x)(p,ye=>{F[de]=ye,!le&&!Q[de]&&(Q[de]=!0,(le=Q.every(Ir.y))&&(Q=null))},Gn.Z));s.subscribe((0,Ue.x)(p,de=>{if(le){const ye=[de,...F];p.next(f?f(...ye):ye)}}))})}ee(9718);var Je=ee(6895);ee(2076),ee(4742),ee(1810);const Rn=new c.OlP("NgValueAccessor");function ag(l,f){}function lg(l,f){if(1&l&&(c.TgZ(0,"button",3),c._uU(1),c.YNc(2,ag,0,0,"ng-template",4),c.qZA()),2&l){const s=f.$implicit;c.Q6J("ngbPanelToggle",s),c.xp6(1),c.hij(" ",s.title," "),c.xp6(1),c.Q6J("ngTemplateOutlet",null==s.titleTpl?null:s.titleTpl.templateRef)}}function cg(l,f){}function wd(l,f){}function hp(l,f){if(1&l){const s=c.EpF();c.TgZ(0,"div",8),c.NdJ("ngbRef",function(M){c.CHM(s);const F=c.oxw().$implicit;return c.KtG(F.panelDiv=M)}),c.TgZ(1,"div",9),c.YNc(2,wd,0,0,"ng-template",4),c.qZA()()}if(2&l){const s=c.oxw().$implicit;c.s9C("id",s.id),c.uIk("aria-labelledby",s.id+"-header"),c.xp6(2),c.Q6J("ngTemplateOutlet",(null==s.contentTpl?null:s.contentTpl.templateRef)||null)}}Math,Math,Math;const ug=function(l,f){return{$implicit:l,opened:f}};function fp(l,f){if(1&l&&(c.TgZ(0,"div")(1,"div",5),c.YNc(2,cg,0,0,"ng-template",6),c.qZA(),c.YNc(3,hp,3,3,"div",7),c.qZA()),2&l){const s=f.$implicit,p=c.oxw(),M=c.MAs(1);c.Tol("accordion-item "+(s.cardClass||"")),c.xp6(1),c.Tol("accordion-header "+(s.type?"bg-"+s.type:p.type?"bg-"+p.type:"")),c.MGl("id","",s.id,"-header"),c.xp6(1),c.Q6J("ngTemplateOutlet",(null==s.headerTpl?null:s.headerTpl.templateRef)||M)("ngTemplateOutletContext",c.WLB(8,ug,s,s.isOpen)),c.xp6(1),c.Q6J("ngIf",!p.destroyOnHide||s.isOpen||s.transitionRunning)}}const pv=["ngbAccordionBody",""];function pp(l,f){}function mv(l,f){if(1&l){const s=c.EpF();c.TgZ(0,"button",1),c.NdJ("click",function(){c.CHM(s);const M=c.oxw();return c.KtG(M.close())}),c.qZA()}}const Rd=["*"];function dg(l,f){if(1&l){const s=c.EpF();c.TgZ(0,"button",6),c.NdJ("click",function(){const F=c.CHM(s).$implicit,Q=c.oxw();return Q.focus(),c.KtG(Q.select(F.id,Q.NgbSlideEventSource.INDICATOR))}),c.qZA()}if(2&l){const s=f.$implicit,p=c.oxw();c.ekj("active",s.id===p.activeId),c.uIk("aria-labelledby","slide-"+s.id)("aria-controls","slide-"+s.id)("aria-selected",s.id===p.activeId)}}function wh(l,f){}function gv(l,f){if(1&l&&(c.TgZ(0,"div",7)(1,"span",8),c.SDv(2,9),c.qZA(),c.YNc(3,wh,0,0,"ng-template",10),c.qZA()),2&l){const s=f.$implicit,p=f.index,M=f.count;c.Q6J("id","slide-"+s.id),c.xp6(2),c.pQV(p+1)(M),c.QtT(2),c.xp6(1),c.Q6J("ngTemplateOutlet",s.tplRef)}}function _v(l,f){if(1&l){const s=c.EpF();c.TgZ(0,"button",11),c.NdJ("click",function(){c.CHM(s);const M=c.oxw();return c.KtG(M.arrowLeft())}),c._UZ(1,"span",12),c.TgZ(2,"span",8),c.SDv(3,13),c.qZA()()}}function Rh(l,f){if(1&l){const s=c.EpF();c.TgZ(0,"button",14),c.NdJ("click",function(){c.CHM(s);const M=c.oxw();return c.KtG(M.arrowRight())}),c._UZ(1,"span",15),c.TgZ(2,"span",8),c.SDv(3,16),c.qZA()()}}const vv=["ngbDatepickerDayView",""],yv=["month"],bv=["year"];function Tv(l,f){if(1&l&&(c.TgZ(0,"option",5),c._uU(1),c.qZA()),2&l){const s=f.$implicit,p=c.oxw();c.Q6J("value",s),c.uIk("aria-label",p.i18n.getMonthFullName(s,p.date.year)),c.xp6(1),c.Oqu(p.i18n.getMonthShortName(s,p.date.year))}}function Mv(l,f){if(1&l&&(c.TgZ(0,"option",5),c._uU(1),c.qZA()),2&l){const s=f.$implicit,p=c.oxw();c.Q6J("value",s),c.xp6(1),c.Oqu(p.i18n.getYearNumerals(s))}}function hg(l,f){if(1&l){const s=c.EpF();c.TgZ(0,"ngb-datepicker-navigation-select",7),c.NdJ("select",function(M){c.CHM(s);const F=c.oxw();return c.KtG(F.select.emit(M))}),c.qZA()}if(2&l){const s=c.oxw();c.Q6J("date",s.date)("disabled",s.disabled)("months",s.selectBoxes.months)("years",s.selectBoxes.years)}}function mp(l,f){1&l&&c._UZ(0,"div",0)}function Sh(l,f){1&l&&c._UZ(0,"div",0)}function gp(l,f){if(1&l&&(c.YNc(0,mp,1,0,"div",9),c.TgZ(1,"div",10),c._uU(2),c.qZA(),c.YNc(3,Sh,1,0,"div",9)),2&l){const s=f.$implicit,p=f.index,M=c.oxw(2);c.Q6J("ngIf",p>0),c.xp6(2),c.hij(" ",M.i18n.getMonthLabel(s.firstDate)," "),c.xp6(1),c.Q6J("ngIf",p!==M.months.length-1)}}function _p(l,f){if(1&l&&c.YNc(0,gp,4,3,"ng-template",8),2&l){const s=c.oxw();c.Q6J("ngForOf",s.months)}}function vp(l,f){if(1&l&&(c.TgZ(0,"div",5),c._uU(1),c.qZA()),2&l){const s=c.oxw(2);c.xp6(1),c.Oqu(s.i18n.getWeekLabel())}}function va(l,f){if(1&l&&(c.TgZ(0,"div",6),c._uU(1),c.qZA()),2&l){const s=f.$implicit;c.xp6(1),c.Oqu(s)}}function fg(l,f){if(1&l&&(c.TgZ(0,"div",2),c.YNc(1,vp,2,1,"div",3),c.YNc(2,va,2,1,"div",4),c.qZA()),2&l){const s=c.oxw();c.xp6(1),c.Q6J("ngIf",s.datepicker.showWeekNumbers),c.xp6(1),c.Q6J("ngForOf",s.viewModel.weekdays)}}function pg(l,f){if(1&l&&(c.TgZ(0,"div",11),c._uU(1),c.qZA()),2&l){const s=c.oxw(2).$implicit,p=c.oxw();c.xp6(1),c.Oqu(p.i18n.getWeekNumerals(s.number))}}function mg(l,f){}function yp(l,f){if(1&l&&c.YNc(0,mg,0,0,"ng-template",14),2&l){const s=c.oxw().$implicit,p=c.oxw(3);c.Q6J("ngTemplateOutlet",p.datepicker.dayTemplate)("ngTemplateOutletContext",s.context)}}function Ch(l,f){if(1&l){const s=c.EpF();c.TgZ(0,"div",12),c.NdJ("click",function(M){const Q=c.CHM(s).$implicit;return c.oxw(3).doSelect(Q),c.KtG(M.preventDefault())}),c.YNc(1,yp,1,2,"ng-template",13),c.qZA()}if(2&l){const s=f.$implicit;c.ekj("disabled",s.context.disabled)("hidden",s.hidden)("ngb-dp-today",s.context.today),c.Q6J("tabindex",s.tabindex),c.uIk("aria-label",s.ariaLabel),c.xp6(1),c.Q6J("ngIf",!s.hidden)}}function gg(l,f){if(1&l&&(c.TgZ(0,"div",8),c.YNc(1,pg,2,1,"div",9),c.YNc(2,Ch,2,9,"div",10),c.qZA()),2&l){const s=c.oxw().$implicit,p=c.oxw();c.xp6(1),c.Q6J("ngIf",p.datepicker.showWeekNumbers),c.xp6(1),c.Q6J("ngForOf",s.days)}}function _g(l,f){1&l&&c.YNc(0,gg,3,2,"div",7),2&l&&c.Q6J("ngIf",!f.$implicit.collapsed)}const vg=["defaultDayTemplate"],bp=["content"];function yg(l,f){if(1&l&&c._UZ(0,"div",7),2&l){const p=f.currentMonth,M=f.selected,F=f.disabled,Q=f.focused;c.Q6J("date",f.date)("currentMonth",p)("selected",M)("disabled",F)("focused",Q)}}function bg(l,f){if(1&l&&(c.TgZ(0,"div",12),c._uU(1),c.qZA()),2&l){const s=c.oxw().$implicit,p=c.oxw(2);c.xp6(1),c.hij(" ",p.i18n.getMonthLabel(s.firstDate)," ")}}function Is(l,f){if(1&l&&(c.TgZ(0,"div",9),c.YNc(1,bg,2,1,"div",10),c._UZ(2,"ngb-datepicker-month",11),c.qZA()),2&l){const s=f.$implicit,p=c.oxw(2);c.xp6(1),c.Q6J("ngIf","none"===p.navigation||p.displayMonths>1&&"select"===p.navigation),c.xp6(1),c.Q6J("month",s.firstDate)}}function Eh(l,f){if(1&l&&c.YNc(0,Is,3,2,"div",8),2&l){const s=c.oxw();c.Q6J("ngForOf",s.model.months)}}function Tp(l,f){if(1&l){const s=c.EpF();c.TgZ(0,"ngb-datepicker-navigation",13),c.NdJ("navigate",function(M){c.CHM(s);const F=c.oxw();return c.KtG(F.onNavigateEvent(M))})("select",function(M){c.CHM(s);const F=c.oxw();return c.KtG(F.onNavigateDateSelect(M))}),c.qZA()}if(2&l){const s=c.oxw();c.Q6J("date",s.model.firstDate)("months",s.model.months)("disabled",s.model.disabled)("showSelect","select"===s.model.navigation)("prevDisabled",s.model.prevDisabled)("nextDisabled",s.model.nextDisabled)("selectBoxes",s.model.selectBoxes)}}function Ah(l,f){}function us(l,f){}const Cu=["dialog"],Mp=["ngbNavOutlet",""];function xp(l,f){}const Tg=function(l){return{$implicit:l}};function Dp(l,f){if(1&l&&(c.TgZ(0,"div",2),c.YNc(1,xp,0,0,"ng-template",3),c.qZA()),2&l){const s=c.oxw().$implicit,p=c.oxw();c.Q6J("item",s)("nav",p.nav)("role",p.paneRole),c.xp6(1),c.Q6J("ngTemplateOutlet",(null==s.contentTpl?null:s.contentTpl.templateRef)||null)("ngTemplateOutletContext",c.VKq(5,Tg,s.active||p.isPanelTransitioning(s)))}}function Mg(l,f){if(1&l&&c.YNc(0,Dp,2,7,"div",1),2&l){const s=f.$implicit,p=c.oxw();c.Q6J("ngIf",s.isPanelInDom()||p.isPanelTransitioning(s))}}function wp(l,f){1&l&&(c.TgZ(0,"span",9),c.SDv(1,10),c.qZA())}function xg(l,f){1&l&&(c.TgZ(0,"span",9),c.SDv(1,11),c.qZA())}function Rp(l,f){1&l&&(c.TgZ(0,"span",9),c.SDv(1,12),c.qZA())}function Dg(l,f){1&l&&(c.TgZ(0,"span",9),c.SDv(1,13),c.qZA())}function wg(l,f){1&l&&c._uU(0,"...")}function Ih(l,f){1&l&&(c.TgZ(0,"span",15),c._uU(1,"(current)"),c.qZA())}function Ph(l,f){if(1&l&&(c._uU(0),c.YNc(1,Ih,2,0,"span",14)),2&l){const s=f.$implicit,p=f.currentPage;c.hij(" ",s," "),c.xp6(1),c.Q6J("ngIf",s===p)}}function Rg(l,f){}const Eu=function(l){return{disabled:!0,currentPage:l}};function Sg(l,f){if(1&l&&(c.TgZ(0,"a",20),c.YNc(1,Rg,0,0,"ng-template",8),c.qZA()),2&l){const s=c.oxw(2).$implicit,p=c.oxw(),M=c.MAs(9);c.xp6(1),c.Q6J("ngTemplateOutlet",(null==p.tplEllipsis?null:p.tplEllipsis.templateRef)||M)("ngTemplateOutletContext",c.VKq(2,Eu,s))}}function Cg(l,f){}const Oh=function(l,f,s){return{disabled:l,$implicit:f,currentPage:s}};function Nh(l,f){if(1&l){const s=c.EpF();c.TgZ(0,"a",21),c.NdJ("click",function(M){c.CHM(s);const F=c.oxw().$implicit;return c.oxw(2).selectPage(F),c.KtG(M.preventDefault())}),c.YNc(1,Cg,0,0,"ng-template",8),c.qZA()}if(2&l){const s=c.oxw().$implicit,p=c.oxw(),M=p.disabled,F=p.$implicit,Q=c.oxw(),le=c.MAs(11);c.uIk("tabindex",M?"-1":null)("aria-disabled",M?"true":null),c.xp6(1),c.Q6J("ngTemplateOutlet",(null==Q.tplNumber?null:Q.tplNumber.templateRef)||le)("ngTemplateOutletContext",c.kEZ(4,Oh,M,s,F))}}function Sp(l,f){if(1&l&&(c.TgZ(0,"li",17),c.YNc(1,Sg,2,4,"a",18),c.YNc(2,Nh,2,8,"a",19),c.qZA()),2&l){const s=f.$implicit,p=c.oxw(),M=p.$implicit,F=p.disabled,Q=c.oxw();c.ekj("active",s===M)("disabled",Q.isEllipsis(s)||F),c.uIk("aria-current",s===M?"page":null),c.xp6(1),c.Q6J("ngIf",Q.isEllipsis(s)),c.xp6(1),c.Q6J("ngIf",!Q.isEllipsis(s))}}function Yc(l,f){1&l&&c.YNc(0,Sp,3,7,"li",16),2&l&&c.Q6J("ngForOf",f.pages)}function Fh(l,f){}const Sd=function(l,f){return{disabled:l,currentPage:f}};function Eg(l,f){if(1&l){const s=c.EpF();c.TgZ(0,"li",17)(1,"a",22),c.NdJ("click",function(M){return c.CHM(s),c.oxw().selectPage(1),c.KtG(M.preventDefault())}),c.YNc(2,Fh,0,0,"ng-template",8),c.qZA()()}if(2&l){const s=c.oxw(),p=c.MAs(1);c.ekj("disabled",s.previousDisabled()),c.xp6(1),c.uIk("tabindex",s.previousDisabled()?"-1":null)("aria-disabled",s.previousDisabled()?"true":null),c.xp6(1),c.Q6J("ngTemplateOutlet",(null==s.tplFirst?null:s.tplFirst.templateRef)||p)("ngTemplateOutletContext",c.WLB(6,Sd,s.previousDisabled(),s.page))}}function Lh(l,f){}const Ag=function(l){return{disabled:l}};function Ig(l,f){if(1&l){const s=c.EpF();c.TgZ(0,"li",17)(1,"a",23),c.NdJ("click",function(M){c.CHM(s);const F=c.oxw();return F.selectPage(F.page-1),c.KtG(M.preventDefault())}),c.YNc(2,Lh,0,0,"ng-template",8),c.qZA()()}if(2&l){const s=c.oxw(),p=c.MAs(3);c.ekj("disabled",s.previousDisabled()),c.xp6(1),c.uIk("tabindex",s.previousDisabled()?"-1":null)("aria-disabled",s.previousDisabled()?"true":null),c.xp6(1),c.Q6J("ngTemplateOutlet",(null==s.tplPrevious?null:s.tplPrevious.templateRef)||p)("ngTemplateOutletContext",c.VKq(6,Ag,s.previousDisabled()))}}function Pg(l,f){}function Og(l,f){}function Ng(l,f){if(1&l){const s=c.EpF();c.TgZ(0,"li",17)(1,"a",24),c.NdJ("click",function(M){c.CHM(s);const F=c.oxw();return F.selectPage(F.page+1),c.KtG(M.preventDefault())}),c.YNc(2,Og,0,0,"ng-template",8),c.qZA()()}if(2&l){const s=c.oxw(),p=c.MAs(5);c.ekj("disabled",s.nextDisabled()),c.xp6(1),c.uIk("tabindex",s.nextDisabled()?"-1":null)("aria-disabled",s.nextDisabled()?"true":null),c.xp6(1),c.Q6J("ngTemplateOutlet",(null==s.tplNext?null:s.tplNext.templateRef)||p)("ngTemplateOutletContext",c.WLB(6,Sd,s.nextDisabled(),s.page))}}function Fg(l,f){}function Cp(l,f){if(1&l){const s=c.EpF();c.TgZ(0,"li",17)(1,"a",25),c.NdJ("click",function(M){c.CHM(s);const F=c.oxw();return F.selectPage(F.pageCount),c.KtG(M.preventDefault())}),c.YNc(2,Fg,0,0,"ng-template",8),c.qZA()()}if(2&l){const s=c.oxw(),p=c.MAs(7);c.ekj("disabled",s.nextDisabled()),c.xp6(1),c.uIk("tabindex",s.nextDisabled()?"-1":null)("aria-disabled",s.nextDisabled()?"true":null),c.xp6(1),c.Q6J("ngTemplateOutlet",(null==s.tplLast?null:s.tplLast.templateRef)||p)("ngTemplateOutletContext",c.WLB(6,Sd,s.nextDisabled(),s.page))}}const Bh=function(l,f,s){return{$implicit:l,pages:f,disabled:s}};function Lg(l,f){if(1&l&&(c.TgZ(0,"span"),c.SDv(1,1),c.ALo(2,"percent"),c.qZA()),2&l){const s=c.oxw();c.xp6(2),c.pQV(c.lcZ(2,1,s.getValue()/s.max)),c.QtT(1)}}function Ap(l,f){1&l&&c._uU(0),2&l&&c.Oqu(100===f.fill?"\u2605":"\u2606")}function Ip(l,f){}function sc(l,f){if(1&l){const s=c.EpF();c.TgZ(0,"span",2),c._uU(1),c.qZA(),c.TgZ(2,"span",3),c.NdJ("mouseenter",function(){const F=c.CHM(s).index,Q=c.oxw();return c.KtG(Q.enter(F+1))})("click",function(){const F=c.CHM(s).index,Q=c.oxw();return c.KtG(Q.handleClick(F+1))}),c.YNc(3,Ip,0,0,"ng-template",4),c.qZA()}if(2&l){const s=f.index,p=c.oxw(),M=c.MAs(1);c.xp6(1),c.hij("(",s<p.nextRate?"*":" ",")"),c.xp6(1),c.Udp("cursor",p.isInteractive()?"pointer":"default"),c.xp6(1),c.Q6J("ngTemplateOutlet",p.starTemplate||p.starTemplateFromContent||M)("ngTemplateOutletContext",p.contexts[s])}}function Pp(l,f){if(1&l){const s=c.EpF();c.TgZ(0,"button",11),c.NdJ("click",function(){c.CHM(s);const M=c.oxw();return c.KtG(M.changeHour(M.hourStep))}),c._UZ(1,"span",12),c.TgZ(2,"span",13),c.SDv(3,14),c.qZA()()}if(2&l){const s=c.oxw();c.ekj("btn-sm",s.isSmallSize)("btn-lg",s.isLargeSize)("disabled",s.disabled),c.Q6J("disabled",s.disabled)}}function Op(l,f){if(1&l){const s=c.EpF();c.TgZ(0,"button",11),c.NdJ("click",function(){c.CHM(s);const M=c.oxw();return c.KtG(M.changeHour(-M.hourStep))}),c._UZ(1,"span",15),c.TgZ(2,"span",13),c.SDv(3,16),c.qZA()()}if(2&l){const s=c.oxw();c.ekj("btn-sm",s.isSmallSize)("btn-lg",s.isLargeSize)("disabled",s.disabled),c.Q6J("disabled",s.disabled)}}function Bg(l,f){if(1&l){const s=c.EpF();c.TgZ(0,"button",11),c.NdJ("click",function(){c.CHM(s);const M=c.oxw();return c.KtG(M.changeMinute(M.minuteStep))}),c._UZ(1,"span",12),c.TgZ(2,"span",13),c.SDv(3,17),c.qZA()()}if(2&l){const s=c.oxw();c.ekj("btn-sm",s.isSmallSize)("btn-lg",s.isLargeSize)("disabled",s.disabled),c.Q6J("disabled",s.disabled)}}function Dv(l,f){if(1&l){const s=c.EpF();c.TgZ(0,"button",11),c.NdJ("click",function(){c.CHM(s);const M=c.oxw();return c.KtG(M.changeMinute(-M.minuteStep))}),c._UZ(1,"span",15),c.TgZ(2,"span",13),c.SDv(3,18),c.qZA()()}if(2&l){const s=c.oxw();c.ekj("btn-sm",s.isSmallSize)("btn-lg",s.isLargeSize)("disabled",s.disabled),c.Q6J("disabled",s.disabled)}}function Cd(l,f){1&l&&(c.TgZ(0,"div",5),c._uU(1,":"),c.qZA())}function jg(l,f){if(1&l){const s=c.EpF();c.TgZ(0,"button",11),c.NdJ("click",function(){c.CHM(s);const M=c.oxw(2);return c.KtG(M.changeSecond(M.secondStep))}),c._UZ(1,"span",12),c.TgZ(2,"span",13),c.SDv(3,21),c.qZA()()}if(2&l){const s=c.oxw(2);c.ekj("btn-sm",s.isSmallSize)("btn-lg",s.isLargeSize)("disabled",s.disabled),c.Q6J("disabled",s.disabled)}}function Np(l,f){if(1&l){const s=c.EpF();c.TgZ(0,"button",11),c.NdJ("click",function(){c.CHM(s);const M=c.oxw(2);return c.KtG(M.changeSecond(-M.secondStep))}),c._UZ(1,"span",15),c.TgZ(2,"span",13),c.SDv(3,22),c.qZA()()}if(2&l){const s=c.oxw(2);c.ekj("btn-sm",s.isSmallSize)("btn-lg",s.isLargeSize)("disabled",s.disabled),c.Q6J("disabled",s.disabled)}}function Fp(l,f){if(1&l){const s=c.EpF();c.TgZ(0,"div",19),c.YNc(1,jg,4,7,"button",3),c.TgZ(2,"input",20),c.NdJ("change",function(M){c.CHM(s);const F=c.oxw();return c.KtG(F.updateSecond(M.target.value))})("blur",function(){c.CHM(s);const M=c.oxw();return c.KtG(M.handleBlur())})("input",function(M){c.CHM(s);const F=c.oxw();return c.KtG(F.formatInput(M.target))})("keydown.ArrowUp",function(M){c.CHM(s);const F=c.oxw();return F.changeSecond(F.secondStep),c.KtG(M.preventDefault())})("keydown.ArrowDown",function(M){c.CHM(s);const F=c.oxw();return F.changeSecond(-F.secondStep),c.KtG(M.preventDefault())}),c.qZA(),c.YNc(3,Np,4,7,"button",3),c.qZA()}if(2&l){const s=c.oxw();c.xp6(1),c.Q6J("ngIf",s.spinners),c.xp6(1),c.ekj("form-control-sm",s.isSmallSize)("form-control-lg",s.isLargeSize),c.Q6J("value",s.formatMinSec(null==s.model?null:s.model.second))("readOnly",s.readonlyInputs)("disabled",s.disabled),c.xp6(1),c.Q6J("ngIf",s.spinners)}}function Lp(l,f){1&l&&c._UZ(0,"div",5)}function kh(l,f){if(1&l&&(c.ynx(0),c.SDv(1,27),c.BQk()),2&l){const s=c.oxw(2);c.xp6(1),c.pQV(s.i18n.getAfternoonPeriod()),c.QtT(1)}}function Bp(l,f){if(1&l&&c.SDv(0,28),2&l){const s=c.oxw(2);c.pQV(s.i18n.getMorningPeriod()),c.QtT(0)}}function Ed(l,f){if(1&l){const s=c.EpF();c.TgZ(0,"div",23)(1,"button",24),c.NdJ("click",function(){c.CHM(s);const M=c.oxw();return c.KtG(M.toggleMeridian())}),c.YNc(2,kh,2,1,"ng-container",25),c.YNc(3,Bp,1,1,"ng-template",null,26,c.W1O),c.qZA()()}if(2&l){const s=c.MAs(4),p=c.oxw();c.xp6(1),c.ekj("btn-sm",p.isSmallSize)("btn-lg",p.isLargeSize)("disabled",p.disabled),c.Q6J("disabled",p.disabled),c.xp6(1),c.Q6J("ngIf",p.model&&p.model.hour>=12)("ngIfElse",s)}}function Ad(l,f){if(1&l&&(c.TgZ(0,"strong",3),c._uU(1),c.qZA()),2&l){const s=c.oxw();c.xp6(1),c.Oqu(s.header)}}function jp(l,f){}function Gh(l,f){if(1&l){const s=c.EpF();c.TgZ(0,"div",4),c.YNc(1,jp,0,0,"ng-template",5),c.TgZ(2,"button",6),c.NdJ("click",function(){c.CHM(s);const M=c.oxw();return c.KtG(M.hide())}),c.qZA()()}if(2&l){const s=c.oxw(),p=c.MAs(1);c.xp6(1),c.Q6J("ngTemplateOutlet",s.contentHeaderTpl||p)}}function Vh(l,f){if(1&l&&(c.TgZ(0,"span"),c._uU(1),c.qZA()),2&l){const s=c.oxw().$implicit,p=c.oxw();c.Tol(p.highlightClass),c.xp6(1),c.Oqu(s)}}function Uh(l,f){if(1&l&&c._uU(0),2&l){const s=c.oxw().$implicit;c.Oqu(s)}}function Id(l,f){if(1&l&&(c.YNc(0,Vh,2,3,"span",1),c.YNc(1,Uh,1,1,"ng-template",null,2,c.W1O)),2&l){const s=f.odd,p=c.MAs(2);c.Q6J("ngIf",s)("ngIfElse",p)}}function ds(l){return parseInt(`${l}`,10)}function kp(l){return null!=l?`${l}`:""}function Pd(l,f,s=0){return Math.max(Math.min(l,f),s)}function Tl(l){return"string"==typeof l}function ar(l){return!isNaN(ds(l))}function Gi(l){return"number"==typeof l&&isFinite(l)&&Math.floor(l)===l}function qc(l){return null!=l}function Od(l){return ar(l)?`0${l}`.slice(-2):""}function Hh(l,f){return l&&l.className&&l.className.split&&l.className.split(/\s+/).indexOf(f)>=0}function Jc(l){return(l||document.body).getBoundingClientRect()}function Wh(l){return l.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}const Gp={animation:!0,transitionTimerDelayMs:5},Ug=()=>{},{transitionTimerDelayMs:Hg}=Gp,Nd=new Map,Ur=(l,f,s,p)=>{let M=p.context||{};const F=Nd.get(f);if(F)switch(p.runningTransition){case"continue":return be.E;case"stop":l.run(()=>F.transition$.complete()),M=Object.assign(F.context,M),Nd.delete(f)}const Q=s(f,p.animation,M)||Ug;if(!p.animation||"none"===window.getComputedStyle(f).transitionProperty)return l.run(()=>Q()),(0,Oe.of)(void 0).pipe(function zh(l){return f=>new W.y(s=>f.subscribe({next:Q=>l.run(()=>s.next(Q)),error:Q=>l.run(()=>s.error(Q)),complete:()=>l.run(()=>s.complete())}))}(l));const le=new Se.x,de=new Se.x,ye=le.pipe(function ln(...l){return f=>(0,ts.z)(f,(0,Oe.of)(...l))}(!0));Nd.set(f,{transition$:le,complete:()=>{de.next(),de.complete()},context:M});const we=function Vg(l){const{transitionDelay:f,transitionDuration:s}=window.getComputedStyle(l);return 1e3*(parseFloat(f)+parseFloat(s))}(f);return l.runOutsideAngular(()=>{const wt=rt(f,"transitionend").pipe((0,cn.R)(ye),(0,cr.h)(({target:St})=>St===f));(function Ye(...l){return 1===(l=Be(l)).length?(0,tt.Xf)(l[0]):new W.y(function bt(l){return f=>{let s=[];for(let p=0;s&&!f.closed&&p<l.length;p++)s.push((0,tt.Xf)(l[p]).subscribe((0,Ue.x)(f,M=>{if(s){for(let F=0;F<s.length;F++)F!==p&&s[F].unsubscribe();s=null}f.next(M)})))}}(l))})(Jt(we+Hg).pipe((0,cn.R)(ye)),wt,de).pipe((0,cn.R)(ye)).subscribe(()=>{Nd.delete(f),l.run(()=>{Q(),le.next(),le.complete()})})}),le.asObservable()},Vp=(l,f,s)=>{let{direction:p,maxSize:M,dimension:F}=s;const{classList:Q}=l;function le(){Q.add("collapse"),"show"===p?Q.add("show"):Q.remove("show")}if(f)return M||(M=function Ev(l,f){if(typeof navigator>"u")return"0px";const{classList:s}=l,p=s.contains("show");p||s.add("show"),l.style[f]="";const M=l.getBoundingClientRect()[f]+"px";return p||s.remove("show"),M}(l,F),s.maxSize=M,l.style[F]="show"!==p?M:"0px",Q.remove("collapse"),Q.remove("collapsing"),Q.remove("show"),Jc(l),Q.add("collapsing")),l.style[F]="show"===p?M:"0px",()=>{le(),Q.remove("collapsing"),l.style[F]=""};le()};let no=(()=>{class l{constructor(){this.animation=Gp.animation}}return l.\u0275fac=function(s){return new(s||l)},l.\u0275prov=c.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})(),Au=(()=>{class l{constructor(s){this._ngbConfig=s,this.closeOthers=!1}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(s){this._animation=s}}return l.\u0275fac=function(s){return new(s||l)(c.LFG(no))},l.\u0275prov=c.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})(),Av=0,zg=(()=>{class l{constructor(s){this.templateRef=s}}return l.\u0275fac=function(s){return new(s||l)(c.Y36(c.Rgc))},l.\u0275dir=c.lG2({type:l,selectors:[["ng-template","ngbPanelHeader",""]],standalone:!0}),l})(),Iv=(()=>{class l{constructor(s){this.templateRef=s}}return l.\u0275fac=function(s){return new(s||l)(c.Y36(c.Rgc))},l.\u0275dir=c.lG2({type:l,selectors:[["ng-template","ngbPanelTitle",""]],standalone:!0}),l})(),Bn=(()=>{class l{constructor(s){this.templateRef=s}}return l.\u0275fac=function(s){return new(s||l)(c.Y36(c.Rgc))},l.\u0275dir=c.lG2({type:l,selectors:[["ng-template","ngbPanelContent",""]],standalone:!0}),l})(),At=(()=>{class l{constructor(){this.disabled=!1,this.id="ngb-panel-"+Av++,this.isOpen=!1,this.initClassDone=!1,this.transitionRunning=!1,this.shown=new c.vpe,this.hidden=new c.vpe}ngAfterContentChecked(){this.titleTpl=this.titleTpls.first,this.headerTpl=this.headerTpls.first,this.contentTpl=this.contentTpls.first}}return l.\u0275fac=function(s){return new(s||l)},l.\u0275dir=c.lG2({type:l,selectors:[["ngb-panel"]],contentQueries:function(s,p,M){if(1&s&&(c.Suo(M,Iv,4),c.Suo(M,zg,4),c.Suo(M,Bn,4)),2&s){let F;c.iGM(F=c.CRH())&&(p.titleTpls=F),c.iGM(F=c.CRH())&&(p.headerTpls=F),c.iGM(F=c.CRH())&&(p.contentTpls=F)}},inputs:{disabled:"disabled",id:"id",title:"title",type:"type",cardClass:"cardClass"},outputs:{shown:"shown",hidden:"hidden"},standalone:!0}),l})(),Ga=(()=>{class l{constructor(s){this._El=s,this.ngbRef=new c.vpe}ngOnInit(){this.ngbRef.emit(this._El.nativeElement)}ngOnDestroy(){this.ngbRef.emit(null)}}return l.\u0275fac=function(s){return new(s||l)(c.Y36(c.SBq))},l.\u0275dir=c.lG2({type:l,selectors:[["","ngbRef",""]],outputs:{ngbRef:"ngbRef"},standalone:!0}),l})(),Zc=(()=>{class l{constructor(s,p){this.accordion=s,this.panel=p}set ngbPanelToggle(s){s&&(this.panel=s)}}return l.\u0275fac=function(s){return new(s||l)(c.Y36((0,c.Gpc)(()=>$h)),c.Y36(At,9))},l.\u0275dir=c.lG2({type:l,selectors:[["button","ngbPanelToggle",""]],hostAttrs:["type","button"],hostVars:5,hostBindings:function(s,p){1&s&&c.NdJ("click",function(){return p.accordion.toggle(p.panel.id)}),2&s&&(c.Ikx("disabled",p.panel.disabled),c.uIk("aria-expanded",p.panel.isOpen)("aria-controls",p.panel.id),c.ekj("collapsed",!p.panel.isOpen))},inputs:{ngbPanelToggle:"ngbPanelToggle"},standalone:!0}),l})(),$h=(()=>{class l{constructor(s,p,M){this._ngZone=p,this._changeDetector=M,this.activeIds=[],this.destroyOnHide=!0,this.panelChange=new c.vpe,this.shown=new c.vpe,this.hidden=new c.vpe,this.animation=s.animation,this.type=s.type,this.closeOtherPanels=s.closeOthers}isExpanded(s){return this.activeIds.indexOf(s)>-1}expand(s){this._changeOpenState(this._findPanelById(s),!0)}expandAll(){this.closeOtherPanels?0===this.activeIds.length&&this.panels.length&&this._changeOpenState(this.panels.first,!0):this.panels.forEach(s=>this._changeOpenState(s,!0))}collapse(s){this._changeOpenState(this._findPanelById(s),!1)}collapseAll(){this.panels.forEach(s=>{this._changeOpenState(s,!1)})}toggle(s){const p=this._findPanelById(s);p&&this._changeOpenState(p,!p.isOpen)}ngAfterContentChecked(){Tl(this.activeIds)&&(this.activeIds=this.activeIds.split(/\s*,\s*/)),this.panels.forEach(s=>{s.isOpen=!s.disabled&&this.activeIds.indexOf(s.id)>-1}),this.activeIds.length>1&&this.closeOtherPanels&&(this._closeOthers(this.activeIds[0],!1),this._updateActiveIds()),this._ngZone.onStable.pipe((0,Qn.q)(1)).subscribe(()=>{this.panels.forEach(s=>{const p=s.panelDiv;p?s.initClassDone||(s.initClassDone=!0,Ur(this._ngZone,p,Vp,{animation:!1,runningTransition:"continue",context:{direction:s.isOpen?"show":"hide",dimension:"height"}})):s.initClassDone=!1})})}_changeOpenState(s,p){if(null!=s&&!s.disabled&&s.isOpen!==p){let M=!1;this.panelChange.emit({panelId:s.id,nextState:p,preventDefault:()=>{M=!0}}),M||(s.isOpen=p,s.transitionRunning=!0,p&&this.closeOtherPanels&&this._closeOthers(s.id),this._updateActiveIds(),this._runTransitions(this.animation))}}_closeOthers(s,p=!0){this.panels.forEach(M=>{M.id!==s&&M.isOpen&&(M.isOpen=!1,M.transitionRunning=p)})}_findPanelById(s){return this.panels.find(p=>p.id===s)||null}_updateActiveIds(){this.activeIds=this.panels.filter(s=>s.isOpen&&!s.disabled).map(s=>s.id)}_runTransitions(s){this._changeDetector.detectChanges(),this.panels.forEach(p=>{p.transitionRunning&&Ur(this._ngZone,p.panelDiv,Vp,{animation:s,runningTransition:"stop",context:{direction:p.isOpen?"show":"hide",dimension:"height"}}).subscribe(()=>{p.transitionRunning=!1;const{id:F}=p;p.isOpen?(p.shown.emit(),this.shown.emit(F)):(p.hidden.emit(),this.hidden.emit(F))})})}}return l.\u0275fac=function(s){return new(s||l)(c.Y36(Au),c.Y36(c.R0b),c.Y36(c.sBO))},l.\u0275cmp=c.Xpm({type:l,selectors:[["ngb-accordion"]],contentQueries:function(s,p,M){if(1&s&&c.Suo(M,At,4),2&s){let F;c.iGM(F=c.CRH())&&(p.panels=F)}},hostAttrs:["role","tablist",1,"accordion"],hostVars:1,hostBindings:function(s,p){2&s&&c.uIk("aria-multiselectable",!p.closeOtherPanels)},inputs:{animation:"animation",activeIds:"activeIds",closeOtherPanels:["closeOthers","closeOtherPanels"],destroyOnHide:"destroyOnHide",type:"type"},outputs:{panelChange:"panelChange",shown:"shown",hidden:"hidden"},exportAs:["ngbAccordion"],standalone:!0,features:[c.jDz],decls:3,vars:1,consts:[["ngbPanelHeader",""],["t",""],["ngFor","",3,"ngForOf"],[1,"accordion-button",3,"ngbPanelToggle"],[3,"ngTemplateOutlet"],["role","tab",3,"id"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["role","tabpanel",3,"id","ngbRef",4,"ngIf"],["role","tabpanel",3,"id","ngbRef"],[1,"accordion-body"]],template:function(s,p){1&s&&(c.YNc(0,lg,3,3,"ng-template",0,1,c.W1O),c.YNc(2,fp,4,11,"ng-template",2)),2&s&&(c.xp6(2),c.Q6J("ngForOf",p.panels))},dependencies:[Je.ax,Je.tP,Zc,Ga,zg,Je.O5],encapsulation:2}),l})(),Wg=(()=>{class l{constructor(s){this._ngbConfig=s,this.horizontal=!1}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(s){this._animation=s}}return l.\u0275fac=function(s){return new(s||l)(c.LFG(no))},l.\u0275prov=c.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})(),Up=(()=>{class l{constructor(s,p,M){this._element=s,this._zone=M,this._afterInit=!1,this._isCollapsed=!1,this.ngbCollapseChange=new c.vpe,this.shown=new c.vpe,this.hidden=new c.vpe,this.animation=p.animation,this.horizontal=p.horizontal}set collapsed(s){this._isCollapsed!==s&&(this._isCollapsed=s,this._afterInit&&this._runTransitionWithEvents(s,this.animation))}ngOnInit(){this._runTransition(this._isCollapsed,!1),this._afterInit=!0}toggle(s=this._isCollapsed){this.collapsed=!s,this.ngbCollapseChange.next(this._isCollapsed)}_runTransition(s,p){return Ur(this._zone,this._element.nativeElement,Vp,{animation:p,runningTransition:"stop",context:{direction:s?"hide":"show",dimension:this.horizontal?"width":"height"}})}_runTransitionWithEvents(s,p){this._runTransition(s,p).subscribe(()=>{s?this.hidden.emit():this.shown.emit()})}}return l.\u0275fac=function(s){return new(s||l)(c.Y36(c.SBq),c.Y36(Wg),c.Y36(c.R0b))},l.\u0275dir=c.lG2({type:l,selectors:[["","ngbCollapse",""]],hostVars:2,hostBindings:function(s,p){2&s&&c.ekj("collapse-horizontal",p.horizontal)},inputs:{animation:"animation",collapsed:["ngbCollapse","collapsed"],horizontal:"horizontal"},outputs:{ngbCollapseChange:"ngbCollapseChange",shown:"shown",hidden:"hidden"},exportAs:["ngbCollapse"],standalone:!0}),l})(),$g=0,Fd=(()=>{class l{constructor(s){this._item=s}template(){return!1===this._item.destroyOnHide||this._item.animatingBodyCollapse?this._bodyTpl:null}}return l.\u0275fac=function(s){return new(s||l)(c.Y36((0,c.Gpc)(()=>Ps)))},l.\u0275cmp=c.Xpm({type:l,selectors:[["","ngbAccordionBody",""]],contentQueries:function(s,p,M){if(1&s&&c.Suo(M,c.Rgc,7),2&s){let F;c.iGM(F=c.CRH())&&(p._bodyTpl=F.first)}},hostVars:2,hostBindings:function(s,p){2&s&&c.ekj("accordion-body",!0)},standalone:!0,features:[c.jDz],attrs:pv,decls:1,vars:1,consts:[[3,"ngTemplateOutlet"]],template:function(s,p){1&s&&c.YNc(0,pp,0,0,"ng-template",0),2&s&&c.Q6J("ngTemplateOutlet",p.template())},dependencies:[Je.tP],encapsulation:2}),l})(),ya=(()=>{class l{constructor(s,p){this.item=s,this.ngbCollapse=p}}return l.\u0275fac=function(s){return new(s||l)(c.Y36((0,c.Gpc)(()=>Ps)),c.Y36(Up))},l.\u0275dir=c.lG2({type:l,selectors:[["","ngbAccordionCollapse",""]],hostAttrs:["role","region"],hostVars:4,hostBindings:function(s,p){2&s&&(c.Ikx("id",p.item.collapseId),c.uIk("aria-labelledby",p.item.toggleId),c.ekj("accordion-collapse",!0))},exportAs:["ngbAccordionCollapse"],standalone:!0,features:[c.zW0([Up])]}),l})(),Ps=(()=>{class l{constructor(s,p){this._accordion=s,this._cd=p,this._subscriptions=[],this._collapsed=!0,this._id="ngb-accordion-item-"+$g++,this.animatingBodyCollapse=!1,this.destroyOnHide=this._accordion.destroyOnHide,this.disabled=!1,this.shown=new c.vpe,this.hidden=new c.vpe}set id(s){Tl(s)&&""!==s&&(this._id=s)}set collapsed(s){this.collapsed!==s&&(this._collapsed=s,this._cd.markForCheck(),this._collapsed||(this.animatingBodyCollapse=!0,this._cd.detectChanges()),this._collapse.ngbCollapse.animation=this._accordion.animation,this._collapse.ngbCollapse.collapsed=s)}get collapsed(){return this._collapsed}get id(){return`${this._id}`}get toggleId(){return`${this.id}-toggle`}get collapseId(){return`${this.id}-collapse`}ngAfterContentInit(){const{ngbCollapse:s}=this._collapse;s.animation=!1,s.collapsed=this.collapsed,s.animation=this._accordion.animation,this._subscriptions.push(s.hidden.subscribe(()=>{this.animatingBodyCollapse=!1,this.hidden.emit(),this._accordion.hidden.emit(this.id)}),s.shown.subscribe(()=>{this.shown.emit(),this._accordion.shown.emit(this.id)}))}ngOnDestroy(){this._subscriptions.forEach(s=>s.unsubscribe())}toggle(){this.collapsed=!this.collapsed}}return l.\u0275fac=function(s){return new(s||l)(c.Y36((0,c.Gpc)(()=>Ld)),c.Y36(c.sBO))},l.\u0275dir=c.lG2({type:l,selectors:[["","ngbAccordionItem",""]],contentQueries:function(s,p,M){if(1&s&&c.Suo(M,ya,7),2&s){let F;c.iGM(F=c.CRH())&&(p._collapse=F.first)}},hostVars:3,hostBindings:function(s,p){2&s&&(c.Ikx("id",p.id),c.ekj("accordion-item",!0))},inputs:{id:["ngbAccordionItem","id"],destroyOnHide:"destroyOnHide",disabled:"disabled",collapsed:"collapsed"},outputs:{shown:"shown",hidden:"hidden"},exportAs:["ngbAccordionItem"],standalone:!0}),l})(),Ld=(()=>{class l{constructor(s){this.destroyOnHide=!0,this.shown=new c.vpe,this.hidden=new c.vpe,this.animation=s.animation,this.closeOthers=s.closeOthers}toggle(s){const p=this._getItem(s);if(p){const M=p.collapsed;this._items.forEach(F=>{F===p?F.toggle():this.closeOthers&&M&&(F.collapsed=!0)})}}expand(s){const p=this._getItem(s);p&&this._items.forEach(M=>{M===p?p.collapsed=!1:this.closeOthers&&(M.collapsed=!0)})}expandAll(){this.closeOthers?this._items.find(s=>!s.collapsed)||(this._items.get(0).collapsed=!1):this._items.forEach(s=>{s.collapsed=!1})}collapse(s){const p=this._getItem(s);p&&(p.collapsed=!0)}collapseAll(){this._items.forEach(s=>s.collapsed=!0)}isExpanded(s){const p=this._getItem(s);return!!p&&!p.collapsed}_getItem(s){return this._items.find(p=>p.id===s)}}return l.\u0275fac=function(s){return new(s||l)(c.Y36(Au))},l.\u0275dir=c.lG2({type:l,selectors:[["","ngbAccordion",""]],contentQueries:function(s,p,M){if(1&s&&c.Suo(M,Ps,4),2&s){let F;c.iGM(F=c.CRH())&&(p._items=F)}},hostVars:2,hostBindings:function(s,p){2&s&&c.ekj("accordion",!0)},inputs:{animation:"animation",closeOthers:"closeOthers",destroyOnHide:"destroyOnHide"},outputs:{shown:"shown",hidden:"hidden"},exportAs:["ngbAccordion"],standalone:!0}),l})(),qh=(()=>{class l{}return l.\u0275fac=function(s){return new(s||l)},l.\u0275mod=c.oAB({type:l}),l.\u0275inj=c.cJS({imports:[$h,Fd]}),l})();const Va=({classList:l})=>{l.remove("show")};let xl=(()=>{class l{constructor(s){this._ngbConfig=s,this.dismissible=!0,this.type="warning"}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(s){this._animation=s}}return l.\u0275fac=function(s){return new(s||l)(c.LFG(no))},l.\u0275prov=c.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})(),Yg=(()=>{class l{constructor(s,p,M,F){this._renderer=p,this._element=M,this._zone=F,this.closed=new c.vpe,this.dismissible=s.dismissible,this.type=s.type,this.animation=s.animation}close(){const s=Ur(this._zone,this._element.nativeElement,Va,{animation:this.animation,runningTransition:"continue"});return s.subscribe(()=>this.closed.emit()),s}ngOnChanges(s){const p=s.type;p&&!p.firstChange&&(this._renderer.removeClass(this._element.nativeElement,`alert-${p.previousValue}`),this._renderer.addClass(this._element.nativeElement,`alert-${p.currentValue}`))}ngOnInit(){this._renderer.addClass(this._element.nativeElement,`alert-${this.type}`)}}return l.\u0275fac=function(s){return new(s||l)(c.Y36(xl),c.Y36(c.Qsj),c.Y36(c.SBq),c.Y36(c.R0b))},l.\u0275cmp=c.Xpm({type:l,selectors:[["ngb-alert"]],hostAttrs:["role","alert",1,"alert","show"],hostVars:4,hostBindings:function(s,p){2&s&&c.ekj("fade",p.animation)("alert-dismissible",p.dismissible)},inputs:{animation:"animation",dismissible:"dismissible",type:"type"},outputs:{closed:"closed"},exportAs:["ngbAlert"],standalone:!0,features:[c.TTD,c.jDz],ngContentSelectors:Rd,decls:2,vars:1,consts:function(){let f;return f=$localize`:@@ngb.alert.close:Close`,[["type","button","class","btn-close","aria-label",f,3,"click",4,"ngIf"],["type","button","aria-label",f,1,"btn-close",3,"click"]]},template:function(s,p){1&s&&(c.F$t(),c.Hsn(0),c.YNc(1,mv,1,0,"button",0)),2&s&&(c.xp6(1),c.Q6J("ngIf",p.dismissible))},dependencies:[Je.O5],styles:["ngb-alert{display:block}\n"],encapsulation:2,changeDetection:0}),l})(),Hp=(()=>{class l{}return l.\u0275fac=function(s){return new(s||l)},l.\u0275mod=c.oAB({type:l}),l.\u0275inj=c.cJS({imports:[Yg]}),l})();var Ua=(()=>{return(l=Ua||(Ua={})).START="start",l.END="end",Ua;var l})();const Jh=({classList:l})=>l.contains("carousel-item-start")||l.contains("carousel-item-end"),Dl=l=>{l.remove("carousel-item-start"),l.remove("carousel-item-end")},Bd=l=>{Dl(l),l.remove("carousel-item-prev"),l.remove("carousel-item-next")},zp=(l,f,{direction:s})=>{const{classList:p}=l;return f?(Jh(l)?Dl(p):(p.add("carousel-item-"+(s===Ua.START?"next":"prev")),Jc(l),p.add("carousel-item-"+s)),()=>{Bd(p),p.add("active")}):(Dl(p),Bd(p),void p.add("active"))},Zh=(l,f,{direction:s})=>{const{classList:p}=l;return f?(Jh(l)?Dl(p):p.add("carousel-item-"+s),()=>{Bd(p),p.remove("active")}):(Dl(p),Bd(p),void p.remove("active"))};let Kc=(()=>{class l{constructor(s){this._ngbConfig=s,this.interval=5e3,this.wrap=!0,this.keyboard=!0,this.pauseOnHover=!0,this.pauseOnFocus=!0,this.showNavigationArrows=!0,this.showNavigationIndicators=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(s){this._animation=s}}return l.\u0275fac=function(s){return new(s||l)(c.LFG(no))},l.\u0275prov=c.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})(),qg=0,Kh=(()=>{class l{constructor(s){this.tplRef=s,this.id="ngb-slide-"+qg++,this.slid=new c.vpe}}return l.\u0275fac=function(s){return new(s||l)(c.Y36(c.Rgc))},l.\u0275dir=c.lG2({type:l,selectors:[["ng-template","ngbSlide",""]],inputs:{id:"id"},outputs:{slid:"slid"},standalone:!0}),l})(),Jg=(()=>{class l{constructor(s,p,M,F,Q){this._platformId=p,this._ngZone=M,this._cd=F,this._container=Q,this.NgbSlideEventSource=Yi,this._destroy$=new Se.x,this._interval$=new yt.X(0),this._mouseHover$=new yt.X(!1),this._focused$=new yt.X(!1),this._pauseOnHover$=new yt.X(!1),this._pauseOnFocus$=new yt.X(!1),this._pause$=new yt.X(!1),this._wrap$=new yt.X(!1),this.slide=new c.vpe,this.slid=new c.vpe,this._transitionIds=null,this.animation=s.animation,this.interval=s.interval,this.wrap=s.wrap,this.keyboard=s.keyboard,this.pauseOnHover=s.pauseOnHover,this.pauseOnFocus=s.pauseOnFocus,this.showNavigationArrows=s.showNavigationArrows,this.showNavigationIndicators=s.showNavigationIndicators}set interval(s){this._interval$.next(s)}get interval(){return this._interval$.value}set wrap(s){this._wrap$.next(s)}get wrap(){return this._wrap$.value}set pauseOnHover(s){this._pauseOnHover$.next(s)}get pauseOnHover(){return this._pauseOnHover$.value}set pauseOnFocus(s){this._pauseOnFocus$.next(s)}get pauseOnFocus(){return this._pauseOnFocus$.value}set mouseHover(s){this._mouseHover$.next(s)}get mouseHover(){return this._mouseHover$.value}set focused(s){this._focused$.next(s)}get focused(){return this._focused$.value}arrowLeft(){this.focus(),this.prev(Yi.ARROW_LEFT)}arrowRight(){this.focus(),this.next(Yi.ARROW_RIGHT)}ngAfterContentInit(){(0,Je.NF)(this._platformId)&&this._ngZone.runOutsideAngular(()=>{const s=(0,dn.a)([this.slide.pipe((0,Ar.U)(p=>p.current),(0,io.O)(this.activeId)),this._wrap$,this.slides.changes.pipe((0,io.O)(null))]).pipe((0,Ar.U)(([p,M])=>{const F=this.slides.toArray(),Q=this._getSlideIdxById(p);return M?F.length>1:Q<F.length-1}),yi());(0,dn.a)([this._pause$,this._pauseOnHover$,this._mouseHover$,this._pauseOnFocus$,this._focused$,this._interval$,s]).pipe((0,Ar.U)(([p,M,F,Q,le,de,ye])=>p||M&&F||Q&&le||!ye?0:de),yi(),(0,Ro.w)(p=>p>0?Jt(p,p):Vi),(0,cn.R)(this._destroy$)).subscribe(()=>this._ngZone.run(()=>this.next(Yi.TIMER)))}),this.slides.changes.pipe((0,cn.R)(this._destroy$)).subscribe(()=>{this._transitionIds?.forEach(s=>(l=>{Nd.get(l)?.complete()})(this._getSlideElement(s))),this._transitionIds=null,this._cd.markForCheck(),this._ngZone.onStable.pipe((0,Qn.q)(1)).subscribe(()=>{for(const{id:s}of this.slides){const p=this._getSlideElement(s);s===this.activeId?p.classList.add("active"):p.classList.remove("active")}})})}ngAfterContentChecked(){let s=this._getSlideById(this.activeId);this.activeId=s?s.id:this.slides.length?this.slides.first.id:""}ngAfterViewInit(){if(this.activeId){const s=this._getSlideElement(this.activeId);s&&s.classList.add("active")}}ngOnDestroy(){this._destroy$.next()}select(s,p){this._cycleToSelected(s,this._getSlideEventDirection(this.activeId,s),p)}prev(s){this._cycleToSelected(this._getPrevSlide(this.activeId),Ua.END,s)}next(s){this._cycleToSelected(this._getNextSlide(this.activeId),Ua.START,s)}pause(){this._pause$.next(!0)}cycle(){this._pause$.next(!1)}focus(){this._container.nativeElement.focus()}_cycleToSelected(s,p,M){const F=this._transitionIds;if(F&&(F[0]!==s||F[1]!==this.activeId))return;let Q=this._getSlideById(s);if(Q&&Q.id!==this.activeId){this._transitionIds=[this.activeId,s],this.slide.emit({prev:this.activeId,current:Q.id,direction:p,paused:this._pause$.value,source:M});const le={animation:this.animation,runningTransition:"stop",context:{direction:p}},de=[],ye=this._getSlideById(this.activeId);if(ye){const St=Ur(this._ngZone,this._getSlideElement(ye.id),Zh,le);St.subscribe(()=>{ye.slid.emit({isShown:!1,direction:p,source:M})}),de.push(St)}const we=this.activeId;this.activeId=Q.id;const wt=this._getSlideById(this.activeId),_t=Ur(this._ngZone,this._getSlideElement(Q.id),zp,le);_t.subscribe(()=>{wt?.slid.emit({isShown:!0,direction:p,source:M})}),de.push(_t),zt(...de).pipe((0,Qn.q)(1)).subscribe(()=>{this._transitionIds=null,this.slid.emit({prev:we,current:Q.id,direction:p,paused:this._pause$.value,source:M})})}this._cd.markForCheck()}_getSlideEventDirection(s,p){return this._getSlideIdxById(s)>this._getSlideIdxById(p)?Ua.END:Ua.START}_getSlideById(s){return this.slides.find(p=>p.id===s)||null}_getSlideIdxById(s){const p=this._getSlideById(s);return null!=p?this.slides.toArray().indexOf(p):-1}_getNextSlide(s){const p=this.slides.toArray(),M=this._getSlideIdxById(s);return M===p.length-1?this.wrap?p[0].id:p[p.length-1].id:p[M+1].id}_getPrevSlide(s){const p=this.slides.toArray(),M=this._getSlideIdxById(s);return 0===M?this.wrap?p[p.length-1].id:p[0].id:p[M-1].id}_getSlideElement(s){return this._container.nativeElement.querySelector(`#slide-${s}`)}}return l.\u0275fac=function(s){return new(s||l)(c.Y36(Kc),c.Y36(c.Lbi),c.Y36(c.R0b),c.Y36(c.sBO),c.Y36(c.SBq))},l.\u0275cmp=c.Xpm({type:l,selectors:[["ngb-carousel"]],contentQueries:function(s,p,M){if(1&s&&c.Suo(M,Kh,4),2&s){let F;c.iGM(F=c.CRH())&&(p.slides=F)}},hostAttrs:["tabIndex","0",1,"carousel","slide"],hostVars:3,hostBindings:function(s,p){1&s&&c.NdJ("keydown.arrowLeft",function(){return p.keyboard&&p.arrowLeft()})("keydown.arrowRight",function(){return p.keyboard&&p.arrowRight()})("mouseenter",function(){return p.mouseHover=!0})("mouseleave",function(){return p.mouseHover=!1})("focusin",function(){return p.focused=!0})("focusout",function(){return p.focused=!1}),2&s&&(c.uIk("aria-activedescendant","slide-"+p.activeId),c.Udp("display","block"))},inputs:{animation:"animation",activeId:"activeId",interval:"interval",wrap:"wrap",keyboard:"keyboard",pauseOnHover:"pauseOnHover",pauseOnFocus:"pauseOnFocus",showNavigationArrows:"showNavigationArrows",showNavigationIndicators:"showNavigationIndicators"},outputs:{slide:"slide",slid:"slid"},exportAs:["ngbCarousel"],standalone:!0,features:[c.jDz],decls:6,vars:6,consts:function(){let f,s,p;return f=$localize`:Currently selected slide number read by screen reader@@ngb.carousel.slide-number: Slide ${"\ufffd0\ufffd"}:INTERPOLATION: of ${"\ufffd1\ufffd"}:INTERPOLATION_1: `,s=$localize`:@@ngb.carousel.previous:Previous`,p=$localize`:@@ngb.carousel.next:Next`,[["role","tablist",1,"carousel-indicators"],["type","button","data-bs-target","","role","tab",3,"active","click",4,"ngFor","ngForOf"],[1,"carousel-inner"],["class","carousel-item","role","tabpanel",3,"id",4,"ngFor","ngForOf"],["class","carousel-control-prev","type","button",3,"click",4,"ngIf"],["class","carousel-control-next","type","button",3,"click",4,"ngIf"],["type","button","data-bs-target","","role","tab",3,"click"],["role","tabpanel",1,"carousel-item",3,"id"],[1,"visually-hidden"],f,[3,"ngTemplateOutlet"],["type","button",1,"carousel-control-prev",3,"click"],["aria-hidden","true",1,"carousel-control-prev-icon"],s,["type","button",1,"carousel-control-next",3,"click"],["aria-hidden","true",1,"carousel-control-next-icon"],p]},template:function(s,p){1&s&&(c.TgZ(0,"div",0),c.YNc(1,dg,1,5,"button",1),c.qZA(),c.TgZ(2,"div",2),c.YNc(3,gv,4,4,"div",3),c.qZA(),c.YNc(4,_v,4,0,"button",4),c.YNc(5,Rh,4,0,"button",5)),2&s&&(c.ekj("visually-hidden",!p.showNavigationIndicators),c.xp6(1),c.Q6J("ngForOf",p.slides),c.xp6(2),c.Q6J("ngForOf",p.slides),c.xp6(1),c.Q6J("ngIf",p.showNavigationArrows),c.xp6(1),c.Q6J("ngIf",p.showNavigationArrows))},dependencies:[Je.ax,Je.tP,Je.O5],encapsulation:2,changeDetection:0}),l})();var Yi=(()=>{return(l=Yi||(Yi={})).TIMER="timer",l.ARROW_LEFT="arrowLeft",l.ARROW_RIGHT="arrowRight",l.INDICATOR="indicator",Yi;var l})();let Wp=(()=>{class l{}return l.\u0275fac=function(s){return new(s||l)},l.\u0275mod=c.oAB({type:l}),l.\u0275inj=c.cJS({imports:[Jg]}),l})(),$p=(()=>{class l{}return l.\u0275fac=function(s){return new(s||l)},l.\u0275mod=c.oAB({type:l}),l.\u0275inj=c.cJS({}),l})();class wr{constructor(f,s,p){this.year=Gi(f)?f:null,this.month=Gi(s)?s:null,this.day=Gi(p)?p:null}static from(f){return f instanceof wr?f:f?new wr(f.year,f.month,f.day):null}equals(f){return null!=f&&this.year===f.year&&this.month===f.month&&this.day===f.day}before(f){return!!f&&(this.year===f.year?this.month===f.month?this.day!==f.day&&this.day<f.day:this.month<f.month:this.year<f.year)}after(f){return!!f&&(this.year===f.year?this.month===f.month?this.day!==f.day&&this.day>f.day:this.month>f.month:this.year>f.year)}}function ac(l,f){return!function qp(l,f){return!l&&!f||!!l&&!!f&&l.equals(f)}(l,f)}function Yp(l,f){return!(!l&&!f||l&&f&&l.year===f.year&&l.month===f.month)}function Iu(l,f,s){return l&&f&&l.before(f)?f:l&&s&&l.after(s)?s:l||null}function Pu(l,f){const{minDate:s,maxDate:p,disabled:M,markDisabled:F}=f;return!(null==l||M||F&&F(l,{year:l.year,month:l.month})||s&&l.before(s)||p&&l.after(p))}function jr(l){return new wr(l.getFullYear(),l.getMonth()+1,l.getDate())}function cc(l){const f=new Date(l.year,l.month-1,l.day,12);return isNaN(f.getTime())||f.setFullYear(l.year),f}let Ou=(()=>{class l{}return l.\u0275fac=function(s){return new(s||l)},l.\u0275prov=c.Yz7({token:l,factory:function(){return function Zp(){return new Qh}()},providedIn:"root"}),l})(),Qh=(()=>{class l extends Ou{getDaysPerWeek(){return 7}getMonths(){return[1,2,3,4,5,6,7,8,9,10,11,12]}getWeeksPerMonth(){return 6}getNext(s,p="d",M=1){let F=cc(s),Q=!0,le=F.getMonth();switch(p){case"y":F.setFullYear(F.getFullYear()+M);break;case"m":le+=M,F.setMonth(le),le%=12,le<0&&(le+=12);break;case"d":F.setDate(F.getDate()+M),Q=!1;break;default:return s}return Q&&F.getMonth()!==le&&F.setDate(0),jr(F)}getPrev(s,p="d",M=1){return this.getNext(s,p,-M)}getWeekday(s){let M=cc(s).getDay();return 0===M?7:M}getWeekNumber(s,p){7===p&&(p=0);const Q=cc(s[(11-p)%7]);Q.setDate(Q.getDate()+4-(Q.getDay()||7));const le=Q.getTime();return Q.setMonth(0),Q.setDate(1),Math.floor(Math.round((le-Q.getTime())/864e5)/7)+1}getToday(){return jr(new Date)}isValid(s){if(!(s&&Gi(s.year)&&Gi(s.month)&&Gi(s.day)&&0!==s.year))return!1;const p=cc(s);return!isNaN(p.getTime())&&p.getFullYear()===s.year&&p.getMonth()+1===s.month&&p.getDate()===s.day}}return l.\u0275fac=function(){let f;return function(p){return(f||(f=c.n5z(l)))(p||l)}}(),l.\u0275prov=c.Yz7({token:l,factory:l.\u0275fac}),l})(),Ha=(()=>{class l{getMonthLabel(s){return`${this.getMonthFullName(s.month,s.year)} ${this.getYearNumerals(s.year)}`}getDayNumerals(s){return`${s.day}`}getWeekNumerals(s){return`${s}`}getYearNumerals(s){return`${s}`}getWeekLabel(){return""}}return l.\u0275fac=function(s){return new(s||l)},l.\u0275prov=c.Yz7({token:l,factory:function(s){let p=null;return p=s?new s:function Ov(l){return new Xg(l)}(c.LFG(c.soG)),p},providedIn:"root"}),l})(),Xg=(()=>{class l extends Ha{constructor(s){super(),this._locale=s,this._monthsShort=(0,Je.UT)(s,Je.x.Standalone,Je.Tn.Abbreviated),this._monthsFull=(0,Je.UT)(s,Je.x.Standalone,Je.Tn.Wide)}getWeekdayLabel(s,p){const M=(0,Je.Mn)(this._locale,Je.x.Standalone,void 0===p?Je.Tn.Short:p);return M.map((Q,le)=>M[(le+1)%7])[s-1]||""}getMonthShortName(s){return this._monthsShort[s-1]||""}getMonthFullName(s){return this._monthsFull[s-1]||""}getDayAriaLabel(s){const p=new Date(s.year,s.month-1,s.day);return(0,Je.p6)(p,"fullDate",this._locale)}}return l.\u0275fac=function(s){return new(s||l)(c.LFG(c.soG))},l.\u0275prov=c.Yz7({token:l,factory:l.\u0275fac}),l})(),Nu=(()=>{class l{constructor(s,p){this._calendar=s,this._i18n=p,this._VALIDATORS={dayTemplateData:M=>{if(this._state.dayTemplateData!==M)return{dayTemplateData:M}},displayMonths:M=>{if(Gi(M=ds(M))&&M>0&&this._state.displayMonths!==M)return{displayMonths:M}},disabled:M=>{if(this._state.disabled!==M)return{disabled:M}},firstDayOfWeek:M=>{if(Gi(M=ds(M))&&M>=0&&this._state.firstDayOfWeek!==M)return{firstDayOfWeek:M}},focusVisible:M=>{if(this._state.focusVisible!==M&&!this._state.disabled)return{focusVisible:M}},markDisabled:M=>{if(this._state.markDisabled!==M)return{markDisabled:M}},maxDate:M=>{const F=this.toValidDate(M,null);if(ac(this._state.maxDate,F))return{maxDate:F}},minDate:M=>{const F=this.toValidDate(M,null);if(ac(this._state.minDate,F))return{minDate:F}},navigation:M=>{if(this._state.navigation!==M)return{navigation:M}},outsideDays:M=>{if(this._state.outsideDays!==M)return{outsideDays:M}},weekdays:M=>{const F=!0===M||!1===M?Je.Tn.Short:M,Q=!0!==M&&!1!==M||M;if(this._state.weekdayWidth!==F||this._state.weekdaysVisible!==Q)return{weekdayWidth:F,weekdaysVisible:Q}}},this._model$=new Se.x,this._dateSelect$=new Se.x,this._state={dayTemplateData:null,markDisabled:null,maxDate:null,minDate:null,disabled:!1,displayMonths:1,firstDate:null,firstDayOfWeek:1,lastDate:null,focusDate:null,focusVisible:!1,months:[],navigation:"select",outsideDays:"visible",prevDisabled:!1,nextDisabled:!1,selectedDate:null,selectBoxes:{years:[],months:[]},weekdayWidth:Je.Tn.Short,weekdaysVisible:!0}}get model$(){return this._model$.pipe((0,cr.h)(s=>s.months.length>0))}get dateSelect$(){return this._dateSelect$.pipe((0,cr.h)(s=>null!==s))}set(s){let p=Object.keys(s).map(M=>this._VALIDATORS[M](s[M])).reduce((M,F)=>({...M,...F}),{});Object.keys(p).length>0&&this._nextState(p)}focus(s){const p=this.toValidDate(s,null);null!=p&&!this._state.disabled&&ac(this._state.focusDate,p)&&this._nextState({focusDate:s})}focusSelect(){Pu(this._state.focusDate,this._state)&&this.select(this._state.focusDate,{emitEvent:!0})}open(s){const p=this.toValidDate(s,this._calendar.getToday());null!=p&&!this._state.disabled&&(!this._state.firstDate||Yp(this._state.firstDate,p))&&this._nextState({firstDate:p})}select(s,p={}){const M=this.toValidDate(s,null);null!=M&&!this._state.disabled&&(ac(this._state.selectedDate,M)&&this._nextState({selectedDate:M}),p.emitEvent&&Pu(M,this._state)&&this._dateSelect$.next(M))}toValidDate(s,p){const M=wr.from(s);return void 0===p&&(p=this._calendar.getToday()),this._calendar.isValid(M)?M:p}getMonth(s){for(let p of this._state.months)if(s.month===p.number&&s.year===p.year)return p;throw new Error(`month ${s.month} of year ${s.year} not found`)}_nextState(s){const p=this._updateState(s);this._patchContexts(p),this._state=p,this._model$.next(this._state)}_patchContexts(s){const{months:p,displayMonths:M,selectedDate:F,focusDate:Q,focusVisible:le,disabled:de,outsideDays:ye}=s;s.months.forEach(we=>{we.weeks.forEach(wt=>{wt.days.forEach(_t=>{Q&&(_t.context.focused=Q.equals(_t.date)&&le),_t.tabindex=!de&&Q&&_t.date.equals(Q)&&Q.month===we.number?0:-1,!0===de&&(_t.context.disabled=!0),void 0!==F&&(_t.context.selected=null!==F&&F.equals(_t.date)),we.number!==_t.date.month&&(_t.hidden="hidden"===ye||"collapsed"===ye||M>1&&_t.date.after(p[0].firstDate)&&_t.date.before(p[M-1].lastDate))})})})}_updateState(s){const p=Object.assign({},this._state,s);let M=p.firstDate;if(("minDate"in s||"maxDate"in s)&&(function Jp(l,f){if(f&&l&&f.before(l))throw new Error(`'maxDate' ${f} should be greater than 'minDate' ${l}`)}(p.minDate,p.maxDate),p.focusDate=Iu(p.focusDate,p.minDate,p.maxDate),p.firstDate=Iu(p.firstDate,p.minDate,p.maxDate),M=p.focusDate),"disabled"in s&&(p.focusVisible=!1),"selectedDate"in s&&0===this._state.months.length&&(M=p.selectedDate),"focusVisible"in s||"focusDate"in s&&(p.focusDate=Iu(p.focusDate,p.minDate,p.maxDate),M=p.focusDate,0!==p.months.length&&p.focusDate&&!p.focusDate.before(p.firstDate)&&!p.focusDate.after(p.lastDate)))return p;if("firstDate"in s&&(p.firstDate=Iu(p.firstDate,p.minDate,p.maxDate),M=p.firstDate),M){const Q=function Xh(l,f,s,p,M){const{displayMonths:F,months:Q}=s,le=Q.splice(0,Q.length);return Array.from({length:F},(ye,we)=>{const wt=Object.assign(l.getNext(f,"m",we),{day:1});if(Q[we]=null,!M){const _t=le.findIndex(St=>St.firstDate.equals(wt));-1!==_t&&(Q[we]=le.splice(_t,1)[0])}return wt}).forEach((ye,we)=>{null===Q[we]&&(Q[we]=function lc(l,f,s,p,M={}){const{dayTemplateData:F,minDate:Q,maxDate:le,firstDayOfWeek:de,markDisabled:ye,outsideDays:we,weekdayWidth:wt,weekdaysVisible:_t}=s,St=l.getToday();M.firstDate=null,M.lastDate=null,M.number=f.month,M.year=f.year,M.weeks=M.weeks||[],M.weekdays=M.weekdays||[],f=function Rr(l,f,s){const p=l.getDaysPerWeek(),M=new wr(f.year,f.month,1),F=l.getWeekday(M)%p;return l.getPrev(M,"d",(p+F-s)%p)}(l,f,de),_t||(M.weekdays.length=0);for(let vn=0;vn<l.getWeeksPerMonth();vn++){let Ct=M.weeks[vn];Ct||(Ct=M.weeks[vn]={number:0,days:[],collapsed:!0});const tn=Ct.days;for(let Cn=0;Cn<l.getDaysPerWeek();Cn++){0===vn&&_t&&(M.weekdays[Cn]=p.getWeekdayLabel(l.getWeekday(f),wt));const En=new wr(f.year,f.month,f.day),jn=l.getNext(En),Jn=p.getDayAriaLabel(En);let wn=!!(Q&&En.before(Q)||le&&En.after(le));!wn&&ye&&(wn=ye(En,{month:M.number,year:M.year}));let Hn=En.equals(St),pi=F?F(En,{month:M.number,year:M.year}):void 0;null===M.firstDate&&En.month===M.number&&(M.firstDate=En),En.month===M.number&&jn.month!==M.number&&(M.lastDate=En);let ti=tn[Cn];ti||(ti=tn[Cn]={}),ti.date=En,ti.context=Object.assign(ti.context||{},{$implicit:En,date:En,data:pi,currentMonth:M.number,currentYear:M.year,disabled:wn,focused:!1,selected:!1,today:Hn}),ti.tabindex=-1,ti.ariaLabel=Jn,ti.hidden=!1,f=jn}Ct.number=l.getWeekNumber(tn.map(Cn=>Cn.date),de),Ct.collapsed="collapsed"===we&&tn[0].date.month!==M.number&&tn[tn.length-1].date.month!==M.number}return M}(l,ye,s,p,le.shift()||{}))}),Q}(this._calendar,M,p,this._i18n,"dayTemplateData"in s||"firstDayOfWeek"in s||"markDisabled"in s||"minDate"in s||"maxDate"in s||"disabled"in s||"outsideDays"in s||"weekdaysVisible"in s);p.months=Q,p.firstDate=Q[0].firstDate,p.lastDate=Q[Q.length-1].lastDate,"selectedDate"in s&&!Pu(p.selectedDate,p)&&(p.selectedDate=null),"firstDate"in s&&(!p.focusDate||p.focusDate.before(p.firstDate)||p.focusDate.after(p.lastDate))&&(p.focusDate=M);const le=!this._state.firstDate||this._state.firstDate.year!==p.firstDate.year,de=!this._state.firstDate||this._state.firstDate.month!==p.firstDate.month;"select"===p.navigation?(("minDate"in s||"maxDate"in s||0===p.selectBoxes.years.length||le)&&(p.selectBoxes.years=function Kg(l,f,s){if(!l)return[];const p=f?Math.max(f.year,l.year-500):l.year-10,F=(s?Math.min(s.year,l.year+500):l.year+10)-p+1,Q=Array(F);for(let le=0;le<F;le++)Q[le]=p+le;return Q}(p.firstDate,p.minDate,p.maxDate)),("minDate"in s||"maxDate"in s||0===p.selectBoxes.months.length||le)&&(p.selectBoxes.months=function Zg(l,f,s,p){if(!f)return[];let M=l.getMonths(f.year);if(s&&f.year===s.year){const F=M.findIndex(Q=>Q===s.month);M=M.slice(F)}if(p&&f.year===p.year){const F=M.findIndex(Q=>Q===p.month);M=M.slice(0,F+1)}return M}(this._calendar,p.firstDate,p.minDate,p.maxDate))):p.selectBoxes={years:[],months:[]},("arrows"===p.navigation||"select"===p.navigation)&&(de||le||"minDate"in s||"maxDate"in s||"disabled"in s)&&(p.prevDisabled=p.disabled||function jd(l,f,s){const p=Object.assign(l.getPrev(f,"m"),{day:1});return null!=s&&(p.year===s.year&&p.month<s.month||p.year<s.year&&1===s.month)}(this._calendar,p.firstDate,p.minDate),p.nextDisabled=p.disabled||function Xc(l,f,s){const p=Object.assign(l.getNext(f,"m"),{day:1});return null!=s&&p.after(s)}(this._calendar,p.lastDate,p.maxDate))}return p}}return l.\u0275fac=function(s){return new(s||l)(c.LFG(Ou),c.LFG(Ha))},l.\u0275prov=c.Yz7({token:l,factory:l.\u0275fac}),l})();var uc=(()=>{return(l=uc||(uc={}))[l.PREV=0]="PREV",l[l.NEXT=1]="NEXT",uc;var l})();let Kp=(()=>{class l{constructor(s){this.i18n=s}isMuted(){return!this.selected&&(this.date.month!==this.currentMonth||this.disabled)}}return l.\u0275fac=function(s){return new(s||l)(c.Y36(Ha))},l.\u0275cmp=c.Xpm({type:l,selectors:[["","ngbDatepickerDayView",""]],hostAttrs:[1,"btn-light"],hostVars:10,hostBindings:function(s,p){2&s&&c.ekj("bg-primary",p.selected)("text-white",p.selected)("text-muted",p.isMuted())("outside",p.isMuted())("active",p.focused)},inputs:{currentMonth:"currentMonth",date:"date",disabled:"disabled",focused:"focused",selected:"selected"},standalone:!0,features:[c.jDz],attrs:vv,decls:1,vars:1,template:function(s,p){1&s&&c._uU(0),2&s&&c.Oqu(p.i18n.getDayNumerals(p.date))},styles:["[ngbDatepickerDayView]{text-align:center;width:2rem;height:2rem;line-height:2rem;border-radius:.25rem;background:transparent}[ngbDatepickerDayView]:hover:not(.bg-primary),[ngbDatepickerDayView].active:not(.bg-primary){background-color:var(--bs-btn-bg);outline:1px solid var(--bs-border-color)}[ngbDatepickerDayView].outside{opacity:.5}\n"],encapsulation:2,changeDetection:0}),l})(),dc=(()=>{class l{constructor(s,p){this.i18n=s,this._renderer=p,this.select=new c.vpe,this._month=-1,this._year=-1}changeMonth(s){this.select.emit(new wr(this.date.year,ds(s),1))}changeYear(s){this.select.emit(new wr(ds(s),this.date.month,1))}ngAfterViewChecked(){this.date&&(this.date.month!==this._month&&(this._month=this.date.month,this._renderer.setProperty(this.monthSelect.nativeElement,"value",this._month)),this.date.year!==this._year&&(this._year=this.date.year,this._renderer.setProperty(this.yearSelect.nativeElement,"value",this._year)))}}return l.\u0275fac=function(s){return new(s||l)(c.Y36(Ha),c.Y36(c.Qsj))},l.\u0275cmp=c.Xpm({type:l,selectors:[["ngb-datepicker-navigation-select"]],viewQuery:function(s,p){if(1&s&&(c.Gf(yv,7,c.SBq),c.Gf(bv,7,c.SBq)),2&s){let M;c.iGM(M=c.CRH())&&(p.monthSelect=M.first),c.iGM(M=c.CRH())&&(p.yearSelect=M.first)}},inputs:{date:"date",disabled:"disabled",months:"months",years:"years"},outputs:{select:"select"},standalone:!0,features:[c.jDz],decls:6,vars:4,consts:function(){let f,s,p,M;return f=$localize`:@@ngb.datepicker.select-month:Select month`,s=$localize`:@@ngb.datepicker.select-month:Select month`,p=$localize`:@@ngb.datepicker.select-year:Select year`,M=$localize`:@@ngb.datepicker.select-year:Select year`,[["aria-label",f,"title",s,1,"form-select",3,"disabled","change"],["month",""],[3,"value",4,"ngFor","ngForOf"],["aria-label",p,"title",M,1,"form-select",3,"disabled","change"],["year",""],[3,"value"]]},template:function(s,p){1&s&&(c.TgZ(0,"select",0,1),c.NdJ("change",function(F){return p.changeMonth(F.target.value)}),c.YNc(2,Tv,2,3,"option",2),c.qZA(),c.TgZ(3,"select",3,4),c.NdJ("change",function(F){return p.changeYear(F.target.value)}),c.YNc(5,Mv,2,2,"option",2),c.qZA()),2&s&&(c.Q6J("disabled",p.disabled),c.xp6(2),c.Q6J("ngForOf",p.months),c.xp6(1),c.Q6J("disabled",p.disabled),c.xp6(2),c.Q6J("ngForOf",p.years))},dependencies:[Je.ax],styles:["ngb-datepicker-navigation-select>.form-select{flex:1 1 auto;padding:0 .5rem;font-size:.875rem;height:1.85rem}ngb-datepicker-navigation-select>.form-select:focus{z-index:1}ngb-datepicker-navigation-select>.form-select::-ms-value{background-color:transparent!important}\n"],encapsulation:2,changeDetection:0}),l})(),Qg=(()=>{class l{constructor(s){this.i18n=s,this.navigation=uc,this.months=[],this.navigate=new c.vpe,this.select=new c.vpe}onClickPrev(s){s.currentTarget.focus(),this.navigate.emit(this.navigation.PREV)}onClickNext(s){s.currentTarget.focus(),this.navigate.emit(this.navigation.NEXT)}}return l.\u0275fac=function(s){return new(s||l)(c.Y36(Ha))},l.\u0275cmp=c.Xpm({type:l,selectors:[["ngb-datepicker-navigation"]],inputs:{date:"date",disabled:"disabled",months:"months",showSelect:"showSelect",prevDisabled:"prevDisabled",nextDisabled:"nextDisabled",selectBoxes:"selectBoxes"},outputs:{navigate:"navigate",select:"select"},standalone:!0,features:[c.jDz],decls:8,vars:4,consts:function(){let f,s,p,M;return f=$localize`:@@ngb.datepicker.previous-month:Previous month`,s=$localize`:@@ngb.datepicker.previous-month:Previous month`,p=$localize`:@@ngb.datepicker.next-month:Next month`,M=$localize`:@@ngb.datepicker.next-month:Next month`,[[1,"ngb-dp-arrow"],["type","button","aria-label",f,"title",s,1,"btn","btn-link","ngb-dp-arrow-btn",3,"disabled","click"],[1,"ngb-dp-navigation-chevron"],["class","ngb-dp-navigation-select",3,"date","disabled","months","years","select",4,"ngIf"],[4,"ngIf"],[1,"ngb-dp-arrow","right"],["type","button","aria-label",p,"title",M,1,"btn","btn-link","ngb-dp-arrow-btn",3,"disabled","click"],[1,"ngb-dp-navigation-select",3,"date","disabled","months","years","select"],["ngFor","",3,"ngForOf"],["class","ngb-dp-arrow",4,"ngIf"],[1,"ngb-dp-month-name"]]},template:function(s,p){1&s&&(c.TgZ(0,"div",0)(1,"button",1),c.NdJ("click",function(F){return p.onClickPrev(F)}),c._UZ(2,"span",2),c.qZA()(),c.YNc(3,hg,1,4,"ngb-datepicker-navigation-select",3),c.YNc(4,_p,1,1,null,4),c.TgZ(5,"div",5)(6,"button",6),c.NdJ("click",function(F){return p.onClickNext(F)}),c._UZ(7,"span",2),c.qZA()()),2&s&&(c.xp6(1),c.Q6J("disabled",p.prevDisabled),c.xp6(2),c.Q6J("ngIf",p.showSelect),c.xp6(1),c.Q6J("ngIf",!p.showSelect),c.xp6(2),c.Q6J("disabled",p.nextDisabled))},dependencies:[Je.O5,Je.ax,dc],styles:["ngb-datepicker-navigation{display:flex;align-items:center}.ngb-dp-navigation-chevron{border-style:solid;border-width:.2em .2em 0 0;display:inline-block;width:.75em;height:.75em;margin-left:.25em;margin-right:.15em;transform:rotate(-135deg)}.ngb-dp-arrow{display:flex;flex:1 1 auto;padding-right:0;padding-left:0;margin:0;width:2rem;height:2rem}.ngb-dp-arrow.right{justify-content:flex-end}.ngb-dp-arrow.right .ngb-dp-navigation-chevron{transform:rotate(45deg);margin-left:.15em;margin-right:.25em}.ngb-dp-arrow-btn{padding:0 .25rem;margin:0 .5rem;border:none;background-color:transparent;z-index:1}.ngb-dp-arrow-btn:focus{outline-width:1px;outline-style:auto}@media all and (-ms-high-contrast: none),(-ms-high-contrast: active){.ngb-dp-arrow-btn:focus{outline-style:solid}}.ngb-dp-month-name{font-size:larger;height:2rem;line-height:2rem;text-align:center}.ngb-dp-navigation-select{display:flex;flex:1 1 9rem}\n"],encapsulation:2,changeDetection:0}),l})();var $n=(()=>{return(l=$n||($n={}))[l.Tab=9]="Tab",l[l.Enter=13]="Enter",l[l.Escape=27]="Escape",l[l.Space=32]="Space",l[l.PageUp=33]="PageUp",l[l.PageDown=34]="PageDown",l[l.End=35]="End",l[l.Home=36]="Home",l[l.ArrowLeft=37]="ArrowLeft",l[l.ArrowUp=38]="ArrowUp",l[l.ArrowRight=39]="ArrowRight",l[l.ArrowDown=40]="ArrowDown",$n;var l})();let kd=(()=>{class l{processKey(s,p){const{state:M,calendar:F}=p;switch(s.which){case $n.PageUp:p.focusDate(F.getPrev(M.focusedDate,s.shiftKey?"y":"m",1));break;case $n.PageDown:p.focusDate(F.getNext(M.focusedDate,s.shiftKey?"y":"m",1));break;case $n.End:p.focusDate(s.shiftKey?M.maxDate:M.lastDate);break;case $n.Home:p.focusDate(s.shiftKey?M.minDate:M.firstDate);break;case $n.ArrowLeft:p.focusDate(F.getPrev(M.focusedDate,"d",1));break;case $n.ArrowUp:p.focusDate(F.getPrev(M.focusedDate,"d",F.getDaysPerWeek()));break;case $n.ArrowRight:p.focusDate(F.getNext(M.focusedDate,"d",1));break;case $n.ArrowDown:p.focusDate(F.getNext(M.focusedDate,"d",F.getDaysPerWeek()));break;case $n.Enter:case $n.Space:p.focusSelect();break;default:return}s.preventDefault(),s.stopPropagation()}}return l.\u0275fac=function(s){return new(s||l)},l.\u0275prov=c.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})(),ef=(()=>{class l{constructor(){this.displayMonths=1,this.firstDayOfWeek=1,this.navigation="select",this.outsideDays="visible",this.showWeekNumbers=!1,this.weekdays=Je.Tn.Short}}return l.\u0275fac=function(s){return new(s||l)},l.\u0275prov=c.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})(),Qc=(()=>{class l{}return l.\u0275fac=function(s){return new(s||l)},l.\u0275prov=c.Yz7({token:l,factory:function(){return function tf(){return new hc}()},providedIn:"root"}),l})(),hc=(()=>{class l extends Qc{fromModel(s){return s&&Gi(s.year)&&Gi(s.month)&&Gi(s.day)?{year:s.year,month:s.month,day:s.day}:null}toModel(s){return s&&Gi(s.year)&&Gi(s.month)&&Gi(s.day)?{year:s.year,month:s.month,day:s.day}:null}}return l.\u0275fac=function(){let f;return function(p){return(f||(f=c.n5z(l)))(p||l)}}(),l.\u0275prov=c.Yz7({token:l,factory:l.\u0275fac}),l})(),nf=(()=>{class l{constructor(s){this.templateRef=s}}return l.\u0275fac=function(s){return new(s||l)(c.Y36(c.Rgc))},l.\u0275dir=c.lG2({type:l,selectors:[["ng-template","ngbDatepickerContent",""]],standalone:!0}),l})(),Fu=(()=>{class l{constructor(s,p,M,F){this.i18n=s,this.datepicker=p,this._keyboardService=M,this._service=F}set month(s){this.viewModel=this._service.getMonth(s)}onKeyDown(s){this._keyboardService.processKey(s,this.datepicker)}doSelect(s){!s.context.disabled&&!s.hidden&&this.datepicker.onDateSelect(s.date)}}return l.\u0275fac=function(s){return new(s||l)(c.Y36(Ha),c.Y36((0,c.Gpc)(()=>Gd)),c.Y36(kd),c.Y36(Nu))},l.\u0275cmp=c.Xpm({type:l,selectors:[["ngb-datepicker-month"]],hostAttrs:["role","grid"],hostBindings:function(s,p){1&s&&c.NdJ("keydown",function(F){return p.onKeyDown(F)})},inputs:{month:"month"},standalone:!0,features:[c.jDz],decls:2,vars:2,consts:[["class","ngb-dp-week ngb-dp-weekdays","role","row",4,"ngIf"],["ngFor","",3,"ngForOf"],["role","row",1,"ngb-dp-week","ngb-dp-weekdays"],["class","ngb-dp-weekday ngb-dp-showweek small",4,"ngIf"],["class","ngb-dp-weekday small","role","columnheader",4,"ngFor","ngForOf"],[1,"ngb-dp-weekday","ngb-dp-showweek","small"],["role","columnheader",1,"ngb-dp-weekday","small"],["class","ngb-dp-week","role","row",4,"ngIf"],["role","row",1,"ngb-dp-week"],["class","ngb-dp-week-number small text-muted",4,"ngIf"],["class","ngb-dp-day","role","gridcell",3,"disabled","tabindex","hidden","ngb-dp-today","click",4,"ngFor","ngForOf"],[1,"ngb-dp-week-number","small","text-muted"],["role","gridcell",1,"ngb-dp-day",3,"tabindex","click"],[3,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(s,p){1&s&&(c.YNc(0,fg,3,2,"div",0),c.YNc(1,_g,1,1,"ng-template",1)),2&s&&(c.Q6J("ngIf",p.viewModel.weekdays.length>0),c.xp6(1),c.Q6J("ngForOf",p.viewModel.weeks))},dependencies:[Je.O5,Je.ax,Je.tP],styles:['ngb-datepicker-month{display:block}.ngb-dp-weekday,.ngb-dp-week-number{line-height:2rem;text-align:center;font-style:italic}.ngb-dp-weekday{color:var(--bs-info)}.ngb-dp-week{border-radius:.25rem;display:flex}.ngb-dp-weekdays{border-bottom:1px solid var(--bs-border-color);border-radius:0;background-color:var(--bs-light)}.ngb-dp-day,.ngb-dp-weekday,.ngb-dp-week-number{width:2rem;height:2rem}.ngb-dp-day{cursor:pointer}.ngb-dp-day.disabled,.ngb-dp-day.hidden{cursor:default;pointer-events:none}.ngb-dp-day[tabindex="0"]{z-index:1}\n'],encapsulation:2}),l})(),Gd=(()=>{class l{constructor(s,p,M,F,Q,le,de,ye){this._service=s,this._calendar=p,this.i18n=M,this._elementRef=le,this._ngbDateAdapter=de,this._ngZone=ye,this._controlValue=null,this._destroyed$=new Se.x,this._publicState={},this.navigate=new c.vpe,this.dateSelect=new c.vpe,this.onChange=we=>{},this.onTouched=()=>{},["dayTemplate","dayTemplateData","displayMonths","firstDayOfWeek","footerTemplate","markDisabled","minDate","maxDate","navigation","outsideDays","showWeekNumbers","startDate","weekdays"].forEach(we=>this[we]=F[we]),s.dateSelect$.pipe((0,cn.R)(this._destroyed$)).subscribe(we=>{this.dateSelect.emit(we)}),s.model$.pipe((0,cn.R)(this._destroyed$)).subscribe(we=>{const wt=we.firstDate,_t=this.model?this.model.firstDate:null;this._publicState={maxDate:we.maxDate,minDate:we.minDate,firstDate:we.firstDate,lastDate:we.lastDate,focusedDate:we.focusDate,months:we.months.map(Cn=>Cn.firstDate)};let St=!1;if(!wt.equals(_t)&&(this.navigate.emit({current:_t?{year:_t.year,month:_t.month}:null,next:{year:wt.year,month:wt.month},preventDefault:()=>St=!0}),St&&null!==_t))return void this._service.open(_t);const vn=we.selectedDate,Ct=we.focusDate,tn=this.model?this.model.focusDate:null;this.model=we,ac(vn,this._controlValue)&&(this._controlValue=vn,this.onTouched(),this.onChange(this._ngbDateAdapter.toModel(vn))),ac(Ct,tn)&&tn&&we.focusVisible&&this.focus(),Q.markForCheck()})}get state(){return this._publicState}get calendar(){return this._calendar}focusDate(s){this._service.focus(wr.from(s))}focusSelect(){this._service.focusSelect()}focus(){this._ngZone.onStable.asObservable().pipe((0,Qn.q)(1)).subscribe(()=>{const s=this._elementRef.nativeElement.querySelector('div.ngb-dp-day[tabindex="0"]');s&&s.focus()})}navigateTo(s){this._service.open(wr.from(s?s.day?s:{...s,day:1}:null))}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{const s=rt(this._contentEl.nativeElement,"focusin"),p=rt(this._contentEl.nativeElement,"focusout"),{nativeElement:M}=this._elementRef;(0,ii.T)(s,p).pipe((0,cr.h)(({target:F,relatedTarget:Q})=>!(Hh(F,"ngb-dp-day")&&Hh(Q,"ngb-dp-day")&&M.contains(F)&&M.contains(Q))),(0,cn.R)(this._destroyed$)).subscribe(({type:F})=>this._ngZone.run(()=>this._service.set({focusVisible:"focusin"===F})))})}ngOnDestroy(){this._destroyed$.next()}ngOnInit(){if(void 0===this.model){const s={};["dayTemplateData","displayMonths","markDisabled","firstDayOfWeek","navigation","minDate","maxDate","outsideDays","weekdays"].forEach(p=>s[p]=this[p]),this._service.set(s),this.navigateTo(this.startDate)}this.dayTemplate||(this.dayTemplate=this._defaultDayTemplate)}ngOnChanges(s){const p={};if(["dayTemplateData","displayMonths","markDisabled","firstDayOfWeek","navigation","minDate","maxDate","outsideDays","weekdays"].filter(M=>M in s).forEach(M=>p[M]=this[M]),this._service.set(p),"startDate"in s){const{currentValue:M,previousValue:F}=s.startDate;Yp(F,M)&&this.navigateTo(this.startDate)}}onDateSelect(s){this._service.focus(s),this._service.select(s,{emitEvent:!0})}onNavigateDateSelect(s){this._service.open(s)}onNavigateEvent(s){switch(s){case uc.PREV:this._service.open(this._calendar.getPrev(this.model.firstDate,"m",1));break;case uc.NEXT:this._service.open(this._calendar.getNext(this.model.firstDate,"m",1))}}registerOnChange(s){this.onChange=s}registerOnTouched(s){this.onTouched=s}setDisabledState(s){this._service.set({disabled:s})}writeValue(s){this._controlValue=wr.from(this._ngbDateAdapter.fromModel(s)),this._service.select(this._controlValue)}}return l.\u0275fac=function(s){return new(s||l)(c.Y36(Nu),c.Y36(Ou),c.Y36(Ha),c.Y36(ef),c.Y36(c.sBO),c.Y36(c.SBq),c.Y36(Qc),c.Y36(c.R0b))},l.\u0275cmp=c.Xpm({type:l,selectors:[["ngb-datepicker"]],contentQueries:function(s,p,M){if(1&s&&c.Suo(M,nf,7),2&s){let F;c.iGM(F=c.CRH())&&(p.contentTemplate=F.first)}},viewQuery:function(s,p){if(1&s&&(c.Gf(vg,7),c.Gf(bp,7)),2&s){let M;c.iGM(M=c.CRH())&&(p._defaultDayTemplate=M.first),c.iGM(M=c.CRH())&&(p._contentEl=M.first)}},hostVars:2,hostBindings:function(s,p){2&s&&c.ekj("disabled",p.model.disabled)},inputs:{dayTemplate:"dayTemplate",dayTemplateData:"dayTemplateData",displayMonths:"displayMonths",firstDayOfWeek:"firstDayOfWeek",footerTemplate:"footerTemplate",markDisabled:"markDisabled",maxDate:"maxDate",minDate:"minDate",navigation:"navigation",outsideDays:"outsideDays",showWeekNumbers:"showWeekNumbers",startDate:"startDate",weekdays:"weekdays"},outputs:{navigate:"navigate",dateSelect:"dateSelect"},exportAs:["ngbDatepicker"],standalone:!0,features:[c._Bn([{provide:Rn,useExisting:(0,c.Gpc)(()=>l),multi:!0},Nu]),c.TTD,c.jDz],decls:10,vars:5,consts:[["defaultDayTemplate",""],["defaultContentTemplate",""],[1,"ngb-dp-header"],[3,"date","months","disabled","showSelect","prevDisabled","nextDisabled","selectBoxes","navigate","select",4,"ngIf"],[1,"ngb-dp-content"],["content",""],[3,"ngTemplateOutlet"],["ngbDatepickerDayView","",3,"date","currentMonth","selected","disabled","focused"],["class","ngb-dp-month",4,"ngFor","ngForOf"],[1,"ngb-dp-month"],["class","ngb-dp-month-name",4,"ngIf"],[3,"month"],[1,"ngb-dp-month-name"],[3,"date","months","disabled","showSelect","prevDisabled","nextDisabled","selectBoxes","navigate","select"]],template:function(s,p){if(1&s&&(c.YNc(0,yg,1,5,"ng-template",null,0,c.W1O),c.YNc(2,Eh,1,1,"ng-template",null,1,c.W1O),c.TgZ(4,"div",2),c.YNc(5,Tp,1,7,"ngb-datepicker-navigation",3),c.qZA(),c.TgZ(6,"div",4,5),c.YNc(8,Ah,0,0,"ng-template",6),c.qZA(),c.YNc(9,us,0,0,"ng-template",6)),2&s){const M=c.MAs(3);c.xp6(5),c.Q6J("ngIf","none"!==p.navigation),c.xp6(1),c.ekj("ngb-dp-months",!p.contentTemplate),c.xp6(2),c.Q6J("ngTemplateOutlet",(null==p.contentTemplate?null:p.contentTemplate.templateRef)||M),c.xp6(1),c.Q6J("ngTemplateOutlet",p.footerTemplate)}},dependencies:[Je.O5,Je.ax,Je.tP,Kp,Fu,Qg],styles:["ngb-datepicker{border:1px solid var(--bs-border-color);border-radius:.25rem;display:inline-block}ngb-datepicker-month{pointer-events:auto}ngb-datepicker.dropdown-menu{padding:0}ngb-datepicker.disabled .ngb-dp-weekday,ngb-datepicker.disabled .ngb-dp-week-number,ngb-datepicker.disabled .ngb-dp-month-name{color:var(--bs-text-muted)}.ngb-dp-body{z-index:1055}.ngb-dp-header{border-bottom:0;border-radius:.25rem .25rem 0 0;padding-top:.25rem;background-color:var(--bs-light)}.ngb-dp-months{display:flex}.ngb-dp-month{pointer-events:none}.ngb-dp-month-name{font-size:larger;height:2rem;line-height:2rem;text-align:center;background-color:var(--bs-light)}.ngb-dp-month+.ngb-dp-month .ngb-dp-month-name,.ngb-dp-month+.ngb-dp-month .ngb-dp-week{padding-left:1rem}.ngb-dp-month:last-child .ngb-dp-week{padding-right:.25rem}.ngb-dp-month:first-child .ngb-dp-week{padding-left:.25rem}.ngb-dp-month .ngb-dp-week:last-child{padding-bottom:.25rem}\n"],encapsulation:2,changeDetection:0}),l})();typeof navigator<"u"&&navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));const Qp=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function Ud(l){const f=Array.from(l.querySelectorAll(Qp)).filter(s=>-1!==s.tabIndex);return[f[0],f[f.length-1]]}new Date(1882,10,12),new Date(2174,10,25);let zu=(()=>{class l{}return l.\u0275fac=function(s){return new(s||l)},l.\u0275mod=c.oAB({type:l}),l.\u0275inj=c.cJS({imports:[Gd,Fu]}),l})(),Rl=(()=>{class l{}return l.\u0275fac=function(s){return new(s||l)},l.\u0275mod=c.oAB({type:l}),l.\u0275inj=c.cJS({}),l})();class Mo{constructor(f,s,p){this.nodes=f,this.viewRef=s,this.componentRef=p}}let vf=(()=>{class l{constructor(s,p){this._el=s,this._zone=p}ngOnInit(){this._zone.onStable.asObservable().pipe((0,Qn.q)(1)).subscribe(()=>{Ur(this._zone,this._el.nativeElement,(s,p)=>{p&&Jc(s),s.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return Ur(this._zone,this._el.nativeElement,({classList:s})=>s.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return l.\u0275fac=function(s){return new(s||l)(c.Y36(c.SBq),c.Y36(c.R0b))},l.\u0275cmp=c.Xpm({type:l,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(s,p){2&s&&(c.Tol("modal-backdrop"+(p.backdropClass?" "+p.backdropClass:"")),c.ekj("show",!p.animation)("fade",p.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},standalone:!0,features:[c.jDz],decls:0,vars:0,template:function(s,p){},encapsulation:2}),l})();class _c{close(f){}dismiss(f){}}class Yd{constructor(f,s,p,M){this._windowCmptRef=f,this._contentRef=s,this._backdropCmptRef=p,this._beforeDismiss=M,this._closed=new Se.x,this._dismissed=new Se.x,this._hidden=new Se.x,f.instance.dismissEvent.subscribe(F=>{this.dismiss(F)}),this.result=new Promise((F,Q)=>{this._resolve=F,this._reject=Q}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe((0,cn.R)(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe((0,cn.R)(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(f){this._windowCmptRef&&(this._closed.next(f),this._resolve(f),this._removeModalElements())}_dismiss(f){this._dismissed.next(f),this._reject(f),this._removeModalElements()}dismiss(f){if(this._windowCmptRef)if(this._beforeDismiss){const s=this._beforeDismiss();!function Gg(l){return l&&l.then}(s)?!1!==s&&this._dismiss(f):s.then(p=>{!1!==p&&this._dismiss(f)},()=>{})}else this._dismiss(f)}_removeModalElements(){const f=this._windowCmptRef.instance.hide(),s=this._backdropCmptRef?this._backdropCmptRef.instance.hide():(0,Oe.of)(void 0);f.subscribe(()=>{const{nativeElement:p}=this._windowCmptRef.location;p.parentNode.removeChild(p),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),s.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:p}=this._backdropCmptRef.location;p.parentNode.removeChild(p),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),zt(f,s).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var ba=(()=>{return(l=ba||(ba={}))[l.BACKDROP_CLICK=0]="BACKDROP_CLICK",l[l.ESC=1]="ESC",ba;var l})();let hm=(()=>{class l{constructor(s,p,M){this._document=s,this._elRef=p,this._zone=M,this._closed$=new Se.x,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new c.vpe,this.shown=new Se.x,this.hidden=new Se.x}get fullscreenClass(){return!0===this.fullscreen?" modal-fullscreen":Tl(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(s){this.dismissEvent.emit(s)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe((0,Qn.q)(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:s}=this._elRef,p={animation:this.animation,runningTransition:"stop"},Q=zt(Ur(this._zone,s,()=>s.classList.remove("show"),p),Ur(this._zone,this._dialogEl.nativeElement,()=>{},p));return Q.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),Q}_show(){const s={animation:this.animation,runningTransition:"continue"};zt(Ur(this._zone,this._elRef.nativeElement,(F,Q)=>{Q&&Jc(F),F.classList.add("show")},s),Ur(this._zone,this._dialogEl.nativeElement,()=>{},s)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:s}=this._elRef;this._zone.runOutsideAngular(()=>{rt(s,"keydown").pipe((0,cn.R)(this._closed$),(0,cr.h)(M=>M.which===$n.Escape)).subscribe(M=>{this.keyboard?requestAnimationFrame(()=>{M.defaultPrevented||this._zone.run(()=>this.dismiss(ba.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let p=!1;rt(this._dialogEl.nativeElement,"mousedown").pipe((0,cn.R)(this._closed$),(0,Ui.b)(()=>p=!1),(0,Ro.w)(()=>rt(s,"mouseup").pipe((0,cn.R)(this._closed$),(0,Qn.q)(1))),(0,cr.h)(({target:M})=>s===M)).subscribe(()=>{p=!0}),rt(s,"click").pipe((0,cn.R)(this._closed$)).subscribe(({target:M})=>{s===M&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!p&&this._zone.run(()=>this.dismiss(ba.BACKDROP_CLICK))),p=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:s}=this._elRef;if(!s.contains(document.activeElement)){const p=s.querySelector("[ngbAutofocus]"),M=Ud(s)[0];(p||M||s).focus()}}_restoreFocus(){const s=this._document.body,p=this._elWithFocus;let M;M=p&&p.focus&&s.contains(p)?p:s,this._zone.runOutsideAngular(()=>{setTimeout(()=>M.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&Ur(this._zone,this._elRef.nativeElement,({classList:s})=>(s.add("modal-static"),()=>s.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return l.\u0275fac=function(s){return new(s||l)(c.Y36(Je.K0),c.Y36(c.SBq),c.Y36(c.R0b))},l.\u0275cmp=c.Xpm({type:l,selectors:[["ngb-modal-window"]],viewQuery:function(s,p){if(1&s&&c.Gf(Cu,7),2&s){let M;c.iGM(M=c.CRH())&&(p._dialogEl=M.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(s,p){2&s&&(c.uIk("aria-modal",!0)("aria-labelledby",p.ariaLabelledBy)("aria-describedby",p.ariaDescribedBy),c.Tol("modal d-block"+(p.windowClass?" "+p.windowClass:"")),c.ekj("fade",p.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},standalone:!0,features:[c.jDz],ngContentSelectors:Rd,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(s,p){1&s&&(c.F$t(),c.TgZ(0,"div",0,1)(2,"div",2),c.Hsn(3),c.qZA()()),2&s&&c.Tol("modal-dialog"+(p.size?" modal-"+p.size:"")+(p.centered?" modal-dialog-centered":"")+p.fullscreenClass+(p.scrollable?" modal-dialog-scrollable":"")+(p.modalDialogClass?" "+p.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}\n"],encapsulation:2}),l})(),fm=(()=>{class l{constructor(s){this._document=s}hide(){const s=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),p=this._document.body,M=p.style,{overflow:F,paddingRight:Q}=M;if(s>0){const le=parseFloat(window.getComputedStyle(p).paddingRight);M.paddingRight=`${le+s}px`}return M.overflow="hidden",()=>{s>0&&(M.paddingRight=Q),M.overflow=F}}}return l.\u0275fac=function(s){return new(s||l)(c.LFG(Je.K0))},l.\u0275prov=c.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})(),vc=(()=>{class l{constructor(s,p,M,F,Q,le,de){this._applicationRef=s,this._injector=p,this._environmentInjector=M,this._document=F,this._scrollBar=Q,this._rendererFactory=le,this._ngZone=de,this._activeWindowCmptHasChanged=new Se.x,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._backdropAttributes=["animation","backdropClass"],this._modalRefs=[],this._windowAttributes=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","scrollable","size","windowClass","modalDialogClass"],this._windowCmpts=[],this._activeInstances=new c.vpe,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const ye=this._windowCmpts[this._windowCmpts.length-1];((l,f,s,p=!1)=>{l.runOutsideAngular(()=>{const M=rt(f,"focusin").pipe((0,cn.R)(s),(0,Ar.U)(F=>F.target));rt(f,"keydown").pipe((0,cn.R)(s),(0,cr.h)(F=>F.which===$n.Tab),ns(M)).subscribe(([F,Q])=>{const[le,de]=Ud(f);(Q===le||Q===f)&&F.shiftKey&&(de.focus(),F.preventDefault()),Q===de&&!F.shiftKey&&(le.focus(),F.preventDefault())}),p&&rt(f,"click").pipe((0,cn.R)(s),ns(M),(0,Ar.U)(F=>F[1])).subscribe(F=>F.focus())})})(this._ngZone,ye.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(ye.location.nativeElement)}})}_restoreScrollBar(){const s=this._scrollBarRestoreFn;s&&(this._scrollBarRestoreFn=null,s())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(s,p,M){const F=M.container instanceof HTMLElement?M.container:qc(M.container)?this._document.querySelector(M.container):this._document.body,Q=this._rendererFactory.createRenderer(null,null);if(!F)throw new Error(`The specified modal container "${M.container||"body"}" was not found in the DOM.`);this._hideScrollBar();const le=new _c,de=(s=M.injector||s).get(c.lqb,null)||this._environmentInjector,ye=this._getContentRef(s,de,p,le,M);let we=!1!==M.backdrop?this._attachBackdrop(F):void 0,wt=this._attachWindowComponent(F,ye.nodes),_t=new Yd(wt,ye,we,M.beforeDismiss);return this._registerModalRef(_t),this._registerWindowCmpt(wt),_t.hidden.pipe((0,Qn.q)(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(Q.removeClass(this._document.body,"modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),le.close=St=>{_t.close(St)},le.dismiss=St=>{_t.dismiss(St)},this._applyWindowOptions(wt.instance,M),1===this._modalRefs.length&&Q.addClass(this._document.body,"modal-open"),we&&we.instance&&(this._applyBackdropOptions(we.instance,M),we.changeDetectorRef.detectChanges()),wt.changeDetectorRef.detectChanges(),_t}get activeInstances(){return this._activeInstances}dismissAll(s){this._modalRefs.forEach(p=>p.dismiss(s))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(s){let p=(0,c.LMc)(vf,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(p.hostView),s.appendChild(p.location.nativeElement),p}_attachWindowComponent(s,p){let M=(0,c.LMc)(hm,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:p});return this._applicationRef.attachView(M.hostView),s.appendChild(M.location.nativeElement),M}_applyWindowOptions(s,p){this._windowAttributes.forEach(M=>{qc(p[M])&&(s[M]=p[M])})}_applyBackdropOptions(s,p){this._backdropAttributes.forEach(M=>{qc(p[M])&&(s[M]=p[M])})}_getContentRef(s,p,M,F,Q){return M?M instanceof c.Rgc?this._createFromTemplateRef(M,F):Tl(M)?this._createFromString(M):this._createFromComponent(s,p,M,F,Q):new Mo([])}_createFromTemplateRef(s,p){const F=s.createEmbeddedView({$implicit:p,close(Q){p.close(Q)},dismiss(Q){p.dismiss(Q)}});return this._applicationRef.attachView(F),new Mo([F.rootNodes],F)}_createFromString(s){const p=this._document.createTextNode(`${s}`);return new Mo([[p]])}_createFromComponent(s,p,M,F,Q){const le=c.zs3.create({providers:[{provide:_c,useValue:F}],parent:s}),de=(0,c.LMc)(M,{environmentInjector:p,elementInjector:le}),ye=de.location.nativeElement;return Q.scrollable&&ye.classList.add("component-host-scrollable"),this._applicationRef.attachView(de.hostView),new Mo([[ye]],de.hostView,de)}_setAriaHidden(s){const p=s.parentElement;p&&s!==this._document.body&&(Array.from(p.children).forEach(M=>{M!==s&&"SCRIPT"!==M.nodeName&&(this._ariaHiddenValues.set(M,M.getAttribute("aria-hidden")),M.setAttribute("aria-hidden","true"))}),this._setAriaHidden(p))}_revertAriaHidden(){this._ariaHiddenValues.forEach((s,p)=>{s?p.setAttribute("aria-hidden",s):p.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(s){const p=()=>{const M=this._modalRefs.indexOf(s);M>-1&&(this._modalRefs.splice(M,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(s),this._activeInstances.emit(this._modalRefs),s.result.then(p,p)}_registerWindowCmpt(s){this._windowCmpts.push(s),this._activeWindowCmptHasChanged.next(),s.onDestroy(()=>{const p=this._windowCmpts.indexOf(s);p>-1&&(this._windowCmpts.splice(p,1),this._activeWindowCmptHasChanged.next())})}}return l.\u0275fac=function(s){return new(s||l)(c.LFG(c.z2F),c.LFG(c.zs3),c.LFG(c.lqb),c.LFG(Je.K0),c.LFG(fm),c.LFG(c.FYo),c.LFG(c.R0b))},l.\u0275prov=c.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})(),pm=(()=>{class l{constructor(s){this._ngbConfig=s,this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(s){this._animation=s}}return l.\u0275fac=function(s){return new(s||l)(c.LFG(no))},l.\u0275prov=c.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})(),qd=(()=>{class l{constructor(s,p,M){this._injector=s,this._modalStack=p,this._config=M}open(s,p={}){const M={...this._config,animation:this._config.animation,...p};return this._modalStack.open(this._injector,s,M)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(s){this._modalStack.dismissAll(s)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return l.\u0275fac=function(s){return new(s||l)(c.LFG(c.zs3),c.LFG(vc),c.LFG(pm))},l.\u0275prov=c.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})(),ou=(()=>{class l{}return l.\u0275fac=function(s){return new(s||l)},l.\u0275mod=c.oAB({type:l}),l.\u0275inj=c.cJS({providers:[qd]}),l})();const Zd=({classList:l})=>(l.remove("show"),()=>l.remove("active")),bf=(l,f)=>{f&&Jc(l),l.classList.add("show")};let au=(()=>{class l{constructor(s){this.elRef=s}}return l.\u0275fac=function(s){return new(s||l)(c.Y36(c.SBq))},l.\u0275dir=c.lG2({type:l,selectors:[["","ngbNavPane",""]],hostAttrs:[1,"tab-pane"],hostVars:5,hostBindings:function(s,p){2&s&&(c.Ikx("id",p.item.panelDomId),c.uIk("role",p.role?p.role:p.nav.roles?"tabpanel":void 0)("aria-labelledby",p.item.domId),c.ekj("fade",p.nav.animation))},inputs:{item:"item",nav:"nav",role:"role"},standalone:!0}),l})(),Cl=(()=>{class l{constructor(s,p){this._cd=s,this._ngZone=p,this._activePane=null}isPanelTransitioning(s){return this._activePane?.item===s}ngAfterViewInit(){this._updateActivePane(),this.nav.navItemChange$.pipe((0,cn.R)(this.nav.destroy$),(0,io.O)(this._activePane?.item||null),yi(),function jt(l){return(0,cr.h)((f,s)=>l<=s)}(1)).subscribe(s=>{const p={animation:this.nav.animation,runningTransition:"stop"};this._cd.detectChanges(),this._activePane?Ur(this._ngZone,this._activePane.elRef.nativeElement,Zd,p).subscribe(()=>{const M=this._activePane?.item;this._activePane=this._getPaneForItem(s),this._cd.markForCheck(),this._activePane&&(this._activePane.elRef.nativeElement.classList.add("active"),Ur(this._ngZone,this._activePane.elRef.nativeElement,bf,p).subscribe(()=>{s&&(s.shown.emit(),this.nav.shown.emit(s.id))})),M&&(M.hidden.emit(),this.nav.hidden.emit(M.id))}):this._updateActivePane()})}_updateActivePane(){this._activePane=this._getActivePane(),this._activePane?.elRef.nativeElement.classList.add("show"),this._activePane?.elRef.nativeElement.classList.add("active")}_getPaneForItem(s){return this._panes&&this._panes.find(p=>p.item===s)||null}_getActivePane(){return this._panes&&this._panes.find(s=>s.item.active)||null}}return l.\u0275fac=function(s){return new(s||l)(c.Y36(c.sBO),c.Y36(c.R0b))},l.\u0275cmp=c.Xpm({type:l,selectors:[["","ngbNavOutlet",""]],viewQuery:function(s,p){if(1&s&&c.Gf(au,5),2&s){let M;c.iGM(M=c.CRH())&&(p._panes=M)}},hostVars:2,hostBindings:function(s,p){2&s&&c.ekj("tab-content",!0)},inputs:{paneRole:"paneRole",nav:["ngbNavOutlet","nav"]},standalone:!0,features:[c.jDz],attrs:Mp,decls:1,vars:1,consts:[["ngFor","",3,"ngForOf"],["ngbNavPane","",3,"item","nav","role",4,"ngIf"],["ngbNavPane","",3,"item","nav","role"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(s,p){1&s&&c.YNc(0,Mg,1,1,"ng-template",0),2&s&&c.Q6J("ngForOf",p.nav.items)},dependencies:[au,Je.ax,Je.O5,Je.tP],encapsulation:2,changeDetection:0}),l})(),Tf=(()=>{class l{}return l.\u0275fac=function(s){return new(s||l)},l.\u0275mod=c.oAB({type:l}),l.\u0275inj=c.cJS({imports:[Cl]}),l})(),Zu=(()=>{class l{constructor(){this.disabled=!1,this.boundaryLinks=!1,this.directionLinks=!0,this.ellipses=!0,this.maxSize=0,this.pageSize=10,this.rotate=!1}}return l.\u0275fac=function(s){return new(s||l)},l.\u0275prov=c.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})(),_m=(()=>{class l{constructor(s){this.templateRef=s}}return l.\u0275fac=function(s){return new(s||l)(c.Y36(c.Rgc))},l.\u0275dir=c.lG2({type:l,selectors:[["ng-template","ngbPaginationEllipsis",""]],standalone:!0}),l})(),Tc=(()=>{class l{constructor(s){this.templateRef=s}}return l.\u0275fac=function(s){return new(s||l)(c.Y36(c.Rgc))},l.\u0275dir=c.lG2({type:l,selectors:[["ng-template","ngbPaginationFirst",""]],standalone:!0}),l})(),Mf=(()=>{class l{constructor(s){this.templateRef=s}}return l.\u0275fac=function(s){return new(s||l)(c.Y36(c.Rgc))},l.\u0275dir=c.lG2({type:l,selectors:[["ng-template","ngbPaginationLast",""]],standalone:!0}),l})(),Os=(()=>{class l{constructor(s){this.templateRef=s}}return l.\u0275fac=function(s){return new(s||l)(c.Y36(c.Rgc))},l.\u0275dir=c.lG2({type:l,selectors:[["ng-template","ngbPaginationNext",""]],standalone:!0}),l})(),xf=(()=>{class l{constructor(s){this.templateRef=s}}return l.\u0275fac=function(s){return new(s||l)(c.Y36(c.Rgc))},l.\u0275dir=c.lG2({type:l,selectors:[["ng-template","ngbPaginationNumber",""]],standalone:!0}),l})(),vs=(()=>{class l{constructor(s){this.templateRef=s}}return l.\u0275fac=function(s){return new(s||l)(c.Y36(c.Rgc))},l.\u0275dir=c.lG2({type:l,selectors:[["ng-template","ngbPaginationPrevious",""]],standalone:!0}),l})(),Df=(()=>{class l{constructor(s){this.templateRef=s}}return l.\u0275fac=function(s){return new(s||l)(c.Y36(c.Rgc))},l.\u0275dir=c.lG2({type:l,selectors:[["ng-template","ngbPaginationPages",""]],standalone:!0}),l})(),Kd=(()=>{class l{constructor(s){this.pageCount=0,this.pages=[],this.page=1,this.pageChange=new c.vpe(!0),this.disabled=s.disabled,this.boundaryLinks=s.boundaryLinks,this.directionLinks=s.directionLinks,this.ellipses=s.ellipses,this.maxSize=s.maxSize,this.pageSize=s.pageSize,this.rotate=s.rotate,this.size=s.size}hasPrevious(){return this.page>1}hasNext(){return this.page<this.pageCount}nextDisabled(){return!this.hasNext()||this.disabled}previousDisabled(){return!this.hasPrevious()||this.disabled}selectPage(s){this._updatePages(s)}ngOnChanges(s){this._updatePages(this.page)}isEllipsis(s){return-1===s}_applyEllipses(s,p){this.ellipses&&(s>0&&(s>2?this.pages.unshift(-1):2===s&&this.pages.unshift(2),this.pages.unshift(1)),p<this.pageCount&&(p<this.pageCount-2?this.pages.push(-1):p===this.pageCount-2&&this.pages.push(this.pageCount-1),this.pages.push(this.pageCount)))}_applyRotation(){let s=0,p=this.pageCount,M=Math.floor(this.maxSize/2);return this.page<=M?p=this.maxSize:this.pageCount-this.page<M?s=this.pageCount-this.maxSize:(s=this.page-M-1,p=this.page+(this.maxSize%2==0?M-1:M)),[s,p]}_applyPagination(){let p=(Math.ceil(this.page/this.maxSize)-1)*this.maxSize;return[p,p+this.maxSize]}_setPageInRange(s){const p=this.page;this.page=Pd(s,this.pageCount,1),this.page!==p&&ar(this.collectionSize)&&this.pageChange.emit(this.page)}_updatePages(s){this.pageCount=Math.ceil(this.collectionSize/this.pageSize),ar(this.pageCount)||(this.pageCount=0),this.pages.length=0;for(let p=1;p<=this.pageCount;p++)this.pages.push(p);if(this._setPageInRange(s),this.maxSize>0&&this.pageCount>this.maxSize){let p=0,M=this.pageCount;[p,M]=this.rotate?this._applyRotation():this._applyPagination(),this.pages=this.pages.slice(p,M),this._applyEllipses(p,M)}}}return l.\u0275fac=function(s){return new(s||l)(c.Y36(Zu))},l.\u0275cmp=c.Xpm({type:l,selectors:[["ngb-pagination"]],contentQueries:function(s,p,M){if(1&s&&(c.Suo(M,_m,5),c.Suo(M,Tc,5),c.Suo(M,Mf,5),c.Suo(M,Os,5),c.Suo(M,xf,5),c.Suo(M,vs,5),c.Suo(M,Df,5)),2&s){let F;c.iGM(F=c.CRH())&&(p.tplEllipsis=F.first),c.iGM(F=c.CRH())&&(p.tplFirst=F.first),c.iGM(F=c.CRH())&&(p.tplLast=F.first),c.iGM(F=c.CRH())&&(p.tplNext=F.first),c.iGM(F=c.CRH())&&(p.tplNumber=F.first),c.iGM(F=c.CRH())&&(p.tplPrevious=F.first),c.iGM(F=c.CRH())&&(p.tplPages=F.first)}},hostAttrs:["role","navigation"],inputs:{disabled:"disabled",boundaryLinks:"boundaryLinks",directionLinks:"directionLinks",ellipses:"ellipses",rotate:"rotate",collectionSize:"collectionSize",maxSize:"maxSize",page:"page",pageSize:"pageSize",size:"size"},outputs:{pageChange:"pageChange"},standalone:!0,features:[c.TTD,c.jDz],decls:20,vars:12,consts:function(){let f,s,p,M,F,Q,le,de;return f=$localize`:@@ngb.pagination.first:««`,s=$localize`:@@ngb.pagination.previous:«`,p=$localize`:@@ngb.pagination.next:»`,M=$localize`:@@ngb.pagination.last:»»`,F=$localize`:@@ngb.pagination.first-aria:First`,Q=$localize`:@@ngb.pagination.previous-aria:Previous`,le=$localize`:@@ngb.pagination.next-aria:Next`,de=$localize`:@@ngb.pagination.last-aria:Last`,[["first",""],["previous",""],["next",""],["last",""],["ellipsis",""],["defaultNumber",""],["defaultPages",""],["class","page-item",3,"disabled",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["aria-hidden","true"],f,s,p,M,["class","visually-hidden",4,"ngIf"],[1,"visually-hidden"],["class","page-item",3,"active","disabled",4,"ngFor","ngForOf"],[1,"page-item"],["class","page-link","tabindex","-1","aria-disabled","true",4,"ngIf"],["class","page-link","href","",3,"click",4,"ngIf"],["tabindex","-1","aria-disabled","true",1,"page-link"],["href","",1,"page-link",3,"click"],["aria-label",F,"href","",1,"page-link",3,"click"],["aria-label",Q,"href","",1,"page-link",3,"click"],["aria-label",le,"href","",1,"page-link",3,"click"],["aria-label",de,"href","",1,"page-link",3,"click"]]},template:function(s,p){if(1&s&&(c.YNc(0,wp,2,0,"ng-template",null,0,c.W1O),c.YNc(2,xg,2,0,"ng-template",null,1,c.W1O),c.YNc(4,Rp,2,0,"ng-template",null,2,c.W1O),c.YNc(6,Dg,2,0,"ng-template",null,3,c.W1O),c.YNc(8,wg,1,0,"ng-template",null,4,c.W1O),c.YNc(10,Ph,2,2,"ng-template",null,5,c.W1O),c.YNc(12,Yc,1,1,"ng-template",null,6,c.W1O),c.TgZ(14,"ul"),c.YNc(15,Eg,3,9,"li",7),c.YNc(16,Ig,3,8,"li",7),c.YNc(17,Pg,0,0,"ng-template",8),c.YNc(18,Ng,3,9,"li",7),c.YNc(19,Cp,3,9,"li",7),c.qZA()),2&s){const M=c.MAs(13);c.xp6(14),c.Tol("pagination"+(p.size?" pagination-"+p.size:"")),c.xp6(1),c.Q6J("ngIf",p.boundaryLinks),c.xp6(1),c.Q6J("ngIf",p.directionLinks),c.xp6(1),c.Q6J("ngTemplateOutlet",(null==p.tplPages?null:p.tplPages.templateRef)||M)("ngTemplateOutletContext",c.kEZ(8,Bh,p.page,p.pages,p.disabled)),c.xp6(1),c.Q6J("ngIf",p.directionLinks),c.xp6(1),c.Q6J("ngIf",p.boundaryLinks)}},dependencies:[Je.O5,Je.ax,Je.tP],encapsulation:2,changeDetection:0}),l})(),Mc=(()=>{class l{}return l.\u0275fac=function(s){return new(s||l)},l.\u0275mod=c.oAB({type:l}),l.\u0275inj=c.cJS({imports:[Kd]}),l})(),w_=(()=>{class l{}return l.\u0275fac=function(s){return new(s||l)},l.\u0275mod=c.oAB({type:l}),l.\u0275inj=c.cJS({}),l})(),$v=(()=>{class l{constructor(){this.max=100,this.animated=!1,this.ariaLabel="progress bar",this.striped=!1,this.showValue=!1}}return l.\u0275fac=function(s){return new(s||l)},l.\u0275prov=c.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})(),Ta=(()=>{class l{constructor(s){this.value=0,this.max=s.max,this.animated=s.animated,this.ariaLabel=s.ariaLabel,this.striped=s.striped,this.textType=s.textType,this.type=s.type,this.showValue=s.showValue,this.height=s.height}set max(s){this._max=!ar(s)||s<=0?100:s}get max(){return this._max}getValue(){return Pd(this.value,this.max)}getPercentValue(){return 100*this.getValue()/this.max}}return l.\u0275fac=function(s){return new(s||l)(c.Y36($v))},l.\u0275cmp=c.Xpm({type:l,selectors:[["ngb-progressbar"]],hostAttrs:["role","progressbar","aria-valuemin","0",1,"progress"],hostVars:5,hostBindings:function(s,p){2&s&&(c.uIk("aria-valuenow",p.getValue())("aria-valuemax",p.max)("aria-label",p.ariaLabel),c.Udp("height",p.height))},inputs:{max:"max",animated:"animated",ariaLabel:"ariaLabel",striped:"striped",showValue:"showValue",textType:"textType",type:"type",value:"value",height:"height"},standalone:!0,features:[c.jDz],ngContentSelectors:Rd,decls:3,vars:11,consts:function(){let f;return f=$localize`:@@ngb.progressbar.value:${"\ufffd0\ufffd"}:INTERPOLATION:`,[[4,"ngIf"],f]},template:function(s,p){1&s&&(c.F$t(),c.TgZ(0,"div"),c.YNc(1,Lg,3,3,"span",0),c.Hsn(2),c.qZA()),2&s&&(c.MT6("progress-bar",p.type?p.textType?" bg-"+p.type:" text-bg-"+p.type:"","",p.textType?" text-"+p.textType:"",""),c.Udp("width",p.getPercentValue(),"%"),c.ekj("progress-bar-animated",p.animated)("progress-bar-striped",p.striped),c.xp6(1),c.Q6J("ngIf",p.showValue))},dependencies:[Je.O5,Je.Zx],encapsulation:2,changeDetection:0}),l})(),Sf=(()=>{class l{}return l.\u0275fac=function(s){return new(s||l)},l.\u0275mod=c.oAB({type:l}),l.\u0275inj=c.cJS({imports:[Ta]}),l})(),Yv=(()=>{class l{constructor(){this.max=10,this.readonly=!1,this.resettable=!1,this.tabindex=0}}return l.\u0275fac=function(s){return new(s||l)},l.\u0275prov=c.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})(),Ma=(()=>{class l{constructor(s,p){this._changeDetectorRef=p,this.contexts=[],this.disabled=!1,this.hover=new c.vpe,this.leave=new c.vpe,this.rateChange=new c.vpe(!0),this.onChange=M=>{},this.onTouched=()=>{},this.max=s.max,this.readonly=s.readonly,this.tabindex=s.tabindex}ariaValueText(s,p){return`${s} out of ${p}`}isInteractive(){return!this.readonly&&!this.disabled}enter(s){this.isInteractive()&&this._updateState(s),this.hover.emit(s)}handleBlur(){this.onTouched()}handleClick(s){this.isInteractive()&&this.update(this.resettable&&this.rate===s?0:s)}handleKeyDown(s){switch(s.which){case $n.ArrowDown:case $n.ArrowLeft:this.update(this.rate-1);break;case $n.ArrowUp:case $n.ArrowRight:this.update(this.rate+1);break;case $n.Home:this.update(0);break;case $n.End:this.update(this.max);break;default:return}s.preventDefault()}ngOnChanges(s){s.rate&&this.update(this.rate),s.max&&this._updateMax()}ngOnInit(){this._setupContexts(),this._updateState(this.rate)}registerOnChange(s){this.onChange=s}registerOnTouched(s){this.onTouched=s}reset(){this.leave.emit(this.nextRate),this._updateState(this.rate)}setDisabledState(s){this.disabled=s}update(s,p=!0){const M=Pd(s,this.max,0);this.isInteractive()&&this.rate!==M&&(this.rate=M,this.rateChange.emit(this.rate)),p&&(this.onChange(this.rate),this.onTouched()),this._updateState(this.rate)}writeValue(s){this.update(s,!1),this._changeDetectorRef.markForCheck()}_updateState(s){this.nextRate=s,this.contexts.forEach((p,M)=>p.fill=Math.round(100*Pd(s-M,1,0)))}_updateMax(){this.max>0&&(this._setupContexts(),this.update(this.rate))}_setupContexts(){this.contexts=Array.from({length:this.max},(s,p)=>({fill:0,index:p}))}}return l.\u0275fac=function(s){return new(s||l)(c.Y36(Yv),c.Y36(c.sBO))},l.\u0275cmp=c.Xpm({type:l,selectors:[["ngb-rating"]],contentQueries:function(s,p,M){if(1&s&&c.Suo(M,c.Rgc,5),2&s){let F;c.iGM(F=c.CRH())&&(p.starTemplateFromContent=F.first)}},hostAttrs:["role","slider","aria-valuemin","0",1,"d-inline-flex"],hostVars:5,hostBindings:function(s,p){1&s&&c.NdJ("blur",function(){return p.handleBlur()})("keydown",function(F){return p.handleKeyDown(F)})("mouseleave",function(){return p.reset()}),2&s&&(c.Ikx("tabindex",p.disabled?-1:p.tabindex),c.uIk("aria-valuemax",p.max)("aria-valuenow",p.nextRate)("aria-valuetext",p.ariaValueText(p.nextRate,p.max))("aria-disabled",!!p.readonly||null))},inputs:{max:"max",rate:"rate",readonly:"readonly",resettable:"resettable",starTemplate:"starTemplate",tabindex:"tabindex",ariaValueText:"ariaValueText"},outputs:{hover:"hover",leave:"leave",rateChange:"rateChange"},standalone:!0,features:[c._Bn([{provide:Rn,useExisting:(0,c.Gpc)(()=>l),multi:!0}]),c.TTD,c.jDz],decls:3,vars:1,consts:[["t",""],["ngFor","",3,"ngForOf"],[1,"visually-hidden"],[3,"mouseenter","click"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(s,p){1&s&&(c.YNc(0,Ap,1,1,"ng-template",null,0,c.W1O),c.YNc(2,sc,4,5,"ng-template",1)),2&s&&(c.xp6(2),c.Q6J("ngForOf",p.contexts))},dependencies:[Je.ax,Je.tP],encapsulation:2,changeDetection:0}),l})(),Xu=(()=>{class l{}return l.\u0275fac=function(s){return new(s||l)},l.\u0275mod=c.oAB({type:l}),l.\u0275inj=c.cJS({imports:[Ma]}),l})();class xm{constructor(f,s,p){this.hour=ds(f),this.minute=ds(s),this.second=ds(p)}changeHour(f=1){this.updateHour((isNaN(this.hour)?0:this.hour)+f)}updateHour(f){this.hour=ar(f)?(f<0?24+f:f)%24:NaN}changeMinute(f=1){this.updateMinute((isNaN(this.minute)?0:this.minute)+f)}updateMinute(f){ar(f)?(this.minute=f%60<0?60+f%60:f%60,this.changeHour(Math.floor(f/60))):this.minute=NaN}changeSecond(f=1){this.updateSecond((isNaN(this.second)?0:this.second)+f)}updateSecond(f){ar(f)?(this.second=f<0?60+f%60:f%60,this.changeMinute(Math.floor(f/60))):this.second=NaN}isValid(f=!0){return ar(this.hour)&&ar(this.minute)&&(!f||ar(this.second))}toString(){return`${this.hour||0}:${this.minute||0}:${this.second||0}`}}let Cf=(()=>{class l{constructor(){this.meridian=!1,this.spinners=!0,this.seconds=!1,this.hourStep=1,this.minuteStep=1,this.secondStep=1,this.disabled=!1,this.readonlyInputs=!1,this.size="medium"}}return l.\u0275fac=function(s){return new(s||l)},l.\u0275prov=c.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})(),lu=(()=>{class l{}return l.\u0275fac=function(s){return new(s||l)},l.\u0275prov=c.Yz7({token:l,factory:function(){return function Qd(){return new Ef}()},providedIn:"root"}),l})(),Ef=(()=>{class l extends lu{fromModel(s){return s&&Gi(s.hour)&&Gi(s.minute)?{hour:s.hour,minute:s.minute,second:Gi(s.second)?s.second:null}:null}toModel(s){return s&&Gi(s.hour)&&Gi(s.minute)?{hour:s.hour,minute:s.minute,second:Gi(s.second)?s.second:null}:null}}return l.\u0275fac=function(){let f;return function(p){return(f||(f=c.n5z(l)))(p||l)}}(),l.\u0275prov=c.Yz7({token:l,factory:l.\u0275fac}),l})(),Qu=(()=>{class l{}return l.\u0275fac=function(s){return new(s||l)},l.\u0275prov=c.Yz7({token:l,factory:function(s){let p=null;return p=s?new s:function Af(l){return new ed(l)}(c.LFG(c.soG)),p},providedIn:"root"}),l})(),ed=(()=>{class l extends Qu{constructor(s){super(),this._periods=(0,Je.ol)(s,Je.x.Standalone,Je.Tn.Narrow)}getMorningPeriod(){return this._periods[0]}getAfternoonPeriod(){return this._periods[1]}}return l.\u0275fac=function(s){return new(s||l)(c.LFG(c.soG))},l.\u0275prov=c.Yz7({token:l,factory:l.\u0275fac}),l})();const eh=/[^0-9]/g;let qv=(()=>{class l{constructor(s,p,M,F){this._config=s,this._ngbTimeAdapter=p,this._cd=M,this.i18n=F,this.onChange=Q=>{},this.onTouched=()=>{},this.meridian=s.meridian,this.spinners=s.spinners,this.seconds=s.seconds,this.hourStep=s.hourStep,this.minuteStep=s.minuteStep,this.secondStep=s.secondStep,this.disabled=s.disabled,this.readonlyInputs=s.readonlyInputs,this.size=s.size}set hourStep(s){this._hourStep=Gi(s)?s:this._config.hourStep}get hourStep(){return this._hourStep}set minuteStep(s){this._minuteStep=Gi(s)?s:this._config.minuteStep}get minuteStep(){return this._minuteStep}set secondStep(s){this._secondStep=Gi(s)?s:this._config.secondStep}get secondStep(){return this._secondStep}writeValue(s){const p=this._ngbTimeAdapter.fromModel(s);this.model=p?new xm(p.hour,p.minute,p.second):new xm,!this.seconds&&(!p||!ar(p.second))&&(this.model.second=0),this._cd.markForCheck()}registerOnChange(s){this.onChange=s}registerOnTouched(s){this.onTouched=s}setDisabledState(s){this.disabled=s}changeHour(s){this.model?.changeHour(s),this.propagateModelChange()}changeMinute(s){this.model?.changeMinute(s),this.propagateModelChange()}changeSecond(s){this.model?.changeSecond(s),this.propagateModelChange()}updateHour(s){const p=!!this.model&&this.model.hour>=12,M=ds(s);this.model?.updateHour(this.meridian&&(p&&M<12||!p&&12===M)?M+12:M),this.propagateModelChange()}updateMinute(s){this.model?.updateMinute(ds(s)),this.propagateModelChange()}updateSecond(s){this.model?.updateSecond(ds(s)),this.propagateModelChange()}toggleMeridian(){this.meridian&&this.changeHour(12)}formatInput(s){s.value=s.value.replace(eh,"")}formatHour(s){return ar(s)?Od(this.meridian?s%12==0?12:s%12:s%24):Od(NaN)}formatMinSec(s){return Od(ar(s)?s:NaN)}handleBlur(){this.onTouched()}get isSmallSize(){return"small"===this.size}get isLargeSize(){return"large"===this.size}ngOnChanges(s){s.seconds&&!this.seconds&&this.model&&!ar(this.model.second)&&(this.model.second=0,this.propagateModelChange(!1))}propagateModelChange(s=!0){s&&this.onTouched(),this.model?.isValid(this.seconds)?this.onChange(this._ngbTimeAdapter.toModel({hour:this.model.hour,minute:this.model.minute,second:this.model.second})):this.onChange(this._ngbTimeAdapter.toModel(null))}}return l.\u0275fac=function(s){return new(s||l)(c.Y36(Cf),c.Y36(lu),c.Y36(c.sBO),c.Y36(Qu))},l.\u0275cmp=c.Xpm({type:l,selectors:[["ngb-timepicker"]],inputs:{meridian:"meridian",spinners:"spinners",seconds:"seconds",hourStep:"hourStep",minuteStep:"minuteStep",secondStep:"secondStep",readonlyInputs:"readonlyInputs",size:"size"},exportAs:["ngbTimepicker"],standalone:!0,features:[c._Bn([{provide:Rn,useExisting:(0,c.Gpc)(()=>l),multi:!0}]),c.TTD,c.jDz],decls:16,vars:25,consts:function(){let f,s,p,M,F,Q,le,de,ye,we,wt,_t,St,vn;return f=$localize`:@@ngb.timepicker.HH:HH`,s=$localize`:@@ngb.timepicker.hours:Hours`,p=$localize`:@@ngb.timepicker.MM:MM`,M=$localize`:@@ngb.timepicker.minutes:Minutes`,F=$localize`:@@ngb.timepicker.increment-hours:Increment hours`,Q=$localize`:@@ngb.timepicker.decrement-hours:Decrement hours`,le=$localize`:@@ngb.timepicker.increment-minutes:Increment minutes`,de=$localize`:@@ngb.timepicker.decrement-minutes:Decrement minutes`,ye=$localize`:@@ngb.timepicker.SS:SS`,we=$localize`:@@ngb.timepicker.seconds:Seconds`,wt=$localize`:@@ngb.timepicker.increment-seconds:Increment seconds`,_t=$localize`:@@ngb.timepicker.decrement-seconds:Decrement seconds`,St=$localize`:@@ngb.timepicker.PM:${"\ufffd0\ufffd"}:INTERPOLATION:`,vn=$localize`:@@ngb.timepicker.AM:${"\ufffd0\ufffd"}:INTERPOLATION:`,[[3,"disabled"],[1,"ngb-tp"],[1,"ngb-tp-input-container","ngb-tp-hour"],["tabindex","-1","type","button","class","btn btn-link",3,"btn-sm","btn-lg","disabled","click",4,"ngIf"],["type","text","maxlength","2","inputmode","numeric","placeholder",f,"aria-label",s,1,"ngb-tp-input","form-control",3,"value","readOnly","disabled","change","blur","input","keydown.ArrowUp","keydown.ArrowDown"],[1,"ngb-tp-spacer"],[1,"ngb-tp-input-container","ngb-tp-minute"],["type","text","maxlength","2","inputmode","numeric","placeholder",p,"aria-label",M,1,"ngb-tp-input","form-control",3,"value","readOnly","disabled","change","blur","input","keydown.ArrowUp","keydown.ArrowDown"],["class","ngb-tp-spacer",4,"ngIf"],["class","ngb-tp-input-container ngb-tp-second",4,"ngIf"],["class","ngb-tp-meridian",4,"ngIf"],["tabindex","-1","type","button",1,"btn","btn-link",3,"disabled","click"],[1,"chevron","ngb-tp-chevron"],[1,"visually-hidden"],F,[1,"chevron","ngb-tp-chevron","bottom"],Q,le,de,[1,"ngb-tp-input-container","ngb-tp-second"],["type","text","maxlength","2","inputmode","numeric","placeholder",ye,"aria-label",we,1,"ngb-tp-input","form-control",3,"value","readOnly","disabled","change","blur","input","keydown.ArrowUp","keydown.ArrowDown"],wt,_t,[1,"ngb-tp-meridian"],["type","button",1,"btn","btn-outline-primary",3,"disabled","click"],[4,"ngIf","ngIfElse"],["am",""],St,vn]},template:function(s,p){1&s&&(c.TgZ(0,"fieldset",0)(1,"div",1)(2,"div",2),c.YNc(3,Pp,4,7,"button",3),c.TgZ(4,"input",4),c.NdJ("change",function(F){return p.updateHour(F.target.value)})("blur",function(){return p.handleBlur()})("input",function(F){return p.formatInput(F.target)})("keydown.ArrowUp",function(F){return p.changeHour(p.hourStep),F.preventDefault()})("keydown.ArrowDown",function(F){return p.changeHour(-p.hourStep),F.preventDefault()}),c.qZA(),c.YNc(5,Op,4,7,"button",3),c.qZA(),c.TgZ(6,"div",5),c._uU(7,":"),c.qZA(),c.TgZ(8,"div",6),c.YNc(9,Bg,4,7,"button",3),c.TgZ(10,"input",7),c.NdJ("change",function(F){return p.updateMinute(F.target.value)})("blur",function(){return p.handleBlur()})("input",function(F){return p.formatInput(F.target)})("keydown.ArrowUp",function(F){return p.changeMinute(p.minuteStep),F.preventDefault()})("keydown.ArrowDown",function(F){return p.changeMinute(-p.minuteStep),F.preventDefault()}),c.qZA(),c.YNc(11,Dv,4,7,"button",3),c.qZA(),c.YNc(12,Cd,2,0,"div",8),c.YNc(13,Fp,4,9,"div",9),c.YNc(14,Lp,1,0,"div",8),c.YNc(15,Ed,5,9,"div",10),c.qZA()()),2&s&&(c.ekj("disabled",p.disabled),c.Q6J("disabled",p.disabled),c.xp6(3),c.Q6J("ngIf",p.spinners),c.xp6(1),c.ekj("form-control-sm",p.isSmallSize)("form-control-lg",p.isLargeSize),c.Q6J("value",p.formatHour(null==p.model?null:p.model.hour))("readOnly",p.readonlyInputs)("disabled",p.disabled),c.xp6(1),c.Q6J("ngIf",p.spinners),c.xp6(4),c.Q6J("ngIf",p.spinners),c.xp6(1),c.ekj("form-control-sm",p.isSmallSize)("form-control-lg",p.isLargeSize),c.Q6J("value",p.formatMinSec(null==p.model?null:p.model.minute))("readOnly",p.readonlyInputs)("disabled",p.disabled),c.xp6(1),c.Q6J("ngIf",p.spinners),c.xp6(1),c.Q6J("ngIf",p.seconds),c.xp6(1),c.Q6J("ngIf",p.seconds),c.xp6(1),c.Q6J("ngIf",p.meridian),c.xp6(1),c.Q6J("ngIf",p.meridian))},dependencies:[Je.O5],styles:['ngb-timepicker{font-size:1rem}.ngb-tp{display:flex;align-items:center}.ngb-tp-input-container{width:4em}.ngb-tp-chevron:before{border-style:solid;border-width:.29em .29em 0 0;content:"";display:inline-block;height:.69em;left:.05em;position:relative;top:.15em;transform:rotate(-45deg);vertical-align:middle;width:.69em}.ngb-tp-chevron.bottom:before{top:-.3em;transform:rotate(135deg)}.ngb-tp-input{text-align:center}.ngb-tp-hour,.ngb-tp-minute,.ngb-tp-second,.ngb-tp-meridian{display:flex;flex-direction:column;align-items:center;justify-content:space-around}.ngb-tp-spacer{width:1em;text-align:center}\n'],encapsulation:2}),l})(),th=(()=>{class l{}return l.\u0275fac=function(s){return new(s||l)},l.\u0275mod=c.oAB({type:l}),l.\u0275inj=c.cJS({imports:[qv]}),l})();const nh=(l,f)=>{const{classList:s}=l;if(f)return s.add("fade"),Jc(l),s.add("show","showing"),()=>{s.remove("showing")};s.add("show")},Dm=({classList:l})=>(l.add("showing"),()=>{l.remove("show","showing")});let wm=(()=>{class l{constructor(s){this._ngbConfig=s,this.autohide=!0,this.delay=5e3,this.ariaLive="polite"}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(s){this._animation=s}}return l.\u0275fac=function(s){return new(s||l)(c.LFG(no))},l.\u0275prov=c.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})(),Rm=(()=>{class l{}return l.\u0275fac=function(s){return new(s||l)},l.\u0275dir=c.lG2({type:l,selectors:[["","ngbToastHeader",""]],standalone:!0}),l})(),Sm=(()=>{class l{constructor(s,p,M,F){this.ariaLive=s,this._zone=M,this._element=F,this.contentHeaderTpl=null,this.shown=new c.vpe,this.hidden=new c.vpe,null==this.ariaLive&&(this.ariaLive=p.ariaLive),this.delay=p.delay,this.autohide=p.autohide,this.animation=p.animation}ngAfterContentInit(){this._zone.onStable.asObservable().pipe((0,Qn.q)(1)).subscribe(()=>{this._init(),this.show()})}ngOnChanges(s){"autohide"in s&&(this._clearTimeout(),this._init())}hide(){this._clearTimeout();const s=Ur(this._zone,this._element.nativeElement,Dm,{animation:this.animation,runningTransition:"stop"});return s.subscribe(()=>{this.hidden.emit()}),s}show(){const s=Ur(this._zone,this._element.nativeElement,nh,{animation:this.animation,runningTransition:"continue"});return s.subscribe(()=>{this.shown.emit()}),s}_init(){this.autohide&&!this._timeoutID&&(this._timeoutID=setTimeout(()=>this.hide(),this.delay))}_clearTimeout(){this._timeoutID&&(clearTimeout(this._timeoutID),this._timeoutID=null)}}return l.\u0275fac=function(s){return new(s||l)(c.$8M("aria-live"),c.Y36(wm),c.Y36(c.R0b),c.Y36(c.SBq))},l.\u0275cmp=c.Xpm({type:l,selectors:[["ngb-toast"]],contentQueries:function(s,p,M){if(1&s&&c.Suo(M,Rm,7,c.Rgc),2&s){let F;c.iGM(F=c.CRH())&&(p.contentHeaderTpl=F.first)}},hostAttrs:["role","alert","aria-atomic","true",1,"toast"],hostVars:3,hostBindings:function(s,p){2&s&&(c.uIk("aria-live",p.ariaLive),c.ekj("fade",p.animation))},inputs:{animation:"animation",delay:"delay",autohide:"autohide",header:"header"},outputs:{shown:"shown",hidden:"hidden"},exportAs:["ngbToast"],standalone:!0,features:[c.TTD,c.jDz],ngContentSelectors:Rd,decls:5,vars:1,consts:function(){let f;return f=$localize`:@@ngb.toast.close-aria:Close`,[["headerTpl",""],[3,"ngIf"],[1,"toast-body"],[1,"me-auto"],[1,"toast-header"],[3,"ngTemplateOutlet"],["type","button","aria-label",f,1,"btn-close",3,"click"]]},template:function(s,p){1&s&&(c.F$t(),c.YNc(0,Ad,2,1,"ng-template",null,0,c.W1O),c.YNc(2,Gh,3,1,"ng-template",1),c.TgZ(3,"div",2),c.Hsn(4),c.qZA()),2&s&&(c.xp6(2),c.Q6J("ngIf",p.contentHeaderTpl||p.header))},dependencies:[Je.O5,Je.tP],styles:["ngb-toast{display:block}ngb-toast .toast-header .close{margin-left:auto;margin-bottom:.25rem}\n"],encapsulation:2}),l})(),El=(()=>{class l{}return l.\u0275fac=function(s){return new(s||l)},l.\u0275mod=c.oAB({type:l}),l.\u0275inj=c.cJS({imports:[Sm]}),l})(),Pf=(()=>{class l{}return l.\u0275fac=function(s){return new(s||l)},l.\u0275mod=c.oAB({type:l}),l.\u0275inj=c.cJS({}),l})(),Of=(()=>{class l{constructor(){this.highlightClass="ngb-highlight",this.accentSensitive=!0}ngOnChanges(s){!this.accentSensitive&&!String.prototype.normalize&&(console.warn("The `accentSensitive` input in `ngb-highlight` cannot be set to `false` in a browser that does not implement the `String.normalize` function. You will have to include a polyfill in your application to use this feature in the current browser."),this.accentSensitive=!0);const p=kp(this.result),M=Array.isArray(this.term)?this.term:[this.term],F=ye=>this.accentSensitive?ye:Wh(ye),Q=M.map(ye=>function Rv(l){return l.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}(F(kp(ye)))).filter(ye=>ye),le=this.accentSensitive?p:Wh(p),de=Q.length?le.split(new RegExp(`(${Q.join("|")})`,"gmi")):[p];if(this.accentSensitive)this.parts=de;else{let ye=0;this.parts=de.map(we=>p.substring(ye,ye+=we.length))}}}return l.\u0275fac=function(s){return new(s||l)},l.\u0275cmp=c.Xpm({type:l,selectors:[["ngb-highlight"]],inputs:{highlightClass:"highlightClass",result:"result",term:"term",accentSensitive:"accentSensitive"},standalone:!0,features:[c.TTD,c.jDz],decls:1,vars:1,consts:[["ngFor","",3,"ngForOf"],[3,"class",4,"ngIf","ngIfElse"],["even",""]],template:function(s,p){1&s&&c.YNc(0,Id,3,2,"ng-template",0),2&s&&c.Q6J("ngForOf",p.parts)},dependencies:[Je.O5,Je.ax],styles:[".ngb-highlight{font-weight:700}\n"],encapsulation:2,changeDetection:0}),l})();new c.OlP("live announcer delay",{providedIn:"root",factory:function Al(){return 100}});let sh=(()=>{class l{}return l.\u0275fac=function(s){return new(s||l)},l.\u0275mod=c.oAB({type:l}),l.\u0275inj=c.cJS({imports:[Of]}),l})(),Pm=(()=>{class l{}return l.\u0275fac=function(s){return new(s||l)},l.\u0275mod=c.oAB({type:l}),l.\u0275inj=c.cJS({}),l})();const Om=[qh,Hp,Wp,$p,zu,Rl,ou,Tf,Pm,Mc,w_,Sf,Xu,th,El,Pf,sh];let Il=(()=>{class l{}return l.\u0275fac=function(s){return new(s||l)},l.\u0275mod=c.oAB({type:l}),l.\u0275inj=c.cJS({imports:[Om,qh,Hp,Wp,$p,zu,Rl,ou,Tf,Pm,Mc,w_,Sf,Xu,th,El,Pf,sh]}),l})(),id=(()=>{class l{}return l.\u0275fac=function(s){return new(s||l)},l.\u0275mod=c.oAB({type:l}),l.\u0275inj=c.cJS({imports:[Je.ez,Il,Je.ez,Il]}),l})()},5542:(an,Qe,ee)=>{var c=ee(1481),W=ee(1571),be=ee(2655);function Oe(h,e,t,i,a,d,g){try{var _=h[d](g),y=_.value}catch(b){return void t(b)}_.done?e(y):Promise.resolve(y).then(i,a)}const tt="148",ht=0,Ve=1,He=2,rt=1,xt=2,mt=3,en=0,Kt=1,ci=2,vi=3,Ne=0,dt=1,je=2,Ot=3,Ut=4,Lt=5,Zt=100,Ht=101,Bt=102,Kn=103,Jt=104,ke=200,Be=201,Ue=202,Ye=203,bt=204,yt=205,dn=206,Gn=207,Vi=208,fn=209,Tn=210,zt=0,ii=1,ts=2,ln=3,cn=4,cr=5,Qn=6,Ar=7,io=0,Ir=1,Sa=2,yi=0,ro=1,Ro=2,Ui=3,ns=4,Qo=5,zr=301,ri=302,jt=303,Je=304,So=306,ui=1e3,mi=1001,is=1002,In=1003,un=1004,js=1005,Ki=1006,bs=1007,dr=1008,tr=1009,Ri=1010,Si=1011,Wr=1012,Co=1013,$r=1014,Pr=1015,so=1016,tl=1017,kl=1018,xe=1020,pe=1021,re=1022,Te=1023,Ae=1024,Nt=1025,hn=1026,Yn=1027,Bi=1028,rs=1029,hr=1030,nl=1031,Gl=1033,Ca=33776,oo=33777,il=33778,Ms=33779,Eo=35840,ss=35841,ks=35842,ea=35843,qn=36196,Hi=37492,si=37496,br=37808,fr=37809,Nc=37810,rl=37811,gs=37812,_s=37813,It=37814,mn=37815,Ci=37816,Or=37817,Yr=37818,Ei=37819,Gs=37820,oi=37821,Vs=36492,Ws=3e3,hi=3001,Ao=3201,qr=0,pr=1,bi="srgb",Wi="srgb-linear",ul="300 es",dl=1035;class co{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const i=this._listeners;void 0===i[e]&&(i[e]=[]),-1===i[e].indexOf(t)&&i[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const i=this._listeners;return void 0!==i[e]&&-1!==i[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const a=this._listeners[e];if(void 0!==a){const d=a.indexOf(t);-1!==d&&a.splice(d,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const i=this._listeners[e.type];if(void 0!==i){e.target=this;const a=i.slice(0);for(let d=0,g=a.length;d<g;d++)a[d].call(this,e);e.target=null}}}const Mr=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],uo=Math.PI/180,sa=180/Math.PI;function Jr(){const h=4294967295*Math.random()|0,e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(Mr[255&h]+Mr[h>>8&255]+Mr[h>>16&255]+Mr[h>>24&255]+"-"+Mr[255&e]+Mr[e>>8&255]+"-"+Mr[e>>16&15|64]+Mr[e>>24&255]+"-"+Mr[63&t|128]+Mr[t>>8&255]+"-"+Mr[t>>16&255]+Mr[t>>24&255]+Mr[255&i]+Mr[i>>8&255]+Mr[i>>16&255]+Mr[i>>24&255]).toLowerCase()}function Ti(h,e,t){return Math.max(e,Math.min(t,h))}function No(h,e,t){return(1-t)*h+t*e}function ho(h){return 0==(h&h-1)&&0!==h}function hl(h){return Math.pow(2,Math.floor(Math.log(h)/Math.LN2))}function nn(h,e){switch(e.constructor){case Float32Array:return h;case Uint16Array:return h/65535;case Uint8Array:return h/255;case Int16Array:return Math.max(h/32767,-1);case Int8Array:return Math.max(h/127,-1);default:throw new Error("Invalid component type.")}}function ai(h,e){switch(e.constructor){case Float32Array:return h;case Uint16Array:return Math.round(65535*h);case Uint8Array:return Math.round(255*h);case Int16Array:return Math.round(32767*h);case Int8Array:return Math.round(127*h);default:throw new Error("Invalid component type.")}}class st{constructor(e=0,t=0){st.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,a=e.elements;return this.x=a[0]*t+a[3]*i+a[6],this.y=a[1]*t+a[4]*i+a[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),a=Math.sin(t),d=this.x-e.x,g=this.y-e.y;return this.x=d*i-g*a+e.x,this.y=d*a+g*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Fn{constructor(){Fn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,i,a,d,g,_,y,b){const w=this.elements;return w[0]=e,w[1]=a,w[2]=_,w[3]=t,w[4]=d,w[5]=y,w[6]=i,w[7]=g,w[8]=b,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,a=t.elements,d=this.elements,g=i[0],_=i[3],y=i[6],b=i[1],w=i[4],S=i[7],E=i[2],L=i[5],G=i[8],j=a[0],B=a[3],z=a[6],J=a[1],H=a[4],Y=a[7],ne=a[2],ae=a[5],he=a[8];return d[0]=g*j+_*J+y*ne,d[3]=g*B+_*H+y*ae,d[6]=g*z+_*Y+y*he,d[1]=b*j+w*J+S*ne,d[4]=b*B+w*H+S*ae,d[7]=b*z+w*Y+S*he,d[2]=E*j+L*J+G*ne,d[5]=E*B+L*H+G*ae,d[8]=E*z+L*Y+G*he,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],a=e[2],d=e[3],g=e[4],_=e[5],y=e[6],b=e[7],w=e[8];return t*g*w-t*_*b-i*d*w+i*_*y+a*d*b-a*g*y}invert(){const e=this.elements,t=e[0],i=e[1],a=e[2],d=e[3],g=e[4],_=e[5],y=e[6],b=e[7],w=e[8],S=w*g-_*b,E=_*y-w*d,L=b*d-g*y,G=t*S+i*E+a*L;if(0===G)return this.set(0,0,0,0,0,0,0,0,0);const j=1/G;return e[0]=S*j,e[1]=(a*b-w*i)*j,e[2]=(_*i-a*g)*j,e[3]=E*j,e[4]=(w*t-a*y)*j,e[5]=(a*d-_*t)*j,e[6]=L*j,e[7]=(i*y-b*t)*j,e[8]=(g*t-i*d)*j,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,a,d,g,_){const y=Math.cos(d),b=Math.sin(d);return this.set(i*y,i*b,-i*(y*g+b*_)+g+e,-a*b,a*y,-a*(-b*g+y*_)+_+t,0,0,1),this}scale(e,t){return this.premultiply(kc.makeScale(e,t)),this}rotate(e){return this.premultiply(kc.makeRotation(-e)),this}translate(e,t){return this.premultiply(kc.makeTranslation(e,t)),this}makeTranslation(e,t){return this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let a=0;a<9;a++)if(t[a]!==i[a])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}const kc=new Fn;function Yl(h){for(let e=h.length-1;e>=0;--e)if(h[e]>=65535)return!0;return!1}function Ke(h){return document.createElementNS("http://www.w3.org/1999/xhtml",h)}function _n(h){return h<.04045?.0773993808*h:Math.pow(.9478672986*h+.0521327014,2.4)}function Ds(h){return h<.0031308?12.92*h:1.055*Math.pow(h,.41666)-.055}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const Pa={[bi]:{[Wi]:_n},[Wi]:{[bi]:Ds}},Xn={legacyMode:!0,get workingColorSpace(){return Wi},set workingColorSpace(h){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(h,e,t){if(this.legacyMode||e===t||!e||!t)return h;if(Pa[e]&&void 0!==Pa[e][t]){const i=Pa[e][t];return h.r=i(h.r),h.g=i(h.g),h.b=i(h.b),h}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(h,e){return this.convert(h,this.workingColorSpace,e)},toWorkingColorSpace:function(h,e){return this.convert(h,e,this.workingColorSpace)}},Gc={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Ai={r:0,g:0,b:0},nr={h:0,s:0,l:0},jo={h:0,s:0,l:0};function ko(h,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?h+6*(e-h)*t:t<.5?e:t<2/3?h+6*(e-h)*(2/3-t):h}function ws(h,e){return e.r=h.r,e.g=h.g,e.b=h.b,e}let Go,Yt=(()=>{class h{constructor(t,i,a){return this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===i&&void 0===a?this.set(t):this.setRGB(t,i,a)}set(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,i=bi){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,Xn.toWorkingColorSpace(this,i),this}setRGB(t,i,a,d=Xn.workingColorSpace){return this.r=t,this.g=i,this.b=a,Xn.toWorkingColorSpace(this,d),this}setHSL(t,i,a,d=Xn.workingColorSpace){if(t=function Ia(h,e){return(h%e+e)%e}(t,1),i=Ti(i,0,1),a=Ti(a,0,1),0===i)this.r=this.g=this.b=a;else{const g=a<=.5?a*(1+i):a+i-a*i,_=2*a-g;this.r=ko(_,g,t+1/3),this.g=ko(_,g,t),this.b=ko(_,g,t-1/3)}return Xn.toWorkingColorSpace(this,d),this}setStyle(t,i=bi){function a(g){void 0!==g&&parseFloat(g)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let d;if(d=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(t)){let g;const y=d[2];switch(d[1]){case"rgb":case"rgba":if(g=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(y))return this.r=Math.min(255,parseInt(g[1],10))/255,this.g=Math.min(255,parseInt(g[2],10))/255,this.b=Math.min(255,parseInt(g[3],10))/255,Xn.toWorkingColorSpace(this,i),a(g[4]),this;if(g=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(y))return this.r=Math.min(100,parseInt(g[1],10))/100,this.g=Math.min(100,parseInt(g[2],10))/100,this.b=Math.min(100,parseInt(g[3],10))/100,Xn.toWorkingColorSpace(this,i),a(g[4]),this;break;case"hsl":case"hsla":if(g=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(y)){const b=parseFloat(g[1])/360,w=parseFloat(g[2])/100,S=parseFloat(g[3])/100;return a(g[4]),this.setHSL(b,w,S,i)}}}else if(d=/^\#([A-Fa-f\d]+)$/.exec(t)){const g=d[1],_=g.length;if(3===_)return this.r=parseInt(g.charAt(0)+g.charAt(0),16)/255,this.g=parseInt(g.charAt(1)+g.charAt(1),16)/255,this.b=parseInt(g.charAt(2)+g.charAt(2),16)/255,Xn.toWorkingColorSpace(this,i),this;if(6===_)return this.r=parseInt(g.charAt(0)+g.charAt(1),16)/255,this.g=parseInt(g.charAt(2)+g.charAt(3),16)/255,this.b=parseInt(g.charAt(4)+g.charAt(5),16)/255,Xn.toWorkingColorSpace(this,i),this}return t&&t.length>0?this.setColorName(t,i):this}setColorName(t,i=bi){const a=Gc[t.toLowerCase()];return void 0!==a?this.setHex(a,i):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=_n(t.r),this.g=_n(t.g),this.b=_n(t.b),this}copyLinearToSRGB(t){return this.r=Ds(t.r),this.g=Ds(t.g),this.b=Ds(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=bi){return Xn.fromWorkingColorSpace(ws(this,Ai),t),Ti(255*Ai.r,0,255)<<16^Ti(255*Ai.g,0,255)<<8^Ti(255*Ai.b,0,255)<<0}getHexString(t=bi){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,i=Xn.workingColorSpace){Xn.fromWorkingColorSpace(ws(this,Ai),i);const a=Ai.r,d=Ai.g,g=Ai.b,_=Math.max(a,d,g),y=Math.min(a,d,g);let b,w;const S=(y+_)/2;if(y===_)b=0,w=0;else{const E=_-y;switch(w=S<=.5?E/(_+y):E/(2-_-y),_){case a:b=(d-g)/E+(d<g?6:0);break;case d:b=(g-a)/E+2;break;case g:b=(a-d)/E+4}b/=6}return t.h=b,t.s=w,t.l=S,t}getRGB(t,i=Xn.workingColorSpace){return Xn.fromWorkingColorSpace(ws(this,Ai),i),t.r=Ai.r,t.g=Ai.g,t.b=Ai.b,t}getStyle(t=bi){return Xn.fromWorkingColorSpace(ws(this,Ai),t),t!==bi?`color(${t} ${Ai.r} ${Ai.g} ${Ai.b})`:`rgb(${255*Ai.r|0},${255*Ai.g|0},${255*Ai.b|0})`}offsetHSL(t,i,a){return this.getHSL(nr),nr.h+=t,nr.s+=i,nr.l+=a,this.setHSL(nr.h,nr.s,nr.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,i){return this.r=t.r+i.r,this.g=t.g+i.g,this.b=t.b+i.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,i){return this.r+=(t.r-this.r)*i,this.g+=(t.g-this.g)*i,this.b+=(t.b-this.b)*i,this}lerpColors(t,i,a){return this.r=t.r+(i.r-t.r)*a,this.g=t.g+(i.g-t.g)*a,this.b=t.b+(i.b-t.b)*a,this}lerpHSL(t,i){this.getHSL(nr),t.getHSL(jo);const a=No(nr.h,jo.h,i),d=No(nr.s,jo.s,i),g=No(nr.l,jo.l,i);return this.setHSL(a,d,g),this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,i=0){return this.r=t[i],this.g=t[i+1],this.b=t[i+2],this}toArray(t=[],i=0){return t[i]=this.r,t[i+1]=this.g,t[i+2]=this.b,t}fromBufferAttribute(t,i){return this.r=t.getX(i),this.g=t.getY(i),this.b=t.getZ(i),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}return h.NAMES=Gc,h})();class ur{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===Go&&(Go=Ke("canvas")),Go.width=e.width,Go.height=e.height;const i=Go.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=Go}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Ke("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const a=i.getImageData(0,0,e.width,e.height),d=a.data;for(let g=0;g<d.length;g++)d[g]=255*_n(d[g]/255);return i.putImageData(a,0,0),t}if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t[i]=t instanceof Uint8Array||t instanceof Uint8ClampedArray?Math.floor(255*_n(t[i]/255)):_n(t[i]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class mr{constructor(e=null){this.isSource=!0,this.uuid=Jr(),this.data=e,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const i={uuid:this.uuid,url:""},a=this.data;if(null!==a){let d;if(Array.isArray(a)){d=[];for(let g=0,_=a.length;g<_;g++)d.push(ql(a[g].isDataTexture?a[g].image:a[g]))}else d=ql(a);i.url=d}return t||(e.images[this.uuid]=i),i}}function ql(h){return typeof HTMLImageElement<"u"&&h instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&h instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&h instanceof ImageBitmap?ur.getDataURL(h):h.data?{data:Array.from(h.data),width:h.width,height:h.height,type:h.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let qs=0,or=(()=>{class h extends co{constructor(t=h.DEFAULT_IMAGE,i=h.DEFAULT_MAPPING,a=mi,d=mi,g=Ki,_=dr,y=Te,b=tr,w=h.DEFAULT_ANISOTROPY,S=Ws){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:qs++}),this.uuid=Jr(),this.name="",this.source=new mr(t),this.mipmaps=[],this.mapping=i,this.wrapS=a,this.wrapT=d,this.magFilter=g,this.minFilter=_,this.anisotropy=w,this.format=y,this.internalFormat=null,this.type=b,this.offset=new st(0,0),this.repeat=new st(1,1),this.center=new st(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Fn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=S,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(t){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const i=void 0===t||"string"==typeof t;if(!i&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const a={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(a.userData=this.userData),i||(t.textures[this.uuid]=a),a}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(300!==this.mapping)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case ui:t.x=t.x-Math.floor(t.x);break;case mi:t.x=t.x<0?0:1;break;case is:t.x=1===Math.abs(Math.floor(t.x)%2)?Math.ceil(t.x)-t.x:t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case ui:t.y=t.y-Math.floor(t.y);break;case mi:t.y=t.y<0?0:1;break;case is:t.y=1===Math.abs(Math.floor(t.y)%2)?Math.ceil(t.y)-t.y:t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){!0===t&&(this.version++,this.source.needsUpdate=!0)}}return h.DEFAULT_IMAGE=null,h.DEFAULT_MAPPING=300,h.DEFAULT_ANISOTROPY=1,h})();class Wn{constructor(e=0,t=0,i=0,a=1){Wn.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=a}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,a){return this.x=e,this.y=t,this.z=i,this.w=a,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,a=this.z,d=this.w,g=e.elements;return this.x=g[0]*t+g[4]*i+g[8]*a+g[12]*d,this.y=g[1]*t+g[5]*i+g[9]*a+g[13]*d,this.z=g[2]*t+g[6]*i+g[10]*a+g[14]*d,this.w=g[3]*t+g[7]*i+g[11]*a+g[15]*d,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,a,d;const y=e.elements,b=y[0],w=y[4],S=y[8],E=y[1],L=y[5],G=y[9],j=y[2],B=y[6],z=y[10];if(Math.abs(w-E)<.01&&Math.abs(S-j)<.01&&Math.abs(G-B)<.01){if(Math.abs(w+E)<.1&&Math.abs(S+j)<.1&&Math.abs(G+B)<.1&&Math.abs(b+L+z-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const H=(b+1)/2,Y=(L+1)/2,ne=(z+1)/2,ae=(w+E)/4,he=(S+j)/4,Z=(G+B)/4;return H>Y&&H>ne?H<.01?(i=0,a=.707106781,d=.707106781):(i=Math.sqrt(H),a=ae/i,d=he/i):Y>ne?Y<.01?(i=.707106781,a=0,d=.707106781):(a=Math.sqrt(Y),i=ae/a,d=Z/a):ne<.01?(i=.707106781,a=.707106781,d=0):(d=Math.sqrt(ne),i=he/d,a=Z/d),this.set(i,a,d,t),this}let J=Math.sqrt((B-G)*(B-G)+(S-j)*(S-j)+(E-w)*(E-w));return Math.abs(J)<.001&&(J=1),this.x=(B-G)/J,this.y=(S-j)/J,this.z=(E-w)/J,this.w=Math.acos((b+L+z-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class po extends co{constructor(e=1,t=1,i={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Wn(0,0,e,t),this.scissorTest=!1,this.viewport=new Wn(0,0,e,t),this.texture=new or({width:e,height:t,depth:1},i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==i.generateMipmaps&&i.generateMipmaps,this.texture.internalFormat=void 0!==i.internalFormat?i.internalFormat:null,this.texture.minFilter=void 0!==i.minFilter?i.minFilter:Ki,this.depthBuffer=void 0===i.depthBuffer||i.depthBuffer,this.stencilBuffer=void 0!==i.stencilBuffer&&i.stencilBuffer,this.depthTexture=void 0!==i.depthTexture?i.depthTexture:null,this.samples=void 0!==i.samples?i.samples:0}setSize(e,t,i=1){(this.width!==e||this.height!==t||this.depth!==i)&&(this.width=e,this.height=t,this.depth=i,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new mr(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class mo extends or{constructor(e=null,t=1,i=1,a=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:a},this.magFilter=In,this.minFilter=In,this.wrapR=mi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Vo extends or{constructor(e=null,t=1,i=1,a=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:a},this.magFilter=In,this.minFilter=In,this.wrapR=mi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class gr{constructor(e=0,t=0,i=0,a=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=a}static slerpFlat(e,t,i,a,d,g,_){let y=i[a+0],b=i[a+1],w=i[a+2],S=i[a+3];const E=d[g+0],L=d[g+1],G=d[g+2],j=d[g+3];if(0===_)return e[t+0]=y,e[t+1]=b,e[t+2]=w,void(e[t+3]=S);if(1===_)return e[t+0]=E,e[t+1]=L,e[t+2]=G,void(e[t+3]=j);if(S!==j||y!==E||b!==L||w!==G){let B=1-_;const z=y*E+b*L+w*G+S*j,J=z>=0?1:-1,H=1-z*z;if(H>Number.EPSILON){const ne=Math.sqrt(H),ae=Math.atan2(ne,z*J);B=Math.sin(B*ae)/ne,_=Math.sin(_*ae)/ne}const Y=_*J;if(y=y*B+E*Y,b=b*B+L*Y,w=w*B+G*Y,S=S*B+j*Y,B===1-_){const ne=1/Math.sqrt(y*y+b*b+w*w+S*S);y*=ne,b*=ne,w*=ne,S*=ne}}e[t]=y,e[t+1]=b,e[t+2]=w,e[t+3]=S}static multiplyQuaternionsFlat(e,t,i,a,d,g){const _=i[a],y=i[a+1],b=i[a+2],w=i[a+3],S=d[g],E=d[g+1],L=d[g+2],G=d[g+3];return e[t]=_*G+w*S+y*L-b*E,e[t+1]=y*G+w*E+b*S-_*L,e[t+2]=b*G+w*L+_*E-y*S,e[t+3]=w*G-_*S-y*E-b*L,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,a){return this._x=e,this._y=t,this._z=i,this._w=a,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const i=e._x,a=e._y,d=e._z,g=e._order,_=Math.cos,y=Math.sin,b=_(i/2),w=_(a/2),S=_(d/2),E=y(i/2),L=y(a/2),G=y(d/2);switch(g){case"XYZ":this._x=E*w*S+b*L*G,this._y=b*L*S-E*w*G,this._z=b*w*G+E*L*S,this._w=b*w*S-E*L*G;break;case"YXZ":this._x=E*w*S+b*L*G,this._y=b*L*S-E*w*G,this._z=b*w*G-E*L*S,this._w=b*w*S+E*L*G;break;case"ZXY":this._x=E*w*S-b*L*G,this._y=b*L*S+E*w*G,this._z=b*w*G+E*L*S,this._w=b*w*S-E*L*G;break;case"ZYX":this._x=E*w*S-b*L*G,this._y=b*L*S+E*w*G,this._z=b*w*G-E*L*S,this._w=b*w*S+E*L*G;break;case"YZX":this._x=E*w*S+b*L*G,this._y=b*L*S+E*w*G,this._z=b*w*G-E*L*S,this._w=b*w*S-E*L*G;break;case"XZY":this._x=E*w*S-b*L*G,this._y=b*L*S-E*w*G,this._z=b*w*G+E*L*S,this._w=b*w*S+E*L*G;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+g)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,a=Math.sin(i);return this._x=e.x*a,this._y=e.y*a,this._z=e.z*a,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],a=t[4],d=t[8],g=t[1],_=t[5],y=t[9],b=t[2],w=t[6],S=t[10],E=i+_+S;if(E>0){const L=.5/Math.sqrt(E+1);this._w=.25/L,this._x=(w-y)*L,this._y=(d-b)*L,this._z=(g-a)*L}else if(i>_&&i>S){const L=2*Math.sqrt(1+i-_-S);this._w=(w-y)/L,this._x=.25*L,this._y=(a+g)/L,this._z=(d+b)/L}else if(_>S){const L=2*Math.sqrt(1+_-i-S);this._w=(d-b)/L,this._x=(a+g)/L,this._y=.25*L,this._z=(y+w)/L}else{const L=2*Math.sqrt(1+S-i-_);this._w=(g-a)/L,this._x=(d+b)/L,this._y=(y+w)/L,this._z=.25*L}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Ti(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(0===i)return this;const a=Math.min(1,t/i);return this.slerp(e,a),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,a=e._y,d=e._z,g=e._w,_=t._x,y=t._y,b=t._z,w=t._w;return this._x=i*w+g*_+a*b-d*y,this._y=a*w+g*y+d*_-i*b,this._z=d*w+g*b+i*y-a*_,this._w=g*w-i*_-a*y-d*b,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const i=this._x,a=this._y,d=this._z,g=this._w;let _=g*e._w+i*e._x+a*e._y+d*e._z;if(_<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,_=-_):this.copy(e),_>=1)return this._w=g,this._x=i,this._y=a,this._z=d,this;const y=1-_*_;if(y<=Number.EPSILON){const L=1-t;return this._w=L*g+t*this._w,this._x=L*i+t*this._x,this._y=L*a+t*this._y,this._z=L*d+t*this._z,this.normalize(),this._onChangeCallback(),this}const b=Math.sqrt(y),w=Math.atan2(b,_),S=Math.sin((1-t)*w)/b,E=Math.sin(t*w)/b;return this._w=g*S+this._w*E,this._x=i*S+this._x*E,this._y=a*S+this._y*E,this._z=d*S+this._z*E,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=Math.random(),t=Math.sqrt(1-e),i=Math.sqrt(e),a=2*Math.PI*Math.random(),d=2*Math.PI*Math.random();return this.set(t*Math.cos(a),i*Math.sin(d),i*Math.cos(d),t*Math.sin(a))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class ie{constructor(e=0,t=0,i=0){ie.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return void 0===i&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(go.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(go.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,a=this.z,d=e.elements;return this.x=d[0]*t+d[3]*i+d[6]*a,this.y=d[1]*t+d[4]*i+d[7]*a,this.z=d[2]*t+d[5]*i+d[8]*a,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,a=this.z,d=e.elements,g=1/(d[3]*t+d[7]*i+d[11]*a+d[15]);return this.x=(d[0]*t+d[4]*i+d[8]*a+d[12])*g,this.y=(d[1]*t+d[5]*i+d[9]*a+d[13])*g,this.z=(d[2]*t+d[6]*i+d[10]*a+d[14])*g,this}applyQuaternion(e){const t=this.x,i=this.y,a=this.z,d=e.x,g=e.y,_=e.z,y=e.w,b=y*t+g*a-_*i,w=y*i+_*t-d*a,S=y*a+d*i-g*t,E=-d*t-g*i-_*a;return this.x=b*y+E*-d+w*-_-S*-g,this.y=w*y+E*-g+S*-d-b*-_,this.z=S*y+E*-_+b*-g-w*-d,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,a=this.z,d=e.elements;return this.x=d[0]*t+d[4]*i+d[8]*a,this.y=d[1]*t+d[5]*i+d[9]*a,this.z=d[2]*t+d[6]*i+d[10]*a,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,a=e.y,d=e.z,g=t.x,_=t.y,y=t.z;return this.x=a*y-d*_,this.y=d*g-i*y,this.z=i*_-a*g,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return aa.copy(this).projectOnVector(e),this.sub(aa)}reflect(e){return this.sub(aa.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Ti(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,a=this.z-e.z;return t*t+i*i+a*a}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const a=Math.sin(t)*e;return this.x=a*Math.sin(i),this.y=Math.cos(t)*e,this.z=a*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),a=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=a,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,i=Math.sqrt(1-e**2);return this.x=i*Math.cos(t),this.y=i*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const aa=new ie,go=new gr;class _o{constructor(e=new ie(1/0,1/0,1/0),t=new ie(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,i=1/0,a=1/0,d=-1/0,g=-1/0,_=-1/0;for(let y=0,b=e.length;y<b;y+=3){const w=e[y],S=e[y+1],E=e[y+2];w<t&&(t=w),S<i&&(i=S),E<a&&(a=E),w>d&&(d=w),S>g&&(g=S),E>_&&(_=E)}return this.min.set(t,i,a),this.max.set(d,g,_),this}setFromBufferAttribute(e){let t=1/0,i=1/0,a=1/0,d=-1/0,g=-1/0,_=-1/0;for(let y=0,b=e.count;y<b;y++){const w=e.getX(y),S=e.getY(y),E=e.getZ(y);w<t&&(t=w),S<i&&(i=S),E<a&&(a=E),w>d&&(d=w),S>g&&(g=S),E>_&&(_=E)}return this.min.set(t,i,a),this.max.set(d,g,_),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=vo.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(void 0!==i)if(t&&null!=i.attributes&&void 0!==i.attributes.position){const d=i.attributes.position;for(let g=0,_=d.count;g<_;g++)vo.fromBufferAttribute(d,g).applyMatrix4(e.matrixWorld),this.expandByPoint(vo)}else null===i.boundingBox&&i.computeBoundingBox(),Oa.copy(i.boundingBox),Oa.applyMatrix4(e.matrixWorld),this.union(Oa);const a=e.children;for(let d=0,g=a.length;d<g;d++)this.expandByObject(a[d],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,vo),vo.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Jl),Hc.subVectors(this.max,Jl),Uo.subVectors(e.a,Jl),la.subVectors(e.b,Jl),ca.subVectors(e.c,Jl),$i.subVectors(la,Uo),as.subVectors(ca,la),_i.subVectors(Uo,ca);let t=[0,-$i.z,$i.y,0,-as.z,as.y,0,-_i.z,_i.y,$i.z,0,-$i.x,as.z,0,-as.x,_i.z,0,-_i.x,-$i.y,$i.x,0,-as.y,as.x,0,-_i.y,_i.x,0];return!(!P(t,Uo,la,ca,Hc)||(t=[1,0,0,0,1,0,0,0,1],!P(t,Uo,la,ca,Hc)))&&(Zl.crossVectors($i,as),t=[Zl.x,Zl.y,Zl.z],P(t,Uo,la,ca,Hc))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return vo.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=.5*this.getSize(vo).length(),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(Rs[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Rs[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Rs[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Rs[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Rs[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Rs[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Rs[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Rs[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Rs)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Rs=[new ie,new ie,new ie,new ie,new ie,new ie,new ie,new ie],vo=new ie,Oa=new _o,Uo=new ie,la=new ie,ca=new ie,$i=new ie,as=new ie,_i=new ie,Jl=new ie,Hc=new ie,Zl=new ie,Na=new ie;function P(h,e,t,i,a){for(let d=0,g=h.length-3;d<=g;d+=3){Na.fromArray(h,d);const _=a.x*Math.abs(Na.x)+a.y*Math.abs(Na.y)+a.z*Math.abs(Na.z),y=e.dot(Na),b=t.dot(Na),w=i.dot(Na);if(Math.max(-Math.max(y,b,w),Math.min(y,b,w))>_)return!1}return!0}const U=new _o,k=new ie,K=new ie;class oe{constructor(e=new ie,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;void 0!==t?i.copy(t):U.setFromPoints(e).getCenter(i);let a=0;for(let d=0,g=e.length;d<g;d++)a=Math.max(a,i.distanceToSquared(e[d]));return this.radius=Math.sqrt(a),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;k.subVectors(e,this.center);const t=k.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),a=.5*(i-this.radius);this.center.addScaledVector(k,a/i),this.radius+=a}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(K.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(k.copy(e.center).add(K)),this.expandByPoint(k.copy(e.center).sub(K))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const De=new ie,ze=new ie,Wt=new ie,bn=new ie,Sn=new ie,xn=new ie,On=new ie;class Ii{constructor(e=new ie,t=new ie(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,De)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(i).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=De.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(De.copy(this.direction).multiplyScalar(t).add(this.origin),De.distanceToSquared(e))}distanceSqToSegment(e,t,i,a){ze.copy(e).add(t).multiplyScalar(.5),Wt.copy(t).sub(e).normalize(),bn.copy(this.origin).sub(ze);const d=.5*e.distanceTo(t),g=-this.direction.dot(Wt),_=bn.dot(this.direction),y=-bn.dot(Wt),b=bn.lengthSq(),w=Math.abs(1-g*g);let S,E,L,G;if(w>0)if(S=g*y-_,E=g*_-y,G=d*w,S>=0)if(E>=-G)if(E<=G){const j=1/w;S*=j,E*=j,L=S*(S+g*E+2*_)+E*(g*S+E+2*y)+b}else E=d,S=Math.max(0,-(g*E+_)),L=-S*S+E*(E+2*y)+b;else E=-d,S=Math.max(0,-(g*E+_)),L=-S*S+E*(E+2*y)+b;else E<=-G?(S=Math.max(0,-(-g*d+_)),E=S>0?-d:Math.min(Math.max(-d,-y),d),L=-S*S+E*(E+2*y)+b):E<=G?(S=0,E=Math.min(Math.max(-d,-y),d),L=E*(E+2*y)+b):(S=Math.max(0,-(g*d+_)),E=S>0?d:Math.min(Math.max(-d,-y),d),L=-S*S+E*(E+2*y)+b);else E=g>0?-d:d,S=Math.max(0,-(g*E+_)),L=-S*S+E*(E+2*y)+b;return i&&i.copy(this.direction).multiplyScalar(S).add(this.origin),a&&a.copy(Wt).multiplyScalar(E).add(ze),L}intersectSphere(e,t){De.subVectors(e.center,this.origin);const i=De.dot(this.direction),a=De.dot(De)-i*i,d=e.radius*e.radius;if(a>d)return null;const g=Math.sqrt(d-a),_=i-g,y=i+g;return _<0&&y<0?null:this.at(_<0?y:_,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return null===i?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,a,d,g,_,y;const b=1/this.direction.x,w=1/this.direction.y,S=1/this.direction.z,E=this.origin;return b>=0?(i=(e.min.x-E.x)*b,a=(e.max.x-E.x)*b):(i=(e.max.x-E.x)*b,a=(e.min.x-E.x)*b),w>=0?(d=(e.min.y-E.y)*w,g=(e.max.y-E.y)*w):(d=(e.max.y-E.y)*w,g=(e.min.y-E.y)*w),i>g||d>a||((d>i||isNaN(i))&&(i=d),(g<a||isNaN(a))&&(a=g),S>=0?(_=(e.min.z-E.z)*S,y=(e.max.z-E.z)*S):(_=(e.max.z-E.z)*S,y=(e.min.z-E.z)*S),i>y||_>a)||((_>i||i!=i)&&(i=_),(y<a||a!=a)&&(a=y),a<0)?null:this.at(i>=0?i:a,t)}intersectsBox(e){return null!==this.intersectBox(e,De)}intersectTriangle(e,t,i,a,d){Sn.subVectors(t,e),xn.subVectors(i,e),On.crossVectors(Sn,xn);let _,g=this.direction.dot(On);if(g>0){if(a)return null;_=1}else{if(!(g<0))return null;_=-1,g=-g}bn.subVectors(this.origin,e);const y=_*this.direction.dot(xn.crossVectors(bn,xn));if(y<0)return null;const b=_*this.direction.dot(Sn.cross(bn));if(b<0||y+b>g)return null;const w=-_*bn.dot(On);return w<0?null:this.at(w/g,d)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Rt{constructor(){Rt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,i,a,d,g,_,y,b,w,S,E,L,G,j,B){const z=this.elements;return z[0]=e,z[4]=t,z[8]=i,z[12]=a,z[1]=d,z[5]=g,z[9]=_,z[13]=y,z[2]=b,z[6]=w,z[10]=S,z[14]=E,z[3]=L,z[7]=G,z[11]=j,z[15]=B,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Rt).fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,a=1/Vn.setFromMatrixColumn(e,0).length(),d=1/Vn.setFromMatrixColumn(e,1).length(),g=1/Vn.setFromMatrixColumn(e,2).length();return t[0]=i[0]*a,t[1]=i[1]*a,t[2]=i[2]*a,t[3]=0,t[4]=i[4]*d,t[5]=i[5]*d,t[6]=i[6]*d,t[7]=0,t[8]=i[8]*g,t[9]=i[9]*g,t[10]=i[10]*g,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,a=e.y,d=e.z,g=Math.cos(i),_=Math.sin(i),y=Math.cos(a),b=Math.sin(a),w=Math.cos(d),S=Math.sin(d);if("XYZ"===e.order){const E=g*w,L=g*S,G=_*w,j=_*S;t[0]=y*w,t[4]=-y*S,t[8]=b,t[1]=L+G*b,t[5]=E-j*b,t[9]=-_*y,t[2]=j-E*b,t[6]=G+L*b,t[10]=g*y}else if("YXZ"===e.order){const E=y*w,L=y*S,G=b*w,j=b*S;t[0]=E+j*_,t[4]=G*_-L,t[8]=g*b,t[1]=g*S,t[5]=g*w,t[9]=-_,t[2]=L*_-G,t[6]=j+E*_,t[10]=g*y}else if("ZXY"===e.order){const E=y*w,L=y*S,G=b*w,j=b*S;t[0]=E-j*_,t[4]=-g*S,t[8]=G+L*_,t[1]=L+G*_,t[5]=g*w,t[9]=j-E*_,t[2]=-g*b,t[6]=_,t[10]=g*y}else if("ZYX"===e.order){const E=g*w,L=g*S,G=_*w,j=_*S;t[0]=y*w,t[4]=G*b-L,t[8]=E*b+j,t[1]=y*S,t[5]=j*b+E,t[9]=L*b-G,t[2]=-b,t[6]=_*y,t[10]=g*y}else if("YZX"===e.order){const E=g*y,L=g*b,G=_*y,j=_*b;t[0]=y*w,t[4]=j-E*S,t[8]=G*S+L,t[1]=S,t[5]=g*w,t[9]=-_*w,t[2]=-b*w,t[6]=L*S+G,t[10]=E-j*S}else if("XZY"===e.order){const E=g*y,L=g*b,G=_*y,j=_*b;t[0]=y*w,t[4]=-S,t[8]=b*w,t[1]=E*S+j,t[5]=g*w,t[9]=L*S-G,t[2]=G*S-L,t[6]=_*w,t[10]=j*S+E}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Mi,e,Ss)}lookAt(e,t,i){const a=this.elements;return ji.subVectors(e,t),0===ji.lengthSq()&&(ji.z=1),ji.normalize(),Qi.crossVectors(i,ji),0===Qi.lengthSq()&&(1===Math.abs(i.z)?ji.x+=1e-4:ji.z+=1e-4,ji.normalize(),Qi.crossVectors(i,ji)),Qi.normalize(),Vr.crossVectors(ji,Qi),a[0]=Qi.x,a[4]=Vr.x,a[8]=ji.x,a[1]=Qi.y,a[5]=Vr.y,a[9]=ji.y,a[2]=Qi.z,a[6]=Vr.z,a[10]=ji.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,a=t.elements,d=this.elements,g=i[0],_=i[4],y=i[8],b=i[12],w=i[1],S=i[5],E=i[9],L=i[13],G=i[2],j=i[6],B=i[10],z=i[14],J=i[3],H=i[7],Y=i[11],ne=i[15],ae=a[0],he=a[4],Z=a[8],ue=a[12],me=a[1],Le=a[5],at=a[9],Ee=a[13],Me=a[2],qe=a[6],ut=a[10],Tt=a[14],ot=a[3],Dt=a[7],gt=a[11],We=a[15];return d[0]=g*ae+_*me+y*Me+b*ot,d[4]=g*he+_*Le+y*qe+b*Dt,d[8]=g*Z+_*at+y*ut+b*gt,d[12]=g*ue+_*Ee+y*Tt+b*We,d[1]=w*ae+S*me+E*Me+L*ot,d[5]=w*he+S*Le+E*qe+L*Dt,d[9]=w*Z+S*at+E*ut+L*gt,d[13]=w*ue+S*Ee+E*Tt+L*We,d[2]=G*ae+j*me+B*Me+z*ot,d[6]=G*he+j*Le+B*qe+z*Dt,d[10]=G*Z+j*at+B*ut+z*gt,d[14]=G*ue+j*Ee+B*Tt+z*We,d[3]=J*ae+H*me+Y*Me+ne*ot,d[7]=J*he+H*Le+Y*qe+ne*Dt,d[11]=J*Z+H*at+Y*ut+ne*gt,d[15]=J*ue+H*Ee+Y*Tt+ne*We,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],a=e[8],d=e[12],g=e[1],_=e[5],y=e[9],b=e[13],w=e[2],S=e[6],E=e[10],L=e[14];return e[3]*(+d*y*S-a*b*S-d*_*E+i*b*E+a*_*L-i*y*L)+e[7]*(+t*y*L-t*b*E+d*g*E-a*g*L+a*b*w-d*y*w)+e[11]*(+t*b*S-t*_*L-d*g*S+i*g*L+d*_*w-i*b*w)+e[15]*(-a*_*w-t*y*S+t*_*E+a*g*S-i*g*E+i*y*w)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const a=this.elements;return e.isVector3?(a[12]=e.x,a[13]=e.y,a[14]=e.z):(a[12]=e,a[13]=t,a[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],a=e[2],d=e[3],g=e[4],_=e[5],y=e[6],b=e[7],w=e[8],S=e[9],E=e[10],L=e[11],G=e[12],j=e[13],B=e[14],z=e[15],J=S*B*b-j*E*b+j*y*L-_*B*L-S*y*z+_*E*z,H=G*E*b-w*B*b-G*y*L+g*B*L+w*y*z-g*E*z,Y=w*j*b-G*S*b+G*_*L-g*j*L-w*_*z+g*S*z,ne=G*S*y-w*j*y-G*_*E+g*j*E+w*_*B-g*S*B,ae=t*J+i*H+a*Y+d*ne;if(0===ae)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const he=1/ae;return e[0]=J*he,e[1]=(j*E*d-S*B*d-j*a*L+i*B*L+S*a*z-i*E*z)*he,e[2]=(_*B*d-j*y*d+j*a*b-i*B*b-_*a*z+i*y*z)*he,e[3]=(S*y*d-_*E*d-S*a*b+i*E*b+_*a*L-i*y*L)*he,e[4]=H*he,e[5]=(w*B*d-G*E*d+G*a*L-t*B*L-w*a*z+t*E*z)*he,e[6]=(G*y*d-g*B*d-G*a*b+t*B*b+g*a*z-t*y*z)*he,e[7]=(g*E*d-w*y*d+w*a*b-t*E*b-g*a*L+t*y*L)*he,e[8]=Y*he,e[9]=(G*S*d-w*j*d-G*i*L+t*j*L+w*i*z-t*S*z)*he,e[10]=(g*j*d-G*_*d+G*i*b-t*j*b-g*i*z+t*_*z)*he,e[11]=(w*_*d-g*S*d-w*i*b+t*S*b+g*i*L-t*_*L)*he,e[12]=ne*he,e[13]=(w*j*a-G*S*a+G*i*E-t*j*E-w*i*B+t*S*B)*he,e[14]=(G*_*a-g*j*a-G*i*y+t*j*y+g*i*B-t*_*B)*he,e[15]=(g*S*a-w*_*a+w*i*y-t*S*y-g*i*E+t*_*E)*he,this}scale(e){const t=this.elements,i=e.x,a=e.y,d=e.z;return t[0]*=i,t[4]*=a,t[8]*=d,t[1]*=i,t[5]*=a,t[9]*=d,t[2]*=i,t[6]*=a,t[10]*=d,t[3]*=i,t[7]*=a,t[11]*=d,this}getMaxScaleOnAxis(){const e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))}makeTranslation(e,t,i){return this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),a=Math.sin(t),d=1-i,g=e.x,_=e.y,y=e.z,b=d*g,w=d*_;return this.set(b*g+i,b*_-a*y,b*y+a*_,0,b*_+a*y,w*_+i,w*y-a*g,0,b*y-a*_,w*y+a*g,d*y*y+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,a,d,g){return this.set(1,i,d,0,e,1,g,0,t,a,1,0,0,0,0,1),this}compose(e,t,i){const a=this.elements,d=t._x,g=t._y,_=t._z,y=t._w,b=d+d,w=g+g,S=_+_,E=d*b,L=d*w,G=d*S,j=g*w,B=g*S,z=_*S,J=y*b,H=y*w,Y=y*S,ne=i.x,ae=i.y,he=i.z;return a[0]=(1-(j+z))*ne,a[1]=(L+Y)*ne,a[2]=(G-H)*ne,a[3]=0,a[4]=(L-Y)*ae,a[5]=(1-(E+z))*ae,a[6]=(B+J)*ae,a[7]=0,a[8]=(G+H)*he,a[9]=(B-J)*he,a[10]=(1-(E+j))*he,a[11]=0,a[12]=e.x,a[13]=e.y,a[14]=e.z,a[15]=1,this}decompose(e,t,i){const a=this.elements;let d=Vn.set(a[0],a[1],a[2]).length();const g=Vn.set(a[4],a[5],a[6]).length(),_=Vn.set(a[8],a[9],a[10]).length();this.determinant()<0&&(d=-d),e.x=a[12],e.y=a[13],e.z=a[14],fi.copy(this);const b=1/d,w=1/g,S=1/_;return fi.elements[0]*=b,fi.elements[1]*=b,fi.elements[2]*=b,fi.elements[4]*=w,fi.elements[5]*=w,fi.elements[6]*=w,fi.elements[8]*=S,fi.elements[9]*=S,fi.elements[10]*=S,t.setFromRotationMatrix(fi),i.x=d,i.y=g,i.z=_,this}makePerspective(e,t,i,a,d,g){const _=this.elements,b=2*d/(i-a),w=(t+e)/(t-e),S=(i+a)/(i-a),E=-(g+d)/(g-d),L=-2*g*d/(g-d);return _[0]=2*d/(t-e),_[4]=0,_[8]=w,_[12]=0,_[1]=0,_[5]=b,_[9]=S,_[13]=0,_[2]=0,_[6]=0,_[10]=E,_[14]=L,_[3]=0,_[7]=0,_[11]=-1,_[15]=0,this}makeOrthographic(e,t,i,a,d,g){const _=this.elements,y=1/(t-e),b=1/(i-a),w=1/(g-d),S=(t+e)*y,E=(i+a)*b,L=(g+d)*w;return _[0]=2*y,_[4]=0,_[8]=0,_[12]=-S,_[1]=0,_[5]=2*b,_[9]=0,_[13]=-E,_[2]=0,_[6]=0,_[10]=-2*w,_[14]=-L,_[3]=0,_[7]=0,_[11]=0,_[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let a=0;a<16;a++)if(t[a]!==i[a])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const Vn=new ie,fi=new Rt,Mi=new ie(0,0,0),Ss=new ie(1,1,1),Qi=new ie,Vr=new ie,ji=new ie,Cs=new Rt,Kl=new gr;let Fa=(()=>{class h{constructor(t=0,i=0,a=0,d=h.DefaultOrder){this.isEuler=!0,this._x=t,this._y=i,this._z=a,this._order=d}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,i,a,d=this._order){return this._x=t,this._y=i,this._z=a,this._order=d,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,i=this._order,a=!0){const d=t.elements,g=d[0],_=d[4],y=d[8],b=d[1],w=d[5],S=d[9],E=d[2],L=d[6],G=d[10];switch(i){case"XYZ":this._y=Math.asin(Ti(y,-1,1)),Math.abs(y)<.9999999?(this._x=Math.atan2(-S,G),this._z=Math.atan2(-_,g)):(this._x=Math.atan2(L,w),this._z=0);break;case"YXZ":this._x=Math.asin(-Ti(S,-1,1)),Math.abs(S)<.9999999?(this._y=Math.atan2(y,G),this._z=Math.atan2(b,w)):(this._y=Math.atan2(-E,g),this._z=0);break;case"ZXY":this._x=Math.asin(Ti(L,-1,1)),Math.abs(L)<.9999999?(this._y=Math.atan2(-E,G),this._z=Math.atan2(-_,w)):(this._y=0,this._z=Math.atan2(b,g));break;case"ZYX":this._y=Math.asin(-Ti(E,-1,1)),Math.abs(E)<.9999999?(this._x=Math.atan2(L,G),this._z=Math.atan2(b,g)):(this._x=0,this._z=Math.atan2(-_,w));break;case"YZX":this._z=Math.asin(Ti(b,-1,1)),Math.abs(b)<.9999999?(this._x=Math.atan2(-S,w),this._y=Math.atan2(-E,g)):(this._x=0,this._y=Math.atan2(y,G));break;case"XZY":this._z=Math.asin(-Ti(_,-1,1)),Math.abs(_)<.9999999?(this._x=Math.atan2(L,w),this._y=Math.atan2(y,g)):(this._x=Math.atan2(-S,G),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+i)}return this._order=i,!0===a&&this._onChangeCallback(),this}setFromQuaternion(t,i,a){return Cs.makeRotationFromQuaternion(t),this.setFromRotationMatrix(Cs,i,a)}setFromVector3(t,i=this._order){return this.set(t.x,t.y,t.z,i)}reorder(t){return Kl.setFromEuler(this),this.setFromQuaternion(Kl,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],i=0){return t[i]=this._x,t[i+1]=this._y,t[i+2]=this._z,t[i+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}return h.DefaultOrder="XYZ",h.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],h})();class fl{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}isEnabled(e){return 0!=(this.mask&(1<<e|0))}}let Td=0;const pl=new ie,ua=new gr,Es=new Rt,ml=new ie,gl=new ie,Md=new ie,wu=new gr,Js=new ie(1,0,0),xd=new ie(0,1,0),Xl=new ie(0,0,1),Ru={type:"added"},Pi={type:"removed"};let ir=(()=>{class h extends co{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Td++}),this.uuid=Jr(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=h.DefaultUp.clone();const t=new ie,i=new Fa,a=new gr,d=new ie(1,1,1);i._onChange(function g(){a.setFromEuler(i,!1)}),a._onChange(function _(){i.setFromQuaternion(a,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:i},quaternion:{configurable:!0,enumerable:!0,value:a},scale:{configurable:!0,enumerable:!0,value:d},modelViewMatrix:{value:new Rt},normalMatrix:{value:new Fn}}),this.matrix=new Rt,this.matrixWorld=new Rt,this.matrixAutoUpdate=h.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=h.DefaultMatrixWorldAutoUpdate,this.layers=new fl,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,i){this.quaternion.setFromAxisAngle(t,i)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,i){return ua.setFromAxisAngle(t,i),this.quaternion.multiply(ua),this}rotateOnWorldAxis(t,i){return ua.setFromAxisAngle(t,i),this.quaternion.premultiply(ua),this}rotateX(t){return this.rotateOnAxis(Js,t)}rotateY(t){return this.rotateOnAxis(xd,t)}rotateZ(t){return this.rotateOnAxis(Xl,t)}translateOnAxis(t,i){return pl.copy(t).applyQuaternion(this.quaternion),this.position.add(pl.multiplyScalar(i)),this}translateX(t){return this.translateOnAxis(Js,t)}translateY(t){return this.translateOnAxis(xd,t)}translateZ(t){return this.translateOnAxis(Xl,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(Es.copy(this.matrixWorld).invert())}lookAt(t,i,a){t.isVector3?ml.copy(t):ml.set(t,i,a);const d=this.parent;this.updateWorldMatrix(!0,!1),gl.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Es.lookAt(gl,ml,this.up):Es.lookAt(ml,gl,this.up),this.quaternion.setFromRotationMatrix(Es),d&&(Es.extractRotation(d.matrixWorld),ua.setFromRotationMatrix(Es),this.quaternion.premultiply(ua.invert()))}add(t){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.add(arguments[i]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(Ru)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let a=0;a<arguments.length;a++)this.remove(arguments[a]);return this}const i=this.children.indexOf(t);return-1!==i&&(t.parent=null,this.children.splice(i,1),t.dispatchEvent(Pi)),this}removeFromParent(){const t=this.parent;return null!==t&&t.remove(this),this}clear(){for(let t=0;t<this.children.length;t++){const i=this.children[t];i.parent=null,i.dispatchEvent(Pi)}return this.children.length=0,this}attach(t){return this.updateWorldMatrix(!0,!1),Es.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),Es.multiply(t.parent.matrixWorld)),t.applyMatrix4(Es),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,i){if(this[t]===i)return this;for(let a=0,d=this.children.length;a<d;a++){const _=this.children[a].getObjectByProperty(t,i);if(void 0!==_)return _}}getObjectsByProperty(t,i){let a=[];this[t]===i&&a.push(this);for(let d=0,g=this.children.length;d<g;d++){const _=this.children[d].getObjectsByProperty(t,i);_.length>0&&(a=a.concat(_))}return a}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(gl,t,Md),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(gl,wu,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const i=this.matrixWorld.elements;return t.set(i[8],i[9],i[10]).normalize()}raycast(){}traverse(t){t(this);const i=this.children;for(let a=0,d=i.length;a<d;a++)i[a].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);const i=this.children;for(let a=0,d=i.length;a<d;a++)i[a].traverseVisible(t)}traverseAncestors(t){const i=this.parent;null!==i&&(t(i),i.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const i=this.children;for(let a=0,d=i.length;a<d;a++){const g=i[a];(!0===g.matrixWorldAutoUpdate||!0===t)&&g.updateMatrixWorld(t)}}updateWorldMatrix(t,i){const a=this.parent;if(!0===t&&null!==a&&!0===a.matrixWorldAutoUpdate&&a.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===i){const d=this.children;for(let g=0,_=d.length;g<_;g++){const y=d[g];!0===y.matrixWorldAutoUpdate&&y.updateWorldMatrix(!1,!0)}}}toJSON(t){const i=void 0===t||"string"==typeof t,a={};i&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},a.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const d={};function g(y,b){return void 0===y[b.uuid]&&(y[b.uuid]=b.toJSON(t)),b.uuid}if(d.uuid=this.uuid,d.type=this.type,""!==this.name&&(d.name=this.name),!0===this.castShadow&&(d.castShadow=!0),!0===this.receiveShadow&&(d.receiveShadow=!0),!1===this.visible&&(d.visible=!1),!1===this.frustumCulled&&(d.frustumCulled=!1),0!==this.renderOrder&&(d.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(d.userData=this.userData),d.layers=this.layers.mask,d.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(d.matrixAutoUpdate=!1),this.isInstancedMesh&&(d.type="InstancedMesh",d.count=this.count,d.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(d.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?d.background=this.background.toJSON():this.background.isTexture&&(d.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(d.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){d.geometry=g(t.geometries,this.geometry);const y=this.geometry.parameters;if(void 0!==y&&void 0!==y.shapes){const b=y.shapes;if(Array.isArray(b))for(let w=0,S=b.length;w<S;w++)g(t.shapes,b[w]);else g(t.shapes,b)}}if(this.isSkinnedMesh&&(d.bindMode=this.bindMode,d.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(g(t.skeletons,this.skeleton),d.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const y=[];for(let b=0,w=this.material.length;b<w;b++)y.push(g(t.materials,this.material[b]));d.material=y}else d.material=g(t.materials,this.material);if(this.children.length>0){d.children=[];for(let y=0;y<this.children.length;y++)d.children.push(this.children[y].toJSON(t).object)}if(this.animations.length>0){d.animations=[];for(let y=0;y<this.animations.length;y++)d.animations.push(g(t.animations,this.animations[y]))}if(i){const y=_(t.geometries),b=_(t.materials),w=_(t.textures),S=_(t.images),E=_(t.shapes),L=_(t.skeletons),G=_(t.animations),j=_(t.nodes);y.length>0&&(a.geometries=y),b.length>0&&(a.materials=b),w.length>0&&(a.textures=w),S.length>0&&(a.images=S),E.length>0&&(a.shapes=E),L.length>0&&(a.skeletons=L),G.length>0&&(a.animations=G),j.length>0&&(a.nodes=j)}return a.object=d,a;function _(y){const b=[];for(const w in y){const S=y[w];delete S.metadata,b.push(S)}return b}}clone(t){return(new this.constructor).copy(this,t)}copy(t,i=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===i)for(let a=0;a<t.children.length;a++)this.add(t.children[a].clone());return this}}return h.DefaultUp=new ie(0,1,0),h.DefaultMatrixAutoUpdate=!0,h.DefaultMatrixWorldAutoUpdate=!0,h})();const Ni=new ie,Zs=new ie,Ks=new ie,Fr=new ie,Ho=new ie,Xs=new ie,zc=new ie,zo=new ie,Kr=new ie,Lr=new ie;class ls{constructor(e=new ie,t=new ie,i=new ie){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,a){a.subVectors(i,t),Ni.subVectors(e,t),a.cross(Ni);const d=a.lengthSq();return d>0?a.multiplyScalar(1/Math.sqrt(d)):a.set(0,0,0)}static getBarycoord(e,t,i,a,d){Ni.subVectors(a,t),Zs.subVectors(i,t),Ks.subVectors(e,t);const g=Ni.dot(Ni),_=Ni.dot(Zs),y=Ni.dot(Ks),b=Zs.dot(Zs),w=Zs.dot(Ks),S=g*b-_*_;if(0===S)return d.set(-2,-1,-1);const E=1/S,L=(b*y-_*w)*E,G=(g*w-_*y)*E;return d.set(1-L-G,G,L)}static containsPoint(e,t,i,a){return this.getBarycoord(e,t,i,a,Fr),Fr.x>=0&&Fr.y>=0&&Fr.x+Fr.y<=1}static getUV(e,t,i,a,d,g,_,y){return this.getBarycoord(e,t,i,a,Fr),y.set(0,0),y.addScaledVector(d,Fr.x),y.addScaledVector(g,Fr.y),y.addScaledVector(_,Fr.z),y}static isFrontFacing(e,t,i,a){return Ni.subVectors(i,t),Zs.subVectors(e,t),Ni.cross(Zs).dot(a)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,a){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[a]),this}setFromAttributeAndIndices(e,t,i,a){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,a),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Ni.subVectors(this.c,this.b),Zs.subVectors(this.a,this.b),.5*Ni.cross(Zs).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return ls.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return ls.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,i,a,d){return ls.getUV(e,this.a,this.b,this.c,t,i,a,d)}containsPoint(e){return ls.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return ls.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,a=this.b,d=this.c;let g,_;Ho.subVectors(a,i),Xs.subVectors(d,i),zo.subVectors(e,i);const y=Ho.dot(zo),b=Xs.dot(zo);if(y<=0&&b<=0)return t.copy(i);Kr.subVectors(e,a);const w=Ho.dot(Kr),S=Xs.dot(Kr);if(w>=0&&S<=w)return t.copy(a);const E=y*S-w*b;if(E<=0&&y>=0&&w<=0)return g=y/(y-w),t.copy(i).addScaledVector(Ho,g);Lr.subVectors(e,d);const L=Ho.dot(Lr),G=Xs.dot(Lr);if(G>=0&&L<=G)return t.copy(d);const j=L*b-y*G;if(j<=0&&b>=0&&G<=0)return _=b/(b-G),t.copy(i).addScaledVector(Xs,_);const B=w*G-L*S;if(B<=0&&S-w>=0&&L-G>=0)return zc.subVectors(d,a),_=(S-w)/(S-w+(L-G)),t.copy(a).addScaledVector(zc,_);const z=1/(B+j+E);return g=j*z,_=E*z,t.copy(i).addScaledVector(Ho,g).addScaledVector(Xs,_)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let La=0;class _r extends co{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:La++}),this.uuid=Jr(),this.name="",this.type="Material",this.blending=dt,this.side=en,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=bt,this.blendDst=yt,this.blendEquation=Zt,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=ln,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const i=e[t];if(void 0===i){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}const a=this[t];void 0!==a?a&&a.isColor?a.set(i):a&&a.isVector3&&i&&i.isVector3?a.copy(i):this[t]=i:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function a(d){const g=[];for(const _ in d){const y=d[_];delete y.metadata,g.push(y)}return g}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),void 0!==this.roughness&&(i.roughness=this.roughness),void 0!==this.metalness&&(i.metalness=this.metalness),void 0!==this.sheen&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(i.shininess=this.shininess),void 0!==this.clearcoat&&(i.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(i.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(i.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(i.combine=this.combine)),void 0!==this.envMapIntensity&&(i.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(i.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(i.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(i.size=this.size),null!==this.shadowSide&&(i.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==dt&&(i.blending=this.blending),this.side!==en&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),!0===this.transparent&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(i.rotation=this.rotation),!0===this.polygonOffset&&(i.polygonOffset=!0),0!==this.polygonOffsetFactor&&(i.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(i.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(i.linewidth=this.linewidth),void 0!==this.dashSize&&(i.dashSize=this.dashSize),void 0!==this.gapSize&&(i.gapSize=this.gapSize),void 0!==this.scale&&(i.scale=this.scale),!0===this.dithering&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(i.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(i.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(i.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(i.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(i.flatShading=this.flatShading),!1===this.visible&&(i.visible=!1),!1===this.toneMapped&&(i.toneMapped=!1),!1===this.fog&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData),t){const d=a(e.textures),g=a(e.images);d.length>0&&(i.textures=d),g.length>0&&(i.images=g)}return i}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(null!==t){const a=t.length;i=new Array(a);for(let d=0;d!==a;++d)i[d]=t[d].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}class da extends _r{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Yt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=io,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Ln=new ie,Qs=new st;class rr{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=i,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let a=0,d=this.itemSize;a<d;a++)this.array[e+a]=t.array[i+a];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,i=this.count;t<i;t++)Qs.fromBufferAttribute(this,t),Qs.applyMatrix3(e),this.setXY(t,Qs.x,Qs.y);else if(3===this.itemSize)for(let t=0,i=this.count;t<i;t++)Ln.fromBufferAttribute(this,t),Ln.applyMatrix3(e),this.setXYZ(t,Ln.x,Ln.y,Ln.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)Ln.fromBufferAttribute(this,t),Ln.applyMatrix4(e),this.setXYZ(t,Ln.x,Ln.y,Ln.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Ln.fromBufferAttribute(this,t),Ln.applyNormalMatrix(e),this.setXYZ(t,Ln.x,Ln.y,Ln.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Ln.fromBufferAttribute(this,t),Ln.transformDirection(e),this.setXYZ(t,Ln.x,Ln.y,Ln.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=nn(t,this.array)),t}setX(e,t){return this.normalized&&(t=ai(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=nn(t,this.array)),t}setY(e,t){return this.normalized&&(t=ai(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=nn(t,this.array)),t}setZ(e,t){return this.normalized&&(t=ai(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=nn(t,this.array)),t}setW(e,t){return this.normalized&&(t=ai(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=ai(t,this.array),i=ai(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,a){return e*=this.itemSize,this.normalized&&(t=ai(t,this.array),i=ai(i,this.array),a=ai(a,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=a,this}setXYZW(e,t,i,a,d){return e*=this.itemSize,this.normalized&&(t=ai(t,this.array),i=ai(i,this.array),a=ai(a,this.array),d=ai(d,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=a,this.array[e+3]=d,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),35044!==this.usage&&(e.usage=this.usage),(0!==this.updateRange.offset||-1!==this.updateRange.count)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class Wo extends rr{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class tc extends rr{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class Xt extends rr{constructor(e,t,i){super(new Float32Array(e),t,i)}}let ki=0;const yo=new Rt,vl=new ir,eo=new ie,As=new _o,yl=new _o,xr=new ie;class Nn extends co{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:ki++}),this.uuid=Jr(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return this.index=Array.isArray(e)?new(Yl(e)?tc:Wo)(e,1):e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(void 0!==i){const d=(new Fn).getNormalMatrix(e);i.applyNormalMatrix(d),i.needsUpdate=!0}const a=this.attributes.tangent;return void 0!==a&&(a.transformDirection(e),a.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return yo.makeRotationFromQuaternion(e),this.applyMatrix4(yo),this}rotateX(e){return yo.makeRotationX(e),this.applyMatrix4(yo),this}rotateY(e){return yo.makeRotationY(e),this.applyMatrix4(yo),this}rotateZ(e){return yo.makeRotationZ(e),this.applyMatrix4(yo),this}translate(e,t,i){return yo.makeTranslation(e,t,i),this.applyMatrix4(yo),this}scale(e,t,i){return yo.makeScale(e,t,i),this.applyMatrix4(yo),this}lookAt(e){return vl.lookAt(e),vl.updateMatrix(),this.applyMatrix4(vl.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(eo).negate(),this.translate(eo.x,eo.y,eo.z),this}setFromPoints(e){const t=[];for(let i=0,a=e.length;i<a;i++){const d=e[i];t.push(d.x,d.y,d.z||0)}return this.setAttribute("position",new Xt(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new _o);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new ie(-1/0,-1/0,-1/0),new ie(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,a=t.length;i<a;i++)As.setFromBufferAttribute(t[i]),this.morphTargetsRelative?(xr.addVectors(this.boundingBox.min,As.min),this.boundingBox.expandByPoint(xr),xr.addVectors(this.boundingBox.max,As.max),this.boundingBox.expandByPoint(xr)):(this.boundingBox.expandByPoint(As.min),this.boundingBox.expandByPoint(As.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new oe);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new ie,1/0);if(e){const i=this.boundingSphere.center;if(As.setFromBufferAttribute(e),t)for(let d=0,g=t.length;d<g;d++)yl.setFromBufferAttribute(t[d]),this.morphTargetsRelative?(xr.addVectors(As.min,yl.min),As.expandByPoint(xr),xr.addVectors(As.max,yl.max),As.expandByPoint(xr)):(As.expandByPoint(yl.min),As.expandByPoint(yl.max));As.getCenter(i);let a=0;for(let d=0,g=e.count;d<g;d++)xr.fromBufferAttribute(e,d),a=Math.max(a,i.distanceToSquared(xr));if(t)for(let d=0,g=t.length;d<g;d++){const _=t[d],y=this.morphTargetsRelative;for(let b=0,w=_.count;b<w;b++)xr.fromBufferAttribute(_,b),y&&(eo.fromBufferAttribute(e,b),xr.add(eo)),a=Math.max(a,i.distanceToSquared(xr))}this.boundingSphere.radius=Math.sqrt(a),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const i=e.array,a=t.position.array,d=t.normal.array,g=t.uv.array,_=a.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new rr(new Float32Array(4*_),4));const y=this.getAttribute("tangent").array,b=[],w=[];for(let me=0;me<_;me++)b[me]=new ie,w[me]=new ie;const S=new ie,E=new ie,L=new ie,G=new st,j=new st,B=new st,z=new ie,J=new ie;function H(me,Le,at){S.fromArray(a,3*me),E.fromArray(a,3*Le),L.fromArray(a,3*at),G.fromArray(g,2*me),j.fromArray(g,2*Le),B.fromArray(g,2*at),E.sub(S),L.sub(S),j.sub(G),B.sub(G);const Ee=1/(j.x*B.y-B.x*j.y);isFinite(Ee)&&(z.copy(E).multiplyScalar(B.y).addScaledVector(L,-j.y).multiplyScalar(Ee),J.copy(L).multiplyScalar(j.x).addScaledVector(E,-B.x).multiplyScalar(Ee),b[me].add(z),b[Le].add(z),b[at].add(z),w[me].add(J),w[Le].add(J),w[at].add(J))}let Y=this.groups;0===Y.length&&(Y=[{start:0,count:i.length}]);for(let me=0,Le=Y.length;me<Le;++me){const at=Y[me],Ee=at.start;for(let qe=Ee,ut=Ee+at.count;qe<ut;qe+=3)H(i[qe+0],i[qe+1],i[qe+2])}const ne=new ie,ae=new ie,he=new ie,Z=new ie;function ue(me){he.fromArray(d,3*me),Z.copy(he);const Le=b[me];ne.copy(Le),ne.sub(he.multiplyScalar(he.dot(Le))).normalize(),ae.crossVectors(Z,Le);const Ee=ae.dot(w[me])<0?-1:1;y[4*me]=ne.x,y[4*me+1]=ne.y,y[4*me+2]=ne.z,y[4*me+3]=Ee}for(let me=0,Le=Y.length;me<Le;++me){const at=Y[me],Ee=at.start;for(let qe=Ee,ut=Ee+at.count;qe<ut;qe+=3)ue(i[qe+0]),ue(i[qe+1]),ue(i[qe+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let i=this.getAttribute("normal");if(void 0===i)i=new rr(new Float32Array(3*t.count),3),this.setAttribute("normal",i);else for(let E=0,L=i.count;E<L;E++)i.setXYZ(E,0,0,0);const a=new ie,d=new ie,g=new ie,_=new ie,y=new ie,b=new ie,w=new ie,S=new ie;if(e)for(let E=0,L=e.count;E<L;E+=3){const G=e.getX(E+0),j=e.getX(E+1),B=e.getX(E+2);a.fromBufferAttribute(t,G),d.fromBufferAttribute(t,j),g.fromBufferAttribute(t,B),w.subVectors(g,d),S.subVectors(a,d),w.cross(S),_.fromBufferAttribute(i,G),y.fromBufferAttribute(i,j),b.fromBufferAttribute(i,B),_.add(w),y.add(w),b.add(w),i.setXYZ(G,_.x,_.y,_.z),i.setXYZ(j,y.x,y.y,y.z),i.setXYZ(B,b.x,b.y,b.z)}else for(let E=0,L=t.count;E<L;E+=3)a.fromBufferAttribute(t,E+0),d.fromBufferAttribute(t,E+1),g.fromBufferAttribute(t,E+2),w.subVectors(g,d),S.subVectors(a,d),w.cross(S),i.setXYZ(E+0,w.x,w.y,w.z),i.setXYZ(E+1,w.x,w.y,w.z),i.setXYZ(E+2,w.x,w.y,w.z);this.normalizeNormals(),i.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)xr.fromBufferAttribute(e,t),xr.normalize(),e.setXYZ(t,xr.x,xr.y,xr.z)}toNonIndexed(){function e(_,y){const b=_.array,w=_.itemSize,S=_.normalized,E=new b.constructor(y.length*w);let L=0,G=0;for(let j=0,B=y.length;j<B;j++){L=_.isInterleavedBufferAttribute?y[j]*_.data.stride+_.offset:y[j]*w;for(let z=0;z<w;z++)E[G++]=b[L++]}return new rr(E,w,S)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Nn,i=this.index.array,a=this.attributes;for(const _ in a){const b=e(a[_],i);t.setAttribute(_,b)}const d=this.morphAttributes;for(const _ in d){const y=[],b=d[_];for(let w=0,S=b.length;w<S;w++){const L=e(b[w],i);y.push(L)}t.morphAttributes[_]=y}t.morphTargetsRelative=this.morphTargetsRelative;const g=this.groups;for(let _=0,y=g.length;_<y;_++){const b=g[_];t.addGroup(b.start,b.count,b.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const y=this.parameters;for(const b in y)void 0!==y[b]&&(e[b]=y[b]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const y in i)e.data.attributes[y]=i[y].toJSON(e.data);const a={};let d=!1;for(const y in this.morphAttributes){const b=this.morphAttributes[y],w=[];for(let S=0,E=b.length;S<E;S++)w.push(b[S].toJSON(e.data));w.length>0&&(a[y]=w,d=!0)}d&&(e.data.morphAttributes=a,e.data.morphTargetsRelative=this.morphTargetsRelative);const g=this.groups;g.length>0&&(e.data.groups=JSON.parse(JSON.stringify(g)));const _=this.boundingSphere;return null!==_&&(e.data.boundingSphere={center:_.center.toArray(),radius:_.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;null!==i&&this.setIndex(i.clone(t));const a=e.attributes;for(const b in a)this.setAttribute(b,a[b].clone(t));const d=e.morphAttributes;for(const b in d){const w=[],S=d[b];for(let E=0,L=S.length;E<L;E++)w.push(S[E].clone(t));this.morphAttributes[b]=w}this.morphTargetsRelative=e.morphTargetsRelative;const g=e.groups;for(let b=0,w=g.length;b<w;b++){const S=g[b];this.addGroup(S.start,S.count,S.materialIndex)}const _=e.boundingBox;null!==_&&(this.boundingBox=_.clone());const y=e.boundingSphere;return null!==y&&(this.boundingSphere=y.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,void 0!==e.parameters&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const ha=new Rt,nc=new Ii,Dd=new oe,er=new ie,ka=new ie,$o=new ie,fa=new ie,Xr=new ie,to=new st,D=new st,R=new st,T=new ie,I=new ie;class V extends ir{constructor(e=new Nn,t=new da){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const a=t[i[0]];if(void 0!==a){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let d=0,g=a.length;d<g;d++){const _=a[d].name||String(d);this.morphTargetInfluences.push(0),this.morphTargetDictionary[_]=d}}}}getVertexPosition(e,t){const i=this.geometry,d=i.morphAttributes.position,g=i.morphTargetsRelative;t.fromBufferAttribute(i.attributes.position,e);const _=this.morphTargetInfluences;if(d&&_){Xr.set(0,0,0);for(let y=0,b=d.length;y<b;y++){const w=_[y];0!==w&&(fa.fromBufferAttribute(d[y],e),Xr.addScaledVector(g?fa:fa.sub(t),w))}t.add(Xr)}return this.isSkinnedMesh&&this.boneTransform(e,t),t}raycast(e,t){const i=this.geometry,a=this.material,d=this.matrixWorld;if(void 0===a||(null===i.boundingSphere&&i.computeBoundingSphere(),Dd.copy(i.boundingSphere),Dd.applyMatrix4(d),!1===e.ray.intersectsSphere(Dd))||(ha.copy(d).invert(),nc.copy(e.ray).applyMatrix4(ha),null!==i.boundingBox&&!1===nc.intersectsBox(i.boundingBox)))return;let g;const _=i.index,y=i.attributes.position,b=i.attributes.uv,w=i.attributes.uv2,S=i.groups,E=i.drawRange;if(null!==_)if(Array.isArray(a))for(let L=0,G=S.length;L<G;L++){const j=S[L],B=a[j.materialIndex];for(let H=Math.max(j.start,E.start),Y=Math.min(_.count,Math.min(j.start+j.count,E.start+E.count));H<Y;H+=3){const ne=_.getX(H),ae=_.getX(H+1),he=_.getX(H+2);g=X(this,B,e,nc,b,w,ne,ae,he),g&&(g.faceIndex=Math.floor(H/3),g.face.materialIndex=j.materialIndex,t.push(g))}}else for(let j=Math.max(0,E.start),B=Math.min(_.count,E.start+E.count);j<B;j+=3){const z=_.getX(j),J=_.getX(j+1),H=_.getX(j+2);g=X(this,a,e,nc,b,w,z,J,H),g&&(g.faceIndex=Math.floor(j/3),t.push(g))}else if(void 0!==y)if(Array.isArray(a))for(let L=0,G=S.length;L<G;L++){const j=S[L],B=a[j.materialIndex];for(let H=Math.max(j.start,E.start),Y=Math.min(y.count,Math.min(j.start+j.count,E.start+E.count));H<Y;H+=3)g=X(this,B,e,nc,b,w,H,H+1,H+2),g&&(g.faceIndex=Math.floor(H/3),g.face.materialIndex=j.materialIndex,t.push(g))}else for(let j=Math.max(0,E.start),B=Math.min(y.count,E.start+E.count);j<B;j+=3)g=X(this,a,e,nc,b,w,j,j+1,j+2),g&&(g.faceIndex=Math.floor(j/3),t.push(g))}}function X(h,e,t,i,a,d,g,_,y){h.getVertexPosition(g,er),h.getVertexPosition(_,ka),h.getVertexPosition(y,$o);const b=function q(h,e,t,i,a,d,g,_){let y;if(y=e.side===Kt?i.intersectTriangle(g,d,a,!0,_):i.intersectTriangle(a,d,g,e.side===en,_),null===y)return null;I.copy(_),I.applyMatrix4(h.matrixWorld);const b=t.ray.origin.distanceTo(I);return b<t.near||b>t.far?null:{distance:b,point:I.clone(),object:h}}(h,e,t,i,er,ka,$o,T);if(b){a&&(to.fromBufferAttribute(a,g),D.fromBufferAttribute(a,_),R.fromBufferAttribute(a,y),b.uv=ls.getUV(T,er,ka,$o,to,D,R,new st)),d&&(to.fromBufferAttribute(d,g),D.fromBufferAttribute(d,_),R.fromBufferAttribute(d,y),b.uv2=ls.getUV(T,er,ka,$o,to,D,R,new st));const w={a:g,b:_,c:y,normal:new ie,materialIndex:0};ls.getNormal(er,ka,$o,w.normal),b.face=w}return b}class fe extends Nn{constructor(e=1,t=1,i=1,a=1,d=1,g=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:a,heightSegments:d,depthSegments:g};const _=this;a=Math.floor(a),d=Math.floor(d),g=Math.floor(g);const y=[],b=[],w=[],S=[];let E=0,L=0;function G(j,B,z,J,H,Y,ne,ae,he,Z,ue){const me=Y/he,Le=ne/Z,at=Y/2,Ee=ne/2,Me=ae/2,qe=he+1,ut=Z+1;let Tt=0,ot=0;const Dt=new ie;for(let gt=0;gt<ut;gt++){const We=gt*Le-Ee;for(let $e=0;$e<qe;$e++)Dt[j]=($e*me-at)*J,Dt[B]=We*H,Dt[z]=Me,b.push(Dt.x,Dt.y,Dt.z),Dt[j]=0,Dt[B]=0,Dt[z]=ae>0?1:-1,w.push(Dt.x,Dt.y,Dt.z),S.push($e/he),S.push(1-gt/Z),Tt+=1}for(let gt=0;gt<Z;gt++)for(let We=0;We<he;We++){const Pt=E+We+qe*(gt+1),Et=E+(We+1)+qe*(gt+1),$t=E+(We+1)+qe*gt;y.push(E+We+qe*gt,Pt,$t),y.push(Pt,Et,$t),ot+=6}_.addGroup(L,ot,ue),L+=ot,E+=Tt}G("z","y","x",-1,-1,i,t,e,g,d,0),G("z","y","x",1,-1,i,t,-e,g,d,1),G("x","z","y",1,1,e,i,t,a,g,2),G("x","z","y",1,-1,e,i,-t,a,g,3),G("x","y","z",1,-1,e,t,i,a,d,4),G("x","y","z",-1,-1,e,t,-i,a,d,5),this.setIndex(y),this.setAttribute("position",new Xt(b,3)),this.setAttribute("normal",new Xt(w,3)),this.setAttribute("uv",new Xt(S,2))}static fromJSON(e){return new fe(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Ge(h){const e={};for(const t in h){e[t]={};for(const i in h[t]){const a=h[t][i];e[t][i]=a&&(a.isColor||a.isMatrix3||a.isMatrix4||a.isVector2||a.isVector3||a.isVector4||a.isTexture||a.isQuaternion)?a.clone():Array.isArray(a)?a.slice():a}}return e}function vt(h){const e={};for(let t=0;t<h.length;t++){const i=Ge(h[t]);for(const a in i)e[a]=i[a]}return e}function Un(h){return null===h.getRenderTarget()&&h.outputEncoding===hi?bi:Wi}const Dr={clone:Ge,merge:vt};class cs extends _r{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Ge(e.uniforms),this.uniformsGroups=function Ft(h){const e=[];for(let t=0;t<h.length;t++)e.push(h[t].clone());return e}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const a in this.uniforms){const g=this.uniforms[a].value;t.uniforms[a]=g&&g.isTexture?{type:"t",value:g.toJSON(e).uuid}:g&&g.isColor?{type:"c",value:g.getHex()}:g&&g.isVector2?{type:"v2",value:g.toArray()}:g&&g.isVector3?{type:"v3",value:g.toArray()}:g&&g.isVector4?{type:"v4",value:g.toArray()}:g&&g.isMatrix3?{type:"m3",value:g.toArray()}:g&&g.isMatrix4?{type:"m4",value:g.toArray()}:{value:g}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const i={};for(const a in this.extensions)!0===this.extensions[a]&&(i[a]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class Qr extends ir{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Rt,this.projectionMatrix=new Rt,this.projectionMatrixInverse=new Rt}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class Br extends Qr{constructor(e=50,t=1,i=.1,a=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=a,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*sa*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*uo*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*sa*Math.atan(Math.tan(.5*uo*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,i,a,d,g){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=a,this.view.width=d,this.view.height=g,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*uo*this.fov)/this.zoom,i=2*t,a=this.aspect*i,d=-.5*a;const g=this.view;if(null!==this.view&&this.view.enabled){const y=g.fullWidth,b=g.fullHeight;d+=g.offsetX*a/y,t-=g.offsetY*i/b,a*=g.width/y,i*=g.height/b}const _=this.filmOffset;0!==_&&(d+=e*_/this.getFilmWidth()),this.projectionMatrix.makePerspective(d,d+a,t,t-i,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}class Wc extends ir{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i;const a=new Br(-90,1,e,t);a.layers=this.layers,a.up.set(0,1,0),a.lookAt(1,0,0),this.add(a);const d=new Br(-90,1,e,t);d.layers=this.layers,d.up.set(0,1,0),d.lookAt(-1,0,0),this.add(d);const g=new Br(-90,1,e,t);g.layers=this.layers,g.up.set(0,0,-1),g.lookAt(0,1,0),this.add(g);const _=new Br(-90,1,e,t);_.layers=this.layers,_.up.set(0,0,1),_.lookAt(0,-1,0),this.add(_);const y=new Br(-90,1,e,t);y.layers=this.layers,y.up.set(0,1,0),y.lookAt(0,0,1),this.add(y);const b=new Br(-90,1,e,t);b.layers=this.layers,b.up.set(0,1,0),b.lookAt(0,0,-1),this.add(b)}update(e,t){null===this.parent&&this.updateMatrixWorld();const i=this.renderTarget,[a,d,g,_,y,b]=this.children,w=e.getRenderTarget(),S=e.toneMapping,E=e.xr.enabled;e.toneMapping=yi,e.xr.enabled=!1;const L=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0),e.render(t,a),e.setRenderTarget(i,1),e.render(t,d),e.setRenderTarget(i,2),e.render(t,g),e.setRenderTarget(i,3),e.render(t,_),e.setRenderTarget(i,4),e.render(t,y),i.texture.generateMipmaps=L,e.setRenderTarget(i,5),e.render(t,b),e.setRenderTarget(w),e.toneMapping=S,e.xr.enabled=E,i.texture.needsPMREMUpdate=!0}}class bl extends or{constructor(e,t,i,a,d,g,_,y,b,w){super(e=void 0!==e?e:[],t=void 0!==t?t:zr,i,a,d,g,_,y,b,w),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class lp extends po{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1};this.texture=new bl([i,i,i,i,i,i],t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:Ki}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i_uniforms={tEquirect:{value:null}},i_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",i_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",a=new fe(5,5,5),d=new cs({name:"CubemapFromEquirect",uniforms:Ge(i_uniforms),vertexShader:i_vertexShader,fragmentShader:i_fragmentShader,side:Kt,blending:Ne});d.uniforms.tEquirect.value=t;const g=new V(a,d),_=t.minFilter;return t.minFilter===dr&&(t.minFilter=Ki),new Wc(1,10,this).update(e,g),t.minFilter=_,g.geometry.dispose(),g.material.dispose(),this}clear(e,t,i,a){const d=e.getRenderTarget();for(let g=0;g<6;g++)e.setRenderTarget(this,g),e.clear(t,i,a);e.setRenderTarget(d)}}const ic=new ie,rg=new ie,cp=new Fn;class Yo{constructor(e=new ie(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,a){return this.normal.set(e,t,i),this.constant=a,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const a=ic.subVectors(i,t).cross(rg.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(a,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const i=e.delta(ic),a=this.normal.dot(i);if(0===a)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const d=-(e.start.dot(this.normal)+this.constant)/a;return d<0||d>1?null:t.copy(i).multiplyScalar(d).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||cp.getNormalMatrix(e),a=this.coplanarPoint(ic).applyMatrix4(e),d=this.normal.applyMatrix3(i).normalize();return this.constant=-a.dot(d),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const _a=new oe,Su=new ie;class Dh{constructor(e=new Yo,t=new Yo,i=new Yo,a=new Yo,d=new Yo,g=new Yo){this.planes=[e,t,i,a,d,g]}set(e,t,i,a,d,g){const _=this.planes;return _[0].copy(e),_[1].copy(t),_[2].copy(i),_[3].copy(a),_[4].copy(d),_[5].copy(g),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e){const t=this.planes,i=e.elements,a=i[0],d=i[1],g=i[2],_=i[3],y=i[4],b=i[5],w=i[6],S=i[7],E=i[8],L=i[9],G=i[10],j=i[11],B=i[12],z=i[13],J=i[14],H=i[15];return t[0].setComponents(_-a,S-y,j-E,H-B).normalize(),t[1].setComponents(_+a,S+y,j+E,H+B).normalize(),t[2].setComponents(_+d,S+b,j+L,H+z).normalize(),t[3].setComponents(_-d,S-b,j-L,H-z).normalize(),t[4].setComponents(_-g,S-w,j-G,H-J).normalize(),t[5].setComponents(_+g,S+w,j+G,H+J).normalize(),this}intersectsObject(e){const t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),_a.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(_a)}intersectsSprite(e){return _a.center.set(0,0,0),_a.radius=.7071067811865476,_a.applyMatrix4(e.matrixWorld),this.intersectsSphere(_a)}intersectsSphere(e){const t=this.planes,i=e.center,a=-e.radius;for(let d=0;d<6;d++)if(t[d].distanceToPoint(i)<a)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const a=t[i];if(Su.x=a.normal.x>0?e.max.x:e.min.x,Su.y=a.normal.y>0?e.max.y:e.min.y,Su.z=a.normal.z>0?e.max.z:e.min.z,a.distanceToPoint(Su)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function up(){let h=null,e=!1,t=null,i=null;function a(d,g){t(d,g),i=h.requestAnimationFrame(a)}return{start:function(){!0!==e&&null!==t&&(i=h.requestAnimationFrame(a),e=!0)},stop:function(){h.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(d){t=d},setContext:function(d){h=d}}}function $c(h,e){const t=e.isWebGL2,i=new WeakMap;return{get:function g(b){return b.isInterleavedBufferAttribute&&(b=b.data),i.get(b)},remove:function _(b){b.isInterleavedBufferAttribute&&(b=b.data);const w=i.get(b);w&&(h.deleteBuffer(w.buffer),i.delete(b))},update:function y(b,w){if(b.isGLBufferAttribute){const E=i.get(b);return void((!E||E.version<b.version)&&i.set(b,{buffer:b.buffer,type:b.type,bytesPerElement:b.elementSize,version:b.version}))}b.isInterleavedBufferAttribute&&(b=b.data);const S=i.get(b);void 0===S?i.set(b,function a(b,w){const S=b.array,E=b.usage,L=h.createBuffer();let G;if(h.bindBuffer(w,L),h.bufferData(w,S,E),b.onUploadCallback(),S instanceof Float32Array)G=5126;else if(S instanceof Uint16Array)if(b.isFloat16BufferAttribute){if(!t)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");G=5131}else G=5123;else if(S instanceof Int16Array)G=5122;else if(S instanceof Uint32Array)G=5125;else if(S instanceof Int32Array)G=5124;else if(S instanceof Int8Array)G=5120;else if(S instanceof Uint8Array)G=5121;else{if(!(S instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+S);G=5121}return{buffer:L,type:G,bytesPerElement:S.BYTES_PER_ELEMENT,version:b.version}}(b,w)):S.version<b.version&&(function d(b,w,S){const E=w.array,L=w.updateRange;h.bindBuffer(S,b),-1===L.count?h.bufferSubData(S,0,E):(t?h.bufferSubData(S,L.offset*E.BYTES_PER_ELEMENT,E,L.offset,L.count):h.bufferSubData(S,L.offset*E.BYTES_PER_ELEMENT,E.subarray(L.offset,L.offset+L.count)),L.count=-1),w.onUploadCallback()}(S.buffer,b,w),S.version=b.version)}}}class rc extends Nn{constructor(e=1,t=1,i=1,a=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:a};const d=e/2,g=t/2,_=Math.floor(i),y=Math.floor(a),b=_+1,w=y+1,S=e/_,E=t/y,L=[],G=[],j=[],B=[];for(let z=0;z<w;z++){const J=z*E-g;for(let H=0;H<b;H++)G.push(H*S-d,-J,0),j.push(0,0,1),B.push(H/_),B.push(1-z/y)}for(let z=0;z<y;z++)for(let J=0;J<_;J++){const Y=J+b*(z+1),ne=J+1+b*(z+1),ae=J+1+b*z;L.push(J+b*z,Y,ae),L.push(Y,ne,ae)}this.setIndex(L),this.setAttribute("position",new Xt(G,3)),this.setAttribute("normal",new Xt(j,3)),this.setAttribute("uv",new Xt(B,2))}static fromJSON(e){return new rc(e.width,e.height,e.widthSegments,e.heightSegments)}}const Bn={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\n#ifdef USE_IRIDESCENCE\n\tvec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\t return vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat R21 = R12;\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );\n\t#else\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if defined( USE_SHADOWMAP ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_COORDS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef texture2DLodEXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},At={common:{diffuse:{value:new Yt(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Fn},uv2Transform:{value:new Fn},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new st(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Yt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Yt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Fn}},sprite:{diffuse:{value:new Yt(16777215)},opacity:{value:1},center:{value:new st(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Fn}}},Ga={basic:{uniforms:vt([At.common,At.specularmap,At.envmap,At.aomap,At.lightmap,At.fog]),vertexShader:Bn.meshbasic_vert,fragmentShader:Bn.meshbasic_frag},lambert:{uniforms:vt([At.common,At.specularmap,At.envmap,At.aomap,At.lightmap,At.emissivemap,At.bumpmap,At.normalmap,At.displacementmap,At.fog,At.lights,{emissive:{value:new Yt(0)}}]),vertexShader:Bn.meshlambert_vert,fragmentShader:Bn.meshlambert_frag},phong:{uniforms:vt([At.common,At.specularmap,At.envmap,At.aomap,At.lightmap,At.emissivemap,At.bumpmap,At.normalmap,At.displacementmap,At.fog,At.lights,{emissive:{value:new Yt(0)},specular:{value:new Yt(1118481)},shininess:{value:30}}]),vertexShader:Bn.meshphong_vert,fragmentShader:Bn.meshphong_frag},standard:{uniforms:vt([At.common,At.envmap,At.aomap,At.lightmap,At.emissivemap,At.bumpmap,At.normalmap,At.displacementmap,At.roughnessmap,At.metalnessmap,At.fog,At.lights,{emissive:{value:new Yt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Bn.meshphysical_vert,fragmentShader:Bn.meshphysical_frag},toon:{uniforms:vt([At.common,At.aomap,At.lightmap,At.emissivemap,At.bumpmap,At.normalmap,At.displacementmap,At.gradientmap,At.fog,At.lights,{emissive:{value:new Yt(0)}}]),vertexShader:Bn.meshtoon_vert,fragmentShader:Bn.meshtoon_frag},matcap:{uniforms:vt([At.common,At.bumpmap,At.normalmap,At.displacementmap,At.fog,{matcap:{value:null}}]),vertexShader:Bn.meshmatcap_vert,fragmentShader:Bn.meshmatcap_frag},points:{uniforms:vt([At.points,At.fog]),vertexShader:Bn.points_vert,fragmentShader:Bn.points_frag},dashed:{uniforms:vt([At.common,At.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Bn.linedashed_vert,fragmentShader:Bn.linedashed_frag},depth:{uniforms:vt([At.common,At.displacementmap]),vertexShader:Bn.depth_vert,fragmentShader:Bn.depth_frag},normal:{uniforms:vt([At.common,At.bumpmap,At.normalmap,At.displacementmap,{opacity:{value:1}}]),vertexShader:Bn.meshnormal_vert,fragmentShader:Bn.meshnormal_frag},sprite:{uniforms:vt([At.sprite,At.fog]),vertexShader:Bn.sprite_vert,fragmentShader:Bn.sprite_frag},background:{uniforms:{uvTransform:{value:new Fn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Bn.background_vert,fragmentShader:Bn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:Bn.backgroundCube_vert,fragmentShader:Bn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Bn.cube_vert,fragmentShader:Bn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Bn.equirect_vert,fragmentShader:Bn.equirect_frag},distanceRGBA:{uniforms:vt([At.common,At.displacementmap,{referencePosition:{value:new ie},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Bn.distanceRGBA_vert,fragmentShader:Bn.distanceRGBA_frag},shadow:{uniforms:vt([At.lights,At.fog,{color:{value:new Yt(0)},opacity:{value:1}}]),vertexShader:Bn.shadow_vert,fragmentShader:Bn.shadow_frag}};Ga.physical={uniforms:vt([Ga.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new st(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new Yt(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new st},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Yt(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new Yt(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Bn.meshphysical_vert,fragmentShader:Bn.meshphysical_frag};const Zc={r:0,b:0,g:0};function $h(h,e,t,i,a,d,g){const _=new Yt(0);let b,w,y=!0===d?0:1,S=null,E=0,L=null;function j(B,z){B.getRGB(Zc,Un(h)),i.buffers.color.setClear(Zc.r,Zc.g,Zc.b,z,g)}return{getClearColor:function(){return _},setClearColor:function(B,z=1){_.set(B),y=z,j(_,y)},getClearAlpha:function(){return y},setClearAlpha:function(B){y=B,j(_,y)},render:function G(B,z){let J=!1,H=!0===z.isScene?z.background:null;H&&H.isTexture&&(H=(z.backgroundBlurriness>0?t:e).get(H));const Y=h.xr,ne=Y.getSession&&Y.getSession();ne&&"additive"===ne.environmentBlendMode&&(H=null),null===H?j(_,y):H&&H.isColor&&(j(H,1),J=!0),(h.autoClear||J)&&h.clear(h.autoClearColor,h.autoClearDepth,h.autoClearStencil),H&&(H.isCubeTexture||H.mapping===So)?(void 0===w&&(w=new V(new fe(1,1,1),new cs({name:"BackgroundCubeMaterial",uniforms:Ge(Ga.backgroundCube.uniforms),vertexShader:Ga.backgroundCube.vertexShader,fragmentShader:Ga.backgroundCube.fragmentShader,side:Kt,depthTest:!1,depthWrite:!1,fog:!1})),w.geometry.deleteAttribute("normal"),w.geometry.deleteAttribute("uv"),w.onBeforeRender=function(ae,he,Z){this.matrixWorld.copyPosition(Z.matrixWorld)},Object.defineProperty(w.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),a.update(w)),w.material.uniforms.envMap.value=H,w.material.uniforms.flipEnvMap.value=H.isCubeTexture&&!1===H.isRenderTargetTexture?-1:1,w.material.uniforms.backgroundBlurriness.value=z.backgroundBlurriness,w.material.uniforms.backgroundIntensity.value=z.backgroundIntensity,w.material.toneMapped=H.encoding!==hi,(S!==H||E!==H.version||L!==h.toneMapping)&&(w.material.needsUpdate=!0,S=H,E=H.version,L=h.toneMapping),w.layers.enableAll(),B.unshift(w,w.geometry,w.material,0,0,null)):H&&H.isTexture&&(void 0===b&&(b=new V(new rc(2,2),new cs({name:"BackgroundMaterial",uniforms:Ge(Ga.background.uniforms),vertexShader:Ga.background.vertexShader,fragmentShader:Ga.background.fragmentShader,side:en,depthTest:!1,depthWrite:!1,fog:!1})),b.geometry.deleteAttribute("normal"),Object.defineProperty(b.material,"map",{get:function(){return this.uniforms.t2D.value}}),a.update(b)),b.material.uniforms.t2D.value=H,b.material.uniforms.backgroundIntensity.value=z.backgroundIntensity,b.material.toneMapped=H.encoding!==hi,!0===H.matrixAutoUpdate&&H.updateMatrix(),b.material.uniforms.uvTransform.value.copy(H.matrix),(S!==H||E!==H.version||L!==h.toneMapping)&&(b.material.needsUpdate=!0,S=H,E=H.version,L=h.toneMapping),b.layers.enableAll(),B.unshift(b,b.geometry,b.material,0,0,null))}}}function Wg(h,e,t,i){const a=h.getParameter(34921),d=i.isWebGL2?null:e.get("OES_vertex_array_object"),g=i.isWebGL2||null!==d,_={},y=B(null);let b=y,w=!1;function L(Me){return i.isWebGL2?h.bindVertexArray(Me):d.bindVertexArrayOES(Me)}function G(Me){return i.isWebGL2?h.deleteVertexArray(Me):d.deleteVertexArrayOES(Me)}function B(Me){const qe=[],ut=[],Tt=[];for(let ot=0;ot<a;ot++)qe[ot]=0,ut[ot]=0,Tt[ot]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:qe,enabledAttributes:ut,attributeDivisors:Tt,object:Me,attributes:{},index:null}}function H(){const Me=b.newAttributes;for(let qe=0,ut=Me.length;qe<ut;qe++)Me[qe]=0}function Y(Me){ne(Me,0)}function ne(Me,qe){const Tt=b.enabledAttributes,ot=b.attributeDivisors;b.newAttributes[Me]=1,0===Tt[Me]&&(h.enableVertexAttribArray(Me),Tt[Me]=1),ot[Me]!==qe&&((i.isWebGL2?h:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](Me,qe),ot[Me]=qe)}function ae(){const Me=b.newAttributes,qe=b.enabledAttributes;for(let ut=0,Tt=qe.length;ut<Tt;ut++)qe[ut]!==Me[ut]&&(h.disableVertexAttribArray(ut),qe[ut]=0)}function he(Me,qe,ut,Tt,ot,Dt){!0!==i.isWebGL2||5124!==ut&&5125!==ut?h.vertexAttribPointer(Me,qe,ut,Tt,ot,Dt):h.vertexAttribIPointer(Me,qe,ut,ot,Dt)}function at(){Ee(),w=!0,b!==y&&(b=y,L(b.object))}function Ee(){y.geometry=null,y.program=null,y.wireframe=!1}return{setup:function S(Me,qe,ut,Tt,ot){let Dt=!1;if(g){const gt=function j(Me,qe,ut){const Tt=!0===ut.wireframe;let ot=_[Me.id];void 0===ot&&(ot={},_[Me.id]=ot);let Dt=ot[qe.id];void 0===Dt&&(Dt={},ot[qe.id]=Dt);let gt=Dt[Tt];return void 0===gt&&(gt=B(function E(){return i.isWebGL2?h.createVertexArray():d.createVertexArrayOES()}()),Dt[Tt]=gt),gt}(Tt,ut,qe);b!==gt&&(b=gt,L(b.object)),Dt=function z(Me,qe,ut,Tt){const ot=b.attributes,Dt=qe.attributes;let gt=0;const We=ut.getAttributes();for(const $e in We)if(We[$e].location>=0){const Et=ot[$e];let $t=Dt[$e];if(void 0===$t&&("instanceMatrix"===$e&&Me.instanceMatrix&&($t=Me.instanceMatrix),"instanceColor"===$e&&Me.instanceColor&&($t=Me.instanceColor)),void 0===Et||Et.attribute!==$t||$t&&Et.data!==$t.data)return!0;gt++}return b.attributesNum!==gt||b.index!==Tt}(Me,Tt,ut,ot),Dt&&function J(Me,qe,ut,Tt){const ot={},Dt=qe.attributes;let gt=0;const We=ut.getAttributes();for(const $e in We)if(We[$e].location>=0){let Et=Dt[$e];void 0===Et&&("instanceMatrix"===$e&&Me.instanceMatrix&&(Et=Me.instanceMatrix),"instanceColor"===$e&&Me.instanceColor&&(Et=Me.instanceColor));const $t={};$t.attribute=Et,Et&&Et.data&&($t.data=Et.data),ot[$e]=$t,gt++}b.attributes=ot,b.attributesNum=gt,b.index=Tt}(Me,Tt,ut,ot)}else{const gt=!0===qe.wireframe;(b.geometry!==Tt.id||b.program!==ut.id||b.wireframe!==gt)&&(b.geometry=Tt.id,b.program=ut.id,b.wireframe=gt,Dt=!0)}null!==ot&&t.update(ot,34963),(Dt||w)&&(w=!1,function Z(Me,qe,ut,Tt){if(!1===i.isWebGL2&&(Me.isInstancedMesh||Tt.isInstancedBufferGeometry)&&null===e.get("ANGLE_instanced_arrays"))return;H();const ot=Tt.attributes,Dt=ut.getAttributes(),gt=qe.defaultAttributeValues;for(const We in Dt){const $e=Dt[We];if($e.location>=0){let Pt=ot[We];if(void 0===Pt&&("instanceMatrix"===We&&Me.instanceMatrix&&(Pt=Me.instanceMatrix),"instanceColor"===We&&Me.instanceColor&&(Pt=Me.instanceColor)),void 0!==Pt){const Et=Pt.normalized,$t=Pt.itemSize,et=t.get(Pt);if(void 0===et)continue;const Pn=et.buffer,sn=et.type,An=et.bytesPerElement;if(Pt.isInterleavedBufferAttribute){const qt=Pt.data,Zn=qt.stride,lt=Pt.offset;if(qt.isInstancedInterleavedBuffer){for(let n=0;n<$e.locationSize;n++)ne($e.location+n,qt.meshPerAttribute);!0!==Me.isInstancedMesh&&void 0===Tt._maxInstanceCount&&(Tt._maxInstanceCount=qt.meshPerAttribute*qt.count)}else for(let n=0;n<$e.locationSize;n++)Y($e.location+n);h.bindBuffer(34962,Pn);for(let n=0;n<$e.locationSize;n++)he($e.location+n,$t/$e.locationSize,sn,Et,Zn*An,(lt+$t/$e.locationSize*n)*An)}else{if(Pt.isInstancedBufferAttribute){for(let qt=0;qt<$e.locationSize;qt++)ne($e.location+qt,Pt.meshPerAttribute);!0!==Me.isInstancedMesh&&void 0===Tt._maxInstanceCount&&(Tt._maxInstanceCount=Pt.meshPerAttribute*Pt.count)}else for(let qt=0;qt<$e.locationSize;qt++)Y($e.location+qt);h.bindBuffer(34962,Pn);for(let qt=0;qt<$e.locationSize;qt++)he($e.location+qt,$t/$e.locationSize,sn,Et,$t*An,$t/$e.locationSize*qt*An)}}else if(void 0!==gt){const Et=gt[We];if(void 0!==Et)switch(Et.length){case 2:h.vertexAttrib2fv($e.location,Et);break;case 3:h.vertexAttrib3fv($e.location,Et);break;case 4:h.vertexAttrib4fv($e.location,Et);break;default:h.vertexAttrib1fv($e.location,Et)}}}}ae()}(Me,qe,ut,Tt),null!==ot&&h.bindBuffer(34963,t.get(ot).buffer))},reset:at,resetDefaultState:Ee,dispose:function ue(){at();for(const Me in _){const qe=_[Me];for(const ut in qe){const Tt=qe[ut];for(const ot in Tt)G(Tt[ot].object),delete Tt[ot];delete qe[ut]}delete _[Me]}},releaseStatesOfGeometry:function me(Me){if(void 0===_[Me.id])return;const qe=_[Me.id];for(const ut in qe){const Tt=qe[ut];for(const ot in Tt)G(Tt[ot].object),delete Tt[ot];delete qe[ut]}delete _[Me.id]},releaseStatesOfProgram:function Le(Me){for(const qe in _){const ut=_[qe];if(void 0===ut[Me.id])continue;const Tt=ut[Me.id];for(const ot in Tt)G(Tt[ot].object),delete Tt[ot];delete ut[Me.id]}},initAttributes:H,enableAttribute:Y,disableUnusedAttributes:ae}}function Up(h,e,t,i){const a=i.isWebGL2;let d;this.setMode=function g(b){d=b},this.render=function _(b,w){h.drawArrays(d,b,w),t.update(w,d,1)},this.renderInstances=function y(b,w,S){if(0===S)return;let E,L;if(a)E=h,L="drawArraysInstanced";else if(E=e.get("ANGLE_instanced_arrays"),L="drawArraysInstancedANGLE",null===E)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");E[L](d,b,w,S),t.update(w,d,S)}}function $g(h,e,t){let i;function d(he){if("highp"===he){if(h.getShaderPrecisionFormat(35633,36338).precision>0&&h.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";he="mediump"}return"mediump"===he&&h.getShaderPrecisionFormat(35633,36337).precision>0&&h.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const g=typeof WebGL2RenderingContext<"u"&&h instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&h instanceof WebGL2ComputeRenderingContext;let _=void 0!==t.precision?t.precision:"highp";const y=d(_);y!==_&&(console.warn("THREE.WebGLRenderer:",_,"not supported, using",y,"instead."),_=y);const b=g||e.has("WEBGL_draw_buffers"),w=!0===t.logarithmicDepthBuffer,S=h.getParameter(34930),E=h.getParameter(35660),L=h.getParameter(3379),G=h.getParameter(34076),j=h.getParameter(34921),B=h.getParameter(36347),z=h.getParameter(36348),J=h.getParameter(36349),H=E>0,Y=g||e.has("OES_texture_float");return{isWebGL2:g,drawBuffers:b,getMaxAnisotropy:function a(){if(void 0!==i)return i;if(!0===e.has("EXT_texture_filter_anisotropic")){const he=e.get("EXT_texture_filter_anisotropic");i=h.getParameter(he.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i},getMaxPrecision:d,precision:_,logarithmicDepthBuffer:w,maxTextures:S,maxVertexTextures:E,maxTextureSize:L,maxCubemapSize:G,maxAttributes:j,maxVertexUniforms:B,maxVaryings:z,maxFragmentUniforms:J,vertexTextures:H,floatFragmentTextures:Y,floatVertexTextures:H&&Y,maxSamples:g?h.getParameter(36183):0}}function Fd(h){const e=this;let t=null,i=0,a=!1,d=!1;const g=new Yo,_=new Fn,y={value:null,needsUpdate:!1};function b(){y.value!==t&&(y.value=t,y.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function w(S,E,L,G){const j=null!==S?S.length:0;let B=null;if(0!==j){if(B=y.value,!0!==G||null===B){const z=L+4*j,J=E.matrixWorldInverse;_.getNormalMatrix(J),(null===B||B.length<z)&&(B=new Float32Array(z));for(let H=0,Y=L;H!==j;++H,Y+=4)g.copy(S[H]).applyMatrix4(J,_),g.normal.toArray(B,Y),B[Y+3]=g.constant}y.value=B,y.needsUpdate=!0}return e.numPlanes=j,e.numIntersection=0,B}this.uniform=y,this.numPlanes=0,this.numIntersection=0,this.init=function(S,E,L){const G=0!==S.length||E||0!==i||a;return a=E,t=w(S,L,0),i=S.length,G},this.beginShadows=function(){d=!0,w(null)},this.endShadows=function(){d=!1,b()},this.setState=function(S,E,L){const G=S.clippingPlanes,j=S.clipIntersection,B=S.clipShadows,z=h.get(S);if(!a||null===G||0===G.length||d&&!B)d?w(null):b();else{const J=d?0:i,H=4*J;let Y=z.clippingState||null;y.value=Y,Y=w(G,E,H,L);for(let ne=0;ne!==H;++ne)Y[ne]=t[ne];z.clippingState=Y,this.numIntersection=j?this.numPlanes:0,this.numPlanes+=J}}}function ya(h){let e=new WeakMap;function t(g,_){return _===jt?g.mapping=zr:_===Je&&(g.mapping=ri),g}function a(g){const _=g.target;_.removeEventListener("dispose",a);const y=e.get(_);void 0!==y&&(e.delete(_),y.dispose())}return{get:function i(g){if(g&&g.isTexture&&!1===g.isRenderTargetTexture){const _=g.mapping;if(_===jt||_===Je){if(e.has(g))return t(e.get(g).texture,g.mapping);{const y=g.image;if(y&&y.height>0){const b=new lp(y.height/2);return b.fromEquirectangularTexture(h,g),e.set(g,b),g.addEventListener("dispose",a),t(b.texture,g.mapping)}return null}}}return g},dispose:function d(){e=new WeakMap}}}class Ml extends Qr{constructor(e=-1,t=1,i=1,a=-1,d=.1,g=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=a,this.near=d,this.far=g,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,i,a,d,g){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=a,this.view.width=d,this.view.height=g,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,a=(this.top+this.bottom)/2;let d=i-e,g=i+e,_=a+t,y=a-t;if(null!==this.view&&this.view.enabled){const b=(this.right-this.left)/this.view.fullWidth/this.zoom,w=(this.top-this.bottom)/this.view.fullHeight/this.zoom;d+=b*this.view.offsetX,g=d+b*this.view.width,_-=w*this.view.offsetY,y=_-w*this.view.height}this.projectionMatrix.makeOrthographic(d,g,_,y,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}const Yh=[.125,.215,.35,.446,.526,.582],Ld=new Ml,Pv=new Yt;let qh=null;const Va=(1+Math.sqrt(5))/2,xl=1/Va,Yg=[new ie(1,1,1),new ie(-1,1,1),new ie(1,1,-1),new ie(-1,1,-1),new ie(0,Va,xl),new ie(0,Va,-xl),new ie(xl,0,Va),new ie(-xl,0,Va),new ie(Va,xl,0),new ie(-Va,xl,0)];class Hp{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,a=100){qh=this._renderer.getRenderTarget(),this._setSize(256);const d=this._allocateTargets();return d.depthBuffer=!0,this._sceneToCubeUV(e,i,a,d),t>0&&this._blur(d,0,0,t),this._applyPMREM(d),this._cleanup(d),d}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=Zh(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=zp(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(qh),e.scissorTest=!1,Dl(e,0,0,e.width,e.height)}_fromTexture(e,t){this._setSize(e.mapping===zr||e.mapping===ri?0===e.image.length?16:e.image[0].width||e.image[0].image.width:e.image.width/4),qh=this._renderer.getRenderTarget();const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:Ki,minFilter:Ki,generateMipmaps:!1,type:so,format:Te,encoding:Ws,depthBuffer:!1},a=Jh(e,t,i);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=Jh(e,t,i);const{_lodMax:d}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function Ua(h){const e=[],t=[],i=[];let a=h;const d=h-4+1+Yh.length;for(let g=0;g<d;g++){const _=Math.pow(2,a);t.push(_);let y=1/_;g>h-4?y=Yh[g-h+4-1]:0===g&&(y=0),i.push(y);const b=1/(_-2),w=-b,S=1+b,E=[w,w,S,w,S,S,w,w,S,S,w,S],L=6,G=6,j=3,B=2,z=1,J=new Float32Array(j*G*L),H=new Float32Array(B*G*L),Y=new Float32Array(z*G*L);for(let ae=0;ae<L;ae++){const he=ae%3*2/3-1,Z=ae>2?0:-1;J.set([he,Z,0,he+2/3,Z,0,he+2/3,Z+1,0,he,Z,0,he+2/3,Z+1,0,he,Z+1,0],j*G*ae),H.set(E,B*G*ae),Y.set([ae,ae,ae,ae,ae,ae],z*G*ae)}const ne=new Nn;ne.setAttribute("position",new rr(J,j)),ne.setAttribute("uv",new rr(H,B)),ne.setAttribute("faceIndex",new rr(Y,z)),e.push(ne),a>4&&a--}return{lodPlanes:e,sizeLods:t,sigmas:i}}(d)),this._blurMaterial=function Bd(h,e,t){const i=new Float32Array(20),a=new ie(0,1,0);return new cs({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${h}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:a}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:Ne,depthTest:!1,depthWrite:!1})}(d,e,t)}return a}_compileMaterial(e){const t=new V(this._lodPlanes[0],e);this._renderer.compile(t,Ld)}_sceneToCubeUV(e,t,i,a){const _=new Br(90,1,t,i),y=[1,-1,1,1,1,1],b=[1,1,1,-1,-1,-1],w=this._renderer,S=w.autoClear,E=w.toneMapping;w.getClearColor(Pv),w.toneMapping=yi,w.autoClear=!1;const L=new da({name:"PMREM.Background",side:Kt,depthWrite:!1,depthTest:!1}),G=new V(new fe,L);let j=!1;const B=e.background;B?B.isColor&&(L.color.copy(B),e.background=null,j=!0):(L.color.copy(Pv),j=!0);for(let z=0;z<6;z++){const J=z%3;0===J?(_.up.set(0,y[z],0),_.lookAt(b[z],0,0)):1===J?(_.up.set(0,0,y[z]),_.lookAt(0,b[z],0)):(_.up.set(0,y[z],0),_.lookAt(0,0,b[z]));const H=this._cubeSize;Dl(a,J*H,z>2?H:0,H,H),w.setRenderTarget(a),j&&w.render(G,_),w.render(e,_)}G.geometry.dispose(),G.material.dispose(),w.toneMapping=E,w.autoClear=S,e.background=B}_textureToCubeUV(e,t){const i=this._renderer,a=e.mapping===zr||e.mapping===ri;a?(null===this._cubemapMaterial&&(this._cubemapMaterial=Zh()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=zp());const d=a?this._cubemapMaterial:this._equirectMaterial,g=new V(this._lodPlanes[0],d);d.uniforms.envMap.value=e;const y=this._cubeSize;Dl(t,0,0,3*y,2*y),i.setRenderTarget(t),i.render(g,Ld)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;for(let a=1;a<this._lodPlanes.length;a++){const d=Math.sqrt(this._sigmas[a]*this._sigmas[a]-this._sigmas[a-1]*this._sigmas[a-1]);this._blur(e,a-1,a,d,Yg[(a-1)%Yg.length])}t.autoClear=i}_blur(e,t,i,a,d){const g=this._pingPongRenderTarget;this._halfBlur(e,g,t,i,a,"latitudinal",d),this._halfBlur(g,e,i,i,a,"longitudinal",d)}_halfBlur(e,t,i,a,d,g,_){const y=this._renderer,b=this._blurMaterial;"latitudinal"!==g&&"longitudinal"!==g&&console.error("blur direction must be either latitudinal or longitudinal!");const S=new V(this._lodPlanes[a],b),E=b.uniforms,L=this._sizeLods[i]-1,G=isFinite(d)?Math.PI/(2*L):2*Math.PI/39,j=d/G,B=isFinite(d)?1+Math.floor(3*j):20;B>20&&console.warn(`sigmaRadians, ${d}, is too large and will clip, as it requested ${B} samples when the maximum is set to 20`);const z=[];let J=0;for(let he=0;he<20;++he){const Z=he/j,ue=Math.exp(-Z*Z/2);z.push(ue),0===he?J+=ue:he<B&&(J+=2*ue)}for(let he=0;he<z.length;he++)z[he]=z[he]/J;E.envMap.value=e.texture,E.samples.value=B,E.weights.value=z,E.latitudinal.value="latitudinal"===g,_&&(E.poleAxis.value=_);const{_lodMax:H}=this;E.dTheta.value=G,E.mipInt.value=H-i;const Y=this._sizeLods[a];Dl(t,3*Y*(a>H-4?a-H+4:0),4*(this._cubeSize-Y),3*Y,2*Y),y.setRenderTarget(t),y.render(S,Ld)}}function Jh(h,e,t){const i=new po(h,e,t);return i.texture.mapping=So,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function Dl(h,e,t,i,a){h.viewport.set(e,t,i,a),h.scissor.set(e,t,i,a)}function zp(){return new cs({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:Ne,depthTest:!1,depthWrite:!1})}function Zh(){return new cs({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:Ne,depthTest:!1,depthWrite:!1})}function qg(h){let e=new WeakMap,t=null;function d(_){const y=_.target;y.removeEventListener("dispose",d);const b=e.get(y);void 0!==b&&(e.delete(y),b.dispose())}return{get:function i(_){if(_&&_.isTexture){const y=_.mapping,b=y===jt||y===Je,w=y===zr||y===ri;if(b||w){if(_.isRenderTargetTexture&&!0===_.needsPMREMUpdate){_.needsPMREMUpdate=!1;let S=e.get(_);return null===t&&(t=new Hp(h)),S=b?t.fromEquirectangular(_,S):t.fromCubemap(_,S),e.set(_,S),S.texture}if(e.has(_))return e.get(_).texture;{const S=_.image;if(b&&S&&S.height>0||w&&S&&function a(_){let y=0;for(let w=0;w<6;w++)void 0!==_[w]&&y++;return 6===y}(S)){null===t&&(t=new Hp(h));const E=b?t.fromEquirectangular(_):t.fromCubemap(_);return e.set(_,E),_.addEventListener("dispose",d),E.texture}return null}}}return _},dispose:function g(){e=new WeakMap,null!==t&&(t.dispose(),t=null)}}}function Kh(h){const e={};function t(i){if(void 0!==e[i])return e[i];let a;switch(i){case"WEBGL_depth_texture":a=h.getExtension("WEBGL_depth_texture")||h.getExtension("MOZ_WEBGL_depth_texture")||h.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":a=h.getExtension("EXT_texture_filter_anisotropic")||h.getExtension("MOZ_EXT_texture_filter_anisotropic")||h.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":a=h.getExtension("WEBGL_compressed_texture_s3tc")||h.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||h.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":a=h.getExtension("WEBGL_compressed_texture_pvrtc")||h.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:a=h.getExtension(i)}return e[i]=a,a}return{has:function(i){return null!==t(i)},init:function(i){i.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(i){const a=t(i);return null===a&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),a}}}function Jg(h,e,t,i){const a={},d=new WeakMap;function g(S){const E=S.target;null!==E.index&&e.remove(E.index);for(const G in E.attributes)e.remove(E.attributes[G]);E.removeEventListener("dispose",g),delete a[E.id];const L=d.get(E);L&&(e.remove(L),d.delete(E)),i.releaseStatesOfGeometry(E),!0===E.isInstancedBufferGeometry&&delete E._maxInstanceCount,t.memory.geometries--}function b(S){const E=[],L=S.index,G=S.attributes.position;let j=0;if(null!==L){const J=L.array;j=L.version;for(let H=0,Y=J.length;H<Y;H+=3){const ne=J[H+0],ae=J[H+1],he=J[H+2];E.push(ne,ae,ae,he,he,ne)}}else{j=G.version;for(let H=0,Y=G.array.length/3-1;H<Y;H+=3){const ne=H+0,ae=H+1,he=H+2;E.push(ne,ae,ae,he,he,ne)}}const B=new(Yl(E)?tc:Wo)(E,1);B.version=j;const z=d.get(S);z&&e.remove(z),d.set(S,B)}return{get:function _(S,E){return!0===a[E.id]||(E.addEventListener("dispose",g),a[E.id]=!0,t.memory.geometries++),E},update:function y(S){const E=S.attributes;for(const G in E)e.update(E[G],34962);const L=S.morphAttributes;for(const G in L){const j=L[G];for(let B=0,z=j.length;B<z;B++)e.update(j[B],34962)}},getWireframeAttribute:function w(S){const E=d.get(S);if(E){const L=S.index;null!==L&&E.version<L.version&&b(S)}else b(S);return d.get(S)}}}function Yi(h,e,t,i){const a=i.isWebGL2;let d,_,y;this.setMode=function g(E){d=E},this.setIndex=function b(E){_=E.type,y=E.bytesPerElement},this.render=function w(E,L){h.drawElements(d,L,_,E*y),t.update(L,d,1)},this.renderInstances=function S(E,L,G){if(0===G)return;let j,B;if(a)j=h,B="drawElementsInstanced";else if(j=e.get("ANGLE_instanced_arrays"),B="drawElementsInstancedANGLE",null===j)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");j[B](d,L,_,E*y,G),t.update(L,d,G)}}function Wp(h){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function a(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function i(d,g,_){switch(t.calls++,g){case 4:t.triangles+=_*(d/3);break;case 1:t.lines+=_*(d/2);break;case 3:t.lines+=_*(d-1);break;case 2:t.lines+=_*d;break;case 0:t.points+=_*d;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",g)}}}}function $p(h,e){return h[0]-e[0]}function wr(h,e){return Math.abs(e[1])-Math.abs(h[1])}function ac(h,e,t){const i={},a=new Float32Array(8),d=new WeakMap,g=new Wn,_=[];for(let b=0;b<8;b++)_[b]=[b,0];return{update:function y(b,w,S,E){const L=b.morphTargetInfluences;if(!0===e.isWebGL2){const G=w.morphAttributes.position||w.morphAttributes.normal||w.morphAttributes.color,j=void 0!==G?G.length:0;let B=d.get(w);if(void 0===B||B.count!==j){let qe=function(){Ee.dispose(),d.delete(w),w.removeEventListener("dispose",qe)};void 0!==B&&B.texture.dispose();const H=void 0!==w.morphAttributes.position,Y=void 0!==w.morphAttributes.normal,ne=void 0!==w.morphAttributes.color,ae=w.morphAttributes.position||[],he=w.morphAttributes.normal||[],Z=w.morphAttributes.color||[];let ue=0;!0===H&&(ue=1),!0===Y&&(ue=2),!0===ne&&(ue=3);let me=w.attributes.position.count*ue,Le=1;me>e.maxTextureSize&&(Le=Math.ceil(me/e.maxTextureSize),me=e.maxTextureSize);const at=new Float32Array(me*Le*4*j),Ee=new mo(at,me,Le,j);Ee.type=Pr,Ee.needsUpdate=!0;const Me=4*ue;for(let ut=0;ut<j;ut++){const Tt=ae[ut],ot=he[ut],Dt=Z[ut],gt=me*Le*4*ut;for(let We=0;We<Tt.count;We++){const $e=We*Me;!0===H&&(g.fromBufferAttribute(Tt,We),at[gt+$e+0]=g.x,at[gt+$e+1]=g.y,at[gt+$e+2]=g.z,at[gt+$e+3]=0),!0===Y&&(g.fromBufferAttribute(ot,We),at[gt+$e+4]=g.x,at[gt+$e+5]=g.y,at[gt+$e+6]=g.z,at[gt+$e+7]=0),!0===ne&&(g.fromBufferAttribute(Dt,We),at[gt+$e+8]=g.x,at[gt+$e+9]=g.y,at[gt+$e+10]=g.z,at[gt+$e+11]=4===Dt.itemSize?g.w:1)}}B={count:j,texture:Ee,size:new st(me,Le)},d.set(w,B),w.addEventListener("dispose",qe)}let z=0;for(let H=0;H<L.length;H++)z+=L[H];const J=w.morphTargetsRelative?1:1-z;E.getUniforms().setValue(h,"morphTargetBaseInfluence",J),E.getUniforms().setValue(h,"morphTargetInfluences",L),E.getUniforms().setValue(h,"morphTargetsTexture",B.texture,t),E.getUniforms().setValue(h,"morphTargetsTextureSize",B.size)}else{const G=void 0===L?0:L.length;let j=i[w.id];if(void 0===j||j.length!==G){j=[];for(let Y=0;Y<G;Y++)j[Y]=[Y,0];i[w.id]=j}for(let Y=0;Y<G;Y++){const ne=j[Y];ne[0]=Y,ne[1]=L[Y]}j.sort(wr);for(let Y=0;Y<8;Y++)Y<G&&j[Y][1]?(_[Y][0]=j[Y][0],_[Y][1]=j[Y][1]):(_[Y][0]=Number.MAX_SAFE_INTEGER,_[Y][1]=0);_.sort($p);const B=w.morphAttributes.position,z=w.morphAttributes.normal;let J=0;for(let Y=0;Y<8;Y++){const ne=_[Y],ae=ne[0],he=ne[1];ae!==Number.MAX_SAFE_INTEGER&&he?(B&&w.getAttribute("morphTarget"+Y)!==B[ae]&&w.setAttribute("morphTarget"+Y,B[ae]),z&&w.getAttribute("morphNormal"+Y)!==z[ae]&&w.setAttribute("morphNormal"+Y,z[ae]),a[Y]=he,J+=he):(B&&!0===w.hasAttribute("morphTarget"+Y)&&w.deleteAttribute("morphTarget"+Y),z&&!0===w.hasAttribute("morphNormal"+Y)&&w.deleteAttribute("morphNormal"+Y),a[Y]=0)}const H=w.morphTargetsRelative?1:1-J;E.getUniforms().setValue(h,"morphTargetBaseInfluence",H),E.getUniforms().setValue(h,"morphTargetInfluences",a)}}}}function Yp(h,e,t,i){let a=new WeakMap;function _(y){const b=y.target;b.removeEventListener("dispose",_),t.remove(b.instanceMatrix),null!==b.instanceColor&&t.remove(b.instanceColor)}return{update:function d(y){const b=i.render.frame,S=e.get(y,y.geometry);return a.get(S)!==b&&(e.update(S),a.set(S,b)),y.isInstancedMesh&&(!1===y.hasEventListener("dispose",_)&&y.addEventListener("dispose",_),t.update(y.instanceMatrix,34962),null!==y.instanceColor&&t.update(y.instanceColor,34962)),S},dispose:function g(){a=new WeakMap}}}const qp=new or,Jp=new mo,Iu=new Vo,Pu=new bl,Zg=[],Kg=[],Xc=new Float32Array(16),jd=new Float32Array(9),Xh=new Float32Array(4);function lc(h,e,t){const i=h[0];if(i<=0||i>0)return h;const a=e*t;let d=Zg[a];if(void 0===d&&(d=new Float32Array(a),Zg[a]=d),0!==e){i.toArray(d,0);for(let g=1,_=0;g!==e;++g)_+=t,h[g].toArray(d,_)}return d}function Rr(h,e){if(h.length!==e.length)return!1;for(let t=0,i=h.length;t<i;t++)if(h[t]!==e[t])return!1;return!0}function jr(h,e){for(let t=0,i=e.length;t<i;t++)h[t]=e[t]}function cc(h,e){let t=Kg[e];void 0===t&&(t=new Int32Array(e),Kg[e]=t);for(let i=0;i!==e;++i)t[i]=h.allocateTextureUnit();return t}function Zp(h,e){const t=this.cache;t[0]!==e&&(h.uniform1f(this.addr,e),t[0]=e)}function Ou(h,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(h.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Rr(t,e))return;h.uniform2fv(this.addr,e),jr(t,e)}}function Qh(h,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(h.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(void 0!==e.r)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(h.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Rr(t,e))return;h.uniform3fv(this.addr,e),jr(t,e)}}function Ov(h,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(h.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Rr(t,e))return;h.uniform4fv(this.addr,e),jr(t,e)}}function Ha(h,e){const t=this.cache,i=e.elements;if(void 0===i){if(Rr(t,e))return;h.uniformMatrix2fv(this.addr,!1,e),jr(t,e)}else{if(Rr(t,i))return;Xh.set(i),h.uniformMatrix2fv(this.addr,!1,Xh),jr(t,i)}}function Xg(h,e){const t=this.cache,i=e.elements;if(void 0===i){if(Rr(t,e))return;h.uniformMatrix3fv(this.addr,!1,e),jr(t,e)}else{if(Rr(t,i))return;jd.set(i),h.uniformMatrix3fv(this.addr,!1,jd),jr(t,i)}}function Nu(h,e){const t=this.cache,i=e.elements;if(void 0===i){if(Rr(t,e))return;h.uniformMatrix4fv(this.addr,!1,e),jr(t,e)}else{if(Rr(t,i))return;Xc.set(i),h.uniformMatrix4fv(this.addr,!1,Xc),jr(t,i)}}function uc(h,e){const t=this.cache;t[0]!==e&&(h.uniform1i(this.addr,e),t[0]=e)}function Kp(h,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(h.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Rr(t,e))return;h.uniform2iv(this.addr,e),jr(t,e)}}function dc(h,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(h.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Rr(t,e))return;h.uniform3iv(this.addr,e),jr(t,e)}}function Qg(h,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(h.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Rr(t,e))return;h.uniform4iv(this.addr,e),jr(t,e)}}function $n(h,e){const t=this.cache;t[0]!==e&&(h.uniform1ui(this.addr,e),t[0]=e)}function kd(h,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(h.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Rr(t,e))return;h.uniform2uiv(this.addr,e),jr(t,e)}}function ef(h,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(h.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Rr(t,e))return;h.uniform3uiv(this.addr,e),jr(t,e)}}function tf(h,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(h.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Rr(t,e))return;h.uniform4uiv(this.addr,e),jr(t,e)}}function Qc(h,e,t){const i=this.cache,a=t.allocateTextureUnit();i[0]!==a&&(h.uniform1i(this.addr,a),i[0]=a),t.setTexture2D(e||qp,a)}function hc(h,e,t){const i=this.cache,a=t.allocateTextureUnit();i[0]!==a&&(h.uniform1i(this.addr,a),i[0]=a),t.setTexture3D(e||Iu,a)}function nf(h,e,t){const i=this.cache,a=t.allocateTextureUnit();i[0]!==a&&(h.uniform1i(this.addr,a),i[0]=a),t.setTextureCube(e||Pu,a)}function Fu(h,e,t){const i=this.cache,a=t.allocateTextureUnit();i[0]!==a&&(h.uniform1i(this.addr,a),i[0]=a),t.setTexture2DArray(e||Jp,a)}function Vd(h,e){h.uniform1fv(this.addr,e)}function rf(h,e){const t=lc(e,this.size,2);h.uniform2fv(this.addr,t)}function eu(h,e){const t=lc(e,this.size,3);h.uniform3fv(this.addr,t)}function e_(h,e){const t=lc(e,this.size,4);h.uniform4fv(this.addr,t)}function Xp(h,e){const t=lc(e,this.size,4);h.uniformMatrix2fv(this.addr,!1,t)}function Qp(h,e){const t=lc(e,this.size,9);h.uniformMatrix3fv(this.addr,!1,t)}function Ud(h,e){const t=lc(e,this.size,16);h.uniformMatrix4fv(this.addr,!1,t)}function em(h,e){h.uniform1iv(this.addr,e)}function tm(h,e){h.uniform2iv(this.addr,e)}function t_(h,e){h.uniform3iv(this.addr,e)}function nm(h,e){h.uniform4iv(this.addr,e)}function Nv(h,e){h.uniform1uiv(this.addr,e)}function n_(h,e){h.uniform2uiv(this.addr,e)}function Lu(h,e){h.uniform3uiv(this.addr,e)}function i_(h,e){h.uniform4uiv(this.addr,e)}function tu(h,e,t){const i=this.cache,a=e.length,d=cc(t,a);Rr(i,d)||(h.uniform1iv(this.addr,d),jr(i,d));for(let g=0;g!==a;++g)t.setTexture2D(e[g]||qp,d[g])}function Bu(h,e,t){const i=this.cache,a=e.length,d=cc(t,a);Rr(i,d)||(h.uniform1iv(this.addr,d),jr(i,d));for(let g=0;g!==a;++g)t.setTexture3D(e[g]||Iu,d[g])}function r_(h,e,t){const i=this.cache,a=e.length,d=cc(t,a);Rr(i,d)||(h.uniform1iv(this.addr,d),jr(i,d));for(let g=0;g!==a;++g)t.setTextureCube(e[g]||Pu,d[g])}function sf(h,e,t){const i=this.cache,a=e.length,d=cc(t,a);Rr(i,d)||(h.uniform1iv(this.addr,d),jr(i,d));for(let g=0;g!==a;++g)t.setTexture2DArray(e[g]||Jp,d[g])}class rm{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.setValue=function Gd(h){switch(h){case 5126:return Zp;case 35664:return Ou;case 35665:return Qh;case 35666:return Ov;case 35674:return Ha;case 35675:return Xg;case 35676:return Nu;case 5124:case 35670:return uc;case 35667:case 35671:return Kp;case 35668:case 35672:return dc;case 35669:case 35673:return Qg;case 5125:return $n;case 36294:return kd;case 36295:return ef;case 36296:return tf;case 35678:case 36198:case 36298:case 36306:case 35682:return Qc;case 35679:case 36299:case 36307:return hc;case 35680:case 36300:case 36308:case 36293:return nf;case 36289:case 36303:case 36311:case 36292:return Fu}}(t.type)}}class sm{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.size=t.size,this.setValue=function im(h){switch(h){case 5126:return Vd;case 35664:return rf;case 35665:return eu;case 35666:return e_;case 35674:return Xp;case 35675:return Qp;case 35676:return Ud;case 5124:case 35670:return em;case 35667:case 35671:return tm;case 35668:case 35672:return t_;case 35669:case 35673:return nm;case 5125:return Nv;case 36294:return n_;case 36295:return Lu;case 36296:return i_;case 35678:case 36198:case 36298:case 36306:case 35682:return tu;case 35679:case 36299:case 36307:return Bu;case 35680:case 36300:case 36308:case 36293:return r_;case 36289:case 36303:case 36311:case 36292:return sf}}(t.type)}}class af{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const a=this.seq;for(let d=0,g=a.length;d!==g;++d){const _=a[d];_.setValue(e,t[_.id],i)}}}const lf=/(\w+)(\])?(\[|\.)?/g;function ju(h,e){h.seq.push(e),h.map[e.id]=e}function cf(h,e,t){const i=h.name,a=i.length;for(lf.lastIndex=0;;){const d=lf.exec(i);let _=d[1];const b=d[3];if("]"===d[2]&&(_|=0),void 0===b||"["===b&&lf.lastIndex+2===a){ju(t,void 0===b?new rm(_,h,e):new sm(_,h,e));break}{let S=t.map[_];void 0===S&&(S=new af(_),ju(t,S)),t=S}}}class Hd{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,35718);for(let a=0;a<i;++a){const d=e.getActiveUniform(t,a);cf(d,e.getUniformLocation(t,d.name),this)}}setValue(e,t,i,a){const d=this.map[t];void 0!==d&&d.setValue(e,i,a)}setOptional(e,t,i){const a=t[i];void 0!==a&&this.setValue(e,i,a)}static upload(e,t,i,a){for(let d=0,g=t.length;d!==g;++d){const _=t[d],y=i[_.id];!1!==y.needsUpdate&&_.setValue(e,y.value,a)}}static seqWithValue(e,t){const i=[];for(let a=0,d=e.length;a!==d;++a){const g=e[a];g.id in t&&i.push(g)}return i}}function uf(h,e,t){const i=h.createShader(e);return h.shaderSource(i,t),h.compileShader(i),i}let zd=0;function s_(h,e,t){const i=h.getShaderParameter(e,35713),a=h.getShaderInfoLog(e).trim();if(i&&""===a)return"";const d=/ERROR: 0:(\d+)/.exec(a);if(d){const g=parseInt(d[1]);return t.toUpperCase()+"\n\n"+a+"\n\n"+function Fv(h,e){const t=h.split("\n"),i=[],a=Math.max(e-6,0),d=Math.min(e+6,t.length);for(let g=a;g<d;g++){const _=g+1;i.push(`${_===e?">":" "} ${_}: ${t[g]}`)}return i.join("\n")}(h.getShaderSource(e),g)}return a}function Bv(h,e){const t=function Lv(h){switch(h){case Ws:return["Linear","( value )"];case hi:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",h),["Linear","( value )"]}}(e);return"vec4 "+h+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function jv(h,e){let t;switch(e){case ro:t="Linear";break;case Ro:t="Reinhard";break;case Ui:t="OptimizedCineon";break;case ns:t="ACESFilmic";break;case Qo:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+h+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function To(h){return""!==h}function o_(h,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return h.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function a_(h,e){return h.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Vv=/^[ \t]*#include +<([\w\d./]+)>/gm;function l_(h){return h.replace(Vv,c_)}function c_(h,e){const t=Bn[e];if(void 0===t)throw new Error("Can not resolve #include <"+e+">");return l_(t)}const n0=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function om(h){return h.replace(n0,u_)}function u_(h,e,t,i){let a="";for(let d=parseInt(e);d<parseInt(t);d++)a+=i.replace(/\[\s*i\s*\]/g,"[ "+d+" ]").replace(/UNROLLED_LOOP_INDEX/g,d);return a}function d_(h){let e="precision "+h.precision+" float;\nprecision "+h.precision+" int;";return"highp"===h.precision?e+="\n#define HIGH_PRECISION":"mediump"===h.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===h.precision&&(e+="\n#define LOW_PRECISION"),e}function ff(h,e,t,i){const a=h.getContext(),d=t.defines;let g=t.vertexShader,_=t.fragmentShader;const y=function df(h){let e="SHADOWMAP_TYPE_BASIC";return h.shadowMapType===rt?e="SHADOWMAP_TYPE_PCF":h.shadowMapType===xt?e="SHADOWMAP_TYPE_PCF_SOFT":h.shadowMapType===mt&&(e="SHADOWMAP_TYPE_VSM"),e}(t),b=function Uv(h){let e="ENVMAP_TYPE_CUBE";if(h.envMap)switch(h.envMapMode){case zr:case ri:e="ENVMAP_TYPE_CUBE";break;case So:e="ENVMAP_TYPE_CUBE_UV"}return e}(t),w=function qo(h){let e="ENVMAP_MODE_REFLECTION";return h.envMap&&h.envMapMode===ri&&(e="ENVMAP_MODE_REFRACTION"),e}(t),S=function ei(h){let e="ENVMAP_BLENDING_NONE";if(h.envMap)switch(h.combine){case io:e="ENVMAP_BLENDING_MULTIPLY";break;case Ir:e="ENVMAP_BLENDING_MIX";break;case Sa:e="ENVMAP_BLENDING_ADD"}return e}(t),E=function hf(h){const e=h.envMapCubeUVHeight;if(null===e)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:i,maxMip:t}}(t),L=t.isWebGL2?"":function kv(h){return[h.extensionDerivatives||h.envMapCubeUVHeight||h.bumpMap||h.tangentSpaceNormalMap||h.clearcoatNormalMap||h.flatShading||"physical"===h.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(h.extensionFragDepth||h.logarithmicDepthBuffer)&&h.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",h.extensionDrawBuffers&&h.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(h.extensionShaderTextureLOD||h.envMap||h.transmission)&&h.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(To).join("\n")}(t),G=function Gv(h){const e=[];for(const t in h){const i=h[t];!1!==i&&e.push("#define "+t+" "+i)}return e.join("\n")}(d),j=a.createProgram();let B,z,J=t.glslVersion?"#version "+t.glslVersion+"\n":"";t.isRawShaderMaterial?(B=[G].filter(To).join("\n"),B.length>0&&(B+="\n"),z=[L,G].filter(To).join("\n"),z.length>0&&(z+="\n")):(B=[d_(t),"#define SHADER_NAME "+t.shaderName,G,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+w:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&!1===t.flatShading?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+y:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(To).join("\n"),z=[L,d_(t),"#define SHADER_NAME "+t.shaderName,G,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+b:"",t.envMap?"#define "+w:"",t.envMap?"#define "+S:"",E?"#define CUBEUV_TEXEL_WIDTH "+E.texelWidth:"",E?"#define CUBEUV_TEXEL_HEIGHT "+E.texelHeight:"",E?"#define CUBEUV_MAX_MIP "+E.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+y:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==yi?"#define TONE_MAPPING":"",t.toneMapping!==yi?Bn.tonemapping_pars_fragment:"",t.toneMapping!==yi?jv("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Bn.encodings_pars_fragment,Bv("linearToOutputTexel",t.outputEncoding),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"","\n"].filter(To).join("\n")),g=l_(g),g=o_(g,t),g=a_(g,t),_=l_(_),_=o_(_,t),_=a_(_,t),g=om(g),_=om(_),t.isWebGL2&&!0!==t.isRawShaderMaterial&&(J="#version 300 es\n",B=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+B,z=["#define varying in",t.glslVersion===ul?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===ul?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+z);const Y=J+z+_,ne=uf(a,35633,J+B+g),ae=uf(a,35632,Y);if(a.attachShader(j,ne),a.attachShader(j,ae),void 0!==t.index0AttributeName?a.bindAttribLocation(j,0,t.index0AttributeName):!0===t.morphTargets&&a.bindAttribLocation(j,0,"position"),a.linkProgram(j),h.debug.checkShaderErrors){const ue=a.getProgramInfoLog(j).trim(),me=a.getShaderInfoLog(ne).trim(),Le=a.getShaderInfoLog(ae).trim();let at=!0,Ee=!0;if(!1===a.getProgramParameter(j,35714)){at=!1;const Me=s_(a,ne,"vertex"),qe=s_(a,ae,"fragment");console.error("THREE.WebGLProgram: Shader Error "+a.getError()+" - VALIDATE_STATUS "+a.getProgramParameter(j,35715)+"\n\nProgram Info Log: "+ue+"\n"+Me+"\n"+qe)}else""!==ue?console.warn("THREE.WebGLProgram: Program Info Log:",ue):(""===me||""===Le)&&(Ee=!1);Ee&&(this.diagnostics={runnable:at,programLog:ue,vertexShader:{log:me,prefix:B},fragmentShader:{log:Le,prefix:z}})}let he,Z;return a.deleteShader(ne),a.deleteShader(ae),this.getUniforms=function(){return void 0===he&&(he=new Hd(a,j)),he},this.getAttributes=function(){return void 0===Z&&(Z=function ku(h,e){const t={},i=h.getProgramParameter(e,35721);for(let a=0;a<i;a++){const d=h.getActiveAttrib(e,a),g=d.name;let _=1;35674===d.type&&(_=2),35675===d.type&&(_=3),35676===d.type&&(_=4),t[g]={type:d.type,location:h.getAttribLocation(e,g),locationSize:_}}return t}(a,j)),Z},this.destroy=function(){i.releaseStatesOfProgram(this),a.deleteProgram(j),this.program=void 0},this.name=t.shaderName,this.id=zd++,this.cacheKey=e,this.usedTimes=1,this.program=j,this.vertexShader=ne,this.fragmentShader=ae,this}let pf=0;class h_{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const i=e.fragmentShader,a=this._getShaderStage(e.vertexShader),d=this._getShaderStage(i),g=this._getShaderCacheForMaterial(e);return!1===g.has(a)&&(g.add(a),a.usedTimes++),!1===g.has(d)&&(g.add(d),d.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,0===i.usedTimes&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return void 0===i&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return void 0===i&&(i=new f_(e),t.set(e,i)),i}}class f_{constructor(e){this.id=pf++,this.code=e,this.usedTimes=0}}function mf(h,e,t,i,a,d,g){const _=new fl,y=new h_,b=[],w=a.isWebGL2,S=a.logarithmicDepthBuffer,E=a.vertexTextures;let L=a.precision;const G={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function j(Z,ue,me,Le,at){const Ee=Le.fog,Me=at.geometry,ut=(Z.isMeshStandardMaterial?t:e).get(Z.envMap||(Z.isMeshStandardMaterial?Le.environment:null)),Tt=ut&&ut.mapping===So?ut.image.height:null,ot=G[Z.type];null!==Z.precision&&(L=a.getMaxPrecision(Z.precision),L!==Z.precision&&console.warn("THREE.WebGLProgram.getParameters:",Z.precision,"not supported, using",L,"instead."));const Dt=Me.morphAttributes.position||Me.morphAttributes.normal||Me.morphAttributes.color,gt=void 0!==Dt?Dt.length:0;let $e,Pt,Et,$t,We=0;if(void 0!==Me.morphAttributes.position&&(We=1),void 0!==Me.morphAttributes.normal&&(We=2),void 0!==Me.morphAttributes.color&&(We=3),ot){const Zn=Ga[ot];$e=Zn.vertexShader,Pt=Zn.fragmentShader}else $e=Z.vertexShader,Pt=Z.fragmentShader,y.update(Z),Et=y.getVertexShaderID(Z),$t=y.getFragmentShaderID(Z);const et=h.getRenderTarget(),sn=Z.clearcoat>0,An=Z.iridescence>0;return{isWebGL2:w,shaderID:ot,shaderName:Z.type,vertexShader:$e,fragmentShader:Pt,defines:Z.defines,customVertexShaderID:Et,customFragmentShaderID:$t,isRawShaderMaterial:!0===Z.isRawShaderMaterial,glslVersion:Z.glslVersion,precision:L,instancing:!0===at.isInstancedMesh,instancingColor:!0===at.isInstancedMesh&&null!==at.instanceColor,supportsVertexTextures:E,outputEncoding:null===et?h.outputEncoding:!0===et.isXRRenderTarget?et.texture.encoding:Ws,map:!!Z.map,matcap:!!Z.matcap,envMap:!!ut,envMapMode:ut&&ut.mapping,envMapCubeUVHeight:Tt,lightMap:!!Z.lightMap,aoMap:!!Z.aoMap,emissiveMap:!!Z.emissiveMap,bumpMap:!!Z.bumpMap,normalMap:!!Z.normalMap,objectSpaceNormalMap:Z.normalMapType===pr,tangentSpaceNormalMap:Z.normalMapType===qr,decodeVideoTexture:!!Z.map&&!0===Z.map.isVideoTexture&&Z.map.encoding===hi,clearcoat:sn,clearcoatMap:sn&&!!Z.clearcoatMap,clearcoatRoughnessMap:sn&&!!Z.clearcoatRoughnessMap,clearcoatNormalMap:sn&&!!Z.clearcoatNormalMap,iridescence:An,iridescenceMap:An&&!!Z.iridescenceMap,iridescenceThicknessMap:An&&!!Z.iridescenceThicknessMap,displacementMap:!!Z.displacementMap,roughnessMap:!!Z.roughnessMap,metalnessMap:!!Z.metalnessMap,specularMap:!!Z.specularMap,specularIntensityMap:!!Z.specularIntensityMap,specularColorMap:!!Z.specularColorMap,opaque:!1===Z.transparent&&Z.blending===dt,alphaMap:!!Z.alphaMap,alphaTest:Z.alphaTest>0,gradientMap:!!Z.gradientMap,sheen:Z.sheen>0,sheenColorMap:!!Z.sheenColorMap,sheenRoughnessMap:!!Z.sheenRoughnessMap,transmission:Z.transmission>0,transmissionMap:!!Z.transmissionMap,thicknessMap:!!Z.thicknessMap,combine:Z.combine,vertexTangents:!!Z.normalMap&&!!Me.attributes.tangent,vertexColors:Z.vertexColors,vertexAlphas:!0===Z.vertexColors&&!!Me.attributes.color&&4===Me.attributes.color.itemSize,vertexUvs:!!(Z.map||Z.bumpMap||Z.normalMap||Z.specularMap||Z.alphaMap||Z.emissiveMap||Z.roughnessMap||Z.metalnessMap||Z.clearcoatMap||Z.clearcoatRoughnessMap||Z.clearcoatNormalMap||Z.iridescenceMap||Z.iridescenceThicknessMap||Z.displacementMap||Z.transmissionMap||Z.thicknessMap||Z.specularIntensityMap||Z.specularColorMap||Z.sheenColorMap||Z.sheenRoughnessMap),uvsVertexOnly:!(Z.map||Z.bumpMap||Z.normalMap||Z.specularMap||Z.alphaMap||Z.emissiveMap||Z.roughnessMap||Z.metalnessMap||Z.clearcoatNormalMap||Z.iridescenceMap||Z.iridescenceThicknessMap||Z.transmission>0||Z.transmissionMap||Z.thicknessMap||Z.specularIntensityMap||Z.specularColorMap||Z.sheen>0||Z.sheenColorMap||Z.sheenRoughnessMap||!Z.displacementMap),fog:!!Ee,useFog:!0===Z.fog,fogExp2:Ee&&Ee.isFogExp2,flatShading:!!Z.flatShading,sizeAttenuation:Z.sizeAttenuation,logarithmicDepthBuffer:S,skinning:!0===at.isSkinnedMesh,morphTargets:void 0!==Me.morphAttributes.position,morphNormals:void 0!==Me.morphAttributes.normal,morphColors:void 0!==Me.morphAttributes.color,morphTargetsCount:gt,morphTextureStride:We,numDirLights:ue.directional.length,numPointLights:ue.point.length,numSpotLights:ue.spot.length,numSpotLightMaps:ue.spotLightMap.length,numRectAreaLights:ue.rectArea.length,numHemiLights:ue.hemi.length,numDirLightShadows:ue.directionalShadowMap.length,numPointLightShadows:ue.pointShadowMap.length,numSpotLightShadows:ue.spotShadowMap.length,numSpotLightShadowsWithMaps:ue.numSpotLightShadowsWithMaps,numClippingPlanes:g.numPlanes,numClipIntersection:g.numIntersection,dithering:Z.dithering,shadowMapEnabled:h.shadowMap.enabled&&me.length>0,shadowMapType:h.shadowMap.type,toneMapping:Z.toneMapped?h.toneMapping:yi,physicallyCorrectLights:h.physicallyCorrectLights,premultipliedAlpha:Z.premultipliedAlpha,doubleSided:Z.side===ci,flipSided:Z.side===Kt,useDepthPacking:!!Z.depthPacking,depthPacking:Z.depthPacking||0,index0AttributeName:Z.index0AttributeName,extensionDerivatives:Z.extensions&&Z.extensions.derivatives,extensionFragDepth:Z.extensions&&Z.extensions.fragDepth,extensionDrawBuffers:Z.extensions&&Z.extensions.drawBuffers,extensionShaderTextureLOD:Z.extensions&&Z.extensions.shaderTextureLOD,rendererExtensionFragDepth:w||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:w||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:w||i.has("EXT_shader_texture_lod"),customProgramCacheKey:Z.customProgramCacheKey()}},getProgramCacheKey:function B(Z){const ue=[];if(Z.shaderID?ue.push(Z.shaderID):(ue.push(Z.customVertexShaderID),ue.push(Z.customFragmentShaderID)),void 0!==Z.defines)for(const me in Z.defines)ue.push(me),ue.push(Z.defines[me]);return!1===Z.isRawShaderMaterial&&(function z(Z,ue){Z.push(ue.precision),Z.push(ue.outputEncoding),Z.push(ue.envMapMode),Z.push(ue.envMapCubeUVHeight),Z.push(ue.combine),Z.push(ue.vertexUvs),Z.push(ue.fogExp2),Z.push(ue.sizeAttenuation),Z.push(ue.morphTargetsCount),Z.push(ue.morphAttributeCount),Z.push(ue.numDirLights),Z.push(ue.numPointLights),Z.push(ue.numSpotLights),Z.push(ue.numSpotLightMaps),Z.push(ue.numHemiLights),Z.push(ue.numRectAreaLights),Z.push(ue.numDirLightShadows),Z.push(ue.numPointLightShadows),Z.push(ue.numSpotLightShadows),Z.push(ue.numSpotLightShadowsWithMaps),Z.push(ue.shadowMapType),Z.push(ue.toneMapping),Z.push(ue.numClippingPlanes),Z.push(ue.numClipIntersection),Z.push(ue.depthPacking)}(ue,Z),function J(Z,ue){_.disableAll(),ue.isWebGL2&&_.enable(0),ue.supportsVertexTextures&&_.enable(1),ue.instancing&&_.enable(2),ue.instancingColor&&_.enable(3),ue.map&&_.enable(4),ue.matcap&&_.enable(5),ue.envMap&&_.enable(6),ue.lightMap&&_.enable(7),ue.aoMap&&_.enable(8),ue.emissiveMap&&_.enable(9),ue.bumpMap&&_.enable(10),ue.normalMap&&_.enable(11),ue.objectSpaceNormalMap&&_.enable(12),ue.tangentSpaceNormalMap&&_.enable(13),ue.clearcoat&&_.enable(14),ue.clearcoatMap&&_.enable(15),ue.clearcoatRoughnessMap&&_.enable(16),ue.clearcoatNormalMap&&_.enable(17),ue.iridescence&&_.enable(18),ue.iridescenceMap&&_.enable(19),ue.iridescenceThicknessMap&&_.enable(20),ue.displacementMap&&_.enable(21),ue.specularMap&&_.enable(22),ue.roughnessMap&&_.enable(23),ue.metalnessMap&&_.enable(24),ue.gradientMap&&_.enable(25),ue.alphaMap&&_.enable(26),ue.alphaTest&&_.enable(27),ue.vertexColors&&_.enable(28),ue.vertexAlphas&&_.enable(29),ue.vertexUvs&&_.enable(30),ue.vertexTangents&&_.enable(31),ue.uvsVertexOnly&&_.enable(32),Z.push(_.mask),_.disableAll(),ue.fog&&_.enable(0),ue.useFog&&_.enable(1),ue.flatShading&&_.enable(2),ue.logarithmicDepthBuffer&&_.enable(3),ue.skinning&&_.enable(4),ue.morphTargets&&_.enable(5),ue.morphNormals&&_.enable(6),ue.morphColors&&_.enable(7),ue.premultipliedAlpha&&_.enable(8),ue.shadowMapEnabled&&_.enable(9),ue.physicallyCorrectLights&&_.enable(10),ue.doubleSided&&_.enable(11),ue.flipSided&&_.enable(12),ue.useDepthPacking&&_.enable(13),ue.dithering&&_.enable(14),ue.specularIntensityMap&&_.enable(15),ue.specularColorMap&&_.enable(16),ue.transmission&&_.enable(17),ue.transmissionMap&&_.enable(18),ue.thicknessMap&&_.enable(19),ue.sheen&&_.enable(20),ue.sheenColorMap&&_.enable(21),ue.sheenRoughnessMap&&_.enable(22),ue.decodeVideoTexture&&_.enable(23),ue.opaque&&_.enable(24),Z.push(_.mask)}(ue,Z),ue.push(h.outputEncoding)),ue.push(Z.customProgramCacheKey),ue.join()},getUniforms:function H(Z){const ue=G[Z.type];let me;return me=ue?Dr.clone(Ga[ue].uniforms):Z.uniforms,me},acquireProgram:function Y(Z,ue){let me;for(let Le=0,at=b.length;Le<at;Le++){const Ee=b[Le];if(Ee.cacheKey===ue){me=Ee,++me.usedTimes;break}}return void 0===me&&(me=new ff(h,ue,Z,d),b.push(me)),me},releaseProgram:function ne(Z){if(0==--Z.usedTimes){const ue=b.indexOf(Z);b[ue]=b[b.length-1],b.pop(),Z.destroy()}},releaseShaderCache:function ae(Z){y.remove(Z)},programs:b,dispose:function he(){y.dispose()}}}function p_(){let h=new WeakMap;return{get:function e(d){let g=h.get(d);return void 0===g&&(g={},h.set(d,g)),g},remove:function t(d){h.delete(d)},update:function i(d,g,_){h.get(d)[g]=_},dispose:function a(){h=new WeakMap}}}function Gu(h,e){return h.groupOrder!==e.groupOrder?h.groupOrder-e.groupOrder:h.renderOrder!==e.renderOrder?h.renderOrder-e.renderOrder:h.material.id!==e.material.id?h.material.id-e.material.id:h.z!==e.z?h.z-e.z:h.id-e.id}function Vu(h,e){return h.groupOrder!==e.groupOrder?h.groupOrder-e.groupOrder:h.renderOrder!==e.renderOrder?h.renderOrder-e.renderOrder:h.z!==e.z?e.z-h.z:h.id-e.id}function gf(){const h=[];let e=0;const t=[],i=[],a=[];function g(S,E,L,G,j,B){let z=h[e];return void 0===z?(z={id:S.id,object:S,geometry:E,material:L,groupOrder:G,renderOrder:S.renderOrder,z:j,group:B},h[e]=z):(z.id=S.id,z.object=S,z.geometry=E,z.material=L,z.groupOrder=G,z.renderOrder=S.renderOrder,z.z=j,z.group=B),e++,z}return{opaque:t,transmissive:i,transparent:a,init:function d(){e=0,t.length=0,i.length=0,a.length=0},push:function _(S,E,L,G,j,B){const z=g(S,E,L,G,j,B);L.transmission>0?i.push(z):!0===L.transparent?a.push(z):t.push(z)},unshift:function y(S,E,L,G,j,B){const z=g(S,E,L,G,j,B);L.transmission>0?i.unshift(z):!0===L.transparent?a.unshift(z):t.unshift(z)},finish:function w(){for(let S=e,E=h.length;S<E;S++){const L=h[S];if(null===L.id)break;L.id=null,L.object=null,L.geometry=null,L.material=null,L.group=null}},sort:function b(S,E){t.length>1&&t.sort(S||Gu),i.length>1&&i.sort(E||Vu),a.length>1&&a.sort(E||Vu)}}}function Dn(){let h=new WeakMap;return{get:function e(i,a){const d=h.get(i);let g;return void 0===d?(g=new gf,h.set(i,[g])):a>=d.length?(g=new gf,d.push(g)):g=d[a],g},dispose:function t(){h=new WeakMap}}}function am(){const h={};return{get:function(e){if(void 0!==h[e.id])return h[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new ie,color:new Yt};break;case"SpotLight":t={position:new ie,direction:new ie,color:new Yt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new ie,color:new Yt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new ie,skyColor:new Yt,groundColor:new Yt};break;case"RectAreaLight":t={color:new Yt,position:new ie,halfWidth:new ie,halfHeight:new ie}}return h[e.id]=t,t}}}let cm=0;function nu(h,e){return(e.castShadow?2:0)-(h.castShadow?2:0)+(e.map?1:0)-(h.map?1:0)}function fc(h,e){const t=new am,i=function lm(){const h={};return{get:function(e){if(void 0!==h[e.id])return h[e.id];let t;switch(e.type){case"DirectionalLight":case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new st};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new st,shadowCameraNear:1,shadowCameraFar:1e3}}return h[e.id]=t,t}}}(),a={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let w=0;w<9;w++)a.probe.push(new ie);const d=new ie,g=new Rt,_=new Rt;return{setup:function y(w,S){let E=0,L=0,G=0;for(let Le=0;Le<9;Le++)a.probe[Le].set(0,0,0);let j=0,B=0,z=0,J=0,H=0,Y=0,ne=0,ae=0,he=0,Z=0;w.sort(nu);const ue=!0!==S?Math.PI:1;for(let Le=0,at=w.length;Le<at;Le++){const Ee=w[Le],Me=Ee.color,qe=Ee.intensity,ut=Ee.distance,Tt=Ee.shadow&&Ee.shadow.map?Ee.shadow.map.texture:null;if(Ee.isAmbientLight)E+=Me.r*qe*ue,L+=Me.g*qe*ue,G+=Me.b*qe*ue;else if(Ee.isLightProbe)for(let ot=0;ot<9;ot++)a.probe[ot].addScaledVector(Ee.sh.coefficients[ot],qe);else if(Ee.isDirectionalLight){const ot=t.get(Ee);if(ot.color.copy(Ee.color).multiplyScalar(Ee.intensity*ue),Ee.castShadow){const Dt=Ee.shadow,gt=i.get(Ee);gt.shadowBias=Dt.bias,gt.shadowNormalBias=Dt.normalBias,gt.shadowRadius=Dt.radius,gt.shadowMapSize=Dt.mapSize,a.directionalShadow[j]=gt,a.directionalShadowMap[j]=Tt,a.directionalShadowMatrix[j]=Ee.shadow.matrix,Y++}a.directional[j]=ot,j++}else if(Ee.isSpotLight){const ot=t.get(Ee);ot.position.setFromMatrixPosition(Ee.matrixWorld),ot.color.copy(Me).multiplyScalar(qe*ue),ot.distance=ut,ot.coneCos=Math.cos(Ee.angle),ot.penumbraCos=Math.cos(Ee.angle*(1-Ee.penumbra)),ot.decay=Ee.decay,a.spot[z]=ot;const Dt=Ee.shadow;if(Ee.map&&(a.spotLightMap[he]=Ee.map,he++,Dt.updateMatrices(Ee),Ee.castShadow&&Z++),a.spotLightMatrix[z]=Dt.matrix,Ee.castShadow){const gt=i.get(Ee);gt.shadowBias=Dt.bias,gt.shadowNormalBias=Dt.normalBias,gt.shadowRadius=Dt.radius,gt.shadowMapSize=Dt.mapSize,a.spotShadow[z]=gt,a.spotShadowMap[z]=Tt,ae++}z++}else if(Ee.isRectAreaLight){const ot=t.get(Ee);ot.color.copy(Me).multiplyScalar(qe),ot.halfWidth.set(.5*Ee.width,0,0),ot.halfHeight.set(0,.5*Ee.height,0),a.rectArea[J]=ot,J++}else if(Ee.isPointLight){const ot=t.get(Ee);if(ot.color.copy(Ee.color).multiplyScalar(Ee.intensity*ue),ot.distance=Ee.distance,ot.decay=Ee.decay,Ee.castShadow){const Dt=Ee.shadow,gt=i.get(Ee);gt.shadowBias=Dt.bias,gt.shadowNormalBias=Dt.normalBias,gt.shadowRadius=Dt.radius,gt.shadowMapSize=Dt.mapSize,gt.shadowCameraNear=Dt.camera.near,gt.shadowCameraFar=Dt.camera.far,a.pointShadow[B]=gt,a.pointShadowMap[B]=Tt,a.pointShadowMatrix[B]=Ee.shadow.matrix,ne++}a.point[B]=ot,B++}else if(Ee.isHemisphereLight){const ot=t.get(Ee);ot.skyColor.copy(Ee.color).multiplyScalar(qe*ue),ot.groundColor.copy(Ee.groundColor).multiplyScalar(qe*ue),a.hemi[H]=ot,H++}}J>0&&(e.isWebGL2||!0===h.has("OES_texture_float_linear")?(a.rectAreaLTC1=At.LTC_FLOAT_1,a.rectAreaLTC2=At.LTC_FLOAT_2):!0===h.has("OES_texture_half_float_linear")?(a.rectAreaLTC1=At.LTC_HALF_1,a.rectAreaLTC2=At.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),a.ambient[0]=E,a.ambient[1]=L,a.ambient[2]=G;const me=a.hash;(me.directionalLength!==j||me.pointLength!==B||me.spotLength!==z||me.rectAreaLength!==J||me.hemiLength!==H||me.numDirectionalShadows!==Y||me.numPointShadows!==ne||me.numSpotShadows!==ae||me.numSpotMaps!==he)&&(a.directional.length=j,a.spot.length=z,a.rectArea.length=J,a.point.length=B,a.hemi.length=H,a.directionalShadow.length=Y,a.directionalShadowMap.length=Y,a.pointShadow.length=ne,a.pointShadowMap.length=ne,a.spotShadow.length=ae,a.spotShadowMap.length=ae,a.directionalShadowMatrix.length=Y,a.pointShadowMatrix.length=ne,a.spotLightMatrix.length=ae+he-Z,a.spotLightMap.length=he,a.numSpotLightShadowsWithMaps=Z,me.directionalLength=j,me.pointLength=B,me.spotLength=z,me.rectAreaLength=J,me.hemiLength=H,me.numDirectionalShadows=Y,me.numPointShadows=ne,me.numSpotShadows=ae,me.numSpotMaps=he,a.version=cm++)},setupView:function b(w,S){let E=0,L=0,G=0,j=0,B=0;const z=S.matrixWorldInverse;for(let J=0,H=w.length;J<H;J++){const Y=w[J];if(Y.isDirectionalLight){const ne=a.directional[E];ne.direction.setFromMatrixPosition(Y.matrixWorld),d.setFromMatrixPosition(Y.target.matrixWorld),ne.direction.sub(d),ne.direction.transformDirection(z),E++}else if(Y.isSpotLight){const ne=a.spot[G];ne.position.setFromMatrixPosition(Y.matrixWorld),ne.position.applyMatrix4(z),ne.direction.setFromMatrixPosition(Y.matrixWorld),d.setFromMatrixPosition(Y.target.matrixWorld),ne.direction.sub(d),ne.direction.transformDirection(z),G++}else if(Y.isRectAreaLight){const ne=a.rectArea[j];ne.position.setFromMatrixPosition(Y.matrixWorld),ne.position.applyMatrix4(z),_.identity(),g.copy(Y.matrixWorld),g.premultiply(z),_.extractRotation(g),ne.halfWidth.set(.5*Y.width,0,0),ne.halfHeight.set(0,.5*Y.height,0),ne.halfWidth.applyMatrix4(_),ne.halfHeight.applyMatrix4(_),j++}else if(Y.isPointLight){const ne=a.point[L];ne.position.setFromMatrixPosition(Y.matrixWorld),ne.position.applyMatrix4(z),L++}else if(Y.isHemisphereLight){const ne=a.hemi[B];ne.direction.setFromMatrixPosition(Y.matrixWorld),ne.direction.transformDirection(z),B++}}},state:a}}function pc(h,e){const t=new fc(h,e),i=[],a=[];return{init:function d(){i.length=0,a.length=0},state:{lightsArray:i,shadowsArray:a,lights:t},setupLights:function y(S){t.setup(i,S)},setupLightsView:function b(S){t.setupView(i,S)},pushLight:function g(S){i.push(S)},pushShadow:function _(S){a.push(S)}}}function Wd(h,e){let t=new WeakMap;return{get:function i(d,g=0){const _=t.get(d);let y;return void 0===_?(y=new pc(h,e),t.set(d,[y])):g>=_.length?(y=new pc(h,e),_.push(y)):y=_[g],y},dispose:function a(){t=new WeakMap}}}class $d extends _r{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class Uu extends _r{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new ie,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const mc="void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",m_="uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}";function g_(h,e,t){let i=new Dh;const a=new st,d=new st,g=new Wn,_=new $d({depthPacking:Ao}),y=new Uu,b={},w=t.maxTextureSize,S={0:Kt,1:en,2:ci},E=new cs({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new st},radius:{value:4}},vertexShader:mc,fragmentShader:m_}),L=E.clone();L.defines.HORIZONTAL_PASS=1;const G=new Nn;G.setAttribute("position",new rr(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const j=new V(G,E),B=this;function z(Y,ne){const ae=e.update(j);E.defines.VSM_SAMPLES!==Y.blurSamples&&(E.defines.VSM_SAMPLES=Y.blurSamples,L.defines.VSM_SAMPLES=Y.blurSamples,E.needsUpdate=!0,L.needsUpdate=!0),null===Y.mapPass&&(Y.mapPass=new po(a.x,a.y)),E.uniforms.shadow_pass.value=Y.map.texture,E.uniforms.resolution.value=Y.mapSize,E.uniforms.radius.value=Y.radius,h.setRenderTarget(Y.mapPass),h.clear(),h.renderBufferDirect(ne,null,ae,E,j,null),L.uniforms.shadow_pass.value=Y.mapPass.texture,L.uniforms.resolution.value=Y.mapSize,L.uniforms.radius.value=Y.radius,h.setRenderTarget(Y.map),h.clear(),h.renderBufferDirect(ne,null,ae,L,j,null)}function J(Y,ne,ae,he,Z,ue){let me=null;const Le=!0===ae.isPointLight?Y.customDistanceMaterial:Y.customDepthMaterial;if(void 0!==Le)me=Le;else if(me=!0===ae.isPointLight?y:_,h.localClippingEnabled&&!0===ne.clipShadows&&Array.isArray(ne.clippingPlanes)&&0!==ne.clippingPlanes.length||ne.displacementMap&&0!==ne.displacementScale||ne.alphaMap&&ne.alphaTest>0||ne.map&&ne.alphaTest>0){const at=me.uuid,Ee=ne.uuid;let Me=b[at];void 0===Me&&(Me={},b[at]=Me);let qe=Me[Ee];void 0===qe&&(qe=me.clone(),Me[Ee]=qe),me=qe}return me.visible=ne.visible,me.wireframe=ne.wireframe,me.side=ue===mt?null!==ne.shadowSide?ne.shadowSide:ne.side:null!==ne.shadowSide?ne.shadowSide:S[ne.side],me.alphaMap=ne.alphaMap,me.alphaTest=ne.alphaTest,me.map=ne.map,me.clipShadows=ne.clipShadows,me.clippingPlanes=ne.clippingPlanes,me.clipIntersection=ne.clipIntersection,me.displacementMap=ne.displacementMap,me.displacementScale=ne.displacementScale,me.displacementBias=ne.displacementBias,me.wireframeLinewidth=ne.wireframeLinewidth,me.linewidth=ne.linewidth,!0===ae.isPointLight&&!0===me.isMeshDistanceMaterial&&(me.referencePosition.setFromMatrixPosition(ae.matrixWorld),me.nearDistance=he,me.farDistance=Z),me}function H(Y,ne,ae,he,Z){if(!1===Y.visible)return;if(Y.layers.test(ne.layers)&&(Y.isMesh||Y.isLine||Y.isPoints)&&(Y.castShadow||Y.receiveShadow&&Z===mt)&&(!Y.frustumCulled||i.intersectsObject(Y))){Y.modelViewMatrix.multiplyMatrices(ae.matrixWorldInverse,Y.matrixWorld);const Le=e.update(Y),at=Y.material;if(Array.isArray(at)){const Ee=Le.groups;for(let Me=0,qe=Ee.length;Me<qe;Me++){const ut=Ee[Me],Tt=at[ut.materialIndex];if(Tt&&Tt.visible){const ot=J(Y,Tt,he,ae.near,ae.far,Z);h.renderBufferDirect(ae,null,Le,ot,Y,ut)}}}else if(at.visible){const Ee=J(Y,at,he,ae.near,ae.far,Z);h.renderBufferDirect(ae,null,Le,Ee,Y,null)}}const me=Y.children;for(let Le=0,at=me.length;Le<at;Le++)H(me[Le],ne,ae,he,Z)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=rt,this.render=function(Y,ne,ae){if(!1===B.enabled||!1===B.autoUpdate&&!1===B.needsUpdate||0===Y.length)return;const he=h.getRenderTarget(),Z=h.getActiveCubeFace(),ue=h.getActiveMipmapLevel(),me=h.state;me.setBlending(Ne),me.buffers.color.setClear(1,1,1,1),me.buffers.depth.setTest(!0),me.setScissorTest(!1);for(let Le=0,at=Y.length;Le<at;Le++){const Ee=Y[Le],Me=Ee.shadow;if(void 0===Me){console.warn("THREE.WebGLShadowMap:",Ee,"has no shadow.");continue}if(!1===Me.autoUpdate&&!1===Me.needsUpdate)continue;a.copy(Me.mapSize);const qe=Me.getFrameExtents();a.multiply(qe),d.copy(Me.mapSize),(a.x>w||a.y>w)&&(a.x>w&&(d.x=Math.floor(w/qe.x),a.x=d.x*qe.x,Me.mapSize.x=d.x),a.y>w&&(d.y=Math.floor(w/qe.y),a.y=d.y*qe.y,Me.mapSize.y=d.y)),null===Me.map&&(Me.map=new po(a.x,a.y,this.type!==mt?{minFilter:In,magFilter:In}:{}),Me.map.texture.name=Ee.name+".shadowMap",Me.camera.updateProjectionMatrix()),h.setRenderTarget(Me.map),h.clear();const ut=Me.getViewportCount();for(let Tt=0;Tt<ut;Tt++){const ot=Me.getViewport(Tt);g.set(d.x*ot.x,d.y*ot.y,d.x*ot.z,d.y*ot.w),me.viewport(g),Me.updateMatrices(Ee,Tt),i=Me.getFrustum(),H(ne,ae,Me.camera,Ee,this.type)}!0!==Me.isPointLightShadow&&this.type===mt&&z(Me,ae),Me.needsUpdate=!1}B.needsUpdate=!1,h.setRenderTarget(he,Z,ue)}}function __(h,e,t){const i=t.isWebGL2,_=new function a(){let ve=!1;const Ze=new Wn;let Mt=null;const Qt=new Wn(0,0,0,0);return{setMask:function(pn){Mt!==pn&&!ve&&(h.colorMask(pn,pn,pn,pn),Mt=pn)},setLocked:function(pn){ve=pn},setClear:function(pn,Zi,Ls,wo,ip){!0===ip&&(pn*=wo,Zi*=wo,Ls*=wo),Ze.set(pn,Zi,Ls,wo),!1===Qt.equals(Ze)&&(h.clearColor(pn,Zi,Ls,wo),Qt.copy(Ze))},reset:function(){ve=!1,Mt=null,Qt.set(-1,0,0,0)}}},y=new function d(){let ve=!1,Ze=null,Mt=null,Qt=null;return{setTest:function(pn){pn?Pn(2929):sn(2929)},setMask:function(pn){Ze!==pn&&!ve&&(h.depthMask(pn),Ze=pn)},setFunc:function(pn){if(Mt!==pn){switch(pn){case zt:h.depthFunc(512);break;case ii:h.depthFunc(519);break;case ts:h.depthFunc(513);break;case ln:h.depthFunc(515);break;case cn:h.depthFunc(514);break;case cr:h.depthFunc(518);break;case Qn:h.depthFunc(516);break;case Ar:h.depthFunc(517);break;default:h.depthFunc(515)}Mt=pn}},setLocked:function(pn){ve=pn},setClear:function(pn){Qt!==pn&&(h.clearDepth(pn),Qt=pn)},reset:function(){ve=!1,Ze=null,Mt=null,Qt=null}}},b=new function g(){let ve=!1,Ze=null,Mt=null,Qt=null,pn=null,Zi=null,Ls=null,wo=null,ip=null;return{setTest:function(Er){ve||(Er?Pn(2960):sn(2960))},setMask:function(Er){Ze!==Er&&!ve&&(h.stencilMask(Er),Ze=Er)},setFunc:function(Er,md,jl){(Mt!==Er||Qt!==md||pn!==jl)&&(h.stencilFunc(Er,md,jl),Mt=Er,Qt=md,pn=jl)},setOp:function(Er,md,jl){(Zi!==Er||Ls!==md||wo!==jl)&&(h.stencilOp(Er,md,jl),Zi=Er,Ls=md,wo=jl)},setLocked:function(Er){ve=Er},setClear:function(Er){ip!==Er&&(h.clearStencil(Er),ip=Er)},reset:function(){ve=!1,Ze=null,Mt=null,Qt=null,pn=null,Zi=null,Ls=null,wo=null,ip=null}}},w=new WeakMap,S=new WeakMap;let E={},L={},G=new WeakMap,j=[],B=null,z=!1,J=null,H=null,Y=null,ne=null,ae=null,he=null,Z=null,ue=!1,me=null,Le=null,at=null,Ee=null,Me=null;const qe=h.getParameter(35661);let ut=!1,Tt=0;const ot=h.getParameter(7938);-1!==ot.indexOf("WebGL")?(Tt=parseFloat(/^WebGL (\d)/.exec(ot)[1]),ut=Tt>=1):-1!==ot.indexOf("OpenGL ES")&&(Tt=parseFloat(/^OpenGL ES (\d)/.exec(ot)[1]),ut=Tt>=2);let Dt=null,gt={};const We=h.getParameter(3088),$e=h.getParameter(2978),Pt=(new Wn).fromArray(We),Et=(new Wn).fromArray($e);function $t(ve,Ze,Mt){const Qt=new Uint8Array(4),pn=h.createTexture();h.bindTexture(ve,pn),h.texParameteri(ve,10241,9728),h.texParameteri(ve,10240,9728);for(let Zi=0;Zi<Mt;Zi++)h.texImage2D(Ze+Zi,0,6408,1,1,0,6408,5121,Qt);return pn}const et={};function Pn(ve){!0!==E[ve]&&(h.enable(ve),E[ve]=!0)}function sn(ve){!1!==E[ve]&&(h.disable(ve),E[ve]=!1)}et[3553]=$t(3553,3553,1),et[34067]=$t(34067,34069,6),_.setClear(0,0,0,1),y.setClear(1),b.setClear(0),Pn(2929),y.setFunc(ln),u(!1),m(Ve),Pn(2884),r(Ne);const lt={[Zt]:32774,[Ht]:32778,[Bt]:32779};if(i)lt[Kn]=32775,lt[Jt]=32776;else{const ve=e.get("EXT_blend_minmax");null!==ve&&(lt[Kn]=ve.MIN_EXT,lt[Jt]=ve.MAX_EXT)}const n={[ke]:0,[Be]:1,[Ue]:768,[bt]:770,[Tn]:776,[Vi]:774,[dn]:772,[Ye]:769,[yt]:771,[fn]:775,[Gn]:773};function r(ve,Ze,Mt,Qt,pn,Zi,Ls,wo){if(ve!==Ne){if(!1===z&&(Pn(3042),z=!0),ve===Lt)pn=pn||Ze,Zi=Zi||Mt,Ls=Ls||Qt,(Ze!==H||pn!==ae)&&(h.blendEquationSeparate(lt[Ze],lt[pn]),H=Ze,ae=pn),(Mt!==Y||Qt!==ne||Zi!==he||Ls!==Z)&&(h.blendFuncSeparate(n[Mt],n[Qt],n[Zi],n[Ls]),Y=Mt,ne=Qt,he=Zi,Z=Ls),J=ve,ue=!1;else if(ve!==J||wo!==ue){if((H!==Zt||ae!==Zt)&&(h.blendEquation(32774),H=Zt,ae=Zt),wo)switch(ve){case dt:h.blendFuncSeparate(1,771,1,771);break;case je:h.blendFunc(1,1);break;case Ot:h.blendFuncSeparate(0,769,0,1);break;case Ut:h.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",ve)}else switch(ve){case dt:h.blendFuncSeparate(770,771,1,771);break;case je:h.blendFunc(770,1);break;case Ot:h.blendFuncSeparate(0,769,0,1);break;case Ut:h.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",ve)}Y=null,ne=null,he=null,Z=null,J=ve,ue=wo}}else!0===z&&(sn(3042),z=!1)}function u(ve){me!==ve&&(h.frontFace(ve?2304:2305),me=ve)}function m(ve){ve!==ht?(Pn(2884),ve!==Le&&h.cullFace(ve===Ve?1029:ve===He?1028:1032)):sn(2884),Le=ve}function x(ve,Ze,Mt){ve?(Pn(32823),(Ee!==Ze||Me!==Mt)&&(h.polygonOffset(Ze,Mt),Ee=Ze,Me=Mt)):sn(32823)}return{buffers:{color:_,depth:y,stencil:b},enable:Pn,disable:sn,bindFramebuffer:function An(ve,Ze){return L[ve]!==Ze&&(h.bindFramebuffer(ve,Ze),L[ve]=Ze,i&&(36009===ve&&(L[36160]=Ze),36160===ve&&(L[36009]=Ze)),!0)},drawBuffers:function qt(ve,Ze){let Mt=j,Qt=!1;if(ve)if(Mt=G.get(Ze),void 0===Mt&&(Mt=[],G.set(Ze,Mt)),ve.isWebGLMultipleRenderTargets){const pn=ve.texture;if(Mt.length!==pn.length||36064!==Mt[0]){for(let Zi=0,Ls=pn.length;Zi<Ls;Zi++)Mt[Zi]=36064+Zi;Mt.length=pn.length,Qt=!0}}else 36064!==Mt[0]&&(Mt[0]=36064,Qt=!0);else 1029!==Mt[0]&&(Mt[0]=1029,Qt=!0);Qt&&(t.isWebGL2?h.drawBuffers(Mt):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(Mt))},useProgram:function Zn(ve){return B!==ve&&(h.useProgram(ve),B=ve,!0)},setBlending:r,setMaterial:function o(ve,Ze){ve.side===ci?sn(2884):Pn(2884);let Mt=ve.side===Kt;Ze&&(Mt=!Mt),u(Mt),ve.blending===dt&&!1===ve.transparent?r(Ne):r(ve.blending,ve.blendEquation,ve.blendSrc,ve.blendDst,ve.blendEquationAlpha,ve.blendSrcAlpha,ve.blendDstAlpha,ve.premultipliedAlpha),y.setFunc(ve.depthFunc),y.setTest(ve.depthTest),y.setMask(ve.depthWrite),_.setMask(ve.colorWrite);const Qt=ve.stencilWrite;b.setTest(Qt),Qt&&(b.setMask(ve.stencilWriteMask),b.setFunc(ve.stencilFunc,ve.stencilRef,ve.stencilFuncMask),b.setOp(ve.stencilFail,ve.stencilZFail,ve.stencilZPass)),x(ve.polygonOffset,ve.polygonOffsetFactor,ve.polygonOffsetUnits),!0===ve.alphaToCoverage?Pn(32926):sn(32926)},setFlipSided:u,setCullFace:m,setLineWidth:function v(ve){ve!==at&&(ut&&h.lineWidth(ve),at=ve)},setPolygonOffset:x,setScissorTest:function C(ve){ve?Pn(3089):sn(3089)},activeTexture:function O(ve){void 0===ve&&(ve=33984+qe-1),Dt!==ve&&(h.activeTexture(ve),Dt=ve)},bindTexture:function A(ve,Ze,Mt){void 0===Mt&&(Mt=null===Dt?33984+qe-1:Dt);let Qt=gt[Mt];void 0===Qt&&(Qt={type:void 0,texture:void 0},gt[Mt]=Qt),(Qt.type!==ve||Qt.texture!==Ze)&&(Dt!==Mt&&(h.activeTexture(Mt),Dt=Mt),h.bindTexture(ve,Ze||et[ve]),Qt.type=ve,Qt.texture=Ze)},unbindTexture:function N(){const ve=gt[Dt];void 0!==ve&&void 0!==ve.type&&(h.bindTexture(ve.type,null),ve.type=void 0,ve.texture=void 0)},compressedTexImage2D:function $(){try{h.compressedTexImage2D.apply(h,arguments)}catch(ve){console.error("THREE.WebGLState:",ve)}},compressedTexImage3D:function te(){try{h.compressedTexImage3D.apply(h,arguments)}catch(ve){console.error("THREE.WebGLState:",ve)}},texImage2D:function Ce(){try{h.texImage2D.apply(h,arguments)}catch(ve){console.error("THREE.WebGLState:",ve)}},texImage3D:function pt(){try{h.texImage3D.apply(h,arguments)}catch(ve){console.error("THREE.WebGLState:",ve)}},updateUBOMapping:function Oi(ve,Ze){let Mt=S.get(Ze);void 0===Mt&&(Mt=new WeakMap,S.set(Ze,Mt));let Qt=Mt.get(ve);void 0===Qt&&(Qt=h.getUniformBlockIndex(Ze,ve.name),Mt.set(ve,Qt))},uniformBlockBinding:function Cr(ve,Ze){const Qt=S.get(Ze).get(ve);w.get(Ze)!==Qt&&(h.uniformBlockBinding(Ze,Qt,ve.__bindingPointIndex),w.set(Ze,Qt))},texStorage2D:function _e(){try{h.texStorage2D.apply(h,arguments)}catch(ve){console.error("THREE.WebGLState:",ve)}},texStorage3D:function ct(){try{h.texStorage3D.apply(h,arguments)}catch(ve){console.error("THREE.WebGLState:",ve)}},texSubImage2D:function ce(){try{h.texSubImage2D.apply(h,arguments)}catch(ve){console.error("THREE.WebGLState:",ve)}},texSubImage3D:function ge(){try{h.texSubImage3D.apply(h,arguments)}catch(ve){console.error("THREE.WebGLState:",ve)}},compressedTexSubImage2D:function Fe(){try{h.compressedTexSubImage2D.apply(h,arguments)}catch(ve){console.error("THREE.WebGLState:",ve)}},compressedTexSubImage3D:function Ie(){try{h.compressedTexSubImage3D.apply(h,arguments)}catch(ve){console.error("THREE.WebGLState:",ve)}},scissor:function kt(ve){!1===Pt.equals(ve)&&(h.scissor(ve.x,ve.y,ve.z,ve.w),Pt.copy(ve))},viewport:function Gt(ve){!1===Et.equals(ve)&&(h.viewport(ve.x,ve.y,ve.z,ve.w),Et.copy(ve))},reset:function Fs(){h.disable(3042),h.disable(2884),h.disable(2929),h.disable(32823),h.disable(3089),h.disable(2960),h.disable(32926),h.blendEquation(32774),h.blendFunc(1,0),h.blendFuncSeparate(1,0,1,0),h.colorMask(!0,!0,!0,!0),h.clearColor(0,0,0,0),h.depthMask(!0),h.depthFunc(513),h.clearDepth(1),h.stencilMask(4294967295),h.stencilFunc(519,0,4294967295),h.stencilOp(7680,7680,7680),h.clearStencil(0),h.cullFace(1029),h.frontFace(2305),h.polygonOffset(0,0),h.activeTexture(33984),h.bindFramebuffer(36160,null),!0===i&&(h.bindFramebuffer(36009,null),h.bindFramebuffer(36008,null)),h.useProgram(null),h.lineWidth(1),h.scissor(0,0,h.canvas.width,h.canvas.height),h.viewport(0,0,h.canvas.width,h.canvas.height),E={},Dt=null,gt={},L={},G=new WeakMap,j=[],B=null,z=!1,J=null,H=null,Y=null,ne=null,ae=null,he=null,Z=null,ue=!1,me=null,Le=null,at=null,Ee=null,Me=null,Pt.set(0,0,h.canvas.width,h.canvas.height),Et.set(0,0,h.canvas.width,h.canvas.height),_.reset(),y.reset(),b.reset()}}}function iu(h,e,t,i,a,d,g){const _=a.isWebGL2,y=a.maxTextures,b=a.maxCubemapSize,w=a.maxTextureSize,S=a.maxSamples,E=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,L=!(typeof navigator>"u")&&/OculusBrowser/g.test(navigator.userAgent),G=new WeakMap;let j;const B=new WeakMap;let z=!1;try{z=typeof OffscreenCanvas<"u"&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch{}function J(A,N){return z?new OffscreenCanvas(A,N):Ke("canvas")}function H(A,N,$,te){let ce=1;if((A.width>te||A.height>te)&&(ce=te/Math.max(A.width,A.height)),ce<1||!0===N){if(typeof HTMLImageElement<"u"&&A instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&A instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&A instanceof ImageBitmap){const ge=N?hl:Math.floor,Fe=ge(ce*A.width),Ie=ge(ce*A.height);void 0===j&&(j=J(Fe,Ie));const _e=$?J(Fe,Ie):j;return _e.width=Fe,_e.height=Ie,_e.getContext("2d").drawImage(A,0,0,Fe,Ie),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+A.width+"x"+A.height+") to ("+Fe+"x"+Ie+")."),_e}return"data"in A&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+A.width+"x"+A.height+")."),A}return A}function Y(A){return ho(A.width)&&ho(A.height)}function ae(A,N){return A.generateMipmaps&&N&&A.minFilter!==In&&A.minFilter!==Ki}function he(A){h.generateMipmap(A)}function Z(A,N,$,te,ce=!1){if(!1===_)return N;if(null!==A){if(void 0!==h[A])return h[A];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+A+"'")}let ge=N;return 6403===N&&(5126===$&&(ge=33326),5131===$&&(ge=33325),5121===$&&(ge=33321)),33319===N&&(5126===$&&(ge=33328),5131===$&&(ge=33327),5121===$&&(ge=33323)),6408===N&&(5126===$&&(ge=34836),5131===$&&(ge=34842),5121===$&&(ge=te===hi&&!1===ce?35907:32856),32819===$&&(ge=32854),32820===$&&(ge=32855)),(33325===ge||33326===ge||33327===ge||33328===ge||34842===ge||34836===ge)&&e.get("EXT_color_buffer_float"),ge}function ue(A,N,$){return!0===ae(A,$)||A.isFramebufferTexture&&A.minFilter!==In&&A.minFilter!==Ki?Math.log2(Math.max(N.width,N.height))+1:void 0!==A.mipmaps&&A.mipmaps.length>0?A.mipmaps.length:A.isCompressedTexture&&Array.isArray(A.image)?N.mipmaps.length:1}function me(A){return A===In||A===un||A===js?9728:9729}function Le(A){const N=A.target;N.removeEventListener("dispose",Le),function Ee(A){const N=i.get(A);if(void 0===N.__webglInit)return;const $=A.source,te=B.get($);if(te){const ce=te[N.__cacheKey];ce.usedTimes--,0===ce.usedTimes&&Me(A),0===Object.keys(te).length&&B.delete($)}i.remove(A)}(N),N.isVideoTexture&&G.delete(N)}function at(A){const N=A.target;N.removeEventListener("dispose",at),function qe(A){const N=A.texture,$=i.get(A),te=i.get(N);if(void 0!==te.__webglTexture&&(h.deleteTexture(te.__webglTexture),g.memory.textures--),A.depthTexture&&A.depthTexture.dispose(),A.isWebGLCubeRenderTarget)for(let ce=0;ce<6;ce++)h.deleteFramebuffer($.__webglFramebuffer[ce]),$.__webglDepthbuffer&&h.deleteRenderbuffer($.__webglDepthbuffer[ce]);else{if(h.deleteFramebuffer($.__webglFramebuffer),$.__webglDepthbuffer&&h.deleteRenderbuffer($.__webglDepthbuffer),$.__webglMultisampledFramebuffer&&h.deleteFramebuffer($.__webglMultisampledFramebuffer),$.__webglColorRenderbuffer)for(let ce=0;ce<$.__webglColorRenderbuffer.length;ce++)$.__webglColorRenderbuffer[ce]&&h.deleteRenderbuffer($.__webglColorRenderbuffer[ce]);$.__webglDepthRenderbuffer&&h.deleteRenderbuffer($.__webglDepthRenderbuffer)}if(A.isWebGLMultipleRenderTargets)for(let ce=0,ge=N.length;ce<ge;ce++){const Fe=i.get(N[ce]);Fe.__webglTexture&&(h.deleteTexture(Fe.__webglTexture),g.memory.textures--),i.remove(N[ce])}i.remove(N),i.remove(A)}(N)}function Me(A){const N=i.get(A);h.deleteTexture(N.__webglTexture),delete B.get(A.source)[N.__cacheKey],g.memory.textures--}let ut=0;function gt(A,N){const $=i.get(A);if(A.isVideoTexture&&function C(A){const N=g.render.frame;G.get(A)!==N&&(G.set(A,N),A.update())}(A),!1===A.isRenderTargetTexture&&A.version>0&&$.__version!==A.version){const te=A.image;if(null===te)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==te.complete)return void sn($,A,N);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}t.bindTexture(3553,$.__webglTexture,33984+N)}const Et={[ui]:10497,[mi]:33071,[is]:33648},$t={[In]:9728,[un]:9984,[js]:9986,[Ki]:9729,[bs]:9985,[dr]:9987};function et(A,N,$){if($?(h.texParameteri(A,10242,Et[N.wrapS]),h.texParameteri(A,10243,Et[N.wrapT]),(32879===A||35866===A)&&h.texParameteri(A,32882,Et[N.wrapR]),h.texParameteri(A,10240,$t[N.magFilter]),h.texParameteri(A,10241,$t[N.minFilter])):(h.texParameteri(A,10242,33071),h.texParameteri(A,10243,33071),(32879===A||35866===A)&&h.texParameteri(A,32882,33071),(N.wrapS!==mi||N.wrapT!==mi)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),h.texParameteri(A,10240,me(N.magFilter)),h.texParameteri(A,10241,me(N.minFilter)),N.minFilter!==In&&N.minFilter!==Ki&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===e.has("EXT_texture_filter_anisotropic")){const te=e.get("EXT_texture_filter_anisotropic");if(N.magFilter===In||N.minFilter!==js&&N.minFilter!==dr||N.type===Pr&&!1===e.has("OES_texture_float_linear")||!1===_&&N.type===so&&!1===e.has("OES_texture_half_float_linear"))return;(N.anisotropy>1||i.get(N).__currentAnisotropy)&&(h.texParameterf(A,te.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(N.anisotropy,a.getMaxAnisotropy())),i.get(N).__currentAnisotropy=N.anisotropy)}}function Pn(A,N){let $=!1;void 0===A.__webglInit&&(A.__webglInit=!0,N.addEventListener("dispose",Le));const te=N.source;let ce=B.get(te);void 0===ce&&(ce={},B.set(te,ce));const ge=function Dt(A){const N=[];return N.push(A.wrapS),N.push(A.wrapT),N.push(A.wrapR||0),N.push(A.magFilter),N.push(A.minFilter),N.push(A.anisotropy),N.push(A.internalFormat),N.push(A.format),N.push(A.type),N.push(A.generateMipmaps),N.push(A.premultiplyAlpha),N.push(A.flipY),N.push(A.unpackAlignment),N.push(A.encoding),N.join()}(N);if(ge!==A.__cacheKey){void 0===ce[ge]&&(ce[ge]={texture:h.createTexture(),usedTimes:0},g.memory.textures++,$=!0),ce[ge].usedTimes++;const Fe=ce[A.__cacheKey];void 0!==Fe&&(ce[A.__cacheKey].usedTimes--,0===Fe.usedTimes&&Me(N)),A.__cacheKey=ge,A.__webglTexture=ce[ge].texture}return $}function sn(A,N,$){let te=3553;(N.isDataArrayTexture||N.isCompressedArrayTexture)&&(te=35866),N.isData3DTexture&&(te=32879);const ce=Pn(A,N),ge=N.source;t.bindTexture(te,A.__webglTexture,33984+$);const Fe=i.get(ge);if(ge.version!==Fe.__version||!0===ce){t.activeTexture(33984+$),h.pixelStorei(37440,N.flipY),h.pixelStorei(37441,N.premultiplyAlpha),h.pixelStorei(3317,N.unpackAlignment),h.pixelStorei(37443,0);const Ie=function ne(A){return!_&&(A.wrapS!==mi||A.wrapT!==mi||A.minFilter!==In&&A.minFilter!==Ki)}(N)&&!1===Y(N.image);let _e=H(N.image,Ie,!1,w);_e=O(N,_e);const ct=Y(_e)||_,Ce=d.convert(N.format,N.encoding);let Gt,pt=d.convert(N.type),kt=Z(N.internalFormat,Ce,pt,N.encoding,N.isVideoTexture);et(te,N,ct);const Oi=N.mipmaps,Cr=_&&!0!==N.isVideoTexture,Fs=void 0===Fe.__version||!0===ce,ve=ue(N,_e,ct);if(N.isDepthTexture)kt=6402,_?kt=N.type===Pr?36012:N.type===$r?33190:N.type===xe?35056:33189:N.type===Pr&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),N.format===hn&&6402===kt&&N.type!==Wr&&N.type!==$r&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),N.type=$r,pt=d.convert(N.type)),N.format===Yn&&6402===kt&&(kt=34041,N.type!==xe&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),N.type=xe,pt=d.convert(N.type))),Fs&&(Cr?t.texStorage2D(3553,1,kt,_e.width,_e.height):t.texImage2D(3553,0,kt,_e.width,_e.height,0,Ce,pt,null));else if(N.isDataTexture)if(Oi.length>0&&ct){Cr&&Fs&&t.texStorage2D(3553,ve,kt,Oi[0].width,Oi[0].height);for(let Ze=0,Mt=Oi.length;Ze<Mt;Ze++)Gt=Oi[Ze],Cr?t.texSubImage2D(3553,Ze,0,0,Gt.width,Gt.height,Ce,pt,Gt.data):t.texImage2D(3553,Ze,kt,Gt.width,Gt.height,0,Ce,pt,Gt.data);N.generateMipmaps=!1}else Cr?(Fs&&t.texStorage2D(3553,ve,kt,_e.width,_e.height),t.texSubImage2D(3553,0,0,0,_e.width,_e.height,Ce,pt,_e.data)):t.texImage2D(3553,0,kt,_e.width,_e.height,0,Ce,pt,_e.data);else if(N.isCompressedTexture)if(N.isCompressedArrayTexture){Cr&&Fs&&t.texStorage3D(35866,ve,kt,Oi[0].width,Oi[0].height,_e.depth);for(let Ze=0,Mt=Oi.length;Ze<Mt;Ze++)Gt=Oi[Ze],N.format!==Te?null!==Ce?Cr?t.compressedTexSubImage3D(35866,Ze,0,0,0,Gt.width,Gt.height,_e.depth,Ce,Gt.data,0,0):t.compressedTexImage3D(35866,Ze,kt,Gt.width,Gt.height,_e.depth,0,Gt.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Cr?t.texSubImage3D(35866,Ze,0,0,0,Gt.width,Gt.height,_e.depth,Ce,pt,Gt.data):t.texImage3D(35866,Ze,kt,Gt.width,Gt.height,_e.depth,0,Ce,pt,Gt.data)}else{Cr&&Fs&&t.texStorage2D(3553,ve,kt,Oi[0].width,Oi[0].height);for(let Ze=0,Mt=Oi.length;Ze<Mt;Ze++)Gt=Oi[Ze],N.format!==Te?null!==Ce?Cr?t.compressedTexSubImage2D(3553,Ze,0,0,Gt.width,Gt.height,Ce,Gt.data):t.compressedTexImage2D(3553,Ze,kt,Gt.width,Gt.height,0,Gt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Cr?t.texSubImage2D(3553,Ze,0,0,Gt.width,Gt.height,Ce,pt,Gt.data):t.texImage2D(3553,Ze,kt,Gt.width,Gt.height,0,Ce,pt,Gt.data)}else if(N.isDataArrayTexture)Cr?(Fs&&t.texStorage3D(35866,ve,kt,_e.width,_e.height,_e.depth),t.texSubImage3D(35866,0,0,0,0,_e.width,_e.height,_e.depth,Ce,pt,_e.data)):t.texImage3D(35866,0,kt,_e.width,_e.height,_e.depth,0,Ce,pt,_e.data);else if(N.isData3DTexture)Cr?(Fs&&t.texStorage3D(32879,ve,kt,_e.width,_e.height,_e.depth),t.texSubImage3D(32879,0,0,0,0,_e.width,_e.height,_e.depth,Ce,pt,_e.data)):t.texImage3D(32879,0,kt,_e.width,_e.height,_e.depth,0,Ce,pt,_e.data);else if(N.isFramebufferTexture){if(Fs)if(Cr)t.texStorage2D(3553,ve,kt,_e.width,_e.height);else{let Ze=_e.width,Mt=_e.height;for(let Qt=0;Qt<ve;Qt++)t.texImage2D(3553,Qt,kt,Ze,Mt,0,Ce,pt,null),Ze>>=1,Mt>>=1}}else if(Oi.length>0&&ct){Cr&&Fs&&t.texStorage2D(3553,ve,kt,Oi[0].width,Oi[0].height);for(let Ze=0,Mt=Oi.length;Ze<Mt;Ze++)Gt=Oi[Ze],Cr?t.texSubImage2D(3553,Ze,0,0,Ce,pt,Gt):t.texImage2D(3553,Ze,kt,Ce,pt,Gt);N.generateMipmaps=!1}else Cr?(Fs&&t.texStorage2D(3553,ve,kt,_e.width,_e.height),t.texSubImage2D(3553,0,0,0,Ce,pt,_e)):t.texImage2D(3553,0,kt,Ce,pt,_e);ae(N,ct)&&he(te),Fe.__version=ge.version,N.onUpdate&&N.onUpdate(N)}A.__version=N.version}function qt(A,N,$,te,ce){const ge=d.convert($.format,$.encoding),Fe=d.convert($.type),Ie=Z($.internalFormat,ge,Fe,$.encoding);i.get(N).__hasExternalTextures||(32879===ce||35866===ce?t.texImage3D(ce,0,Ie,N.width,N.height,N.depth,0,ge,Fe,null):t.texImage2D(ce,0,Ie,N.width,N.height,0,ge,Fe,null)),t.bindFramebuffer(36160,A),x(N)?E.framebufferTexture2DMultisampleEXT(36160,te,ce,i.get($).__webglTexture,0,v(N)):(3553===ce||ce>=34069&&ce<=34074)&&h.framebufferTexture2D(36160,te,ce,i.get($).__webglTexture,0),t.bindFramebuffer(36160,null)}function Zn(A,N,$){if(h.bindRenderbuffer(36161,A),N.depthBuffer&&!N.stencilBuffer){let te=33189;if($||x(N)){const ce=N.depthTexture;ce&&ce.isDepthTexture&&(ce.type===Pr?te=36012:ce.type===$r&&(te=33190));const ge=v(N);x(N)?E.renderbufferStorageMultisampleEXT(36161,ge,te,N.width,N.height):h.renderbufferStorageMultisample(36161,ge,te,N.width,N.height)}else h.renderbufferStorage(36161,te,N.width,N.height);h.framebufferRenderbuffer(36160,36096,36161,A)}else if(N.depthBuffer&&N.stencilBuffer){const te=v(N);$&&!1===x(N)?h.renderbufferStorageMultisample(36161,te,35056,N.width,N.height):x(N)?E.renderbufferStorageMultisampleEXT(36161,te,35056,N.width,N.height):h.renderbufferStorage(36161,34041,N.width,N.height),h.framebufferRenderbuffer(36160,33306,36161,A)}else{const te=!0===N.isWebGLMultipleRenderTargets?N.texture:[N.texture];for(let ce=0;ce<te.length;ce++){const ge=te[ce],Fe=d.convert(ge.format,ge.encoding),Ie=d.convert(ge.type),_e=Z(ge.internalFormat,Fe,Ie,ge.encoding),ct=v(N);$&&!1===x(N)?h.renderbufferStorageMultisample(36161,ct,_e,N.width,N.height):x(N)?E.renderbufferStorageMultisampleEXT(36161,ct,_e,N.width,N.height):h.renderbufferStorage(36161,_e,N.width,N.height)}}h.bindRenderbuffer(36161,null)}function n(A){const N=i.get(A),$=!0===A.isWebGLCubeRenderTarget;if(A.depthTexture&&!N.__autoAllocateDepthBuffer){if($)throw new Error("target.depthTexture not supported in Cube render targets");!function lt(A,N){if(N&&N.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,A),!N.depthTexture||!N.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(N.depthTexture).__webglTexture||N.depthTexture.image.width!==N.width||N.depthTexture.image.height!==N.height)&&(N.depthTexture.image.width=N.width,N.depthTexture.image.height=N.height,N.depthTexture.needsUpdate=!0),gt(N.depthTexture,0);const te=i.get(N.depthTexture).__webglTexture,ce=v(N);if(N.depthTexture.format===hn)x(N)?E.framebufferTexture2DMultisampleEXT(36160,36096,3553,te,0,ce):h.framebufferTexture2D(36160,36096,3553,te,0);else{if(N.depthTexture.format!==Yn)throw new Error("Unknown depthTexture format");x(N)?E.framebufferTexture2DMultisampleEXT(36160,33306,3553,te,0,ce):h.framebufferTexture2D(36160,33306,3553,te,0)}}(N.__webglFramebuffer,A)}else if($){N.__webglDepthbuffer=[];for(let te=0;te<6;te++)t.bindFramebuffer(36160,N.__webglFramebuffer[te]),N.__webglDepthbuffer[te]=h.createRenderbuffer(),Zn(N.__webglDepthbuffer[te],A,!1)}else t.bindFramebuffer(36160,N.__webglFramebuffer),N.__webglDepthbuffer=h.createRenderbuffer(),Zn(N.__webglDepthbuffer,A,!1);t.bindFramebuffer(36160,null)}function v(A){return Math.min(S,A.samples)}function x(A){const N=i.get(A);return _&&A.samples>0&&!0===e.has("WEBGL_multisampled_render_to_texture")&&!1!==N.__useRenderToTexture}function O(A,N){const $=A.encoding,te=A.format,ce=A.type;return!0===A.isCompressedTexture||!0===A.isVideoTexture||A.format===dl||$!==Ws&&($===hi?!1===_?!0===e.has("EXT_sRGB")&&te===Te?(A.format=dl,A.minFilter=Ki,A.generateMipmaps=!1):N=ur.sRGBToLinear(N):(te!==Te||ce!==tr)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",$)),N}this.allocateTextureUnit=function ot(){const A=ut;return A>=y&&console.warn("THREE.WebGLTextures: Trying to use "+A+" texture units while this GPU supports only "+y),ut+=1,A},this.resetTextureUnits=function Tt(){ut=0},this.setTexture2D=gt,this.setTexture2DArray=function We(A,N){const $=i.get(A);A.version>0&&$.__version!==A.version?sn($,A,N):t.bindTexture(35866,$.__webglTexture,33984+N)},this.setTexture3D=function $e(A,N){const $=i.get(A);A.version>0&&$.__version!==A.version?sn($,A,N):t.bindTexture(32879,$.__webglTexture,33984+N)},this.setTextureCube=function Pt(A,N){const $=i.get(A);A.version>0&&$.__version!==A.version?function An(A,N,$){if(6!==N.image.length)return;const te=Pn(A,N),ce=N.source;t.bindTexture(34067,A.__webglTexture,33984+$);const ge=i.get(ce);if(ce.version!==ge.__version||!0===te){t.activeTexture(33984+$),h.pixelStorei(37440,N.flipY),h.pixelStorei(37441,N.premultiplyAlpha),h.pixelStorei(3317,N.unpackAlignment),h.pixelStorei(37443,0);const Fe=N.isCompressedTexture||N.image[0].isCompressedTexture,Ie=N.image[0]&&N.image[0].isDataTexture,_e=[];for(let Ze=0;Ze<6;Ze++)_e[Ze]=Fe||Ie?Ie?N.image[Ze].image:N.image[Ze]:H(N.image[Ze],!1,!0,b),_e[Ze]=O(N,_e[Ze]);const ct=_e[0],Ce=Y(ct)||_,pt=d.convert(N.format,N.encoding),kt=d.convert(N.type),Gt=Z(N.internalFormat,pt,kt,N.encoding),Oi=_&&!0!==N.isVideoTexture,Cr=void 0===ge.__version||!0===te;let ve,Fs=ue(N,ct,Ce);if(et(34067,N,Ce),Fe){Oi&&Cr&&t.texStorage2D(34067,Fs,Gt,ct.width,ct.height);for(let Ze=0;Ze<6;Ze++){ve=_e[Ze].mipmaps;for(let Mt=0;Mt<ve.length;Mt++){const Qt=ve[Mt];N.format!==Te?null!==pt?Oi?t.compressedTexSubImage2D(34069+Ze,Mt,0,0,Qt.width,Qt.height,pt,Qt.data):t.compressedTexImage2D(34069+Ze,Mt,Gt,Qt.width,Qt.height,0,Qt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Oi?t.texSubImage2D(34069+Ze,Mt,0,0,Qt.width,Qt.height,pt,kt,Qt.data):t.texImage2D(34069+Ze,Mt,Gt,Qt.width,Qt.height,0,pt,kt,Qt.data)}}}else{ve=N.mipmaps,Oi&&Cr&&(ve.length>0&&Fs++,t.texStorage2D(34067,Fs,Gt,_e[0].width,_e[0].height));for(let Ze=0;Ze<6;Ze++)if(Ie){Oi?t.texSubImage2D(34069+Ze,0,0,0,_e[Ze].width,_e[Ze].height,pt,kt,_e[Ze].data):t.texImage2D(34069+Ze,0,Gt,_e[Ze].width,_e[Ze].height,0,pt,kt,_e[Ze].data);for(let Mt=0;Mt<ve.length;Mt++){const pn=ve[Mt].image[Ze].image;Oi?t.texSubImage2D(34069+Ze,Mt+1,0,0,pn.width,pn.height,pt,kt,pn.data):t.texImage2D(34069+Ze,Mt+1,Gt,pn.width,pn.height,0,pt,kt,pn.data)}}else{Oi?t.texSubImage2D(34069+Ze,0,0,0,pt,kt,_e[Ze]):t.texImage2D(34069+Ze,0,Gt,pt,kt,_e[Ze]);for(let Mt=0;Mt<ve.length;Mt++){const Qt=ve[Mt];Oi?t.texSubImage2D(34069+Ze,Mt+1,0,0,pt,kt,Qt.image[Ze]):t.texImage2D(34069+Ze,Mt+1,Gt,pt,kt,Qt.image[Ze])}}}ae(N,Ce)&&he(34067),ge.__version=ce.version,N.onUpdate&&N.onUpdate(N)}A.__version=N.version}($,A,N):t.bindTexture(34067,$.__webglTexture,33984+N)},this.rebindTextures=function r(A,N,$){const te=i.get(A);void 0!==N&&qt(te.__webglFramebuffer,A,A.texture,36064,3553),void 0!==$&&n(A)},this.setupRenderTarget=function o(A){const N=A.texture,$=i.get(A),te=i.get(N);A.addEventListener("dispose",at),!0!==A.isWebGLMultipleRenderTargets&&(void 0===te.__webglTexture&&(te.__webglTexture=h.createTexture()),te.__version=N.version,g.memory.textures++);const ce=!0===A.isWebGLCubeRenderTarget,ge=!0===A.isWebGLMultipleRenderTargets,Fe=Y(A)||_;if(ce){$.__webglFramebuffer=[];for(let Ie=0;Ie<6;Ie++)$.__webglFramebuffer[Ie]=h.createFramebuffer()}else{if($.__webglFramebuffer=h.createFramebuffer(),ge)if(a.drawBuffers){const Ie=A.texture;for(let _e=0,ct=Ie.length;_e<ct;_e++){const Ce=i.get(Ie[_e]);void 0===Ce.__webglTexture&&(Ce.__webglTexture=h.createTexture(),g.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(_&&A.samples>0&&!1===x(A)){const Ie=ge?N:[N];$.__webglMultisampledFramebuffer=h.createFramebuffer(),$.__webglColorRenderbuffer=[],t.bindFramebuffer(36160,$.__webglMultisampledFramebuffer);for(let _e=0;_e<Ie.length;_e++){const ct=Ie[_e];$.__webglColorRenderbuffer[_e]=h.createRenderbuffer(),h.bindRenderbuffer(36161,$.__webglColorRenderbuffer[_e]);const Ce=d.convert(ct.format,ct.encoding),pt=d.convert(ct.type),kt=Z(ct.internalFormat,Ce,pt,ct.encoding,!0===A.isXRRenderTarget),Gt=v(A);h.renderbufferStorageMultisample(36161,Gt,kt,A.width,A.height),h.framebufferRenderbuffer(36160,36064+_e,36161,$.__webglColorRenderbuffer[_e])}h.bindRenderbuffer(36161,null),A.depthBuffer&&($.__webglDepthRenderbuffer=h.createRenderbuffer(),Zn($.__webglDepthRenderbuffer,A,!0)),t.bindFramebuffer(36160,null)}}if(ce){t.bindTexture(34067,te.__webglTexture),et(34067,N,Fe);for(let Ie=0;Ie<6;Ie++)qt($.__webglFramebuffer[Ie],A,N,36064,34069+Ie);ae(N,Fe)&&he(34067),t.unbindTexture()}else if(ge){const Ie=A.texture;for(let _e=0,ct=Ie.length;_e<ct;_e++){const Ce=Ie[_e],pt=i.get(Ce);t.bindTexture(3553,pt.__webglTexture),et(3553,Ce,Fe),qt($.__webglFramebuffer,A,Ce,36064+_e,3553),ae(Ce,Fe)&&he(3553)}t.unbindTexture()}else{let Ie=3553;(A.isWebGL3DRenderTarget||A.isWebGLArrayRenderTarget)&&(_?Ie=A.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(Ie,te.__webglTexture),et(Ie,N,Fe),qt($.__webglFramebuffer,A,N,36064,Ie),ae(N,Fe)&&he(Ie),t.unbindTexture()}A.depthBuffer&&n(A)},this.updateRenderTargetMipmap=function u(A){const N=Y(A)||_,$=!0===A.isWebGLMultipleRenderTargets?A.texture:[A.texture];for(let te=0,ce=$.length;te<ce;te++){const ge=$[te];if(ae(ge,N)){const Fe=A.isWebGLCubeRenderTarget?34067:3553,Ie=i.get(ge).__webglTexture;t.bindTexture(Fe,Ie),he(Fe),t.unbindTexture()}}},this.updateMultisampleRenderTarget=function m(A){if(_&&A.samples>0&&!1===x(A)){const N=A.isWebGLMultipleRenderTargets?A.texture:[A.texture],$=A.width,te=A.height;let ce=16384;const ge=[],Fe=A.stencilBuffer?33306:36096,Ie=i.get(A),_e=!0===A.isWebGLMultipleRenderTargets;if(_e)for(let ct=0;ct<N.length;ct++)t.bindFramebuffer(36160,Ie.__webglMultisampledFramebuffer),h.framebufferRenderbuffer(36160,36064+ct,36161,null),t.bindFramebuffer(36160,Ie.__webglFramebuffer),h.framebufferTexture2D(36009,36064+ct,3553,null,0);t.bindFramebuffer(36008,Ie.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,Ie.__webglFramebuffer);for(let ct=0;ct<N.length;ct++){ge.push(36064+ct),A.depthBuffer&&ge.push(Fe);const Ce=void 0!==Ie.__ignoreDepthValues&&Ie.__ignoreDepthValues;if(!1===Ce&&(A.depthBuffer&&(ce|=256),A.stencilBuffer&&(ce|=1024)),_e&&h.framebufferRenderbuffer(36008,36064,36161,Ie.__webglColorRenderbuffer[ct]),!0===Ce&&(h.invalidateFramebuffer(36008,[Fe]),h.invalidateFramebuffer(36009,[Fe])),_e){const pt=i.get(N[ct]).__webglTexture;h.framebufferTexture2D(36009,36064,3553,pt,0)}h.blitFramebuffer(0,0,$,te,0,0,$,te,ce,9728),L&&h.invalidateFramebuffer(36008,ge)}if(t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,null),_e)for(let ct=0;ct<N.length;ct++){t.bindFramebuffer(36160,Ie.__webglMultisampledFramebuffer),h.framebufferRenderbuffer(36160,36064+ct,36161,Ie.__webglColorRenderbuffer[ct]);const Ce=i.get(N[ct]).__webglTexture;t.bindFramebuffer(36160,Ie.__webglFramebuffer),h.framebufferTexture2D(36009,36064+ct,3553,Ce,0)}t.bindFramebuffer(36009,Ie.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=n,this.setupFrameBufferTexture=qt,this.useMultisampledRTT=x}function Hv(h,e,t){const i=t.isWebGL2;return{convert:function a(d,g=null){let _;if(d===tr)return 5121;if(d===tl)return 32819;if(d===kl)return 32820;if(d===Ri)return 5120;if(d===Si)return 5122;if(d===Wr)return 5123;if(d===Co)return 5124;if(d===$r)return 5125;if(d===Pr)return 5126;if(d===so)return i?5131:(_=e.get("OES_texture_half_float"),null!==_?_.HALF_FLOAT_OES:null);if(d===pe)return 6406;if(d===Te)return 6408;if(d===Ae)return 6409;if(d===Nt)return 6410;if(d===hn)return 6402;if(d===Yn)return 34041;if(d===re)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(d===dl)return _=e.get("EXT_sRGB"),null!==_?_.SRGB_ALPHA_EXT:null;if(d===Bi)return 6403;if(d===rs)return 36244;if(d===hr)return 33319;if(d===nl)return 33320;if(d===Gl)return 36249;if(d===Ca||d===oo||d===il||d===Ms)if(g===hi){if(_=e.get("WEBGL_compressed_texture_s3tc_srgb"),null===_)return null;if(d===Ca)return _.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(d===oo)return _.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(d===il)return _.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(d===Ms)return _.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(_=e.get("WEBGL_compressed_texture_s3tc"),null===_)return null;if(d===Ca)return _.COMPRESSED_RGB_S3TC_DXT1_EXT;if(d===oo)return _.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(d===il)return _.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(d===Ms)return _.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(d===Eo||d===ss||d===ks||d===ea){if(_=e.get("WEBGL_compressed_texture_pvrtc"),null===_)return null;if(d===Eo)return _.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(d===ss)return _.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(d===ks)return _.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(d===ea)return _.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(d===qn)return _=e.get("WEBGL_compressed_texture_etc1"),null!==_?_.COMPRESSED_RGB_ETC1_WEBGL:null;if(d===Hi||d===si){if(_=e.get("WEBGL_compressed_texture_etc"),null===_)return null;if(d===Hi)return g===hi?_.COMPRESSED_SRGB8_ETC2:_.COMPRESSED_RGB8_ETC2;if(d===si)return g===hi?_.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:_.COMPRESSED_RGBA8_ETC2_EAC}if(d===br||d===fr||d===Nc||d===rl||d===gs||d===_s||d===It||d===mn||d===Ci||d===Or||d===Yr||d===Ei||d===Gs||d===oi){if(_=e.get("WEBGL_compressed_texture_astc"),null===_)return null;if(d===br)return g===hi?_.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:_.COMPRESSED_RGBA_ASTC_4x4_KHR;if(d===fr)return g===hi?_.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:_.COMPRESSED_RGBA_ASTC_5x4_KHR;if(d===Nc)return g===hi?_.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:_.COMPRESSED_RGBA_ASTC_5x5_KHR;if(d===rl)return g===hi?_.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:_.COMPRESSED_RGBA_ASTC_6x5_KHR;if(d===gs)return g===hi?_.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:_.COMPRESSED_RGBA_ASTC_6x6_KHR;if(d===_s)return g===hi?_.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:_.COMPRESSED_RGBA_ASTC_8x5_KHR;if(d===It)return g===hi?_.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:_.COMPRESSED_RGBA_ASTC_8x6_KHR;if(d===mn)return g===hi?_.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:_.COMPRESSED_RGBA_ASTC_8x8_KHR;if(d===Ci)return g===hi?_.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:_.COMPRESSED_RGBA_ASTC_10x5_KHR;if(d===Or)return g===hi?_.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:_.COMPRESSED_RGBA_ASTC_10x6_KHR;if(d===Yr)return g===hi?_.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:_.COMPRESSED_RGBA_ASTC_10x8_KHR;if(d===Ei)return g===hi?_.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:_.COMPRESSED_RGBA_ASTC_10x10_KHR;if(d===Gs)return g===hi?_.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:_.COMPRESSED_RGBA_ASTC_12x10_KHR;if(d===oi)return g===hi?_.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:_.COMPRESSED_RGBA_ASTC_12x12_KHR}if(d===Vs){if(_=e.get("EXT_texture_compression_bptc"),null===_)return null;if(d===Vs)return g===hi?_.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:_.COMPRESSED_RGBA_BPTC_UNORM_EXT}return d===xe?i?34042:(_=e.get("WEBGL_depth_texture"),null!==_?_.UNSIGNED_INT_24_8_WEBGL:null):void 0!==h[d]?h[d]:null}}}class um extends Br{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class ru extends ir{constructor(){super(),this.isGroup=!0,this.type="Group"}}const zv={type:"move"};class v_{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new ru,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new ru,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new ie,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new ie),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new ru,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new ie,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new ie),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,i){let a=null,d=null,g=null;const _=this._targetRay,y=this._grip,b=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(b&&e.hand){g=!0;for(const j of e.hand.values()){const B=t.getJointPose(j,i),z=this._getHandJoint(b,j);null!==B&&(z.matrix.fromArray(B.transform.matrix),z.matrix.decompose(z.position,z.rotation,z.scale),z.jointRadius=B.radius),z.visible=null!==B}const E=b.joints["index-finger-tip"].position.distanceTo(b.joints["thumb-tip"].position),L=.02,G=.005;b.inputState.pinching&&E>L+G?(b.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!b.inputState.pinching&&E<=L-G&&(b.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==y&&e.gripSpace&&(d=t.getPose(e.gripSpace,i),null!==d&&(y.matrix.fromArray(d.transform.matrix),y.matrix.decompose(y.position,y.rotation,y.scale),d.linearVelocity?(y.hasLinearVelocity=!0,y.linearVelocity.copy(d.linearVelocity)):y.hasLinearVelocity=!1,d.angularVelocity?(y.hasAngularVelocity=!0,y.angularVelocity.copy(d.angularVelocity)):y.hasAngularVelocity=!1));null!==_&&(a=t.getPose(e.targetRaySpace,i),null===a&&null!==d&&(a=d),null!==a&&(_.matrix.fromArray(a.transform.matrix),_.matrix.decompose(_.position,_.rotation,_.scale),a.linearVelocity?(_.hasLinearVelocity=!0,_.linearVelocity.copy(a.linearVelocity)):_.hasLinearVelocity=!1,a.angularVelocity?(_.hasAngularVelocity=!0,_.angularVelocity.copy(a.angularVelocity)):_.hasAngularVelocity=!1,this.dispatchEvent(zv)))}return null!==_&&(_.visible=null!==a),null!==y&&(y.visible=null!==d),null!==b&&(b.visible=null!==g),this}_getHandJoint(e,t){if(void 0===e.joints[t.jointName]){const i=new ru;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}class r0 extends or{constructor(e,t,i,a,d,g,_,y,b,w){if((w=void 0!==w?w:hn)!==hn&&w!==Yn)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===i&&w===hn&&(i=$r),void 0===i&&w===Yn&&(i=xe),super(null,a,d,g,_,y,w,i,b),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=void 0!==_?_:In,this.minFilter=void 0!==y?y:In,this.flipY=!1,this.generateMipmaps=!1}}class s0 extends co{constructor(e,t){super();const i=this;let a=null,d=1,g=null,_="local-floor",y=null,b=null,w=null,S=null,E=null,L=null;const G=t.getContextAttributes();let j=null,B=null;const z=[],J=[],H=new Set,Y=new Map,ne=new Br;ne.layers.enable(1),ne.viewport=new Wn;const ae=new Br;ae.layers.enable(2),ae.viewport=new Wn;const he=[ne,ae],Z=new um;Z.layers.enable(1),Z.layers.enable(2);let ue=null,me=null;function Le(We){const $e=J.indexOf(We.inputSource);if(-1===$e)return;const Pt=z[$e];void 0!==Pt&&Pt.dispatchEvent({type:We.type,data:We.inputSource})}function at(){a.removeEventListener("select",Le),a.removeEventListener("selectstart",Le),a.removeEventListener("selectend",Le),a.removeEventListener("squeeze",Le),a.removeEventListener("squeezestart",Le),a.removeEventListener("squeezeend",Le),a.removeEventListener("end",at),a.removeEventListener("inputsourceschange",Ee);for(let We=0;We<z.length;We++){const $e=J[We];null!==$e&&(J[We]=null,z[We].disconnect($e))}ue=null,me=null,e.setRenderTarget(j),E=null,S=null,w=null,a=null,B=null,gt.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}function Ee(We){for(let $e=0;$e<We.removed.length;$e++){const Pt=We.removed[$e],Et=J.indexOf(Pt);Et>=0&&(J[Et]=null,z[Et].disconnect(Pt))}for(let $e=0;$e<We.added.length;$e++){const Pt=We.added[$e];let Et=J.indexOf(Pt);if(-1===Et){for(let et=0;et<z.length;et++){if(et>=J.length){J.push(Pt),Et=et;break}if(null===J[et]){J[et]=Pt,Et=et;break}}if(-1===Et)break}const $t=z[Et];$t&&$t.connect(Pt)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(We){let $e=z[We];return void 0===$e&&($e=new v_,z[We]=$e),$e.getTargetRaySpace()},this.getControllerGrip=function(We){let $e=z[We];return void 0===$e&&($e=new v_,z[We]=$e),$e.getGripSpace()},this.getHand=function(We){let $e=z[We];return void 0===$e&&($e=new v_,z[We]=$e),$e.getHandSpace()},this.setFramebufferScaleFactor=function(We){d=We,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(We){_=We,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return y||g},this.setReferenceSpace=function(We){y=We},this.getBaseLayer=function(){return null!==S?S:E},this.getBinding=function(){return w},this.getFrame=function(){return L},this.getSession=function(){return a},this.setSession=function(){var We=function Se(h){return function(){var e=this,t=arguments;return new Promise(function(i,a){var d=h.apply(e,t);function g(y){Oe(d,i,a,g,_,"next",y)}function _(y){Oe(d,i,a,g,_,"throw",y)}g(void 0)})}}(function*($e){if(a=$e,null!==a){if(j=e.getRenderTarget(),a.addEventListener("select",Le),a.addEventListener("selectstart",Le),a.addEventListener("selectend",Le),a.addEventListener("squeeze",Le),a.addEventListener("squeezestart",Le),a.addEventListener("squeezeend",Le),a.addEventListener("end",at),a.addEventListener("inputsourceschange",Ee),!0!==G.xrCompatible&&(yield t.makeXRCompatible()),void 0===a.renderState.layers||!1===e.capabilities.isWebGL2)E=new XRWebGLLayer(a,t,{antialias:void 0!==a.renderState.layers||G.antialias,alpha:G.alpha,depth:G.depth,stencil:G.stencil,framebufferScaleFactor:d}),a.updateRenderState({baseLayer:E}),B=new po(E.framebufferWidth,E.framebufferHeight,{format:Te,type:tr,encoding:e.outputEncoding,stencilBuffer:G.stencil});else{let Pt=null,Et=null,$t=null;G.depth&&($t=G.stencil?35056:33190,Pt=G.stencil?Yn:hn,Et=G.stencil?xe:$r);const et={colorFormat:32856,depthFormat:$t,scaleFactor:d};w=new XRWebGLBinding(a,t),S=w.createProjectionLayer(et),a.updateRenderState({layers:[S]}),B=new po(S.textureWidth,S.textureHeight,{format:Te,type:tr,depthTexture:new r0(S.textureWidth,S.textureHeight,Et,void 0,void 0,void 0,void 0,void 0,void 0,Pt),stencilBuffer:G.stencil,encoding:e.outputEncoding,samples:G.antialias?4:0}),e.properties.get(B).__ignoreDepthValues=S.ignoreDepthValues}B.isXRRenderTarget=!0,this.setFoveation(1),y=null,g=yield a.requestReferenceSpace(_),gt.setContext(a),gt.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}});return function($e){return We.apply(this,arguments)}}();const Me=new ie,qe=new ie;function Tt(We,$e){null===$e?We.matrixWorld.copy(We.matrix):We.matrixWorld.multiplyMatrices($e.matrixWorld,We.matrix),We.matrixWorldInverse.copy(We.matrixWorld).invert()}this.updateCamera=function(We){if(null===a)return;Z.near=ae.near=ne.near=We.near,Z.far=ae.far=ne.far=We.far,(ue!==Z.near||me!==Z.far)&&(a.updateRenderState({depthNear:Z.near,depthFar:Z.far}),ue=Z.near,me=Z.far);const $e=We.parent,Pt=Z.cameras;Tt(Z,$e);for(let $t=0;$t<Pt.length;$t++)Tt(Pt[$t],$e);Z.matrixWorld.decompose(Z.position,Z.quaternion,Z.scale),We.matrix.copy(Z.matrix),We.matrix.decompose(We.position,We.quaternion,We.scale);const Et=We.children;for(let $t=0,et=Et.length;$t<et;$t++)Et[$t].updateMatrixWorld(!0);2===Pt.length?function ut(We,$e,Pt){Me.setFromMatrixPosition($e.matrixWorld),qe.setFromMatrixPosition(Pt.matrixWorld);const Et=Me.distanceTo(qe),$t=$e.projectionMatrix.elements,et=Pt.projectionMatrix.elements,Pn=$t[14]/($t[10]-1),sn=$t[14]/($t[10]+1),An=($t[9]+1)/$t[5],qt=($t[9]-1)/$t[5],Zn=($t[8]-1)/$t[0],lt=(et[8]+1)/et[0],n=Pn*Zn,r=Pn*lt,o=Et/(-Zn+lt),u=o*-Zn;$e.matrixWorld.decompose(We.position,We.quaternion,We.scale),We.translateX(u),We.translateZ(o),We.matrixWorld.compose(We.position,We.quaternion,We.scale),We.matrixWorldInverse.copy(We.matrixWorld).invert();const m=Pn+o,v=sn+o;We.projectionMatrix.makePerspective(n-u,r+(Et-u),An*sn/v*m,qt*sn/v*m,m,v)}(Z,ne,ae):Z.projectionMatrix.copy(ne.projectionMatrix)},this.getCamera=function(){return Z},this.getFoveation=function(){return null!==S?S.fixedFoveation:null!==E?E.fixedFoveation:void 0},this.setFoveation=function(We){null!==S&&(S.fixedFoveation=We),null!==E&&void 0!==E.fixedFoveation&&(E.fixedFoveation=We)},this.getPlanes=function(){return H};let ot=null;const gt=new up;gt.setAnimationLoop(function Dt(We,$e){if(b=$e.getViewerPose(y||g),L=$e,null!==b){const Pt=b.views;null!==E&&(e.setRenderTargetFramebuffer(B,E.framebuffer),e.setRenderTarget(B));let Et=!1;Pt.length!==Z.cameras.length&&(Z.cameras.length=0,Et=!0);for(let $t=0;$t<Pt.length;$t++){const et=Pt[$t];let Pn=null;if(null!==E)Pn=E.getViewport(et);else{const An=w.getViewSubImage(S,et);Pn=An.viewport,0===$t&&(e.setRenderTargetTextures(B,An.colorTexture,S.ignoreDepthValues?void 0:An.depthStencilTexture),e.setRenderTarget(B))}let sn=he[$t];void 0===sn&&(sn=new Br,sn.layers.enable($t),sn.viewport=new Wn,he[$t]=sn),sn.matrix.fromArray(et.transform.matrix),sn.projectionMatrix.fromArray(et.projectionMatrix),sn.viewport.set(Pn.x,Pn.y,Pn.width,Pn.height),0===$t&&Z.matrix.copy(sn.matrix),!0===Et&&Z.cameras.push(sn)}}for(let Pt=0;Pt<z.length;Pt++){const Et=J[Pt],$t=z[Pt];null!==Et&&void 0!==$t&&$t.update(Et,$e,y||g)}if(ot&&ot(We,$e),$e.detectedPlanes){i.dispatchEvent({type:"planesdetected",data:$e.detectedPlanes});let Pt=null;for(const Et of H)$e.detectedPlanes.has(Et)||(null===Pt&&(Pt=[]),Pt.push(Et));if(null!==Pt)for(const Et of Pt)H.delete(Et),Y.delete(Et),i.dispatchEvent({type:"planeremoved",data:Et});for(const Et of $e.detectedPlanes)if(H.has(Et)){const $t=Y.get(Et);Et.lastChangedTime>$t&&(Y.set(Et,Et.lastChangedTime),i.dispatchEvent({type:"planechanged",data:Et}))}else H.add(Et),Y.set(Et,$e.lastChangedTime),i.dispatchEvent({type:"planeadded",data:Et})}L=null}),this.setAnimationLoop=function(We){ot=We},this.dispose=function(){}}}function Wv(h,e){function a(j,B){j.opacity.value=B.opacity,B.color&&j.diffuse.value.copy(B.color),B.emissive&&j.emissive.value.copy(B.emissive).multiplyScalar(B.emissiveIntensity),B.map&&(j.map.value=B.map),B.alphaMap&&(j.alphaMap.value=B.alphaMap),B.bumpMap&&(j.bumpMap.value=B.bumpMap,j.bumpScale.value=B.bumpScale,B.side===Kt&&(j.bumpScale.value*=-1)),B.displacementMap&&(j.displacementMap.value=B.displacementMap,j.displacementScale.value=B.displacementScale,j.displacementBias.value=B.displacementBias),B.emissiveMap&&(j.emissiveMap.value=B.emissiveMap),B.normalMap&&(j.normalMap.value=B.normalMap,j.normalScale.value.copy(B.normalScale),B.side===Kt&&j.normalScale.value.negate()),B.specularMap&&(j.specularMap.value=B.specularMap),B.alphaTest>0&&(j.alphaTest.value=B.alphaTest);const z=e.get(B).envMap;if(z&&(j.envMap.value=z,j.flipEnvMap.value=z.isCubeTexture&&!1===z.isRenderTargetTexture?-1:1,j.reflectivity.value=B.reflectivity,j.ior.value=B.ior,j.refractionRatio.value=B.refractionRatio),B.lightMap){j.lightMap.value=B.lightMap;const Y=!0!==h.physicallyCorrectLights?Math.PI:1;j.lightMapIntensity.value=B.lightMapIntensity*Y}let J,H;B.aoMap&&(j.aoMap.value=B.aoMap,j.aoMapIntensity.value=B.aoMapIntensity),B.map?J=B.map:B.specularMap?J=B.specularMap:B.displacementMap?J=B.displacementMap:B.normalMap?J=B.normalMap:B.bumpMap?J=B.bumpMap:B.roughnessMap?J=B.roughnessMap:B.metalnessMap?J=B.metalnessMap:B.alphaMap?J=B.alphaMap:B.emissiveMap?J=B.emissiveMap:B.clearcoatMap?J=B.clearcoatMap:B.clearcoatNormalMap?J=B.clearcoatNormalMap:B.clearcoatRoughnessMap?J=B.clearcoatRoughnessMap:B.iridescenceMap?J=B.iridescenceMap:B.iridescenceThicknessMap?J=B.iridescenceThicknessMap:B.specularIntensityMap?J=B.specularIntensityMap:B.specularColorMap?J=B.specularColorMap:B.transmissionMap?J=B.transmissionMap:B.thicknessMap?J=B.thicknessMap:B.sheenColorMap?J=B.sheenColorMap:B.sheenRoughnessMap&&(J=B.sheenRoughnessMap),void 0!==J&&(J.isWebGLRenderTarget&&(J=J.texture),!0===J.matrixAutoUpdate&&J.updateMatrix(),j.uvTransform.value.copy(J.matrix)),B.aoMap?H=B.aoMap:B.lightMap&&(H=B.lightMap),void 0!==H&&(H.isWebGLRenderTarget&&(H=H.texture),!0===H.matrixAutoUpdate&&H.updateMatrix(),j.uv2Transform.value.copy(H.matrix))}return{refreshFogUniforms:function t(j,B){B.color.getRGB(j.fogColor.value,Un(h)),B.isFog?(j.fogNear.value=B.near,j.fogFar.value=B.far):B.isFogExp2&&(j.fogDensity.value=B.density)},refreshMaterialUniforms:function i(j,B,z,J,H){B.isMeshBasicMaterial||B.isMeshLambertMaterial?a(j,B):B.isMeshToonMaterial?(a(j,B),function w(j,B){B.gradientMap&&(j.gradientMap.value=B.gradientMap)}(j,B)):B.isMeshPhongMaterial?(a(j,B),function b(j,B){j.specular.value.copy(B.specular),j.shininess.value=Math.max(B.shininess,1e-4)}(j,B)):B.isMeshStandardMaterial?(a(j,B),function S(j,B){j.roughness.value=B.roughness,j.metalness.value=B.metalness,B.roughnessMap&&(j.roughnessMap.value=B.roughnessMap),B.metalnessMap&&(j.metalnessMap.value=B.metalnessMap),e.get(B).envMap&&(j.envMapIntensity.value=B.envMapIntensity)}(j,B),B.isMeshPhysicalMaterial&&function E(j,B,z){j.ior.value=B.ior,B.sheen>0&&(j.sheenColor.value.copy(B.sheenColor).multiplyScalar(B.sheen),j.sheenRoughness.value=B.sheenRoughness,B.sheenColorMap&&(j.sheenColorMap.value=B.sheenColorMap),B.sheenRoughnessMap&&(j.sheenRoughnessMap.value=B.sheenRoughnessMap)),B.clearcoat>0&&(j.clearcoat.value=B.clearcoat,j.clearcoatRoughness.value=B.clearcoatRoughness,B.clearcoatMap&&(j.clearcoatMap.value=B.clearcoatMap),B.clearcoatRoughnessMap&&(j.clearcoatRoughnessMap.value=B.clearcoatRoughnessMap),B.clearcoatNormalMap&&(j.clearcoatNormalScale.value.copy(B.clearcoatNormalScale),j.clearcoatNormalMap.value=B.clearcoatNormalMap,B.side===Kt&&j.clearcoatNormalScale.value.negate())),B.iridescence>0&&(j.iridescence.value=B.iridescence,j.iridescenceIOR.value=B.iridescenceIOR,j.iridescenceThicknessMinimum.value=B.iridescenceThicknessRange[0],j.iridescenceThicknessMaximum.value=B.iridescenceThicknessRange[1],B.iridescenceMap&&(j.iridescenceMap.value=B.iridescenceMap),B.iridescenceThicknessMap&&(j.iridescenceThicknessMap.value=B.iridescenceThicknessMap)),B.transmission>0&&(j.transmission.value=B.transmission,j.transmissionSamplerMap.value=z.texture,j.transmissionSamplerSize.value.set(z.width,z.height),B.transmissionMap&&(j.transmissionMap.value=B.transmissionMap),j.thickness.value=B.thickness,B.thicknessMap&&(j.thicknessMap.value=B.thicknessMap),j.attenuationDistance.value=B.attenuationDistance,j.attenuationColor.value.copy(B.attenuationColor)),j.specularIntensity.value=B.specularIntensity,j.specularColor.value.copy(B.specularColor),B.specularIntensityMap&&(j.specularIntensityMap.value=B.specularIntensityMap),B.specularColorMap&&(j.specularColorMap.value=B.specularColorMap)}(j,B,H)):B.isMeshMatcapMaterial?(a(j,B),function L(j,B){B.matcap&&(j.matcap.value=B.matcap)}(j,B)):B.isMeshDepthMaterial?a(j,B):B.isMeshDistanceMaterial?(a(j,B),function G(j,B){j.referencePosition.value.copy(B.referencePosition),j.nearDistance.value=B.nearDistance,j.farDistance.value=B.farDistance}(j,B)):B.isMeshNormalMaterial?a(j,B):B.isLineBasicMaterial?(function d(j,B){j.diffuse.value.copy(B.color),j.opacity.value=B.opacity}(j,B),B.isLineDashedMaterial&&function g(j,B){j.dashSize.value=B.dashSize,j.totalSize.value=B.dashSize+B.gapSize,j.scale.value=B.scale}(j,B)):B.isPointsMaterial?function _(j,B,z,J){let H;j.diffuse.value.copy(B.color),j.opacity.value=B.opacity,j.size.value=B.size*z,j.scale.value=.5*J,B.map&&(j.map.value=B.map),B.alphaMap&&(j.alphaMap.value=B.alphaMap),B.alphaTest>0&&(j.alphaTest.value=B.alphaTest),B.map?H=B.map:B.alphaMap&&(H=B.alphaMap),void 0!==H&&(!0===H.matrixAutoUpdate&&H.updateMatrix(),j.uvTransform.value.copy(H.matrix))}(j,B,z,J):B.isSpriteMaterial?function y(j,B){let z;j.diffuse.value.copy(B.color),j.opacity.value=B.opacity,j.rotation.value=B.rotation,B.map&&(j.map.value=B.map),B.alphaMap&&(j.alphaMap.value=B.alphaMap),B.alphaTest>0&&(j.alphaTest.value=B.alphaTest),B.map?z=B.map:B.alphaMap&&(z=B.alphaMap),void 0!==z&&(!0===z.matrixAutoUpdate&&z.updateMatrix(),j.uvTransform.value.copy(z.matrix))}(j,B):B.isShadowMaterial?(j.color.value.copy(B.color),j.opacity.value=B.opacity):B.isShaderMaterial&&(B.uniformsNeedUpdate=!1)}}}function y_(h,e,t,i){let a={},d={},g=[];const _=t.isWebGL2?h.getParameter(35375):0;function L(J,H,Y){const ne=J.value;if(void 0===Y[H]){if("number"==typeof ne)Y[H]=ne;else{const ae=Array.isArray(ne)?ne:[ne],he=[];for(let Z=0;Z<ae.length;Z++)he.push(ae[Z].clone());Y[H]=he}return!0}if("number"==typeof ne){if(Y[H]!==ne)return Y[H]=ne,!0}else{const ae=Array.isArray(Y[H])?Y[H]:[Y[H]],he=Array.isArray(ne)?ne:[ne];for(let Z=0;Z<ae.length;Z++){const ue=ae[Z];if(!1===ue.equals(he[Z]))return ue.copy(he[Z]),!0}}return!1}function j(J){const H={boundary:0,storage:0};return"number"==typeof J?(H.boundary=4,H.storage=4):J.isVector2?(H.boundary=8,H.storage=8):J.isVector3||J.isColor?(H.boundary=16,H.storage=12):J.isVector4?(H.boundary=16,H.storage=16):J.isMatrix3?(H.boundary=48,H.storage=48):J.isMatrix4?(H.boundary=64,H.storage=64):J.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",J),H}function B(J){const H=J.target;H.removeEventListener("dispose",B);const Y=g.indexOf(H.__bindingPointIndex);g.splice(Y,1),h.deleteBuffer(a[H.id]),delete a[H.id],delete d[H.id]}return{bind:function y(J,H){i.uniformBlockBinding(J,H.program)},update:function b(J,H){let Y=a[J.id];void 0===Y&&(function G(J){const H=J.uniforms;let Y=0;let ae=0;for(let he=0,Z=H.length;he<Z;he++){const ue=H[he],me={boundary:0,storage:0},Le=Array.isArray(ue.value)?ue.value:[ue.value];for(let at=0,Ee=Le.length;at<Ee;at++){const qe=j(Le[at]);me.boundary+=qe.boundary,me.storage+=qe.storage}ue.__data=new Float32Array(me.storage/Float32Array.BYTES_PER_ELEMENT),ue.__offset=Y,he>0&&(ae=Y%16,0!==ae&&16-ae-me.boundary<0&&(Y+=16-ae,ue.__offset=Y)),Y+=me.storage}ae=Y%16,ae>0&&(Y+=16-ae),J.__size=Y,J.__cache={}}(J),Y=function w(J){const H=function S(){for(let J=0;J<_;J++)if(-1===g.indexOf(J))return g.push(J),J;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();J.__bindingPointIndex=H;const Y=h.createBuffer(),ne=J.__size,ae=J.usage;return h.bindBuffer(35345,Y),h.bufferData(35345,ne,ae),h.bindBuffer(35345,null),h.bindBufferBase(35345,H,Y),Y}(J),a[J.id]=Y,J.addEventListener("dispose",B)),i.updateUBOMapping(J,H.program);const ae=e.render.frame;d[J.id]!==ae&&(function E(J){const Y=J.uniforms,ne=J.__cache;h.bindBuffer(35345,a[J.id]);for(let ae=0,he=Y.length;ae<he;ae++){const Z=Y[ae];if(!0===L(Z,ae,ne)){const ue=Z.__offset,me=Array.isArray(Z.value)?Z.value:[Z.value];let Le=0;for(let at=0;at<me.length;at++){const Ee=me[at],Me=j(Ee);"number"==typeof Ee?(Z.__data[0]=Ee,h.bufferSubData(35345,ue+Le,Z.__data)):Ee.isMatrix3?(Z.__data[0]=Ee.elements[0],Z.__data[1]=Ee.elements[1],Z.__data[2]=Ee.elements[2],Z.__data[3]=Ee.elements[0],Z.__data[4]=Ee.elements[3],Z.__data[5]=Ee.elements[4],Z.__data[6]=Ee.elements[5],Z.__data[7]=Ee.elements[0],Z.__data[8]=Ee.elements[6],Z.__data[9]=Ee.elements[7],Z.__data[10]=Ee.elements[8],Z.__data[11]=Ee.elements[0]):(Ee.toArray(Z.__data,Le),Le+=Me.storage/Float32Array.BYTES_PER_ELEMENT)}h.bufferSubData(35345,ue,Z.__data)}}h.bindBuffer(35345,null)}(J),d[J.id]=ae)},dispose:function z(){for(const J in a)h.deleteBuffer(a[J]);g=[],a={},d={}}}}function b_(h={}){this.isWebGLRenderer=!0;const e=void 0!==h.canvas?h.canvas:function o0(){const h=Ke("canvas");return h.style.display="block",h}(),t=void 0!==h.context?h.context:null,i=void 0===h.depth||h.depth,a=void 0===h.stencil||h.stencil,d=void 0!==h.antialias&&h.antialias,g=void 0===h.premultipliedAlpha||h.premultipliedAlpha,_=void 0!==h.preserveDrawingBuffer&&h.preserveDrawingBuffer,y=void 0!==h.powerPreference?h.powerPreference:"default",b=void 0!==h.failIfMajorPerformanceCaveat&&h.failIfMajorPerformanceCaveat;let w;w=null!==t?t.getContextAttributes().alpha:void 0!==h.alpha&&h.alpha;let S=null,E=null;const L=[],G=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=Ws,this.physicallyCorrectLights=!1,this.toneMapping=yi,this.toneMappingExposure=1;const j=this;let B=!1,z=0,J=0,H=null,Y=-1,ne=null;const ae=new Wn,he=new Wn;let Z=null,ue=e.width,me=e.height,Le=1,at=null,Ee=null;const Me=new Wn(0,0,ue,me),qe=new Wn(0,0,ue,me);let ut=!1;const Tt=new Dh;let ot=!1,Dt=!1,gt=null;const We=new Rt,$e=new st,Pt=new ie,Et={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function $t(){return null===H?Le:1}let sn,An,qt,Zn,lt,n,r,o,u,m,v,x,C,O,A,N,$,te,ce,ge,Fe,Ie,_e,ct,et=t;function Pn(se,Pe){for(let Xe=0;Xe<se.length;Xe++){const it=e.getContext(se[Xe],Pe);if(null!==it)return it}return null}try{const se={alpha:!0,depth:i,stencil:a,antialias:d,premultipliedAlpha:g,preserveDrawingBuffer:_,powerPreference:y,failIfMajorPerformanceCaveat:b};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${tt}`),e.addEventListener("webglcontextlost",kt,!1),e.addEventListener("webglcontextrestored",Gt,!1),e.addEventListener("webglcontextcreationerror",Oi,!1),null===et){const Pe=["webgl2","webgl","experimental-webgl"];if(!0===j.isWebGL1Renderer&&Pe.shift(),et=Pn(Pe,se),null===et)throw Pn(Pe)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===et.getShaderPrecisionFormat&&(et.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(se){throw console.error("THREE.WebGLRenderer: "+se.message),se}function Ce(){sn=new Kh(et),An=new $g(et,sn,h),sn.init(An),Ie=new Hv(et,sn,An),qt=new __(et,sn,An),Zn=new Wp,lt=new p_,n=new iu(et,sn,qt,lt,An,Ie,Zn),r=new ya(j),o=new qg(j),u=new $c(et,An),_e=new Wg(et,sn,u,An),m=new Jg(et,u,Zn,_e),v=new Yp(et,m,u,Zn),ce=new ac(et,An,n),N=new Fd(lt),x=new mf(j,r,o,sn,An,_e,N),C=new Wv(j,lt),O=new Dn,A=new Wd(sn,An),te=new $h(j,r,o,qt,v,w,g),$=new g_(j,v,An),ct=new y_(et,Zn,An,qt),ge=new Up(et,sn,Zn,An),Fe=new Yi(et,sn,Zn,An),Zn.programs=x.programs,j.capabilities=An,j.extensions=sn,j.properties=lt,j.renderLists=O,j.shadowMap=$,j.state=qt,j.info=Zn}Ce();const pt=new s0(j,et);function kt(se){se.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),B=!0}function Gt(){console.log("THREE.WebGLRenderer: Context Restored."),B=!1;const se=Zn.autoReset,Pe=$.enabled,Xe=$.autoUpdate,Re=$.needsUpdate,it=$.type;Ce(),Zn.autoReset=se,$.enabled=Pe,$.autoUpdate=Xe,$.needsUpdate=Re,$.type=it}function Oi(se){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",se.statusMessage)}function Cr(se){const Pe=se.target;Pe.removeEventListener("dispose",Cr),function Fs(se){(function ve(se){const Pe=lt.get(se).programs;void 0!==Pe&&(Pe.forEach(function(Xe){x.releaseProgram(Xe)}),se.isShaderMaterial&&x.releaseShaderCache(se))})(se),lt.remove(se)}(Pe)}this.xr=pt,this.getContext=function(){return et},this.getContextAttributes=function(){return et.getContextAttributes()},this.forceContextLoss=function(){const se=sn.get("WEBGL_lose_context");se&&se.loseContext()},this.forceContextRestore=function(){const se=sn.get("WEBGL_lose_context");se&&se.restoreContext()},this.getPixelRatio=function(){return Le},this.setPixelRatio=function(se){void 0!==se&&(Le=se,this.setSize(ue,me,!1))},this.getSize=function(se){return se.set(ue,me)},this.setSize=function(se,Pe,Xe){pt.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(ue=se,me=Pe,e.width=Math.floor(se*Le),e.height=Math.floor(Pe*Le),!1!==Xe&&(e.style.width=se+"px",e.style.height=Pe+"px"),this.setViewport(0,0,se,Pe))},this.getDrawingBufferSize=function(se){return se.set(ue*Le,me*Le).floor()},this.setDrawingBufferSize=function(se,Pe,Xe){ue=se,me=Pe,Le=Xe,e.width=Math.floor(se*Xe),e.height=Math.floor(Pe*Xe),this.setViewport(0,0,se,Pe)},this.getCurrentViewport=function(se){return se.copy(ae)},this.getViewport=function(se){return se.copy(Me)},this.setViewport=function(se,Pe,Xe,Re){se.isVector4?Me.set(se.x,se.y,se.z,se.w):Me.set(se,Pe,Xe,Re),qt.viewport(ae.copy(Me).multiplyScalar(Le).floor())},this.getScissor=function(se){return se.copy(qe)},this.setScissor=function(se,Pe,Xe,Re){se.isVector4?qe.set(se.x,se.y,se.z,se.w):qe.set(se,Pe,Xe,Re),qt.scissor(he.copy(qe).multiplyScalar(Le).floor())},this.getScissorTest=function(){return ut},this.setScissorTest=function(se){qt.setScissorTest(ut=se)},this.setOpaqueSort=function(se){at=se},this.setTransparentSort=function(se){Ee=se},this.getClearColor=function(se){return se.copy(te.getClearColor())},this.setClearColor=function(){te.setClearColor.apply(te,arguments)},this.getClearAlpha=function(){return te.getClearAlpha()},this.setClearAlpha=function(){te.setClearAlpha.apply(te,arguments)},this.clear=function(se=!0,Pe=!0,Xe=!0){let Re=0;se&&(Re|=16384),Pe&&(Re|=256),Xe&&(Re|=1024),et.clear(Re)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",kt,!1),e.removeEventListener("webglcontextrestored",Gt,!1),e.removeEventListener("webglcontextcreationerror",Oi,!1),O.dispose(),A.dispose(),lt.dispose(),r.dispose(),o.dispose(),v.dispose(),_e.dispose(),ct.dispose(),x.dispose(),pt.dispose(),pt.removeEventListener("sessionstart",Qt),pt.removeEventListener("sessionend",pn),gt&&(gt.dispose(),gt=null),Zi.stop()},this.renderBufferDirect=function(se,Pe,Xe,Re,it,yn){null===Pe&&(Pe=Et);const kn=it.isMesh&&it.matrixWorld.determinant()<0,ni=function RD(se,Pe,Xe,Re,it){!0!==Pe.isScene&&(Pe=Et),n.resetTextureUnits();const yn=Pe.fog,ni=null===H?j.outputEncoding:!0===H.isXRRenderTarget?H.texture.encoding:Ws,li=(Re.isMeshStandardMaterial?o:r).get(Re.envMap||(Re.isMeshStandardMaterial?Pe.environment:null)),Li=!0===Re.vertexColors&&!!Xe.attributes.color&&4===Xe.attributes.color.itemSize,xi=!!Re.normalMap&&!!Xe.attributes.tangent,Di=!!Xe.morphAttributes.position,ps=!!Xe.morphAttributes.normal,Xa=!!Xe.morphAttributes.color,gd=Re.toneMapped?j.toneMapping:yi,rp=Xe.morphAttributes.position||Xe.morphAttributes.normal||Xe.morphAttributes.color,ms=void 0!==rp?rp.length:0,wi=lt.get(Re),ET=E.state.lights;!0!==ot||!0!==Dt&&se===ne||N.setState(Re,se,se===ne&&Re.id===Y);let Bs=!1;Re.version===wi.__version?(wi.needsLights&&wi.lightsStateVersion!==ET.state.version||wi.outputEncoding!==ni||it.isInstancedMesh&&!1===wi.instancing||!it.isInstancedMesh&&!0===wi.instancing||it.isSkinnedMesh&&!1===wi.skinning||!it.isSkinnedMesh&&!0===wi.skinning||wi.envMap!==li||!0===Re.fog&&wi.fog!==yn||void 0!==wi.numClippingPlanes&&(wi.numClippingPlanes!==N.numPlanes||wi.numIntersection!==N.numIntersection)||wi.vertexAlphas!==Li||wi.vertexTangents!==xi||wi.morphTargets!==Di||wi.morphNormals!==ps||wi.morphColors!==Xa||wi.toneMapping!==gd||!0===An.isWebGL2&&wi.morphTargetsCount!==ms)&&(Bs=!0):(Bs=!0,wi.__version=Re.version);let sp=wi.currentProgram;!0===Bs&&(sp=jl(Re,Pe,it));let Ux=!1,dv=!1,AT=!1;const Xo=sp.getUniforms(),op=wi.uniforms;if(qt.useProgram(sp.program)&&(Ux=!0,dv=!0,AT=!0),Re.id!==Y&&(Y=Re.id,dv=!0),Ux||ne!==se){if(Xo.setValue(et,"projectionMatrix",se.projectionMatrix),An.logarithmicDepthBuffer&&Xo.setValue(et,"logDepthBufFC",2/(Math.log(se.far+1)/Math.LN2)),ne!==se&&(ne=se,dv=!0,AT=!0),Re.isShaderMaterial||Re.isMeshPhongMaterial||Re.isMeshToonMaterial||Re.isMeshStandardMaterial||Re.envMap){const Qa=Xo.map.cameraPosition;void 0!==Qa&&Qa.setValue(et,Pt.setFromMatrixPosition(se.matrixWorld))}(Re.isMeshPhongMaterial||Re.isMeshToonMaterial||Re.isMeshLambertMaterial||Re.isMeshBasicMaterial||Re.isMeshStandardMaterial||Re.isShaderMaterial)&&Xo.setValue(et,"isOrthographic",!0===se.isOrthographicCamera),(Re.isMeshPhongMaterial||Re.isMeshToonMaterial||Re.isMeshLambertMaterial||Re.isMeshBasicMaterial||Re.isMeshStandardMaterial||Re.isShaderMaterial||Re.isShadowMaterial||it.isSkinnedMesh)&&Xo.setValue(et,"viewMatrix",se.matrixWorldInverse)}if(it.isSkinnedMesh){Xo.setOptional(et,it,"bindMatrix"),Xo.setOptional(et,it,"bindMatrixInverse");const Qa=it.skeleton;Qa&&(An.floatVertexTextures?(null===Qa.boneTexture&&Qa.computeBoneTexture(),Xo.setValue(et,"boneTexture",Qa.boneTexture,n),Xo.setValue(et,"boneTextureSize",Qa.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const IT=Xe.morphAttributes;if((void 0!==IT.position||void 0!==IT.normal||void 0!==IT.color&&!0===An.isWebGL2)&&ce.update(it,Xe,Re,sp),(dv||wi.receiveShadow!==it.receiveShadow)&&(wi.receiveShadow=it.receiveShadow,Xo.setValue(et,"receiveShadow",it.receiveShadow)),Re.isMeshGouraudMaterial&&null!==Re.envMap&&(op.envMap.value=li,op.flipEnvMap.value=li.isCubeTexture&&!1===li.isRenderTargetTexture?-1:1),dv&&(Xo.setValue(et,"toneMappingExposure",j.toneMappingExposure),wi.needsLights&&function SD(se,Pe){se.ambientLightColor.needsUpdate=Pe,se.lightProbe.needsUpdate=Pe,se.directionalLights.needsUpdate=Pe,se.directionalLightShadows.needsUpdate=Pe,se.pointLights.needsUpdate=Pe,se.pointLightShadows.needsUpdate=Pe,se.spotLights.needsUpdate=Pe,se.spotLightShadows.needsUpdate=Pe,se.rectAreaLights.needsUpdate=Pe,se.hemisphereLights.needsUpdate=Pe}(op,AT),yn&&!0===Re.fog&&C.refreshFogUniforms(op,yn),C.refreshMaterialUniforms(op,Re,Le,me,gt),Hd.upload(et,wi.uniformsList,op,n)),Re.isShaderMaterial&&!0===Re.uniformsNeedUpdate&&(Hd.upload(et,wi.uniformsList,op,n),Re.uniformsNeedUpdate=!1),Re.isSpriteMaterial&&Xo.setValue(et,"center",it.center),Xo.setValue(et,"modelViewMatrix",it.modelViewMatrix),Xo.setValue(et,"normalMatrix",it.normalMatrix),Xo.setValue(et,"modelMatrix",it.matrixWorld),Re.isShaderMaterial||Re.isRawShaderMaterial){const Qa=Re.uniformsGroups;for(let PT=0,ED=Qa.length;PT<ED;PT++)if(An.isWebGL2){const Hx=Qa[PT];ct.update(Hx,sp),ct.bind(Hx,sp)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return sp}(se,Pe,Xe,Re,it);qt.setMaterial(Re,kn);let li=Xe.index,Li=1;!0===Re.wireframe&&(li=m.getWireframeAttribute(Xe),Li=2);const xi=Xe.drawRange,Di=Xe.attributes.position;let ps=xi.start*Li,Xa=(xi.start+xi.count)*Li;null!==yn&&(ps=Math.max(ps,yn.start*Li),Xa=Math.min(Xa,(yn.start+yn.count)*Li)),null!==li?(ps=Math.max(ps,0),Xa=Math.min(Xa,li.count)):null!=Di&&(ps=Math.max(ps,0),Xa=Math.min(Xa,Di.count));const gd=Xa-ps;if(gd<0||gd===1/0)return;_e.setup(it,Re,ni,Xe,li);let rp,ms=ge;if(null!==li&&(rp=u.get(li),ms=Fe,ms.setIndex(rp)),it.isMesh)!0===Re.wireframe?(qt.setLineWidth(Re.wireframeLinewidth*$t()),ms.setMode(1)):ms.setMode(4);else if(it.isLine){let wi=Re.linewidth;void 0===wi&&(wi=1),qt.setLineWidth(wi*$t()),ms.setMode(it.isLineSegments?1:it.isLineLoop?2:3)}else it.isPoints?ms.setMode(0):it.isSprite&&ms.setMode(4);if(it.isInstancedMesh)ms.renderInstances(ps,gd,it.count);else if(Xe.isInstancedBufferGeometry){const ET=Math.min(Xe.instanceCount,void 0!==Xe._maxInstanceCount?Xe._maxInstanceCount:1/0);ms.renderInstances(ps,gd,ET)}else ms.render(ps,gd)},this.compile=function(se,Pe){function Xe(Re,it,yn){!0===Re.transparent&&Re.side===vi?(Re.side=Kt,Re.needsUpdate=!0,jl(Re,it,yn),Re.side=en,Re.needsUpdate=!0,jl(Re,it,yn),Re.side=vi):jl(Re,it,yn)}E=A.get(se),E.init(),G.push(E),se.traverseVisible(function(Re){Re.isLight&&Re.layers.test(Pe.layers)&&(E.pushLight(Re),Re.castShadow&&E.pushShadow(Re))}),E.setupLights(j.physicallyCorrectLights),se.traverse(function(Re){const it=Re.material;if(it)if(Array.isArray(it))for(let yn=0;yn<it.length;yn++)Xe(it[yn],se,Re);else Xe(it,se,Re)}),G.pop(),E=null};let Ze=null;function Qt(){Zi.stop()}function pn(){Zi.start()}const Zi=new up;function Ls(se,Pe,Xe,Re){if(!1===se.visible)return;if(se.layers.test(Pe.layers))if(se.isGroup)Xe=se.renderOrder;else if(se.isLOD)!0===se.autoUpdate&&se.update(Pe);else if(se.isLight)E.pushLight(se),se.castShadow&&E.pushShadow(se);else if(se.isSprite){if(!se.frustumCulled||Tt.intersectsSprite(se)){Re&&Pt.setFromMatrixPosition(se.matrixWorld).applyMatrix4(We);const kn=v.update(se),ni=se.material;ni.visible&&S.push(se,kn,ni,Xe,Pt.z,null)}}else if((se.isMesh||se.isLine||se.isPoints)&&(se.isSkinnedMesh&&se.skeleton.frame!==Zn.render.frame&&(se.skeleton.update(),se.skeleton.frame=Zn.render.frame),!se.frustumCulled||Tt.intersectsObject(se))){Re&&Pt.setFromMatrixPosition(se.matrixWorld).applyMatrix4(We);const kn=v.update(se),ni=se.material;if(Array.isArray(ni)){const li=kn.groups;for(let Li=0,xi=li.length;Li<xi;Li++){const Di=li[Li],ps=ni[Di.materialIndex];ps&&ps.visible&&S.push(se,kn,ps,Xe,Pt.z,Di)}}else ni.visible&&S.push(se,kn,ni,Xe,Pt.z,null)}const yn=se.children;for(let kn=0,ni=yn.length;kn<ni;kn++)Ls(yn[kn],Pe,Xe,Re)}function wo(se,Pe,Xe,Re){const it=se.opaque,yn=se.transmissive,kn=se.transparent;E.setupLightsView(Xe),yn.length>0&&function ip(se,Pe,Xe){const Re=An.isWebGL2;null===gt&&(gt=new po(1,1,{generateMipmaps:!0,type:sn.has("EXT_color_buffer_half_float")?so:tr,minFilter:dr,samples:Re&&!0===d?4:0})),j.getDrawingBufferSize($e),Re?gt.setSize($e.x,$e.y):gt.setSize(hl($e.x),hl($e.y));const it=j.getRenderTarget();j.setRenderTarget(gt),j.clear();const yn=j.toneMapping;j.toneMapping=yi,Er(se,Pe,Xe),j.toneMapping=yn,n.updateMultisampleRenderTarget(gt),n.updateRenderTargetMipmap(gt),j.setRenderTarget(it)}(it,Pe,Xe),Re&&qt.viewport(ae.copy(Re)),it.length>0&&Er(it,Pe,Xe),yn.length>0&&Er(yn,Pe,Xe),kn.length>0&&Er(kn,Pe,Xe),qt.buffers.depth.setTest(!0),qt.buffers.depth.setMask(!0),qt.buffers.color.setMask(!0),qt.setPolygonOffset(!1)}function Er(se,Pe,Xe){const Re=!0===Pe.isScene?Pe.overrideMaterial:null;for(let it=0,yn=se.length;it<yn;it++){const kn=se[it],ni=kn.object,li=kn.geometry,Li=null===Re?kn.material:Re,xi=kn.group;ni.layers.test(Xe.layers)&&md(ni,Pe,Xe,li,Li,xi)}}function md(se,Pe,Xe,Re,it,yn){se.onBeforeRender(j,Pe,Xe,Re,it,yn),se.modelViewMatrix.multiplyMatrices(Xe.matrixWorldInverse,se.matrixWorld),se.normalMatrix.getNormalMatrix(se.modelViewMatrix),it.onBeforeRender(j,Pe,Xe,Re,se,yn),!0===it.transparent&&it.side===vi?(it.side=Kt,it.needsUpdate=!0,j.renderBufferDirect(Xe,Pe,Re,it,se,yn),it.side=en,it.needsUpdate=!0,j.renderBufferDirect(Xe,Pe,Re,it,se,yn),it.side=vi):j.renderBufferDirect(Xe,Pe,Re,it,se,yn),se.onAfterRender(j,Pe,Xe,Re,it,yn)}function jl(se,Pe,Xe){!0!==Pe.isScene&&(Pe=Et);const Re=lt.get(se),it=E.state.lights,kn=it.state.version,ni=x.getParameters(se,it.state,E.state.shadowsArray,Pe,Xe),li=x.getProgramCacheKey(ni);let Li=Re.programs;Re.environment=se.isMeshStandardMaterial?Pe.environment:null,Re.fog=Pe.fog,Re.envMap=(se.isMeshStandardMaterial?o:r).get(se.envMap||Re.environment),void 0===Li&&(se.addEventListener("dispose",Cr),Li=new Map,Re.programs=Li);let xi=Li.get(li);if(void 0!==xi){if(Re.currentProgram===xi&&Re.lightsStateVersion===kn)return Vx(se,ni),xi}else ni.uniforms=x.getUniforms(se),se.onBuild(Xe,ni,j),se.onBeforeCompile(ni,j),xi=x.acquireProgram(ni,li),Li.set(li,xi),Re.uniforms=ni.uniforms;const Di=Re.uniforms;(!se.isShaderMaterial&&!se.isRawShaderMaterial||!0===se.clipping)&&(Di.clippingPlanes=N.uniform),Vx(se,ni),Re.needsLights=function CD(se){return se.isMeshLambertMaterial||se.isMeshToonMaterial||se.isMeshPhongMaterial||se.isMeshStandardMaterial||se.isShadowMaterial||se.isShaderMaterial&&!0===se.lights}(se),Re.lightsStateVersion=kn,Re.needsLights&&(Di.ambientLightColor.value=it.state.ambient,Di.lightProbe.value=it.state.probe,Di.directionalLights.value=it.state.directional,Di.directionalLightShadows.value=it.state.directionalShadow,Di.spotLights.value=it.state.spot,Di.spotLightShadows.value=it.state.spotShadow,Di.rectAreaLights.value=it.state.rectArea,Di.ltc_1.value=it.state.rectAreaLTC1,Di.ltc_2.value=it.state.rectAreaLTC2,Di.pointLights.value=it.state.point,Di.pointLightShadows.value=it.state.pointShadow,Di.hemisphereLights.value=it.state.hemi,Di.directionalShadowMap.value=it.state.directionalShadowMap,Di.directionalShadowMatrix.value=it.state.directionalShadowMatrix,Di.spotShadowMap.value=it.state.spotShadowMap,Di.spotLightMatrix.value=it.state.spotLightMatrix,Di.spotLightMap.value=it.state.spotLightMap,Di.pointShadowMap.value=it.state.pointShadowMap,Di.pointShadowMatrix.value=it.state.pointShadowMatrix);const ps=xi.getUniforms(),Xa=Hd.seqWithValue(ps.seq,Di);return Re.currentProgram=xi,Re.uniformsList=Xa,xi}function Vx(se,Pe){const Xe=lt.get(se);Xe.outputEncoding=Pe.outputEncoding,Xe.instancing=Pe.instancing,Xe.skinning=Pe.skinning,Xe.morphTargets=Pe.morphTargets,Xe.morphNormals=Pe.morphNormals,Xe.morphColors=Pe.morphColors,Xe.morphTargetsCount=Pe.morphTargetsCount,Xe.numClippingPlanes=Pe.numClippingPlanes,Xe.numIntersection=Pe.numClipIntersection,Xe.vertexAlphas=Pe.vertexAlphas,Xe.vertexTangents=Pe.vertexTangents,Xe.toneMapping=Pe.toneMapping}Zi.setAnimationLoop(function Mt(se){Ze&&Ze(se)}),typeof self<"u"&&Zi.setContext(self),this.setAnimationLoop=function(se){Ze=se,pt.setAnimationLoop(se),null===se?Zi.stop():Zi.start()},pt.addEventListener("sessionstart",Qt),pt.addEventListener("sessionend",pn),this.render=function(se,Pe){if(void 0===Pe||!0===Pe.isCamera){if(!0!==B){if(!0===se.matrixWorldAutoUpdate&&se.updateMatrixWorld(),null===Pe.parent&&!0===Pe.matrixWorldAutoUpdate&&Pe.updateMatrixWorld(),!0===pt.enabled&&!0===pt.isPresenting&&(!0===pt.cameraAutoUpdate&&pt.updateCamera(Pe),Pe=pt.getCamera()),!0===se.isScene&&se.onBeforeRender(j,se,Pe,H),E=A.get(se,G.length),E.init(),G.push(E),We.multiplyMatrices(Pe.projectionMatrix,Pe.matrixWorldInverse),Tt.setFromProjectionMatrix(We),Dt=this.localClippingEnabled,ot=N.init(this.clippingPlanes,Dt,Pe),S=O.get(se,L.length),S.init(),L.push(S),Ls(se,Pe,0,j.sortObjects),S.finish(),!0===j.sortObjects&&S.sort(at,Ee),!0===ot&&N.beginShadows(),$.render(E.state.shadowsArray,se,Pe),!0===ot&&N.endShadows(),!0===this.info.autoReset&&this.info.reset(),te.render(S,se),E.setupLights(j.physicallyCorrectLights),Pe.isArrayCamera){const Re=Pe.cameras;for(let it=0,yn=Re.length;it<yn;it++){const kn=Re[it];wo(S,se,kn,kn.viewport)}}else wo(S,se,Pe);null!==H&&(n.updateMultisampleRenderTarget(H),n.updateRenderTargetMipmap(H)),!0===se.isScene&&se.onAfterRender(j,se,Pe),_e.resetDefaultState(),Y=-1,ne=null,G.pop(),E=G.length>0?G[G.length-1]:null,L.pop(),S=L.length>0?L[L.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return z},this.getActiveMipmapLevel=function(){return J},this.getRenderTarget=function(){return H},this.setRenderTargetTextures=function(se,Pe,Xe){lt.get(se.texture).__webglTexture=Pe,lt.get(se.depthTexture).__webglTexture=Xe;const Re=lt.get(se);Re.__hasExternalTextures=!0,Re.__hasExternalTextures&&(Re.__autoAllocateDepthBuffer=void 0===Xe,Re.__autoAllocateDepthBuffer||!0===sn.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Re.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(se,Pe){const Xe=lt.get(se);Xe.__webglFramebuffer=Pe,Xe.__useDefaultFramebuffer=void 0===Pe},this.setRenderTarget=function(se,Pe=0,Xe=0){H=se,z=Pe,J=Xe;let Re=!0,it=null,yn=!1,kn=!1;if(se){const li=lt.get(se);void 0!==li.__useDefaultFramebuffer?(qt.bindFramebuffer(36160,null),Re=!1):void 0===li.__webglFramebuffer?n.setupRenderTarget(se):li.__hasExternalTextures&&n.rebindTextures(se,lt.get(se.texture).__webglTexture,lt.get(se.depthTexture).__webglTexture);const Li=se.texture;(Li.isData3DTexture||Li.isDataArrayTexture||Li.isCompressedArrayTexture)&&(kn=!0);const xi=lt.get(se).__webglFramebuffer;se.isWebGLCubeRenderTarget?(it=xi[Pe],yn=!0):it=An.isWebGL2&&se.samples>0&&!1===n.useMultisampledRTT(se)?lt.get(se).__webglMultisampledFramebuffer:xi,ae.copy(se.viewport),he.copy(se.scissor),Z=se.scissorTest}else ae.copy(Me).multiplyScalar(Le).floor(),he.copy(qe).multiplyScalar(Le).floor(),Z=ut;if(qt.bindFramebuffer(36160,it)&&An.drawBuffers&&Re&&qt.drawBuffers(se,it),qt.viewport(ae),qt.scissor(he),qt.setScissorTest(Z),yn){const li=lt.get(se.texture);et.framebufferTexture2D(36160,36064,34069+Pe,li.__webglTexture,Xe)}else if(kn){const li=lt.get(se.texture);et.framebufferTextureLayer(36160,36064,li.__webglTexture,Xe||0,Pe||0)}Y=-1},this.readRenderTargetPixels=function(se,Pe,Xe,Re,it,yn,kn){if(!se||!se.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let ni=lt.get(se).__webglFramebuffer;if(se.isWebGLCubeRenderTarget&&void 0!==kn&&(ni=ni[kn]),ni){qt.bindFramebuffer(36160,ni);try{const li=se.texture,Li=li.format,xi=li.type;if(Li!==Te&&Ie.convert(Li)!==et.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const Di=xi===so&&(sn.has("EXT_color_buffer_half_float")||An.isWebGL2&&sn.has("EXT_color_buffer_float"));if(!(xi===tr||Ie.convert(xi)===et.getParameter(35738)||xi===Pr&&(An.isWebGL2||sn.has("OES_texture_float")||sn.has("WEBGL_color_buffer_float"))||Di))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");Pe>=0&&Pe<=se.width-Re&&Xe>=0&&Xe<=se.height-it&&et.readPixels(Pe,Xe,Re,it,Ie.convert(Li),Ie.convert(xi),yn)}finally{const li=null!==H?lt.get(H).__webglFramebuffer:null;qt.bindFramebuffer(36160,li)}}},this.copyFramebufferToTexture=function(se,Pe,Xe=0){const Re=Math.pow(2,-Xe),it=Math.floor(Pe.image.width*Re),yn=Math.floor(Pe.image.height*Re);n.setTexture2D(Pe,0),et.copyTexSubImage2D(3553,Xe,0,0,se.x,se.y,it,yn),qt.unbindTexture()},this.copyTextureToTexture=function(se,Pe,Xe,Re=0){const it=Pe.image.width,yn=Pe.image.height,kn=Ie.convert(Xe.format),ni=Ie.convert(Xe.type);n.setTexture2D(Xe,0),et.pixelStorei(37440,Xe.flipY),et.pixelStorei(37441,Xe.premultiplyAlpha),et.pixelStorei(3317,Xe.unpackAlignment),Pe.isDataTexture?et.texSubImage2D(3553,Re,se.x,se.y,it,yn,kn,ni,Pe.image.data):Pe.isCompressedTexture?et.compressedTexSubImage2D(3553,Re,se.x,se.y,Pe.mipmaps[0].width,Pe.mipmaps[0].height,kn,Pe.mipmaps[0].data):et.texSubImage2D(3553,Re,se.x,se.y,kn,ni,Pe.image),0===Re&&Xe.generateMipmaps&&et.generateMipmap(3553),qt.unbindTexture()},this.copyTextureToTexture3D=function(se,Pe,Xe,Re,it=0){if(j.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const yn=se.max.x-se.min.x+1,kn=se.max.y-se.min.y+1,ni=se.max.z-se.min.z+1,li=Ie.convert(Re.format),Li=Ie.convert(Re.type);let xi;if(Re.isData3DTexture)n.setTexture3D(Re,0),xi=32879;else{if(!Re.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");n.setTexture2DArray(Re,0),xi=35866}et.pixelStorei(37440,Re.flipY),et.pixelStorei(37441,Re.premultiplyAlpha),et.pixelStorei(3317,Re.unpackAlignment);const Di=et.getParameter(3314),ps=et.getParameter(32878),Xa=et.getParameter(3316),gd=et.getParameter(3315),rp=et.getParameter(32877),ms=Xe.isCompressedTexture?Xe.mipmaps[0]:Xe.image;et.pixelStorei(3314,ms.width),et.pixelStorei(32878,ms.height),et.pixelStorei(3316,se.min.x),et.pixelStorei(3315,se.min.y),et.pixelStorei(32877,se.min.z),Xe.isDataTexture||Xe.isData3DTexture?et.texSubImage3D(xi,it,Pe.x,Pe.y,Pe.z,yn,kn,ni,li,Li,ms.data):Xe.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),et.compressedTexSubImage3D(xi,it,Pe.x,Pe.y,Pe.z,yn,kn,ni,li,ms.data)):et.texSubImage3D(xi,it,Pe.x,Pe.y,Pe.z,yn,kn,ni,li,Li,ms),et.pixelStorei(3314,Di),et.pixelStorei(32878,ps),et.pixelStorei(3316,Xa),et.pixelStorei(3315,gd),et.pixelStorei(32877,rp),0===it&&Re.generateMipmaps&&et.generateMipmap(xi),qt.unbindTexture()},this.initTexture=function(se){se.isCubeTexture?n.setTextureCube(se,0):se.isData3DTexture?n.setTexture3D(se,0):se.isDataArrayTexture||se.isCompressedArrayTexture?n.setTexture2DArray(se,0):n.setTexture2D(se,0),qt.unbindTexture()},this.resetState=function(){z=0,J=0,H=null,qt.reset(),_e.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}(class Hu extends b_{}).prototype.isWebGL1Renderer=!0;class Wu extends ir{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(t.backgroundIntensity=this.backgroundIntensity),t}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}class Xd extends _r{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Yt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const Tm=new Rt,Mm=new Ii,Ku=new oe,Rf=new ie;class x_ extends ir{constructor(e=new Nn,t=new Xd){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,a=this.matrixWorld,d=e.params.Points.threshold,g=i.drawRange;if(null===i.boundingSphere&&i.computeBoundingSphere(),Ku.copy(i.boundingSphere),Ku.applyMatrix4(a),Ku.radius+=d,!1===e.ray.intersectsSphere(Ku))return;Tm.copy(a).invert(),Mm.copy(e.ray).applyMatrix4(Tm);const _=d/((this.scale.x+this.scale.y+this.scale.z)/3),y=_*_,b=i.index,S=i.attributes.position;if(null!==b)for(let G=Math.max(0,g.start),j=Math.min(b.count,g.start+g.count);G<j;G++){const B=b.getX(G);Rf.fromBufferAttribute(S,B),D_(Rf,B,y,a,e,t,this)}else for(let G=Math.max(0,g.start),j=Math.min(S.count,g.start+g.count);G<j;G++)Rf.fromBufferAttribute(S,G),D_(Rf,G,y,a,e,t,this)}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const a=t[i[0]];if(void 0!==a){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let d=0,g=a.length;d<g;d++){const _=a[d].name||String(d);this.morphTargetInfluences.push(0),this.morphTargetDictionary[_]=d}}}}}function D_(h,e,t,i,a,d,g){const _=Mm.distanceSqToPoint(h);if(_<t){const y=new ie;Mm.closestPointToPoint(h,y),y.applyMatrix4(i);const b=a.ray.origin.distanceTo(y);if(b<a.near||b>a.far)return;d.push({distance:b,distanceToRay:Math.sqrt(_),point:y,index:e,face:null,object:g})}}function hs(h,e,t){return sd(h)?new h.constructor(h.subarray(e,void 0!==t?t:h.length)):h.slice(e,t)}function Da(h,e,t){return!h||!t&&h.constructor===e?h:"number"==typeof e.BYTES_PER_ELEMENT?new e(h):Array.prototype.slice.call(h)}function sd(h){return ArrayBuffer.isView(h)&&!(h instanceof DataView)}class Uf{constructor(e,t,i,a){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==a?a:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,a=t[i],d=t[i-1];e:{t:{let g;n:{i:if(!(e<a)){for(let _=i+2;;){if(void 0===a){if(e<d)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===_)break;if(d=a,a=t[++i],e<a)break t}g=t.length;break n}if(e>=d)break e;{const _=t[1];e<_&&(i=2,d=_);for(let y=i-2;;){if(void 0===d)return this._cachedIndex=0,this.copySampleValue_(0);if(i===y)break;if(a=d,d=t[--i-1],e>=d)break t}g=i,i=0}}for(;i<g;){const _=i+g>>>1;e<t[_]?g=_:i=_+1}if(a=t[i],d=t[i-1],void 0===d)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===a)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,d,a)}return this.interpolate_(i,d,e,a)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,a=this.valueSize,d=e*a;for(let g=0;g!==a;++g)t[g]=i[d+g];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Kv extends Uf{constructor(e,t,i,a){super(e,t,i,a),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:2400,endingEnd:2400}}intervalChanged_(e,t,i){const a=this.parameterPositions;let d=e-2,g=e+1,_=a[d],y=a[g];if(void 0===_)switch(this.getSettings_().endingStart){case 2401:d=e,_=2*t-i;break;case 2402:d=a.length-2,_=t+a[d]-a[d+1];break;default:d=e,_=i}if(void 0===y)switch(this.getSettings_().endingEnd){case 2401:g=e,y=2*i-t;break;case 2402:g=1,y=i+a[1]-a[0];break;default:g=e-1,y=t}const b=.5*(i-t),w=this.valueSize;this._weightPrev=b/(t-_),this._weightNext=b/(y-i),this._offsetPrev=d*w,this._offsetNext=g*w}interpolate_(e,t,i,a){const d=this.resultBuffer,g=this.sampleValues,_=this.valueSize,y=e*_,b=y-_,w=this._offsetPrev,S=this._offsetNext,E=this._weightPrev,L=this._weightNext,G=(i-t)/(a-t),j=G*G,B=j*G,z=-E*B+2*E*j-E*G,J=(1+E)*B+(-1.5-2*E)*j+(-.5+E)*G+1,H=(-1-L)*B+(1.5+L)*j+.5*G,Y=L*B-L*j;for(let ne=0;ne!==_;++ne)d[ne]=z*g[w+ne]+J*g[b+ne]+H*g[y+ne]+Y*g[S+ne];return d}}class Lm extends Uf{constructor(e,t,i,a){super(e,t,i,a)}interpolate_(e,t,i,a){const d=this.resultBuffer,g=this.sampleValues,_=this.valueSize,y=e*_,b=y-_,w=(i-t)/(a-t),S=1-w;for(let E=0;E!==_;++E)d[E]=g[b+E]*S+g[y+E]*w;return d}}class Bm extends Uf{constructor(e,t,i,a){super(e,t,i,a)}interpolate_(e){return this.copySampleValue_(e-1)}}class Ja{constructor(e,t,i,a){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Da(t,this.TimeBufferType),this.values=Da(i,this.ValueBufferType),this.setInterpolation(a||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:Da(e.times,Array),values:Da(e.values,Array)};const a=e.getInterpolation();a!==e.DefaultInterpolation&&(i.interpolation=a)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new Bm(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Lm(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Kv(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case 2300:t=this.InterpolantFactoryMethodDiscrete;break;case 2301:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(i);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let i=0,a=t.length;i!==a;++i)t[i]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let i=0,a=t.length;i!==a;++i)t[i]*=e}return this}trim(e,t){const i=this.times,a=i.length;let d=0,g=a-1;for(;d!==a&&i[d]<e;)++d;for(;-1!==g&&i[g]>t;)--g;if(++g,0!==d||g!==a){d>=g&&(g=Math.max(g,1),d=g-1);const _=this.getValueSize();this.times=hs(i,d,g),this.values=hs(this.values,d*_,g*_)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,a=this.values,d=i.length;0===d&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let g=null;for(let _=0;_!==d;_++){const y=i[_];if("number"==typeof y&&isNaN(y)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,_,y),e=!1;break}if(null!==g&&g>y){console.error("THREE.KeyframeTrack: Out of order keys.",this,_,y,g),e=!1;break}g=y}if(void 0!==a&&sd(a))for(let _=0,y=a.length;_!==y;++_){const b=a[_];if(isNaN(b)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,_,b),e=!1;break}}return e}optimize(){const e=hs(this.times),t=hs(this.values),i=this.getValueSize(),a=2302===this.getInterpolation(),d=e.length-1;let g=1;for(let _=1;_<d;++_){let y=!1;const b=e[_];if(b!==e[_+1]&&(1!==_||b!==e[0]))if(a)y=!0;else{const S=_*i,E=S-i,L=S+i;for(let G=0;G!==i;++G){const j=t[S+G];if(j!==t[E+G]||j!==t[L+G]){y=!0;break}}}if(y){if(_!==g){e[g]=e[_];const S=_*i,E=g*i;for(let L=0;L!==i;++L)t[E+L]=t[S+L]}++g}}if(d>0){e[g]=e[d];for(let _=d*i,y=g*i,b=0;b!==i;++b)t[y+b]=t[_+b];++g}return g!==e.length?(this.times=hs(e,0,g),this.values=hs(t,0,g*i)):(this.times=e,this.values=t),this}clone(){const e=hs(this.times,0),t=hs(this.values,0),a=new(0,this.constructor)(this.name,e,t);return a.createInterpolant=this.createInterpolant,a}}Ja.prototype.TimeBufferType=Float32Array,Ja.prototype.ValueBufferType=Float32Array,Ja.prototype.DefaultInterpolation=2301;class ld extends Ja{}ld.prototype.ValueTypeName="bool",ld.prototype.ValueBufferType=Array,ld.prototype.DefaultInterpolation=2300,ld.prototype.InterpolantFactoryMethodLinear=void 0,ld.prototype.InterpolantFactoryMethodSmooth=void 0;(class C_ extends Ja{}).prototype.ValueTypeName="color";(class Hf extends Ja{}).prototype.ValueTypeName="number";class Xv extends Uf{constructor(e,t,i,a){super(e,t,i,a)}interpolate_(e,t,i,a){const d=this.resultBuffer,g=this.sampleValues,_=this.valueSize,y=(i-t)/(a-t);let b=e*_;for(let w=b+_;b!==w;b+=4)gr.slerpFlat(d,0,g,b-_,g,b,y);return d}}class uh extends Ja{InterpolantFactoryMethodLinear(e){return new Xv(this.times,this.values,this.getValueSize(),e)}}uh.prototype.ValueTypeName="quaternion",uh.prototype.DefaultInterpolation=2301,uh.prototype.InterpolantFactoryMethodSmooth=void 0;class cd extends Ja{}cd.prototype.ValueTypeName="string",cd.prototype.ValueBufferType=Array,cd.prototype.DefaultInterpolation=2300,cd.prototype.InterpolantFactoryMethodLinear=void 0,cd.prototype.InterpolantFactoryMethodSmooth=void 0;(class zf extends Ja{}).prototype.ValueTypeName="vector";class E_ extends Error{constructor(e,t){super(e),this.response=t}}class L_{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=B_(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=B_();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function B_(){return(typeof performance>"u"?Date:performance).now()}const k_="\\[\\]\\.:\\/",T0=new RegExp("["+k_+"]","g"),G_="[^"+k_+"]",M0="[^"+k_.replace("\\.","")+"]",S0=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",G_)+/(WCOD+)?/.source.replace("WCOD",M0)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",G_)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",G_)+"$"),C0=["material","materials","bones","map"];class E0{constructor(e,t,i){const a=i||lr.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,a)}getValue(e,t){this.bind();const a=this._bindings[this._targetGroup.nCachedObjects_];void 0!==a&&a.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let a=this._targetGroup.nCachedObjects_,d=i.length;a!==d;++a)i[a].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}let lr=(()=>{class h{constructor(t,i,a){this.path=i,this.parsedPath=a||h.parseTrackName(i),this.node=h.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,i,a){return t&&t.isAnimationObjectGroup?new h.Composite(t,i,a):new h(t,i,a)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(T0,"")}static parseTrackName(t){const i=S0.exec(t);if(null===i)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const a={nodeName:i[2],objectName:i[3],objectIndex:i[4],propertyName:i[5],propertyIndex:i[6]},d=a.nodeName&&a.nodeName.lastIndexOf(".");if(void 0!==d&&-1!==d){const g=a.nodeName.substring(d+1);-1!==C0.indexOf(g)&&(a.nodeName=a.nodeName.substring(0,d),a.objectName=g)}if(null===a.propertyName||0===a.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return a}static findNode(t,i){if(void 0===i||""===i||"."===i||-1===i||i===t.name||i===t.uuid)return t;if(t.skeleton){const a=t.skeleton.getBoneByName(i);if(void 0!==a)return a}if(t.children){const a=function(g){for(let _=0;_<g.length;_++){const y=g[_];if(y.name===i||y.uuid===i)return y;const b=a(y.children);if(b)return b}return null},d=a(t.children);if(d)return d}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,i){t[i]=this.targetObject[this.propertyName]}_getValue_array(t,i){const a=this.resolvedProperty;for(let d=0,g=a.length;d!==g;++d)t[i++]=a[d]}_getValue_arrayElement(t,i){t[i]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,i){this.resolvedProperty.toArray(t,i)}_setValue_direct(t,i){this.targetObject[this.propertyName]=t[i]}_setValue_direct_setNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,i){const a=this.resolvedProperty;for(let d=0,g=a.length;d!==g;++d)a[d]=t[i++]}_setValue_array_setNeedsUpdate(t,i){const a=this.resolvedProperty;for(let d=0,g=a.length;d!==g;++d)a[d]=t[i++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,i){const a=this.resolvedProperty;for(let d=0,g=a.length;d!==g;++d)a[d]=t[i++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,i){this.resolvedProperty[this.propertyIndex]=t[i]}_setValue_arrayElement_setNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,i){this.resolvedProperty.fromArray(t,i)}_setValue_fromArray_setNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,i){this.bind(),this.getValue(t,i)}_setValue_unbound(t,i){this.bind(),this.setValue(t,i)}bind(){let t=this.node;const i=this.parsedPath,a=i.objectName,d=i.propertyName;let g=i.propertyIndex;if(t||(t=h.findNode(this.rootNode,i.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(a){let w=i.objectIndex;switch(a){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let S=0;S<t.length;S++)if(t[S].name===w){w=S;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);t=t.material.map;break;default:if(void 0===t[a])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[a]}if(void 0!==w){if(void 0===t[w])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[w]}}const _=t[d];if(void 0===_)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+i.nodeName+"."+d+" but it wasn't found.",t);let y=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?y=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(y=this.Versioning.MatrixWorldNeedsUpdate);let b=this.BindingType.Direct;if(void 0!==g){if("morphTargetInfluences"===d){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[g]&&(g=t.morphTargetDictionary[g])}b=this.BindingType.ArrayElement,this.resolvedProperty=_,this.propertyIndex=g}else void 0!==_.fromArray&&void 0!==_.toArray?(b=this.BindingType.HasFromToArray,this.resolvedProperty=_):Array.isArray(_)?(b=this.BindingType.EntireArray,this.resolvedProperty=_):this.propertyName=d;this.getValue=this.GetterByBindingType[b],this.setValue=this.SetterByBindingTypeAndVersioning[b][y]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return h.Composite=E0,h})();lr.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},lr.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},lr.prototype.GetterByBindingType=[lr.prototype._getValue_direct,lr.prototype._getValue_array,lr.prototype._getValue_arrayElement,lr.prototype._getValue_toArray],lr.prototype.SetterByBindingTypeAndVersioning=[[lr.prototype._setValue_direct,lr.prototype._setValue_direct_setNeedsUpdate,lr.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[lr.prototype._setValue_array,lr.prototype._setValue_array_setNeedsUpdate,lr.prototype._setValue_array_setMatrixWorldNeedsUpdate],[lr.prototype._setValue_arrayElement,lr.prototype._setValue_arrayElement_setNeedsUpdate,lr.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[lr.prototype._setValue_fromArray,lr.prototype._setValue_fromArray_setNeedsUpdate,lr.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]],new Float32Array(1);class Vm{constructor(e,t,i=0,a=1/0){this.ray=new Ii(e,t),this.near=i,this.far=a,this.camera=null,this.layers=new fl,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,i=[]){return Um(e,this,i,t),i.sort(U_),i}intersectObjects(e,t=!0,i=[]){for(let a=0,d=e.length;a<d;a++)Um(e[a],this,i,t);return i.sort(U_),i}}function U_(h,e){return h.distance-e.distance}function Um(h,e,t,i){if(h.layers.test(e.layers)&&h.raycast(e,t),!0===i){const a=h.children;for(let d=0,g=a.length;d<g;d++)Um(a[d],e,t,!0)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:tt}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=tt);var _y=ee(7579),J0=ee(6063);class vy extends _y.x{constructor(e=1/0,t=1/0,i=J0.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:i,_infiniteTimeWindow:a,_timestampProvider:d,_windowTime:g}=this;t||(i.push(e),!a&&i.push(d.now()+g)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:i,_buffer:a}=this,d=a.slice();for(let g=0;g<d.length&&!e.closed;g+=i?1:2)e.next(d[g]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:i,_infiniteTimeWindow:a}=this,d=(a?1:2)*e;if(e<1/0&&d<i.length&&i.splice(0,i.length-d),!a){const g=t.now();let _=0;for(let y=1;y<i.length&&i[y]<=g;y+=2)_=y;_&&i.splice(0,_+1)}}}var J_=ee(2722),Xf=function(){var h=0,e=document.createElement("div");function t(w){return e.appendChild(w.dom),w}function i(w){for(var S=0;S<e.children.length;S++)e.children[S].style.display=S===w?"block":"none";h=w}e.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",e.addEventListener("click",function(w){w.preventDefault(),i(++h%e.children.length)},!1);var a=(performance||Date).now(),d=a,g=0,_=t(new Xf.Panel("FPS","#0ff","#002")),y=t(new Xf.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var b=t(new Xf.Panel("MB","#f08","#201"));return i(0),{REVISION:16,dom:e,addPanel:t,showPanel:i,begin:function(){a=(performance||Date).now()},end:function(){g++;var w=(performance||Date).now();if(y.update(w-a,200),w>=d+1e3&&(_.update(1e3*g/(w-d),100),d=w,g=0,b)){var S=performance.memory;b.update(S.usedJSHeapSize/1048576,S.jsHeapSizeLimit/1048576)}return w},update:function(){a=this.end()},domElement:e,setMode:i}};Xf.Panel=function(h,e,t){var i=1/0,a=0,d=Math.round,g=d(window.devicePixelRatio||1),_=80*g,y=48*g,b=3*g,w=2*g,S=3*g,E=15*g,L=74*g,G=30*g,j=document.createElement("canvas");j.width=_,j.height=y,j.style.cssText="width:80px;height:48px";var B=j.getContext("2d");return B.font="bold "+9*g+"px Helvetica,Arial,sans-serif",B.textBaseline="top",B.fillStyle=t,B.fillRect(0,0,_,y),B.fillStyle=e,B.fillText(h,b,w),B.fillRect(S,E,L,G),B.fillStyle=t,B.globalAlpha=.9,B.fillRect(S,E,L,G),{dom:j,update:function(z,J){i=Math.min(i,z),a=Math.max(a,z),B.fillStyle=t,B.globalAlpha=1,B.fillRect(0,0,_,E),B.fillStyle=e,B.fillText(d(z)+" "+h+" ("+d(i)+"-"+d(a)+")",b,w),B.drawImage(j,S+g,E,L-g,G,S,E,L-g,G),B.fillRect(S+L-g,E,g,G),B.fillStyle=t,B.globalAlpha=.9,B.fillRect(S+L-g,E,g,d((1-z/J)*G))}}};const Qf=Xf;var Z0=ee(6895);const yy=["rendererCanvas"];var Ko=(()=>{return(h=Ko||(Ko={})).mouseEnter="mouseEnter",h.mouseExit="mouseExit",h.click="click",h.pointerDown="pointerDown",h.pointerUp="pointerUp",Ko;var h})();const Z_=new W.OlP("A reference to the raycaster object",{factory:()=>new Vm});let qm=(()=>{class h{constructor(){this.raycaster=(0,W.f3M)(Z_),this.selected=null,this.enabled=!0,this.groups=[],this.paused=!1,this.maxClickDistance=23,this.nid=h.instanceCnt++,this.onPointerMove=this.onPointerMove.bind(this),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerUp=this.onPointerUp.bind(this)}ngOnDestroy(){this.disable(),this.unsubscribe()}subscribe(){if(!this.canvas)throw new Error("missing canvas");this.canvas.addEventListener("pointermove",this.onPointerMove),this.canvas.addEventListener("pointerdown",this.onPointerDown),this.canvas.addEventListener("pointerup",this.onPointerUp)}unsubscribe(){if(!this.canvas)throw new Error("missing canvas");this.canvas.removeEventListener("pointermove",this.onPointerMove),this.canvas.removeEventListener("pointerdown",this.onPointerDown),this.canvas.removeEventListener("pointerup",this.onPointerUp)}enable(){this.enabled=!0}disable(){this.enabled=!1}pause(){this.paused=!0}resume(){this.paused=!1}get isEnabled(){return this.enabled}init(t,i){this.camera=t,this.canvas=i,this.subscribe()}addEventTarget(t){this.groups.push(t)}removeEventTarget(t){const i=this.groups.indexOf(t);i>=0&&this.groups.splice(i,1)}onPointerMove(t){if(!this.isReady())return;const i=this.getFirstIntersectedGroup(t.layerX,t.layerY,Ko.mouseEnter);if((!this.selected||this.selected!==i?.target)&&(this.selected&&(this.selected.host.objRef?.dispatchEvent({type:Ko.mouseExit,component:this.selected.host}),this.selected.emitOnMouseExit(),this.selected=null),i&&i.target)){this.selected=i.target;const a={type:Ko.mouseEnter,component:i.target.host,...i};this.selected.host.objRef?.dispatchEvent(a),this.selected.emitOnMouseEnter(a)}}onPointerDown(t){if(this.maxClickDistance=t.width,this.pointerDownEvent=t,!this.isReady())return;const i=this.getFirstIntersectedGroup(t.layerX,t.layerY,Ko.pointerDown);if(i&&i.target&&i.target.host.objRef){const a={type:Ko.pointerDown,component:i.target.host,...i};i.target.host.objRef.dispatchEvent(a),i.target.emitOnPointerDown(a)}}onPointerUp(t){const i=this.pointerDownEvent;if(this.pointerDownEvent=void 0,!this.isReady())return;let a=this.getFirstIntersectedGroup(t.layerX,t.layerY,Ko.pointerUp);if(a&&a.target&&a.target.host.objRef){const d={type:Ko.pointerUp,component:a.target.host,...a};a.target.host.objRef.dispatchEvent(d),a.target.emitOnPointerUp(d)}if(!(this.calcPointerDownUpDinstance(t,i)>this.maxClickDistance)&&(a=this.getFirstIntersectedGroup(t.layerX,t.layerY,Ko.click),a&&a.target&&a.target.host.objRef)){const d={type:Ko.click,component:a.target.host,...a};a.target.host.objRef.dispatchEvent(d),a.target.emitOnClick(d)}}isReady(t){return!!(this.enabled&&(t||!this.paused)&&this.camera&&this.camera.objRef&&this.groups&&this.groups.length>0)}calcPointerDownUpDinstance(t,i){if(!i)return Number.MAX_VALUE;const a=t.layerX-i.layerX,d=t.layerY-i.layerY;return Math.sqrt(a*a+d*d)}getFirstIntersectedGroup(t,i,a){if(!this.camera||!this.canvas||!this.camera.objRef)return;const d=new st(t=t/this.canvas.clientWidth*2-1,i=-i/this.canvas.clientHeight*2+1);let g,_;this.raycaster.setFromCamera(d,this.camera.objRef);for(const y of this.groups){const b=y.host.objRef;if(!y[a]||!b)continue;const w=this.raycaster.intersectObject(b,!0);w.length>0&&(!g||g.distance>w[0].distance)&&(g=w[0],_=y)}return _&&g?{target:_,...g}:void 0}}return h.instanceCnt=0,h.\u0275fac=function(t){return new(t||h)},h.\u0275prov=W.Yz7({token:h,factory:h.\u0275fac}),h})();function Hr(h,e){return function Ty(h){return!(!h||!h.set)}(h)?void 0===e?h:Array.isArray(e)?(h.set(...e),h):h.copy&&e?(h.copy(e),h):void 0!==e?(h.set(e),h):h:e}function xy(h){return!0===h.__isProxy&&void 0===h.objRef}let K_=(()=>{class h{set objRef(t){this.applyObjRef(t)}get objRef(){return this._objRef}constructor(){this.autoAddToParent=!0,this.autoDispose=!0}addToParent(){}removeFromParent(){}set threeEvents(t){this.removeEvents(),this.eventListeners=t,this.applyEvents()}get threeEvents(){return this.eventListeners}get onUpdate(){return this.updateEmitter||(this.updateEmitter=new W.vpe),this.updateEmitter}get objRef$(){return this._objRef$||(this._objRef$=new vy(1)),this._objRef$}ngOnInit(){this.objRef||(this.objRef=this.createThreeInstance(this.args))}getType(){throw new Error("derive me")}createThreeInstance(t){return Array.isArray(t)?new(this.getType())(...t):new(this.getType())(t)}ngOnChanges(t){if(!this.objRef||xy(this.objRef)){t.objRef?.currentValue?this.objRef=t.objRef?.currentValue:this.objRef||(this.objRef=this.createThreeInstance(t.args?.currentValue));for(const i in t)this[i]=t[i].currentValue;this.emitPropertyChanges(t)}else this.emitPropertyChanges(t)}disposeObjRef(){(function nb(h){return!(!h||"function"!=typeof h.dispose)})(this.objRef)&&this.objRef.dispose()}ngOnDestroy(){this.removeEvents(),this.removeFromParent(),this.autoDispose&&this.disposeObjRef()}applyObjRef(t){this._objRef!==t&&(this.removeFromParent(),this._objRef=t,this.autoAddToParent&&this.addToParent()),this.emitObjRefChange()}emitObjRefChange(){this._objRef&&!xy(this._objRef)&&(this._objRef.dispatchEvent?.({type:"loaded",object:this._objRef}),this._objRef$&&this._objRef$.next(this._objRef))}emitPropertyChanges(t){this._objRef&&this._objRef.dispatchEvent?.({type:"changes",changes:t}),this.updateEmitter&&this.updateEmitter.next(t)}removeEvents(){if(this.eventListeners&&this._objRef){for(const t of Object.entries(this.eventListeners))this._objRef.removeEventListener(t[0],t[1]);this.eventListeners=void 0}}applyEvents(){if(this.eventListeners&&this._objRef)for(const t of Object.entries(this.eventListeners))this._objRef.addEventListener(t[0],t[1])}}return h.\u0275fac=function(t){return new(t||h)},h.\u0275cmp=W.Xpm({type:h,selectors:[["th-abs-wrapper"]],inputs:{autoAddToParent:"autoAddToParent",autoDispose:"autoDispose",objRef:"objRef",args:"args",threeEvents:"threeEvents"},outputs:{onUpdate:"onUpdate",objRef$:"objRef$"},features:[W.TTD],decls:0,vars:0,template:function(t,i){},encapsulation:2}),h})(),rb=(()=>{class h extends K_{constructor(t){super(),this.parent=t}addToParent(){this._objRef&&this.parent.objRef&&(!this._objRef.parent||this._objRef.parent.uuid!==this.parent.objRef.uuid)&&this.parent.objRef.add(this._objRef)}removeFromParent(){this._objRef?.parent?.remove(this._objRef)}applyObjRef(t){(this._objRef!==t||this._objRef?.parent?.uuid!==this.parent.objRef.uuid)&&(this.removeFromParent(),this._objRef=t,this.autoAddToParent&&this.addToParent()),this.emitObjRefChange()}attachToParent(t,i){!this.parent.objRef||t===i&&i?.parent?.uuid===this.parent.objRef.uuid||(i&&i.parent&&i.parent.remove(i),t&&(!t.parent||t.parent&&t.parent.uuid!==this.parent.objRef.uuid)&&this.parent.objRef.add(t))}set lookAt(t){Promise.resolve().then(()=>{this.objRef&&(Array.isArray(t)?this.objRef.lookAt(...t):this.objRef.lookAt(t))})}}return h.\u0275fac=function(t){return new(t||h)(W.Y36(h))},h.\u0275cmp=W.Xpm({type:h,selectors:[["th-abs-object"]],inputs:{lookAt:"lookAt"},features:[W.qOj],decls:0,vars:0,template:function(t,i){},encapsulation:2}),h})(),ys=(()=>{class h extends rb{getType(){return ir}set id(t){this._objRef&&(this._objRef.id=t)}set uuid(t){this._objRef&&(this._objRef.uuid=t)}set name(t){this._objRef&&(this._objRef.name=t)}set type(t){this._objRef&&(this._objRef.type=t)}set children(t){this._objRef&&(this._objRef.children=t)}set up(t){this._objRef&&(this._objRef.up=Hr(this._objRef.up,t))}set position(t){this._objRef&&Hr(this._objRef.position,t)}set rotation(t){this._objRef&&Hr(this._objRef.rotation,t)}set quaternion(t){this._objRef&&Hr(this._objRef.quaternion,t)}set scale(t){this._objRef&&Hr(this._objRef.scale,t)}set modelViewMatrix(t){this._objRef&&Hr(this._objRef.modelViewMatrix,t)}set normalMatrix(t){this._objRef&&Hr(this._objRef.normalMatrix,t)}set matrix(t){this._objRef&&(this._objRef.matrix=Hr(this._objRef.matrix,t))}set matrixWorld(t){this._objRef&&(this._objRef.matrixWorld=Hr(this._objRef.matrixWorld,t))}set matrixAutoUpdate(t){this._objRef&&(this._objRef.matrixAutoUpdate=t)}set matrixWorldAutoUpdate(t){this._objRef&&(this._objRef.matrixWorldAutoUpdate=t)}set matrixWorldNeedsUpdate(t){this._objRef&&(this._objRef.matrixWorldNeedsUpdate=t)}set layers(t){this._objRef&&(this._objRef.layers=Hr(this._objRef.layers,t))}set visible(t){this._objRef&&(this._objRef.visible=t)}set castShadow(t){this._objRef&&(this._objRef.castShadow=t)}set receiveShadow(t){this._objRef&&(this._objRef.receiveShadow=t)}set frustumCulled(t){this._objRef&&(this._objRef.frustumCulled=t)}set renderOrder(t){this._objRef&&(this._objRef.renderOrder=t)}set animations(t){this._objRef&&(this._objRef.animations=t)}set userData(t){this._objRef&&(this._objRef.userData=t)}set customDepthMaterial(t){this._objRef&&(this._objRef.customDepthMaterial=t)}set customDistanceMaterial(t){this._objRef&&(this._objRef.customDistanceMaterial=t)}set onBeforeRender(t){this._objRef&&(this._objRef.onBeforeRender=t)}set onAfterRender(t){this._objRef&&(this._objRef.onAfterRender=t)}constructor(t){super(t)}}return h.\u0275fac=function(t){return new(t||h)(W.Y36(h,4))},h.\u0275cmp=W.Xpm({type:h,selectors:[["th-object3D"]],inputs:{id:"id",uuid:"uuid",name:"name",type:"type",children:"children",up:"up",position:"position",rotation:"rotation",quaternion:"quaternion",scale:"scale",modelViewMatrix:"modelViewMatrix",normalMatrix:"normalMatrix",matrix:"matrix",matrixWorld:"matrixWorld",matrixAutoUpdate:"matrixAutoUpdate",matrixWorldAutoUpdate:"matrixWorldAutoUpdate",matrixWorldNeedsUpdate:"matrixWorldNeedsUpdate",layers:"layers",visible:"visible",castShadow:"castShadow",receiveShadow:"receiveShadow",frustumCulled:"frustumCulled",renderOrder:"renderOrder",animations:"animations",userData:"userData",customDepthMaterial:"customDepthMaterial",customDistanceMaterial:"customDistanceMaterial",onBeforeRender:"onBeforeRender",onAfterRender:"onAfterRender"},features:[W._Bn([]),W.qOj],decls:0,vars:0,template:function(t,i){},encapsulation:2,changeDetection:0}),h})(),yu=(()=>{class h extends ys{getType(){return Qr}set matrixWorldInverse(t){this._objRef&&(this._objRef.matrixWorldInverse=Hr(this._objRef.matrixWorldInverse,t))}set projectionMatrix(t){this._objRef&&(this._objRef.projectionMatrix=Hr(this._objRef.projectionMatrix,t))}set projectionMatrixInverse(t){this._objRef&&(this._objRef.projectionMatrixInverse=Hr(this._objRef.projectionMatrixInverse,t))}}return h.\u0275fac=function(){let e;return function(i){return(e||(e=W.n5z(h)))(i||h)}}(),h.\u0275cmp=W.Xpm({type:h,selectors:[["th-camera"]],inputs:{matrixWorldInverse:"matrixWorldInverse",projectionMatrix:"projectionMatrix",projectionMatrixInverse:"projectionMatrixInverse"},features:[W._Bn([{provide:ys,useExisting:(0,W.Gpc)(()=>h)}]),W.qOj],decls:0,vars:0,template:function(t,i){},encapsulation:2,changeDetection:0}),h})(),X_=(()=>{class h extends ys{getType(){return Wu}set type(t){this._objRef&&(this._objRef.type=t)}set fog(t){this._objRef&&(this._objRef.fog=t)}set backgroundBlurriness(t){this._objRef&&(this._objRef.backgroundBlurriness=t)}set backgroundIntensity(t){this._objRef&&(this._objRef.backgroundIntensity=t)}set overrideMaterial(t){this._objRef&&(this._objRef.overrideMaterial=t)}set background(t){this._objRef&&(this._objRef.background=Hr(this._objRef.background,t))}set environment(t){this._objRef&&(this._objRef.environment=t)}}return h.\u0275fac=function(){let e;return function(i){return(e||(e=W.n5z(h)))(i||h)}}(),h.\u0275cmp=W.Xpm({type:h,selectors:[["th-scene"]],inputs:{type:"type",fog:"fog",backgroundBlurriness:"backgroundBlurriness",backgroundIntensity:"backgroundIntensity",overrideMaterial:"overrideMaterial",background:"background",environment:"environment"},features:[W._Bn([{provide:ys,useExisting:(0,W.Gpc)(()=>h)}]),W.qOj],decls:0,vars:0,template:function(t,i){},encapsulation:2,changeDetection:0}),h})();const Dy={alpha:!0,antialias:!0,preserveDrawingBuffer:!0};let bu=(()=>{class h{get canvas(){return this.rendererParameters?.domElement}constructor(t){this.ngZone=t,this.clock=new L_,this.destroyed$=new _y.x,this.resizeEmitter=new W.vpe,this.beforeRenderEmitter=new W.vpe,this.views=[],this.beforeRender$=this.beforeRenderEmitter.pipe((0,J_.R)(this.destroyed$)),this.resize$=this.resizeEmitter.pipe((0,J_.R)(this.destroyed$))}get renderer(){return this._renderer}ngOnDestroy(){this.resizeObserver&&this.canvas&&this.resizeObserver.unobserve(this.canvas)}initResizeObserver(){this.ngZone.runOutsideAngular(()=>{if(!this.canvas)throw new Error("missing canvas element");this.resize(),this.resizeObserver||(this.resizeObserver=new ResizeObserver(()=>{this.resize()})),this.resizeObserver.observe(this.canvas)})}initRenderer(){this._renderer||(this._renderer=new b_({canvas:this.rendererParameters?.domElement,...Dy}),Object.assign(this._renderer,{...Dy,...this.rendererParameters}),this.resize())}setRenderer(t){this.rendererParameters=t,this.initRenderer(),this.initResizeObserver()}addView(t){this.views.push(t);const i=this.calcRendererSize();i&&this.adjustViewDimensions(t,i.width,i.height)}render(){this.beforeRenderEmitter.emit({engine:this,delta:this.clock.getDelta()});for(const t of this.views)this.renderView(t)}renderView(t){if(!this._renderer)return;const i=t.camera,a=t.scene;if(!(i&&a&&i.objRef&&a.objRef))return;const d=this._renderer;(function My(h){return void 0!==h&&(h.observed||h.observers?.length>0)})(t.onRender)&&this.ngZone.run(()=>t.onRender.emit({renderer:d,scene:a,camera:i})),this.applyRendererParametersFromView(t),t.effectComposer?t.effectComposer.render():this._renderer.render(a.objRef,i.objRef)}applyRendererParametersFromView(t){this._renderer&&(t.viewPort&&(t.viewPort instanceof Wn?this._renderer.setViewport(t.viewPort):this._renderer.setViewport(t.viewPort.x,t.viewPort.y,t.viewPort.width,t.viewPort.height)),t.scissor&&(t.scissor instanceof Wn?this._renderer.setScissor(t.scissor):this._renderer.setScissor(t.scissor.x,t.scissor.y,t.scissor.width,t.scissor.height)),void 0!==t.scissorTest&&this._renderer.setScissorTest(t.scissorTest),t.clearColor&&this._renderer.setClearColor(t.clearColor),void 0!==t.clearAlpha&&this._renderer.setClearAlpha(t.clearAlpha),void 0!==t.shadow&&(this._renderer.shadowMap.enabled=!0))}resize(){if(!this._renderer||!this.canvas)return!1;const{width:t,height:i}=this.calcRendererSize();this._renderer.setSize(t,i,!1);for(const a of this.views)this.adjustViewDimensions(a,t,i);return this.resizeEmitter.emit({width:t,height:i}),!0}calcRendererSize(){if(!this._renderer||!this.canvas)return;const t=window.devicePixelRatio;return{width:(this.canvas.clientWidth??0)*t,height:(this.canvas.clientHeight??0)*t}}adjustViewDimensions(t,i,a){t.viewPort||(t.camera&&t.camera.objRef.aspect&&(t.camera.objRef.aspect=i/a,t.camera.objRef.updateProjectionMatrix()),t.effectComposer?.setSize(i,a))}}return h.\u0275fac=function(t){return new(t||h)(W.LFG(W.R0b))},h.\u0275prov=W.Yz7({token:h,factory:h.\u0275fac}),h})(),Jm=(()=>{class h{constructor(t,i){this.engServ=t,this.raycaster=i,this.onRender=new W.vpe}set contentScene(t){t&&(this.scene=t)}set effectComposer(t){this._effectComposer=t,this.configureEffectComposerRenderTarget()}get effectComposer(){return this._effectComposer}set camera(t){this._camera=t,this.initRaycaster()}get camera(){return this._camera}set contentCamera(t){t&&(this.camera=t)}set viewPort(t){this._viewPort=t,this.configureEffectComposerRenderTarget()}get viewPort(){return this._viewPort}ngOnInit(){this.initRaycaster()}initRaycaster(){this.camera&&this.engServ.canvas&&this.raycaster.init(this.camera,this.engServ.canvas)}add(t){}remove(t){}configureEffectComposerRenderTarget(){if(this.viewPort&&this.effectComposer){let t,i;this.viewPort instanceof Wn?(t=this.viewPort.z,i=this.viewPort?.width):(t=this.viewPort.width,i=this.viewPort.height),this.effectComposer.setSize(t,i)}}}return h.\u0275fac=function(t){return new(t||h)(W.Y36(bu),W.Y36(qm))},h.\u0275cmp=W.Xpm({type:h,selectors:[["th-view"]],contentQueries:function(t,i,a){if(1&t&&(W.Suo(a,X_,5),W.Suo(a,yu,5)),2&t){let d;W.iGM(d=W.CRH())&&(i.contentScene=d.first),W.iGM(d=W.CRH())&&(i.contentCamera=d.first)}},inputs:{scene:"scene",effectComposer:"effectComposer",camera:"camera",shadow:"shadow",viewPort:"viewPort",scissor:"scissor",scissorTest:"scissorTest",clearColor:"clearColor",clearAlpha:"clearAlpha"},outputs:{onRender:"onRender"},features:[W._Bn([{provide:ys,useExisting:(0,W.Gpc)(()=>h)},{provide:Z_,useValue:new Vm},qm])],decls:0,vars:0,template:function(t,i){},encapsulation:2}),h})(),mh=(()=>{class h{constructor(t,i){this.engineService=t,this.ngZone=i,this.active=!0,this.destroyed$=new _y.x,this.beforeRender$=this.engineService.beforeRender$,this.engineService.resize$.pipe((0,J_.R)(this.destroyed$)).subscribe(()=>this.requestAnimationFrame())}ngOnDestroy(){this.stop(),this.destroyed$.next(),this.destroyed$.complete()}start(){this.active||(this.active=!0,this.requestAnimationFrame())}stop(){this.active=!1,void 0!==this.frameId&&(cancelAnimationFrame(this.frameId),this.frameId=void 0)}isActive(){return this.active}requestAnimationFrame(){void 0===this.frameId&&this.ngZone.runOutsideAngular(()=>this.frameId=requestAnimationFrame(()=>{this.frameId=void 0,this.engineService.render(),this.active&&this.requestAnimationFrame()}))}}return h.\u0275fac=function(t){return new(t||h)(W.LFG(bu),W.LFG(W.R0b))},h.\u0275prov=W.Yz7({token:h,factory:h.\u0275fac}),h})(),ab=(()=>{class h extends Jm{get obj(){return this}set views(t){t.forEach(i=>this.engServ.addView(i))}set rendererCanvas(t){t&&(this._rendererCanvas=t,t.nativeElement.id+=this.nid)}get rendererCanvas(){return this._rendererCanvas}constructor(t,i,a){super(t,a),this.engServ=t,this.animationLoop=i,this.raycaster=a,this.nid=h.instanceCnt++,this.disableDefaultView=!1}ngAfterContentChecked(){this.animationLoop.requestAnimationFrame()}ngAfterViewInit(){this.animationLoop.requestAnimationFrame()}ngOnInit(){this.applyRendererParameters(),super.ngOnInit(),this.disableDefaultView||this.engServ.addView(this)}applyRendererParameters(){if(!this.rendererCanvas)throw new Error("Missing Canvas");this.engServ.setRenderer({...this.rendererParameters,domElement:this.rendererCanvas.nativeElement})}}return h.instanceCnt=0,h.\u0275fac=function(t){return new(t||h)(W.Y36(bu),W.Y36(mh),W.Y36((0,W.Gpc)(()=>qm)))},h.\u0275cmp=W.Xpm({type:h,selectors:[["th-canvas"]],contentQueries:function(t,i,a){if(1&t&&W.Suo(a,Jm,4),2&t){let d;W.iGM(d=W.CRH())&&(i.views=d)}},viewQuery:function(t,i){if(1&t&&W.Gf(yy,7),2&t){let a;W.iGM(a=W.CRH())&&(i.rendererCanvas=a.first)}},inputs:{rendererParameters:"rendererParameters",disableDefaultView:"disableDefaultView"},features:[W._Bn([{provide:ys,useExisting:(0,W.Gpc)(()=>h)},bu,mh,{provide:Z_,useValue:new Vm},(0,W.Gpc)(()=>qm),{provide:Jm,useExisting:(0,W.Gpc)(()=>h)}]),W.qOj],decls:2,vars:0,consts:[["id","rendererCanvas"],["rendererCanvas",""]],template:function(t,i){1&t&&W._UZ(0,"canvas",0,1)},styles:["[_nghost-%COMP%]{display:flex;flex:auto;line-height:0;height:100%}canvas[_ngcontent-%COMP%]{flex:auto;outline:none;width:100%;height:100%}"],changeDetection:0}),h})(),db=(()=>{class h extends yu{getType(){return Br}set type(t){this._objRef&&(this._objRef.type=t)}set zoom(t){this._objRef&&(this._objRef.zoom=t)}set fov(t){this._objRef&&(this._objRef.fov=t)}set aspect(t){this._objRef&&(this._objRef.aspect=t)}set near(t){this._objRef&&(this._objRef.near=t)}set far(t){this._objRef&&(this._objRef.far=t)}set focus(t){this._objRef&&(this._objRef.focus=t)}set view(t){this._objRef&&(this._objRef.view=t)}set filmGauge(t){this._objRef&&(this._objRef.filmGauge=t)}set filmOffset(t){this._objRef&&(this._objRef.filmOffset=t)}}return h.\u0275fac=function(){let e;return function(i){return(e||(e=W.n5z(h)))(i||h)}}(),h.\u0275cmp=W.Xpm({type:h,selectors:[["th-perspectiveCamera"]],inputs:{type:"type",zoom:"zoom",fov:"fov",aspect:"aspect",near:"near",far:"far",focus:"focus",view:"view",filmGauge:"filmGauge",filmOffset:"filmOffset"},features:[W._Bn([{provide:ys,useExisting:(0,W.Gpc)(()=>h)},{provide:yu,useExisting:(0,W.Gpc)(()=>h)}]),W.qOj],decls:0,vars:0,template:function(t,i){},encapsulation:2,changeDetection:0}),h})(),_b=(()=>{class h extends K_{constructor(t){super(),this.parent=t}addToParent(){this.parent.objRef&&(this.parent.objRef.geometry=this.objRef,this.parent.objRef.updateMorphTargets&&this.parent.objRef.updateMorphTargets())}removeFromParent(){this._objRef&&this.parent&&this.parent.objRef&&(this.parent.objRef.geometry=void 0)}}return h.\u0275fac=function(t){return new(t||h)(W.Y36(ys))},h.\u0275cmp=W.Xpm({type:h,selectors:[["th-abs-geometry"]],features:[W.qOj],decls:0,vars:0,template:function(t,i){},encapsulation:2}),h})(),Q_=(()=>{class h extends _b{getType(){return Nn}set id(t){this._objRef&&(this._objRef.id=t)}set uuid(t){this._objRef&&(this._objRef.uuid=t)}set name(t){this._objRef&&(this._objRef.name=t)}set type(t){this._objRef&&(this._objRef.type=t)}set index(t){this._objRef&&(this._objRef.index=Hr(this._objRef.index,t))}set attributes(t){this._objRef&&(this._objRef.attributes=t)}set morphAttributes(t){this._objRef&&(this._objRef.morphAttributes=t)}set morphTargetsRelative(t){this._objRef&&(this._objRef.morphTargetsRelative=t)}set groups(t){this._objRef&&(this._objRef.groups=t)}set boundingBox(t){this._objRef&&(this._objRef.boundingBox=Hr(this._objRef.boundingBox,t))}set boundingSphere(t){this._objRef&&(this._objRef.boundingSphere=Hr(this._objRef.boundingSphere,t))}set drawRange(t){this._objRef&&(this._objRef.drawRange=t)}set userData(t){this._objRef&&(this._objRef.userData=t)}set drawcalls(t){this._objRef&&(this._objRef.drawcalls=t)}set offsets(t){this._objRef&&(this._objRef.offsets=t)}constructor(t){super(t)}}return h.\u0275fac=function(t){return new(t||h)(W.Y36(ys,4))},h.\u0275cmp=W.Xpm({type:h,selectors:[["th-bufferGeometry"]],inputs:{id:"id",uuid:"uuid",name:"name",type:"type",index:"index",attributes:"attributes",morphAttributes:"morphAttributes",morphTargetsRelative:"morphTargetsRelative",groups:"groups",boundingBox:"boundingBox",boundingSphere:"boundingSphere",drawRange:"drawRange",userData:"userData",drawcalls:"drawcalls",offsets:"offsets"},features:[W._Bn([]),W.qOj],decls:0,vars:0,template:function(t,i){},encapsulation:2,changeDetection:0}),h})(),Ly=(()=>{class h extends K_{constructor(t){super(),this.parent=t}addToParent(){if(!this.parent.objRef)throw new Error("parent object doesn't hold a three js object instance");this.parent.objRef.material=this.objRef}removeFromParent(){this._objRef&&this.parent&&this.parent.objRef&&(this.parent.objRef.material=void 0)}}return h.\u0275fac=function(t){return new(t||h)(W.Y36(ys))},h.\u0275cmp=W.Xpm({type:h,selectors:[["th-abs-material"]],features:[W.qOj],decls:0,vars:0,template:function(t,i){},encapsulation:2}),h})(),Qm=(()=>{class h extends Ly{getType(){return _r}set alphaTest(t){this._objRef&&(this._objRef.alphaTest=t)}set alphaToCoverage(t){this._objRef&&(this._objRef.alphaToCoverage=t)}set blendDst(t){this._objRef&&(this._objRef.blendDst=t)}set blendDstAlpha(t){this._objRef&&(this._objRef.blendDstAlpha=t)}set blendEquation(t){this._objRef&&(this._objRef.blendEquation=t)}set blendEquationAlpha(t){this._objRef&&(this._objRef.blendEquationAlpha=t)}set blending(t){this._objRef&&(this._objRef.blending=t)}set blendSrc(t){this._objRef&&(this._objRef.blendSrc=t)}set blendSrcAlpha(t){this._objRef&&(this._objRef.blendSrcAlpha=t)}set clipIntersection(t){this._objRef&&(this._objRef.clipIntersection=t)}set clippingPlanes(t){this._objRef&&(this._objRef.clippingPlanes=t)}set clipShadows(t){this._objRef&&(this._objRef.clipShadows=t)}set colorWrite(t){this._objRef&&(this._objRef.colorWrite=t)}set defines(t){this._objRef&&(this._objRef.defines=t)}set depthFunc(t){this._objRef&&(this._objRef.depthFunc=t)}set depthTest(t){this._objRef&&(this._objRef.depthTest=t)}set depthWrite(t){this._objRef&&(this._objRef.depthWrite=t)}set id(t){this._objRef&&(this._objRef.id=t)}set stencilWrite(t){this._objRef&&(this._objRef.stencilWrite=t)}set stencilFunc(t){this._objRef&&(this._objRef.stencilFunc=t)}set stencilRef(t){this._objRef&&(this._objRef.stencilRef=t)}set stencilWriteMask(t){this._objRef&&(this._objRef.stencilWriteMask=t)}set stencilFuncMask(t){this._objRef&&(this._objRef.stencilFuncMask=t)}set stencilFail(t){this._objRef&&(this._objRef.stencilFail=t)}set stencilZFail(t){this._objRef&&(this._objRef.stencilZFail=t)}set stencilZPass(t){this._objRef&&(this._objRef.stencilZPass=t)}set name(t){this._objRef&&(this._objRef.name=t)}set needsUpdate(t){this._objRef&&(this._objRef.needsUpdate=t)}set opacity(t){this._objRef&&(this._objRef.opacity=t)}set polygonOffset(t){this._objRef&&(this._objRef.polygonOffset=t)}set polygonOffsetFactor(t){this._objRef&&(this._objRef.polygonOffsetFactor=t)}set polygonOffsetUnits(t){this._objRef&&(this._objRef.polygonOffsetUnits=t)}set precision(t){this._objRef&&(this._objRef.precision=t)}set premultipliedAlpha(t){this._objRef&&(this._objRef.premultipliedAlpha=t)}set dithering(t){this._objRef&&(this._objRef.dithering=t)}set side(t){this._objRef&&(this._objRef.side=t)}set shadowSide(t){this._objRef&&(this._objRef.shadowSide=t)}set toneMapped(t){this._objRef&&(this._objRef.toneMapped=t)}set transparent(t){this._objRef&&(this._objRef.transparent=t)}set type(t){this._objRef&&(this._objRef.type=t)}set uuid(t){this._objRef&&(this._objRef.uuid=t)}set vertexColors(t){this._objRef&&(this._objRef.vertexColors=t)}set visible(t){this._objRef&&(this._objRef.visible=t)}set userData(t){this._objRef&&(this._objRef.userData=t)}set version(t){this._objRef&&(this._objRef.version=t)}constructor(t){super(t)}}return h.\u0275fac=function(t){return new(t||h)(W.Y36(ys,4))},h.\u0275cmp=W.Xpm({type:h,selectors:[["th-material"]],inputs:{alphaTest:"alphaTest",alphaToCoverage:"alphaToCoverage",blendDst:"blendDst",blendDstAlpha:"blendDstAlpha",blendEquation:"blendEquation",blendEquationAlpha:"blendEquationAlpha",blending:"blending",blendSrc:"blendSrc",blendSrcAlpha:"blendSrcAlpha",clipIntersection:"clipIntersection",clippingPlanes:"clippingPlanes",clipShadows:"clipShadows",colorWrite:"colorWrite",defines:"defines",depthFunc:"depthFunc",depthTest:"depthTest",depthWrite:"depthWrite",id:"id",stencilWrite:"stencilWrite",stencilFunc:"stencilFunc",stencilRef:"stencilRef",stencilWriteMask:"stencilWriteMask",stencilFuncMask:"stencilFuncMask",stencilFail:"stencilFail",stencilZFail:"stencilZFail",stencilZPass:"stencilZPass",name:"name",needsUpdate:"needsUpdate",opacity:"opacity",polygonOffset:"polygonOffset",polygonOffsetFactor:"polygonOffsetFactor",polygonOffsetUnits:"polygonOffsetUnits",precision:"precision",premultipliedAlpha:"premultipliedAlpha",dithering:"dithering",side:"side",shadowSide:"shadowSide",toneMapped:"toneMapped",transparent:"transparent",type:"type",uuid:"uuid",vertexColors:"vertexColors",visible:"visible",userData:"userData",version:"version"},features:[W._Bn([]),W.qOj],decls:0,vars:0,template:function(t,i){},encapsulation:2,changeDetection:0}),h})(),Vy=(()=>{class h extends ys{getType(){return x_}set type(t){this._objRef&&(this._objRef.type=t)}set morphTargetInfluences(t){this._objRef&&(this._objRef.morphTargetInfluences=t)}set morphTargetDictionary(t){this._objRef&&(this._objRef.morphTargetDictionary=t)}set geometry(t){this._objRef&&(this._objRef.geometry=t)}set material(t){this._objRef&&(this._objRef.material=t)}}return h.\u0275fac=function(){let e;return function(i){return(e||(e=W.n5z(h)))(i||h)}}(),h.\u0275cmp=W.Xpm({type:h,selectors:[["th-points"]],inputs:{type:"type",morphTargetInfluences:"morphTargetInfluences",morphTargetDictionary:"morphTargetDictionary",geometry:"geometry",material:"material"},features:[W._Bn([{provide:ys,useExisting:(0,W.Gpc)(()=>h)}]),W.qOj],decls:0,vars:0,template:function(t,i){},encapsulation:2,changeDetection:0}),h})(),zb=(()=>{class h extends Qm{getType(){return cs}set type(t){this._objRef&&(this._objRef.type=t)}set defines(t){this._objRef&&(this._objRef.defines=t)}set uniforms(t){this._objRef&&(this._objRef.uniforms=t)}set vertexShader(t){this._objRef&&(this._objRef.vertexShader=t)}set fragmentShader(t){this._objRef&&(this._objRef.fragmentShader=t)}set linewidth(t){this._objRef&&(this._objRef.linewidth=t)}set wireframe(t){this._objRef&&(this._objRef.wireframe=t)}set wireframeLinewidth(t){this._objRef&&(this._objRef.wireframeLinewidth=t)}set fog(t){this._objRef&&(this._objRef.fog=t)}set lights(t){this._objRef&&(this._objRef.lights=t)}set clipping(t){this._objRef&&(this._objRef.clipping=t)}set derivatives(t){this._objRef&&(this._objRef.derivatives=t)}set extensions(t){this._objRef&&(this._objRef.extensions=t)}set defaultAttributeValues(t){this._objRef&&(this._objRef.defaultAttributeValues=t)}set index0AttributeName(t){this._objRef&&(this._objRef.index0AttributeName=t)}set uniformsNeedUpdate(t){this._objRef&&(this._objRef.uniformsNeedUpdate=t)}set glslVersion(t){this._objRef&&(this._objRef.glslVersion=t)}set isShaderMaterial(t){this._objRef&&(this._objRef.isShaderMaterial=t)}}return h.\u0275fac=function(){let e;return function(i){return(e||(e=W.n5z(h)))(i||h)}}(),h.\u0275cmp=W.Xpm({type:h,selectors:[["th-shaderMaterial"]],inputs:{type:"type",defines:"defines",uniforms:"uniforms",vertexShader:"vertexShader",fragmentShader:"fragmentShader",linewidth:"linewidth",wireframe:"wireframe",wireframeLinewidth:"wireframeLinewidth",fog:"fog",lights:"lights",clipping:"clipping",derivatives:"derivatives",extensions:"extensions",defaultAttributeValues:"defaultAttributeValues",index0AttributeName:"index0AttributeName",uniformsNeedUpdate:"uniformsNeedUpdate",glslVersion:"glslVersion",isShaderMaterial:"isShaderMaterial"},features:[W._Bn([{provide:Qm,useExisting:(0,W.Gpc)(()=>h)}]),W.qOj],decls:0,vars:0,template:function(t,i){},encapsulation:2,changeDetection:0}),h})(),iv=(()=>{class h{}return h.\u0275fac=function(t){return new(t||h)},h.\u0275mod=W.oAB({type:h}),h.\u0275inj=W.cJS({}),h})(),hT=(()=>{class h{constructor(t,i){this.engineService=t,this.animationLoopService=i}get beforeRender(){return this.engineService.beforeRender$}get onResize(){return this.engineService.resize$}set renderOnDemand(t){t?this.animationLoopService.stop():this.animationLoopService.start()}get renderOnDemand(){return!this.animationLoopService.isActive()}}return h.\u0275fac=function(t){return new(t||h)(W.Y36(bu),W.Y36(mh))},h.\u0275dir=W.lG2({type:h,selectors:[["","beforeRender",""],["","onResize",""],["","renderOnDemand",""]],inputs:{renderOnDemand:"renderOnDemand"},outputs:{beforeRender:"beforeRender",onResize:"onResize"}}),h})(),av=(()=>{class h{constructor(t){this.engineService=t,this.stats=Qf()}ngOnDestroy(){this.renderSubscription&&this.renderSubscription.unsubscribe()}ngOnInit(){if(!this.engineService.canvas)throw new Error("No canvas present");const t=this.engineService.canvas.parentElement;t&&(t.style.position="relative",this.stats.domElement.style.position="absolute",this.stats.showPanel(0),this.engineService.canvas.parentElement?.appendChild(this.stats.dom),this.renderSubscription=this.engineService.beforeRender$.subscribe(()=>{this.stats.update()}))}set thStats(t){this.stats.domElement.style.visibility=t?"visible":"hidden"}}return h.\u0275fac=function(t){return new(t||h)(W.Y36(bu))},h.\u0275dir=W.lG2({type:h,selectors:[["","thStats",""]],inputs:{thStats:"thStats"}}),h})();new ie,new ie,new ie;let uv=(()=>{class h{}return h.\u0275fac=function(t){return new(t||h)},h.\u0275mod=W.oAB({type:h}),h.\u0275inj=W.cJS({imports:[iv,Z0.ez,iv]}),h})(),tg=(()=>{class h{constructor(){this.config={unit:{position:new ie(0,0,0),radius:.01,padding:.5},size:{x:10,y:10},animation:{count:0,speed:.05,amplitude:.2,inflate:.05}}}set position(t){t instanceof ie?this.config.unit.position.set(t.x,t.y,t.z):this.config.unit.position.set(t[0],t[1],t[2])}set padding(t){this.config.unit.padding=t}set size(t){this.config.size.x=t[0],this.config.size.y=t[1]}ngAfterContentInit(){}ngAfterViewInit(){console.log("ngAfterViewInit","th-grid",this.geometry),this.setGeometryAttributes()}setGeometryAttributes(){const t=this.config.unit.padding,i=this.config.size.x,a=this.config.size.y,d=i*a,g=new Float32Array(3*d),_=new Float32Array(d);let y=0,b=0;for(let w=0;w<i;w++)for(let S=0;S<a;S++)g[y]=this.config.unit.position.x+w*t-i*t/2,g[y+1]=this.config.unit.position.y,g[y+2]=this.config.unit.position.z+S*t-a*t/2,_[b]=.05,y+=3,b++;this.geometry&&(this.geometry.objRef.setAttribute("position",new rr(g,3)),this.geometry.objRef.setAttribute("scale",new rr(_,1)))}getVertexShader(){return"\n        attribute float scale;\n\n        void main() {\n            vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\n            gl_PointSize = scale * ( 300.0 / - mvPosition.z );\n            gl_Position = projectionMatrix * mvPosition;\n        }\n        "}getFragmentShader(){return"\n        uniform vec3 color;\n\n        void main() {\n\n            if ( length( gl_PointCoord - vec2( 0.5, 0.5 ) ) > 0.475 )\n                discard;\n\n            gl_FragColor = vec4( color, 1.0 );\n\n        }\n        "}getUniforms(){return{color:{value:new Yt(16777215)}}}onBeforeRender(t){if(this.geometry){const i=this.geometry.objRef.attributes.position.array,a=this.geometry.objRef.attributes.scale.array,g=this.config.size.x,_=this.config.size.y;let y=0,b=0;for(let w=0;w<g;w++)for(let S=0;S<_;S++)i[y+1]=Math.sin(.3*(w+this.config.animation.count))*this.config.animation.amplitude+Math.sin(.5*(S+this.config.animation.count))*this.config.animation.amplitude,a[b]=(Math.sin(.3*(w+this.config.animation.count))+1)*this.config.animation.inflate+(Math.sin(.5*(S+this.config.animation.count))+1)*this.config.animation.inflate,y+=3,b++;this.geometry.objRef.attributes.position.needsUpdate=!0,this.geometry.objRef.attributes.scale.needsUpdate=!0}this.config.animation.count+=this.config.animation.speed}}return h.\u0275fac=function(t){return new(t||h)},h.\u0275cmp=W.Xpm({type:h,selectors:[["th-prefab-wave"]],viewQuery:function(t,i){if(1&t&&(W.Gf(Vy,7),W.Gf(Q_,7)),2&t){let a;W.iGM(a=W.CRH())&&(i.points=a.first),W.iGM(a=W.CRH())&&(i.geometry=a.first)}},inputs:{position:"position",padding:"padding",size:"size"},decls:3,vars:3,consts:[[3,"beforeRender"],[3,"vertexShader","fragmentShader","uniforms"]],template:function(t,i){1&t&&(W.TgZ(0,"th-points",0),W.NdJ("beforeRender",function(d){return i.onBeforeRender(d)}),W._UZ(1,"th-bufferGeometry")(2,"th-shaderMaterial",1),W.qZA()),2&t&&(W.xp6(2),W.Q6J("vertexShader",i.getVertexShader())("fragmentShader",i.getFragmentShader())("uniforms",i.getUniforms()))},dependencies:[Vy,zb,Q_,hT],encapsulation:2}),h})();const ng=function(){return[5,5,5]},Ky=function(h){return[0,h,0]},wT=function(){return[0,.2,0]},Px=function(){return[50,50]};let Ox=(()=>{class h{constructor(){this.Math=Math}ngAfterViewInit(){}}return h.\u0275fac=function(t){return new(t||h)},h.\u0275cmp=W.Xpm({type:h,selectors:[["jn-website-th-scene-environment"]],decls:4,vars:11,consts:[[3,"thStats"],[3,"position","lookAt"],[3,"position","size","padding"]],template:function(t,i){1&t&&(W.TgZ(0,"th-canvas",0)(1,"th-scene"),W._UZ(2,"th-perspectiveCamera",1)(3,"th-prefab-wave",2),W.qZA()()),2&t&&(W.Q6J("thStats",!1),W.xp6(2),W.Q6J("position",W.DdM(6,ng))("lookAt",W.VKq(7,Ky,-2)),W.xp6(1),W.Q6J("position",W.DdM(9,wT))("size",W.DdM(10,Px))("padding",.5))},dependencies:[db,X_,ab,av,tg],encapsulation:2}),h})();const Nx=["jn-website-app",""];let Fx=(()=>{class h{}return h.\u0275fac=function(t){return new(t||h)},h.\u0275cmp=W.Xpm({type:h,selectors:[["","jn-website-app",""]],attrs:Nx,decls:4,vars:0,consts:[[1,"position-absolute","w-100","h-100",2,"z-index","-1"],[1,"position-absolute","w-100","h-100",2,"z-index","0"]],template:function(t,i){1&t&&(W.TgZ(0,"div",0),W._UZ(1,"jn-website-th-scene-environment"),W.qZA(),W.TgZ(2,"div",1),W._UZ(3,"router-outlet"),W.qZA())},dependencies:[be.lC,Ox],styles:["main{display:flex;width:100%;height:100%;color:#fff;font-family:fantasy;overflow:hidden}router-outlet{display:none}ng-component{display:flex;width:100%;height:100%;justify-content:space-around}\n"],encapsulation:2}),h})();var Xy=ee(7832),RT=ee(5874),ST=ee(5361);let Qy=(()=>{class h extends ST.v{constructor(){super(...arguments),this.title="< building />",this.subtitle="Content under development."}}return h.\u0275fac=function(){let e;return function(i){return(e||(e=W.n5z(h)))(i||h)}}(),h.\u0275cmp=W.Xpm({type:h,selectors:[["ng-component"]],features:[W.qOj],decls:15,vars:4,consts:[[1,"error","d-flex","flex-column","justify-content-center"],[1,"stack","text-center",2,"--stacks","3"],[2,"--index","0"],[2,"--index","1"],[2,"--index","2"],[1,"stack","text-center",2,"--stacks","1"]],template:function(t,i){1&t&&(W.TgZ(0,"div",0)(1,"div",1)(2,"span",2)(3,"h1"),W._uU(4),W.qZA()(),W.TgZ(5,"span",3)(6,"h1"),W._uU(7),W.qZA()(),W.TgZ(8,"span",4)(9,"h1"),W._uU(10),W.qZA()()(),W.TgZ(11,"div",5)(12,"span",2)(13,"h6"),W._uU(14),W.qZA()()()()),2&t&&(W.xp6(4),W.Oqu(i.title),W.xp6(3),W.Oqu(i.title),W.xp6(3),W.Oqu(i.title),W.xp6(4),W.Oqu(i.subtitle))},styles:[".error[_ngcontent-%COMP%]{color:var(--color)}.error[_ngcontent-%COMP%]   .stack[_ngcontent-%COMP%]{display:grid}.error[_ngcontent-%COMP%]   .stack[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{grid-row-start:1;grid-column-start:1;--stack-height: calc(100% /var(--stacks) - 1px);--inverse-index: calc(calc(var(--stacks) - 1) - var(--index));--clip-top: calc(var(--stack-height) * var(--index));--clip-bottom: calc(var(--stack-height) * var(--inverse-index));clip-path:inset(var(--clip-top) 0 var(--clip-bottom) 0);animation-name:_ngcontent-%COMP%_stack,_ngcontent-%COMP%_glitch;animation-duration:.34s,2s;animation-timing-function:cubic-bezier(.46,.29,0,1.24),ease;animation-iteration-count:1,infinite;animation-delay:calc(var(--index) * .12s),2s;animation-fill-mode:backwards,none;animation-direction:normal,alternate-reverse}.error[_ngcontent-%COMP%]   .stack[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(odd){--glitch-translate: 8px}.error[_ngcontent-%COMP%]   .stack[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(even){--glitch-translate: -8px}@keyframes _ngcontent-%COMP%_stack{0%{opacity:0;transform:translate(-50%);text-shadow:-2px 3px 0 red,2px -3px 0 blue}60%{opacity:.5;transform:translate(50%)}80%{transform:none;opacity:1;text-shadow:2px -3px 0 red,-2px 3px 0 blue}to{text-shadow:none}}@keyframes _ngcontent-%COMP%_glitch{0%{text-shadow:-2px 3px 0 red,2px -3px 0 blue;transform:translate(var(--glitch-translate))}2%{text-shadow:2px -3px 0 red,-2px 3px 0 blue}4%,to{text-shadow:none;transform:none}}"]}),h})();const Lx=[{path:"projects/streaming",loadChildren:()=>ee.e(626).then(ee.bind(ee,7626)).then(h=>h.JnStreamingAppModule)},{path:"webgl",pathMatch:"full",outlet:"jn-website-environment",component:Qy},{path:"",pathMatch:"full",component:Qy},{path:"**",pathMatch:"full",component:RT.u}];let Bx=(()=>{class h{}return h.\u0275fac=function(t){return new(t||h)},h.\u0275mod=W.oAB({type:h}),h.\u0275inj=W.cJS({imports:[be.Bz.forRoot(Lx,{enableTracing:!1}),be.Bz]}),h})(),CT=(()=>{class h{}return h.\u0275fac=function(t){return new(t||h)},h.\u0275mod=W.oAB({type:h}),h.\u0275inj=W.cJS({imports:[uv,uv]}),h})(),jx=(()=>{class h{}return h.\u0275fac=function(t){return new(t||h)},h.\u0275mod=W.oAB({type:h}),h.\u0275inj=W.cJS({imports:[CT]}),h})(),kx=(()=>{class h{}return h.\u0275fac=function(t){return new(t||h)},h.\u0275mod=W.oAB({type:h,bootstrap:[Fx]}),h.\u0275inj=W.cJS({imports:[Bx,jx,Xy.l,c.b2,iv,CT]}),h})();c.q6().bootstrapModule(kx).catch(h=>console.error(h))},1135:(an,Qe,ee)=>{ee.d(Qe,{X:()=>W});var c=ee(7579);class W extends c.x{constructor(Oe){super(),this._value=Oe}get value(){return this.getValue()}_subscribe(Oe){const Se=super._subscribe(Oe);return!Se.closed&&Oe.next(this._value),Se}getValue(){const{hasError:Oe,thrownError:Se,_value:tt}=this;if(Oe)throw Se;return this._throwIfClosed(),tt}next(Oe){super.next(this._value=Oe)}}},9751:(an,Qe,ee)=>{ee.d(Qe,{y:()=>Vt});var c=ee(930),W=ee(727),be=ee(8822),Oe=ee(9635),Se=ee(2416),tt=ee(576),ft=ee(2806);let Vt=(()=>{class nt{constructor(rt){rt&&(this._subscribe=rt)}lift(rt){const xt=new nt;return xt.source=this,xt.operator=rt,xt}subscribe(rt,xt,mt){const en=function He(nt){return nt&&nt instanceof c.Lv||function Ve(nt){return nt&&(0,tt.m)(nt.next)&&(0,tt.m)(nt.error)&&(0,tt.m)(nt.complete)}(nt)&&(0,W.Nn)(nt)}(rt)?rt:new c.Hp(rt,xt,mt);return(0,ft.x)(()=>{const{operator:Kt,source:ci}=this;en.add(Kt?Kt.call(en,ci):ci?this._subscribe(en):this._trySubscribe(en))}),en}_trySubscribe(rt){try{return this._subscribe(rt)}catch(xt){rt.error(xt)}}forEach(rt,xt){return new(xt=ht(xt))((mt,en)=>{const Kt=new c.Hp({next:ci=>{try{rt(ci)}catch(vi){en(vi),Kt.unsubscribe()}},error:en,complete:mt});this.subscribe(Kt)})}_subscribe(rt){var xt;return null===(xt=this.source)||void 0===xt?void 0:xt.subscribe(rt)}[be.L](){return this}pipe(...rt){return(0,Oe.U)(rt)(this)}toPromise(rt){return new(rt=ht(rt))((xt,mt)=>{let en;this.subscribe(Kt=>en=Kt,Kt=>mt(Kt),()=>xt(en))})}}return nt.create=rn=>new nt(rn),nt})();function ht(nt){var rn;return null!==(rn=nt??Se.v.Promise)&&void 0!==rn?rn:Promise}},7579:(an,Qe,ee)=>{ee.d(Qe,{x:()=>ft});var c=ee(9751),W=ee(727);const Oe=(0,ee(3888).d)(ht=>function(){ht(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Se=ee(8737),tt=ee(2806);let ft=(()=>{class ht extends c.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(He){const nt=new Vt(this,this);return nt.operator=He,nt}_throwIfClosed(){if(this.closed)throw new Oe}next(He){(0,tt.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const nt of this.currentObservers)nt.next(He)}})}error(He){(0,tt.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=He;const{observers:nt}=this;for(;nt.length;)nt.shift().error(He)}})}complete(){(0,tt.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:He}=this;for(;He.length;)He.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var He;return(null===(He=this.observers)||void 0===He?void 0:He.length)>0}_trySubscribe(He){return this._throwIfClosed(),super._trySubscribe(He)}_subscribe(He){return this._throwIfClosed(),this._checkFinalizedStatuses(He),this._innerSubscribe(He)}_innerSubscribe(He){const{hasError:nt,isStopped:rn,observers:rt}=this;return nt||rn?W.Lc:(this.currentObservers=null,rt.push(He),new W.w0(()=>{this.currentObservers=null,(0,Se.P)(rt,He)}))}_checkFinalizedStatuses(He){const{hasError:nt,thrownError:rn,isStopped:rt}=this;nt?He.error(rn):rt&&He.complete()}asObservable(){const He=new c.y;return He.source=this,He}}return ht.create=(Ve,He)=>new Vt(Ve,He),ht})();class Vt extends ft{constructor(Ve,He){super(),this.destination=Ve,this.source=He}next(Ve){var He,nt;null===(nt=null===(He=this.destination)||void 0===He?void 0:He.next)||void 0===nt||nt.call(He,Ve)}error(Ve){var He,nt;null===(nt=null===(He=this.destination)||void 0===He?void 0:He.error)||void 0===nt||nt.call(He,Ve)}complete(){var Ve,He;null===(He=null===(Ve=this.destination)||void 0===Ve?void 0:Ve.complete)||void 0===He||He.call(Ve)}_subscribe(Ve){var He,nt;return null!==(nt=null===(He=this.source)||void 0===He?void 0:He.subscribe(Ve))&&void 0!==nt?nt:W.Lc}}},930:(an,Qe,ee)=>{ee.d(Qe,{Hp:()=>mt,Lv:()=>nt});var c=ee(576),W=ee(727),be=ee(2416),Oe=ee(7849),Se=ee(5032);const tt=ht("C",void 0,void 0);function ht(Ne,dt,je){return{kind:Ne,value:dt,error:je}}var Ve=ee(3410),He=ee(2806);class nt extends W.w0{constructor(dt){super(),this.isStopped=!1,dt?(this.destination=dt,(0,W.Nn)(dt)&&dt.add(this)):this.destination=vi}static create(dt,je,Ot){return new mt(dt,je,Ot)}next(dt){this.isStopped?ci(function Vt(Ne){return ht("N",Ne,void 0)}(dt),this):this._next(dt)}error(dt){this.isStopped?ci(function ft(Ne){return ht("E",void 0,Ne)}(dt),this):(this.isStopped=!0,this._error(dt))}complete(){this.isStopped?ci(tt,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(dt){this.destination.next(dt)}_error(dt){try{this.destination.error(dt)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const rn=Function.prototype.bind;function rt(Ne,dt){return rn.call(Ne,dt)}class xt{constructor(dt){this.partialObserver=dt}next(dt){const{partialObserver:je}=this;if(je.next)try{je.next(dt)}catch(Ot){en(Ot)}}error(dt){const{partialObserver:je}=this;if(je.error)try{je.error(dt)}catch(Ot){en(Ot)}else en(dt)}complete(){const{partialObserver:dt}=this;if(dt.complete)try{dt.complete()}catch(je){en(je)}}}class mt extends nt{constructor(dt,je,Ot){let Ut;if(super(),(0,c.m)(dt)||!dt)Ut={next:dt??void 0,error:je??void 0,complete:Ot??void 0};else{let Lt;this&&be.v.useDeprecatedNextContext?(Lt=Object.create(dt),Lt.unsubscribe=()=>this.unsubscribe(),Ut={next:dt.next&&rt(dt.next,Lt),error:dt.error&&rt(dt.error,Lt),complete:dt.complete&&rt(dt.complete,Lt)}):Ut=dt}this.destination=new xt(Ut)}}function en(Ne){be.v.useDeprecatedSynchronousErrorHandling?(0,He.O)(Ne):(0,Oe.h)(Ne)}function ci(Ne,dt){const{onStoppedNotification:je}=be.v;je&&Ve.z.setTimeout(()=>je(Ne,dt))}const vi={closed:!0,next:Se.Z,error:function Kt(Ne){throw Ne},complete:Se.Z}},727:(an,Qe,ee)=>{ee.d(Qe,{Lc:()=>tt,w0:()=>Se,Nn:()=>ft});var c=ee(576);const be=(0,ee(3888).d)(ht=>function(He){ht(this),this.message=He?`${He.length} errors occurred during unsubscription:\n${He.map((nt,rn)=>`${rn+1}) ${nt.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=He});var Oe=ee(8737);class Se{constructor(Ve){this.initialTeardown=Ve,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let Ve;if(!this.closed){this.closed=!0;const{_parentage:He}=this;if(He)if(this._parentage=null,Array.isArray(He))for(const rt of He)rt.remove(this);else He.remove(this);const{initialTeardown:nt}=this;if((0,c.m)(nt))try{nt()}catch(rt){Ve=rt instanceof be?rt.errors:[rt]}const{_finalizers:rn}=this;if(rn){this._finalizers=null;for(const rt of rn)try{Vt(rt)}catch(xt){Ve=Ve??[],xt instanceof be?Ve=[...Ve,...xt.errors]:Ve.push(xt)}}if(Ve)throw new be(Ve)}}add(Ve){var He;if(Ve&&Ve!==this)if(this.closed)Vt(Ve);else{if(Ve instanceof Se){if(Ve.closed||Ve._hasParent(this))return;Ve._addParent(this)}(this._finalizers=null!==(He=this._finalizers)&&void 0!==He?He:[]).push(Ve)}}_hasParent(Ve){const{_parentage:He}=this;return He===Ve||Array.isArray(He)&&He.includes(Ve)}_addParent(Ve){const{_parentage:He}=this;this._parentage=Array.isArray(He)?(He.push(Ve),He):He?[He,Ve]:Ve}_removeParent(Ve){const{_parentage:He}=this;He===Ve?this._parentage=null:Array.isArray(He)&&(0,Oe.P)(He,Ve)}remove(Ve){const{_finalizers:He}=this;He&&(0,Oe.P)(He,Ve),Ve instanceof Se&&Ve._removeParent(this)}}Se.EMPTY=(()=>{const ht=new Se;return ht.closed=!0,ht})();const tt=Se.EMPTY;function ft(ht){return ht instanceof Se||ht&&"closed"in ht&&(0,c.m)(ht.remove)&&(0,c.m)(ht.add)&&(0,c.m)(ht.unsubscribe)}function Vt(ht){(0,c.m)(ht)?ht():ht.unsubscribe()}},2416:(an,Qe,ee)=>{ee.d(Qe,{v:()=>c});const c={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},9841:(an,Qe,ee)=>{ee.d(Qe,{a:()=>Ve});var c=ee(9751),W=ee(4742),be=ee(2076),Oe=ee(4671),Se=ee(3268),tt=ee(3269),ft=ee(1810),Vt=ee(5403),ht=ee(9672);function Ve(...rn){const rt=(0,tt.yG)(rn),xt=(0,tt.jO)(rn),{args:mt,keys:en}=(0,W.D)(rn);if(0===mt.length)return(0,be.D)([],rt);const Kt=new c.y(function He(rn,rt,xt=Oe.y){return mt=>{nt(rt,()=>{const{length:en}=rn,Kt=new Array(en);let ci=en,vi=en;for(let Ne=0;Ne<en;Ne++)nt(rt,()=>{const dt=(0,be.D)(rn[Ne],rt);let je=!1;dt.subscribe((0,Vt.x)(mt,Ot=>{Kt[Ne]=Ot,je||(je=!0,vi--),vi||mt.next(xt(Kt.slice()))},()=>{--ci||mt.complete()}))},mt)},mt)}}(mt,rt,en?ci=>(0,ft.n)(en,ci):Oe.y));return xt?Kt.pipe((0,Se.Z)(xt)):Kt}function nt(rn,rt,xt){rn?(0,ht.f)(xt,rn,rt):rt()}},7272:(an,Qe,ee)=>{ee.d(Qe,{z:()=>Se});var c=ee(8189),be=ee(3269),Oe=ee(2076);function Se(...tt){return function W(){return(0,c.J)(1)}()((0,Oe.D)(tt,(0,be.yG)(tt)))}},515:(an,Qe,ee)=>{ee.d(Qe,{E:()=>W});const W=new(ee(9751).y)(Se=>Se.complete())},2076:(an,Qe,ee)=>{ee.d(Qe,{D:()=>Ot});var c=ee(8421),W=ee(9672),be=ee(4482),Oe=ee(5403);function Se(Ut,Lt=0){return(0,be.e)((Zt,Ht)=>{Zt.subscribe((0,Oe.x)(Ht,Bt=>(0,W.f)(Ht,Ut,()=>Ht.next(Bt),Lt),()=>(0,W.f)(Ht,Ut,()=>Ht.complete(),Lt),Bt=>(0,W.f)(Ht,Ut,()=>Ht.error(Bt),Lt)))})}function tt(Ut,Lt=0){return(0,be.e)((Zt,Ht)=>{Ht.add(Ut.schedule(()=>Zt.subscribe(Ht),Lt))})}var ht=ee(9751),He=ee(2202),nt=ee(576);function rt(Ut,Lt){if(!Ut)throw new Error("Iterable cannot be null");return new ht.y(Zt=>{(0,W.f)(Zt,Lt,()=>{const Ht=Ut[Symbol.asyncIterator]();(0,W.f)(Zt,Lt,()=>{Ht.next().then(Bt=>{Bt.done?Zt.complete():Zt.next(Bt.value)})},0,!0)})})}var xt=ee(3670),mt=ee(8239),en=ee(1144),Kt=ee(6495),ci=ee(2206),vi=ee(4532),Ne=ee(3260);function Ot(Ut,Lt){return Lt?function je(Ut,Lt){if(null!=Ut){if((0,xt.c)(Ut))return function ft(Ut,Lt){return(0,c.Xf)(Ut).pipe(tt(Lt),Se(Lt))}(Ut,Lt);if((0,en.z)(Ut))return function Ve(Ut,Lt){return new ht.y(Zt=>{let Ht=0;return Lt.schedule(function(){Ht===Ut.length?Zt.complete():(Zt.next(Ut[Ht++]),Zt.closed||this.schedule())})})}(Ut,Lt);if((0,mt.t)(Ut))return function Vt(Ut,Lt){return(0,c.Xf)(Ut).pipe(tt(Lt),Se(Lt))}(Ut,Lt);if((0,ci.D)(Ut))return rt(Ut,Lt);if((0,Kt.T)(Ut))return function rn(Ut,Lt){return new ht.y(Zt=>{let Ht;return(0,W.f)(Zt,Lt,()=>{Ht=Ut[He.h](),(0,W.f)(Zt,Lt,()=>{let Bt,Kn;try{({value:Bt,done:Kn}=Ht.next())}catch(Jt){return void Zt.error(Jt)}Kn?Zt.complete():Zt.next(Bt)},0,!0)}),()=>(0,nt.m)(Ht?.return)&&Ht.return()})}(Ut,Lt);if((0,Ne.L)(Ut))return function dt(Ut,Lt){return rt((0,Ne.Q)(Ut),Lt)}(Ut,Lt)}throw(0,vi.z)(Ut)}(Ut,Lt):(0,c.Xf)(Ut)}},8421:(an,Qe,ee)=>{ee.d(Qe,{Xf:()=>rn});var c=ee(655),W=ee(1144),be=ee(8239),Oe=ee(9751),Se=ee(3670),tt=ee(2206),ft=ee(4532),Vt=ee(6495),ht=ee(3260),Ve=ee(576),He=ee(7849),nt=ee(8822);function rn(Ne){if(Ne instanceof Oe.y)return Ne;if(null!=Ne){if((0,Se.c)(Ne))return function rt(Ne){return new Oe.y(dt=>{const je=Ne[nt.L]();if((0,Ve.m)(je.subscribe))return je.subscribe(dt);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ne);if((0,W.z)(Ne))return function xt(Ne){return new Oe.y(dt=>{for(let je=0;je<Ne.length&&!dt.closed;je++)dt.next(Ne[je]);dt.complete()})}(Ne);if((0,be.t)(Ne))return function mt(Ne){return new Oe.y(dt=>{Ne.then(je=>{dt.closed||(dt.next(je),dt.complete())},je=>dt.error(je)).then(null,He.h)})}(Ne);if((0,tt.D)(Ne))return Kt(Ne);if((0,Vt.T)(Ne))return function en(Ne){return new Oe.y(dt=>{for(const je of Ne)if(dt.next(je),dt.closed)return;dt.complete()})}(Ne);if((0,ht.L)(Ne))return function ci(Ne){return Kt((0,ht.Q)(Ne))}(Ne)}throw(0,ft.z)(Ne)}function Kt(Ne){return new Oe.y(dt=>{(function vi(Ne,dt){var je,Ot,Ut,Lt;return(0,c.mG)(this,void 0,void 0,function*(){try{for(je=(0,c.KL)(Ne);!(Ot=yield je.next()).done;)if(dt.next(Ot.value),dt.closed)return}catch(Zt){Ut={error:Zt}}finally{try{Ot&&!Ot.done&&(Lt=je.return)&&(yield Lt.call(je))}finally{if(Ut)throw Ut.error}}dt.complete()})})(Ne,dt).catch(je=>dt.error(je))})}},6451:(an,Qe,ee)=>{ee.d(Qe,{T:()=>tt});var c=ee(8189),W=ee(8421),be=ee(515),Oe=ee(3269),Se=ee(2076);function tt(...ft){const Vt=(0,Oe.yG)(ft),ht=(0,Oe._6)(ft,1/0),Ve=ft;return Ve.length?1===Ve.length?(0,W.Xf)(Ve[0]):(0,c.J)(ht)((0,Se.D)(Ve,Vt)):be.E}},9646:(an,Qe,ee)=>{ee.d(Qe,{of:()=>be});var c=ee(3269),W=ee(2076);function be(...Oe){const Se=(0,c.yG)(Oe);return(0,W.D)(Oe,Se)}},5403:(an,Qe,ee)=>{ee.d(Qe,{x:()=>W});var c=ee(930);function W(Oe,Se,tt,ft,Vt){return new be(Oe,Se,tt,ft,Vt)}class be extends c.Lv{constructor(Se,tt,ft,Vt,ht,Ve){super(Se),this.onFinalize=ht,this.shouldUnsubscribe=Ve,this._next=tt?function(He){try{tt(He)}catch(nt){Se.error(nt)}}:super._next,this._error=Vt?function(He){try{Vt(He)}catch(nt){Se.error(nt)}finally{this.unsubscribe()}}:super._error,this._complete=ft?function(){try{ft()}catch(He){Se.error(He)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var Se;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:tt}=this;super.unsubscribe(),!tt&&(null===(Se=this.onFinalize)||void 0===Se||Se.call(this))}}}},9300:(an,Qe,ee)=>{ee.d(Qe,{h:()=>be});var c=ee(4482),W=ee(5403);function be(Oe,Se){return(0,c.e)((tt,ft)=>{let Vt=0;tt.subscribe((0,W.x)(ft,ht=>Oe.call(Se,ht,Vt++)&&ft.next(ht)))})}},4004:(an,Qe,ee)=>{ee.d(Qe,{U:()=>be});var c=ee(4482),W=ee(5403);function be(Oe,Se){return(0,c.e)((tt,ft)=>{let Vt=0;tt.subscribe((0,W.x)(ft,ht=>{ft.next(Oe.call(Se,ht,Vt++))}))})}},9718:(an,Qe,ee)=>{ee.d(Qe,{h:()=>W});var c=ee(4004);function W(be){return(0,c.U)(()=>be)}},8189:(an,Qe,ee)=>{ee.d(Qe,{J:()=>be});var c=ee(5577),W=ee(4671);function be(Oe=1/0){return(0,c.z)(W.y,Oe)}},5577:(an,Qe,ee)=>{ee.d(Qe,{z:()=>Vt});var c=ee(4004),W=ee(8421),be=ee(4482),Oe=ee(9672),Se=ee(5403),ft=ee(576);function Vt(ht,Ve,He=1/0){return(0,ft.m)(Ve)?Vt((nt,rn)=>(0,c.U)((rt,xt)=>Ve(nt,rt,rn,xt))((0,W.Xf)(ht(nt,rn))),He):("number"==typeof Ve&&(He=Ve),(0,be.e)((nt,rn)=>function tt(ht,Ve,He,nt,rn,rt,xt,mt){const en=[];let Kt=0,ci=0,vi=!1;const Ne=()=>{vi&&!en.length&&!Kt&&Ve.complete()},dt=Ot=>Kt<nt?je(Ot):en.push(Ot),je=Ot=>{rt&&Ve.next(Ot),Kt++;let Ut=!1;(0,W.Xf)(He(Ot,ci++)).subscribe((0,Se.x)(Ve,Lt=>{rn?.(Lt),rt?dt(Lt):Ve.next(Lt)},()=>{Ut=!0},void 0,()=>{if(Ut)try{for(Kt--;en.length&&Kt<nt;){const Lt=en.shift();xt?(0,Oe.f)(Ve,xt,()=>je(Lt)):je(Lt)}Ne()}catch(Lt){Ve.error(Lt)}}))};return ht.subscribe((0,Se.x)(Ve,dt,()=>{vi=!0,Ne()})),()=>{mt?.()}}(nt,rn,ht,He)))}},8675:(an,Qe,ee)=>{ee.d(Qe,{O:()=>Oe});var c=ee(7272),W=ee(3269),be=ee(4482);function Oe(...Se){const tt=(0,W.yG)(Se);return(0,be.e)((ft,Vt)=>{(tt?(0,c.z)(Se,ft,tt):(0,c.z)(Se,ft)).subscribe(Vt)})}},3900:(an,Qe,ee)=>{ee.d(Qe,{w:()=>Oe});var c=ee(8421),W=ee(4482),be=ee(5403);function Oe(Se,tt){return(0,W.e)((ft,Vt)=>{let ht=null,Ve=0,He=!1;const nt=()=>He&&!ht&&Vt.complete();ft.subscribe((0,be.x)(Vt,rn=>{ht?.unsubscribe();let rt=0;const xt=Ve++;(0,c.Xf)(Se(rn,xt)).subscribe(ht=(0,be.x)(Vt,mt=>Vt.next(tt?tt(rn,mt,xt,rt++):mt),()=>{ht=null,nt()}))},()=>{He=!0,nt()}))})}},5698:(an,Qe,ee)=>{ee.d(Qe,{q:()=>Oe});var c=ee(515),W=ee(4482),be=ee(5403);function Oe(Se){return Se<=0?()=>c.E:(0,W.e)((tt,ft)=>{let Vt=0;tt.subscribe((0,be.x)(ft,ht=>{++Vt<=Se&&(ft.next(ht),Se<=Vt&&ft.complete())}))})}},2722:(an,Qe,ee)=>{ee.d(Qe,{R:()=>Se});var c=ee(4482),W=ee(5403),be=ee(8421),Oe=ee(5032);function Se(tt){return(0,c.e)((ft,Vt)=>{(0,be.Xf)(tt).subscribe((0,W.x)(Vt,()=>Vt.complete(),Oe.Z)),!Vt.closed&&ft.subscribe(Vt)})}},8505:(an,Qe,ee)=>{ee.d(Qe,{b:()=>Se});var c=ee(576),W=ee(4482),be=ee(5403),Oe=ee(4671);function Se(tt,ft,Vt){const ht=(0,c.m)(tt)||ft||Vt?{next:tt,error:ft,complete:Vt}:tt;return ht?(0,W.e)((Ve,He)=>{var nt;null===(nt=ht.subscribe)||void 0===nt||nt.call(ht);let rn=!0;Ve.subscribe((0,be.x)(He,rt=>{var xt;null===(xt=ht.next)||void 0===xt||xt.call(ht,rt),He.next(rt)},()=>{var rt;rn=!1,null===(rt=ht.complete)||void 0===rt||rt.call(ht),He.complete()},rt=>{var xt;rn=!1,null===(xt=ht.error)||void 0===xt||xt.call(ht,rt),He.error(rt)},()=>{var rt,xt;rn&&(null===(rt=ht.unsubscribe)||void 0===rt||rt.call(ht)),null===(xt=ht.finalize)||void 0===xt||xt.call(ht)}))}):Oe.y}},6063:(an,Qe,ee)=>{ee.d(Qe,{l:()=>c});const c={now:()=>(c.delegate||Date).now(),delegate:void 0}},3410:(an,Qe,ee)=>{ee.d(Qe,{z:()=>c});const c={setTimeout(W,be,...Oe){const{delegate:Se}=c;return Se?.setTimeout?Se.setTimeout(W,be,...Oe):setTimeout(W,be,...Oe)},clearTimeout(W){const{delegate:be}=c;return(be?.clearTimeout||clearTimeout)(W)},delegate:void 0}},2202:(an,Qe,ee)=>{ee.d(Qe,{h:()=>W});const W=function c(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(an,Qe,ee)=>{ee.d(Qe,{L:()=>c});const c="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(an,Qe,ee)=>{ee.d(Qe,{_6:()=>tt,jO:()=>Oe,yG:()=>Se});var c=ee(576),W=ee(3532);function be(ft){return ft[ft.length-1]}function Oe(ft){return(0,c.m)(be(ft))?ft.pop():void 0}function Se(ft){return(0,W.K)(be(ft))?ft.pop():void 0}function tt(ft,Vt){return"number"==typeof be(ft)?ft.pop():Vt}},4742:(an,Qe,ee)=>{ee.d(Qe,{D:()=>Se});const{isArray:c}=Array,{getPrototypeOf:W,prototype:be,keys:Oe}=Object;function Se(ft){if(1===ft.length){const Vt=ft[0];if(c(Vt))return{args:Vt,keys:null};if(function tt(ft){return ft&&"object"==typeof ft&&W(ft)===be}(Vt)){const ht=Oe(Vt);return{args:ht.map(Ve=>Vt[Ve]),keys:ht}}}return{args:ft,keys:null}}},8737:(an,Qe,ee)=>{function c(W,be){if(W){const Oe=W.indexOf(be);0<=Oe&&W.splice(Oe,1)}}ee.d(Qe,{P:()=>c})},3888:(an,Qe,ee)=>{function c(W){const Oe=W(Se=>{Error.call(Se),Se.stack=(new Error).stack});return Oe.prototype=Object.create(Error.prototype),Oe.prototype.constructor=Oe,Oe}ee.d(Qe,{d:()=>c})},1810:(an,Qe,ee)=>{function c(W,be){return W.reduce((Oe,Se,tt)=>(Oe[Se]=be[tt],Oe),{})}ee.d(Qe,{n:()=>c})},2806:(an,Qe,ee)=>{ee.d(Qe,{O:()=>Oe,x:()=>be});var c=ee(2416);let W=null;function be(Se){if(c.v.useDeprecatedSynchronousErrorHandling){const tt=!W;if(tt&&(W={errorThrown:!1,error:null}),Se(),tt){const{errorThrown:ft,error:Vt}=W;if(W=null,ft)throw Vt}}else Se()}function Oe(Se){c.v.useDeprecatedSynchronousErrorHandling&&W&&(W.errorThrown=!0,W.error=Se)}},9672:(an,Qe,ee)=>{function c(W,be,Oe,Se=0,tt=!1){const ft=be.schedule(function(){Oe(),tt?W.add(this.schedule(null,Se)):this.unsubscribe()},Se);if(W.add(ft),!tt)return ft}ee.d(Qe,{f:()=>c})},4671:(an,Qe,ee)=>{function c(W){return W}ee.d(Qe,{y:()=>c})},1144:(an,Qe,ee)=>{ee.d(Qe,{z:()=>c});const c=W=>W&&"number"==typeof W.length&&"function"!=typeof W},2206:(an,Qe,ee)=>{ee.d(Qe,{D:()=>W});var c=ee(576);function W(be){return Symbol.asyncIterator&&(0,c.m)(be?.[Symbol.asyncIterator])}},576:(an,Qe,ee)=>{function c(W){return"function"==typeof W}ee.d(Qe,{m:()=>c})},3670:(an,Qe,ee)=>{ee.d(Qe,{c:()=>be});var c=ee(8822),W=ee(576);function be(Oe){return(0,W.m)(Oe[c.L])}},6495:(an,Qe,ee)=>{ee.d(Qe,{T:()=>be});var c=ee(2202),W=ee(576);function be(Oe){return(0,W.m)(Oe?.[c.h])}},8239:(an,Qe,ee)=>{ee.d(Qe,{t:()=>W});var c=ee(576);function W(be){return(0,c.m)(be?.then)}},3260:(an,Qe,ee)=>{ee.d(Qe,{L:()=>Oe,Q:()=>be});var c=ee(655),W=ee(576);function be(Se){return(0,c.FC)(this,arguments,function*(){const ft=Se.getReader();try{for(;;){const{value:Vt,done:ht}=yield(0,c.qq)(ft.read());if(ht)return yield(0,c.qq)(void 0);yield yield(0,c.qq)(Vt)}}finally{ft.releaseLock()}})}function Oe(Se){return(0,W.m)(Se?.getReader)}},3532:(an,Qe,ee)=>{ee.d(Qe,{K:()=>W});var c=ee(576);function W(be){return be&&(0,c.m)(be.schedule)}},4482:(an,Qe,ee)=>{ee.d(Qe,{A:()=>W,e:()=>be});var c=ee(576);function W(Oe){return(0,c.m)(Oe?.lift)}function be(Oe){return Se=>{if(W(Se))return Se.lift(function(tt){try{return Oe(tt,this)}catch(ft){this.error(ft)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(an,Qe,ee)=>{ee.d(Qe,{Z:()=>Oe});var c=ee(4004);const{isArray:W}=Array;function Oe(Se){return(0,c.U)(tt=>function be(Se,tt){return W(tt)?Se(...tt):Se(tt)}(Se,tt))}},5032:(an,Qe,ee)=>{function c(){}ee.d(Qe,{Z:()=>c})},9635:(an,Qe,ee)=>{ee.d(Qe,{U:()=>be,z:()=>W});var c=ee(4671);function W(...Oe){return be(Oe)}function be(Oe){return 0===Oe.length?c.y:1===Oe.length?Oe[0]:function(tt){return Oe.reduce((ft,Vt)=>Vt(ft),tt)}}},7849:(an,Qe,ee)=>{ee.d(Qe,{h:()=>be});var c=ee(2416),W=ee(3410);function be(Oe){W.z.setTimeout(()=>{const{onUnhandledError:Se}=c.v;if(!Se)throw Oe;Se(Oe)})}},4532:(an,Qe,ee)=>{function c(W){return new TypeError(`You provided ${null!==W&&"object"==typeof W?"an invalid object":`'${W}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}ee.d(Qe,{z:()=>c})},655:(an,Qe,ee)=>{function nt(ke,Be,Ue,Ye){return new(Ue||(Ue=Promise))(function(yt,dn){function Gn(Tn){try{fn(Ye.next(Tn))}catch(zt){dn(zt)}}function Vi(Tn){try{fn(Ye.throw(Tn))}catch(zt){dn(zt)}}function fn(Tn){Tn.done?yt(Tn.value):function bt(yt){return yt instanceof Ue?yt:new Ue(function(dn){dn(yt)})}(Tn.value).then(Gn,Vi)}fn((Ye=Ye.apply(ke,Be||[])).next())})}function Ne(ke){return this instanceof Ne?(this.v=ke,this):new Ne(ke)}function dt(ke,Be,Ue){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var bt,Ye=Ue.apply(ke,Be||[]),yt=[];return bt={},dn("next"),dn("throw"),dn("return"),bt[Symbol.asyncIterator]=function(){return this},bt;function dn(ii){Ye[ii]&&(bt[ii]=function(ts){return new Promise(function(ln,cn){yt.push([ii,ts,ln,cn])>1||Gn(ii,ts)})})}function Gn(ii,ts){try{!function Vi(ii){ii.value instanceof Ne?Promise.resolve(ii.value.v).then(fn,Tn):zt(yt[0][2],ii)}(Ye[ii](ts))}catch(ln){zt(yt[0][3],ln)}}function fn(ii){Gn("next",ii)}function Tn(ii){Gn("throw",ii)}function zt(ii,ts){ii(ts),yt.shift(),yt.length&&Gn(yt[0][0],yt[0][1])}}function Ot(ke){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ue,Be=ke[Symbol.asyncIterator];return Be?Be.call(ke):(ke=function mt(ke){var Be="function"==typeof Symbol&&Symbol.iterator,Ue=Be&&ke[Be],Ye=0;if(Ue)return Ue.call(ke);if(ke&&"number"==typeof ke.length)return{next:function(){return ke&&Ye>=ke.length&&(ke=void 0),{value:ke&&ke[Ye++],done:!ke}}};throw new TypeError(Be?"Object is not iterable.":"Symbol.iterator is not defined.")}(ke),Ue={},Ye("next"),Ye("throw"),Ye("return"),Ue[Symbol.asyncIterator]=function(){return this},Ue);function Ye(yt){Ue[yt]=ke[yt]&&function(dn){return new Promise(function(Gn,Vi){!function bt(yt,dn,Gn,Vi){Promise.resolve(Vi).then(function(fn){yt({value:fn,done:Gn})},dn)}(Gn,Vi,(dn=ke[yt](dn)).done,dn.value)})}}}ee.d(Qe,{FC:()=>dt,KL:()=>Ot,mG:()=>nt,qq:()=>Ne})},6895:(an,Qe,ee)=>{ee.d(Qe,{Do:()=>ci,EM:()=>Aa,HT:()=>Oe,JF:()=>co,K0:()=>tt,Mn:()=>Ye,Mx:()=>si,NF:()=>vh,O5:()=>Yr,S$:()=>mt,Tn:()=>Bt,UT:()=>bt,V_:()=>ht,Ye:()=>vi,Zx:()=>Po,ax:()=>mn,b0:()=>Kt,bD:()=>Ea,ez:()=>_h,ol:()=>Ue,p6:()=>So,q:()=>be,tP:()=>zi,w_:()=>Se,x:()=>Ht});var c=ee(1571);let W=null;function be(){return W}function Oe(P){W||(W=P)}class Se{}const tt=new c.OlP("DocumentToken");let ft=(()=>{class P{historyGo(k){throw new Error("Not implemented")}}return P.\u0275fac=function(k){return new(k||P)},P.\u0275prov=c.Yz7({token:P,factory:function(){return function Vt(){return(0,c.LFG)(Ve)}()},providedIn:"platform"}),P})();const ht=new c.OlP("Location Initialized");let Ve=(()=>{class P extends ft{constructor(k){super(),this._doc=k,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return be().getBaseHref(this._doc)}onPopState(k){const K=be().getGlobalEventTarget(this._doc,"window");return K.addEventListener("popstate",k,!1),()=>K.removeEventListener("popstate",k)}onHashChange(k){const K=be().getGlobalEventTarget(this._doc,"window");return K.addEventListener("hashchange",k,!1),()=>K.removeEventListener("hashchange",k)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(k){this._location.pathname=k}pushState(k,K,oe){He()?this._history.pushState(k,K,oe):this._location.hash=oe}replaceState(k,K,oe){He()?this._history.replaceState(k,K,oe):this._location.hash=oe}forward(){this._history.forward()}back(){this._history.back()}historyGo(k=0){this._history.go(k)}getState(){return this._history.state}}return P.\u0275fac=function(k){return new(k||P)(c.LFG(tt))},P.\u0275prov=c.Yz7({token:P,factory:function(){return function nt(){return new Ve((0,c.LFG)(tt))}()},providedIn:"platform"}),P})();function He(){return!!window.history.pushState}function rn(P,U){if(0==P.length)return U;if(0==U.length)return P;let k=0;return P.endsWith("/")&&k++,U.startsWith("/")&&k++,2==k?P+U.substring(1):1==k?P+U:P+"/"+U}function rt(P){const U=P.match(/#|\?|$/),k=U&&U.index||P.length;return P.slice(0,k-("/"===P[k-1]?1:0))+P.slice(k)}function xt(P){return P&&"?"!==P[0]?"?"+P:P}let mt=(()=>{class P{historyGo(k){throw new Error("Not implemented")}}return P.\u0275fac=function(k){return new(k||P)},P.\u0275prov=c.Yz7({token:P,factory:function(){return(0,c.f3M)(Kt)},providedIn:"root"}),P})();const en=new c.OlP("appBaseHref");let Kt=(()=>{class P extends mt{constructor(k,K){super(),this._platformLocation=k,this._removeListenerFns=[],this._baseHref=K??this._platformLocation.getBaseHrefFromDOM()??(0,c.f3M)(tt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(k){this._removeListenerFns.push(this._platformLocation.onPopState(k),this._platformLocation.onHashChange(k))}getBaseHref(){return this._baseHref}prepareExternalUrl(k){return rn(this._baseHref,k)}path(k=!1){const K=this._platformLocation.pathname+xt(this._platformLocation.search),oe=this._platformLocation.hash;return oe&&k?`${K}${oe}`:K}pushState(k,K,oe,De){const ze=this.prepareExternalUrl(oe+xt(De));this._platformLocation.pushState(k,K,ze)}replaceState(k,K,oe,De){const ze=this.prepareExternalUrl(oe+xt(De));this._platformLocation.replaceState(k,K,ze)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(k=0){this._platformLocation.historyGo?.(k)}}return P.\u0275fac=function(k){return new(k||P)(c.LFG(ft),c.LFG(en,8))},P.\u0275prov=c.Yz7({token:P,factory:P.\u0275fac,providedIn:"root"}),P})(),ci=(()=>{class P extends mt{constructor(k,K){super(),this._platformLocation=k,this._baseHref="",this._removeListenerFns=[],null!=K&&(this._baseHref=K)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(k){this._removeListenerFns.push(this._platformLocation.onPopState(k),this._platformLocation.onHashChange(k))}getBaseHref(){return this._baseHref}path(k=!1){let K=this._platformLocation.hash;return null==K&&(K="#"),K.length>0?K.substring(1):K}prepareExternalUrl(k){const K=rn(this._baseHref,k);return K.length>0?"#"+K:K}pushState(k,K,oe,De){let ze=this.prepareExternalUrl(oe+xt(De));0==ze.length&&(ze=this._platformLocation.pathname),this._platformLocation.pushState(k,K,ze)}replaceState(k,K,oe,De){let ze=this.prepareExternalUrl(oe+xt(De));0==ze.length&&(ze=this._platformLocation.pathname),this._platformLocation.replaceState(k,K,ze)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(k=0){this._platformLocation.historyGo?.(k)}}return P.\u0275fac=function(k){return new(k||P)(c.LFG(ft),c.LFG(en,8))},P.\u0275prov=c.Yz7({token:P,factory:P.\u0275fac}),P})(),vi=(()=>{class P{constructor(k){this._subject=new c.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=k;const K=this._locationStrategy.getBaseHref();this._basePath=function Ot(P){if(new RegExp("^(https?:)?//").test(P)){const[,k]=P.split(/\/\/[^\/]+/);return k}return P}(rt(je(K))),this._locationStrategy.onPopState(oe=>{this._subject.emit({url:this.path(!0),pop:!0,state:oe.state,type:oe.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(k=!1){return this.normalize(this._locationStrategy.path(k))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(k,K=""){return this.path()==this.normalize(k+xt(K))}normalize(k){return P.stripTrailingSlash(function dt(P,U){if(!P||!U.startsWith(P))return U;const k=U.substring(P.length);return""===k||["/",";","?","#"].includes(k[0])?k:U}(this._basePath,je(k)))}prepareExternalUrl(k){return k&&"/"!==k[0]&&(k="/"+k),this._locationStrategy.prepareExternalUrl(k)}go(k,K="",oe=null){this._locationStrategy.pushState(oe,"",k,K),this._notifyUrlChangeListeners(this.prepareExternalUrl(k+xt(K)),oe)}replaceState(k,K="",oe=null){this._locationStrategy.replaceState(oe,"",k,K),this._notifyUrlChangeListeners(this.prepareExternalUrl(k+xt(K)),oe)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(k=0){this._locationStrategy.historyGo?.(k)}onUrlChange(k){return this._urlChangeListeners.push(k),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(K=>{this._notifyUrlChangeListeners(K.url,K.state)})),()=>{const K=this._urlChangeListeners.indexOf(k);this._urlChangeListeners.splice(K,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(k="",K){this._urlChangeListeners.forEach(oe=>oe(k,K))}subscribe(k,K,oe){return this._subject.subscribe({next:k,error:K,complete:oe})}}return P.normalizeQueryParams=xt,P.joinWithSlash=rn,P.stripTrailingSlash=rt,P.\u0275fac=function(k){return new(k||P)(c.LFG(mt))},P.\u0275prov=c.Yz7({token:P,factory:function(){return function Ne(){return new vi((0,c.LFG)(mt))}()},providedIn:"root"}),P})();function je(P){return P.replace(/\/index.html$/,"")}var Lt=(()=>((Lt=Lt||{})[Lt.Decimal=0]="Decimal",Lt[Lt.Percent=1]="Percent",Lt[Lt.Currency=2]="Currency",Lt[Lt.Scientific=3]="Scientific",Lt))(),Ht=(()=>((Ht=Ht||{})[Ht.Format=0]="Format",Ht[Ht.Standalone=1]="Standalone",Ht))(),Bt=(()=>((Bt=Bt||{})[Bt.Narrow=0]="Narrow",Bt[Bt.Abbreviated=1]="Abbreviated",Bt[Bt.Wide=2]="Wide",Bt[Bt.Short=3]="Short",Bt))(),Kn=(()=>((Kn=Kn||{})[Kn.Short=0]="Short",Kn[Kn.Medium=1]="Medium",Kn[Kn.Long=2]="Long",Kn[Kn.Full=3]="Full",Kn))(),Jt=(()=>((Jt=Jt||{})[Jt.Decimal=0]="Decimal",Jt[Jt.Group=1]="Group",Jt[Jt.List=2]="List",Jt[Jt.PercentSign=3]="PercentSign",Jt[Jt.PlusSign=4]="PlusSign",Jt[Jt.MinusSign=5]="MinusSign",Jt[Jt.Exponential=6]="Exponential",Jt[Jt.SuperscriptingExponent=7]="SuperscriptingExponent",Jt[Jt.PerMille=8]="PerMille",Jt[Jt.Infinity=9]="Infinity",Jt[Jt.NaN=10]="NaN",Jt[Jt.TimeSeparator=11]="TimeSeparator",Jt[Jt.CurrencyDecimal=12]="CurrencyDecimal",Jt[Jt.CurrencyGroup=13]="CurrencyGroup",Jt))();function Ue(P,U,k){const K=(0,c.cg1)(P),De=yi([K[c.wAp.DayPeriodsFormat],K[c.wAp.DayPeriodsStandalone]],U);return yi(De,k)}function Ye(P,U,k){const K=(0,c.cg1)(P),De=yi([K[c.wAp.DaysFormat],K[c.wAp.DaysStandalone]],U);return yi(De,k)}function bt(P,U,k){const K=(0,c.cg1)(P),De=yi([K[c.wAp.MonthsFormat],K[c.wAp.MonthsStandalone]],U);return yi(De,k)}function Vi(P,U){return yi((0,c.cg1)(P)[c.wAp.DateFormat],U)}function fn(P,U){return yi((0,c.cg1)(P)[c.wAp.TimeFormat],U)}function Tn(P,U){return yi((0,c.cg1)(P)[c.wAp.DateTimeFormat],U)}function zt(P,U){const k=(0,c.cg1)(P),K=k[c.wAp.NumberSymbols][U];if(typeof K>"u"){if(U===Jt.CurrencyDecimal)return k[c.wAp.NumberSymbols][Jt.Decimal];if(U===Jt.CurrencyGroup)return k[c.wAp.NumberSymbols][Jt.Group]}return K}function Ar(P){if(!P[c.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${P[c.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function yi(P,U){for(let k=U;k>-1;k--)if(typeof P[k]<"u")return P[k];throw new Error("Locale data API: locale data undefined")}function ro(P){const[U,k]=P.split(":");return{hours:+U,minutes:+k}}const Qo=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,on={},zr=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var ri=(()=>((ri=ri||{})[ri.Short=0]="Short",ri[ri.ShortGMT=1]="ShortGMT",ri[ri.Long=2]="Long",ri[ri.Extended=3]="Extended",ri))(),jt=(()=>((jt=jt||{})[jt.FullYear=0]="FullYear",jt[jt.Month=1]="Month",jt[jt.Date=2]="Date",jt[jt.Hours=3]="Hours",jt[jt.Minutes=4]="Minutes",jt[jt.Seconds=5]="Seconds",jt[jt.FractionalSeconds=6]="FractionalSeconds",jt[jt.Day=7]="Day",jt))(),Je=(()=>((Je=Je||{})[Je.DayPeriods=0]="DayPeriods",Je[Je.Days=1]="Days",Je[Je.Months=2]="Months",Je[Je.Eras=3]="Eras",Je))();function So(P,U,k,K){let oe=function tl(P){if(xe(P))return P;if("number"==typeof P&&!isNaN(P))return new Date(P);if("string"==typeof P){if(P=P.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(P)){const[oe,De=1,ze=1]=P.split("-").map(Wt=>+Wt);return ui(oe,De-1,ze)}const k=parseFloat(P);if(!isNaN(P-k))return new Date(k);let K;if(K=P.match(Qo))return function kl(P){const U=new Date(0);let k=0,K=0;const oe=P[8]?U.setUTCFullYear:U.setFullYear,De=P[8]?U.setUTCHours:U.setHours;P[9]&&(k=Number(P[9]+P[10]),K=Number(P[9]+P[11])),oe.call(U,Number(P[1]),Number(P[2])-1,Number(P[3]));const ze=Number(P[4]||0)-k,Wt=Number(P[5]||0)-K,bn=Number(P[6]||0),Sn=Math.floor(1e3*parseFloat("0."+(P[7]||0)));return De.call(U,ze,Wt,bn,Sn),U}(K)}const U=new Date(P);if(!xe(U))throw new Error(`Unable to convert "${P}" into a date`);return U}(P);U=mi(k,U)||U;let Wt,ze=[];for(;U;){if(Wt=zr.exec(U),!Wt){ze.push(U);break}{ze=ze.concat(Wt.slice(1));const xn=ze.pop();if(!xn)break;U=xn}}let bn=oe.getTimezoneOffset();K&&(bn=$r(K,bn),oe=function so(P,U,k){const K=k?-1:1,oe=P.getTimezoneOffset();return function Pr(P,U){return(P=new Date(P.getTime())).setMinutes(P.getMinutes()+U),P}(P,K*($r(U,oe)-oe))}(oe,K,!0));let Sn="";return ze.forEach(xn=>{const On=function Co(P){if(Wr[P])return Wr[P];let U;switch(P){case"G":case"GG":case"GGG":U=zn(Je.Eras,Bt.Abbreviated);break;case"GGGG":U=zn(Je.Eras,Bt.Wide);break;case"GGGGG":U=zn(Je.Eras,Bt.Narrow);break;case"y":U=Rn(jt.FullYear,1,0,!1,!0);break;case"yy":U=Rn(jt.FullYear,2,0,!0,!0);break;case"yyy":U=Rn(jt.FullYear,3,0,!1,!0);break;case"yyyy":U=Rn(jt.FullYear,4,0,!1,!0);break;case"Y":U=Si(1);break;case"YY":U=Si(2,!0);break;case"YYY":U=Si(3);break;case"YYYY":U=Si(4);break;case"M":case"L":U=Rn(jt.Month,1,1);break;case"MM":case"LL":U=Rn(jt.Month,2,1);break;case"MMM":U=zn(Je.Months,Bt.Abbreviated);break;case"MMMM":U=zn(Je.Months,Bt.Wide);break;case"MMMMM":U=zn(Je.Months,Bt.Narrow);break;case"LLL":U=zn(Je.Months,Bt.Abbreviated,Ht.Standalone);break;case"LLLL":U=zn(Je.Months,Bt.Wide,Ht.Standalone);break;case"LLLLL":U=zn(Je.Months,Bt.Narrow,Ht.Standalone);break;case"w":U=Ri(1);break;case"ww":U=Ri(2);break;case"W":U=Ri(1,!0);break;case"d":U=Rn(jt.Date,1);break;case"dd":U=Rn(jt.Date,2);break;case"c":case"cc":U=Rn(jt.Day,1);break;case"ccc":U=zn(Je.Days,Bt.Abbreviated,Ht.Standalone);break;case"cccc":U=zn(Je.Days,Bt.Wide,Ht.Standalone);break;case"ccccc":U=zn(Je.Days,Bt.Narrow,Ht.Standalone);break;case"cccccc":U=zn(Je.Days,Bt.Short,Ht.Standalone);break;case"E":case"EE":case"EEE":U=zn(Je.Days,Bt.Abbreviated);break;case"EEEE":U=zn(Je.Days,Bt.Wide);break;case"EEEEE":U=zn(Je.Days,Bt.Narrow);break;case"EEEEEE":U=zn(Je.Days,Bt.Short);break;case"a":case"aa":case"aaa":U=zn(Je.DayPeriods,Bt.Abbreviated);break;case"aaaa":U=zn(Je.DayPeriods,Bt.Wide);break;case"aaaaa":U=zn(Je.DayPeriods,Bt.Narrow);break;case"b":case"bb":case"bbb":U=zn(Je.DayPeriods,Bt.Abbreviated,Ht.Standalone,!0);break;case"bbbb":U=zn(Je.DayPeriods,Bt.Wide,Ht.Standalone,!0);break;case"bbbbb":U=zn(Je.DayPeriods,Bt.Narrow,Ht.Standalone,!0);break;case"B":case"BB":case"BBB":U=zn(Je.DayPeriods,Bt.Abbreviated,Ht.Format,!0);break;case"BBBB":U=zn(Je.DayPeriods,Bt.Wide,Ht.Format,!0);break;case"BBBBB":U=zn(Je.DayPeriods,Bt.Narrow,Ht.Format,!0);break;case"h":U=Rn(jt.Hours,1,-12);break;case"hh":U=Rn(jt.Hours,2,-12);break;case"H":U=Rn(jt.Hours,1);break;case"HH":U=Rn(jt.Hours,2);break;case"m":U=Rn(jt.Minutes,1);break;case"mm":U=Rn(jt.Minutes,2);break;case"s":U=Rn(jt.Seconds,1);break;case"ss":U=Rn(jt.Seconds,2);break;case"S":U=Rn(jt.FractionalSeconds,1);break;case"SS":U=Rn(jt.FractionalSeconds,2);break;case"SSS":U=Rn(jt.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":U=bs(ri.Short);break;case"ZZZZZ":U=bs(ri.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":U=bs(ri.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":U=bs(ri.Long);break;default:return null}return Wr[P]=U,U}(xn);Sn+=On?On(oe,k,bn):"''"===xn?"'":xn.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),Sn}function ui(P,U,k){const K=new Date(0);return K.setFullYear(P,U,k),K.setHours(0,0,0),K}function mi(P,U){const k=function Be(P){return(0,c.cg1)(P)[c.wAp.LocaleId]}(P);if(on[k]=on[k]||{},on[k][U])return on[k][U];let K="";switch(U){case"shortDate":K=Vi(P,Kn.Short);break;case"mediumDate":K=Vi(P,Kn.Medium);break;case"longDate":K=Vi(P,Kn.Long);break;case"fullDate":K=Vi(P,Kn.Full);break;case"shortTime":K=fn(P,Kn.Short);break;case"mediumTime":K=fn(P,Kn.Medium);break;case"longTime":K=fn(P,Kn.Long);break;case"fullTime":K=fn(P,Kn.Full);break;case"short":const oe=mi(P,"shortTime"),De=mi(P,"shortDate");K=is(Tn(P,Kn.Short),[oe,De]);break;case"medium":const ze=mi(P,"mediumTime"),Wt=mi(P,"mediumDate");K=is(Tn(P,Kn.Medium),[ze,Wt]);break;case"long":const bn=mi(P,"longTime"),Sn=mi(P,"longDate");K=is(Tn(P,Kn.Long),[bn,Sn]);break;case"full":const xn=mi(P,"fullTime"),On=mi(P,"fullDate");K=is(Tn(P,Kn.Full),[xn,On])}return K&&(on[k][U]=K),K}function is(P,U){return U&&(P=P.replace(/\{([^}]+)}/g,function(k,K){return null!=U&&K in U?U[K]:k})),P}function In(P,U,k="-",K,oe){let De="";(P<0||oe&&P<=0)&&(oe?P=1-P:(P=-P,De=k));let ze=String(P);for(;ze.length<U;)ze="0"+ze;return K&&(ze=ze.slice(ze.length-U)),De+ze}function Rn(P,U,k=0,K=!1,oe=!1){return function(De,ze){let Wt=function js(P,U){switch(P){case jt.FullYear:return U.getFullYear();case jt.Month:return U.getMonth();case jt.Date:return U.getDate();case jt.Hours:return U.getHours();case jt.Minutes:return U.getMinutes();case jt.Seconds:return U.getSeconds();case jt.FractionalSeconds:return U.getMilliseconds();case jt.Day:return U.getDay();default:throw new Error(`Unknown DateType value "${P}".`)}}(P,De);if((k>0||Wt>-k)&&(Wt+=k),P===jt.Hours)0===Wt&&-12===k&&(Wt=12);else if(P===jt.FractionalSeconds)return function un(P,U){return In(P,3).substring(0,U)}(Wt,U);const bn=zt(ze,Jt.MinusSign);return In(Wt,U,bn,K,oe)}}function zn(P,U,k=Ht.Format,K=!1){return function(oe,De){return function Ki(P,U,k,K,oe,De){switch(k){case Je.Months:return bt(U,oe,K)[P.getMonth()];case Je.Days:return Ye(U,oe,K)[P.getDay()];case Je.DayPeriods:const ze=P.getHours(),Wt=P.getMinutes();if(De){const Sn=function io(P){const U=(0,c.cg1)(P);return Ar(U),(U[c.wAp.ExtraData][2]||[]).map(K=>"string"==typeof K?ro(K):[ro(K[0]),ro(K[1])])}(U),xn=function Ir(P,U,k){const K=(0,c.cg1)(P);Ar(K);const De=yi([K[c.wAp.ExtraData][0],K[c.wAp.ExtraData][1]],U)||[];return yi(De,k)||[]}(U,oe,K),On=Sn.findIndex(Ii=>{if(Array.isArray(Ii)){const[Rt,Vn]=Ii,fi=ze>=Rt.hours&&Wt>=Rt.minutes,Mi=ze<Vn.hours||ze===Vn.hours&&Wt<Vn.minutes;if(Rt.hours<Vn.hours){if(fi&&Mi)return!0}else if(fi||Mi)return!0}else if(Ii.hours===ze&&Ii.minutes===Wt)return!0;return!1});if(-1!==On)return xn[On]}return Ue(U,oe,K)[ze<12?0:1];case Je.Eras:return function yt(P,U){return yi((0,c.cg1)(P)[c.wAp.Eras],U)}(U,K)[P.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${k}`)}}(oe,De,P,U,k,K)}}function bs(P){return function(U,k,K){const oe=-1*K,De=zt(k,Jt.MinusSign),ze=oe>0?Math.floor(oe/60):Math.ceil(oe/60);switch(P){case ri.Short:return(oe>=0?"+":"")+In(ze,2,De)+In(Math.abs(oe%60),2,De);case ri.ShortGMT:return"GMT"+(oe>=0?"+":"")+In(ze,1,De);case ri.Long:return"GMT"+(oe>=0?"+":"")+In(ze,2,De)+":"+In(Math.abs(oe%60),2,De);case ri.Extended:return 0===K?"Z":(oe>=0?"+":"")+In(ze,2,De)+":"+In(Math.abs(oe%60),2,De);default:throw new Error(`Unknown zone width "${P}"`)}}}const el=0,dr=4;function tr(P){return ui(P.getFullYear(),P.getMonth(),P.getDate()+(dr-P.getDay()))}function Ri(P,U=!1){return function(k,K){let oe;if(U){const De=new Date(k.getFullYear(),k.getMonth(),1).getDay()-1,ze=k.getDate();oe=1+Math.floor((ze+De)/7)}else{const De=tr(k),ze=function Ts(P){const U=ui(P,el,1).getDay();return ui(P,0,1+(U<=dr?dr:dr+7)-U)}(De.getFullYear()),Wt=De.getTime()-ze.getTime();oe=1+Math.round(Wt/6048e5)}return In(oe,P,zt(K,Jt.MinusSign))}}function Si(P,U=!1){return function(k,K){return In(tr(k).getFullYear(),P,zt(K,Jt.MinusSign),U)}}const Wr={};function $r(P,U){P=P.replace(/:/g,"");const k=Date.parse("Jan 01, 1970 00:00:00 "+P)/6e4;return isNaN(k)?U:k}function xe(P){return P instanceof Date&&!isNaN(P.valueOf())}const pe=/^(\d+)?\.((\d+)(-(\d+))?)?$/,re=22,Te=".",Ae="0",Nt=";",hn=",",Yn="#";function ss(P){const U=parseInt(P);if(isNaN(U))throw new Error("Invalid integer literal when parsing "+P);return U}function si(P,U){U=encodeURIComponent(U);for(const k of P.split(";")){const K=k.indexOf("="),[oe,De]=-1==K?[k,""]:[k.slice(0,K),k.slice(K+1)];if(oe.trim()===U)return decodeURIComponent(De)}return null}class It{constructor(U,k,K,oe){this.$implicit=U,this.ngForOf=k,this.index=K,this.count=oe}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let mn=(()=>{class P{set ngForOf(k){this._ngForOf=k,this._ngForOfDirty=!0}set ngForTrackBy(k){this._trackByFn=k}get ngForTrackBy(){return this._trackByFn}constructor(k,K,oe){this._viewContainer=k,this._template=K,this._differs=oe,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(k){k&&(this._template=k)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const k=this._ngForOf;!this._differ&&k&&(this._differ=this._differs.find(k).create(this.ngForTrackBy))}if(this._differ){const k=this._differ.diff(this._ngForOf);k&&this._applyChanges(k)}}_applyChanges(k){const K=this._viewContainer;k.forEachOperation((oe,De,ze)=>{if(null==oe.previousIndex)K.createEmbeddedView(this._template,new It(oe.item,this._ngForOf,-1,-1),null===ze?void 0:ze);else if(null==ze)K.remove(null===De?void 0:De);else if(null!==De){const Wt=K.get(De);K.move(Wt,ze),Ci(Wt,oe)}});for(let oe=0,De=K.length;oe<De;oe++){const Wt=K.get(oe).context;Wt.index=oe,Wt.count=De,Wt.ngForOf=this._ngForOf}k.forEachIdentityChange(oe=>{Ci(K.get(oe.currentIndex),oe)})}static ngTemplateContextGuard(k,K){return!0}}return P.\u0275fac=function(k){return new(k||P)(c.Y36(c.s_b),c.Y36(c.Rgc),c.Y36(c.ZZ4))},P.\u0275dir=c.lG2({type:P,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),P})();function Ci(P,U){P.context.$implicit=U.item}let Yr=(()=>{class P{constructor(k,K){this._viewContainer=k,this._context=new Ei,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=K}set ngIf(k){this._context.$implicit=this._context.ngIf=k,this._updateView()}set ngIfThen(k){Gs("ngIfThen",k),this._thenTemplateRef=k,this._thenViewRef=null,this._updateView()}set ngIfElse(k){Gs("ngIfElse",k),this._elseTemplateRef=k,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(k,K){return!0}}return P.\u0275fac=function(k){return new(k||P)(c.Y36(c.s_b),c.Y36(c.Rgc))},P.\u0275dir=c.lG2({type:P,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),P})();class Ei{constructor(){this.$implicit=null,this.ngIf=null}}function Gs(P,U){if(U&&!U.createEmbeddedView)throw new Error(`${P} must be a TemplateRef, but received '${(0,c.AaK)(U)}'.`)}let zi=(()=>{class P{constructor(k){this._viewContainerRef=k,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(k){if(k.ngTemplateOutlet||k.ngTemplateOutletInjector){const K=this._viewContainerRef;if(this._viewRef&&K.remove(K.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:oe,ngTemplateOutletContext:De,ngTemplateOutletInjector:ze}=this;this._viewRef=K.createEmbeddedView(oe,De,ze?{injector:ze}:void 0)}else this._viewRef=null}else this._viewRef&&k.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return P.\u0275fac=function(k){return new(k||P)(c.Y36(c.s_b))},P.\u0275dir=c.lG2({type:P,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[c.TTD]}),P})();let Po=(()=>{class P{constructor(k){this._locale=k}transform(k,K,oe){if(!function Hl(P){return!(null==P||""===P||P!=P)}(k))return null;oe=oe||this._locale;try{return function Gl(P,U,k){return function hr(P,U,k,K,oe,De,ze=!1){let Wt="",bn=!1;if(isFinite(P)){let Sn=function Ms(P){let K,oe,De,ze,Wt,U=Math.abs(P)+"",k=0;for((oe=U.indexOf(Te))>-1&&(U=U.replace(Te,"")),(De=U.search(/e/i))>0?(oe<0&&(oe=De),oe+=+U.slice(De+1),U=U.substring(0,De)):oe<0&&(oe=U.length),De=0;U.charAt(De)===Ae;De++);if(De===(Wt=U.length))K=[0],oe=1;else{for(Wt--;U.charAt(Wt)===Ae;)Wt--;for(oe-=De,K=[],ze=0;De<=Wt;De++,ze++)K[ze]=Number(U.charAt(De))}return oe>re&&(K=K.splice(0,re-1),k=oe-1,oe=1),{digits:K,exponent:k,integerLen:oe}}(P);ze&&(Sn=function il(P){if(0===P.digits[0])return P;const U=P.digits.length-P.integerLen;return P.exponent?P.exponent+=2:(0===U?P.digits.push(0,0):1===U&&P.digits.push(0),P.integerLen+=2),P}(Sn));let xn=U.minInt,On=U.minFrac,Ii=U.maxFrac;if(De){const Qi=De.match(pe);if(null===Qi)throw new Error(`${De} is not a valid digit info`);const Vr=Qi[1],ji=Qi[3],Cs=Qi[5];null!=Vr&&(xn=ss(Vr)),null!=ji&&(On=ss(ji)),null!=Cs?Ii=ss(Cs):null!=ji&&On>Ii&&(Ii=On)}!function Eo(P,U,k){if(U>k)throw new Error(`The minimum number of digits after fraction (${U}) is higher than the maximum (${k}).`);let K=P.digits,oe=K.length-P.integerLen;const De=Math.min(Math.max(U,oe),k);let ze=De+P.integerLen,Wt=K[ze];if(ze>0){K.splice(Math.max(P.integerLen,ze));for(let On=ze;On<K.length;On++)K[On]=0}else{oe=Math.max(0,oe),P.integerLen=1,K.length=Math.max(1,ze=De+1),K[0]=0;for(let On=1;On<ze;On++)K[On]=0}if(Wt>=5)if(ze-1<0){for(let On=0;On>ze;On--)K.unshift(0),P.integerLen++;K.unshift(1),P.integerLen++}else K[ze-1]++;for(;oe<Math.max(0,De);oe++)K.push(0);let bn=0!==De;const Sn=U+P.integerLen,xn=K.reduceRight(function(On,Ii,Rt,Vn){return Vn[Rt]=(Ii+=On)<10?Ii:Ii-10,bn&&(0===Vn[Rt]&&Rt>=Sn?Vn.pop():bn=!1),Ii>=10?1:0},0);xn&&(K.unshift(xn),P.integerLen++)}(Sn,On,Ii);let Rt=Sn.digits,Vn=Sn.integerLen;const fi=Sn.exponent;let Mi=[];for(bn=Rt.every(Qi=>!Qi);Vn<xn;Vn++)Rt.unshift(0);for(;Vn<0;Vn++)Rt.unshift(0);Vn>0?Mi=Rt.splice(Vn,Rt.length):(Mi=Rt,Rt=[0]);const Ss=[];for(Rt.length>=U.lgSize&&Ss.unshift(Rt.splice(-U.lgSize,Rt.length).join(""));Rt.length>U.gSize;)Ss.unshift(Rt.splice(-U.gSize,Rt.length).join(""));Rt.length&&Ss.unshift(Rt.join("")),Wt=Ss.join(zt(k,K)),Mi.length&&(Wt+=zt(k,oe)+Mi.join("")),fi&&(Wt+=zt(k,Jt.Exponential)+"+"+fi)}else Wt=zt(k,Jt.Infinity);return Wt=P<0&&!bn?U.negPre+Wt+U.negSuf:U.posPre+Wt+U.posSuf,Wt}(P,function oo(P,U="-"){const k={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},K=P.split(Nt),oe=K[0],De=K[1],ze=-1!==oe.indexOf(Te)?oe.split(Te):[oe.substring(0,oe.lastIndexOf(Ae)+1),oe.substring(oe.lastIndexOf(Ae)+1)],Wt=ze[0],bn=ze[1]||"";k.posPre=Wt.substring(0,Wt.indexOf(Yn));for(let xn=0;xn<bn.length;xn++){const On=bn.charAt(xn);On===Ae?k.minFrac=k.maxFrac=xn+1:On===Yn?k.maxFrac=xn+1:k.posSuf+=On}const Sn=Wt.split(hn);if(k.gSize=Sn[1]?Sn[1].length:0,k.lgSize=Sn[2]||Sn[1]?(Sn[2]||Sn[1]).length:0,De){const xn=oe.length-k.posPre.length-k.posSuf.length,On=De.indexOf(Yn);k.negPre=De.substring(0,On).replace(/'/g,""),k.negSuf=De.slice(On+xn).replace(/'/g,"")}else k.negPre=U+k.posPre,k.negSuf=k.posSuf;return k}(function ii(P,U){return(0,c.cg1)(P)[c.wAp.NumberFormats][U]}(U,Lt.Percent),zt(U,Jt.MinusSign)),U,Jt.Group,Jt.Decimal,k,!0).replace(new RegExp("%","g"),zt(U,Jt.PercentSign))}(function ll(P){if("string"==typeof P&&!isNaN(Number(P)-parseFloat(P)))return Number(P);if("number"!=typeof P)throw new Error(`${P} is not a number`);return P}(k),oe,K)}catch(De){throw function Xi(P,U){return new c.vHH(2100,!1)}()}}}return P.\u0275fac=function(k){return new(k||P)(c.Y36(c.soG,16))},P.\u0275pipe=c.Yjl({name:"percent",type:P,pure:!0,standalone:!0}),P})();let _h=(()=>{class P{}return P.\u0275fac=function(k){return new(k||P)},P.\u0275mod=c.oAB({type:P}),P.\u0275inj=c.cJS({}),P})();const Ea="browser";function vh(P){return P===Ea}let Aa=(()=>{class P{}return P.\u0275prov=(0,c.Yz7)({token:P,providedIn:"root",factory:()=>new Bc((0,c.LFG)(tt),window)}),P})();class Bc{constructor(U,k){this.document=U,this.window=k,this.offset=()=>[0,0]}setOffset(U){this.offset=Array.isArray(U)?()=>U:U}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(U){this.supportsScrolling()&&this.window.scrollTo(U[0],U[1])}scrollToAnchor(U){if(!this.supportsScrolling())return;const k=function ul(P,U){const k=P.getElementById(U)||P.getElementsByName(U)[0];if(k)return k;if("function"==typeof P.createTreeWalker&&P.body&&(P.body.createShadowRoot||P.body.attachShadow)){const K=P.createTreeWalker(P.body,NodeFilter.SHOW_ELEMENT);let oe=K.currentNode;for(;oe;){const De=oe.shadowRoot;if(De){const ze=De.getElementById(U)||De.querySelector(`[name="${U}"]`);if(ze)return ze}oe=K.nextNode()}}return null}(this.document,U);k&&(this.scrollToElement(k),k.focus())}setHistoryScrollRestoration(U){if(this.supportScrollRestoration()){const k=this.window.history;k&&k.scrollRestoration&&(k.scrollRestoration=U)}}scrollToElement(U){const k=U.getBoundingClientRect(),K=k.left+this.window.pageXOffset,oe=k.top+this.window.pageYOffset,De=this.offset();this.window.scrollTo(K-De[0],oe-De[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const U=xs(this.window.history)||xs(Object.getPrototypeOf(this.window.history));return!(!U||!U.writable&&!U.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function xs(P){return Object.getOwnPropertyDescriptor(P,"scrollRestoration")}class co{}},1571:(an,Qe,ee)=>{ee.d(Qe,{tb:()=>gh,AFp:()=>aT,ip1:()=>oT,CZH:()=>sv,hGG:()=>gt,z2F:()=>tg,sBO:()=>RT,Sil:()=>mx,_Vd:()=>Lu,EJc:()=>fx,Xts:()=>jd,SBq:()=>Bu,lqb:()=>hc,qLn:()=>zd,vpe:()=>Oc,XFs:()=>on,OlP:()=>ki,zs3:()=>iu,ZZ4:()=>Le,aQg:()=>Me,soG:()=>ov,YKP:()=>cb,h0i:()=>ep,PXZ:()=>Sx,R0b:()=>Ka,FiY:()=>bl,Lbi:()=>ux,g9A:()=>cT,Qsj:()=>im,FYo:()=>sf,JOm:()=>va,tp0:()=>ic,Rgc:()=>Xm,dDg:()=>xx,eoX:()=>_T,GfV:()=>af,s_b:()=>tv,ifc:()=>re,LMc:()=>Zn,MMx:()=>Ey,Lck:()=>mM,eFA:()=>cv,Gpc:()=>xt,f3M:()=>Wr,$WT:()=>br,_c5:()=>Dt,c2e:()=>dx,zSh:()=>$n,wAp:()=>gn,vHH:()=>Ne,lri:()=>mT,rWj:()=>gT,D6c:()=>We,cg1:()=>Hm,kL8:()=>Pc,dqk:()=>ui,Z0I:()=>io,eJc:()=>ky,CqO:()=>hs,QGY:()=>kf,F4k:()=>Ol,RDi:()=>Sv,AaK:()=>nt,zW0:()=>s,qOj:()=>nd,TTD:()=>dl,_Bn:()=>lb,jDz:()=>hb,xp6:()=>am,uIk:()=>Jn,Tol:()=>ry,MT6:()=>y0,ekj:()=>O_,Suo:()=>Lb,Xpm:()=>Gl,lG2:()=>ks,Yz7:()=>cn,cJS:()=>Qn,oAB:()=>Ms,Yjl:()=>ea,Y36:()=>vc,_UZ:()=>ah,BQk:()=>rd,ynx:()=>lh,qZA:()=>oh,TgZ:()=>fu,EpF:()=>Fm,n5z:()=>Ln,Ikx:()=>dy,SDv:()=>X_,QtT:()=>Jm,pQV:()=>bu,LFG:()=>Ri,$8M:()=>Ql,$Z:()=>pm,NdJ:()=>Da,CRH:()=>Bb,oxw:()=>Vf,ALo:()=>Cb,lcZ:()=>Eb,Hsn:()=>Kv,F$t:()=>Uf,Q6J:()=>qa,s9C:()=>Lm,MGl:()=>Bm,DdM:()=>yb,VKq:()=>bb,WLB:()=>Tb,kEZ:()=>Mb,iGM:()=>Nb,MAs:()=>Cc,KtG:()=>Pa,CHM:()=>Ds,P3R:()=>Pu,Udp:()=>P_,YNc:()=>Zo,W1O:()=>Vb,_uU:()=>B_,Oqu:()=>Ac,hij:()=>$f,Gf:()=>Fb});var c=ee(7579),W=ee(727),be=ee(9751),Oe=ee(6451),Se=ee(8421),tt=ee(930),ft=ee(4482);function ht(n,r,...o){if(!0===r)return void n();if(!1===r)return;const u=new tt.Hp({next:()=>{u.unsubscribe(),n()}});return(0,Se.Xf)(r(...o)).subscribe(u)}function Ve(n){for(let r in n)if(n[r]===Ve)return r;throw Error("Could not find renamed property on target object.")}function He(n,r){for(const o in r)r.hasOwnProperty(o)&&!n.hasOwnProperty(o)&&(n[o]=r[o])}function nt(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(nt).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const r=n.toString();if(null==r)return""+r;const o=r.indexOf("\n");return-1===o?r:r.substring(0,o)}function rn(n,r){return null==n||""===n?null===r?"":r:null==r||""===r?n:n+" "+r}const rt=Ve({__forward_ref__:Ve});function xt(n){return n.__forward_ref__=xt,n.toString=function(){return nt(this())},n}function mt(n){return en(n)?n():n}function en(n){return"function"==typeof n&&n.hasOwnProperty(rt)&&n.__forward_ref__===xt}function Kt(n){return n&&!!n.\u0275providers}const vi="https://g.co/ng/security#xss";class Ne extends Error{constructor(r,o){super(dt(r,o)),this.code=r}}function dt(n,r){return`NG0${Math.abs(n)}${r?": "+r.trim():""}`}function je(n){return"string"==typeof n?n:null==n?"":String(n)}function Ht(n,r){throw new Ne(-201,!1)}function zt(n,r,o,u){throw new Error(`ASSERTION ERROR: ${n}`+(null==u?"":` [Expected=> ${o} ${u} ${r} <=Actual]`))}function cn(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Qn(n){return{providers:n.providers||[],imports:n.imports||[]}}function Ar(n){return Ir(n,Ro)||Ir(n,ns)}function io(n){return null!==Ar(n)}function Ir(n,r){return n.hasOwnProperty(r)?n[r]:null}function ro(n){return n&&(n.hasOwnProperty(Ui)||n.hasOwnProperty(Qo))?n[Ui]:null}const Ro=Ve({\u0275prov:Ve}),Ui=Ve({\u0275inj:Ve}),ns=Ve({ngInjectableDef:Ve}),Qo=Ve({ngInjectorDef:Ve});var on=(()=>((on=on||{})[on.Default=0]="Default",on[on.Host=1]="Host",on[on.Self=2]="Self",on[on.SkipSelf=4]="SkipSelf",on[on.Optional=8]="Optional",on))();let zr;function jt(n){const r=zr;return zr=n,r}function Je(n,r,o){const u=Ar(n);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:o&on.Optional?null:void 0!==r?r:void Ht(nt(n))}const ui=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),un={},Rn="__NG_DI_FLAG__",js="ngTempTokenPath",zn="ngTokenPath",Ki=/\n/gm,bs="\u0275",el="__source";let dr;function Ts(n){const r=dr;return dr=n,r}function tr(n,r=on.Default){if(void 0===dr)throw new Ne(-203,!1);return null===dr?Je(n,void 0,r):dr.get(n,r&on.Optional?null:void 0,r)}function Ri(n,r=on.Default){return(function ri(){return zr}()||tr)(mt(n),r)}function Wr(n,r=on.Default){return Ri(n,Co(r))}function Co(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function $r(n){const r=[];for(let o=0;o<n.length;o++){const u=mt(n[o]);if(Array.isArray(u)){if(0===u.length)throw new Ne(900,!1);let m,v=on.Default;for(let x=0;x<u.length;x++){const C=u[x],O=so(C);"number"==typeof O?-1===O?m=C.token:v|=O:m=C}r.push(Ri(m,v))}else r.push(Ri(u))}return r}function Pr(n,r){return n[Rn]=r,n.prototype[Rn]=r,n}function so(n){return n[Rn]}function xe(n){return{toString:n}.toString()}var pe=(()=>((pe=pe||{})[pe.OnPush=0]="OnPush",pe[pe.Default=1]="Default",pe))(),re=(()=>{return(n=re||(re={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",re;var n})();const Te={},Ae=[],Nt=Ve({\u0275cmp:Ve}),hn=Ve({\u0275dir:Ve}),Yn=Ve({\u0275pipe:Ve}),Bi=Ve({\u0275mod:Ve}),rs=Ve({\u0275fac:Ve}),hr=Ve({__NG_ELEMENT_ID__:Ve});let nl=0;function Gl(n){return xe(()=>{const r=Nc(n),o={...r,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===pe.OnPush,directiveDefs:null,pipeDefs:null,dependencies:r.standalone&&n.dependencies||null,getStandaloneInjector:null,data:n.data||{},encapsulation:n.encapsulation||re.Emulated,id:"c"+nl++,styles:n.styles||Ae,_:null,schemas:n.schemas||null,tView:null};rl(o);const u=n.dependencies;return o.directiveDefs=gs(u,!1),o.pipeDefs=gs(u,!0),o})}function oo(n){return qn(n)||Hi(n)}function il(n){return null!==n}function Ms(n){return xe(()=>({type:n.type,bootstrap:n.bootstrap||Ae,declarations:n.declarations||Ae,imports:n.imports||Ae,exports:n.exports||Ae,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function ss(n,r){if(null==n)return Te;const o={};for(const u in n)if(n.hasOwnProperty(u)){let m=n[u],v=m;Array.isArray(m)&&(v=m[1],m=m[0]),o[m]=u,r&&(r[m]=v)}return o}function ks(n){return xe(()=>{const r=Nc(n);return rl(r),r})}function ea(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function qn(n){return n[Nt]||null}function Hi(n){return n[hn]||null}function si(n){return n[Yn]||null}function br(n){const r=qn(n)||Hi(n)||si(n);return null!==r&&r.standalone}function fr(n,r){const o=n[Bi]||null;if(!o&&!0===r)throw new Error(`Type ${nt(n)} does not have '\u0275mod' property.`);return o}function Nc(n){const r={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:r,exportAs:n.exportAs||null,standalone:!0===n.standalone,selectors:n.selectors||Ae,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:ss(n.inputs,r),outputs:ss(n.outputs)}}function rl(n){n.features?.forEach(r=>r(n))}function gs(n,r){if(!n)return null;const o=r?si:oo;return()=>("function"==typeof n?n():n).map(u=>o(u)).filter(il)}const _s=0,It=1,mn=2,Ci=3,Or=4,Yr=5,Ei=6,Gs=7,oi=8,Vs=9,ta=10,Mn=11,Mu=12,Us=13,na=14,ao=15,zi=16,Hs=17,Xi=18,Tr=19,zs=20,ia=21,di=22,Ws=1,hi=2,sl=7,Ao=8,qr=9,pr=10;function bi(n){return Array.isArray(n)&&"object"==typeof n[Ws]}function Wi(n){return Array.isArray(n)&&!0===n[Ws]}function ra(n){return 0!=(4&n.flags)}function lo(n){return n.componentOffset>-1}function Vl(n){return 1==(1&n.flags)}function Gr(n){return!!n.template}function Io(n){return 0!=(256&n[mn])}function xs(n,r){return n.hasOwnProperty(rs)?n[rs]:null}class ul{constructor(r,o,u){this.previousValue=r,this.currentValue=o,this.firstChange=u}isFirstChange(){return this.firstChange}}function dl(){return co}function co(n){return n.type.prototype.ngOnChanges&&(n.setInput=Oo),Mr}function Mr(){const n=sa(this),r=n?.current;if(r){const o=n.previous;if(o===Te)n.previous=r;else for(let u in r)o[u]=r[u];n.current=null,this.ngOnChanges(r)}}function Oo(n,r,o,u){const m=this.declaredInputs[o],v=sa(n)||function Jr(n,r){return n[uo]=r}(n,{previous:Te,current:null}),x=v.current||(v.current={}),C=v.previous,O=C[m];x[m]=new ul(O&&O.currentValue,r,C===Te),n[u]=r}dl.ngInherit=!0;const uo="__ngSimpleChanges__";function sa(n){return n[uo]||null}const os=function(n,r,o){};function gi(n){for(;Array.isArray(n);)n=n[_s];return n}function Fo(n,r){return gi(r[n])}function Zr(n,r){return gi(r[n.index])}function $l(n,r){return n.data[r]}function $s(n,r){return n[r]}function Nr(n,r){const o=r[n];return bi(o)?o:o[_s]}function Ys(n){return 64==(64&n[mn])}function fo(n,r){return null==r?null:n[r]}function hl(n){n[Xi]=0}function Lo(n,r){n[Yr]+=r;let o=n,u=n[Ci];for(;null!==u&&(1===r&&1===o[Yr]||-1===r&&0===o[Yr]);)u[Yr]+=r,o=u,u=u[Ci]}const nn={lFrame:Rs(null),bindingsEnabled:!0};function Yl(){return nn.bindingsEnabled}function Ke(){return nn.lFrame.lView}function _n(){return nn.lFrame.tView}function Ds(n){return nn.lFrame.contextLView=n,n[oi]}function Pa(n){return nn.lFrame.contextLView=null,n}function Xn(){let n=Gc();for(;null!==n&&64===n.type;)n=n.parent;return n}function Gc(){return nn.lFrame.currentTNode}function Ai(){const n=nn.lFrame,r=n.currentTNode;return n.isParent?r:r.parent}function nr(n,r){const o=nn.lFrame;o.currentTNode=n,o.isParent=r}function jo(){return nn.lFrame.isParent}function ko(){nn.lFrame.isParent=!1}function ur(){const n=nn.lFrame;let r=n.bindingRootIndex;return-1===r&&(r=n.bindingRootIndex=n.tView.bindingStartIndex),r}function mr(){return nn.lFrame.bindingIndex}function qs(){return nn.lFrame.bindingIndex++}function or(n){const r=nn.lFrame,o=r.bindingIndex;return r.bindingIndex=r.bindingIndex+n,o}function po(n){nn.lFrame.inI18n=n}function mo(n,r){const o=nn.lFrame;o.bindingIndex=o.bindingRootIndex=n,Vo(r)}function Vo(n){nn.lFrame.currentDirectiveIndex=n}function Uc(){return nn.lFrame.currentQueryIndex}function gr(n){nn.lFrame.currentQueryIndex=n}function ie(n){const r=n[It];return 2===r.type?r.declTNode:1===r.type?n[Ei]:null}function aa(n,r,o){if(o&on.SkipSelf){let m=r,v=n;for(;!(m=m.parent,null!==m||o&on.Host||(m=ie(v),null===m||(v=v[ao],10&m.type))););if(null===m)return!1;r=m,n=v}const u=nn.lFrame=_o();return u.currentTNode=r,u.lView=n,!0}function go(n){const r=_o(),o=n[It];nn.lFrame=r,r.currentTNode=o.firstChild,r.lView=n,r.tView=o,r.contextLView=n,r.bindingIndex=o.bindingStartIndex,r.inI18n=!1}function _o(){const n=nn.lFrame,r=null===n?null:n.child;return null===r?Rs(n):r}function Rs(n){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=r),r}function vo(){const n=nn.lFrame;return nn.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Oa=vo;function Uo(){const n=vo();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function $i(){return nn.lFrame.selectedIndex}function as(n){nn.lFrame.selectedIndex=n}function _i(){const n=nn.lFrame;return $l(n.tView,n.selectedIndex)}function k(n,r){for(let o=r.directiveStart,u=r.directiveEnd;o<u;o++){const v=n.data[o].type.prototype,{ngAfterContentInit:x,ngAfterContentChecked:C,ngAfterViewInit:O,ngAfterViewChecked:A,ngOnDestroy:N}=v;x&&(n.contentHooks??(n.contentHooks=[])).push(-o,x),C&&((n.contentHooks??(n.contentHooks=[])).push(o,C),(n.contentCheckHooks??(n.contentCheckHooks=[])).push(o,C)),O&&(n.viewHooks??(n.viewHooks=[])).push(-o,O),A&&((n.viewHooks??(n.viewHooks=[])).push(o,A),(n.viewCheckHooks??(n.viewCheckHooks=[])).push(o,A)),null!=N&&(n.destroyHooks??(n.destroyHooks=[])).push(o,N)}}function K(n,r,o){ze(n,r,3,o)}function oe(n,r,o,u){(3&n[mn])===o&&ze(n,r,o,u)}function De(n,r){let o=n[mn];(3&o)===r&&(o&=2047,o+=1,n[mn]=o)}function ze(n,r,o,u){const v=u??-1,x=r.length-1;let C=0;for(let O=void 0!==u?65535&n[Xi]:0;O<x;O++)if("number"==typeof r[O+1]){if(C=r[O],null!=u&&C>=u)break}else r[O]<0&&(n[Xi]+=65536),(C<v||-1==v)&&(Wt(n,o,r,O),n[Xi]=(4294901760&n[Xi])+O+2),O++}function Wt(n,r,o,u){const m=o[u]<0,v=o[u+1],C=n[m?-o[u]:o[u]];if(m){if(n[mn]>>11<n[Xi]>>16&&(3&n[mn])===r){n[mn]+=2048,os(4,C,v);try{v.call(C)}finally{os(5,C,v)}}}else{os(4,C,v);try{v.call(C)}finally{os(5,C,v)}}}const bn=-1;class Sn{constructor(r,o,u){this.factory=r,this.resolving=!1,this.canSeeViewProviders=o,this.injectImpl=u}}function Qi(n,r,o){let u=0;for(;u<o.length;){const m=o[u];if("number"==typeof m){if(0!==m)break;u++;const v=o[u++],x=o[u++],C=o[u++];n.setAttribute(r,x,C,v)}else{const v=m,x=o[++u];ji(v)?n.setProperty(r,v,x):n.setAttribute(r,v,x),u++}}return u}function Vr(n){return 3===n||4===n||6===n}function ji(n){return 64===n.charCodeAt(0)}function Cs(n,r){if(null!==r&&0!==r.length)if(null===n||0===n.length)n=r.slice();else{let o=-1;for(let u=0;u<r.length;u++){const m=r[u];"number"==typeof m?o=m:0===o||Kl(n,o,m,null,-1===o||2===o?r[++u]:null)}}return n}function Kl(n,r,o,u,m){let v=0,x=n.length;if(-1===r)x=-1;else for(;v<n.length;){const C=n[v++];if("number"==typeof C){if(C===r){x=-1;break}if(C>r){x=v-1;break}}}for(;v<n.length;){const C=n[v];if("number"==typeof C)break;if(C===o){if(null===u)return void(null!==m&&(n[v+1]=m));if(u===n[v+1])return void(n[v+2]=m)}v++,null!==u&&v++,null!==m&&v++}-1!==x&&(n.splice(x,0,r),v=x+1),n.splice(v++,0,o),null!==u&&n.splice(v++,0,u),null!==m&&n.splice(v++,0,m)}function Fa(n){return n!==bn}function fl(n){return 32767&n}function pl(n,r){let o=function Td(n){return n>>16}(n),u=r;for(;o>0;)u=u[ao],o--;return u}let ua=!0;function Es(n){const r=ua;return ua=n,r}const gl=255,Md=5;let wu=0;const Js={};function Xl(n,r){const o=Pi(n,r);if(-1!==o)return o;const u=r[It];u.firstCreatePass&&(n.injectorIndex=r.length,Ru(u.data,n),Ru(r,null),Ru(u.blueprint,null));const m=ir(n,r),v=n.injectorIndex;if(Fa(m)){const x=fl(m),C=pl(m,r),O=C[It].data;for(let A=0;A<8;A++)r[v+A]=C[x+A]|O[x+A]}return r[v+8]=m,v}function Ru(n,r){n.push(0,0,0,0,0,0,0,0,r)}function Pi(n,r){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===r[n.injectorIndex+8]?-1:n.injectorIndex}function ir(n,r){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let o=0,u=null,m=r;for(;null!==m;){if(u=Mh(m),null===u)return bn;if(o++,m=m[ao],-1!==u.injectorIndex)return u.injectorIndex|o<<16}return bn}function Ni(n,r,o){!function xd(n,r,o){let u;"string"==typeof o?u=o.charCodeAt(0)||0:o.hasOwnProperty(hr)&&(u=o[hr]),null==u&&(u=o[hr]=wu++);const m=u&gl;r.data[n+(m>>Md)]|=1<<m}(n,r,o)}function Ks(n,r,o){if(o&on.Optional||void 0!==n)return n;Ht()}function Fr(n,r,o,u){if(o&on.Optional&&void 0===u&&(u=null),!(o&(on.Self|on.Host))){const m=n[Vs],v=jt(void 0);try{return m?m.get(r,u,o&on.Optional):Je(r,u,o&on.Optional)}finally{jt(v)}}return Ks(u,0,o)}function Ho(n,r,o,u=on.Default,m){if(null!==n){if(1024&r[mn]){const x=function rr(n,r,o,u,m){let v=n,x=r;for(;null!==v&&null!==x&&1024&x[mn]&&!(256&x[mn]);){const C=Xs(v,x,o,u|on.Self,Js);if(C!==Js)return C;let O=v.parent;if(!O){const A=x[ia];if(A){const N=A.get(o,Js,u);if(N!==Js)return N}O=Mh(x),x=x[ao]}v=O}return m}(n,r,o,u,Js);if(x!==Js)return x}const v=Xs(n,r,o,u,Js);if(v!==Js)return v}return Fr(r,o,u,m)}function Xs(n,r,o,u,m){const v=function Lr(n){if("string"==typeof n)return n.charCodeAt(0)||0;const r=n.hasOwnProperty(hr)?n[hr]:void 0;return"number"==typeof r?r>=0?r&gl:da:r}(o);if("function"==typeof v){if(!aa(r,n,u))return u&on.Host?Ks(m,0,u):Fr(r,o,u,m);try{const x=v(u);if(null!=x||u&on.Optional)return x;Ht()}finally{Oa()}}else if("number"==typeof v){let x=null,C=Pi(n,r),O=bn,A=u&on.Host?r[zi][Ei]:null;for((-1===C||u&on.SkipSelf)&&(O=-1===C?ir(n,r):r[C+8],O!==bn&&La(u,!1)?(x=r[It],C=fl(O),r=pl(O,r)):C=-1);-1!==C;){const N=r[It];if(ls(v,C,N.data)){const $=zc(C,r,o,x,u,A);if($!==Js)return $}O=r[C+8],O!==bn&&La(u,r[It].data[C+8]===A)&&ls(v,C,r)?(x=N,C=fl(O),r=pl(O,r)):C=-1}}return m}function zc(n,r,o,u,m,v){const x=r[It],C=x.data[n+8],N=zo(C,x,o,null==u?lo(C)&&ua:u!=x&&0!=(3&C.type),m&on.Host&&v===C);return null!==N?Kr(r,x,N,C):Js}function zo(n,r,o,u,m){const v=n.providerIndexes,x=r.data,C=1048575&v,O=n.directiveStart,N=v>>20,te=m?C+N:n.directiveEnd;for(let ce=u?C:C+N;ce<te;ce++){const ge=x[ce];if(ce<O&&o===ge||ce>=O&&ge.type===o)return ce}if(m){const ce=x[O];if(ce&&Gr(ce)&&ce.type===o)return O}return null}function Kr(n,r,o,u){let m=n[o];const v=r.data;if(function xn(n){return n instanceof Sn}(m)){const x=m;x.resolving&&function Ut(n,r){const o=r?`. Dependency path: ${r.join(" > ")} > ${n}`:"";throw new Ne(-200,`Circular dependency in DI detected for ${n}${o}`)}(function Ot(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():je(n)}(v[o]));const C=Es(x.canSeeViewProviders);x.resolving=!0;const O=x.injectImpl?jt(x.injectImpl):null;aa(n,u,on.Default);try{m=n[o]=x.factory(void 0,v,n,u),r.firstCreatePass&&o>=u.directiveStart&&function U(n,r,o){const{ngOnChanges:u,ngOnInit:m,ngDoCheck:v}=r.type.prototype;if(u){const x=co(r);(o.preOrderHooks??(o.preOrderHooks=[])).push(n,x),(o.preOrderCheckHooks??(o.preOrderCheckHooks=[])).push(n,x)}m&&(o.preOrderHooks??(o.preOrderHooks=[])).push(0-n,m),v&&((o.preOrderHooks??(o.preOrderHooks=[])).push(n,v),(o.preOrderCheckHooks??(o.preOrderCheckHooks=[])).push(n,v))}(o,v[o],r)}finally{null!==O&&jt(O),Es(C),x.resolving=!1,Oa()}}return m}function ls(n,r,o){return!!(o[r+(n>>Md)]&1<<n)}function La(n,r){return!(n&on.Self||n&on.Host&&r)}class _r{constructor(r,o){this._tNode=r,this._lView=o}get(r,o,u){return Ho(this._tNode,this._lView,r,Co(u),o)}}function da(){return new _r(Xn(),Ke())}function Ln(n){return xe(()=>{const r=n.prototype.constructor,o=r[rs]||Qs(r),u=Object.prototype;let m=Object.getPrototypeOf(n.prototype).constructor;for(;m&&m!==u;){const v=m[rs]||Qs(m);if(v&&v!==o)return v;m=Object.getPrototypeOf(m)}return v=>new v})}function Qs(n){return en(n)?()=>{const r=Qs(mt(n));return r&&r()}:xs(n)}function Mh(n){const r=n[It],o=r.type;return 2===o?r.declTNode:1===o?n[Ei]:null}function Ql(n){return function Zs(n,r){if("class"===r)return n.classes;if("style"===r)return n.styles;const o=n.attrs;if(o){const u=o.length;let m=0;for(;m<u;){const v=o[m];if(Vr(v))break;if(0===v)m+=2;else if("number"==typeof v)for(m++;m<u&&"string"==typeof o[m];)m++;else{if(v===r)return o[m+1];m+=2}}}return null}(Xn(),n)}const Ba="__parameters__";function ja(n,r,o){return xe(()=>{const u=function tc(n){return function(...o){if(n){const u=n(...o);for(const m in u)this[m]=u[m]}}}(r);function m(...v){if(this instanceof m)return u.apply(this,v),this;const x=new m(...v);return C.annotation=x,C;function C(O,A,N){const $=O.hasOwnProperty(Ba)?O[Ba]:Object.defineProperty(O,Ba,{value:[]})[Ba];for(;$.length<=N;)$.push(null);return($[N]=$[N]||[]).push(x),O}}return o&&(m.prototype=Object.create(o.prototype)),m.prototype.ngMetadataName=n,m.annotationCls=m,m})}class ki{constructor(r,o){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof o?this.__NG_ELEMENT_ID__=o:void 0!==o&&(this.\u0275prov=cn({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function to(n,r){n.forEach(o=>Array.isArray(o)?to(o,r):r(o))}function D(n,r,o){r>=n.length?n.push(o):n.splice(r,0,o)}function R(n,r){return r>=n.length-1?n.pop():n.splice(r,1)[0]}function T(n,r){const o=[];for(let u=0;u<n;u++)o.push(r);return o}function fe(n,r,o){let u=vt(n,r);return u>=0?n[1|u]=o:(u=~u,function q(n,r,o,u){let m=n.length;if(m==r)n.push(o,u);else if(1===m)n.push(u,n[0]),n[0]=o;else{for(m--,n.push(n[m-1],n[m]);m>r;)n[m]=n[m-2],m--;n[r]=o,n[r+1]=u}}(n,u,r,o)),u}function Ge(n,r){const o=vt(n,r);if(o>=0)return n[1|o]}function vt(n,r){return function Un(n,r,o){let u=0,m=n.length>>o;for(;m!==u;){const v=u+(m-u>>1),x=n[v<<o];if(r===x)return v<<o;x>r?m=v:u=v+1}return~(m<<o)}(n,r,1)}const bl=Pr(ja("Optional"),8),ic=Pr(ja("SkipSelf"),4);var va=(()=>((va=va||{})[va.Important=1]="Important",va[va.DashCase=2]="DashCase",va))();const fg=/^>|^->|<!--|-->|--!>|<!-$/g,pg=/(<|>)/,mg="\u200b$1\u200b";const Ch=new Map;let gg=0;const Ah="__ngContext__";function us(n,r){bi(r)?(n[Ah]=r[zs],function vg(n){Ch.set(n[zs],n)}(r)):n[Ah]=r}let Ih;function Ph(n,r){return Ih(n,r)}function Eu(n){const r=n[Ci];return Wi(r)?r[Ci]:r}function Oh(n){return Sp(n[Us])}function Nh(n){return Sp(n[Or])}function Sp(n){for(;null!==n&&!Wi(n);)n=n[Or];return n}function Yc(n,r,o,u,m){if(null!=u){let v,x=!1;Wi(u)?v=u:bi(u)&&(x=!0,u=u[_s]);const C=gi(u);0===n&&null!==o?null==m?Pp(r,o,C):sc(r,o,C,m||null,!0):1===n&&null!==o?sc(r,o,C,m||null,!0):2===n?Vh(r,C,x):3===n&&r.destroyNode(C),null!=v&&function wv(n,r,o,u,m){const v=o[sl];v!==gi(o)&&Yc(r,n,u,v,m);for(let C=pr;C<o.length;C++){const O=o[C];Id(O[It],O,n,r,u,v)}}(r,n,v,o,m)}}function Fh(n,r){return n.createText(r)}function Sd(n,r,o){n.setValue(r,o)}function Eg(n,r){return n.createComment(function yp(n){return n.replace(fg,r=>r.replace(pg,mg))}(r))}function Lh(n,r,o){return n.createElement(r,o)}function Cp(n,r){const o=n[qr],u=o.indexOf(r),m=r[Ci];512&r[mn]&&(r[mn]&=-513,Lo(m,-1)),o.splice(u,1)}function Bh(n,r){if(n.length<=pr)return;const o=pr+r,u=n[o];if(u){const m=u[Hs];null!==m&&m!==n&&Cp(m,u),r>0&&(n[o-1][Or]=u[Or]);const v=R(n,pr+r);!function Ag(n,r){Id(n,r,r[Mn],2,null,null),r[_s]=null,r[Ei]=null}(u[It],u);const x=v[Tr];null!==x&&x.detachView(v[It]),u[Ci]=null,u[Or]=null,u[mn]&=-65}return u}function Ep(n,r){if(!(128&r[mn])){const o=r[Mn];o.destroyNode&&Id(n,r,o,3,null,null),function Og(n){let r=n[Us];if(!r)return jh(n[It],n);for(;r;){let o=null;if(bi(r))o=r[Us];else{const u=r[pr];u&&(o=u)}if(!o){for(;r&&!r[Or]&&r!==n;)bi(r)&&jh(r[It],r),r=r[Ci];null===r&&(r=n),bi(r)&&jh(r[It],r),o=r&&r[Or]}r=o}}(r)}}function jh(n,r){if(!(128&r[mn])){r[mn]&=-65,r[mn]|=128,function Lg(n,r){let o;if(null!=n&&null!=(o=n.destroyHooks))for(let u=0;u<o.length;u+=2){const m=r[o[u]];if(!(m instanceof Sn)){const v=o[u+1];if(Array.isArray(v))for(let x=0;x<v.length;x+=2){const C=m[v[x]],O=v[x+1];os(4,C,O);try{O.call(C)}finally{os(5,C,O)}}else{os(4,m,v);try{v.call(m)}finally{os(5,m,v)}}}}}(n,r),function xv(n,r){const o=n.cleanup,u=r[Gs];let m=-1;if(null!==o)for(let v=0;v<o.length-1;v+=2)if("string"==typeof o[v]){const x=o[v+3];x>=0?u[m=x]():u[m=-x].unsubscribe(),v+=2}else{const x=u[m=o[v+1]];o[v].call(x)}if(null!==u){for(let v=m+1;v<u.length;v++)(0,u[v])();r[Gs]=null}}(n,r),1===r[It].type&&r[Mn].destroy();const o=r[Hs];if(null!==o&&Wi(r[Ci])){o!==r[Ci]&&Cp(o,r);const u=r[Tr];null!==u&&u.detachView(n)}!function yg(n){Ch.delete(n[zs])}(r)}}function Ap(n,r,o){return Ip(n,r.parent,o)}function Ip(n,r,o){let u=r;for(;null!==u&&40&u.type;)u=(r=u).parent;if(null===u)return o[_s];{const{componentOffset:m}=u;if(m>-1){const{encapsulation:v}=n.data[u.directiveStart+m];if(v===re.None||v===re.Emulated)return null}return Zr(u,o)}}function sc(n,r,o,u,m){n.insertBefore(r,o,u,m)}function Pp(n,r,o){n.appendChild(r,o)}function Op(n,r,o,u,m){null!==u?sc(n,r,o,u,m):Pp(n,r,o)}function Cd(n,r){return n.parentNode(r)}function Np(n,r,o){return Lp(n,r,o)}function Fp(n,r,o){return 40&n.type?Zr(n,o):null}let kh,Tl,Hh,zh,Lp=Fp;function Bp(n,r){Lp=n,kh=r}function Ed(n,r,o,u){const m=Ap(n,u,r),v=r[Mn],C=Np(u.parent||r[Ei],u,r);if(null!=m)if(Array.isArray(o))for(let O=0;O<o.length;O++)Op(v,m,o[O],C,!1);else Op(v,m,o,C,!1);void 0!==kh&&kh(v,u,r,o,m)}function Ad(n,r){if(null!==r){const o=r.type;if(3&o)return Zr(r,n);if(4&o)return Gh(-1,n[r.index]);if(8&o){const u=r.child;if(null!==u)return Ad(n,u);{const m=n[r.index];return Wi(m)?Gh(-1,m):gi(m)}}if(32&o)return Ph(r,n)()||gi(n[r.index]);{const u=jp(n,r);return null!==u?Array.isArray(u)?u[0]:Ad(Eu(n[zi]),u):Ad(n,r.next)}}return null}function jp(n,r){return null!==r?n[zi][Ei].projection[r.projection]:null}function Gh(n,r){const o=pr+n+1;if(o<r.length){const u=r[o],m=u[It].firstChild;if(null!==m)return Ad(u,m)}return r[sl]}function Vh(n,r,o){const u=Cd(n,r);u&&function Bg(n,r,o,u){n.removeChild(r,o,u)}(n,u,r,o)}function Uh(n,r,o,u,m,v,x){for(;null!=o;){const C=u[o.index],O=o.type;if(x&&0===r&&(C&&us(gi(C),u),o.flags|=2),32!=(32&o.flags))if(8&O)Uh(n,r,o.child,u,m,v,!1),Yc(r,n,m,C,v);else if(32&O){const A=Ph(o,u);let N;for(;N=A();)Yc(r,n,m,N,v);Yc(r,n,m,C,v)}else 16&O?kg(n,r,u,o,m,v):Yc(r,n,m,C,v);o=x?o.projectionNext:o.next}}function Id(n,r,o,u,m,v){Uh(o,u,n.firstChild,r,m,v,!1)}function kg(n,r,o,u,m,v){const x=o[zi],O=x[Ei].projection[u.projection];if(Array.isArray(O))for(let A=0;A<O.length;A++)Yc(r,n,m,O[A],v);else Uh(n,r,O,x[Ci],m,v,!0)}function kp(n,r,o){""===o?n.removeAttribute(r,"class"):n.setAttribute(r,"class",o)}function Pd(n,r,o){const{mergedAttrs:u,classes:m,styles:v}=o;null!==u&&Qi(n,r,u),null!==m&&kp(n,r,m),null!==v&&function ds(n,r,o){n.setAttribute(r,"style",o)}(n,r,v)}function Gi(n){return function ar(){if(void 0===Tl&&(Tl=null,ui.trustedTypes))try{Tl=ui.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Tl}()?.createHTML(n)||n}function Sv(n){Hh=n}function Ug(n){return function Wh(){if(void 0===zh&&(zh=null,ui.trustedTypes))try{zh=ui.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return zh}()?.createScriptURL(n)||n}class Hg{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${vi})`}}function no(n){return n instanceof Hg?n.changingThisBreaksApplicationSecurity:n}function Au(n,r){const o=function Av(n){return n instanceof Hg&&n.getTypeName()||null}(n);if(null!=o&&o!==r){if("ResourceURL"===o&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${o} (see ${vi})`)}return o===r}class $h{constructor(r){this.inertDocumentHelper=r}getInertBodyElement(r){r="<body><remove></remove>"+r;try{const o=(new window.DOMParser).parseFromString(Gi(r),"text/html").body;return null===o?this.inertDocumentHelper.getInertBodyElement(r):(o.removeChild(o.firstChild),o)}catch{return null}}}class Wg{constructor(r){this.defaultDoc=r,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(r){const o=this.inertDocument.createElement("template");return o.innerHTML=Gi(r),o}}const $g=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Fd(n){return(n=String(n)).match($g)?n:"unsafe:"+n}function ya(n){const r={};for(const o of n.split(","))r[o]=!0;return r}function Ml(...n){const r={};for(const o of n)for(const u in o)o.hasOwnProperty(u)&&(r[u]=!0);return r}const oc=ya("area,br,col,hr,img,wbr"),Yh=ya("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Ps=ya("rp,rt"),Va=Ml(oc,Ml(Yh,ya("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Ml(Ps,ya("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Ml(Ps,Yh)),xl=ya("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Ua=Ml(xl,ya("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ya("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"));var Yi=(()=>((Yi=Yi||{})[Yi.NONE=0]="NONE",Yi[Yi.HTML=1]="HTML",Yi[Yi.STYLE=2]="STYLE",Yi[Yi.SCRIPT=3]="SCRIPT",Yi[Yi.URL=4]="URL",Yi[Yi.RESOURCE_URL=5]="RESOURCE_URL",Yi))();function wr(n){const r=Xc();return r?r.sanitize(Yi.URL,n)||"":Au(n,"URL")?no(n):Fd(je(n))}function ac(n){const r=Xc();if(r)return Ug(r.sanitize(Yi.RESOURCE_URL,n)||"");if(Au(n,"ResourceURL"))return Ug(no(n));throw new Ne(904,!1)}function Pu(n,r,o){return function Iu(n,r){return"src"===r&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===r&&("base"===n||"link"===n)?ac:wr}(r,o)(n)}function Xc(){const n=Ke();return n&&n[Mu]}const jd=new ki("ENVIRONMENT_INITIALIZER"),Xh=new ki("INJECTOR",-1),lc=new ki("INJECTOR_DEF_TYPES");class Rr{get(r,o=un){if(o===un){const u=new Error(`NullInjectorError: No provider for ${nt(r)}!`);throw u.name="NullInjectorError",u}return o}}function cc(...n){return{\u0275providers:Zp(0,n),\u0275fromNgModule:!0}}function Zp(n,...r){const o=[],u=new Set;let m;return to(r,v=>{const x=v;Qh(x,o,[],u)&&(m||(m=[]),m.push(x))}),void 0!==m&&Ou(m,o),o}function Ou(n,r){for(let o=0;o<n.length;o++){const{providers:m}=n[o];Ha(m,v=>{r.push(v)})}}function Qh(n,r,o,u){if(!(n=mt(n)))return!1;let m=null,v=ro(n);const x=!v&&qn(n);if(v||x){if(x&&!x.standalone)return!1;m=n}else{const O=n.ngModule;if(v=ro(O),!v)return!1;m=O}const C=u.has(m);if(x){if(C)return!1;if(u.add(m),x.dependencies){const O="function"==typeof x.dependencies?x.dependencies():x.dependencies;for(const A of O)Qh(A,r,o,u)}}else{if(!v)return!1;{if(null!=v.imports&&!C){let A;u.add(m);try{to(v.imports,N=>{Qh(N,r,o,u)&&(A||(A=[]),A.push(N))})}finally{}void 0!==A&&Ou(A,r)}if(!C){const A=xs(m)||(()=>new m);r.push({provide:m,useFactory:A,deps:Ae},{provide:lc,useValue:m,multi:!0},{provide:jd,useValue:()=>Ri(m),multi:!0})}const O=v.providers;null==O||C||Ha(O,N=>{r.push(N)})}}return m!==n&&void 0!==n.providers}function Ha(n,r){for(let o of n)Kt(o)&&(o=o.\u0275providers),Array.isArray(o)?Ha(o,r):r(o)}const Xg=Ve({provide:String,useValue:Ve});function Nu(n){return null!==n&&"object"==typeof n&&Xg in n}function dc(n){return"function"==typeof n}const $n=new ki("Set Injector scope."),kd={},ef={};let tf;function Qc(){return void 0===tf&&(tf=new Rr),tf}class hc{}class nf extends hc{get destroyed(){return this._destroyed}constructor(r,o,u,m){super(),this.parent=o,this.source=u,this.scopes=m,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Ud(r,x=>this.processProvider(x)),this.records.set(Xh,eu(void 0,this)),m.has("environment")&&this.records.set(hc,eu(void 0,this));const v=this.records.get($n);null!=v&&"string"==typeof v.value&&this.scopes.add(v.value),this.injectorDefTypes=new Set(this.get(lc.multi,Ae,on.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const r of this._ngOnDestroyHooks)r.ngOnDestroy();for(const r of this._onDestroyHooks)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(r){this._onDestroyHooks.push(r)}runInContext(r){this.assertNotDestroyed();const o=Ts(this),u=jt(void 0);try{return r()}finally{Ts(o),jt(u)}}get(r,o=un,u=on.Default){this.assertNotDestroyed(),u=Co(u);const m=Ts(this),v=jt(void 0);try{if(!(u&on.SkipSelf)){let C=this.records.get(r);if(void 0===C){const O=function Qp(n){return"function"==typeof n||"object"==typeof n&&n instanceof ki}(r)&&Ar(r);C=O&&this.injectableDefInScope(O)?eu(Fu(r),kd):null,this.records.set(r,C)}if(null!=C)return this.hydrate(r,C)}return(u&on.Self?Qc():this.parent).get(r,o=u&on.Optional&&o===un?null:o)}catch(x){if("NullInjectorError"===x.name){if((x[js]=x[js]||[]).unshift(nt(r)),m)throw x;return function tl(n,r,o,u){const m=n[js];throw r[el]&&m.unshift(r[el]),n.message=function kl(n,r,o,u=null){n=n&&"\n"===n.charAt(0)&&n.charAt(1)==bs?n.slice(2):n;let m=nt(r);if(Array.isArray(r))m=r.map(nt).join(" -> ");else if("object"==typeof r){let v=[];for(let x in r)if(r.hasOwnProperty(x)){let C=r[x];v.push(x+":"+("string"==typeof C?JSON.stringify(C):nt(C)))}m=`{${v.join(", ")}}`}return`${o}${u?"("+u+")":""}[${m}]: ${n.replace(Ki,"\n  ")}`}("\n"+n.message,m,o,u),n[zn]=m,n[js]=null,n}(x,r,"R3InjectorError",this.source)}throw x}finally{jt(v),Ts(m)}}resolveInjectorInitializers(){const r=Ts(this),o=jt(void 0);try{const u=this.get(jd.multi,Ae,on.Self);for(const m of u)m()}finally{Ts(r),jt(o)}}toString(){const r=[],o=this.records;for(const u of o.keys())r.push(nt(u));return`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ne(205,!1)}processProvider(r){let o=dc(r=mt(r))?r:mt(r&&r.provide);const u=function Vd(n){return Nu(n)?eu(void 0,n.useValue):eu(rf(n),kd)}(r);if(dc(r)||!0!==r.multi)this.records.get(o);else{let m=this.records.get(o);m||(m=eu(void 0,kd,!0),m.factory=()=>$r(m.multi),this.records.set(o,m)),o=r,m.multi.push(r)}this.records.set(o,u)}hydrate(r,o){return o.value===kd&&(o.value=ef,o.value=o.factory()),"object"==typeof o.value&&o.value&&function Xp(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(o.value)&&this._ngOnDestroyHooks.add(o.value),o.value}injectableDefInScope(r){if(!r.providedIn)return!1;const o=mt(r.providedIn);return"string"==typeof o?"any"===o||this.scopes.has(o):this.injectorDefTypes.has(o)}}function Fu(n){const r=Ar(n),o=null!==r?r.factory:xs(n);if(null!==o)return o;if(n instanceof ki)throw new Ne(204,!1);if(n instanceof Function)return function Gd(n){const r=n.length;if(r>0)throw T(r,"?"),new Ne(204,!1);const o=function Sa(n){const r=n&&(n[Ro]||n[ns]);return r?(function yi(n){if(n.hasOwnProperty("name"))return n.name;(""+n).match(/^function\s*([^\s(]+)/)}(n),r):null}(n);return null!==o?()=>o.factory(n):()=>new n}(n);throw new Ne(204,!1)}function rf(n,r,o){let u;if(dc(n)){const m=mt(n);return xs(m)||Fu(m)}if(Nu(n))u=()=>mt(n.useValue);else if(function Kp(n){return!(!n||!n.useFactory)}(n))u=()=>n.useFactory(...$r(n.deps||[]));else if(function uc(n){return!(!n||!n.useExisting)}(n))u=()=>Ri(mt(n.useExisting));else{const m=mt(n&&(n.useClass||n.provide));if(!function e_(n){return!!n.deps}(n))return xs(m)||Fu(m);u=()=>new m(...$r(n.deps))}return u}function eu(n,r,o=!1){return{factory:n,value:r,multi:o?[]:void 0}}function Ud(n,r){for(const o of n)Array.isArray(o)?Ud(o,r):o&&Kt(o)?Ud(o.\u0275providers,r):r(o)}class em{}class tm{}class n_{resolveComponentFactory(r){throw function t_(n){const r=Error(`No component factory found for ${nt(n)}. Did you add it to @NgModule.entryComponents?`);return r.ngComponent=n,r}(r)}}let Lu=(()=>{class n{}return n.NULL=new n_,n})();function i_(){return tu(Xn(),Ke())}function tu(n,r){return new Bu(Zr(n,r))}let Bu=(()=>{class n{constructor(o){this.nativeElement=o}}return n.__NG_ELEMENT_ID__=i_,n})();function r_(n){return n instanceof Bu?n.nativeElement:n}class sf{}let im=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function rm(){const n=Ke(),o=Nr(Xn().index,n);return(bi(o)?o:n)[Mn]}(),n})(),sm=(()=>{class n{}return n.\u0275prov=cn({token:n,providedIn:"root",factory:()=>null}),n})();class af{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const lf=new af("15.2.7"),ju={},cf="ngOriginalError";function uf(n){return n[cf]}class zd{constructor(){this._console=console}handleError(r){const o=this._findOriginalError(r);this._console.error("ERROR",r),o&&this._console.error("ORIGINAL ERROR",o)}_findOriginalError(r){let o=r&&uf(r);for(;o&&uf(o);)o=uf(o);return o||null}}function To(n){return n instanceof Function?n():n}function om(n,r,o){let u=n.length;for(;;){const m=n.indexOf(r,o);if(-1===m)return m;if(0===m||n.charCodeAt(m-1)<=32){const v=r.length;if(m+v===u||n.charCodeAt(m+v)<=32)return m}o=m+1}}const u_="ng-template";function d_(n,r,o){let u=0,m=!0;for(;u<n.length;){let v=n[u++];if("string"==typeof v&&m){const x=n[u++];if(o&&"class"===v&&-1!==om(x.toLowerCase(),r,0))return!0}else{if(1===v){for(;u<n.length&&"string"==typeof(v=n[u++]);)if(v.toLowerCase()===r)return!0;return!1}"number"==typeof v&&(m=!1)}}return!1}function df(n){return 4===n.type&&n.value!==u_}function Uv(n,r,o){return r===(4!==n.type||o?n.value:u_)}function qo(n,r,o){let u=4;const m=n.attrs||[],v=function h_(n){for(let r=0;r<n.length;r++)if(Vr(n[r]))return r;return n.length}(m);let x=!1;for(let C=0;C<r.length;C++){const O=r[C];if("number"!=typeof O){if(!x)if(4&u){if(u=2|1&u,""!==O&&!Uv(n,O,o)||""===O&&1===r.length){if(ei(u))return!1;x=!0}}else{const A=8&u?O:r[++C];if(8&u&&null!==n.attrs){if(!d_(n.attrs,A,o)){if(ei(u))return!1;x=!0}continue}const $=hf(8&u?"class":O,m,df(n),o);if(-1===$){if(ei(u))return!1;x=!0;continue}if(""!==A){let te;te=$>v?"":m[$+1].toLowerCase();const ce=8&u?te:null;if(ce&&-1!==om(ce,A,0)||2&u&&A!==te){if(ei(u))return!1;x=!0}}}}else{if(!x&&!ei(u)&&!ei(O))return!1;if(x&&ei(O))continue;x=!1,u=O|1&u}}return ei(u)||x}function ei(n){return 0==(1&n)}function hf(n,r,o,u){if(null===r)return-1;let m=0;if(u||!o){let v=!1;for(;m<r.length;){const x=r[m];if(x===n)return m;if(3===x||6===x)v=!0;else{if(1===x||2===x){let C=r[++m];for(;"string"==typeof C;)C=r[++m];continue}if(4===x)break;if(0===x){m+=4;continue}}m+=v?1:2}return-1}return function f_(n,r){let o=n.indexOf(4);if(o>-1)for(o++;o<n.length;){const u=n[o];if("number"==typeof u)return-1;if(u===r)return o;o++}return-1}(r,n)}function ff(n,r,o=!1){for(let u=0;u<r.length;u++)if(qo(n,r[u],o))return!0;return!1}function mf(n,r){e:for(let o=0;o<r.length;o++){const u=r[o];if(n.length===u.length){for(let m=0;m<n.length;m++)if(n[m]!==u[m])continue e;return!0}}return!1}function p_(n,r){return n?":not("+r.trim()+")":r}function Gu(n){let r=n[0],o=1,u=2,m="",v=!1;for(;o<n.length;){let x=n[o];if("string"==typeof x)if(2&u){const C=n[++o];m+="["+x+(C.length>0?'="'+C+'"':"")+"]"}else 8&u?m+="."+x:4&u&&(m+=" "+x);else""!==m&&!ei(x)&&(r+=p_(v,m),m=""),u=x,v=v||!ei(u);o++}return""!==m&&(r+=p_(v,m)),r}const Dn={};function am(n){lm(_n(),Ke(),$i()+n,!1)}function lm(n,r,o,u){if(!u)if(3==(3&r[mn])){const v=n.preOrderCheckHooks;null!==v&&K(r,v,o)}else{const v=n.preOrderHooks;null!==v&&oe(r,v,0,o)}as(o)}function g_(n,r=null,o=null,u){const m=__(n,r,o,u);return m.resolveInjectorInitializers(),m}function __(n,r=null,o=null,u,m=new Set){const v=[o||Ae,cc(n)];return u=u||("object"==typeof n?void 0:nt(n)),new nf(v,r||Qc(),u||null,m)}let iu=(()=>{class n{static create(o,u){if(Array.isArray(o))return g_({name:""},u,o,"");{const m=o.name??"";return g_({name:m},o.parent,o.providers,m)}}}return n.THROW_IF_NOT_FOUND=un,n.NULL=new Rr,n.\u0275prov=cn({token:n,providedIn:"any",factory:()=>Ri(Xh)}),n.__NG_ELEMENT_ID__=-1,n})();function vc(n,r=on.Default){const o=Ke();return null===o?Ri(n,r):Ho(Xn(),o,mt(n),r)}function pm(){throw new Error("invalid")}function ou(n,r){const o=n.contentQueries;if(null!==o)for(let u=0;u<o.length;u+=2){const v=o[u+1];if(-1!==v){const x=n.data[v];gr(o[u]),x.contentQueries(2,r[v],v)}}}function Ju(n,r,o,u,m,v,x,C,O,A,N){const $=r.blueprint.slice();return $[_s]=m,$[mn]=76|u,(null!==N||n&&1024&n[mn])&&($[mn]|=1024),hl($),$[Ci]=$[ao]=n,$[oi]=o,$[ta]=x||n&&n[ta],$[Mn]=C||n&&n[Mn],$[Mu]=O||n&&n[Mu]||null,$[Vs]=A||n&&n[Vs]||null,$[Ei]=v,$[zs]=function _g(){return gg++}(),$[ia]=N,$[zi]=2==r.type?n[zi]:$,$}function Sl(n,r,o,u,m){let v=n.data[r];if(null===v)v=Jd(n,r,o,u,m),function Wn(){return nn.lFrame.inI18n}()&&(v.flags|=32);else if(64&v.type){v.type=o,v.value=u,v.attrs=m;const x=Ai();v.injectorIndex=null===x?-1:x.injectorIndex}return nr(v,!0),v}function Jd(n,r,o,u,m){const v=Gc(),x=jo(),O=n.data[r]=function _m(n,r,o,u,m,v){return{type:o,index:u,insertBeforeIndex:null,injectorIndex:r?r.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:m,attrs:v,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,x?v:v&&v.parent,o,r,u,m);return null===n.firstChild&&(n.firstChild=O),null!==v&&(x?null==v.child&&null!==O.parent&&(v.child=O):null===v.next&&(v.next=O,O.prev=v)),O}function za(n,r,o,u){if(0===o)return-1;const m=r.length;for(let v=0;v<o;v++)r.push(u),n.blueprint.push(u),n.data.push(null);return m}function Wa(n,r,o){go(r);try{const u=n.viewQuery;null!==u&&th(1,u,o);const m=n.template;null!==m&&yf(n,r,m,1,o),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&ou(n,r),n.staticViewQueries&&th(2,n.viewQuery,o);const v=n.components;null!==v&&function gm(n,r){for(let o=0;o<r.length;o++)Ef(n,r[o])}(r,v)}catch(u){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),u}finally{r[mn]&=-5,Uo()}}function yc(n,r,o,u){const m=r[mn];if(128!=(128&m)){go(r);try{hl(r),function ql(n){return nn.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==o&&yf(n,r,o,2,u);const x=3==(3&m);if(x){const A=n.preOrderCheckHooks;null!==A&&K(r,A,null)}else{const A=n.preOrderHooks;null!==A&&oe(r,A,0,null),De(r,0)}if(function Cf(n){for(let r=Oh(n);null!==r;r=Nh(r)){if(!r[hi])continue;const o=r[qr];for(let u=0;u<o.length;u++){const m=o[u];512&m[mn]||Lo(m[Ci],1),m[mn]|=512}}}(r),function xm(n){for(let r=Oh(n);null!==r;r=Nh(r))for(let o=pr;o<r.length;o++){const u=r[o],m=u[It];Ys(u)&&yc(m,u,m.template,u[oi])}}(r),null!==n.contentQueries&&ou(n,r),x){const A=n.contentCheckHooks;null!==A&&K(r,A)}else{const A=n.contentHooks;null!==A&&oe(r,A,1),De(r,1)}!function qd(n,r){const o=n.hostBindingOpCodes;if(null!==o)try{for(let u=0;u<o.length;u++){const m=o[u];if(m<0)as(~m);else{const v=m,x=o[++u],C=o[++u];mo(x,v),C(2,r[v])}}}finally{as(-1)}}(n,r);const C=n.components;null!==C&&function mm(n,r){for(let o=0;o<r.length;o++)Qd(n,r[o])}(r,C);const O=n.viewQuery;if(null!==O&&th(2,O,u),x){const A=n.viewCheckHooks;null!==A&&K(r,A)}else{const A=n.viewHooks;null!==A&&oe(r,A,2),De(r,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),r[mn]&=-41,512&r[mn]&&(r[mn]&=-513,Lo(r[Ci],-1))}finally{Uo()}}}function yf(n,r,o,u,m){const v=$i(),x=2&u;try{as(-1),x&&r.length>di&&lm(n,r,di,!1),os(x?2:0,m),o(u,m)}finally{as(v),os(x?3:1,m)}}function bc(n,r,o){if(ra(r)){const m=r.directiveEnd;for(let v=r.directiveStart;v<m;v++){const x=n.data[v];x.contentQueries&&x.contentQueries(1,o[v],v)}}}function Zd(n,r,o){Yl()&&(function M_(n,r,o,u){const m=o.directiveStart,v=o.directiveEnd;lo(o)&&function $v(n,r,o){const u=Zr(r,n),m=au(o),v=n[ta],x=Qu(n,Ju(n,m,null,o.onPush?32:16,u,r,v,v.createRenderer(u,o),null,null,null));n[r.index]=x}(r,o,n.data[m+o.componentOffset]),n.firstCreatePass||Xl(o,r),us(u,r);const x=o.initialInputs;for(let C=m;C<v;C++){const O=n.data[C],A=Kr(r,n,C,o);us(A,r),null!==x&&Yv(0,C-m,A,O,0,x),Gr(O)&&(Nr(o.index,r)[oi]=Kr(r,n,C,o))}}(n,r,o,Zr(o,r)),64==(64&o.flags)&&Xd(n,r,o))}function bf(n,r,o=Zr){const u=r.localNames;if(null!==u){let m=r.index+1;for(let v=0;v<u.length;v+=2){const x=u[v+1],C=-1===x?o(r,n):n[x];n[m++]=C}}}function au(n){const r=n.tView;return null===r||r.incompleteFirstPass?n.tView=Cl(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):r}function Cl(n,r,o,u,m,v,x,C,O,A){const N=di+u,$=N+m,te=function T_(n,r){const o=[];for(let u=0;u<r;u++)o.push(u<n?null:Dn);return o}(N,$),ce="function"==typeof A?A():A;return te[It]={type:n,blueprint:te,template:o,queries:null,viewQuery:C,declTNode:r,data:te.slice().fill(null,N),bindingStartIndex:N,expandoStartIndex:$,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof v?v():v,pipeRegistry:"function"==typeof x?x():x,firstChild:null,schemas:O,consts:ce,incompleteFirstPass:!1}}function Zu(n,r,o,u){const m=Dm(r);null===o?m.push(u):(m.push(o),n.firstCreatePass&&wm(n).push(u,m.length-1))}function Tc(n,r,o,u){for(let m in n)if(n.hasOwnProperty(m)){o=null===o?{}:o;const v=n[m];null===u?Mf(o,r,m,v):u.hasOwnProperty(m)&&Mf(o,r,u[m],v)}return o}function Mf(n,r,o,u){n.hasOwnProperty(o)?n[o].push(r,u):n[o]=[r,u]}function vs(n,r,o,u,m,v,x,C){const O=Zr(r,o);let N,A=r.inputs;!C&&null!=A&&(N=A[u])?(El(n,o,N,u,m),lo(r)&&function Df(n,r){const o=Nr(r,n);16&o[mn]||(o[mn]|=32)}(o,r.index)):3&r.type&&(u=function xf(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(u),m=null!=x?x(m,r.value||"",u):m,v.setProperty(O,u,m))}function Mc(n,r,o,u){if(Yl()){const m=null===u?null:{"":-1},v=function Mm(n,r){const o=n.directiveRegistry;let u=null,m=null;if(o)for(let v=0;v<o.length;v++){const x=o[v];if(ff(r,x.selectors,!1))if(u||(u=[]),Gr(x))if(null!==x.findHostDirectiveDefs){const C=[];m=m||new Map,x.findHostDirectiveDefs(x,C,m),u.unshift(...C,x),Ku(n,r,C.length)}else u.unshift(x),Ku(n,r,0);else m=m||new Map,x.findHostDirectiveDefs?.(x,u,m),u.push(x)}return null===u?null:[u,m]}(n,o);let x,C;null===v?x=C=null:[x,C]=v,null!==x&&wf(n,r,o,x,m,C),m&&function Rf(n,r,o){if(r){const u=n.localNames=[];for(let m=0;m<r.length;m+=2){const v=o[r[m+1]];if(null==v)throw new Ne(-301,!1);u.push(r[m],v)}}}(o,u,m)}o.mergedAttrs=Cs(o.mergedAttrs,o.attrs)}function wf(n,r,o,u,m,v){for(let A=0;A<u.length;A++)Ni(Xl(o,r),n,u[A].type);!function D_(n,r,o){n.flags|=1,n.directiveStart=r,n.directiveEnd=r+o,n.providerIndexes=r}(o,n.data.length,u.length);for(let A=0;A<u.length;A++){const N=u[A];N.providersResolver&&N.providersResolver(N)}let x=!1,C=!1,O=za(n,r,u.length,null);for(let A=0;A<u.length;A++){const N=u[A];o.mergedAttrs=Cs(o.mergedAttrs,N.hostAttrs),w_(n,o,r,O,N),x_(O,N,m),null!==N.contentQueries&&(o.flags|=4),(null!==N.hostBindings||null!==N.hostAttrs||0!==N.hostVars)&&(o.flags|=64);const $=N.type.prototype;!x&&($.ngOnChanges||$.ngOnInit||$.ngDoCheck)&&((n.preOrderHooks??(n.preOrderHooks=[])).push(o.index),x=!0),!C&&($.ngOnChanges||$.ngDoCheck)&&((n.preOrderCheckHooks??(n.preOrderCheckHooks=[])).push(o.index),C=!0),O++}!function Os(n,r,o){const m=r.directiveEnd,v=n.data,x=r.attrs,C=[];let O=null,A=null;for(let N=r.directiveStart;N<m;N++){const $=v[N],te=o?o.get($):null,ge=te?te.outputs:null;O=Tc($.inputs,N,O,te?te.inputs:null),A=Tc($.outputs,N,A,ge);const Fe=null===O||null===x||df(r)?null:Ma(O,N,x);C.push(Fe)}null!==O&&(O.hasOwnProperty("class")&&(r.flags|=8),O.hasOwnProperty("style")&&(r.flags|=16)),r.initialInputs=C,r.inputs=O,r.outputs=A}(n,o,v)}function Xd(n,r,o){const u=o.directiveStart,m=o.directiveEnd,v=o.index,x=function Th(){return nn.lFrame.currentDirectiveIndex}();try{as(v);for(let C=u;C<m;C++){const O=n.data[C],A=r[C];Vo(C),(null!==O.hostBindings||0!==O.hostVars||null!==O.hostAttrs)&&Tm(O,A)}}finally{as(-1),Vo(x)}}function Tm(n,r){null!==n.hostBindings&&n.hostBindings(1,r)}function Ku(n,r,o){r.componentOffset=o,(n.components??(n.components=[])).push(r.index)}function x_(n,r,o){if(o){if(r.exportAs)for(let u=0;u<r.exportAs.length;u++)o[r.exportAs[u]]=n;Gr(r)&&(o[""]=n)}}function w_(n,r,o,u,m){n.data[u]=m;const v=m.factory||(m.factory=xs(m.type)),x=new Sn(v,Gr(m),vc);n.blueprint[u]=x,o[u]=x,function ym(n,r,o,u,m){const v=m.hostBindings;if(v){let x=n.hostBindingOpCodes;null===x&&(x=n.hostBindingOpCodes=[]);const C=~r.index;(function bm(n){let r=n.length;for(;r>0;){const o=n[--r];if("number"==typeof o&&o<0)return o}return 0})(x)!=C&&x.push(C),x.push(o,u,v)}}(n,r,u,za(n,o,m.hostVars,Dn),m)}function Sf(n,r,o,u,m,v,x){if(null==v)n.removeAttribute(r,m,o);else{const C=null==x?je(v):x(v,u||"",m);n.setAttribute(r,m,C,o)}}function Yv(n,r,o,u,m,v){const x=v[r];if(null!==x){const C=u.setInput;for(let O=0;O<x.length;){const A=x[O++],N=x[O++],$=x[O++];null!==C?u.setInput(o,$,A,N):o[N]=$}}}function Ma(n,r,o){let u=null,m=0;for(;m<o.length;){const v=o[m];if(0!==v)if(5!==v){if("number"==typeof v)break;if(n.hasOwnProperty(v)){null===u&&(u=[]);const x=n[v];for(let C=0;C<x.length;C+=2)if(x[C]===r){u.push(v,x[C+1],o[m+1]);break}}m+=2}else m+=2;else m+=4}return u}function Xu(n,r,o,u){return[n,!0,!1,r,null,0,u,o,null,null]}function Qd(n,r){const o=Nr(r,n);if(Ys(o)){const u=o[It];48&o[mn]?yc(u,o,u.template,o[oi]):o[Yr]>0&&lu(o)}}function lu(n){for(let u=Oh(n);null!==u;u=Nh(u))for(let m=pr;m<u.length;m++){const v=u[m];if(Ys(v))if(512&v[mn]){const x=v[It];yc(x,v,x.template,v[oi])}else v[Yr]>0&&lu(v)}const o=n[It].components;if(null!==o)for(let u=0;u<o.length;u++){const m=Nr(o[u],n);Ys(m)&&m[Yr]>0&&lu(m)}}function Ef(n,r){const o=Nr(r,n),u=o[It];(function Af(n,r){for(let o=r.length;o<n.blueprint.length;o++)r.push(n.blueprint[o])})(u,o),Wa(u,o,o[oi])}function Qu(n,r){return n[Us]?n[na][Or]=r:n[Us]=r,n[na]=r,r}function ed(n){for(;n;){n[mn]|=32;const r=Eu(n);if(Io(n)&&!r)return n;n=r}return null}function eh(n,r,o,u=!0){const m=r[ta];m.begin&&m.begin();try{yc(n,r,n.template,o)}catch(x){throw u&&Sm(r,x),x}finally{m.end&&m.end()}}function th(n,r,o){gr(0),r(n,o)}function Dm(n){return n[Gs]||(n[Gs]=[])}function wm(n){return n.cleanup||(n.cleanup=[])}function Sm(n,r){const o=n[Vs],u=o?o.get(zd,null):null;u&&u.handleError(r)}function El(n,r,o,u,m){for(let v=0;v<o.length;){const x=o[v++],C=o[v++],O=r[x],A=n.data[x];null!==A.setInput?A.setInput(O,m,u,C):O[C]=m}}function If(n,r,o){let u=o?n.styles:null,m=o?n.classes:null,v=0;if(null!==r)for(let x=0;x<r.length;x++){const C=r[x];"number"==typeof C?v=C:1==v?m=rn(m,C):2==v&&(u=rn(u,C+": "+r[++x]+";"))}o?n.styles=u:n.stylesWithoutHost=u,o?n.classes=m:n.classesWithoutHost=m}function td(n,r,o,u,m=!1){for(;null!==o;){const v=r[o.index];if(null!==v&&u.push(gi(v)),Wi(v))for(let C=pr;C<v.length;C++){const O=v[C],A=O[It].firstChild;null!==A&&td(O[It],O,A,u)}const x=o.type;if(8&x)td(n,r,o.child,u);else if(32&x){const C=Ph(o,r);let O;for(;O=C();)u.push(O)}else if(16&x){const C=jp(r,o);if(Array.isArray(C))u.push(...C);else{const O=Eu(r[zi]);td(O[It],O,C,u,!0)}}o=m?o.projectionNext:o.next}return u}class ih{get rootNodes(){const r=this._lView,o=r[It];return td(o,r,o.firstChild,[])}constructor(r,o){this._lView=r,this._cdRefInjectingView=o,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[oi]}set context(r){this._lView[oi]=r}get destroyed(){return 128==(128&this._lView[mn])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[Ci];if(Wi(r)){const o=r[Ao],u=o?o.indexOf(this):-1;u>-1&&(Bh(r,u),R(o,u))}this._attachedToViewContainer=!1}Ep(this._lView[It],this._lView)}onDestroy(r){Zu(this._lView[It],this._lView,null,r)}markForCheck(){ed(this._cdRefInjectingView||this._lView)}detach(){this._lView[mn]&=-65}reattach(){this._lView[mn]|=64}detectChanges(){eh(this._lView[It],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ne(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Pg(n,r){Id(n,r,r[Mn],2,null,null)}(this._lView[It],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new Ne(902,!1);this._appRef=r}}class Pf extends ih{constructor(r){super(r),this._view=r}detectChanges(){const r=this._view;eh(r[It],r,r[oi],!1)}checkNoChanges(){}get context(){return null}}class Of extends Lu{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const o=qn(r);return new Al(o,this.ngModule)}}function Cm(n){const r=[];for(let o in n)n.hasOwnProperty(o)&&r.push({propName:n[o],templateName:o});return r}class Jv{constructor(r,o){this.injector=r,this.parentInjector=o}get(r,o,u){u=Co(u);const m=this.injector.get(r,ju,u);return m!==ju||o===ju?m:this.parentInjector.get(r,o,u)}}class Al extends tm{get inputs(){return Cm(this.componentDef.inputs)}get outputs(){return Cm(this.componentDef.outputs)}constructor(r,o){super(),this.componentDef=r,this.ngModule=o,this.componentType=r.type,this.selector=function Vu(n){return n.map(Gu).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!o}create(r,o,u,m){let v=(m=m||this.ngModule)instanceof hc?m:m?.injector;v&&null!==this.componentDef.getStandaloneInjector&&(v=this.componentDef.getStandaloneInjector(v)||v);const x=v?new Jv(r,v):r,C=x.get(sf,null);if(null===C)throw new Ne(407,!1);const O=x.get(sm,null),A=C.createRenderer(null,this.componentDef),N=this.componentDef.selectors[0][0]||"div",$=u?function Tf(n,r,o){return n.selectRootElement(r,o===re.ShadowDom)}(A,u,this.componentDef.encapsulation):Lh(A,N,function Em(n){const r=n.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(N)),te=this.componentDef.onPush?288:272,ce=Cl(0,null,null,1,0,null,null,null,null,null),ge=Ju(null,ce,null,te,null,null,C,A,O,x,null);let Fe,Ie;go(ge);try{const _e=this.componentDef;let ct,Ce=null;_e.findHostDirectiveDefs?(ct=[],Ce=new Map,_e.findHostDirectiveDefs(_e,ct,Ce),ct.push(_e)):ct=[_e];const pt=function Am(n,r){const o=n[It],u=di;return n[u]=r,Sl(o,u,2,"#host",null)}(ge,$),kt=function rh(n,r,o,u,m,v,x,C){const O=m[It];!function sh(n,r,o,u){for(const m of n)r.mergedAttrs=Cs(r.mergedAttrs,m.hostAttrs);null!==r.mergedAttrs&&(If(r,r.mergedAttrs,!0),null!==o&&Pd(u,o,r))}(u,n,r,x);const A=v.createRenderer(r,o),N=Ju(m,au(o),null,o.onPush?32:16,m[n.index],n,v,A,C||null,null,null);return O.firstCreatePass&&Ku(O,n,u.length-1),Qu(m,N),m[n.index]=N}(pt,$,_e,ct,ge,C,A);Ie=$l(ce,di),$&&function Im(n,r,o,u){if(u)Qi(n,o,["ng-version",lf.full]);else{const{attrs:m,classes:v}=function gf(n){const r=[],o=[];let u=1,m=2;for(;u<n.length;){let v=n[u];if("string"==typeof v)2===m?""!==v&&r.push(v,n[++u]):8===m&&o.push(v);else{if(!ei(m))break;m=v}u++}return{attrs:r,classes:o}}(r.selectors[0]);m&&Qi(n,o,m),v&&v.length>0&&kp(n,o,v.join(" "))}}(A,_e,$,u),void 0!==o&&function Ff(n,r,o){const u=n.projection=[];for(let m=0;m<r.length;m++){const v=o[m];u.push(null!=v?Array.from(v):null)}}(Ie,this.ngContentSelectors,o),Fe=function cu(n,r,o,u,m,v){const x=Xn(),C=m[It],O=Zr(x,m);wf(C,m,x,o,null,u);for(let N=0;N<o.length;N++)us(Kr(m,C,x.directiveStart+N,x),m);Xd(C,m,x),O&&us(O,m);const A=Kr(m,C,x.directiveStart+x.componentOffset,x);if(n[oi]=m[oi]=A,null!==v)for(const N of v)N(A,r);return bc(C,x,n),A}(kt,_e,ct,Ce,ge,[Lf]),Wa(ce,ge,null)}finally{Uo()}return new Nf(this.componentType,Fe,tu(Ie,ge),ge,Ie)}}class Nf extends em{constructor(r,o,u,m,v){super(),this.location=u,this._rootLView=m,this._tNode=v,this.instance=o,this.hostView=this.changeDetectorRef=new Pf(m),this.componentType=r}setInput(r,o){const u=this._tNode.inputs;let m;if(null!==u&&(m=u[r])){const v=this._rootLView;El(v[It],v,m,r,o),ed(Nr(this._tNode.index,v))}}get injector(){return new _r(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}function Lf(){const n=Xn();k(Ke()[It],n)}function nd(n){let r=function Bf(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),o=!0;const u=[n];for(;r;){let m;if(Gr(n))m=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new Ne(903,!1);m=r.\u0275dir}if(m){if(o){u.push(m);const x=n;x.inputs=xc(n.inputs),x.declaredInputs=xc(n.declaredInputs),x.outputs=xc(n.outputs);const C=m.hostBindings;C&&Il(n,C);const O=m.viewQuery,A=m.contentQueries;if(O&&Pm(n,O),A&&Om(n,A),He(n.inputs,m.inputs),He(n.declaredInputs,m.declaredInputs),He(n.outputs,m.outputs),Gr(m)&&m.data.animation){const N=n.data;N.animation=(N.animation||[]).concat(m.data.animation)}}const v=m.features;if(v)for(let x=0;x<v.length;x++){const C=v[x];C&&C.ngInherit&&C(n),C===nd&&(o=!1)}}r=Object.getPrototypeOf(r)}!function Zv(n){let r=0,o=null;for(let u=n.length-1;u>=0;u--){const m=n[u];m.hostVars=r+=m.hostVars,m.hostAttrs=Cs(m.hostAttrs,o=Cs(o,m.hostAttrs))}}(u)}function xc(n){return n===Te?{}:n===Ae?[]:n}function Pm(n,r){const o=n.viewQuery;n.viewQuery=o?(u,m)=>{r(u,m),o(u,m)}:r}function Om(n,r){const o=n.contentQueries;n.contentQueries=o?(u,m,v)=>{r(u,m,v),o(u,m,v)}:r}function Il(n,r){const o=n.hostBindings;n.hostBindings=o?(u,m)=>{r(u,m),o(u,m)}:r}function s(n){return r=>{r.findHostDirectiveDefs=p,r.hostDirectives=(Array.isArray(n)?n:n()).map(o=>"function"==typeof o?{directive:mt(o),inputs:Te,outputs:Te}:{directive:mt(o.directive),inputs:M(o.inputs),outputs:M(o.outputs)})}}function p(n,r,o){if(null!==n.hostDirectives)for(const u of n.hostDirectives){const m=Hi(u.directive);F(m.declaredInputs,u.inputs),p(m,r,o),o.set(m,u),r.push(m)}}function M(n){if(void 0===n||0===n.length)return Te;const r={};for(let o=0;o<n.length;o+=2)r[n[o]]=n[o+1];return r}function F(n,r){for(const o in r)r.hasOwnProperty(o)&&(n[r[o]]=n[o])}function ye(n){return!!_t(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function _t(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function vn(n,r,o){return n[r]=o}function tn(n,r,o){return!Object.is(n[r],o)&&(n[r]=o,!0)}function Cn(n,r,o,u){const m=tn(n,r,o);return tn(n,r+1,u)||m}function Jn(n,r,o,u){const m=Ke();return tn(m,qs(),r)&&(_n(),function Ta(n,r,o,u,m,v){const x=Zr(n,r);Sf(r[Mn],x,v,n.value,o,u,m)}(_i(),m,n,r,o,u)),Jn}function Hn(n,r,o,u){return tn(n,qs(),o)?r+je(o)+u:Dn}function Zo(n,r,o,u,m,v,x,C){const O=Ke(),A=_n(),N=n+di,$=A.firstCreatePass?function Pl(n,r,o,u,m,v,x,C,O){const A=r.consts,N=Sl(r,n,4,x||null,fo(A,C));Mc(r,o,N,fo(A,O)),k(r,N);const $=N.tView=Cl(2,N,u,m,v,r.directiveRegistry,r.pipeRegistry,null,r.schemas,A);return null!==r.queries&&(r.queries.template(r,N),$.queries=r.queries.embeddedTView(N)),N}(N,A,O,r,o,u,m,v,x):A.data[N];nr($,!1);const te=O[Mn].createComment("");Ed(A,O,te,$),us(te,O),Qu(O,O[N]=Xu(te,O,te,$)),Vl($)&&Zd(A,O,$),null!=x&&bf(O,$,C)}function Cc(n){return $s(function ws(){return nn.lFrame.contextLView}(),di+n)}function qa(n,r,o){const u=Ke();return tn(u,qs(),r)&&vs(_n(),_i(),u,n,r,u[Mn],o,!1),qa}function hu(n,r,o,u,m){const x=m?"class":"style";El(n,o,r.inputs[x],x,u)}function fu(n,r,o,u){const m=Ke(),v=_n(),x=di+n,C=m[Mn],O=v.firstCreatePass?function Nm(n,r,o,u,m,v){const x=r.consts,O=Sl(r,n,2,u,fo(x,m));return Mc(r,o,O,fo(x,v)),null!==O.attrs&&If(O,O.attrs,!1),null!==O.mergedAttrs&&If(O,O.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,O),O}(x,v,m,r,o,u):v.data[x],A=m[x]=Lh(C,r,function P(){return nn.lFrame.currentNamespace}()),N=Vl(O);return nr(O,!0),Pd(C,A,O),32!=(32&O.flags)&&Ed(v,m,A,O),0===function st(){return nn.lFrame.elementDepthCount}()&&us(A,m),function Fn(){nn.lFrame.elementDepthCount++}(),N&&(Zd(v,m,O),bc(v,O,m)),null!==u&&bf(m,O),fu}function oh(){let n=Xn();jo()?ko():(n=n.parent,nr(n,!1));const r=n;!function kc(){nn.lFrame.elementDepthCount--}();const o=_n();return o.firstCreatePass&&(k(o,n),ra(n)&&o.queries.elementEnd(n)),null!=r.classesWithoutHost&&function Vn(n){return 0!=(8&n.flags)}(r)&&hu(o,r,Ke(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function fi(n){return 0!=(16&n.flags)}(r)&&hu(o,r,Ke(),r.stylesWithoutHost,!1),oh}function ah(n,r,o,u){return fu(n,r,o,u),oh(),ah}function lh(n,r,o){const u=Ke(),m=_n(),v=n+di,x=m.firstCreatePass?function S_(n,r,o,u,m){const v=r.consts,x=fo(v,u),C=Sl(r,n,8,"ng-container",x);return null!==x&&If(C,x,!0),Mc(r,o,C,fo(v,m)),null!==r.queries&&r.queries.elementStart(r,C),C}(v,m,u,r,o):m.data[v];nr(x,!0);const C=u[v]=u[Mn].createComment("");return Ed(m,u,C,x),us(C,u),Vl(x)&&(Zd(m,u,x),bc(m,x,u)),null!=o&&bf(u,x),lh}function rd(){let n=Xn();const r=_n();return jo()?ko():(n=n.parent,nr(n,!1)),r.firstCreatePass&&(k(r,n),ra(n)&&r.queries.elementEnd(n)),rd}function Fm(){return Ke()}function kf(n){return!!n&&"function"==typeof n.then}function Ol(n){return!!n&&"function"==typeof n.subscribe}const hs=Ol;function Da(n,r,o,u){const m=Ke(),v=_n(),x=Xn();return function od(n,r,o,u,m,v,x){const C=Vl(u),A=n.firstCreatePass&&wm(n),N=r[oi],$=Dm(r);let te=!0;if(3&u.type||x){const Fe=Zr(u,r),Ie=x?x(Fe):Fe,_e=$.length,ct=x?pt=>x(gi(pt[u.index])):u.index;let Ce=null;if(!x&&C&&(Ce=function ch(n,r,o,u){const m=n.cleanup;if(null!=m)for(let v=0;v<m.length-1;v+=2){const x=m[v];if(x===o&&m[v+1]===u){const C=r[Gs],O=m[v+2];return C.length>O?C[O]:null}"string"==typeof x&&(v+=2)}return null}(n,r,m,u.index)),null!==Ce)(Ce.__ngLastListenerFn__||Ce).__ngNextListenerFn__=v,Ce.__ngLastListenerFn__=v,te=!1;else{v=Gf(u,r,N,v,!1);const pt=o.listen(Ie,m,v);$.push(v,pt),A&&A.push(m,ct,_e,_e+1)}}else v=Gf(u,r,N,v,!1);const ce=u.outputs;let ge;if(te&&null!==ce&&(ge=ce[m])){const Fe=ge.length;if(Fe)for(let Ie=0;Ie<Fe;Ie+=2){const kt=r[ge[Ie]][ge[Ie+1]].subscribe(v),Gt=$.length;$.push(v,kt),A&&A.push(m,u.index,Gt,-(Gt+1))}}}(v,m,m[Mn],x,n,r,u),Da}function ad(n,r,o,u){try{return os(6,r,o),!1!==o(u)}catch(m){return Sm(n,m),!1}finally{os(7,r,o)}}function Gf(n,r,o,u,m){return function v(x){if(x===Function)return u;ed(n.componentOffset>-1?Nr(n.index,r):r);let O=ad(r,o,u,x),A=v.__ngNextListenerFn__;for(;A;)O=ad(r,o,A,x)&&O,A=A.__ngNextListenerFn__;return m&&!1===O&&(x.preventDefault(),x.returnValue=!1),O}}function Vf(n=1){return function la(n){return(nn.lFrame.contextLView=function ca(n,r){for(;n>0;)r=r[ao],n--;return r}(n,nn.lFrame.contextLView))[oi]}(n)}function OT(n,r){let o=null;const u=function pf(n){const r=n.attrs;if(null!=r){const o=r.indexOf(5);if(!(1&o))return r[o+1]}return null}(n);for(let m=0;m<r.length;m++){const v=r[m];if("*"!==v){if(null===u?ff(n,v,!0):mf(u,v))return m}else o=m}return o}function Uf(n){const r=Ke()[zi][Ei];if(!r.projection){const u=r.projection=T(n?n.length:1,null),m=u.slice();let v=r.child;for(;null!==v;){const x=n?OT(v,n):0;null!==x&&(m[x]?m[x].projectionNext=v:u[x]=v,m[x]=v),v=v.next}}}function Kv(n,r=0,o){const u=Ke(),m=_n(),v=Sl(m,di+n,16,null,o||null);null===v.projection&&(v.projection=r),ko(),32!=(32&v.flags)&&function e0(n,r,o){kg(r[Mn],0,r,o,Ap(n,o,r),Np(o.parent||r[Ei],o,r))}(m,u,v)}function Lm(n,r,o){return Bm(n,"",r,"",o),Lm}function Bm(n,r,o,u,m){const v=Ke(),x=Hn(v,r,o,u);return x!==Dn&&vs(_n(),_i(),v,n,x,v[Mn],m,!1),Bm}function ud(n,r){return n<<17|r<<2}function pu(n){return n>>17&32767}function jm(n){return 2|n}function dd(n){return(131068&n)>>2}function Qv(n,r){return-131069&n|r<<2}function E_(n){return 1|n}function l0(n,r,o,u,m){const v=n[o+1],x=null===r;let C=u?pu(v):dd(v),O=!1;for(;0!==C&&(!1===O||x);){const N=n[C+1];FT(n[C],r)&&(O=!0,n[C+1]=u?E_(N):jm(N)),C=u?pu(N):dd(N)}O&&(n[o+1]=u?jm(v):E_(v))}function FT(n,r){return null===n||null==r||(Array.isArray(n)?n[1]:n)===r||!(!Array.isArray(n)||"string"!=typeof r)&&vt(n,r)>=0}const fs={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function c0(n){return n.substring(fs.key,fs.keyEnd)}function I_(n,r){const o=fs.textEnd;return o===r?-1:(r=fs.keyEnd=function ny(n,r,o){for(;r<o&&n.charCodeAt(r)>32;)r++;return r}(n,fs.key=r,o),hh(n,r,o))}function hh(n,r,o){for(;r<o&&n.charCodeAt(r)<=32;)r++;return r}function P_(n,r,o){return Ra(n,r,o,!1),P_}function O_(n,r){return Ra(n,r,null,!0),O_}function ry(n){Za(fe,wa,n,!0)}function wa(n,r){for(let o=function A_(n){return function ty(n){fs.key=0,fs.keyEnd=0,fs.value=0,fs.valueEnd=0,fs.textEnd=n.length}(n),I_(n,hh(n,0,fs.textEnd))}(r);o>=0;o=I_(r,o))fe(n,c0(r),!0)}function Ra(n,r,o,u){const m=Ke(),v=_n(),x=or(2);v.firstUpdatePass&&p0(v,n,x,u),r!==Dn&&tn(m,x,r)&&N_(v,v.data[$i()],m,m[Mn],n,m[x+1]=function GT(n,r){return null==n||""===n||("string"==typeof r?n+=r:"object"==typeof n&&(n=nt(no(n)))),n}(r,o),u,x)}function Za(n,r,o,u){const m=_n(),v=or(2);m.firstUpdatePass&&p0(m,null,v,u);const x=Ke();if(o!==Dn&&tn(x,v,o)){const C=m.data[$i()];if(L_(C,u)&&!sy(m,v)){let O=u?C.classesWithoutHost:C.stylesWithoutHost;null!==O&&(o=rn(O,o||"")),hu(m,C,x,o,u)}else!function kT(n,r,o,u,m,v,x,C){m===Dn&&(m=Ae);let O=0,A=0,N=0<m.length?m[0]:null,$=0<v.length?v[0]:null;for(;null!==N||null!==$;){const te=O<m.length?m[O+1]:void 0,ce=A<v.length?v[A+1]:void 0;let Fe,ge=null;N===$?(O+=2,A+=2,te!==ce&&(ge=$,Fe=ce)):null===$||null!==N&&N<$?(O+=2,ge=N):(A+=2,ge=$,Fe=ce),null!==ge&&N_(n,r,o,u,ge,Fe,x,C),N=O<m.length?m[O]:null,$=A<v.length?v[A]:null}}(m,C,x,x[Mn],x[v+1],x[v+1]=function jT(n,r,o){if(null==o||""===o)return Ae;const u=[],m=no(o);if(Array.isArray(m))for(let v=0;v<m.length;v++)n(u,m[v],!0);else if("object"==typeof m)for(const v in m)m.hasOwnProperty(v)&&n(u,v,m[v]);else"string"==typeof m&&r(u,m);return u}(n,r,o),u,v)}}function sy(n,r){return r>=n.expandoStartIndex}function p0(n,r,o,u){const m=n.data;if(null===m[o+1]){const v=m[$i()],x=sy(n,o);L_(v,u)&&null===r&&!x&&(r=!1),r=function m0(n,r,o,u){const m=function Vc(n){const r=nn.lFrame.currentDirectiveIndex;return-1===r?null:n[r]}(n);let v=u?r.residualClasses:r.residualStyles;if(null===m)0===(u?r.classBindings:r.styleBindings)&&(o=ph(o=fh(null,n,r,o,u),r.attrs,u),v=null);else{const x=r.directiveStylingLast;if(-1===x||n[x]!==m)if(o=fh(m,n,r,o,u),null===v){let O=function oy(n,r,o){const u=o?r.classBindings:r.styleBindings;if(0!==dd(u))return n[pu(u)]}(n,r,u);void 0!==O&&Array.isArray(O)&&(O=fh(null,n,r,O[1],u),O=ph(O,r.attrs,u),function ay(n,r,o,u){n[pu(o?r.classBindings:r.styleBindings)]=u}(n,r,u,O))}else v=function BT(n,r,o){let u;const m=r.directiveEnd;for(let v=1+r.directiveStylingLast;v<m;v++)u=ph(u,n[v].hostAttrs,o);return ph(u,r.attrs,o)}(n,r,u)}return void 0!==v&&(u?r.residualClasses=v:r.residualStyles=v),o}(m,v,r,u),function NT(n,r,o,u,m,v){let x=v?r.classBindings:r.styleBindings,C=pu(x),O=dd(x);n[u]=o;let N,A=!1;if(Array.isArray(o)?(N=o[1],(null===N||vt(o,N)>0)&&(A=!0)):N=o,m)if(0!==O){const te=pu(n[C+1]);n[u+1]=ud(te,C),0!==te&&(n[te+1]=Qv(n[te+1],u)),n[C+1]=function dh(n,r){return 131071&n|r<<17}(n[C+1],u)}else n[u+1]=ud(C,0),0!==C&&(n[C+1]=Qv(n[C+1],u)),C=u;else n[u+1]=ud(O,0),0===C?C=u:n[O+1]=Qv(n[O+1],u),O=u;A&&(n[u+1]=jm(n[u+1])),l0(n,N,u,!0),l0(n,N,u,!1),function km(n,r,o,u,m){const v=m?n.residualClasses:n.residualStyles;null!=v&&"string"==typeof r&&vt(v,r)>=0&&(o[u+1]=E_(o[u+1]))}(r,N,n,u,v),x=ud(C,O),v?r.classBindings=x:r.styleBindings=x}(m,v,r,o,x,u)}}function fh(n,r,o,u,m){let v=null;const x=o.directiveEnd;let C=o.directiveStylingLast;for(-1===C?C=o.directiveStart:C++;C<x&&(v=r[C],u=ph(u,v.hostAttrs,m),v!==n);)C++;return null!==n&&(o.directiveStylingLast=C),u}function ph(n,r,o){const u=o?1:2;let m=-1;if(null!==r)for(let v=0;v<r.length;v++){const x=r[v];"number"==typeof x?m=x:m===u&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),fe(n,x,!!o||r[++v]))}return void 0===n?null:n}function N_(n,r,o,u,m,v,x,C){if(!(3&r.type))return;const O=n.data,A=O[C+1],N=function Ec(n){return 1==(1&n)}(A)?F_(O,r,o,m,dd(A),x):void 0;Fl(N)||(Fl(v)||function a0(n){return 2==(2&n)}(A)&&(v=F_(O,null,o,m,C,x)),function t0(n,r,o,u,m){if(r)m?n.addClass(o,u):n.removeClass(o,u);else{let v=-1===u.indexOf("-")?void 0:va.DashCase;null==m?n.removeStyle(o,u,v):("string"==typeof m&&m.endsWith("!important")&&(m=m.slice(0,-10),v|=va.Important),n.setStyle(o,u,m,v))}}(u,x,Fo($i(),o),m,v))}function F_(n,r,o,u,m,v){const x=null===r;let C;for(;m>0;){const O=n[m],A=Array.isArray(O),N=A?O[1]:O,$=null===N;let te=o[m+1];te===Dn&&(te=$?Ae:void 0);let ce=$?Ge(te,u):N===u?te:void 0;if(A&&!Fl(ce)&&(ce=Ge(O,u)),Fl(ce)&&(C=ce,x))return C;const ge=n[m+1];m=x?pu(ge):dd(ge)}if(null!==r){let O=v?r.residualClasses:r.residualStyles;null!=O&&(C=Ge(O,u))}return C}function Fl(n){return void 0!==n}function L_(n,r){return 0!=(n.flags&(r?8:16))}function B_(n,r=""){const o=Ke(),u=_n(),m=n+di,v=u.firstCreatePass?Sl(u,m,1,r,null):u.data[m],x=o[m]=Fh(o[Mn],r);Ed(u,o,x,v),nr(v,!1)}function Ac(n){return $f("",n,""),Ac}function $f(n,r,o){const u=Ke(),m=Hn(u,n,r,o);return m!==Dn&&function $a(n,r,o){const u=Fo(r,n);Sd(n[Mn],u,o)}(u,$i(),m),$f}function y0(n,r,o,u,m){Za(fe,wa,function pi(n,r,o,u,m,v){const C=Cn(n,mr(),o,m);return or(2),C?r+je(o)+u+je(m)+v:Dn}(Ke(),n,r,o,u,m),!0)}function dy(n,r,o){const u=Ke();return tn(u,qs(),r)&&vs(_n(),_i(),u,n,r,u[Mn],o,!0),dy}const vu=void 0;var hy=["en",[["a","p"],["AM","PM"],vu],[["AM","PM"],vu,vu],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],vu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],vu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",vu,"{1} 'at' {0}",vu],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function HT(n){const o=Math.floor(Math.abs(n)),u=n.toString().replace(/^[^.]*\.?/,"").length;return 1===o&&0===u?1:5}];let Ic={};function Hm(n){const r=function py(n){return n.toLowerCase().replace(/_/g,"-")}(n);let o=Yf(r);if(o)return o;const u=r.split("-")[0];if(o=Yf(u),o)return o;if("en"===u)return hy;throw new Ne(701,!1)}function Pc(n){return Hm(n)[gn.PluralCase]}function Yf(n){return n in Ic||(Ic[n]=ui.ng&&ui.ng.common&&ui.ng.common.locales&&ui.ng.common.locales[n]),Ic[n]}var gn=(()=>((gn=gn||{})[gn.LocaleId=0]="LocaleId",gn[gn.DayPeriodsFormat=1]="DayPeriodsFormat",gn[gn.DayPeriodsStandalone=2]="DayPeriodsStandalone",gn[gn.DaysFormat=3]="DaysFormat",gn[gn.DaysStandalone=4]="DaysStandalone",gn[gn.MonthsFormat=5]="MonthsFormat",gn[gn.MonthsStandalone=6]="MonthsStandalone",gn[gn.Eras=7]="Eras",gn[gn.FirstDayOfWeek=8]="FirstDayOfWeek",gn[gn.WeekendRange=9]="WeekendRange",gn[gn.DateFormat=10]="DateFormat",gn[gn.TimeFormat=11]="TimeFormat",gn[gn.DateTimeFormat=12]="DateTimeFormat",gn[gn.NumberSymbols=13]="NumberSymbols",gn[gn.NumberFormats=14]="NumberFormats",gn[gn.CurrencyCode=15]="CurrencyCode",gn[gn.CurrencySymbol=16]="CurrencySymbol",gn[gn.CurrencyName=17]="CurrencyName",gn[gn.Currencies=18]="Currencies",gn[gn.Directionality=19]="Directionality",gn[gn.PluralCase=20]="PluralCase",gn[gn.ExtraData=21]="ExtraData",gn))();const zT=["zero","one","two","few","many"],fd="en-US",H_={marker:"element"},z_={marker:"ICU"};var kr=(()=>((kr=kr||{})[kr.SHIFT=2]="SHIFT",kr[kr.APPEND_EAGERLY=1]="APPEND_EAGERLY",kr[kr.COMMENT=2]="COMMENT",kr))();let qf=fd;function W_(n){(function Tn(n,r){null==n&&zt(r,n,null,"!=")})(n,"Expected localeId to be defined"),"string"==typeof n&&(qf=n.toLowerCase().replace(/_/g,"-"))}function Jf(n,r,o){const u=r.insertBeforeIndex,m=Array.isArray(u)?u[0]:u;return null===m?Fp(n,0,o):gi(o[m])}function yr(n,r,o,u,m){const v=r.insertBeforeIndex;if(Array.isArray(v)){let x=u,C=null;if(3&r.type||(C=x,x=m),null!==x&&-1===r.componentOffset)for(let O=1;O<v.length;O++)sc(n,x,o[v[O]],C,!1)}}function k0(n,r){if(n.push(r),n.length>1)for(let o=n.length-2;o>=0;o--){const u=n[o];Sr(u)||zm(u,r)&&null===$T(u)&&YT(u,r.index)}}function Sr(n){return!(64&n.type)}function zm(n,r){return Sr(r)||n.index>r.index}function $T(n){const r=n.insertBeforeIndex;return Array.isArray(r)?r[0]:r}function YT(n,r){const o=n.insertBeforeIndex;Array.isArray(o)?o[0]=r:(Bp(Jf,yr),n.insertBeforeIndex=r)}function Wm(n,r){const o=n.data[r];return null===o||"string"==typeof o?null:o.hasOwnProperty("currentCaseLViewIndex")?o:o.value}function $_(n,r,o){const u=Jd(n,o,64,null,null);return k0(r,u),u}function Y_(n,r){const o=r[n.currentCaseLViewIndex];return null===o?o:o<0?~o:o}function G0(n){return n>>>17}function V0(n){return(131070&n)>>>1}let Zf=0,Kf=0;function H0(n,r,o,u){const m=o[Mn];let x,v=null;for(let C=0;C<r.length;C++){const O=r[C];if("string"==typeof O){const A=r[++C];null===o[A]&&(o[A]=Fh(m,O))}else if("number"==typeof O)switch(1&O){case 0:const A=G0(O);let N,$;if(null===v&&(v=A,x=Cd(m,u)),A===v?(N=u,$=x):(N=null,$=gi(o[A])),null!==$){const Fe=V0(O);sc(m,$,o[Fe],N,!1);const _e=Wm(n,Fe);if(null!==_e&&"object"==typeof _e){const ct=Y_(_e,o);null!==ct&&H0(n,_e.create[ct],o,o[_e.anchorIdx])}}break;case 1:const ce=r[++C],ge=r[++C];Sf(m,Fo(O>>>1,o),null,null,ce,ge,null)}else switch(O){case z_:const A=r[++C],N=r[++C];null===o[N]&&us(o[N]=Eg(m,A),o);break;case H_:const $=r[++C],te=r[++C];null===o[te]&&us(o[te]=Lh(m,$,null),o)}}}function z0(n,r,o,u,m){for(let v=0;v<o.length;v++){const x=o[v],C=o[++v];if(x&m){let O="";for(let A=v+1;A<=v+C;A++){const N=o[A];if("string"==typeof N)O+=N;else if("number"==typeof N)if(N<0)O+=je(r[u-N]);else{const $=N>>>2;switch(3&N){case 1:const te=o[++A],ce=o[++A],ge=n.data[$];"string"==typeof ge?Sf(r[Mn],r[$],null,ge,te,O,ce):vs(n,ge,r,te,O,r[Mn],ce,!1);break;case 0:const Fe=r[$];null!==Fe&&Sd(r[Mn],Fe,O);break;case 2:KT(n,Wm(n,$),r,O);break;case 3:W0(n,Wm(n,$),u,r)}}}}else{const O=o[v+1];if(O>0&&3==(3&O)){const N=Wm(n,O>>>2);r[N.currentCaseLViewIndex]<0&&W0(n,N,u,r)}}v+=C}}function W0(n,r,o,u){let m=u[r.currentCaseLViewIndex];if(null!==m){let v=Zf;m<0&&(m=u[r.currentCaseLViewIndex]=~m,v=-1),z0(n,u,r.update[m],o,v)}}function KT(n,r,o,u){const m=function XT(n,r){let o=n.cases.indexOf(r);if(-1===o)switch(n.type){case 1:{const u=function B0(n,r){const o=Pc(r)(parseInt(n,10)),u=zT[o];return void 0!==u?u:"other"}(r,function WT(){return qf}());o=n.cases.indexOf(u),-1===o&&"other"!==u&&(o=n.cases.indexOf("other"));break}case 0:o=n.cases.indexOf("other")}return-1===o?null:o}(r,u);if(Y_(r,o)!==m&&($0(n,r,o),o[r.currentCaseLViewIndex]=null===m?null:~m,null!==m)){const x=o[r.anchorIdx];x&&H0(n,r.create[m],o,x)}}function $0(n,r,o){let u=Y_(r,o);if(null!==u){const m=r.remove[u];for(let v=0;v<m.length;v++){const x=m[v];if(x>0){const C=Fo(x,o);null!==C&&Vh(o[Mn],C)}else $0(n,Wm(n,~x),o)}}}function QT(){const n=[];let o,u,r=-1;function v(C,O){r=0;const A=Y_(C,O);u=null!==A?C.remove[A]:Ae}function x(){if(r<u.length){const C=u[r++];return C>0?o[C]:(n.push(r,u),v(o[It].data[~C],o),x())}return 0===n.length?null:(u=n.pop(),r=n.pop(),x())}return function m(C,O){for(o=O;n.length;)n.pop();return v(C.value,O),x}}const q_=/\ufffd(\d+):?\d*\ufffd/gi,tM=/\ufffd(\d+)\ufffd/,q0=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,Ym="\ufffd",nM=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,iM=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,rM=/\uE500/g;function vy(n,r,o,u,m,v,x){const C=za(n,u,1,null);let O=C<<kr.SHIFT,A=Ai();r===A&&(A=null),null===A&&(O|=kr.APPEND_EAGERLY),x&&(O|=kr.COMMENT,function Rg(n){void 0===Ih&&(Ih=n())}(QT)),m.push(O,null===v?"":v);const N=Jd(n,C,x?32:1,null===v?"":v,null);k0(o,N);const $=N.index;return nr(N,!1),null!==A&&r!==A&&function $m(n,r){let o=n.insertBeforeIndex;null===o?(Bp(Jf,yr),o=n.insertBeforeIndex=[null,r]):(function Be(n,r,o){n!=r&&zt(o,n,r,"==")}(Array.isArray(o),!0,"Expecting array here"),o.push(r))}(A,$),N}function J_(n,r,o,u,m,v,x){const C=x.match(q_),O=vy(n,r,o,v,u,C?null:x,!1);C&&Qf(m,x,O.index,null,0,null)}function Qf(n,r,o,u,m,v){const x=n.length,C=x+1;n.push(null,null);const O=x+2,A=r.split(q_);let N=0;for(let $=0;$<A.length;$++){const te=A[$];if(1&$){const ce=m+parseInt(te,10);n.push(-1-ce),N|=yy(ce)}else""!==te&&n.push(te)}return n.push(o<<2|(u?1:0)),u&&n.push(u,v),n[x]=N,n[C]=n.length-O,N}function yy(n){return 1<<Math.min(n,31)}function K0(n){let r,v,o="",u=0,m=!1;for(;null!==(r=nM.exec(n));)m?r[0]===`${Ym}/*${v}${Ym}`&&(u=r.index,m=!1):(o+=n.substring(u,r.index+r[0].length),v=r[1],m=!0);return o+=n.slice(u),o}function Q0(n,r,o,u,m,v){let x=0;const C={type:m.type,currentCaseLViewIndex:za(n,r,1,null),anchorIdx:v,cases:[],create:[],remove:[],update:[]};(function qm(n,r,o){n.push(yy(r.mainBinding),2,-1-r.mainBinding,o<<2|2)})(o,m,v),function gy(n,r,o){const u=n.data[r];null===u?n.data[r]=o:u.value=o}(n,v,C);const O=m.values;for(let A=0;A<O.length;A++){const N=O[A],$=[];for(let te=0;te<N.length;te++){const ce=N[te];if("string"!=typeof ce){const ge=$.push(ce)-1;N[te]=`\x3c!--\ufffd${ge}\ufffd--\x3e`}}x=aM(n,C,r,o,u,m.cases[A],N.join(""),$)|x}x&&function Ty(n,r,o){n.push(r,1,o<<2|3)}(o,x,v)}function eb(n){const r=[],o=[];let u=1,m=0;const v=by(n=n.replace(q0,function(x,C,O){return u="select"===O?0:1,m=parseInt(C.slice(1),10),""}));for(let x=0;x<v.length;){let C=v[x++].trim();1===u&&(C=C.replace(/\s*(?:=)?(\w+)\s*/,"$1")),C.length&&r.push(C);const O=by(v[x++]);r.length>o.length&&o.push(O)}return{type:u,mainBinding:m,cases:r,values:o}}function by(n){if(!n)return[];let r=0;const o=[],u=[],m=/[{}]/g;let v;for(m.lastIndex=0;v=m.exec(n);){const C=v.index;if("}"==v[0]){if(o.pop(),0==o.length){const O=n.substring(r,C);q0.test(O)?u.push(eb(O)):u.push(O),r=C+1}}else{if(0==o.length){const O=n.substring(r,C);u.push(O),r=C+1}o.push("{")}}const x=n.substring(r);return u.push(x),u}function aM(n,r,o,u,m,v,x,C){const O=[],A=[],N=[];r.cases.push(v),r.create.push(O),r.remove.push(A),r.update.push(N);const te=function Zc(n){const r=new Wg(n);return function Up(){try{return!!(new window.DOMParser).parseFromString(Gi(""),"text/html")}catch{return!1}}()?new $h(r):r}(function Jc(){return void 0!==Hh?Hh:typeof document<"u"?document:void 0}()).getInertBodyElement(x),ce=function Kh(n){return"content"in n&&function Jg(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}(te)||te;return ce?tb(n,r,o,u,O,A,N,ce,m,C,0):0}function tb(n,r,o,u,m,v,x,C,O,A,N){let $=0,te=C.firstChild;for(;te;){const ce=za(n,o,1,null);switch(te.nodeType){case Node.ELEMENT_NODE:const ge=te,Fe=ge.tagName.toLowerCase();if(Va.hasOwnProperty(Fe)){Hr(m,H_,Fe,O,ce),n.data[ce]=Fe;const Ce=ge.attributes;for(let pt=0;pt<Ce.length;pt++){const kt=Ce.item(pt),Gt=kt.name.toLowerCase();kt.value.match(q_)?Ua.hasOwnProperty(Gt)&&Qf(x,kt.value,ce,kt.name,0,xl[Gt]?Fd:null):nb(m,ce,kt)}$=tb(n,r,o,u,m,v,x,te,ce,A,N+1)|$,Ko(v,ce,N)}break;case Node.TEXT_NODE:const Ie=te.textContent||"",_e=Ie.match(q_);Hr(m,null,_e?"":Ie,O,ce),Ko(v,ce,N),_e&&($=Qf(x,Ie,ce,null,0,null)|$);break;case Node.COMMENT_NODE:const ct=tM.exec(te.textContent||"");if(ct){const pt=A[parseInt(ct[1],10)];Hr(m,z_,"",O,ce),Q0(n,o,u,O,pt,ce),Z_(v,ce,N)}}te=te.nextSibling}return $}function Ko(n,r,o){0===o&&n.push(r)}function Z_(n,r,o){0===o&&(n.push(~r),n.push(r))}function Hr(n,r,o,u,m){null!==r&&n.push(r),n.push(o,m,function U0(n,r,o){return n|r<<17|o<<1}(0,u,m))}function nb(n,r,o){n.push(r<<1|1,o.name,o.value)}function sb(n,r,o=-1){const u=_n(),m=Ke(),v=di+n,x=fo(u.consts,r),C=Ai();u.firstCreatePass&&function J0(n,r,o,u,m,v){const x=Ai(),C=[],O=[],A=[[]];m=function X0(n,r){if(function oM(n){return-1===n}(r))return K0(n);{const o=n.indexOf(`:${r}${Ym}`)+2+r.toString().length,u=n.search(new RegExp(`${Ym}\\/\\*\\d+:${r}${Ym}`));return K0(n.substring(o,u))}}(m,v);const N=function sM(n){return n.replace(rM," ")}(m).split(iM);for(let $=0;$<N.length;$++){let te=N[$];if(1&$){const ce=47===te.charCodeAt(0),Fe=(te.charCodeAt(ce?1:0),di+Number.parseInt(te.substring(ce?2:1)));if(ce)A.shift(),nr(Ai(),!1);else{const Ie=$_(n,A[0],Fe);A.unshift([]),nr(Ie,!0)}}else{const ce=by(te);for(let ge=0;ge<ce.length;ge++){let Fe=ce[ge];if(1&ge){const Ie=Fe;if("object"!=typeof Ie)throw new Error(`Unable to parse ICU expression in "${m}" message.`);Q0(n,o,O,r,Ie,vy(n,x,A[0],o,C,"",!0).index)}else""!==Fe&&J_(n,x,A[0],C,O,o,Fe)}}}n.data[u]={create:C,update:O}}(u,null===C?0:C.index,m,v,x,o);const O=u.data[v],N=Ip(u,C===m[Ei]?null:C,m);(function ZT(n,r,o,u){const m=n[Mn];for(let v=0;v<r.length;v++){const x=r[v++],C=r[v],A=(x&kr.APPEND_EAGERLY)===kr.APPEND_EAGERLY,N=x>>>kr.SHIFT;let $=n[N];null===$&&($=n[N]=(x&kr.COMMENT)===kr.COMMENT?m.createComment(C):Fh(m,C)),A&&null!==o&&sc(m,o,$,u,!1)}})(m,O.create,N,C&&8&C.type?m[C.index]:null),po(!0)}function X_(n,r,o){sb(n,r,o),function yu(){po(!1)}()}function bu(n){return function qT(n){n&&(Zf|=1<<Math.min(Kf,31)),Kf++}(tn(Ke(),qs(),n)),bu}function Jm(n){!function JT(n,r,o){if(Kf>0){const u=n.data[o];z0(n,r,Array.isArray(u)?u:u.update,mr()-Kf-1,Zf)}Zf=0,Kf=0}(_n(),Ke(),n+di)}function wy(n,r,o,u,m){if(n=mt(n),Array.isArray(n))for(let v=0;v<n.length;v++)wy(n[v],r,o,u,m);else{const v=_n(),x=Ke();let C=dc(n)?n:mt(n.provide),O=rf(n);const A=Xn(),N=1048575&A.providerIndexes,$=A.directiveStart,te=A.providerIndexes>>20;if(dc(n)||!n.multi){const ce=new Sn(O,m,vc),ge=mh(C,r,m?N:N+te,$);-1===ge?(Ni(Xl(A,x),v,C),Ry(v,n,r.length),r.push(C),A.directiveStart++,A.directiveEnd++,m&&(A.providerIndexes+=1048576),o.push(ce),x.push(ce)):(o[ge]=ce,x[ge]=ce)}else{const ce=mh(C,r,N+te,$),ge=mh(C,r,N,N+te),Ie=ge>=0&&o[ge];if(m&&!Ie||!m&&!(ce>=0&&o[ce])){Ni(Xl(A,x),v,C);const _e=function pM(n,r,o,u,m){const v=new Sn(n,o,vc);return v.multi=[],v.index=r,v.componentProviders=0,ob(v,m,u&&!o),v}(m?fM:ab,o.length,m,u,O);!m&&Ie&&(o[ge].providerFactory=_e),Ry(v,n,r.length,0),r.push(C),A.directiveStart++,A.directiveEnd++,m&&(A.providerIndexes+=1048576),o.push(_e),x.push(_e)}else Ry(v,n,ce>-1?ce:ge,ob(o[m?ge:ce],O,!m&&u));!m&&u&&Ie&&o[ge].componentProviders++}}}function Ry(n,r,o,u){const m=dc(r),v=function Qg(n){return!!n.useClass}(r);if(m||v){const O=(v?mt(r.useClass):r).prototype.ngOnDestroy;if(O){const A=n.destroyHooks||(n.destroyHooks=[]);if(!m&&r.multi){const N=A.indexOf(o);-1===N?A.push(o,[u,O]):A[N+1].push(u,O)}else A.push(o,O)}}}function ob(n,r,o){return o&&n.componentProviders++,n.multi.push(r)-1}function mh(n,r,o,u){for(let m=o;m<u;m++)if(r[m]===n)return m;return-1}function ab(n,r,o,u){return Sy(this.multi,[])}function fM(n,r,o,u){const m=this.multi;let v;if(this.providerFactory){const x=this.providerFactory.componentProviders,C=Kr(o,o[It],this.providerFactory.index,u);v=C.slice(0,x),Sy(m,v);for(let O=x;O<C.length;O++)v.push(C[O])}else v=[],Sy(m,v);return v}function Sy(n,r){for(let o=0;o<n.length;o++)r.push((0,n[o])());return r}function lb(n,r=[]){return o=>{o.providersResolver=(u,m)=>function hM(n,r,o){const u=_n();if(u.firstCreatePass){const m=Gr(n);wy(o,u.data,u.blueprint,m,!0),wy(r,u.data,u.blueprint,m,!1)}}(u,m?m(n):n,r)}}class ep{}class cb{}function mM(n,r){return new ub(n,r??null)}class ub extends ep{constructor(r,o){super(),this._parent=o,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Of(this);const u=fr(r);this._bootstrapComponents=To(u.bootstrap),this._r3Injector=__(r,o,[{provide:ep,useValue:this},{provide:Lu,useValue:this.componentFactoryResolver}],nt(r),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(r)}get injector(){return this._r3Injector}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class Cy extends cb{constructor(r){super(),this.moduleType=r}create(r){return new ub(this.moduleType,r)}}class db extends ep{constructor(r,o,u){super(),this.componentFactoryResolver=new Of(this),this.instance=null;const m=new nf([...r,{provide:ep,useValue:this},{provide:Lu,useValue:this.componentFactoryResolver}],o||Qc(),u,new Set(["environment"]));this.injector=m,m.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(r){this.injector.onDestroy(r)}}function Ey(n,r,o=null){return new db(n,r,o).injector}let gM=(()=>{class n{constructor(o){this._injector=o,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(o){if(!o.standalone)return null;if(!this.cachedInjectors.has(o.id)){const u=Zp(0,o.type),m=u.length>0?Ey([u],this._injector,`Standalone[${o.type.name}]`):null;this.cachedInjectors.set(o.id,m)}return this.cachedInjectors.get(o.id)}ngOnDestroy(){try{for(const o of this.cachedInjectors.values())null!==o&&o.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=cn({token:n,providedIn:"environment",factory:()=>new n(Ri(hc))}),n})();function hb(n){n.getStandaloneInjector=r=>r.get(gM).getOrCreateStandaloneInjector(n)}function yb(n,r,o){const u=ur()+n,m=Ke();return m[u]===Dn?vn(m,u,o?r.call(o):r()):function Ct(n,r){return n[r]}(m,u)}function bb(n,r,o,u){return xb(Ke(),ur(),n,r,o,u)}function Tb(n,r,o,u,m){return function Db(n,r,o,u,m,v,x){const C=r+o;return Cn(n,C,m,v)?vn(n,C+2,x?u.call(x,m,v):u(m,v)):Zm(n,C+2)}(Ke(),ur(),n,r,o,u,m)}function Mb(n,r,o,u,m,v){return function wb(n,r,o,u,m,v,x,C){const O=r+o;return function En(n,r,o,u,m){const v=Cn(n,r,o,u);return tn(n,r+2,m)||v}(n,O,m,v,x)?vn(n,O+3,C?u.call(C,m,v,x):u(m,v,x)):Zm(n,O+3)}(Ke(),ur(),n,r,o,u,m,v)}function Zm(n,r){const o=n[r];return o===Dn?void 0:o}function xb(n,r,o,u,m,v){const x=r+o;return tn(n,x,m)?vn(n,x+1,v?u.call(v,m):u(m)):Zm(n,x+1)}function Cb(n,r){const o=_n();let u;const m=n+di;o.firstCreatePass?(u=function AM(n,r){if(r)for(let o=r.length-1;o>=0;o--){const u=r[o];if(n===u.name)return u}}(r,o.pipeRegistry),o.data[m]=u,u.onDestroy&&(o.destroyHooks??(o.destroyHooks=[])).push(m,u.onDestroy)):u=o.data[m];const v=u.factory||(u.factory=xs(u.type)),x=jt(vc);try{const C=Es(!1),O=v();return Es(C),function Sc(n,r,o,u){o>=n.data.length&&(n.data[o]=null,n.blueprint[o]=null),r[o]=u}(o,Ke(),m,O),O}finally{jt(x)}}function Eb(n,r,o){const u=n+di,m=Ke(),v=$s(m,u);return function Km(n,r){return n[It].data[r].pure}(m,u)?xb(m,ur(),r,v.transform,o,v):v.transform(o)}function Iy(n){return r=>{setTimeout(n,void 0,r)}}const Oc=class FM extends c.x{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,o,u){let m=r,v=o||(()=>null),x=u;if(r&&"object"==typeof r){const O=r;m=O.next?.bind(O),v=O.error?.bind(O),x=O.complete?.bind(O)}this.__isAsync&&(v=Iy(v),m&&(m=Iy(m)),x&&(x=Iy(x)));const C=super.subscribe({next:m,error:v,complete:x});return r instanceof W.w0&&r.add(C),C}};function LM(){return this._results[Symbol.iterator]()}class Py{get changes(){return this._changes||(this._changes=new Oc)}constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const o=Py.prototype;o[Symbol.iterator]||(o[Symbol.iterator]=LM)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,o){return this._results.reduce(r,o)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,o){const u=this;u.dirty=!1;const m=function Xr(n){return n.flat(Number.POSITIVE_INFINITY)}(r);(this._changesDetected=!function fa(n,r,o){if(n.length!==r.length)return!1;for(let u=0;u<n.length;u++){let m=n[u],v=r[u];if(o&&(m=o(m),v=o(v)),v!==m)return!1}return!0}(u._results,m,o))&&(u._results=m,u.length=m.length,u.last=m[this.length-1],u.first=m[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Xm=(()=>{class n{}return n.__NG_ELEMENT_ID__=kM,n})();const BM=Xm,jM=class extends BM{constructor(r,o,u){super(),this._declarationLView=r,this._declarationTContainer=o,this.elementRef=u}createEmbeddedView(r,o){const u=this._declarationTContainer.tView,m=Ju(this._declarationLView,u,r,16,null,u.declTNode,null,null,null,null,o||null);m[Hs]=this._declarationLView[this._declarationTContainer.index];const x=this._declarationLView[Tr];return null!==x&&(m[Tr]=x.createEmbeddedView(u)),Wa(u,m,r),new ih(m)}};function kM(){return ev(Xn(),Ke())}function ev(n,r){return 4&n.type?new jM(r,n,tu(n,r)):null}let tv=(()=>{class n{}return n.__NG_ELEMENT_ID__=GM,n})();function GM(){return Pb(Xn(),Ke())}const VM=tv,Ab=class extends VM{constructor(r,o,u){super(),this._lContainer=r,this._hostTNode=o,this._hostLView=u}get element(){return tu(this._hostTNode,this._hostLView)}get injector(){return new _r(this._hostTNode,this._hostLView)}get parentInjector(){const r=ir(this._hostTNode,this._hostLView);if(Fa(r)){const o=pl(r,this._hostLView),u=fl(r);return new _r(o[It].data[u+8],o)}return new _r(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const o=Ib(this._lContainer);return null!==o&&o[r]||null}get length(){return this._lContainer.length-pr}createEmbeddedView(r,o,u){let m,v;"number"==typeof u?m=u:null!=u&&(m=u.index,v=u.injector);const x=r.createEmbeddedView(o||{},v);return this.insert(x,m),x}createComponent(r,o,u,m,v){const x=r&&!function $o(n){return"function"==typeof n}(r);let C;if(x)C=o;else{const $=o||{};C=$.index,u=$.injector,m=$.projectableNodes,v=$.environmentInjector||$.ngModuleRef}const O=x?r:new Al(qn(r)),A=u||this.parentInjector;if(!v&&null==O.ngModule){const te=(x?A:this.parentInjector).get(hc,null);te&&(v=te)}const N=O.create(A,m,void 0,v);return this.insert(N.hostView,C),N}insert(r,o){const u=r._lView,m=u[It];if(function ho(n){return Wi(n[Ci])}(u)){const N=this.indexOf(r);if(-1!==N)this.detach(N);else{const $=u[Ci],te=new Ab($,$[Ei],$[Ci]);te.detach(te.indexOf(r))}}const v=this._adjustIndex(o),x=this._lContainer;!function Ng(n,r,o,u){const m=pr+u,v=o.length;u>0&&(o[m-1][Or]=r),u<v-pr?(r[Or]=o[m],D(o,pr+u,r)):(o.push(r),r[Or]=null),r[Ci]=o;const x=r[Hs];null!==x&&o!==x&&function Fg(n,r){const o=n[qr];r[zi]!==r[Ci][Ci][zi]&&(n[hi]=!0),null===o?n[qr]=[r]:o.push(r)}(x,r);const C=r[Tr];null!==C&&C.insertView(n),r[mn]|=64}(m,u,x,v);const C=Gh(v,x),O=u[Mn],A=Cd(O,x[sl]);return null!==A&&function Ig(n,r,o,u,m,v){u[_s]=m,u[Ei]=r,Id(n,u,o,1,m,v)}(m,x[Ei],O,u,A,C),r.attachToViewContainerRef(),D(Oy(x),v,r),r}move(r,o){return this.insert(r,o)}indexOf(r){const o=Ib(this._lContainer);return null!==o?o.indexOf(r):-1}remove(r){const o=this._adjustIndex(r,-1),u=Bh(this._lContainer,o);u&&(R(Oy(this._lContainer),o),Ep(u[It],u))}detach(r){const o=this._adjustIndex(r,-1),u=Bh(this._lContainer,o);return u&&null!=R(Oy(this._lContainer),o)?new ih(u):null}_adjustIndex(r,o=0){return r??this.length+o}};function Ib(n){return n[Ao]}function Oy(n){return n[Ao]||(n[Ao]=[])}function Pb(n,r){let o;const u=r[n.index];if(Wi(u))o=u;else{let m;if(8&n.type)m=gi(u);else{const v=r[Mn];m=v.createComment("");const x=Zr(n,r);sc(v,Cd(v,x),m,function jg(n,r){return n.nextSibling(r)}(v,x),!1)}r[n.index]=o=Xu(u,r,m,n),Qu(r,o)}return new Ab(o,n,r)}class Ny{constructor(r){this.queryList=r,this.matches=null}clone(){return new Ny(this.queryList)}setDirty(){this.queryList.setDirty()}}class Fy{constructor(r=[]){this.queries=r}createEmbeddedView(r){const o=r.queries;if(null!==o){const u=null!==r.contentQueries?r.contentQueries[0]:o.length,m=[];for(let v=0;v<u;v++){const x=o.getByIndex(v);m.push(this.queries[x.indexInDeclarationView].clone())}return new Fy(m)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let o=0;o<this.queries.length;o++)null!==Gb(r,o).matches&&this.queries[o].setDirty()}}class Ly{constructor(r,o,u=null){this.predicate=r,this.flags=o,this.read=u}}class Qm{constructor(r=[]){this.queries=r}elementStart(r,o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementStart(r,o)}elementEnd(r){for(let o=0;o<this.queries.length;o++)this.queries[o].elementEnd(r)}embeddedTView(r){let o=null;for(let u=0;u<this.length;u++){const m=null!==o?o.length:0,v=this.getByIndex(u).embeddedTView(r,m);v&&(v.indexInDeclarationView=u,null!==o?o.push(v):o=[v])}return null!==o?new Qm(o):null}template(r,o){for(let u=0;u<this.queries.length;u++)this.queries[u].template(r,o)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class By{constructor(r,o=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=o}elementStart(r,o){this.isApplyingToNode(o)&&this.matchTNode(r,o)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,o){this.elementStart(r,o)}embeddedTView(r,o){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,o),new By(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const o=this._declarationNodeIndex;let u=r.parent;for(;null!==u&&8&u.type&&u.index!==o;)u=u.parent;return o===(null!==u?u.index:-1)}return this._appliesToNextNode}matchTNode(r,o){const u=this.metadata.predicate;if(Array.isArray(u))for(let m=0;m<u.length;m++){const v=u[m];this.matchTNodeWithReadOption(r,o,UM(o,v)),this.matchTNodeWithReadOption(r,o,zo(o,r,v,!1,!1))}else u===Xm?4&o.type&&this.matchTNodeWithReadOption(r,o,-1):this.matchTNodeWithReadOption(r,o,zo(o,r,u,!1,!1))}matchTNodeWithReadOption(r,o,u){if(null!==u){const m=this.metadata.read;if(null!==m)if(m===Bu||m===tv||m===Xm&&4&o.type)this.addMatch(o.index,-2);else{const v=zo(o,r,m,!1,!1);null!==v&&this.addMatch(o.index,v)}else this.addMatch(o.index,u)}}addMatch(r,o){null===this.matches?this.matches=[r,o]:this.matches.push(r,o)}}function UM(n,r){const o=n.localNames;if(null!==o)for(let u=0;u<o.length;u+=2)if(o[u]===r)return o[u+1];return null}function zM(n,r,o,u){return-1===o?function HM(n,r){return 11&n.type?tu(n,r):4&n.type?ev(n,r):null}(r,n):-2===o?function WM(n,r,o){return o===Bu?tu(r,n):o===Xm?ev(r,n):o===tv?Pb(r,n):void 0}(n,r,u):Kr(n,n[It],o,r)}function Ob(n,r,o,u){const m=r[Tr].queries[u];if(null===m.matches){const v=n.data,x=o.matches,C=[];for(let O=0;O<x.length;O+=2){const A=x[O];C.push(A<0?null:zM(r,v[A],x[O+1],o.metadata.read))}m.matches=C}return m.matches}function jy(n,r,o,u){const m=n.queries.getByIndex(o),v=m.matches;if(null!==v){const x=Ob(n,r,m,o);for(let C=0;C<v.length;C+=2){const O=v[C];if(O>0)u.push(x[C/2]);else{const A=v[C+1],N=r[-O];for(let $=pr;$<N.length;$++){const te=N[$];te[Hs]===te[Ci]&&jy(te[It],te,A,u)}if(null!==N[qr]){const $=N[qr];for(let te=0;te<$.length;te++){const ce=$[te];jy(ce[It],ce,A,u)}}}}}return u}function Nb(n){const r=Ke(),o=_n(),u=Uc();gr(u+1);const m=Gb(o,u);if(n.dirty&&function Du(n){return 4==(4&n[mn])}(r)===(2==(2&m.metadata.flags))){if(null===m.matches)n.reset([]);else{const v=m.crossesNgTemplate?jy(o,r,u,[]):Ob(o,r,m,u);n.reset(v,r_),n.notifyOnChanges()}return!0}return!1}function Fb(n,r,o){const u=_n();u.firstCreatePass&&(kb(u,new Ly(n,r,o),-1),2==(2&r)&&(u.staticViewQueries=!0)),jb(u,Ke(),r)}function Lb(n,r,o,u){const m=_n();if(m.firstCreatePass){const v=Xn();kb(m,new Ly(r,o,u),v.index),function YM(n,r){const o=n.contentQueries||(n.contentQueries=[]);r!==(o.length?o[o.length-1]:-1)&&o.push(n.queries.length-1,r)}(m,n),2==(2&o)&&(m.staticContentQueries=!0)}jb(m,Ke(),o)}function Bb(){return function $M(n,r){return n[Tr].queries[r].queryList}(Ke(),Uc())}function jb(n,r,o){const u=new Py(4==(4&o));Zu(n,r,u,u.destroy),null===r[Tr]&&(r[Tr]=new Fy),r[Tr].queries.push(new Ny(u))}function kb(n,r,o){null===n.queries&&(n.queries=new Qm),n.queries.track(new By(r,o))}function Gb(n,r){return n.queries.getByIndex(r)}function Vb(n,r){return ev(n,r)}function ky(n){return!!fr(n)}function rv(...n){}const oT=new ki("Application Initializer");let sv=(()=>{class n{constructor(o){this.appInits=o,this.resolve=rv,this.reject=rv,this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,m)=>{this.resolve=u,this.reject=m})}runInitializers(){if(this.initialized)return;const o=[],u=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let m=0;m<this.appInits.length;m++){const v=this.appInits[m]();if(kf(v))o.push(v);else if(hs(v)){const x=new Promise((C,O)=>{v.subscribe({complete:C,error:O})});o.push(x)}}Promise.all(o).then(()=>{u()}).catch(m=>{this.reject(m)}),0===o.length&&u(),this.initialized=!0}}return n.\u0275fac=function(o){return new(o||n)(Ri(oT,8))},n.\u0275prov=cn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const aT=new ki("AppId",{providedIn:"root",factory:function lT(){return`${Wy()}${Wy()}${Wy()}`}});function Wy(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const cT=new ki("Platform Initializer"),ux=new ki("Platform ID",{providedIn:"platform",factory:()=>"unknown"});let dx=(()=>{class n{log(o){console.log(o)}warn(o){console.warn(o)}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=cn({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const ov=new ki("LocaleId",{providedIn:"root",factory:()=>Wr(ov,on.Optional|on.SkipSelf)||function hx(){return typeof $localize<"u"&&$localize.locale||fd}()}),fx=new ki("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class px{constructor(r,o){this.ngModuleFactory=r,this.componentFactories=o}}let mx=(()=>{class n{compileModuleSync(o){return new Cy(o)}compileModuleAsync(o){return Promise.resolve(this.compileModuleSync(o))}compileModuleAndAllComponentsSync(o){const u=this.compileModuleSync(o),v=To(fr(o).declarations).reduce((x,C)=>{const O=qn(C);return O&&x.push(new Al(O)),x},[]);return new px(u,v)}compileModuleAndAllComponentsAsync(o){return Promise.resolve(this.compileModuleAndAllComponentsSync(o))}clearCache(){}clearCacheFor(o){}getModuleId(o){}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=cn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const vx=(()=>Promise.resolve(0))();function $y(n){typeof Zone>"u"?vx.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class Ka{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Oc(!1),this.onMicrotaskEmpty=new Oc(!1),this.onStable=new Oc(!1),this.onError=new Oc(!1),typeof Zone>"u")throw new Ne(908,!1);Zone.assertZonePatched();const m=this;m._nesting=0,m._outer=m._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(m._inner=m._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(m._inner=m._inner.fork(Zone.longStackTraceZoneSpec)),m.shouldCoalesceEventChangeDetection=!u&&o,m.shouldCoalesceRunChangeDetection=u,m.lastRequestAnimationFrameId=-1,m.nativeRequestAnimationFrame=function yx(){let n=ui.requestAnimationFrame,r=ui.cancelAnimationFrame;if(typeof Zone<"u"&&n&&r){const o=n[Zone.__symbol__("OriginalDelegate")];o&&(n=o);const u=r[Zone.__symbol__("OriginalDelegate")];u&&(r=u)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:r}}().nativeRequestAnimationFrame,function hT(n){const r=()=>{!function Tx(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(ui,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,av(n),n.isCheckStableRunning=!0,Yy(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),av(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(o,u,m,v,x,C)=>{try{return fT(n),o.invokeTask(m,v,x,C)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===v.type||n.shouldCoalesceRunChangeDetection)&&r(),pT(n)}},onInvoke:(o,u,m,v,x,C,O)=>{try{return fT(n),o.invoke(m,v,x,C,O)}finally{n.shouldCoalesceRunChangeDetection&&r(),pT(n)}},onHasTask:(o,u,m,v)=>{o.hasTask(m,v),u===m&&("microTask"==v.change?(n._hasPendingMicrotasks=v.microTask,av(n),Yy(n)):"macroTask"==v.change&&(n.hasPendingMacrotasks=v.macroTask))},onHandleError:(o,u,m,v)=>(o.handleError(m,v),n.runOutsideAngular(()=>n.onError.emit(v)),!1)})}(m)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ka.isInAngularZone())throw new Ne(909,!1)}static assertNotInAngularZone(){if(Ka.isInAngularZone())throw new Ne(909,!1)}run(r,o,u){return this._inner.run(r,o,u)}runTask(r,o,u,m){const v=this._inner,x=v.scheduleEventTask("NgZoneEvent: "+m,r,bx,rv,rv);try{return v.runTask(x,o,u)}finally{v.cancelTask(x)}}runGuarded(r,o,u){return this._inner.runGuarded(r,o,u)}runOutsideAngular(r){return this._outer.run(r)}}const bx={};function Yy(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function av(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function fT(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function pT(n){n._nesting--,Yy(n)}class Mx{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Oc,this.onMicrotaskEmpty=new Oc,this.onStable=new Oc,this.onError=new Oc}run(r,o,u){return r.apply(o,u)}runGuarded(r,o,u){return r.apply(o,u)}runOutsideAngular(r){return r()}runTask(r,o,u,m){return r.apply(o,u)}}const mT=new ki(""),gT=new ki("");let qy,xx=(()=>{class n{constructor(o,u,m){this._ngZone=o,this.registry=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,qy||(function Dx(n){qy=n}(m),m.addToWindow(u)),this._watchAngularEvents(),o.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ka.assertNotInAngularZone(),$y(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())$y(()=>{for(;0!==this._callbacks.length;){let o=this._callbacks.pop();clearTimeout(o.timeoutId),o.doneCb(this._didWork)}this._didWork=!1});else{let o=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(o)||(clearTimeout(u.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(o=>({source:o.source,creationLocation:o.creationLocation,data:o.data})):[]}addCallback(o,u,m){let v=-1;u&&u>0&&(v=setTimeout(()=>{this._callbacks=this._callbacks.filter(x=>x.timeoutId!==v),o(this._didWork,this.getPendingTasks())},u)),this._callbacks.push({doneCb:o,timeoutId:v,updateCb:m})}whenStable(o,u,m){if(m&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(o,u,m),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(o){this.registry.registerApplication(o,this)}unregisterApplication(o){this.registry.unregisterApplication(o)}findProviders(o,u,m){return[]}}return n.\u0275fac=function(o){return new(o||n)(Ri(Ka),Ri(_T),Ri(gT))},n.\u0275prov=cn({token:n,factory:n.\u0275fac}),n})(),_T=(()=>{class n{constructor(){this._applications=new Map}registerApplication(o,u){this._applications.set(o,u)}unregisterApplication(o){this._applications.delete(o)}unregisterAllApplications(){this._applications.clear()}getTestability(o){return this._applications.get(o)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(o,u=!0){return qy?.findTestabilityInTree(this,o,u)??null}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=cn({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const Tu=!1;let pd=null;const vT=new ki("AllowMultipleToken"),Jy=new ki("PlatformDestroyListeners"),gh=new ki("appBootstrapListener");class Sx{constructor(r,o){this.name=r,this.token=o}}function cv(n,r,o=[]){const u=`Platform: ${r}`,m=new ki(u);return(v=[])=>{let x=Zy();if(!x||x.injector.get(vT,!1)){const C=[...o,...v,{provide:m,useValue:!0}];n?n(C):function Cx(n){if(pd&&!pd.get(vT,!1))throw new Ne(400,!1);pd=n;const r=n.get(TT);(function yT(n){const r=n.get(cT,null);r&&r.forEach(o=>o())})(n)}(function bT(n=[],r){return iu.create({name:r,providers:[{provide:$n,useValue:"platform"},{provide:Jy,useValue:new Set([()=>pd=null])},...n]})}(C,u))}return function Ix(n){const r=Zy();if(!r)throw new Ne(401,!1);return r}()}}function Zy(){return pd?.get(TT)??null}let TT=(()=>{class n{constructor(o){this._injector=o,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(o,u){const m=function MT(n,r){let o;return o="noop"===n?new Mx:("zone.js"===n?void 0:n)||new Ka(r),o}(u?.ngZone,function uv(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(u)),v=[{provide:Ka,useValue:m}];return m.run(()=>{const x=iu.create({providers:v,parent:this.injector,name:o.moduleType.name}),C=o.create(x),O=C.injector.get(zd,null);if(!O)throw new Ne(402,!1);return m.runOutsideAngular(()=>{const A=m.onError.subscribe({next:N=>{O.handleError(N)}});C.onDestroy(()=>{ng(this._modules,C),A.unsubscribe()})}),function xT(n,r,o){try{const u=o();return kf(u)?u.catch(m=>{throw r.runOutsideAngular(()=>n.handleError(m)),m}):u}catch(u){throw r.runOutsideAngular(()=>n.handleError(u)),u}}(O,m,()=>{const A=C.injector.get(sv);return A.runInitializers(),A.donePromise.then(()=>(W_(C.injector.get(ov,fd)||fd),this._moduleDoBootstrap(C),C))})})}bootstrapModule(o,u=[]){const m=DT({},u);return function lv(n,r,o){const u=new Cy(o);return Promise.resolve(u)}(0,0,o).then(v=>this.bootstrapModuleFactory(v,m))}_moduleDoBootstrap(o){const u=o.injector.get(tg);if(o._bootstrapComponents.length>0)o._bootstrapComponents.forEach(m=>u.bootstrap(m));else{if(!o.instance.ngDoBootstrap)throw new Ne(-403,!1);o.instance.ngDoBootstrap(u)}this._modules.push(o)}onDestroy(o){this._destroyListeners.push(o)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ne(404,!1);this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u());const o=this._injector.get(Jy,null);o&&(o.forEach(u=>u()),o.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(o){return new(o||n)(Ri(iu))},n.\u0275prov=cn({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function DT(n,r){return Array.isArray(r)?r.reduce(DT,n):{...n,...r}}let tg=(()=>{class n{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(o,u,m){this._zone=o,this._injector=u,this._exceptionHandler=m,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const v=new be.y(C=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{C.next(this._stable),C.complete()})}),x=new be.y(C=>{let O;this._zone.runOutsideAngular(()=>{O=this._zone.onStable.subscribe(()=>{Ka.assertNotInAngularZone(),$y(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,C.next(!0))})})});const A=this._zone.onUnstable.subscribe(()=>{Ka.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{C.next(!1)}))});return()=>{O.unsubscribe(),A.unsubscribe()}});this.isStable=(0,Oe.T)(v,x.pipe(function Vt(n={}){const{connector:r=(()=>new c.x),resetOnError:o=!0,resetOnComplete:u=!0,resetOnRefCountZero:m=!0}=n;return v=>{let x,C,O,A=0,N=!1,$=!1;const te=()=>{C?.unsubscribe(),C=void 0},ce=()=>{te(),x=O=void 0,N=$=!1},ge=()=>{const Fe=x;ce(),Fe?.unsubscribe()};return(0,ft.e)((Fe,Ie)=>{A++,!$&&!N&&te();const _e=O=O??r();Ie.add(()=>{A--,0===A&&!$&&!N&&(C=ht(ge,m))}),_e.subscribe(Ie),!x&&A>0&&(x=new tt.Hp({next:ct=>_e.next(ct),error:ct=>{$=!0,te(),C=ht(ce,o,ct),_e.error(ct)},complete:()=>{N=!0,te(),C=ht(ce,u),_e.complete()}}),(0,Se.Xf)(Fe).subscribe(x))})(v)}}()))}bootstrap(o,u){const m=o instanceof tm;if(!this._injector.get(sv).done){!m&&br(o);throw new Ne(405,Tu)}let x;x=m?o:this._injector.get(Lu).resolveComponentFactory(o),this.componentTypes.push(x.componentType);const C=function Rx(n){return n.isBoundToModule}(x)?void 0:this._injector.get(ep),A=x.create(iu.NULL,[],u||x.selector,C),N=A.location.nativeElement,$=A.injector.get(mT,null);return $?.registerApplication(N),A.onDestroy(()=>{this.detachView(A.hostView),ng(this.components,A),$?.unregisterApplication(N)}),this._loadComponent(A),A}tick(){if(this._runningTick)throw new Ne(101,!1);try{this._runningTick=!0;for(let o of this._views)o.detectChanges()}catch(o){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(o))}finally{this._runningTick=!1}}attachView(o){const u=o;this._views.push(u),u.attachToAppRef(this)}detachView(o){const u=o;ng(this._views,u),u.detachFromAppRef()}_loadComponent(o){this.attachView(o.hostView),this.tick(),this.components.push(o);const u=this._injector.get(gh,[]);u.push(...this._bootstrapListeners),u.forEach(m=>m(o))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(o=>o()),this._views.slice().forEach(o=>o.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(o){return this._destroyListeners.push(o),()=>ng(this._destroyListeners,o)}destroy(){if(this._destroyed)throw new Ne(406,!1);const o=this._injector;o.destroy&&!o.destroyed&&o.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(o){return new(o||n)(Ri(Ka),Ri(hc),Ri(zd))},n.\u0275prov=cn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function ng(n,r){const o=n.indexOf(r);o>-1&&n.splice(o,1)}let RT=(()=>{class n{}return n.__NG_ELEMENT_ID__=ST,n})();function ST(n){return function Qy(n,r,o){if(lo(n)&&!o){const u=Nr(n.index,r);return new ih(u,u)}return 47&n.type?new ih(r[zi],r):null}(Xn(),Ke(),16==(16&n))}class B{constructor(){}supports(r){return ye(r)}create(r){return new J(r)}}const z=(n,r)=>r;class J{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||z}forEachItem(r){let o;for(o=this._itHead;null!==o;o=o._next)r(o)}forEachOperation(r){let o=this._itHead,u=this._removalsHead,m=0,v=null;for(;o||u;){const x=!u||o&&o.currentIndex<ae(u,m,v)?o:u,C=ae(x,m,v),O=x.currentIndex;if(x===u)m--,u=u._nextRemoved;else if(o=o._next,null==x.previousIndex)m++;else{v||(v=[]);const A=C-m,N=O-m;if(A!=N){for(let te=0;te<A;te++){const ce=te<v.length?v[te]:v[te]=0,ge=ce+te;N<=ge&&ge<A&&(v[te]=ce+1)}v[x.previousIndex]=N-A}}C!==O&&r(x,C,O)}}forEachPreviousItem(r){let o;for(o=this._previousItHead;null!==o;o=o._nextPrevious)r(o)}forEachAddedItem(r){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)r(o)}forEachMovedItem(r){let o;for(o=this._movesHead;null!==o;o=o._nextMoved)r(o)}forEachRemovedItem(r){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)r(o)}forEachIdentityChange(r){let o;for(o=this._identityChangesHead;null!==o;o=o._nextIdentityChange)r(o)}diff(r){if(null==r&&(r=[]),!ye(r))throw new Ne(900,!1);return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let m,v,x,o=this._itHead,u=!1;if(Array.isArray(r)){this.length=r.length;for(let C=0;C<this.length;C++)v=r[C],x=this._trackByFn(C,v),null!==o&&Object.is(o.trackById,x)?(u&&(o=this._verifyReinsertion(o,v,x,C)),Object.is(o.item,v)||this._addIdentityChange(o,v)):(o=this._mismatch(o,v,x,C),u=!0),o=o._next}else m=0,function wt(n,r){if(Array.isArray(n))for(let o=0;o<n.length;o++)r(n[o]);else{const o=n[Symbol.iterator]();let u;for(;!(u=o.next()).done;)r(u.value)}}(r,C=>{x=this._trackByFn(m,C),null!==o&&Object.is(o.trackById,x)?(u&&(o=this._verifyReinsertion(o,C,x,m)),Object.is(o.item,C)||this._addIdentityChange(o,C)):(o=this._mismatch(o,C,x,m),u=!0),o=o._next,m++}),this.length=m;return this._truncate(o),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,o,u,m){let v;return null===r?v=this._itTail:(v=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(r.item,o)||this._addIdentityChange(r,o),this._reinsertAfter(r,v,m)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(u,m))?(Object.is(r.item,o)||this._addIdentityChange(r,o),this._moveAfter(r,v,m)):r=this._addAfter(new H(o,u),v,m),r}_verifyReinsertion(r,o,u,m){let v=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==v?r=this._reinsertAfter(v,r._prev,m):r.currentIndex!=m&&(r.currentIndex=m,this._addToMoves(r,m)),r}_truncate(r){for(;null!==r;){const o=r._next;this._addToRemovals(this._unlink(r)),r=o}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,o,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const m=r._prevRemoved,v=r._nextRemoved;return null===m?this._removalsHead=v:m._nextRemoved=v,null===v?this._removalsTail=m:v._prevRemoved=m,this._insertAfter(r,o,u),this._addToMoves(r,u),r}_moveAfter(r,o,u){return this._unlink(r),this._insertAfter(r,o,u),this._addToMoves(r,u),r}_addAfter(r,o,u){return this._insertAfter(r,o,u),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,o,u){const m=null===o?this._itHead:o._next;return r._next=m,r._prev=o,null===m?this._itTail=r:m._prev=r,null===o?this._itHead=r:o._next=r,null===this._linkedRecords&&(this._linkedRecords=new ne),this._linkedRecords.put(r),r.currentIndex=u,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const o=r._prev,u=r._next;return null===o?this._itHead=u:o._next=u,null===u?this._itTail=o:u._prev=o,r}_addToMoves(r,o){return r.previousIndex===o||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new ne),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,o){return r.item=o,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class H{constructor(r,o){this.item=r,this.trackById=o,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Y{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,o){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===o||o<=u.currentIndex)&&Object.is(u.trackById,r))return u;return null}remove(r){const o=r._prevDup,u=r._nextDup;return null===o?this._head=u:o._nextDup=u,null===u?this._tail=o:u._prevDup=o,null===this._head}}class ne{constructor(){this.map=new Map}put(r){const o=r.trackById;let u=this.map.get(o);u||(u=new Y,this.map.set(o,u)),u.add(r)}get(r,o){const m=this.map.get(r);return m?m.get(r,o):null}remove(r){const o=r.trackById;return this.map.get(o).remove(r)&&this.map.delete(o),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function ae(n,r,o){const u=n.previousIndex;if(null===u)return u;let m=0;return o&&u<o.length&&(m=o[u]),u+r+m}class he{constructor(){}supports(r){return r instanceof Map||_t(r)}create(){return new Z}}class Z{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let o;for(o=this._mapHead;null!==o;o=o._next)r(o)}forEachPreviousItem(r){let o;for(o=this._previousMapHead;null!==o;o=o._nextPrevious)r(o)}forEachChangedItem(r){let o;for(o=this._changesHead;null!==o;o=o._nextChanged)r(o)}forEachAddedItem(r){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)r(o)}forEachRemovedItem(r){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)r(o)}diff(r){if(r){if(!(r instanceof Map||_t(r)))throw new Ne(900,!1)}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let o=this._mapHead;if(this._appendAfter=null,this._forEach(r,(u,m)=>{if(o&&o.key===m)this._maybeAddToChanges(o,u),this._appendAfter=o,o=o._next;else{const v=this._getOrCreateRecordForKey(m,u);o=this._insertBeforeOrAppend(o,v)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(let u=o;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,o){if(r){const u=r._prev;return o._next=r,o._prev=u,r._prev=o,u&&(u._next=o),r===this._mapHead&&(this._mapHead=o),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=o,o._prev=this._appendAfter):this._mapHead=o,this._appendAfter=o,null}_getOrCreateRecordForKey(r,o){if(this._records.has(r)){const m=this._records.get(r);this._maybeAddToChanges(m,o);const v=m._prev,x=m._next;return v&&(v._next=x),x&&(x._prev=v),m._next=null,m._prev=null,m}const u=new ue(r);return this._records.set(r,u),u.currentValue=o,this._addToAdditions(u),u}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,o){Object.is(o,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=o,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,o){r instanceof Map?r.forEach(o):Object.keys(r).forEach(u=>o(r[u],u))}}class ue{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function me(){return new Le([new B])}let Le=(()=>{class n{constructor(o){this.factories=o}static create(o,u){if(null!=u){const m=u.factories.slice();o=o.concat(m)}return new n(o)}static extend(o){return{provide:n,useFactory:u=>n.create(o,u||me()),deps:[[n,new ic,new bl]]}}find(o){const u=this.factories.find(m=>m.supports(o));if(null!=u)return u;throw new Ne(901,!1)}}return n.\u0275prov=cn({token:n,providedIn:"root",factory:me}),n})();function Ee(){return new Me([new he])}let Me=(()=>{class n{constructor(o){this.factories=o}static create(o,u){if(u){const m=u.factories.slice();o=o.concat(m)}return new n(o)}static extend(o){return{provide:n,useFactory:u=>n.create(o,u||Ee()),deps:[[n,new ic,new bl]]}}find(o){const u=this.factories.find(m=>m.supports(o));if(u)return u;throw new Ne(901,!1)}}return n.\u0275prov=cn({token:n,providedIn:"root",factory:Ee}),n})();const Dt=cv(null,"core",[]);let gt=(()=>{class n{constructor(o){}}return n.\u0275fac=function(o){return new(o||n)(Ri(tg))},n.\u0275mod=Ms({type:n}),n.\u0275inj=Qn({}),n})();function We(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}function Zn(n,r){const o=qn(n),u=r.elementInjector||Qc();return new Al(o).create(u,r.projectableNodes,r.hostElement,r.environmentInjector)}},1481:(an,Qe,ee)=>{ee.d(Qe,{Dx:()=>ri,b2:()=>Ui,q6:()=>Sa});var c=ee(6895),W=ee(1571);class be extends c.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Oe extends be{static makeCurrent(){(0,c.HT)(new Oe)}onAndCancel(pe,re,Te){return pe.addEventListener(re,Te,!1),()=>{pe.removeEventListener(re,Te,!1)}}dispatchEvent(pe,re){pe.dispatchEvent(re)}remove(pe){pe.parentNode&&pe.parentNode.removeChild(pe)}createElement(pe,re){return(re=re||this.getDefaultDocument()).createElement(pe)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(pe){return pe.nodeType===Node.ELEMENT_NODE}isShadowRoot(pe){return pe instanceof DocumentFragment}getGlobalEventTarget(pe,re){return"window"===re?window:"document"===re?pe:"body"===re?pe.body:null}getBaseHref(pe){const re=function tt(){return Se=Se||document.querySelector("base"),Se?Se.getAttribute("href"):null}();return null==re?null:function Vt(xe){ft=ft||document.createElement("a"),ft.setAttribute("href",xe);const pe=ft.pathname;return"/"===pe.charAt(0)?pe:`/${pe}`}(re)}resetBaseElement(){Se=null}getUserAgent(){return window.navigator.userAgent}getCookie(pe){return(0,c.Mx)(document.cookie,pe)}}let ft,Se=null;const ht=new W.OlP("TRANSITION_ID"),He=[{provide:W.ip1,useFactory:function Ve(xe,pe,re){return()=>{re.get(W.CZH).donePromise.then(()=>{const Te=(0,c.q)(),Ae=pe.querySelectorAll(`style[ng-transition="${xe}"]`);for(let Nt=0;Nt<Ae.length;Nt++)Te.remove(Ae[Nt])})}},deps:[ht,c.K0,W.zs3],multi:!0}];let rn=(()=>{class xe{build(){return new XMLHttpRequest}}return xe.\u0275fac=function(re){return new(re||xe)},xe.\u0275prov=W.Yz7({token:xe,factory:xe.\u0275fac}),xe})();const rt=new W.OlP("EventManagerPlugins");let xt=(()=>{class xe{constructor(re,Te){this._zone=Te,this._eventNameToPlugin=new Map,re.forEach(Ae=>{Ae.manager=this}),this._plugins=re.slice().reverse()}addEventListener(re,Te,Ae){return this._findPluginFor(Te).addEventListener(re,Te,Ae)}addGlobalEventListener(re,Te,Ae){return this._findPluginFor(Te).addGlobalEventListener(re,Te,Ae)}getZone(){return this._zone}_findPluginFor(re){const Te=this._eventNameToPlugin.get(re);if(Te)return Te;const Ae=this._plugins;for(let Nt=0;Nt<Ae.length;Nt++){const hn=Ae[Nt];if(hn.supports(re))return this._eventNameToPlugin.set(re,hn),hn}throw new Error(`No event manager plugin found for event ${re}`)}}return xe.\u0275fac=function(re){return new(re||xe)(W.LFG(rt),W.LFG(W.R0b))},xe.\u0275prov=W.Yz7({token:xe,factory:xe.\u0275fac}),xe})();class mt{constructor(pe){this._doc=pe}addGlobalEventListener(pe,re,Te){const Ae=(0,c.q)().getGlobalEventTarget(this._doc,pe);if(!Ae)throw new Error(`Unsupported event target ${Ae} for event ${re}`);return this.addEventListener(Ae,re,Te)}}let en=(()=>{class xe{constructor(){this.usageCount=new Map}addStyles(re){for(const Te of re)1===this.changeUsageCount(Te,1)&&this.onStyleAdded(Te)}removeStyles(re){for(const Te of re)0===this.changeUsageCount(Te,-1)&&this.onStyleRemoved(Te)}onStyleRemoved(re){}onStyleAdded(re){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(re,Te){const Ae=this.usageCount;let Nt=Ae.get(re)??0;return Nt+=Te,Nt>0?Ae.set(re,Nt):Ae.delete(re),Nt}ngOnDestroy(){for(const re of this.getAllStyles())this.onStyleRemoved(re);this.usageCount.clear()}}return xe.\u0275fac=function(re){return new(re||xe)},xe.\u0275prov=W.Yz7({token:xe,factory:xe.\u0275fac}),xe})(),Kt=(()=>{class xe extends en{constructor(re){super(),this.doc=re,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(re){for(const Te of this.hostNodes)this.addStyleToHost(Te,re)}onStyleRemoved(re){const Te=this.styleRef;Te.get(re)?.forEach(Nt=>Nt.remove()),Te.delete(re)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(re){this.hostNodes.add(re);for(const Te of this.getAllStyles())this.addStyleToHost(re,Te)}removeHost(re){this.hostNodes.delete(re)}addStyleToHost(re,Te){const Ae=this.doc.createElement("style");Ae.textContent=Te,re.appendChild(Ae);const Nt=this.styleRef.get(Te);Nt?Nt.push(Ae):this.styleRef.set(Te,[Ae])}resetHostNodes(){const re=this.hostNodes;re.clear(),re.add(this.doc.head)}}return xe.\u0275fac=function(re){return new(re||xe)(W.LFG(c.K0))},xe.\u0275prov=W.Yz7({token:xe,factory:xe.\u0275fac}),xe})();const ci={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},vi=/%COMP%/g,Lt=new W.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function Bt(xe,pe){return pe.flat(100).map(re=>re.replace(vi,xe))}function Kn(xe){return pe=>{if("__ngUnwrap__"===pe)return xe;!1===xe(pe)&&(pe.preventDefault(),pe.returnValue=!1)}}let Jt=(()=>{class xe{constructor(re,Te,Ae,Nt){this.eventManager=re,this.sharedStylesHost=Te,this.appId=Ae,this.removeStylesOnCompDestory=Nt,this.rendererByCompId=new Map,this.defaultRenderer=new ke(re)}createRenderer(re,Te){if(!re||!Te)return this.defaultRenderer;const Ae=this.getOrCreateRenderer(re,Te);return Ae instanceof dn?Ae.applyToHost(re):Ae instanceof yt&&Ae.applyStyles(),Ae}getOrCreateRenderer(re,Te){const Ae=this.rendererByCompId;let Nt=Ae.get(Te.id);if(!Nt){const hn=this.eventManager,Yn=this.sharedStylesHost,Bi=this.removeStylesOnCompDestory;switch(Te.encapsulation){case W.ifc.Emulated:Nt=new dn(hn,Yn,Te,this.appId,Bi);break;case W.ifc.ShadowDom:return new bt(hn,Yn,re,Te);default:Nt=new yt(hn,Yn,Te,Bi)}Nt.onDestroy=()=>Ae.delete(Te.id),Ae.set(Te.id,Nt)}return Nt}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return xe.\u0275fac=function(re){return new(re||xe)(W.LFG(xt),W.LFG(Kt),W.LFG(W.AFp),W.LFG(Lt))},xe.\u0275prov=W.Yz7({token:xe,factory:xe.\u0275fac}),xe})();class ke{constructor(pe){this.eventManager=pe,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(pe,re){return re?document.createElementNS(ci[re]||re,pe):document.createElement(pe)}createComment(pe){return document.createComment(pe)}createText(pe){return document.createTextNode(pe)}appendChild(pe,re){(Ye(pe)?pe.content:pe).appendChild(re)}insertBefore(pe,re,Te){pe&&(Ye(pe)?pe.content:pe).insertBefore(re,Te)}removeChild(pe,re){pe&&pe.removeChild(re)}selectRootElement(pe,re){let Te="string"==typeof pe?document.querySelector(pe):pe;if(!Te)throw new Error(`The selector "${pe}" did not match any elements`);return re||(Te.textContent=""),Te}parentNode(pe){return pe.parentNode}nextSibling(pe){return pe.nextSibling}setAttribute(pe,re,Te,Ae){if(Ae){re=Ae+":"+re;const Nt=ci[Ae];Nt?pe.setAttributeNS(Nt,re,Te):pe.setAttribute(re,Te)}else pe.setAttribute(re,Te)}removeAttribute(pe,re,Te){if(Te){const Ae=ci[Te];Ae?pe.removeAttributeNS(Ae,re):pe.removeAttribute(`${Te}:${re}`)}else pe.removeAttribute(re)}addClass(pe,re){pe.classList.add(re)}removeClass(pe,re){pe.classList.remove(re)}setStyle(pe,re,Te,Ae){Ae&(W.JOm.DashCase|W.JOm.Important)?pe.style.setProperty(re,Te,Ae&W.JOm.Important?"important":""):pe.style[re]=Te}removeStyle(pe,re,Te){Te&W.JOm.DashCase?pe.style.removeProperty(re):pe.style[re]=""}setProperty(pe,re,Te){pe[re]=Te}setValue(pe,re){pe.nodeValue=re}listen(pe,re,Te){return"string"==typeof pe?this.eventManager.addGlobalEventListener(pe,re,Kn(Te)):this.eventManager.addEventListener(pe,re,Kn(Te))}}function Ye(xe){return"TEMPLATE"===xe.tagName&&void 0!==xe.content}class bt extends ke{constructor(pe,re,Te,Ae){super(pe),this.sharedStylesHost=re,this.hostEl=Te,this.shadowRoot=Te.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Nt=Bt(Ae.id,Ae.styles);for(const hn of Nt){const Yn=document.createElement("style");Yn.textContent=hn,this.shadowRoot.appendChild(Yn)}}nodeOrShadowRoot(pe){return pe===this.hostEl?this.shadowRoot:pe}appendChild(pe,re){return super.appendChild(this.nodeOrShadowRoot(pe),re)}insertBefore(pe,re,Te){return super.insertBefore(this.nodeOrShadowRoot(pe),re,Te)}removeChild(pe,re){return super.removeChild(this.nodeOrShadowRoot(pe),re)}parentNode(pe){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(pe)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class yt extends ke{constructor(pe,re,Te,Ae,Nt=Te.id){super(pe),this.sharedStylesHost=re,this.removeStylesOnCompDestory=Ae,this.rendererUsageCount=0,this.styles=Bt(Nt,Te.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class dn extends yt{constructor(pe,re,Te,Ae,Nt){const hn=Ae+"-"+Te.id;super(pe,re,Te,Nt,hn),this.contentAttr=function Zt(xe){return"_ngcontent-%COMP%".replace(vi,xe)}(hn),this.hostAttr=function Ht(xe){return"_nghost-%COMP%".replace(vi,xe)}(hn)}applyToHost(pe){this.applyStyles(),this.setAttribute(pe,this.hostAttr,"")}createElement(pe,re){const Te=super.createElement(pe,re);return super.setAttribute(Te,this.contentAttr,""),Te}}let Gn=(()=>{class xe extends mt{constructor(re){super(re)}supports(re){return!0}addEventListener(re,Te,Ae){return re.addEventListener(Te,Ae,!1),()=>this.removeEventListener(re,Te,Ae)}removeEventListener(re,Te,Ae){return re.removeEventListener(Te,Ae)}}return xe.\u0275fac=function(re){return new(re||xe)(W.LFG(c.K0))},xe.\u0275prov=W.Yz7({token:xe,factory:xe.\u0275fac}),xe})();const Vi=["alt","control","meta","shift"],fn={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Tn={alt:xe=>xe.altKey,control:xe=>xe.ctrlKey,meta:xe=>xe.metaKey,shift:xe=>xe.shiftKey};let zt=(()=>{class xe extends mt{constructor(re){super(re)}supports(re){return null!=xe.parseEventName(re)}addEventListener(re,Te,Ae){const Nt=xe.parseEventName(Te),hn=xe.eventCallback(Nt.fullKey,Ae,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,c.q)().onAndCancel(re,Nt.domEventName,hn))}static parseEventName(re){const Te=re.toLowerCase().split("."),Ae=Te.shift();if(0===Te.length||"keydown"!==Ae&&"keyup"!==Ae)return null;const Nt=xe._normalizeKey(Te.pop());let hn="",Yn=Te.indexOf("code");if(Yn>-1&&(Te.splice(Yn,1),hn="code."),Vi.forEach(rs=>{const hr=Te.indexOf(rs);hr>-1&&(Te.splice(hr,1),hn+=rs+".")}),hn+=Nt,0!=Te.length||0===Nt.length)return null;const Bi={};return Bi.domEventName=Ae,Bi.fullKey=hn,Bi}static matchEventFullKeyCode(re,Te){let Ae=fn[re.key]||re.key,Nt="";return Te.indexOf("code.")>-1&&(Ae=re.code,Nt="code."),!(null==Ae||!Ae)&&(Ae=Ae.toLowerCase()," "===Ae?Ae="space":"."===Ae&&(Ae="dot"),Vi.forEach(hn=>{hn!==Ae&&(0,Tn[hn])(re)&&(Nt+=hn+".")}),Nt+=Ae,Nt===Te)}static eventCallback(re,Te,Ae){return Nt=>{xe.matchEventFullKeyCode(Nt,re)&&Ae.runGuarded(()=>Te(Nt))}}static _normalizeKey(re){return"esc"===re?"escape":re}}return xe.\u0275fac=function(re){return new(re||xe)(W.LFG(c.K0))},xe.\u0275prov=W.Yz7({token:xe,factory:xe.\u0275fac}),xe})();const Sa=(0,W.eFA)(W._c5,"browser",[{provide:W.Lbi,useValue:c.bD},{provide:W.g9A,useValue:function Qn(){Oe.makeCurrent()},multi:!0},{provide:c.K0,useFactory:function io(){return(0,W.RDi)(document),document},deps:[]}]),yi=new W.OlP(""),ro=[{provide:W.rWj,useClass:class nt{addToWindow(pe){W.dqk.getAngularTestability=(Te,Ae=!0)=>{const Nt=pe.findTestabilityInTree(Te,Ae);if(null==Nt)throw new Error("Could not find testability for element.");return Nt},W.dqk.getAllAngularTestabilities=()=>pe.getAllTestabilities(),W.dqk.getAllAngularRootElements=()=>pe.getAllRootElements(),W.dqk.frameworkStabilizers||(W.dqk.frameworkStabilizers=[]),W.dqk.frameworkStabilizers.push(Te=>{const Ae=W.dqk.getAllAngularTestabilities();let Nt=Ae.length,hn=!1;const Yn=function(Bi){hn=hn||Bi,Nt--,0==Nt&&Te(hn)};Ae.forEach(function(Bi){Bi.whenStable(Yn)})})}findTestabilityInTree(pe,re,Te){return null==re?null:pe.getTestability(re)??(Te?(0,c.q)().isShadowRoot(re)?this.findTestabilityInTree(pe,re.host,!0):this.findTestabilityInTree(pe,re.parentElement,!0):null)}},deps:[]},{provide:W.lri,useClass:W.dDg,deps:[W.R0b,W.eoX,W.rWj]},{provide:W.dDg,useClass:W.dDg,deps:[W.R0b,W.eoX,W.rWj]}],Ro=[{provide:W.zSh,useValue:"root"},{provide:W.qLn,useFactory:function Ar(){return new W.qLn},deps:[]},{provide:rt,useClass:Gn,multi:!0,deps:[c.K0,W.R0b,W.Lbi]},{provide:rt,useClass:zt,multi:!0,deps:[c.K0]},{provide:Jt,useClass:Jt,deps:[xt,Kt,W.AFp,Lt]},{provide:W.FYo,useExisting:Jt},{provide:en,useExisting:Kt},{provide:Kt,useClass:Kt,deps:[c.K0]},{provide:xt,useClass:xt,deps:[rt,W.R0b]},{provide:c.JF,useClass:rn,deps:[]},[]];let Ui=(()=>{class xe{constructor(re){}static withServerTransition(re){return{ngModule:xe,providers:[{provide:W.AFp,useValue:re.appId},{provide:ht,useExisting:W.AFp},He]}}}return xe.\u0275fac=function(re){return new(re||xe)(W.LFG(yi,12))},xe.\u0275mod=W.oAB({type:xe}),xe.\u0275inj=W.cJS({providers:[...Ro,...ro],imports:[c.ez,W.hGG]}),xe})(),ri=(()=>{class xe{constructor(re){this._doc=re}getTitle(){return this._doc.title}setTitle(re){this._doc.title=re||""}}return xe.\u0275fac=function(re){return new(re||xe)(W.LFG(c.K0))},xe.\u0275prov=W.Yz7({token:xe,factory:function(re){let Te=null;return Te=re?new re:function zr(){return new ri((0,W.LFG)(c.K0))}(),Te},providedIn:"root"}),xe})();typeof window<"u"&&window},2655:(an,Qe,ee)=>{ee.d(Qe,{Bz:()=>ha,lC:()=>xs});var c=ee(1571),W=ee(2076),be=ee(9646),Oe=ee(1135);const tt=(0,ee(3888).d)(D=>function(){D(this),this.name="EmptyError",this.message="no elements in sequence"});var ft=ee(9841),Vt=ee(7272),ht=ee(9751),Ve=ee(8421);function He(D){return new ht.y(R=>{(0,Ve.Xf)(D()).subscribe(R)})}var nt=ee(9635),rn=ee(576);function rt(D,R){const T=(0,rn.m)(D)?D:()=>D,I=V=>V.error(T());return new ht.y(R?V=>R.schedule(I,0,V):I)}var xt=ee(515),mt=ee(727),en=ee(4482),Kt=ee(5403);function ci(){return(0,en.e)((D,R)=>{let T=null;D._refCount++;const I=(0,Kt.x)(R,void 0,void 0,void 0,()=>{if(!D||D._refCount<=0||0<--D._refCount)return void(T=null);const V=D._connection,q=T;T=null,V&&(!q||V===q)&&V.unsubscribe(),R.unsubscribe()});D.subscribe(I),I.closed||(T=D.connect())})}class vi extends ht.y{constructor(R,T){super(),this.source=R,this.subjectFactory=T,this._subject=null,this._refCount=0,this._connection=null,(0,en.A)(R)&&(this.lift=R.lift)}_subscribe(R){return this.getSubject().subscribe(R)}getSubject(){const R=this._subject;return(!R||R.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:R}=this;this._subject=this._connection=null,R?.unsubscribe()}connect(){let R=this._connection;if(!R){R=this._connection=new mt.w0;const T=this.getSubject();R.add(this.source.subscribe((0,Kt.x)(T,void 0,()=>{this._teardown(),T.complete()},I=>{this._teardown(),T.error(I)},()=>this._teardown()))),R.closed&&(this._connection=null,R=mt.w0.EMPTY)}return R}refCount(){return ci()(this)}}var Ne=ee(7579),dt=ee(6895),je=ee(4004),Ot=ee(3900),Ut=ee(5698),Lt=ee(8675),Zt=ee(9300),Ht=ee(5577);function Bt(D){return(0,en.e)((R,T)=>{let I=!1;R.subscribe((0,Kt.x)(T,V=>{I=!0,T.next(V)},()=>{I||T.next(D),T.complete()}))})}function Kn(D=Jt){return(0,en.e)((R,T)=>{let I=!1;R.subscribe((0,Kt.x)(T,V=>{I=!0,T.next(V)},()=>I?T.complete():T.error(D())))})}function Jt(){return new tt}var ke=ee(4671);function Be(D,R){const T=arguments.length>=2;return I=>I.pipe(D?(0,Zt.h)((V,q)=>D(V,q,I)):ke.y,(0,Ut.q)(1),T?Bt(R):Kn(()=>new tt))}function Ue(D,R){return(0,rn.m)(R)?(0,Ht.z)(D,R,1):(0,Ht.z)(D,1)}var Ye=ee(8505);function bt(D){return(0,en.e)((R,T)=>{let q,I=null,V=!1;I=R.subscribe((0,Kt.x)(T,void 0,void 0,X=>{q=(0,Ve.Xf)(D(X,bt(D)(R))),I?(I.unsubscribe(),I=null,q.subscribe(T)):V=!0})),V&&(I.unsubscribe(),I=null,q.subscribe(T))})}function dn(D,R){return(0,en.e)(function yt(D,R,T,I,V){return(q,X)=>{let fe=T,Ge=R,vt=0;q.subscribe((0,Kt.x)(X,Ft=>{const Un=vt++;Ge=fe?D(Ge,Ft,Un):(fe=!0,Ft),I&&X.next(Ge)},V&&(()=>{fe&&X.next(Ge),X.complete()})))}}(D,R,arguments.length>=2,!0))}function Gn(D){return D<=0?()=>xt.E:(0,en.e)((R,T)=>{let I=[];R.subscribe((0,Kt.x)(T,V=>{I.push(V),D<I.length&&I.shift()},()=>{for(const V of I)T.next(V);T.complete()},void 0,()=>{I=null}))})}function Vi(D,R){const T=arguments.length>=2;return I=>I.pipe(D?(0,Zt.h)((V,q)=>D(V,q,I)):ke.y,Gn(1),T?Bt(R):Kn(()=>new tt))}var Tn=ee(9718);function zt(D){return(0,en.e)((R,T)=>{try{R.subscribe(T)}finally{T.add(D)}})}var ii=ee(8189),ts=ee(1481);const ln="primary",cn=Symbol("RouteTitle");class cr{constructor(R){this.params=R||{}}has(R){return Object.prototype.hasOwnProperty.call(this.params,R)}get(R){if(this.has(R)){const T=this.params[R];return Array.isArray(T)?T[0]:T}return null}getAll(R){if(this.has(R)){const T=this.params[R];return Array.isArray(T)?T:[T]}return[]}get keys(){return Object.keys(this.params)}}function Qn(D){return new cr(D)}function Ar(D,R,T){const I=T.path.split("/");if(I.length>D.length||"full"===T.pathMatch&&(R.hasChildren()||I.length<D.length))return null;const V={};for(let q=0;q<I.length;q++){const X=I[q],fe=D[q];if(X.startsWith(":"))V[X.substring(1)]=fe;else if(X!==fe.path)return null}return{consumed:D.slice(0,I.length),posParams:V}}function Ir(D,R){const T=D?Object.keys(D):void 0,I=R?Object.keys(R):void 0;if(!T||!I||T.length!=I.length)return!1;let V;for(let q=0;q<T.length;q++)if(V=T[q],!Sa(D[V],R[V]))return!1;return!0}function Sa(D,R){if(Array.isArray(D)&&Array.isArray(R)){if(D.length!==R.length)return!1;const T=[...D].sort(),I=[...R].sort();return T.every((V,q)=>I[q]===V)}return D===R}function yi(D){return Array.prototype.concat.apply([],D)}function ro(D){return D.length>0?D[D.length-1]:null}function Ui(D,R){for(const T in D)D.hasOwnProperty(T)&&R(D[T],T)}function ns(D){return(0,c.CqO)(D)?D:(0,c.QGY)(D)?(0,W.D)(Promise.resolve(D)):(0,be.of)(D)}const Qo=!1,on={exact:function Je(D,R,T){if(!zn(D.segments,R.segments)||!is(D.segments,R.segments,T)||D.numberOfChildren!==R.numberOfChildren)return!1;for(const I in R.children)if(!D.children[I]||!Je(D.children[I],R.children[I],T))return!1;return!0},subset:ui},zr={exact:function jt(D,R){return Ir(D,R)},subset:function So(D,R){return Object.keys(R).length<=Object.keys(D).length&&Object.keys(R).every(T=>Sa(D[T],R[T]))},ignored:()=>!0};function ri(D,R,T){return on[T.paths](D.root,R.root,T.matrixParams)&&zr[T.queryParams](D.queryParams,R.queryParams)&&!("exact"===T.fragment&&D.fragment!==R.fragment)}function ui(D,R,T){return mi(D,R,R.segments,T)}function mi(D,R,T,I){if(D.segments.length>T.length){const V=D.segments.slice(0,T.length);return!(!zn(V,T)||R.hasChildren()||!is(V,T,I))}if(D.segments.length===T.length){if(!zn(D.segments,T)||!is(D.segments,T,I))return!1;for(const V in R.children)if(!D.children[V]||!ui(D.children[V],R.children[V],I))return!1;return!0}{const V=T.slice(0,D.segments.length),q=T.slice(D.segments.length);return!!(zn(D.segments,V)&&is(D.segments,V,I)&&D.children[ln])&&mi(D.children[ln],R,q,I)}}function is(D,R,T){return R.every((I,V)=>zr[T](D[V].parameters,I.parameters))}class In{constructor(R=new un([],{}),T={},I=null){this.root=R,this.queryParams=T,this.fragment=I}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Qn(this.queryParams)),this._queryParamMap}toString(){return dr.serialize(this)}}class un{constructor(R,T){this.segments=R,this.children=T,this.parent=null,Ui(T,(I,V)=>I.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ts(this)}}class Rn{constructor(R,T){this.path=R,this.parameters=T}get parameterMap(){return this._parameterMap||(this._parameterMap=Qn(this.parameters)),this._parameterMap}toString(){return so(this)}}function zn(D,R){return D.length===R.length&&D.every((T,I)=>T.path===R[I].path)}let bs=(()=>{class D{}return D.\u0275fac=function(T){return new(T||D)},D.\u0275prov=c.Yz7({token:D,factory:function(){return new el},providedIn:"root"}),D})();class el{parse(R){const T=new hn(R);return new In(T.parseRootSegment(),T.parseQueryParams(),T.parseFragment())}serialize(R){const T=`/${tr(R.root,!0)}`,I=function kl(D){const R=Object.keys(D).map(T=>{const I=D[T];return Array.isArray(I)?I.map(V=>`${Si(T)}=${Si(V)}`).join("&"):`${Si(T)}=${Si(I)}`}).filter(T=>!!T);return R.length?`?${R.join("&")}`:""}(R.queryParams);return`${T}${I}${"string"==typeof R.fragment?`#${function Wr(D){return encodeURI(D)}(R.fragment)}`:""}`}}const dr=new el;function Ts(D){return D.segments.map(R=>so(R)).join("/")}function tr(D,R){if(!D.hasChildren())return Ts(D);if(R){const T=D.children[ln]?tr(D.children[ln],!1):"",I=[];return Ui(D.children,(V,q)=>{q!==ln&&I.push(`${q}:${tr(V,!1)}`)}),I.length>0?`${T}(${I.join("//")})`:T}{const T=function Ki(D,R){let T=[];return Ui(D.children,(I,V)=>{V===ln&&(T=T.concat(R(I,V)))}),Ui(D.children,(I,V)=>{V!==ln&&(T=T.concat(R(I,V)))}),T}(D,(I,V)=>V===ln?[tr(D.children[ln],!1)]:[`${V}:${tr(I,!1)}`]);return 1===Object.keys(D.children).length&&null!=D.children[ln]?`${Ts(D)}/${T[0]}`:`${Ts(D)}/(${T.join("//")})`}}function Ri(D){return encodeURIComponent(D).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Si(D){return Ri(D).replace(/%3B/gi,";")}function Co(D){return Ri(D).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function $r(D){return decodeURIComponent(D)}function Pr(D){return $r(D.replace(/\+/g,"%20"))}function so(D){return`${Co(D.path)}${function tl(D){return Object.keys(D).map(R=>`;${Co(R)}=${Co(D[R])}`).join("")}(D.parameters)}`}const xe=/^[^\/()?;=#]+/;function pe(D){const R=D.match(xe);return R?R[0]:""}const re=/^[^=?&#]+/,Ae=/^[^&#]+/;class hn{constructor(R){this.url=R,this.remaining=R}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new un([],{}):new un([],this.parseChildren())}parseQueryParams(){const R={};if(this.consumeOptional("?"))do{this.parseQueryParam(R)}while(this.consumeOptional("&"));return R}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const R=[];for(this.peekStartsWith("(")||R.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),R.push(this.parseSegment());let T={};this.peekStartsWith("/(")&&(this.capture("/"),T=this.parseParens(!0));let I={};return this.peekStartsWith("(")&&(I=this.parseParens(!1)),(R.length>0||Object.keys(T).length>0)&&(I[ln]=new un(R,T)),I}parseSegment(){const R=pe(this.remaining);if(""===R&&this.peekStartsWith(";"))throw new c.vHH(4009,Qo);return this.capture(R),new Rn($r(R),this.parseMatrixParams())}parseMatrixParams(){const R={};for(;this.consumeOptional(";");)this.parseParam(R);return R}parseParam(R){const T=pe(this.remaining);if(!T)return;this.capture(T);let I="";if(this.consumeOptional("=")){const V=pe(this.remaining);V&&(I=V,this.capture(I))}R[$r(T)]=$r(I)}parseQueryParam(R){const T=function Te(D){const R=D.match(re);return R?R[0]:""}(this.remaining);if(!T)return;this.capture(T);let I="";if(this.consumeOptional("=")){const X=function Nt(D){const R=D.match(Ae);return R?R[0]:""}(this.remaining);X&&(I=X,this.capture(I))}const V=Pr(T),q=Pr(I);if(R.hasOwnProperty(V)){let X=R[V];Array.isArray(X)||(X=[X],R[V]=X),X.push(q)}else R[V]=q}parseParens(R){const T={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const I=pe(this.remaining),V=this.remaining[I.length];if("/"!==V&&")"!==V&&";"!==V)throw new c.vHH(4010,Qo);let q;I.indexOf(":")>-1?(q=I.slice(0,I.indexOf(":")),this.capture(q),this.capture(":")):R&&(q=ln);const X=this.parseChildren();T[q]=1===Object.keys(X).length?X[ln]:new un([],X),this.consumeOptional("//")}return T}peekStartsWith(R){return this.remaining.startsWith(R)}consumeOptional(R){return!!this.peekStartsWith(R)&&(this.remaining=this.remaining.substring(R.length),!0)}capture(R){if(!this.consumeOptional(R))throw new c.vHH(4011,Qo)}}function Yn(D){return D.segments.length>0?new un([],{[ln]:D}):D}function Bi(D){const R={};for(const I of Object.keys(D.children)){const q=Bi(D.children[I]);(q.segments.length>0||q.hasChildren())&&(R[I]=q)}return function rs(D){if(1===D.numberOfChildren&&D.children[ln]){const R=D.children[ln];return new un(D.segments.concat(R.segments),R.children)}return D}(new un(D.segments,R))}function hr(D){return D instanceof In}const nl=!1;function il(D,R,T,I,V){if(0===T.length)return ss(R.root,R.root,R.root,I,V);const q=function qn(D){if("string"==typeof D[0]&&1===D.length&&"/"===D[0])return new ea(!0,0,D);let R=0,T=!1;const I=D.reduce((V,q,X)=>{if("object"==typeof q&&null!=q){if(q.outlets){const fe={};return Ui(q.outlets,(Ge,vt)=>{fe[vt]="string"==typeof Ge?Ge.split("/"):Ge}),[...V,{outlets:fe}]}if(q.segmentPath)return[...V,q.segmentPath]}return"string"!=typeof q?[...V,q]:0===X?(q.split("/").forEach((fe,Ge)=>{0==Ge&&"."===fe||(0==Ge&&""===fe?T=!0:".."===fe?R++:""!=fe&&V.push(fe))}),V):[...V,q]},[]);return new ea(T,R,I)}(T);return q.toRoot()?ss(R.root,R.root,new un([],{}),I,V):function X(Ge){const vt=function br(D,R,T,I){if(D.isAbsolute)return new Hi(R.root,!0,0);if(-1===I)return new Hi(T,T===R.root,0);return function fr(D,R,T){let I=D,V=R,q=T;for(;q>V;){if(q-=V,I=I.parent,!I)throw new c.vHH(4005,nl&&"Invalid number of '../'");V=I.segments.length}return new Hi(I,!1,V-q)}(T,I+(Ms(D.commands[0])?0:1),D.numberOfDoubleDots)}(q,R,D.snapshot?._urlSegment,Ge),Ft=vt.processChildren?gs(vt.segmentGroup,vt.index,q.commands):rl(vt.segmentGroup,vt.index,q.commands);return ss(R.root,vt.segmentGroup,Ft,I,V)}(D.snapshot?._lastPathIndex)}function Ms(D){return"object"==typeof D&&null!=D&&!D.outlets&&!D.segmentPath}function Eo(D){return"object"==typeof D&&null!=D&&D.outlets}function ss(D,R,T,I,V){let X,q={};I&&Ui(I,(Ge,vt)=>{q[vt]=Array.isArray(Ge)?Ge.map(Ft=>`${Ft}`):`${Ge}`}),X=D===R?T:ks(D,R,T);const fe=Yn(Bi(X));return new In(fe,q,V)}function ks(D,R,T){const I={};return Ui(D.children,(V,q)=>{I[q]=V===R?T:ks(V,R,T)}),new un(D.segments,I)}class ea{constructor(R,T,I){if(this.isAbsolute=R,this.numberOfDoubleDots=T,this.commands=I,R&&I.length>0&&Ms(I[0]))throw new c.vHH(4003,nl&&"Root segment cannot have matrix parameters");const V=I.find(Eo);if(V&&V!==ro(I))throw new c.vHH(4004,nl&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Hi{constructor(R,T,I){this.segmentGroup=R,this.processChildren=T,this.index=I}}function rl(D,R,T){if(D||(D=new un([],{})),0===D.segments.length&&D.hasChildren())return gs(D,R,T);const I=function _s(D,R,T){let I=0,V=R;const q={match:!1,pathIndex:0,commandIndex:0};for(;V<D.segments.length;){if(I>=T.length)return q;const X=D.segments[V],fe=T[I];if(Eo(fe))break;const Ge=`${fe}`,vt=I<T.length-1?T[I+1]:null;if(V>0&&void 0===Ge)break;if(Ge&&vt&&"object"==typeof vt&&void 0===vt.outlets){if(!Or(Ge,vt,X))return q;I+=2}else{if(!Or(Ge,{},X))return q;I++}V++}return{match:!0,pathIndex:V,commandIndex:I}}(D,R,T),V=T.slice(I.commandIndex);if(I.match&&I.pathIndex<D.segments.length){const q=new un(D.segments.slice(0,I.pathIndex),{});return q.children[ln]=new un(D.segments.slice(I.pathIndex),D.children),gs(q,0,V)}return I.match&&0===V.length?new un(D.segments,{}):I.match&&!D.hasChildren()?It(D,R,T):I.match?gs(D,0,V):It(D,R,T)}function gs(D,R,T){if(0===T.length)return new un(D.segments,{});{const I=function Nc(D){return Eo(D[0])?D[0].outlets:{[ln]:D}}(T),V={};if(!I[ln]&&D.children[ln]&&1===D.numberOfChildren&&0===D.children[ln].segments.length){const q=gs(D.children[ln],R,T);return new un(D.segments,q.children)}return Ui(I,(q,X)=>{"string"==typeof q&&(q=[q]),null!==q&&(V[X]=rl(D.children[X],R,q))}),Ui(D.children,(q,X)=>{void 0===I[X]&&(V[X]=q)}),new un(D.segments,V)}}function It(D,R,T){const I=D.segments.slice(0,R);let V=0;for(;V<T.length;){const q=T[V];if(Eo(q)){const Ge=mn(q.outlets);return new un(I,Ge)}if(0===V&&Ms(T[0])){I.push(new Rn(D.segments[R].path,Ci(T[0]))),V++;continue}const X=Eo(q)?q.outlets[ln]:`${q}`,fe=V<T.length-1?T[V+1]:null;X&&fe&&Ms(fe)?(I.push(new Rn(X,Ci(fe))),V+=2):(I.push(new Rn(X,{})),V++)}return new un(I,{})}function mn(D){const R={};return Ui(D,(T,I)=>{"string"==typeof T&&(T=[T]),null!==T&&(R[I]=It(new un([],{}),0,T))}),R}function Ci(D){const R={};return Ui(D,(T,I)=>R[I]=`${T}`),R}function Or(D,R,T){return D==T.path&&Ir(R,T.parameters)}const Yr="imperative";class Ei{constructor(R,T){this.id=R,this.url=T}}class Gs extends Ei{constructor(R,T,I="imperative",V=null){super(R,T),this.type=0,this.navigationTrigger=I,this.restoredState=V}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class oi extends Ei{constructor(R,T,I){super(R,T),this.urlAfterRedirects=I,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Vs extends Ei{constructor(R,T,I,V){super(R,T),this.reason=I,this.code=V,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class ta extends Ei{constructor(R,T,I,V){super(R,T),this.reason=I,this.code=V,this.type=16}}class Mn extends Ei{constructor(R,T,I,V){super(R,T),this.error=I,this.target=V,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Mu extends Ei{constructor(R,T,I,V){super(R,T),this.urlAfterRedirects=I,this.state=V,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Us extends Ei{constructor(R,T,I,V){super(R,T),this.urlAfterRedirects=I,this.state=V,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class na extends Ei{constructor(R,T,I,V,q){super(R,T),this.urlAfterRedirects=I,this.state=V,this.shouldActivate=q,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class ao extends Ei{constructor(R,T,I,V){super(R,T),this.urlAfterRedirects=I,this.state=V,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class zi extends Ei{constructor(R,T,I,V){super(R,T),this.urlAfterRedirects=I,this.state=V,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Hs{constructor(R){this.route=R,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Xi{constructor(R){this.route=R,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Tr{constructor(R){this.snapshot=R,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class zs{constructor(R){this.snapshot=R,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ia{constructor(R){this.snapshot=R,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class di{constructor(R){this.snapshot=R,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Fc{constructor(R,T,I){this.routerEvent=R,this.position=T,this.anchor=I,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let sl=(()=>{class D{createUrlTree(T,I,V,q,X,fe){return il(T||I.root,V,q,X,fe)}}return D.\u0275fac=function(T){return new(T||D)},D.\u0275prov=c.Yz7({token:D,factory:D.\u0275fac}),D})(),qr=(()=>{class D{}return D.\u0275fac=function(T){return new(T||D)},D.\u0275prov=c.Yz7({token:D,factory:function(R){return sl.\u0275fac(R)},providedIn:"root"}),D})();class pr{constructor(R){this._root=R}get root(){return this._root.value}parent(R){const T=this.pathFromRoot(R);return T.length>1?T[T.length-2]:null}children(R){const T=Lc(R,this._root);return T?T.children.map(I=>I.value):[]}firstChild(R){const T=Lc(R,this._root);return T&&T.children.length>0?T.children[0].value:null}siblings(R){const T=bi(R,this._root);return T.length<2?[]:T[T.length-2].children.map(V=>V.value).filter(V=>V!==R)}pathFromRoot(R){return bi(R,this._root).map(T=>T.value)}}function Lc(D,R){if(D===R.value)return R;for(const T of R.children){const I=Lc(D,T);if(I)return I}return null}function bi(D,R){if(D===R.value)return[R];for(const T of R.children){const I=bi(D,T);if(I.length)return I.unshift(R),I}return[]}class Wi{constructor(R,T){this.value=R,this.children=T}toString(){return`TreeNode(${this.value})`}}function ra(D){const R={};return D&&D.children.forEach(T=>R[T.value.outlet]=T),R}class lo extends pr{constructor(R,T){super(R),this.snapshot=T,Hl(this,R)}toString(){return this.snapshot.toString()}}function Vl(D,R){const T=function Gr(D,R){const X=new Po([],{},{},"",{},ln,R,null,D.root,-1,{});return new Ul("",new Wi(X,[]))}(D,R),I=new Oe.X([new Rn("",{})]),V=new Oe.X({}),q=new Oe.X({}),X=new Oe.X({}),fe=new Oe.X(""),Ge=new Io(I,V,X,fe,q,ln,R,T.root);return Ge.snapshot=T.root,new lo(new Wi(Ge,[]),T)}class Io{constructor(R,T,I,V,q,X,fe,Ge){this.url=R,this.params=T,this.queryParams=I,this.fragment=V,this.data=q,this.outlet=X,this.component=fe,this.title=this.data?.pipe((0,je.U)(vt=>vt[cn]))??(0,be.of)(void 0),this._futureSnapshot=Ge}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,je.U)(R=>Qn(R)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,je.U)(R=>Qn(R)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function ol(D,R="emptyOnly"){const T=D.pathFromRoot;let I=0;if("always"!==R)for(I=T.length-1;I>=1;){const V=T[I],q=T[I-1];if(V.routeConfig&&""===V.routeConfig.path)I--;else{if(q.component)break;I--}}return function al(D){return D.reduce((R,T)=>({params:{...R.params,...T.params},data:{...R.data,...T.data},resolve:{...T.data,...R.resolve,...T.routeConfig?.data,...T._resolvedData}}),{params:{},data:{},resolve:{}})}(T.slice(I))}class Po{get title(){return this.data?.[cn]}constructor(R,T,I,V,q,X,fe,Ge,vt,Ft,Un){this.url=R,this.params=T,this.queryParams=I,this.fragment=V,this.data=q,this.outlet=X,this.component=fe,this.routeConfig=Ge,this._urlSegment=vt,this._lastPathIndex=Ft,this._resolve=Un}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Qn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Qn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(I=>I.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Ul extends pr{constructor(R,T){super(T),this.url=R,Hl(this,T)}toString(){return ll(this._root)}}function Hl(D,R){R.value._routerState=D,R.children.forEach(T=>Hl(D,T))}function ll(D){const R=D.children.length>0?` { ${D.children.map(ll).join(", ")} } `:"";return`${D.value}${R}`}function zl(D){if(D.snapshot){const R=D.snapshot,T=D._futureSnapshot;D.snapshot=T,Ir(R.queryParams,T.queryParams)||D.queryParams.next(T.queryParams),R.fragment!==T.fragment&&D.fragment.next(T.fragment),Ir(R.params,T.params)||D.params.next(T.params),function io(D,R){if(D.length!==R.length)return!1;for(let T=0;T<D.length;++T)if(!Ir(D[T],R[T]))return!1;return!0}(R.url,T.url)||D.url.next(T.url),Ir(R.data,T.data)||D.data.next(T.data)}else D.snapshot=D._futureSnapshot,D.data.next(D._futureSnapshot.data)}function _d(D,R){const T=Ir(D.params,R.params)&&function js(D,R){return zn(D,R)&&D.every((T,I)=>Ir(T.parameters,R[I].parameters))}(D.url,R.url);return T&&!(!D.parent!=!R.parent)&&(!D.parent||_d(D.parent,R.parent))}function Ea(D,R,T){if(T&&D.shouldReuseRoute(R.value,T.value.snapshot)){const I=T.value;I._futureSnapshot=R.value;const V=function vd(D,R,T){return R.children.map(I=>{for(const V of T.children)if(D.shouldReuseRoute(I.value,V.value.snapshot))return Ea(D,I,V);return Ea(D,I)})}(D,R,T);return new Wi(I,V)}{if(D.shouldAttach(R.value)){const q=D.retrieve(R.value);if(null!==q){const X=q.route;return X.value._futureSnapshot=R.value,X.children=R.children.map(fe=>Ea(D,fe)),X}}const I=function cl(D){return new Io(new Oe.X(D.url),new Oe.X(D.params),new Oe.X(D.queryParams),new Oe.X(D.fragment),new Oe.X(D.data),D.outlet,D.component,D)}(R.value),V=R.children.map(q=>Ea(D,q));return new Wi(I,V)}}const xu="ngNavigationCancelingError";function vh(D,R){const{redirectTo:T,navigationBehaviorOptions:I}=hr(R)?{redirectTo:R,navigationBehaviorOptions:void 0}:R,V=yh(!1,0,R);return V.url=T,V.navigationBehaviorOptions=I,V}function yh(D,R,T){const I=new Error("NavigationCancelingError: "+(D||""));return I[xu]=!0,I.cancellationCode=R,T&&(I.url=T),I}function Wl(D){return yd(D)&&hr(D.url)}function yd(D){return D&&D[xu]}class ig{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Aa,this.attachRef=null}}let Aa=(()=>{class D{constructor(){this.contexts=new Map}onChildOutletCreated(T,I){const V=this.getOrCreateContext(T);V.outlet=I,this.contexts.set(T,V)}onChildOutletDestroyed(T){const I=this.getContext(T);I&&(I.outlet=null,I.attachRef=null)}onOutletDeactivated(){const T=this.contexts;return this.contexts=new Map,T}onOutletReAttached(T){this.contexts=T}getOrCreateContext(T){let I=this.getContext(T);return I||(I=new ig,this.contexts.set(T,I)),I}getContext(T){return this.contexts.get(T)||null}}return D.\u0275fac=function(T){return new(T||D)},D.\u0275prov=c.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();const Bc=!1;let xs=(()=>{class D{constructor(){this.activated=null,this._activatedRoute=null,this.name=ln,this.activateEvents=new c.vpe,this.deactivateEvents=new c.vpe,this.attachEvents=new c.vpe,this.detachEvents=new c.vpe,this.parentContexts=(0,c.f3M)(Aa),this.location=(0,c.f3M)(c.s_b),this.changeDetector=(0,c.f3M)(c.sBO),this.environmentInjector=(0,c.f3M)(c.lqb)}ngOnChanges(T){if(T.name){const{firstChange:I,previousValue:V}=T.name;if(I)return;this.isTrackedInParentContexts(V)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(V)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(T){return this.parentContexts.getContext(T)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const T=this.parentContexts.getContext(this.name);T?.route&&(T.attachRef?this.attach(T.attachRef,T.route):this.activateWith(T.route,T.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new c.vHH(4012,Bc);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new c.vHH(4012,Bc);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new c.vHH(4012,Bc);this.location.detach();const T=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(T.instance),T}attach(T,I){this.activated=T,this._activatedRoute=I,this.location.insert(T.hostView),this.attachEvents.emit(T.instance)}deactivate(){if(this.activated){const T=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(T)}}activateWith(T,I){if(this.isActivated)throw new c.vHH(4013,Bc);this._activatedRoute=T;const V=this.location,X=T.snapshot.component,fe=this.parentContexts.getOrCreateContext(this.name).children,Ge=new ul(T,fe,V.injector);if(I&&function dl(D){return!!D.resolveComponentFactory}(I)){const vt=I.resolveComponentFactory(X);this.activated=V.createComponent(vt,V.length,Ge)}else this.activated=V.createComponent(X,{index:V.length,injector:Ge,environmentInjector:I??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return D.\u0275fac=function(T){return new(T||D)},D.\u0275dir=c.lG2({type:D,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[c.TTD]}),D})();class ul{constructor(R,T,I){this.route=R,this.childContexts=T,this.parent=I}get(R,T){return R===Io?this.route:R===Aa?this.childContexts:this.parent.get(R,T)}}let co=(()=>{class D{}return D.\u0275fac=function(T){return new(T||D)},D.\u0275cmp=c.Xpm({type:D,selectors:[["ng-component"]],standalone:!0,features:[c.jDz],decls:1,vars:0,template:function(T,I){1&T&&c._UZ(0,"router-outlet")},dependencies:[xs],encapsulation:2}),D})();function Mr(D,R){return D.providers&&!D._injector&&(D._injector=(0,c.MMx)(D.providers,R,`Route: ${D.path}`)),D._injector??R}function No(D){const R=D.children&&D.children.map(No),T=R?{...D,children:R}:{...D};return!T.component&&!T.loadComponent&&(R||T.loadChildren)&&T.outlet&&T.outlet!==ln&&(T.component=co),T}function gi(D){return D.outlet||ln}function bd(D,R){const T=D.filter(I=>gi(I)===R);return T.push(...D.filter(I=>gi(I)!==R)),T}function Fo(D){if(!D)return null;if(D.routeConfig?._injector)return D.routeConfig._injector;for(let R=D.parent;R;R=R.parent){const T=R.routeConfig;if(T?._loadedInjector)return T._loadedInjector;if(T?._injector)return T._injector}return null}class jc{constructor(R,T,I,V){this.routeReuseStrategy=R,this.futureState=T,this.currState=I,this.forwardEvent=V}activate(R){const T=this.futureState._root,I=this.currState?this.currState._root:null;this.deactivateChildRoutes(T,I,R),zl(this.futureState.root),this.activateChildRoutes(T,I,R)}deactivateChildRoutes(R,T,I){const V=ra(T);R.children.forEach(q=>{const X=q.value.outlet;this.deactivateRoutes(q,V[X],I),delete V[X]}),Ui(V,(q,X)=>{this.deactivateRouteAndItsChildren(q,I)})}deactivateRoutes(R,T,I){const V=R.value,q=T?T.value:null;if(V===q)if(V.component){const X=I.getContext(V.outlet);X&&this.deactivateChildRoutes(R,T,X.children)}else this.deactivateChildRoutes(R,T,I);else q&&this.deactivateRouteAndItsChildren(T,I)}deactivateRouteAndItsChildren(R,T){R.value.component&&this.routeReuseStrategy.shouldDetach(R.value.snapshot)?this.detachAndStoreRouteSubtree(R,T):this.deactivateRouteAndOutlet(R,T)}detachAndStoreRouteSubtree(R,T){const I=T.getContext(R.value.outlet),V=I&&R.value.component?I.children:T,q=ra(R);for(const X of Object.keys(q))this.deactivateRouteAndItsChildren(q[X],V);if(I&&I.outlet){const X=I.outlet.detach(),fe=I.children.onOutletDeactivated();this.routeReuseStrategy.store(R.value.snapshot,{componentRef:X,route:R,contexts:fe})}}deactivateRouteAndOutlet(R,T){const I=T.getContext(R.value.outlet),V=I&&R.value.component?I.children:T,q=ra(R);for(const X of Object.keys(q))this.deactivateRouteAndItsChildren(q[X],V);I&&(I.outlet&&(I.outlet.deactivate(),I.children.onOutletDeactivated()),I.attachRef=null,I.resolver=null,I.route=null)}activateChildRoutes(R,T,I){const V=ra(T);R.children.forEach(q=>{this.activateRoutes(q,V[q.value.outlet],I),this.forwardEvent(new di(q.value.snapshot))}),R.children.length&&this.forwardEvent(new zs(R.value.snapshot))}activateRoutes(R,T,I){const V=R.value,q=T?T.value:null;if(zl(V),V===q)if(V.component){const X=I.getOrCreateContext(V.outlet);this.activateChildRoutes(R,T,X.children)}else this.activateChildRoutes(R,T,I);else if(V.component){const X=I.getOrCreateContext(V.outlet);if(this.routeReuseStrategy.shouldAttach(V.snapshot)){const fe=this.routeReuseStrategy.retrieve(V.snapshot);this.routeReuseStrategy.store(V.snapshot,null),X.children.onOutletReAttached(fe.contexts),X.attachRef=fe.componentRef,X.route=fe.route.value,X.outlet&&X.outlet.attach(fe.componentRef,fe.route.value),zl(fe.route.value),this.activateChildRoutes(R,null,X.children)}else{const fe=Fo(V.snapshot),Ge=fe?.get(c._Vd)??null;X.attachRef=null,X.route=V,X.resolver=Ge,X.injector=fe,X.outlet&&X.outlet.activateWith(V,X.injector),this.activateChildRoutes(R,null,X.children)}}else this.activateChildRoutes(R,null,I)}}class $l{constructor(R){this.path=R,this.route=this.path[this.path.length-1]}}class $s{constructor(R,T){this.component=R,this.route=T}}function Nr(D,R,T){const I=D._root;return ho(I,R?R._root:null,T,[I.value])}function Ys(D,R){const T=Symbol(),I=R.get(D,T);return I===T?"function"!=typeof D||(0,c.Z0I)(D)?R.get(D):D:I}function ho(D,R,T,I,V={canDeactivateChecks:[],canActivateChecks:[]}){const q=ra(R);return D.children.forEach(X=>{(function fo(D,R,T,I,V={canDeactivateChecks:[],canActivateChecks:[]}){const q=D.value,X=R?R.value:null,fe=T?T.getContext(D.value.outlet):null;if(X&&q.routeConfig===X.routeConfig){const Ge=function hl(D,R,T){if("function"==typeof T)return T(D,R);switch(T){case"pathParamsChange":return!zn(D.url,R.url);case"pathParamsOrQueryParamsChange":return!zn(D.url,R.url)||!Ir(D.queryParams,R.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!_d(D,R)||!Ir(D.queryParams,R.queryParams);default:return!_d(D,R)}}(X,q,q.routeConfig.runGuardsAndResolvers);Ge?V.canActivateChecks.push(new $l(I)):(q.data=X.data,q._resolvedData=X._resolvedData),ho(D,R,q.component?fe?fe.children:null:T,I,V),Ge&&fe&&fe.outlet&&fe.outlet.isActivated&&V.canDeactivateChecks.push(new $s(fe.outlet.component,X))}else X&&Lo(R,fe,V),V.canActivateChecks.push(new $l(I)),ho(D,null,q.component?fe?fe.children:null:T,I,V)})(X,q[X.value.outlet],T,I.concat([X.value]),V),delete q[X.value.outlet]}),Ui(q,(X,fe)=>Lo(X,T.getContext(fe),V)),V}function Lo(D,R,T){const I=ra(D),V=D.value;Ui(I,(q,X)=>{Lo(q,V.component?R?R.children.getContext(X):null:R,T)}),T.canDeactivateChecks.push(new $s(V.component&&R&&R.outlet&&R.outlet.isActivated?R.outlet.component:null,V))}function nn(D){return"function"==typeof D}function Ke(D){return D instanceof tt||"EmptyError"===D?.name}const _n=Symbol("INITIAL_VALUE");function Ds(){return(0,Ot.w)(D=>(0,ft.a)(D.map(R=>R.pipe((0,Ut.q)(1),(0,Lt.O)(_n)))).pipe((0,je.U)(R=>{for(const T of R)if(!0!==T){if(T===_n)return _n;if(!1===T||T instanceof In)return T}return!0}),(0,Zt.h)(R=>R!==_n),(0,Ut.q)(1)))}function Go(D){return(0,nt.z)((0,Ye.b)(R=>{if(hr(R))throw vh(0,R)}),(0,je.U)(R=>!0===R))}const mr={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function ql(D,R,T,I,V){const q=qs(D,R,T);return q.matched?function ur(D,R,T,I){const V=R.canMatch;if(!V||0===V.length)return(0,be.of)(!0);const q=V.map(X=>{const fe=Ys(X,D);return ns(function Yl(D){return D&&nn(D.canMatch)}(fe)?fe.canMatch(R,T):D.runInContext(()=>fe(R,T)))});return(0,be.of)(q).pipe(Ds(),Go())}(I=Mr(R,I),R,T).pipe((0,je.U)(X=>!0===X?q:{...mr})):(0,be.of)(q)}function qs(D,R,T){if(""===R.path)return"full"===R.pathMatch&&(D.hasChildren()||T.length>0)?{...mr}:{matched:!0,consumedSegments:[],remainingSegments:T,parameters:{},positionalParamSegments:{}};const V=(R.matcher||Ar)(T,D,R);if(!V)return{...mr};const q={};Ui(V.posParams,(fe,Ge)=>{q[Ge]=fe.path});const X=V.consumed.length>0?{...q,...V.consumed[V.consumed.length-1].parameters}:q;return{matched:!0,consumedSegments:V.consumed,remainingSegments:T.slice(V.consumed.length),parameters:X,positionalParamSegments:V.posParams??{}}}function or(D,R,T,I){if(T.length>0&&function mo(D,R,T){return T.some(I=>Vo(D,R,I)&&gi(I)!==ln)}(D,T,I)){const q=new un(R,function po(D,R,T,I){const V={};V[ln]=I,I._sourceSegment=D,I._segmentIndexShift=R.length;for(const q of T)if(""===q.path&&gi(q)!==ln){const X=new un([],{});X._sourceSegment=D,X._segmentIndexShift=R.length,V[gi(q)]=X}return V}(D,R,I,new un(T,D.children)));return q._sourceSegment=D,q._segmentIndexShift=R.length,{segmentGroup:q,slicedSegments:[]}}if(0===T.length&&function Th(D,R,T){return T.some(I=>Vo(D,R,I))}(D,T,I)){const q=new un(D.segments,function Wn(D,R,T,I,V){const q={};for(const X of I)if(Vo(D,T,X)&&!V[gi(X)]){const fe=new un([],{});fe._sourceSegment=D,fe._segmentIndexShift=R.length,q[gi(X)]=fe}return{...V,...q}}(D,R,T,I,D.children));return q._sourceSegment=D,q._segmentIndexShift=R.length,{segmentGroup:q,slicedSegments:T}}const V=new un(D.segments,D.children);return V._sourceSegment=D,V._segmentIndexShift=R.length,{segmentGroup:V,slicedSegments:T}}function Vo(D,R,T){return(!(D.hasChildren()||R.length>0)||"full"!==T.pathMatch)&&""===T.path}function Vc(D,R,T,I){return!!(gi(D)===I||I!==ln&&Vo(R,T,D))&&("**"===D.path||qs(R,D,T).matched)}function Uc(D,R,T){return 0===R.length&&!D.children[T]}const gr=!1;class ie{constructor(R){this.segmentGroup=R||null}}class aa{constructor(R){this.urlTree=R}}function go(D){return rt(new ie(D))}function _o(D){return rt(new aa(D))}class Uo{constructor(R,T,I,V,q){this.injector=R,this.configLoader=T,this.urlSerializer=I,this.urlTree=V,this.config=q,this.allowRedirects=!0}apply(){const R=or(this.urlTree.root,[],[],this.config).segmentGroup,T=new un(R.segments,R.children);return this.expandSegmentGroup(this.injector,this.config,T,ln).pipe((0,je.U)(q=>this.createUrlTree(Bi(q),this.urlTree.queryParams,this.urlTree.fragment))).pipe(bt(q=>{if(q instanceof aa)return this.allowRedirects=!1,this.match(q.urlTree);throw q instanceof ie?this.noMatchError(q):q}))}match(R){return this.expandSegmentGroup(this.injector,this.config,R.root,ln).pipe((0,je.U)(V=>this.createUrlTree(Bi(V),R.queryParams,R.fragment))).pipe(bt(V=>{throw V instanceof ie?this.noMatchError(V):V}))}noMatchError(R){return new c.vHH(4002,gr)}createUrlTree(R,T,I){const V=Yn(R);return new In(V,T,I)}expandSegmentGroup(R,T,I,V){return 0===I.segments.length&&I.hasChildren()?this.expandChildren(R,T,I).pipe((0,je.U)(q=>new un([],q))):this.expandSegment(R,I,T,I.segments,V,!0)}expandChildren(R,T,I){const V=[];for(const q of Object.keys(I.children))"primary"===q?V.unshift(q):V.push(q);return(0,W.D)(V).pipe(Ue(q=>{const X=I.children[q],fe=bd(T,q);return this.expandSegmentGroup(R,fe,X,q).pipe((0,je.U)(Ge=>({segment:Ge,outlet:q})))}),dn((q,X)=>(q[X.outlet]=X.segment,q),{}),Vi())}expandSegment(R,T,I,V,q,X){return(0,W.D)(I).pipe(Ue(fe=>this.expandSegmentAgainstRoute(R,T,I,fe,V,q,X).pipe(bt(vt=>{if(vt instanceof ie)return(0,be.of)(null);throw vt}))),Be(fe=>!!fe),bt((fe,Ge)=>{if(Ke(fe))return Uc(T,V,q)?(0,be.of)(new un([],{})):go(T);throw fe}))}expandSegmentAgainstRoute(R,T,I,V,q,X,fe){return Vc(V,T,q,X)?void 0===V.redirectTo?this.matchSegmentAgainstRoute(R,T,V,q,X):fe&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(R,T,I,V,q,X):go(T):go(T)}expandSegmentAgainstRouteUsingRedirect(R,T,I,V,q,X){return"**"===V.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(R,I,V,X):this.expandRegularSegmentAgainstRouteUsingRedirect(R,T,I,V,q,X)}expandWildCardWithParamsAgainstRouteUsingRedirect(R,T,I,V){const q=this.applyRedirectCommands([],I.redirectTo,{});return I.redirectTo.startsWith("/")?_o(q):this.lineralizeSegments(I,q).pipe((0,Ht.z)(X=>{const fe=new un(X,{});return this.expandSegment(R,fe,T,X,V,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(R,T,I,V,q,X){const{matched:fe,consumedSegments:Ge,remainingSegments:vt,positionalParamSegments:Ft}=qs(T,V,q);if(!fe)return go(T);const Un=this.applyRedirectCommands(Ge,V.redirectTo,Ft);return V.redirectTo.startsWith("/")?_o(Un):this.lineralizeSegments(V,Un).pipe((0,Ht.z)(Dr=>this.expandSegment(R,T,I,Dr.concat(vt),X,!1)))}matchSegmentAgainstRoute(R,T,I,V,q){return"**"===I.path?(R=Mr(I,R),I.loadChildren?(I._loadedRoutes?(0,be.of)({routes:I._loadedRoutes,injector:I._loadedInjector}):this.configLoader.loadChildren(R,I)).pipe((0,je.U)(fe=>(I._loadedRoutes=fe.routes,I._loadedInjector=fe.injector,new un(V,{})))):(0,be.of)(new un(V,{}))):ql(T,I,V,R).pipe((0,Ot.w)(({matched:X,consumedSegments:fe,remainingSegments:Ge})=>X?this.getChildConfig(R=I._injector??R,I,V).pipe((0,Ht.z)(Ft=>{const Un=Ft.injector??R,Dr=Ft.routes,{segmentGroup:pa,slicedSegments:ma}=or(T,fe,Ge,Dr),cs=new un(pa.segments,pa.children);if(0===ma.length&&cs.hasChildren())return this.expandChildren(Un,Dr,cs).pipe((0,je.U)(ga=>new un(fe,ga)));if(0===Dr.length&&0===ma.length)return(0,be.of)(new un(fe,{}));const Qr=gi(I)===q;return this.expandSegment(Un,cs,Dr,ma,Qr?ln:q,!0).pipe((0,je.U)(bo=>new un(fe.concat(bo.segments),bo.children)))})):go(T)))}getChildConfig(R,T,I){return T.children?(0,be.of)({routes:T.children,injector:R}):T.loadChildren?void 0!==T._loadedRoutes?(0,be.of)({routes:T._loadedRoutes,injector:T._loadedInjector}):function Yt(D,R,T,I){const V=R.canLoad;if(void 0===V||0===V.length)return(0,be.of)(!0);const q=V.map(X=>{const fe=Ys(X,D);return ns(function ap(D){return D&&nn(D.canLoad)}(fe)?fe.canLoad(R,T):D.runInContext(()=>fe(R,T)))});return(0,be.of)(q).pipe(Ds(),Go())}(R,T,I).pipe((0,Ht.z)(V=>V?this.configLoader.loadChildren(R,T).pipe((0,Ye.b)(q=>{T._loadedRoutes=q.routes,T._loadedInjector=q.injector})):function vo(D){return rt(yh(gr,3))}())):(0,be.of)({routes:[],injector:R})}lineralizeSegments(R,T){let I=[],V=T.root;for(;;){if(I=I.concat(V.segments),0===V.numberOfChildren)return(0,be.of)(I);if(V.numberOfChildren>1||!V.children[ln])return R.redirectTo,rt(new c.vHH(4e3,gr));V=V.children[ln]}}applyRedirectCommands(R,T,I){return this.applyRedirectCreateUrlTree(T,this.urlSerializer.parse(T),R,I)}applyRedirectCreateUrlTree(R,T,I,V){const q=this.createSegmentGroup(R,T.root,I,V);return new In(q,this.createQueryParams(T.queryParams,this.urlTree.queryParams),T.fragment)}createQueryParams(R,T){const I={};return Ui(R,(V,q)=>{if("string"==typeof V&&V.startsWith(":")){const fe=V.substring(1);I[q]=T[fe]}else I[q]=V}),I}createSegmentGroup(R,T,I,V){const q=this.createSegments(R,T.segments,I,V);let X={};return Ui(T.children,(fe,Ge)=>{X[Ge]=this.createSegmentGroup(R,fe,I,V)}),new un(q,X)}createSegments(R,T,I,V){return T.map(q=>q.path.startsWith(":")?this.findPosParam(R,q,V):this.findOrReturn(q,I))}findPosParam(R,T,I){const V=I[T.path.substring(1)];if(!V)throw new c.vHH(4001,gr);return V}findOrReturn(R,T){let I=0;for(const V of T){if(V.path===R.path)return T.splice(I),V;I++}return R}}class $i{}class Jl{constructor(R,T,I,V,q,X,fe){this.injector=R,this.rootComponentType=T,this.config=I,this.urlTree=V,this.url=q,this.paramsInheritanceStrategy=X,this.urlSerializer=fe}recognize(){const R=or(this.urlTree.root,[],[],this.config.filter(T=>void 0===T.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,R,ln).pipe((0,je.U)(T=>{if(null===T)return null;const I=new Po([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},ln,this.rootComponentType,null,this.urlTree.root,-1,{}),V=new Wi(I,T),q=new Ul(this.url,V);return this.inheritParamsAndData(q._root),q}))}inheritParamsAndData(R){const T=R.value,I=ol(T,this.paramsInheritanceStrategy);T.params=Object.freeze(I.params),T.data=Object.freeze(I.data),R.children.forEach(V=>this.inheritParamsAndData(V))}processSegmentGroup(R,T,I,V){return 0===I.segments.length&&I.hasChildren()?this.processChildren(R,T,I):this.processSegment(R,T,I,I.segments,V)}processChildren(R,T,I){return(0,W.D)(Object.keys(I.children)).pipe(Ue(V=>{const q=I.children[V],X=bd(T,V);return this.processSegmentGroup(R,X,q,V)}),dn((V,q)=>V&&q?(V.push(...q),V):null),function fn(D,R=!1){return(0,en.e)((T,I)=>{let V=0;T.subscribe((0,Kt.x)(I,q=>{const X=D(q,V++);(X||R)&&I.next(q),!X&&I.complete()}))})}(V=>null!==V),Bt(null),Vi(),(0,je.U)(V=>{if(null===V)return null;const q=P(V);return function Hc(D){D.sort((R,T)=>R.value.outlet===ln?-1:T.value.outlet===ln?1:R.value.outlet.localeCompare(T.value.outlet))}(q),q}))}processSegment(R,T,I,V,q){return(0,W.D)(T).pipe(Ue(X=>this.processSegmentAgainstRoute(X._injector??R,X,I,V,q)),Be(X=>!!X),bt(X=>{if(Ke(X))return Uc(I,V,q)?(0,be.of)([]):(0,be.of)(null);throw X}))}processSegmentAgainstRoute(R,T,I,V,q){if(T.redirectTo||!Vc(T,I,V,q))return(0,be.of)(null);let X;if("**"===T.path){const fe=V.length>0?ro(V).parameters:{},Ge=K(I)+V.length,vt=new Po(V,fe,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,De(T),gi(T),T.component??T._loadedComponent??null,T,k(I),Ge,ze(T));X=(0,be.of)({snapshot:vt,consumedSegments:[],remainingSegments:[]})}else X=ql(I,T,V,R).pipe((0,je.U)(({matched:fe,consumedSegments:Ge,remainingSegments:vt,parameters:Ft})=>{if(!fe)return null;const Un=K(I)+Ge.length;return{snapshot:new Po(Ge,Ft,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,De(T),gi(T),T.component??T._loadedComponent??null,T,k(I),Un,ze(T)),consumedSegments:Ge,remainingSegments:vt}}));return X.pipe((0,Ot.w)(fe=>{if(null===fe)return(0,be.of)(null);const{snapshot:Ge,consumedSegments:vt,remainingSegments:Ft}=fe;R=T._injector??R;const Un=T._loadedInjector??R,Dr=function Zl(D){return D.children?D.children:D.loadChildren?D._loadedRoutes:[]}(T),{segmentGroup:pa,slicedSegments:ma}=or(I,vt,Ft,Dr.filter(Qr=>void 0===Qr.redirectTo));if(0===ma.length&&pa.hasChildren())return this.processChildren(Un,Dr,pa).pipe((0,je.U)(Qr=>null===Qr?null:[new Wi(Ge,Qr)]));if(0===Dr.length&&0===ma.length)return(0,be.of)([new Wi(Ge,[])]);const cs=gi(T)===q;return this.processSegment(Un,Dr,pa,ma,cs?ln:q).pipe((0,je.U)(Qr=>null===Qr?null:[new Wi(Ge,Qr)]))}))}}function Na(D){const R=D.value.routeConfig;return R&&""===R.path&&void 0===R.redirectTo}function P(D){const R=[],T=new Set;for(const I of D){if(!Na(I)){R.push(I);continue}const V=R.find(q=>I.value.routeConfig===q.value.routeConfig);void 0!==V?(V.children.push(...I.children),T.add(V)):R.push(I)}for(const I of T){const V=P(I.children);R.push(new Wi(I.value,V))}return R.filter(I=>!T.has(I))}function k(D){let R=D;for(;R._sourceSegment;)R=R._sourceSegment;return R}function K(D){let R=D,T=R._segmentIndexShift??0;for(;R._sourceSegment;)R=R._sourceSegment,T+=R._segmentIndexShift??0;return T-1}function De(D){return D.data||{}}function ze(D){return D.resolve||{}}function Rt(D){return"string"==typeof D.title||null===D.title}function Vn(D){return(0,Ot.w)(R=>{const T=D(R);return T?(0,W.D)(T).pipe((0,je.U)(()=>R)):(0,be.of)(R)})}const Mi=new c.OlP("ROUTES");let Ss=(()=>{class D{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,c.f3M)(c.Sil)}loadComponent(T){if(this.componentLoaders.get(T))return this.componentLoaders.get(T);if(T._loadedComponent)return(0,be.of)(T._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(T);const I=ns(T.loadComponent()).pipe((0,je.U)(Vr),(0,Ye.b)(q=>{this.onLoadEndListener&&this.onLoadEndListener(T),T._loadedComponent=q}),zt(()=>{this.componentLoaders.delete(T)})),V=new vi(I,()=>new Ne.x).pipe(ci());return this.componentLoaders.set(T,V),V}loadChildren(T,I){if(this.childrenLoaders.get(I))return this.childrenLoaders.get(I);if(I._loadedRoutes)return(0,be.of)({routes:I._loadedRoutes,injector:I._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(I);const q=this.loadModuleFactoryOrRoutes(I.loadChildren).pipe((0,je.U)(fe=>{this.onLoadEndListener&&this.onLoadEndListener(I);let Ge,vt,Ft=!1;Array.isArray(fe)?vt=fe:(Ge=fe.create(T).injector,vt=yi(Ge.get(Mi,[],c.XFs.Self|c.XFs.Optional)));return{routes:vt.map(No),injector:Ge}}),zt(()=>{this.childrenLoaders.delete(I)})),X=new vi(q,()=>new Ne.x).pipe(ci());return this.childrenLoaders.set(I,X),X}loadModuleFactoryOrRoutes(T){return ns(T()).pipe((0,je.U)(Vr),(0,Ht.z)(I=>I instanceof c.YKP||Array.isArray(I)?(0,be.of)(I):(0,W.D)(this.compiler.compileModuleAsync(I))))}}return D.\u0275fac=function(T){return new(T||D)},D.\u0275prov=c.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function Vr(D){return function Qi(D){return D&&"object"==typeof D&&"default"in D}(D)?D.default:D}let Cs=(()=>{class D{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new Ne.x,this.configLoader=(0,c.f3M)(Ss),this.environmentInjector=(0,c.f3M)(c.lqb),this.urlSerializer=(0,c.f3M)(bs),this.rootContexts=(0,c.f3M)(Aa),this.navigationId=0,this.afterPreactivation=()=>(0,be.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=V=>this.events.next(new Xi(V)),this.configLoader.onLoadStartListener=V=>this.events.next(new Hs(V))}complete(){this.transitions?.complete()}handleNavigationRequest(T){const I=++this.navigationId;this.transitions?.next({...this.transitions.value,...T,id:I})}setupNavigations(T){return this.transitions=new Oe.X({id:0,targetPageId:0,currentUrlTree:T.currentUrlTree,currentRawUrl:T.currentUrlTree,extractedUrl:T.urlHandlingStrategy.extract(T.currentUrlTree),urlAfterRedirects:T.urlHandlingStrategy.extract(T.currentUrlTree),rawUrl:T.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Yr,restoredState:null,currentSnapshot:T.routerState.snapshot,targetSnapshot:null,currentRouterState:T.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,Zt.h)(I=>0!==I.id),(0,je.U)(I=>({...I,extractedUrl:T.urlHandlingStrategy.extract(I.rawUrl)})),(0,Ot.w)(I=>{let V=!1,q=!1;return(0,be.of)(I).pipe((0,Ye.b)(X=>{this.currentNavigation={id:X.id,initialUrl:X.rawUrl,extractedUrl:X.extractedUrl,trigger:X.source,extras:X.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Ot.w)(X=>{const fe=T.browserUrlTree.toString(),Ge=!T.navigated||X.extractedUrl.toString()!==fe||fe!==T.currentUrlTree.toString();if(!Ge&&"reload"!==(X.extras.onSameUrlNavigation??T.onSameUrlNavigation)){const Ft="";return this.events.next(new ta(X.id,T.serializeUrl(I.rawUrl),Ft,0)),T.rawUrlTree=X.rawUrl,X.resolve(null),xt.E}if(T.urlHandlingStrategy.shouldProcessUrl(X.rawUrl))return Kl(X.source)&&(T.browserUrlTree=X.extractedUrl),(0,be.of)(X).pipe((0,Ot.w)(Ft=>{const Un=this.transitions?.getValue();return this.events.next(new Gs(Ft.id,this.urlSerializer.serialize(Ft.extractedUrl),Ft.source,Ft.restoredState)),Un!==this.transitions?.getValue()?xt.E:Promise.resolve(Ft)}),function la(D,R,T,I){return(0,Ot.w)(V=>function Oa(D,R,T,I,V){return new Uo(D,R,T,I,V).apply()}(D,R,T,V.extractedUrl,I).pipe((0,je.U)(q=>({...V,urlAfterRedirects:q}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,T.config),(0,Ye.b)(Ft=>{this.currentNavigation={...this.currentNavigation,finalUrl:Ft.urlAfterRedirects},I.urlAfterRedirects=Ft.urlAfterRedirects}),function Wt(D,R,T,I,V){return(0,Ht.z)(q=>function _i(D,R,T,I,V,q,X="emptyOnly"){return new Jl(D,R,T,I,V,X,q).recognize().pipe((0,Ot.w)(fe=>null===fe?function as(D){return new ht.y(R=>R.error(D))}(new $i):(0,be.of)(fe)))}(D,R,T,q.urlAfterRedirects,I.serialize(q.urlAfterRedirects),I,V).pipe((0,je.U)(X=>({...q,targetSnapshot:X}))))}(this.environmentInjector,this.rootComponentType,T.config,this.urlSerializer,T.paramsInheritanceStrategy),(0,Ye.b)(Ft=>{if(I.targetSnapshot=Ft.targetSnapshot,"eager"===T.urlUpdateStrategy){if(!Ft.extras.skipLocationChange){const Dr=T.urlHandlingStrategy.merge(Ft.urlAfterRedirects,Ft.rawUrl);T.setBrowserUrl(Dr,Ft)}T.browserUrlTree=Ft.urlAfterRedirects}const Un=new Mu(Ft.id,this.urlSerializer.serialize(Ft.extractedUrl),this.urlSerializer.serialize(Ft.urlAfterRedirects),Ft.targetSnapshot);this.events.next(Un)}));if(Ge&&T.urlHandlingStrategy.shouldProcessUrl(T.rawUrlTree)){const{id:Ft,extractedUrl:Un,source:Dr,restoredState:pa,extras:ma}=X,cs=new Gs(Ft,this.urlSerializer.serialize(Un),Dr,pa);this.events.next(cs);const Qr=Vl(Un,this.rootComponentType).snapshot;return I={...X,targetSnapshot:Qr,urlAfterRedirects:Un,extras:{...ma,skipLocationChange:!1,replaceUrl:!1}},(0,be.of)(I)}{const Ft="";return this.events.next(new ta(X.id,T.serializeUrl(I.extractedUrl),Ft,1)),T.rawUrlTree=X.rawUrl,X.resolve(null),xt.E}}),(0,Ye.b)(X=>{const fe=new Us(X.id,this.urlSerializer.serialize(X.extractedUrl),this.urlSerializer.serialize(X.urlAfterRedirects),X.targetSnapshot);this.events.next(fe)}),(0,je.U)(X=>I={...X,guards:Nr(X.targetSnapshot,X.currentSnapshot,this.rootContexts)}),function Pa(D,R){return(0,Ht.z)(T=>{const{targetSnapshot:I,currentSnapshot:V,guards:{canActivateChecks:q,canDeactivateChecks:X}}=T;return 0===X.length&&0===q.length?(0,be.of)({...T,guardsResult:!0}):function Xn(D,R,T,I){return(0,W.D)(D).pipe((0,Ht.z)(V=>function ws(D,R,T,I,V){const q=R&&R.routeConfig?R.routeConfig.canDeactivate:null;if(!q||0===q.length)return(0,be.of)(!0);const X=q.map(fe=>{const Ge=Fo(R)??V,vt=Ys(fe,Ge);return ns(function kc(D){return D&&nn(D.canDeactivate)}(vt)?vt.canDeactivate(D,R,T,I):Ge.runInContext(()=>vt(D,R,T,I))).pipe(Be())});return(0,be.of)(X).pipe(Ds())}(V.component,V.route,T,R,I)),Be(V=>!0!==V,!0))}(X,I,V,D).pipe((0,Ht.z)(fe=>fe&&function ai(D){return"boolean"==typeof D}(fe)?function Gc(D,R,T,I){return(0,W.D)(R).pipe(Ue(V=>(0,Vt.z)(function nr(D,R){return null!==D&&R&&R(new Tr(D)),(0,be.of)(!0)}(V.route.parent,I),function Ai(D,R){return null!==D&&R&&R(new ia(D)),(0,be.of)(!0)}(V.route,I),function ko(D,R,T){const I=R[R.length-1],q=R.slice(0,R.length-1).reverse().map(X=>function Du(D){const R=D.routeConfig?D.routeConfig.canActivateChild:null;return R&&0!==R.length?{node:D,guards:R}:null}(X)).filter(X=>null!==X).map(X=>He(()=>{const fe=X.guards.map(Ge=>{const vt=Fo(X.node)??T,Ft=Ys(Ge,vt);return ns(function Fn(D){return D&&nn(D.canActivateChild)}(Ft)?Ft.canActivateChild(I,D):vt.runInContext(()=>Ft(I,D))).pipe(Be())});return(0,be.of)(fe).pipe(Ds())}));return(0,be.of)(q).pipe(Ds())}(D,V.path,T),function jo(D,R,T){const I=R.routeConfig?R.routeConfig.canActivate:null;if(!I||0===I.length)return(0,be.of)(!0);const V=I.map(q=>He(()=>{const X=Fo(R)??T,fe=Ys(q,X);return ns(function st(D){return D&&nn(D.canActivate)}(fe)?fe.canActivate(R,D):X.runInContext(()=>fe(R,D))).pipe(Be())}));return(0,be.of)(V).pipe(Ds())}(D,V.route,T))),Be(V=>!0!==V,!0))}(I,q,D,R):(0,be.of)(fe)),(0,je.U)(fe=>({...T,guardsResult:fe})))})}(this.environmentInjector,X=>this.events.next(X)),(0,Ye.b)(X=>{if(I.guardsResult=X.guardsResult,hr(X.guardsResult))throw vh(0,X.guardsResult);const fe=new na(X.id,this.urlSerializer.serialize(X.extractedUrl),this.urlSerializer.serialize(X.urlAfterRedirects),X.targetSnapshot,!!X.guardsResult);this.events.next(fe)}),(0,Zt.h)(X=>!!X.guardsResult||(T.restoreHistory(X),this.cancelNavigationTransition(X,"",3),!1)),Vn(X=>{if(X.guards.canActivateChecks.length)return(0,be.of)(X).pipe((0,Ye.b)(fe=>{const Ge=new ao(fe.id,this.urlSerializer.serialize(fe.extractedUrl),this.urlSerializer.serialize(fe.urlAfterRedirects),fe.targetSnapshot);this.events.next(Ge)}),(0,Ot.w)(fe=>{let Ge=!1;return(0,be.of)(fe).pipe(function bn(D,R){return(0,Ht.z)(T=>{const{targetSnapshot:I,guards:{canActivateChecks:V}}=T;if(!V.length)return(0,be.of)(T);let q=0;return(0,W.D)(V).pipe(Ue(X=>function Sn(D,R,T,I){const V=D.routeConfig,q=D._resolve;return void 0!==V?.title&&!Rt(V)&&(q[cn]=V.title),function xn(D,R,T,I){const V=function On(D){return[...Object.keys(D),...Object.getOwnPropertySymbols(D)]}(D);if(0===V.length)return(0,be.of)({});const q={};return(0,W.D)(V).pipe((0,Ht.z)(X=>function Ii(D,R,T,I){const V=Fo(R)??I,q=Ys(D,V);return ns(q.resolve?q.resolve(R,T):V.runInContext(()=>q(R,T)))}(D[X],R,T,I).pipe(Be(),(0,Ye.b)(fe=>{q[X]=fe}))),Gn(1),(0,Tn.h)(q),bt(X=>Ke(X)?xt.E:rt(X)))}(q,D,R,I).pipe((0,je.U)(X=>(D._resolvedData=X,D.data=ol(D,T).resolve,V&&Rt(V)&&(D.data[cn]=V.title),null)))}(X.route,I,D,R)),(0,Ye.b)(()=>q++),Gn(1),(0,Ht.z)(X=>q===V.length?(0,be.of)(T):xt.E))})}(T.paramsInheritanceStrategy,this.environmentInjector),(0,Ye.b)({next:()=>Ge=!0,complete:()=>{Ge||(T.restoreHistory(fe),this.cancelNavigationTransition(fe,"",2))}}))}),(0,Ye.b)(fe=>{const Ge=new zi(fe.id,this.urlSerializer.serialize(fe.extractedUrl),this.urlSerializer.serialize(fe.urlAfterRedirects),fe.targetSnapshot);this.events.next(Ge)}))}),Vn(X=>{const fe=Ge=>{const vt=[];Ge.routeConfig?.loadComponent&&!Ge.routeConfig._loadedComponent&&vt.push(this.configLoader.loadComponent(Ge.routeConfig).pipe((0,Ye.b)(Ft=>{Ge.component=Ft}),(0,je.U)(()=>{})));for(const Ft of Ge.children)vt.push(...fe(Ft));return vt};return(0,ft.a)(fe(X.targetSnapshot.root)).pipe(Bt(),(0,Ut.q)(1))}),Vn(()=>this.afterPreactivation()),(0,je.U)(X=>{const fe=function _h(D,R,T){const I=Ea(D,R._root,T?T._root:void 0);return new lo(I,R)}(T.routeReuseStrategy,X.targetSnapshot,X.currentRouterState);return I={...X,targetRouterState:fe}}),(0,Ye.b)(X=>{T.currentUrlTree=X.urlAfterRedirects,T.rawUrlTree=T.urlHandlingStrategy.merge(X.urlAfterRedirects,X.rawUrl),T.routerState=X.targetRouterState,"deferred"===T.urlUpdateStrategy&&(X.extras.skipLocationChange||T.setBrowserUrl(T.rawUrlTree,X),T.browserUrlTree=X.urlAfterRedirects)}),((D,R,T)=>(0,je.U)(I=>(new jc(R,I.targetRouterState,I.currentRouterState,T).activate(D),I)))(this.rootContexts,T.routeReuseStrategy,X=>this.events.next(X)),(0,Ut.q)(1),(0,Ye.b)({next:X=>{V=!0,this.lastSuccessfulNavigation=this.currentNavigation,T.navigated=!0,this.events.next(new oi(X.id,this.urlSerializer.serialize(X.extractedUrl),this.urlSerializer.serialize(T.currentUrlTree))),T.titleStrategy?.updateTitle(X.targetRouterState.snapshot),X.resolve(!0)},complete:()=>{V=!0}}),zt(()=>{V||q||this.cancelNavigationTransition(I,"",1),this.currentNavigation?.id===I.id&&(this.currentNavigation=null)}),bt(X=>{if(q=!0,yd(X)){Wl(X)||(T.navigated=!0,T.restoreHistory(I,!0));const fe=new Vs(I.id,this.urlSerializer.serialize(I.extractedUrl),X.message,X.cancellationCode);if(this.events.next(fe),Wl(X)){const Ge=T.urlHandlingStrategy.merge(X.url,T.rawUrlTree),vt={skipLocationChange:I.extras.skipLocationChange,replaceUrl:"eager"===T.urlUpdateStrategy||Kl(I.source)};T.scheduleNavigation(Ge,Yr,null,vt,{resolve:I.resolve,reject:I.reject,promise:I.promise})}else I.resolve(!1)}else{T.restoreHistory(I,!0);const fe=new Mn(I.id,this.urlSerializer.serialize(I.extractedUrl),X,I.targetSnapshot??void 0);this.events.next(fe);try{I.resolve(T.errorHandler(X))}catch(Ge){I.reject(Ge)}}return xt.E}))}))}cancelNavigationTransition(T,I,V){const q=new Vs(T.id,this.urlSerializer.serialize(T.extractedUrl),I,V);this.events.next(q),T.resolve(!1)}}return D.\u0275fac=function(T){return new(T||D)},D.\u0275prov=c.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function Kl(D){return D!==Yr}let Fa=(()=>{class D{buildTitle(T){let I,V=T.root;for(;void 0!==V;)I=this.getResolvedTitleForRoute(V)??I,V=V.children.find(q=>q.outlet===ln);return I}getResolvedTitleForRoute(T){return T.data[cn]}}return D.\u0275fac=function(T){return new(T||D)},D.\u0275prov=c.Yz7({token:D,factory:function(){return(0,c.f3M)(fl)},providedIn:"root"}),D})(),fl=(()=>{class D extends Fa{constructor(T){super(),this.title=T}updateTitle(T){const I=this.buildTitle(T);void 0!==I&&this.title.setTitle(I)}}return D.\u0275fac=function(T){return new(T||D)(c.LFG(ts.Dx))},D.\u0275prov=c.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})(),Td=(()=>{class D{}return D.\u0275fac=function(T){return new(T||D)},D.\u0275prov=c.Yz7({token:D,factory:function(){return(0,c.f3M)(ua)},providedIn:"root"}),D})();class pl{shouldDetach(R){return!1}store(R,T){}shouldAttach(R){return!1}retrieve(R){return null}shouldReuseRoute(R,T){return R.routeConfig===T.routeConfig}}let ua=(()=>{class D extends pl{}return D.\u0275fac=function(){let R;return function(I){return(R||(R=c.n5z(D)))(I||D)}}(),D.\u0275prov=c.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();const ml=new c.OlP("",{providedIn:"root",factory:()=>({})});let gl=(()=>{class D{}return D.\u0275fac=function(T){return new(T||D)},D.\u0275prov=c.Yz7({token:D,factory:function(){return(0,c.f3M)(Md)},providedIn:"root"}),D})(),Md=(()=>{class D{shouldProcessUrl(T){return!0}extract(T){return T}merge(T,I){return T}}return D.\u0275fac=function(T){return new(T||D)},D.\u0275prov=c.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function Js(D){throw D}function xd(D,R,T){return R.parse("/")}const Xl={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Ru={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Pi=(()=>{class D{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,c.f3M)(c.c2e),this.isNgZoneEnabled=!1,this.options=(0,c.f3M)(ml,{optional:!0})||{},this.errorHandler=this.options.errorHandler||Js,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||xd,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,c.f3M)(gl),this.routeReuseStrategy=(0,c.f3M)(Td),this.urlCreationStrategy=(0,c.f3M)(qr),this.titleStrategy=(0,c.f3M)(Fa),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=yi((0,c.f3M)(Mi,{optional:!0})??[]),this.navigationTransitions=(0,c.f3M)(Cs),this.urlSerializer=(0,c.f3M)(bs),this.location=(0,c.f3M)(dt.Ye),this.isNgZoneEnabled=(0,c.f3M)(c.R0b)instanceof c.R0b&&c.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new In,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Vl(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(T=>{this.lastSuccessfulId=T.id,this.currentPageId=T.targetPageId},T=>{this.console.warn(`Unhandled Navigation Error: ${T}`)})}resetRootComponentType(T){this.routerState.root.component=T,this.navigationTransitions.rootComponentType=T}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const T=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Yr,T)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(T=>{const I="popstate"===T.type?"popstate":"hashchange";"popstate"===I&&setTimeout(()=>{this.navigateToSyncWithBrowser(T.url,I,T.state)},0)}))}navigateToSyncWithBrowser(T,I,V){const q={replaceUrl:!0},X=V?.navigationId?V:null;if(V){const Ge={...V};delete Ge.navigationId,delete Ge.\u0275routerPageId,0!==Object.keys(Ge).length&&(q.state=Ge)}const fe=this.parseUrl(T);this.scheduleNavigation(fe,I,X,q)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(T){this.config=T.map(No),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(T,I={}){const{relativeTo:V,queryParams:q,fragment:X,queryParamsHandling:fe,preserveFragment:Ge}=I,vt=Ge?this.currentUrlTree.fragment:X;let Ft=null;switch(fe){case"merge":Ft={...this.currentUrlTree.queryParams,...q};break;case"preserve":Ft=this.currentUrlTree.queryParams;break;default:Ft=q||null}return null!==Ft&&(Ft=this.removeEmptyProps(Ft)),this.urlCreationStrategy.createUrlTree(V,this.routerState,this.currentUrlTree,T,Ft,vt??null)}navigateByUrl(T,I={skipLocationChange:!1}){const V=hr(T)?T:this.parseUrl(T),q=this.urlHandlingStrategy.merge(V,this.rawUrlTree);return this.scheduleNavigation(q,Yr,null,I)}navigate(T,I={skipLocationChange:!1}){return function ir(D){for(let R=0;R<D.length;R++){const T=D[R];if(null==T)throw new c.vHH(4008,false)}}(T),this.navigateByUrl(this.createUrlTree(T,I),I)}serializeUrl(T){return this.urlSerializer.serialize(T)}parseUrl(T){let I;try{I=this.urlSerializer.parse(T)}catch(V){I=this.malformedUriErrorHandler(V,this.urlSerializer,T)}return I}isActive(T,I){let V;if(V=!0===I?{...Xl}:!1===I?{...Ru}:I,hr(T))return ri(this.currentUrlTree,T,V);const q=this.parseUrl(T);return ri(this.currentUrlTree,q,V)}removeEmptyProps(T){return Object.keys(T).reduce((I,V)=>{const q=T[V];return null!=q&&(I[V]=q),I},{})}scheduleNavigation(T,I,V,q,X){if(this.disposed)return Promise.resolve(!1);let fe,Ge,vt,Ft;return X?(fe=X.resolve,Ge=X.reject,vt=X.promise):vt=new Promise((Un,Dr)=>{fe=Un,Ge=Dr}),Ft="computed"===this.canceledNavigationResolution?V&&V.\u0275routerPageId?V.\u0275routerPageId:q.replaceUrl||q.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:Ft,source:I,restoredState:V,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:T,extras:q,resolve:fe,reject:Ge,promise:vt,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),vt.catch(Un=>Promise.reject(Un))}setBrowserUrl(T,I){const V=this.urlSerializer.serialize(T),q={...I.extras.state,...this.generateNgRouterState(I.id,I.targetPageId)};this.location.isCurrentPathEqualTo(V)||I.extras.replaceUrl?this.location.replaceState(V,"",q):this.location.go(V,"",q)}restoreHistory(T,I=!1){if("computed"===this.canceledNavigationResolution){const V=this.currentPageId-T.targetPageId;"popstate"!==T.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.getCurrentNavigation()?.finalUrl||0===V?this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===V&&(this.resetState(T),this.browserUrlTree=T.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(V)}else"replace"===this.canceledNavigationResolution&&(I&&this.resetState(T),this.resetUrlToCurrentUrlTree())}resetState(T){this.routerState=T.currentRouterState,this.currentUrlTree=T.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,T.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(T,I){return"computed"===this.canceledNavigationResolution?{navigationId:T,\u0275routerPageId:I}:{navigationId:T}}}return D.\u0275fac=function(T){return new(T||D)},D.\u0275prov=c.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();class Fr{}let zc=(()=>{class D{constructor(T,I,V,q,X){this.router=T,this.injector=V,this.preloadingStrategy=q,this.loader=X}setUpPreloading(){this.subscription=this.router.events.pipe((0,Zt.h)(T=>T instanceof oi),Ue(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(T,I){const V=[];for(const q of I){q.providers&&!q._injector&&(q._injector=(0,c.MMx)(q.providers,T,`Route: ${q.path}`));const X=q._injector??T,fe=q._loadedInjector??X;(q.loadChildren&&!q._loadedRoutes&&void 0===q.canLoad||q.loadComponent&&!q._loadedComponent)&&V.push(this.preloadConfig(X,q)),(q.children||q._loadedRoutes)&&V.push(this.processRoutes(fe,q.children??q._loadedRoutes))}return(0,W.D)(V).pipe((0,ii.J)())}preloadConfig(T,I){return this.preloadingStrategy.preload(I,()=>{let V;V=I.loadChildren&&void 0===I.canLoad?this.loader.loadChildren(T,I):(0,be.of)(null);const q=V.pipe((0,Ht.z)(X=>null===X?(0,be.of)(void 0):(I._loadedRoutes=X.routes,I._loadedInjector=X.injector,this.processRoutes(X.injector??T,X.routes))));if(I.loadComponent&&!I._loadedComponent){const X=this.loader.loadComponent(I);return(0,W.D)([q,X]).pipe((0,ii.J)())}return q})}}return D.\u0275fac=function(T){return new(T||D)(c.LFG(Pi),c.LFG(c.Sil),c.LFG(c.lqb),c.LFG(Fr),c.LFG(Ss))},D.\u0275prov=c.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();const zo=new c.OlP("");let Kr=(()=>{class D{constructor(T,I,V,q,X={}){this.urlSerializer=T,this.transitions=I,this.viewportScroller=V,this.zone=q,this.options=X,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},X.scrollPositionRestoration=X.scrollPositionRestoration||"disabled",X.anchorScrolling=X.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(T=>{T instanceof Gs?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=T.navigationTrigger,this.restoredId=T.restoredState?T.restoredState.navigationId:0):T instanceof oi&&(this.lastId=T.id,this.scheduleScrollEvent(T,this.urlSerializer.parse(T.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(T=>{T instanceof Fc&&(T.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(T.position):T.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(T.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(T,I){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Fc(T,"popstate"===this.lastSource?this.store[this.restoredId]:null,I))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return D.\u0275fac=function(T){c.$Z()},D.\u0275prov=c.Yz7({token:D,factory:D.\u0275fac}),D})();var Lr=(()=>((Lr=Lr||{})[Lr.COMPLETE=0]="COMPLETE",Lr[Lr.FAILED=1]="FAILED",Lr[Lr.REDIRECTING=2]="REDIRECTING",Lr))();const La=!1;function Ln(D,R){return{\u0275kind:D,\u0275providers:R}}const Qs=new c.OlP("",{providedIn:"root",factory:()=>!1});function _l(){const D=(0,c.f3M)(c.zs3);return R=>{const T=D.get(c.z2F);if(R!==T.components[0])return;const I=D.get(Pi),V=D.get(Ba);1===D.get(Wo)&&I.initialNavigation(),D.get(Xt,null,c.XFs.Optional)?.setUpPreloading(),D.get(zo,null,c.XFs.Optional)?.init(),I.resetRootComponentType(T.componentTypes[0]),V.closed||(V.next(),V.complete(),V.unsubscribe())}}const Ba=new c.OlP(La?"bootstrap done indicator":"",{factory:()=>new Ne.x}),Wo=new c.OlP(La?"initial navigation":"",{providedIn:"root",factory:()=>1});function ja(){let D=[];return D=La?[{provide:c.Xts,multi:!0,useFactory:()=>{const R=(0,c.f3M)(Pi);return()=>R.events.subscribe(T=>{console.group?.(`Router Event: ${T.constructor.name}`),console.log(function Ws(D){if(!("type"in D))return`Unknown Router Event: ${D.constructor.name}`;switch(D.type){case 14:return`ActivationEnd(path: '${D.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${D.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${D.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${D.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${D.id}, url: '${D.url}', urlAfterRedirects: '${D.urlAfterRedirects}', state: ${D.state}, shouldActivate: ${D.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${D.id}, url: '${D.url}', urlAfterRedirects: '${D.urlAfterRedirects}', state: ${D.state})`;case 2:return`NavigationCancel(id: ${D.id}, url: '${D.url}')`;case 16:return`NavigationSkipped(id: ${D.id}, url: '${D.url}')`;case 1:return`NavigationEnd(id: ${D.id}, url: '${D.url}', urlAfterRedirects: '${D.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${D.id}, url: '${D.url}', error: ${D.error})`;case 0:return`NavigationStart(id: ${D.id}, url: '${D.url}')`;case 6:return`ResolveEnd(id: ${D.id}, url: '${D.url}', urlAfterRedirects: '${D.urlAfterRedirects}', state: ${D.state})`;case 5:return`ResolveStart(id: ${D.id}, url: '${D.url}', urlAfterRedirects: '${D.urlAfterRedirects}', state: ${D.state})`;case 10:return`RouteConfigLoadEnd(path: ${D.route.path})`;case 9:return`RouteConfigLoadStart(path: ${D.route.path})`;case 4:return`RoutesRecognized(id: ${D.id}, url: '${D.url}', urlAfterRedirects: '${D.urlAfterRedirects}', state: ${D.state})`;case 15:return`Scroll(anchor: '${D.anchor}', position: '${D.position?`${D.position[0]}, ${D.position[1]}`:null}')`}}(T)),console.log(T),console.groupEnd?.()})}}]:[],Ln(1,D)}const Xt=new c.OlP(La?"router preloader":"");function xh(D){return Ln(0,[{provide:Xt,useExisting:zc},{provide:Fr,useExisting:D}])}const eo=!1,yl=new c.OlP(eo?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),xr=[dt.Ye,{provide:bs,useClass:el},Pi,Aa,{provide:Io,useFactory:function da(D){return D.routerState.root},deps:[Pi]},Ss,eo?{provide:Qs,useValue:!0}:[]];function Nn(){return new c.PXZ("Router",Pi)}let ha=(()=>{class D{constructor(T){}static forRoot(T,I){return{ngModule:D,providers:[xr,eo&&I?.enableTracing?ja().\u0275providers:[],{provide:Mi,multi:!0,useValue:T},{provide:yl,useFactory:ka,deps:[[Pi,new c.FiY,new c.tp0]]},{provide:ml,useValue:I||{}},I?.useHash?{provide:dt.S$,useClass:dt.Do}:{provide:dt.S$,useClass:dt.b0},{provide:zo,useFactory:()=>{const D=(0,c.f3M)(dt.EM),R=(0,c.f3M)(c.R0b),T=(0,c.f3M)(ml),I=(0,c.f3M)(Cs),V=(0,c.f3M)(bs);return T.scrollOffset&&D.setOffset(T.scrollOffset),new Kr(V,I,D,R,T)}},I?.preloadingStrategy?xh(I.preloadingStrategy).\u0275providers:[],{provide:c.PXZ,multi:!0,useFactory:Nn},I?.initialNavigation?$o(I):[],[{provide:fa,useFactory:_l},{provide:c.tb,multi:!0,useExisting:fa}]]}}static forChild(T){return{ngModule:D,providers:[{provide:Mi,multi:!0,useValue:T}]}}}return D.\u0275fac=function(T){return new(T||D)(c.LFG(yl,8))},D.\u0275mod=c.oAB({type:D}),D.\u0275inj=c.cJS({imports:[co]}),D})();function ka(D){if(eo&&D)throw new c.vHH(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function $o(D){return["disabled"===D.initialNavigation?Ln(3,[{provide:c.ip1,multi:!0,useFactory:()=>{const R=(0,c.f3M)(Pi);return()=>{R.setUpLocationChangeListener()}}},{provide:Wo,useValue:2}]).\u0275providers:[],"enabledBlocking"===D.initialNavigation?Ln(2,[{provide:Wo,useValue:0},{provide:c.ip1,multi:!0,deps:[c.zs3],useFactory:R=>{const T=R.get(dt.V_,Promise.resolve());return()=>T.then(()=>new Promise(I=>{const V=R.get(Pi),q=R.get(Ba);(function ls(D,R){D.events.pipe((0,Zt.h)(T=>T instanceof oi||T instanceof Vs||T instanceof Mn||T instanceof ta),(0,je.U)(T=>T instanceof oi||T instanceof ta?Lr.COMPLETE:T instanceof Vs&&(0===T.code||1===T.code)?Lr.REDIRECTING:Lr.FAILED),(0,Zt.h)(T=>T!==Lr.REDIRECTING),(0,Ut.q)(1)).subscribe(()=>{R()})})(V,()=>{I(!0)}),R.get(Cs).afterPreactivation=()=>(I(!0),q.closed?(0,be.of)(void 0):q),V.initialNavigation()}))}}]).\u0275providers:[]]}const fa=new c.OlP(eo?"Router Initializer":"")}},an=>{an(an.s=5542)}]);