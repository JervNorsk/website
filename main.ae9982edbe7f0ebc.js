"use strict";(self.webpackChunkjervnorsk_website_frontend=self.webpackChunkjervnorsk_website_frontend||[]).push([[179],{5361:(gn,qe,ee)=>{ee.d(qe,{v:()=>Y});var a=ee(1571);let Y=(()=>{class be{constructor(){this.title="< error />",this.subtitle=""}}return be.\u0275fac=function(Re){return new(Re||be)},be.\u0275cmp=a.Xpm({type:be,selectors:[["ng-component"]],decls:15,vars:4,consts:[[1,"error","d-flex","flex-column","justify-content-center"],[1,"stack","text-center",2,"--stacks","3"],[2,"--index","0"],[2,"--index","1"],[2,"--index","2"],[1,"stack","text-center",2,"--stacks","1"]],template:function(Re,ze){1&Re&&(a.TgZ(0,"div",0)(1,"div",1)(2,"span",2)(3,"h1"),a._uU(4),a.qZA()(),a.TgZ(5,"span",3)(6,"h1"),a._uU(7),a.qZA()(),a.TgZ(8,"span",4)(9,"h1"),a._uU(10),a.qZA()()(),a.TgZ(11,"div",5)(12,"span",2)(13,"h6"),a._uU(14),a.qZA()()()()),2&Re&&(a.xp6(4),a.Oqu(ze.title),a.xp6(3),a.Oqu(ze.title),a.xp6(3),a.Oqu(ze.title),a.xp6(4),a.Oqu(ze.subtitle))},styles:[".error[_ngcontent-%COMP%]{color:var(--color)}.error[_ngcontent-%COMP%]   .stack[_ngcontent-%COMP%]{display:grid}.error[_ngcontent-%COMP%]   .stack[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{grid-row-start:1;grid-column-start:1;--stack-height: calc(100% /var(--stacks) - 1px);--inverse-index: calc(calc(var(--stacks) - 1) - var(--index));--clip-top: calc(var(--stack-height) * var(--index));--clip-bottom: calc(var(--stack-height) * var(--inverse-index));clip-path:inset(var(--clip-top) 0 var(--clip-bottom) 0);animation-name:_ngcontent-%COMP%_stack,_ngcontent-%COMP%_glitch;animation-duration:.34s,2s;animation-timing-function:cubic-bezier(.46,.29,0,1.24),ease;animation-iteration-count:1,infinite;animation-delay:calc(var(--index) * .12s),2s;animation-fill-mode:backwards,none;animation-direction:normal,alternate-reverse}.error[_ngcontent-%COMP%]   .stack[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(odd){--glitch-translate: 8px}.error[_ngcontent-%COMP%]   .stack[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(even){--glitch-translate: -8px}@keyframes _ngcontent-%COMP%_stack{0%{opacity:0;transform:translate(-50%);text-shadow:-2px 3px 0 red,2px -3px 0 blue}60%{opacity:.5;transform:translate(50%)}80%{transform:none;opacity:1;text-shadow:2px -3px 0 red,-2px 3px 0 blue}to{text-shadow:none}}@keyframes _ngcontent-%COMP%_glitch{0%{text-shadow:-2px 3px 0 red,2px -3px 0 blue;transform:translate(var(--glitch-translate))}2%{text-shadow:2px -3px 0 red,-2px 3px 0 blue}4%,to{text-shadow:none;transform:none}}"]}),be})()},5874:(gn,qe,ee)=>{ee.d(qe,{u:()=>be});var a=ee(5361),Y=ee(1571);let be=(()=>{class xe extends a.v{constructor(){super(...arguments),this.title="< not found />",this.subtitle="Missing something?"}}return xe.\u0275fac=function(){let Re;return function(Xe){return(Re||(Re=Y.n5z(xe)))(Xe||xe)}}(),xe.\u0275cmp=Y.Xpm({type:xe,selectors:[["jn-not-found-error"]],features:[Y.qOj],decls:15,vars:4,consts:[[1,"error","d-flex","flex-column","justify-content-center"],[1,"stack","text-center",2,"--stacks","3"],[2,"--index","0"],[2,"--index","1"],[2,"--index","2"],[1,"stack","text-center",2,"--stacks","1"]],template:function(ze,Xe){1&ze&&(Y.TgZ(0,"div",0)(1,"div",1)(2,"span",2)(3,"h1"),Y._uU(4),Y.qZA()(),Y.TgZ(5,"span",3)(6,"h1"),Y._uU(7),Y.qZA()(),Y.TgZ(8,"span",4)(9,"h1"),Y._uU(10),Y.qZA()()(),Y.TgZ(11,"div",5)(12,"span",2)(13,"h6"),Y._uU(14),Y.qZA()()()()),2&ze&&(Y.xp6(4),Y.Oqu(Xe.title),Y.xp6(3),Y.Oqu(Xe.title),Y.xp6(3),Y.Oqu(Xe.title),Y.xp6(4),Y.Oqu(Xe.subtitle))},styles:[".error[_ngcontent-%COMP%]{color:var(--color)}.error[_ngcontent-%COMP%]   .stack[_ngcontent-%COMP%]{display:grid}.error[_ngcontent-%COMP%]   .stack[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{grid-row-start:1;grid-column-start:1;--stack-height: calc(100% /var(--stacks) - 1px);--inverse-index: calc(calc(var(--stacks) - 1) - var(--index));--clip-top: calc(var(--stack-height) * var(--index));--clip-bottom: calc(var(--stack-height) * var(--inverse-index));clip-path:inset(var(--clip-top) 0 var(--clip-bottom) 0);animation-name:_ngcontent-%COMP%_stack,_ngcontent-%COMP%_glitch;animation-duration:.34s,2s;animation-timing-function:cubic-bezier(.46,.29,0,1.24),ease;animation-iteration-count:1,infinite;animation-delay:calc(var(--index) * .12s),2s;animation-fill-mode:backwards,none;animation-direction:normal,alternate-reverse}.error[_ngcontent-%COMP%]   .stack[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(odd){--glitch-translate: 8px}.error[_ngcontent-%COMP%]   .stack[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(even){--glitch-translate: -8px}@keyframes _ngcontent-%COMP%_stack{0%{opacity:0;transform:translate(-50%);text-shadow:-2px 3px 0 red,2px -3px 0 blue}60%{opacity:.5;transform:translate(50%)}80%{transform:none;opacity:1;text-shadow:2px -3px 0 red,-2px 3px 0 blue}to{text-shadow:none}}@keyframes _ngcontent-%COMP%_glitch{0%{text-shadow:-2px 3px 0 red,2px -3px 0 blue;transform:translate(var(--glitch-translate))}2%{text-shadow:2px -3px 0 red,-2px 3px 0 blue}4%,to{text-shadow:none;transform:none}}"]}),xe})()},7832:(gn,qe,ee)=>{ee.d(qe,{l:()=>F_});var a=ee(1571),Y=ee(9751),be=ee(515),xe=ee(9646),Re=ee(7579),ze=ee(8421),Xe=ee(5577),St=ee(1144),je=ee(576),Pe=ee(3268);const Oe=["addListener","removeListener"],Ke=["addEventListener","removeEventListener"],Xt=["on","off"];function et(c,f,r,p){if((0,je.m)(r)&&(p=r,r=void 0),p)return et(c,f,r).pipe((0,Pe.Z)(p));const[M,N]=function It(c){return(0,je.m)(c.addEventListener)&&(0,je.m)(c.removeEventListener)}(c)?Ke.map(ie=>he=>c[ie](f,he,r)):function Je(c){return(0,je.m)(c.addListener)&&(0,je.m)(c.removeListener)}(c)?Oe.map(Ct(c,f)):function Ot(c){return(0,je.m)(c.on)&&(0,je.m)(c.off)}(c)?Xt.map(Ct(c,f)):[];if(!M&&(0,St.z)(c))return(0,Xe.z)(ie=>et(ie,f,r))((0,ze.Xf)(c));if(!M)throw new TypeError("Invalid event target");return new Y.y(ie=>{const he=(...me)=>ie.next(1<me.length?me:me[0]);return M(he),()=>N(he)})}function Ct(c,f){return r=>p=>c[r](f,p)}var Bt=ee(727);class pi extends Bt.w0{constructor(f,r){super()}schedule(f,r=0){return this}}const ke={setInterval(c,f,...r){const{delegate:p}=ke;return p?.setInterval?p.setInterval(c,f,...r):setInterval(c,f,...r)},clearInterval(c){const{delegate:f}=ke;return(f?.clearInterval||clearInterval)(c)},delegate:void 0};var Se=ee(8737),Ze=ee(6063);class We{constructor(f,r=We.now){this.schedulerActionCtor=f,this.now=r}schedule(f,r=0,p){return new this.schedulerActionCtor(this,f).schedule(p,r)}}We.now=Ze.l.now;const Zt=new class Pt extends We{constructor(f,r=We.now){super(f,r),this.actions=[],this._active=!1}flush(f){const{actions:r}=this;if(this._active)return void r.push(f);let p;this._active=!0;do{if(p=f.execute(f.state,f.delay))break}while(f=r.shift());if(this._active=!1,p){for(;f=r.shift();)f.unsubscribe();throw p}}}(class Me extends pi{constructor(f,r){super(f,r),this.scheduler=f,this.work=r,this.pending=!1}schedule(f,r=0){var p;if(this.closed)return this;this.state=f;const M=this.id,N=this.scheduler;return null!=M&&(this.id=this.recycleAsyncId(N,M,r)),this.pending=!0,this.delay=r,this.id=null!==(p=this.id)&&void 0!==p?p:this.requestAsyncId(N,this.id,r),this}requestAsyncId(f,r,p=0){return ke.setInterval(f.flush.bind(f,this),p)}recycleAsyncId(f,r,p=0){if(null!=p&&this.delay===p&&!1===this.pending)return r;null!=r&&ke.clearInterval(r)}execute(f,r){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const p=this._execute(f,r);if(p)return p;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(f,r){let M,p=!1;try{this.work(f)}catch(N){p=!0,M=N||new Error("Scheduled action threw falsy error")}if(p)return this.unsubscribe(),M}unsubscribe(){if(!this.closed){const{id:f,scheduler:r}=this,{actions:p}=r;this.work=this.state=this.scheduler=null,this.pending=!1,(0,Se.P)(p,this),null!=f&&(this.id=this.recycleAsyncId(r,f,null)),this.delay=null,super.unsubscribe()}}});var kt=ee(3532);function cn(c=0,f,r=Zt){let p=-1;return null!=f&&((0,kt.K)(f)?r=f:p=f),new Y.y(M=>{let N=function ai(c){return c instanceof Date&&!isNaN(c)}(c)?+c-r.now():c;N<0&&(N=0);let ie=0;return r.schedule(function(){M.closed||(M.next(ie++),0<=p?this.schedule(void 0,p):M.complete())},N)})}const{isArray:Ce}=Array;function Ge(c){return 1===c.length&&Ce(c[0])?c[0]:c}var tt=ee(5403);var wt=ee(1135),mn=ee(9841),Jn=ee(5032);const Yi=new Y.y(Jn.Z);var In=ee(3269);function sn(...c){const f=(0,In.jO)(c),r=Ge(c);return r.length?new Y.y(p=>{let M=r.map(()=>[]),N=r.map(()=>!1);p.add(()=>{M=N=null});for(let ie=0;!p.closed&&ie<r.length;ie++)(0,ze.Xf)(r[ie]).subscribe((0,tt.x)(p,he=>{if(M[ie].push(he),M.every(me=>me.length)){const me=M.map(De=>De.shift());p.next(f?f(...me):me),M.some((De,Fe)=>!De.length&&N[Fe])&&p.complete()}},()=>{N[ie]=!0,!M[ie].length&&p.complete()}));return()=>{M=N=null}}):be.E}var Ii=ee(6451),Kr=ee(7272),Mn=ee(2722),Ir=ee(9300),Ei=ee(5698),lr=ee(4004),ja=ee(8675),Wr=ee(4671),va=ee(4482);function Pr(c,f=Wr.y){return c=c??jo,(0,va.e)((r,p)=>{let M,N=!0;r.subscribe((0,tt.x)(p,ie=>{const he=f(ie);(N||!c(M,he))&&(N=!1,M=he,p.next(ie))}))})}function jo(c,f){return c===f}var go=ee(3900),Pi=ee(8505);function Or(...c){const f=(0,In.jO)(c);return(0,va.e)((r,p)=>{const M=c.length,N=new Array(M);let ie=c.map(()=>!1),he=!1;for(let me=0;me<M;me++)(0,ze.Xf)(c[me]).subscribe((0,tt.x)(p,De=>{N[me]=De,!he&&!ie[me]&&(ie[me]=!0,(he=ie.every(Wr.y))&&(ie=null))},Jn.Z));r.subscribe((0,tt.x)(p,me=>{if(he){const De=[me,...N];p.next(f?f(...De):De)}}))})}ee(9718);var ut=ee(6895);ee(2076),ee(4742),ee(1810);const Un=new a.OlP("NgValueAccessor");function pg(c,f){}function mg(c,f){if(1&c&&(a.TgZ(0,"button",3),a._uU(1),a.YNc(2,pg,0,0,"ng-template",4),a.qZA()),2&c){const r=f.$implicit;a.Q6J("ngbPanelToggle",r),a.xp6(1),a.hij(" ",r.title," "),a.xp6(1),a.Q6J("ngTemplateOutlet",null==r.titleTpl?null:r.titleTpl.templateRef)}}function gg(c,f){}function Yd(c,f){}function Rp(c,f){if(1&c){const r=a.EpF();a.TgZ(0,"div",8),a.NdJ("ngbRef",function(M){a.CHM(r);const N=a.oxw().$implicit;return a.KtG(N.panelDiv=M)}),a.TgZ(1,"div",9),a.YNc(2,Yd,0,0,"ng-template",4),a.qZA()()}if(2&c){const r=a.oxw().$implicit;a.s9C("id",r.id),a.uIk("aria-labelledby",r.id+"-header"),a.xp6(2),a.Q6J("ngTemplateOutlet",(null==r.contentTpl?null:r.contentTpl.templateRef)||null)}}Math,Math,Math;const _g=function(c,f){return{$implicit:c,opened:f}};function Sp(c,f){if(1&c&&(a.TgZ(0,"div")(1,"div",5),a.YNc(2,gg,0,0,"ng-template",6),a.qZA(),a.YNc(3,Rp,3,3,"div",7),a.qZA()),2&c){const r=f.$implicit,p=a.oxw(),M=a.MAs(1);a.Tol("accordion-item "+(r.cardClass||"")),a.xp6(1),a.Tol("accordion-header "+(r.type?"bg-"+r.type:p.type?"bg-"+p.type:"")),a.MGl("id","",r.id,"-header"),a.xp6(1),a.Q6J("ngTemplateOutlet",(null==r.headerTpl?null:r.headerTpl.templateRef)||M)("ngTemplateOutletContext",a.WLB(8,_g,r,r.isOpen)),a.xp6(1),a.Q6J("ngIf",!p.destroyOnHide||r.isOpen||r.transitionRunning)}}const rv=["ngbAccordionBody",""];function Cp(c,f){}function sv(c,f){if(1&c){const r=a.EpF();a.TgZ(0,"button",1),a.NdJ("click",function(){a.CHM(r);const M=a.oxw();return a.KtG(M.close())}),a.qZA()}}const Jd=["*"];function vg(c,f){if(1&c){const r=a.EpF();a.TgZ(0,"button",6),a.NdJ("click",function(){const N=a.CHM(r).$implicit,ie=a.oxw();return ie.focus(),a.KtG(ie.select(N.id,ie.NgbSlideEventSource.INDICATOR))}),a.qZA()}if(2&c){const r=f.$implicit,p=a.oxw();a.ekj("active",r.id===p.activeId),a.uIk("aria-labelledby","slide-"+r.id)("aria-controls","slide-"+r.id)("aria-selected",r.id===p.activeId)}}function lf(c,f){}function ov(c,f){if(1&c&&(a.TgZ(0,"div",7)(1,"span",8),a.SDv(2,9),a.qZA(),a.YNc(3,lf,0,0,"ng-template",10),a.qZA()),2&c){const r=f.$implicit,p=f.index,M=f.count;a.Q6J("id","slide-"+r.id),a.xp6(2),a.pQV(p+1)(M),a.QtT(2),a.xp6(1),a.Q6J("ngTemplateOutlet",r.tplRef)}}function av(c,f){if(1&c){const r=a.EpF();a.TgZ(0,"button",11),a.NdJ("click",function(){a.CHM(r);const M=a.oxw();return a.KtG(M.arrowLeft())}),a._UZ(1,"span",12),a.TgZ(2,"span",8),a.SDv(3,13),a.qZA()()}}function cf(c,f){if(1&c){const r=a.EpF();a.TgZ(0,"button",14),a.NdJ("click",function(){a.CHM(r);const M=a.oxw();return a.KtG(M.arrowRight())}),a._UZ(1,"span",15),a.TgZ(2,"span",8),a.SDv(3,16),a.qZA()()}}const lv=["ngbDatepickerDayView",""],cv=["month"],uv=["year"];function dv(c,f){if(1&c&&(a.TgZ(0,"option",5),a._uU(1),a.qZA()),2&c){const r=f.$implicit,p=a.oxw();a.Q6J("value",r),a.uIk("aria-label",p.i18n.getMonthFullName(r,p.date.year)),a.xp6(1),a.Oqu(p.i18n.getMonthShortName(r,p.date.year))}}function hv(c,f){if(1&c&&(a.TgZ(0,"option",5),a._uU(1),a.qZA()),2&c){const r=f.$implicit,p=a.oxw();a.Q6J("value",r),a.xp6(1),a.Oqu(p.i18n.getYearNumerals(r))}}function yg(c,f){if(1&c){const r=a.EpF();a.TgZ(0,"ngb-datepicker-navigation-select",7),a.NdJ("select",function(M){a.CHM(r);const N=a.oxw();return a.KtG(N.select.emit(M))}),a.qZA()}if(2&c){const r=a.oxw();a.Q6J("date",r.date)("disabled",r.disabled)("months",r.selectBoxes.months)("years",r.selectBoxes.years)}}function Ep(c,f){1&c&&a._UZ(0,"div",0)}function uf(c,f){1&c&&a._UZ(0,"div",0)}function Ap(c,f){if(1&c&&(a.YNc(0,Ep,1,0,"div",9),a.TgZ(1,"div",10),a._uU(2),a.qZA(),a.YNc(3,uf,1,0,"div",9)),2&c){const r=f.$implicit,p=f.index,M=a.oxw(2);a.Q6J("ngIf",p>0),a.xp6(2),a.hij(" ",M.i18n.getMonthLabel(r.firstDate)," "),a.xp6(1),a.Q6J("ngIf",p!==M.months.length-1)}}function Ip(c,f){if(1&c&&a.YNc(0,Ap,4,3,"ng-template",8),2&c){const r=a.oxw();a.Q6J("ngForOf",r.months)}}function Pp(c,f){if(1&c&&(a.TgZ(0,"div",5),a._uU(1),a.qZA()),2&c){const r=a.oxw(2);a.xp6(1),a.Oqu(r.i18n.getWeekLabel())}}function il(c,f){if(1&c&&(a.TgZ(0,"div",6),a._uU(1),a.qZA()),2&c){const r=f.$implicit;a.xp6(1),a.Oqu(r)}}function bg(c,f){if(1&c&&(a.TgZ(0,"div",2),a.YNc(1,Pp,2,1,"div",3),a.YNc(2,il,2,1,"div",4),a.qZA()),2&c){const r=a.oxw();a.xp6(1),a.Q6J("ngIf",r.datepicker.showWeekNumbers),a.xp6(1),a.Q6J("ngForOf",r.viewModel.weekdays)}}function Tg(c,f){if(1&c&&(a.TgZ(0,"div",11),a._uU(1),a.qZA()),2&c){const r=a.oxw(2).$implicit,p=a.oxw();a.xp6(1),a.Oqu(p.i18n.getWeekNumerals(r.number))}}function Mg(c,f){}function Op(c,f){if(1&c&&a.YNc(0,Mg,0,0,"ng-template",14),2&c){const r=a.oxw().$implicit,p=a.oxw(3);a.Q6J("ngTemplateOutlet",p.datepicker.dayTemplate)("ngTemplateOutletContext",r.context)}}function df(c,f){if(1&c){const r=a.EpF();a.TgZ(0,"div",12),a.NdJ("click",function(M){const ie=a.CHM(r).$implicit;return a.oxw(3).doSelect(ie),a.KtG(M.preventDefault())}),a.YNc(1,Op,1,2,"ng-template",13),a.qZA()}if(2&c){const r=f.$implicit;a.ekj("disabled",r.context.disabled)("hidden",r.hidden)("ngb-dp-today",r.context.today),a.Q6J("tabindex",r.tabindex),a.uIk("aria-label",r.ariaLabel),a.xp6(1),a.Q6J("ngIf",!r.hidden)}}function xg(c,f){if(1&c&&(a.TgZ(0,"div",8),a.YNc(1,Tg,2,1,"div",9),a.YNc(2,df,2,9,"div",10),a.qZA()),2&c){const r=a.oxw().$implicit,p=a.oxw();a.xp6(1),a.Q6J("ngIf",p.datepicker.showWeekNumbers),a.xp6(1),a.Q6J("ngForOf",r.days)}}function Dg(c,f){1&c&&a.YNc(0,xg,3,2,"div",7),2&c&&a.Q6J("ngIf",!f.$implicit.collapsed)}const wg=["defaultDayTemplate"],Np=["content"];function Rg(c,f){if(1&c&&a._UZ(0,"div",7),2&c){const p=f.currentMonth,M=f.selected,N=f.disabled,ie=f.focused;a.Q6J("date",f.date)("currentMonth",p)("selected",M)("disabled",N)("focused",ie)}}function Sg(c,f){if(1&c&&(a.TgZ(0,"div",12),a._uU(1),a.qZA()),2&c){const r=a.oxw().$implicit,p=a.oxw(2);a.xp6(1),a.hij(" ",p.i18n.getMonthLabel(r.firstDate)," ")}}function Io(c,f){if(1&c&&(a.TgZ(0,"div",9),a.YNc(1,Sg,2,1,"div",10),a._UZ(2,"ngb-datepicker-month",11),a.qZA()),2&c){const r=f.$implicit,p=a.oxw(2);a.xp6(1),a.Q6J("ngIf","none"===p.navigation||p.displayMonths>1&&"select"===p.navigation),a.xp6(1),a.Q6J("month",r.firstDate)}}function hf(c,f){if(1&c&&a.YNc(0,Io,3,2,"div",8),2&c){const r=a.oxw();a.Q6J("ngForOf",r.model.months)}}function Fp(c,f){if(1&c){const r=a.EpF();a.TgZ(0,"ngb-datepicker-navigation",13),a.NdJ("navigate",function(M){a.CHM(r);const N=a.oxw();return a.KtG(N.onNavigateEvent(M))})("select",function(M){a.CHM(r);const N=a.oxw();return a.KtG(N.onNavigateDateSelect(M))}),a.qZA()}if(2&c){const r=a.oxw();a.Q6J("date",r.model.firstDate)("months",r.model.months)("disabled",r.model.disabled)("showSelect","select"===r.model.navigation)("prevDisabled",r.model.prevDisabled)("nextDisabled",r.model.nextDisabled)("selectBoxes",r.model.selectBoxes)}}function ff(c,f){}function to(c,f){}const Xu=["dialog"],Lp=["ngbNavOutlet",""];function Bp(c,f){}const Cg=function(c){return{$implicit:c}};function jp(c,f){if(1&c&&(a.TgZ(0,"div",2),a.YNc(1,Bp,0,0,"ng-template",3),a.qZA()),2&c){const r=a.oxw().$implicit,p=a.oxw();a.Q6J("item",r)("nav",p.nav)("role",p.paneRole),a.xp6(1),a.Q6J("ngTemplateOutlet",(null==r.contentTpl?null:r.contentTpl.templateRef)||null)("ngTemplateOutletContext",a.VKq(5,Cg,r.active||p.isPanelTransitioning(r)))}}function Eg(c,f){if(1&c&&a.YNc(0,jp,2,7,"div",1),2&c){const r=f.$implicit,p=a.oxw();a.Q6J("ngIf",r.isPanelInDom()||p.isPanelTransitioning(r))}}function kp(c,f){1&c&&(a.TgZ(0,"span",9),a.SDv(1,10),a.qZA())}function Ag(c,f){1&c&&(a.TgZ(0,"span",9),a.SDv(1,11),a.qZA())}function Gp(c,f){1&c&&(a.TgZ(0,"span",9),a.SDv(1,12),a.qZA())}function Ig(c,f){1&c&&(a.TgZ(0,"span",9),a.SDv(1,13),a.qZA())}function Pg(c,f){1&c&&a._uU(0,"...")}function pf(c,f){1&c&&(a.TgZ(0,"span",15),a._uU(1,"(current)"),a.qZA())}function mf(c,f){if(1&c&&(a._uU(0),a.YNc(1,pf,2,0,"span",14)),2&c){const r=f.$implicit,p=f.currentPage;a.hij(" ",r," "),a.xp6(1),a.Q6J("ngIf",r===p)}}function Og(c,f){}const Qu=function(c){return{disabled:!0,currentPage:c}};function Ng(c,f){if(1&c&&(a.TgZ(0,"a",20),a.YNc(1,Og,0,0,"ng-template",8),a.qZA()),2&c){const r=a.oxw(2).$implicit,p=a.oxw(),M=a.MAs(9);a.xp6(1),a.Q6J("ngTemplateOutlet",(null==p.tplEllipsis?null:p.tplEllipsis.templateRef)||M)("ngTemplateOutletContext",a.VKq(2,Qu,r))}}function Fg(c,f){}const gf=function(c,f,r){return{disabled:c,$implicit:f,currentPage:r}};function _f(c,f){if(1&c){const r=a.EpF();a.TgZ(0,"a",21),a.NdJ("click",function(M){a.CHM(r);const N=a.oxw().$implicit;return a.oxw(2).selectPage(N),a.KtG(M.preventDefault())}),a.YNc(1,Fg,0,0,"ng-template",8),a.qZA()}if(2&c){const r=a.oxw().$implicit,p=a.oxw(),M=p.disabled,N=p.$implicit,ie=a.oxw(),he=a.MAs(11);a.uIk("tabindex",M?"-1":null)("aria-disabled",M?"true":null),a.xp6(1),a.Q6J("ngTemplateOutlet",(null==ie.tplNumber?null:ie.tplNumber.templateRef)||he)("ngTemplateOutletContext",a.kEZ(4,gf,M,r,N))}}function Vp(c,f){if(1&c&&(a.TgZ(0,"li",17),a.YNc(1,Ng,2,4,"a",18),a.YNc(2,_f,2,8,"a",19),a.qZA()),2&c){const r=f.$implicit,p=a.oxw(),M=p.$implicit,N=p.disabled,ie=a.oxw();a.ekj("active",r===M)("disabled",ie.isEllipsis(r)||N),a.uIk("aria-current",r===M?"page":null),a.xp6(1),a.Q6J("ngIf",ie.isEllipsis(r)),a.xp6(1),a.Q6J("ngIf",!ie.isEllipsis(r))}}function cu(c,f){1&c&&a.YNc(0,Vp,3,7,"li",16),2&c&&a.Q6J("ngForOf",f.pages)}function vf(c,f){}const Zd=function(c,f){return{disabled:c,currentPage:f}};function Lg(c,f){if(1&c){const r=a.EpF();a.TgZ(0,"li",17)(1,"a",22),a.NdJ("click",function(M){return a.CHM(r),a.oxw().selectPage(1),a.KtG(M.preventDefault())}),a.YNc(2,vf,0,0,"ng-template",8),a.qZA()()}if(2&c){const r=a.oxw(),p=a.MAs(1);a.ekj("disabled",r.previousDisabled()),a.xp6(1),a.uIk("tabindex",r.previousDisabled()?"-1":null)("aria-disabled",r.previousDisabled()?"true":null),a.xp6(1),a.Q6J("ngTemplateOutlet",(null==r.tplFirst?null:r.tplFirst.templateRef)||p)("ngTemplateOutletContext",a.WLB(6,Zd,r.previousDisabled(),r.page))}}function yf(c,f){}const Bg=function(c){return{disabled:c}};function jg(c,f){if(1&c){const r=a.EpF();a.TgZ(0,"li",17)(1,"a",23),a.NdJ("click",function(M){a.CHM(r);const N=a.oxw();return N.selectPage(N.page-1),a.KtG(M.preventDefault())}),a.YNc(2,yf,0,0,"ng-template",8),a.qZA()()}if(2&c){const r=a.oxw(),p=a.MAs(3);a.ekj("disabled",r.previousDisabled()),a.xp6(1),a.uIk("tabindex",r.previousDisabled()?"-1":null)("aria-disabled",r.previousDisabled()?"true":null),a.xp6(1),a.Q6J("ngTemplateOutlet",(null==r.tplPrevious?null:r.tplPrevious.templateRef)||p)("ngTemplateOutletContext",a.VKq(6,Bg,r.previousDisabled()))}}function kg(c,f){}function Gg(c,f){}function Vg(c,f){if(1&c){const r=a.EpF();a.TgZ(0,"li",17)(1,"a",24),a.NdJ("click",function(M){a.CHM(r);const N=a.oxw();return N.selectPage(N.page+1),a.KtG(M.preventDefault())}),a.YNc(2,Gg,0,0,"ng-template",8),a.qZA()()}if(2&c){const r=a.oxw(),p=a.MAs(5);a.ekj("disabled",r.nextDisabled()),a.xp6(1),a.uIk("tabindex",r.nextDisabled()?"-1":null)("aria-disabled",r.nextDisabled()?"true":null),a.xp6(1),a.Q6J("ngTemplateOutlet",(null==r.tplNext?null:r.tplNext.templateRef)||p)("ngTemplateOutletContext",a.WLB(6,Zd,r.nextDisabled(),r.page))}}function Ug(c,f){}function Up(c,f){if(1&c){const r=a.EpF();a.TgZ(0,"li",17)(1,"a",25),a.NdJ("click",function(M){a.CHM(r);const N=a.oxw();return N.selectPage(N.pageCount),a.KtG(M.preventDefault())}),a.YNc(2,Ug,0,0,"ng-template",8),a.qZA()()}if(2&c){const r=a.oxw(),p=a.MAs(7);a.ekj("disabled",r.nextDisabled()),a.xp6(1),a.uIk("tabindex",r.nextDisabled()?"-1":null)("aria-disabled",r.nextDisabled()?"true":null),a.xp6(1),a.Q6J("ngTemplateOutlet",(null==r.tplLast?null:r.tplLast.templateRef)||p)("ngTemplateOutletContext",a.WLB(6,Zd,r.nextDisabled(),r.page))}}const bf=function(c,f,r){return{$implicit:c,pages:f,disabled:r}};function Hg(c,f){if(1&c&&(a.TgZ(0,"span"),a.SDv(1,1),a.ALo(2,"percent"),a.qZA()),2&c){const r=a.oxw();a.xp6(2),a.pQV(a.lcZ(2,1,r.getValue()/r.max)),a.QtT(1)}}function zp(c,f){1&c&&a._uU(0),2&c&&a.Oqu(100===f.fill?"\u2605":"\u2606")}function Wp(c,f){}function Rc(c,f){if(1&c){const r=a.EpF();a.TgZ(0,"span",2),a._uU(1),a.qZA(),a.TgZ(2,"span",3),a.NdJ("mouseenter",function(){const N=a.CHM(r).index,ie=a.oxw();return a.KtG(ie.enter(N+1))})("click",function(){const N=a.CHM(r).index,ie=a.oxw();return a.KtG(ie.handleClick(N+1))}),a.YNc(3,Wp,0,0,"ng-template",4),a.qZA()}if(2&c){const r=f.index,p=a.oxw(),M=a.MAs(1);a.xp6(1),a.hij("(",r<p.nextRate?"*":" ",")"),a.xp6(1),a.Udp("cursor",p.isInteractive()?"pointer":"default"),a.xp6(1),a.Q6J("ngTemplateOutlet",p.starTemplate||p.starTemplateFromContent||M)("ngTemplateOutletContext",p.contexts[r])}}function $p(c,f){if(1&c){const r=a.EpF();a.TgZ(0,"button",11),a.NdJ("click",function(){a.CHM(r);const M=a.oxw();return a.KtG(M.changeHour(M.hourStep))}),a._UZ(1,"span",12),a.TgZ(2,"span",13),a.SDv(3,14),a.qZA()()}if(2&c){const r=a.oxw();a.ekj("btn-sm",r.isSmallSize)("btn-lg",r.isLargeSize)("disabled",r.disabled),a.Q6J("disabled",r.disabled)}}function Yp(c,f){if(1&c){const r=a.EpF();a.TgZ(0,"button",11),a.NdJ("click",function(){a.CHM(r);const M=a.oxw();return a.KtG(M.changeHour(-M.hourStep))}),a._UZ(1,"span",15),a.TgZ(2,"span",13),a.SDv(3,16),a.qZA()()}if(2&c){const r=a.oxw();a.ekj("btn-sm",r.isSmallSize)("btn-lg",r.isLargeSize)("disabled",r.disabled),a.Q6J("disabled",r.disabled)}}function zg(c,f){if(1&c){const r=a.EpF();a.TgZ(0,"button",11),a.NdJ("click",function(){a.CHM(r);const M=a.oxw();return a.KtG(M.changeMinute(M.minuteStep))}),a._UZ(1,"span",12),a.TgZ(2,"span",13),a.SDv(3,17),a.qZA()()}if(2&c){const r=a.oxw();a.ekj("btn-sm",r.isSmallSize)("btn-lg",r.isLargeSize)("disabled",r.disabled),a.Q6J("disabled",r.disabled)}}function pv(c,f){if(1&c){const r=a.EpF();a.TgZ(0,"button",11),a.NdJ("click",function(){a.CHM(r);const M=a.oxw();return a.KtG(M.changeMinute(-M.minuteStep))}),a._UZ(1,"span",15),a.TgZ(2,"span",13),a.SDv(3,18),a.qZA()()}if(2&c){const r=a.oxw();a.ekj("btn-sm",r.isSmallSize)("btn-lg",r.isLargeSize)("disabled",r.disabled),a.Q6J("disabled",r.disabled)}}function qd(c,f){1&c&&(a.TgZ(0,"div",5),a._uU(1,":"),a.qZA())}function Wg(c,f){if(1&c){const r=a.EpF();a.TgZ(0,"button",11),a.NdJ("click",function(){a.CHM(r);const M=a.oxw(2);return a.KtG(M.changeSecond(M.secondStep))}),a._UZ(1,"span",12),a.TgZ(2,"span",13),a.SDv(3,21),a.qZA()()}if(2&c){const r=a.oxw(2);a.ekj("btn-sm",r.isSmallSize)("btn-lg",r.isLargeSize)("disabled",r.disabled),a.Q6J("disabled",r.disabled)}}function Jp(c,f){if(1&c){const r=a.EpF();a.TgZ(0,"button",11),a.NdJ("click",function(){a.CHM(r);const M=a.oxw(2);return a.KtG(M.changeSecond(-M.secondStep))}),a._UZ(1,"span",15),a.TgZ(2,"span",13),a.SDv(3,22),a.qZA()()}if(2&c){const r=a.oxw(2);a.ekj("btn-sm",r.isSmallSize)("btn-lg",r.isLargeSize)("disabled",r.disabled),a.Q6J("disabled",r.disabled)}}function Zp(c,f){if(1&c){const r=a.EpF();a.TgZ(0,"div",19),a.YNc(1,Wg,4,7,"button",3),a.TgZ(2,"input",20),a.NdJ("change",function(M){a.CHM(r);const N=a.oxw();return a.KtG(N.updateSecond(M.target.value))})("blur",function(){a.CHM(r);const M=a.oxw();return a.KtG(M.handleBlur())})("input",function(M){a.CHM(r);const N=a.oxw();return a.KtG(N.formatInput(M.target))})("keydown.ArrowUp",function(M){a.CHM(r);const N=a.oxw();return N.changeSecond(N.secondStep),a.KtG(M.preventDefault())})("keydown.ArrowDown",function(M){a.CHM(r);const N=a.oxw();return N.changeSecond(-N.secondStep),a.KtG(M.preventDefault())}),a.qZA(),a.YNc(3,Jp,4,7,"button",3),a.qZA()}if(2&c){const r=a.oxw();a.xp6(1),a.Q6J("ngIf",r.spinners),a.xp6(1),a.ekj("form-control-sm",r.isSmallSize)("form-control-lg",r.isLargeSize),a.Q6J("value",r.formatMinSec(null==r.model?null:r.model.second))("readOnly",r.readonlyInputs)("disabled",r.disabled),a.xp6(1),a.Q6J("ngIf",r.spinners)}}function qp(c,f){1&c&&a._UZ(0,"div",5)}function Mf(c,f){if(1&c&&(a.ynx(0),a.SDv(1,27),a.BQk()),2&c){const r=a.oxw(2);a.xp6(1),a.pQV(r.i18n.getAfternoonPeriod()),a.QtT(1)}}function Kp(c,f){if(1&c&&a.SDv(0,28),2&c){const r=a.oxw(2);a.pQV(r.i18n.getMorningPeriod()),a.QtT(0)}}function Kd(c,f){if(1&c){const r=a.EpF();a.TgZ(0,"div",23)(1,"button",24),a.NdJ("click",function(){a.CHM(r);const M=a.oxw();return a.KtG(M.toggleMeridian())}),a.YNc(2,Mf,2,1,"ng-container",25),a.YNc(3,Kp,1,1,"ng-template",null,26,a.W1O),a.qZA()()}if(2&c){const r=a.MAs(4),p=a.oxw();a.xp6(1),a.ekj("btn-sm",p.isSmallSize)("btn-lg",p.isLargeSize)("disabled",p.disabled),a.Q6J("disabled",p.disabled),a.xp6(1),a.Q6J("ngIf",p.model&&p.model.hour>=12)("ngIfElse",r)}}function Xd(c,f){if(1&c&&(a.TgZ(0,"strong",3),a._uU(1),a.qZA()),2&c){const r=a.oxw();a.xp6(1),a.Oqu(r.header)}}function $g(c,f){}function Xp(c,f){if(1&c){const r=a.EpF();a.TgZ(0,"div",4),a.YNc(1,$g,0,0,"ng-template",5),a.TgZ(2,"button",6),a.NdJ("click",function(){a.CHM(r);const M=a.oxw();return a.KtG(M.hide())}),a.qZA()()}if(2&c){const r=a.oxw(),p=a.MAs(1);a.xp6(1),a.Q6J("ngTemplateOutlet",r.contentHeaderTpl||p)}}function Qp(c,f){if(1&c&&(a.TgZ(0,"span"),a._uU(1),a.qZA()),2&c){const r=a.oxw().$implicit,p=a.oxw();a.Tol(p.highlightClass),a.xp6(1),a.Oqu(r)}}function em(c,f){if(1&c&&a._uU(0),2&c){const r=a.oxw().$implicit;a.Oqu(r)}}function Qd(c,f){if(1&c&&(a.YNc(0,Qp,2,3,"span",1),a.YNc(1,em,1,1,"ng-template",null,2,a.W1O)),2&c){const r=f.odd,p=a.MAs(2);a.Q6J("ngIf",r)("ngIfElse",p)}}function no(c){return parseInt(`${c}`,10)}function tm(c){return null!=c?`${c}`:""}function eh(c,f,r=0){return Math.max(Math.min(c,f),r)}function nc(c){return"string"==typeof c}function Vr(c){return!isNaN(no(c))}function gr(c){return"number"==typeof c&&isFinite(c)&&Math.floor(c)===c}function uu(c){return null!=c}function th(c){return Vr(c)?`0${c}`.slice(-2):""}function xf(c,f){return c&&c.className&&c.className.split&&c.className.split(/\s+/).indexOf(f)>=0}function du(c){return(c||document.body).getBoundingClientRect()}function wf(c){return c.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}const nm={animation:!0,transitionTimerDelayMs:5},qg=()=>{},{transitionTimerDelayMs:Kg}=nm,nh=new Map,Cs=(c,f,r,p)=>{let M=p.context||{};const N=nh.get(f);if(N)switch(p.runningTransition){case"continue":return be.E;case"stop":c.run(()=>N.transition$.complete()),M=Object.assign(N.context,M),nh.delete(f)}const ie=r(f,p.animation,M)||qg;if(!p.animation||"none"===window.getComputedStyle(f).transitionProperty)return c.run(()=>ie()),(0,xe.of)(void 0).pipe(function Df(c){return f=>new Y.y(r=>f.subscribe({next:ie=>c.run(()=>r.next(ie)),error:ie=>c.run(()=>r.error(ie)),complete:()=>c.run(()=>r.complete())}))}(c));const he=new Re.x,me=new Re.x,De=he.pipe(function Sn(...c){return f=>(0,Kr.z)(f,(0,xe.of)(...c))}(!0));nh.set(f,{transition$:he,complete:()=>{me.next(),me.complete()},context:M});const Fe=function Zg(c){const{transitionDelay:f,transitionDuration:r}=window.getComputedStyle(c);return 1e3*(parseFloat(f)+parseFloat(r))}(f);return c.runOutsideAngular(()=>{const Tt=et(f,"transitionend").pipe((0,Mn.R)(De),(0,Ir.h)(({target:Kt})=>Kt===f));(function Qe(...c){return 1===(c=Ge(c)).length?(0,ze.Xf)(c[0]):new Y.y(function Et(c){return f=>{let r=[];for(let p=0;r&&!f.closed&&p<c.length;p++)r.push((0,ze.Xf)(c[p]).subscribe((0,tt.x)(f,M=>{if(r){for(let N=0;N<r.length;N++)N!==p&&r[N].unsubscribe();r=null}f.next(M)})))}}(c))})(cn(Fe+Kg).pipe((0,Mn.R)(De)),Tt,me).pipe((0,Mn.R)(De)).subscribe(()=>{nh.delete(f),c.run(()=>{ie(),he.next(),he.complete()})})}),he.asObservable()},im=(c,f,r)=>{let{direction:p,maxSize:M,dimension:N}=r;const{classList:ie}=c;function he(){ie.add("collapse"),"show"===p?ie.add("show"):ie.remove("show")}if(f)return M||(M=function yv(c,f){if(typeof navigator>"u")return"0px";const{classList:r}=c,p=r.contains("show");p||r.add("show"),c.style[f]="";const M=c.getBoundingClientRect()[f]+"px";return p||r.remove("show"),M}(c,N),r.maxSize=M,c.style[N]="show"!==p?M:"0px",ie.remove("collapse"),ie.remove("collapsing"),ie.remove("show"),du(c),ie.add("collapsing")),c.style[N]="show"===p?M:"0px",()=>{he(),ie.remove("collapsing"),c.style[N]=""};he()};let Qo=(()=>{class c{constructor(){this.animation=nm.animation}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275prov=a.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),ii=(()=>{class c{constructor(r){this._ngbConfig=r,this.closeOthers=!1}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(r){this._animation=r}}return c.\u0275fac=function(r){return new(r||c)(a.LFG(Qo))},c.\u0275prov=a.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),Qt=0,Ia=(()=>{class c{constructor(r){this.templateRef=r}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(a.Rgc))},c.\u0275dir=a.lG2({type:c,selectors:[["ng-template","ngbPanelHeader",""]],standalone:!0}),c})(),ih=(()=>{class c{constructor(r){this.templateRef=r}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(a.Rgc))},c.\u0275dir=a.lG2({type:c,selectors:[["ng-template","ngbPanelTitle",""]],standalone:!0}),c})(),Xg=(()=>{class c{constructor(r){this.templateRef=r}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(a.Rgc))},c.\u0275dir=a.lG2({type:c,selectors:[["ng-template","ngbPanelContent",""]],standalone:!0}),c})(),rm=(()=>{class c{constructor(){this.disabled=!1,this.id="ngb-panel-"+Qt++,this.isOpen=!1,this.initClassDone=!1,this.transitionRunning=!1,this.shown=new a.vpe,this.hidden=new a.vpe}ngAfterContentChecked(){this.titleTpl=this.titleTpls.first,this.headerTpl=this.headerTpls.first,this.contentTpl=this.contentTpls.first}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275dir=a.lG2({type:c,selectors:[["ngb-panel"]],contentQueries:function(r,p,M){if(1&r&&(a.Suo(M,ih,4),a.Suo(M,Ia,4),a.Suo(M,Xg,4)),2&r){let N;a.iGM(N=a.CRH())&&(p.titleTpls=N),a.iGM(N=a.CRH())&&(p.headerTpls=N),a.iGM(N=a.CRH())&&(p.contentTpls=N)}},inputs:{disabled:"disabled",id:"id",title:"title",type:"type",cardClass:"cardClass"},outputs:{shown:"shown",hidden:"hidden"},standalone:!0}),c})(),bv=(()=>{class c{constructor(r){this._El=r,this.ngbRef=new a.vpe}ngOnInit(){this.ngbRef.emit(this._El.nativeElement)}ngOnDestroy(){this.ngbRef.emit(null)}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(a.SBq))},c.\u0275dir=a.lG2({type:c,selectors:[["","ngbRef",""]],outputs:{ngbRef:"ngbRef"},standalone:!0}),c})(),Rf=(()=>{class c{constructor(r,p){this.accordion=r,this.panel=p}set ngbPanelToggle(r){r&&(this.panel=r)}}return c.\u0275fac=function(r){return new(r||c)(a.Y36((0,a.Gpc)(()=>Sf)),a.Y36(rm,9))},c.\u0275dir=a.lG2({type:c,selectors:[["button","ngbPanelToggle",""]],hostAttrs:["type","button"],hostVars:5,hostBindings:function(r,p){1&r&&a.NdJ("click",function(){return p.accordion.toggle(p.panel.id)}),2&r&&(a.Ikx("disabled",p.panel.disabled),a.uIk("aria-expanded",p.panel.isOpen)("aria-controls",p.panel.id),a.ekj("collapsed",!p.panel.isOpen))},inputs:{ngbPanelToggle:"ngbPanelToggle"},standalone:!0}),c})(),Sf=(()=>{class c{constructor(r,p,M){this._ngZone=p,this._changeDetector=M,this.activeIds=[],this.destroyOnHide=!0,this.panelChange=new a.vpe,this.shown=new a.vpe,this.hidden=new a.vpe,this.animation=r.animation,this.type=r.type,this.closeOtherPanels=r.closeOthers}isExpanded(r){return this.activeIds.indexOf(r)>-1}expand(r){this._changeOpenState(this._findPanelById(r),!0)}expandAll(){this.closeOtherPanels?0===this.activeIds.length&&this.panels.length&&this._changeOpenState(this.panels.first,!0):this.panels.forEach(r=>this._changeOpenState(r,!0))}collapse(r){this._changeOpenState(this._findPanelById(r),!1)}collapseAll(){this.panels.forEach(r=>{this._changeOpenState(r,!1)})}toggle(r){const p=this._findPanelById(r);p&&this._changeOpenState(p,!p.isOpen)}ngAfterContentChecked(){nc(this.activeIds)&&(this.activeIds=this.activeIds.split(/\s*,\s*/)),this.panels.forEach(r=>{r.isOpen=!r.disabled&&this.activeIds.indexOf(r.id)>-1}),this.activeIds.length>1&&this.closeOtherPanels&&(this._closeOthers(this.activeIds[0],!1),this._updateActiveIds()),this._ngZone.onStable.pipe((0,Ei.q)(1)).subscribe(()=>{this.panels.forEach(r=>{const p=r.panelDiv;p?r.initClassDone||(r.initClassDone=!0,Cs(this._ngZone,p,im,{animation:!1,runningTransition:"continue",context:{direction:r.isOpen?"show":"hide",dimension:"height"}})):r.initClassDone=!1})})}_changeOpenState(r,p){if(null!=r&&!r.disabled&&r.isOpen!==p){let M=!1;this.panelChange.emit({panelId:r.id,nextState:p,preventDefault:()=>{M=!0}}),M||(r.isOpen=p,r.transitionRunning=!0,p&&this.closeOtherPanels&&this._closeOthers(r.id),this._updateActiveIds(),this._runTransitions(this.animation))}}_closeOthers(r,p=!0){this.panels.forEach(M=>{M.id!==r&&M.isOpen&&(M.isOpen=!1,M.transitionRunning=p)})}_findPanelById(r){return this.panels.find(p=>p.id===r)||null}_updateActiveIds(){this.activeIds=this.panels.filter(r=>r.isOpen&&!r.disabled).map(r=>r.id)}_runTransitions(r){this._changeDetector.detectChanges(),this.panels.forEach(p=>{p.transitionRunning&&Cs(this._ngZone,p.panelDiv,im,{animation:r,runningTransition:"stop",context:{direction:p.isOpen?"show":"hide",dimension:"height"}}).subscribe(()=>{p.transitionRunning=!1;const{id:N}=p;p.isOpen?(p.shown.emit(),this.shown.emit(N)):(p.hidden.emit(),this.hidden.emit(N))})})}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(ii),a.Y36(a.R0b),a.Y36(a.sBO))},c.\u0275cmp=a.Xpm({type:c,selectors:[["ngb-accordion"]],contentQueries:function(r,p,M){if(1&r&&a.Suo(M,rm,4),2&r){let N;a.iGM(N=a.CRH())&&(p.panels=N)}},hostAttrs:["role","tablist",1,"accordion"],hostVars:1,hostBindings:function(r,p){2&r&&a.uIk("aria-multiselectable",!p.closeOtherPanels)},inputs:{animation:"animation",activeIds:"activeIds",closeOtherPanels:["closeOthers","closeOtherPanels"],destroyOnHide:"destroyOnHide",type:"type"},outputs:{panelChange:"panelChange",shown:"shown",hidden:"hidden"},exportAs:["ngbAccordion"],standalone:!0,features:[a.jDz],decls:3,vars:1,consts:[["ngbPanelHeader",""],["t",""],["ngFor","",3,"ngForOf"],[1,"accordion-button",3,"ngbPanelToggle"],[3,"ngTemplateOutlet"],["role","tab",3,"id"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["role","tabpanel",3,"id","ngbRef",4,"ngIf"],["role","tabpanel",3,"id","ngbRef"],[1,"accordion-body"]],template:function(r,p){1&r&&(a.YNc(0,mg,3,3,"ng-template",0,1,a.W1O),a.YNc(2,Sp,4,11,"ng-template",2)),2&r&&(a.xp6(2),a.Q6J("ngForOf",p.panels))},dependencies:[ut.ax,ut.tP,Rf,bv,Ia,ut.O5],encapsulation:2}),c})(),Qg=(()=>{class c{constructor(r){this._ngbConfig=r,this.horizontal=!1}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(r){this._animation=r}}return c.\u0275fac=function(r){return new(r||c)(a.LFG(Qo))},c.\u0275prov=a.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),rh=(()=>{class c{constructor(r,p,M){this._element=r,this._zone=M,this._afterInit=!1,this._isCollapsed=!1,this.ngbCollapseChange=new a.vpe,this.shown=new a.vpe,this.hidden=new a.vpe,this.animation=p.animation,this.horizontal=p.horizontal}set collapsed(r){this._isCollapsed!==r&&(this._isCollapsed=r,this._afterInit&&this._runTransitionWithEvents(r,this.animation))}ngOnInit(){this._runTransition(this._isCollapsed,!1),this._afterInit=!0}toggle(r=this._isCollapsed){this.collapsed=!r,this.ngbCollapseChange.next(this._isCollapsed)}_runTransition(r,p){return Cs(this._zone,this._element.nativeElement,im,{animation:p,runningTransition:"stop",context:{direction:r?"hide":"show",dimension:this.horizontal?"width":"height"}})}_runTransitionWithEvents(r,p){this._runTransition(r,p).subscribe(()=>{r?this.hidden.emit():this.shown.emit()})}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(a.SBq),a.Y36(Qg),a.Y36(a.R0b))},c.\u0275dir=a.lG2({type:c,selectors:[["","ngbCollapse",""]],hostVars:2,hostBindings:function(r,p){2&r&&a.ekj("collapse-horizontal",p.horizontal)},inputs:{animation:"animation",collapsed:["ngbCollapse","collapsed"],horizontal:"horizontal"},outputs:{ngbCollapseChange:"ngbCollapseChange",shown:"shown",hidden:"hidden"},exportAs:["ngbCollapse"],standalone:!0}),c})(),hu=0,ed=(()=>{class c{constructor(r){this._item=r}template(){return!1===this._item.destroyOnHide||this._item.animatingBodyCollapse?this._bodyTpl:null}}return c.\u0275fac=function(r){return new(r||c)(a.Y36((0,a.Gpc)(()=>Po)))},c.\u0275cmp=a.Xpm({type:c,selectors:[["","ngbAccordionBody",""]],contentQueries:function(r,p,M){if(1&r&&a.Suo(M,a.Rgc,7),2&r){let N;a.iGM(N=a.CRH())&&(p._bodyTpl=N.first)}},hostVars:2,hostBindings:function(r,p){2&r&&a.ekj("accordion-body",!0)},standalone:!0,features:[a.jDz],attrs:rv,decls:1,vars:1,consts:[[3,"ngTemplateOutlet"]],template:function(r,p){1&r&&a.YNc(0,Cp,0,0,"ng-template",0),2&r&&a.Q6J("ngTemplateOutlet",p.template())},dependencies:[ut.tP],encapsulation:2}),c})(),io=(()=>{class c{constructor(r,p){this.item=r,this.ngbCollapse=p}}return c.\u0275fac=function(r){return new(r||c)(a.Y36((0,a.Gpc)(()=>Po)),a.Y36(rh))},c.\u0275dir=a.lG2({type:c,selectors:[["","ngbAccordionCollapse",""]],hostAttrs:["role","region"],hostVars:4,hostBindings:function(r,p){2&r&&(a.Ikx("id",p.item.collapseId),a.uIk("aria-labelledby",p.item.toggleId),a.ekj("accordion-collapse",!0))},exportAs:["ngbAccordionCollapse"],standalone:!0,features:[a.zW0([rh])]}),c})(),Po=(()=>{class c{constructor(r,p){this._accordion=r,this._cd=p,this._subscriptions=[],this._collapsed=!0,this._id="ngb-accordion-item-"+hu++,this.animatingBodyCollapse=!1,this.destroyOnHide=this._accordion.destroyOnHide,this.disabled=!1,this.shown=new a.vpe,this.hidden=new a.vpe}set id(r){nc(r)&&""!==r&&(this._id=r)}set collapsed(r){this.collapsed!==r&&(this._collapsed=r,this._cd.markForCheck(),this._collapsed||(this.animatingBodyCollapse=!0,this._cd.detectChanges()),this._collapse.ngbCollapse.animation=this._accordion.animation,this._collapse.ngbCollapse.collapsed=r)}get collapsed(){return this._collapsed}get id(){return`${this._id}`}get toggleId(){return`${this.id}-toggle`}get collapseId(){return`${this.id}-collapse`}ngAfterContentInit(){const{ngbCollapse:r}=this._collapse;r.animation=!1,r.collapsed=this.collapsed,r.animation=this._accordion.animation,this._subscriptions.push(r.hidden.subscribe(()=>{this.animatingBodyCollapse=!1,this.hidden.emit(),this._accordion.hidden.emit(this.id)}),r.shown.subscribe(()=>{this.shown.emit(),this._accordion.shown.emit(this.id)}))}ngOnDestroy(){this._subscriptions.forEach(r=>r.unsubscribe())}toggle(){this.collapsed=!this.collapsed}}return c.\u0275fac=function(r){return new(r||c)(a.Y36((0,a.Gpc)(()=>Sc)),a.Y36(a.sBO))},c.\u0275dir=a.lG2({type:c,selectors:[["","ngbAccordionItem",""]],contentQueries:function(r,p,M){if(1&r&&a.Suo(M,io,7),2&r){let N;a.iGM(N=a.CRH())&&(p._collapse=N.first)}},hostVars:3,hostBindings:function(r,p){2&r&&(a.Ikx("id",p.id),a.ekj("accordion-item",!0))},inputs:{id:["ngbAccordionItem","id"],destroyOnHide:"destroyOnHide",disabled:"disabled",collapsed:"collapsed"},outputs:{shown:"shown",hidden:"hidden"},exportAs:["ngbAccordionItem"],standalone:!0}),c})(),Sc=(()=>{class c{constructor(r){this.destroyOnHide=!0,this.shown=new a.vpe,this.hidden=new a.vpe,this.animation=r.animation,this.closeOthers=r.closeOthers}toggle(r){const p=this._getItem(r);if(p){const M=p.collapsed;this._items.forEach(N=>{N===p?N.toggle():this.closeOthers&&M&&(N.collapsed=!0)})}}expand(r){const p=this._getItem(r);p&&this._items.forEach(M=>{M===p?p.collapsed=!1:this.closeOthers&&(M.collapsed=!0)})}expandAll(){this.closeOthers?this._items.find(r=>!r.collapsed)||(this._items.get(0).collapsed=!1):this._items.forEach(r=>{r.collapsed=!1})}collapse(r){const p=this._getItem(r);p&&(p.collapsed=!0)}collapseAll(){this._items.forEach(r=>r.collapsed=!0)}isExpanded(r){const p=this._getItem(r);return!!p&&!p.collapsed}_getItem(r){return this._items.find(p=>p.id===r)}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(ii))},c.\u0275dir=a.lG2({type:c,selectors:[["","ngbAccordion",""]],contentQueries:function(r,p,M){if(1&r&&a.Suo(M,Po,4),2&r){let N;a.iGM(N=a.CRH())&&(p._items=N)}},hostVars:2,hostBindings:function(r,p){2&r&&a.ekj("accordion",!0)},inputs:{animation:"animation",closeOthers:"closeOthers",destroyOnHide:"destroyOnHide"},outputs:{shown:"shown",hidden:"hidden"},exportAs:["ngbAccordion"],standalone:!0}),c})(),sm=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=a.oAB({type:c}),c.\u0275inj=a.cJS({imports:[Sf,ed]}),c})();const Ef=({classList:c})=>{c.remove("show")};let oh=(()=>{class c{constructor(r){this._ngbConfig=r,this.dismissible=!0,this.type="warning"}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(r){this._animation=r}}return c.\u0275fac=function(r){return new(r||c)(a.LFG(Qo))},c.\u0275prov=a.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),Af=(()=>{class c{constructor(r,p,M,N){this._renderer=p,this._element=M,this._zone=N,this.closed=new a.vpe,this.dismissible=r.dismissible,this.type=r.type,this.animation=r.animation}close(){const r=Cs(this._zone,this._element.nativeElement,Ef,{animation:this.animation,runningTransition:"continue"});return r.subscribe(()=>this.closed.emit()),r}ngOnChanges(r){const p=r.type;p&&!p.firstChange&&(this._renderer.removeClass(this._element.nativeElement,`alert-${p.previousValue}`),this._renderer.addClass(this._element.nativeElement,`alert-${p.currentValue}`))}ngOnInit(){this._renderer.addClass(this._element.nativeElement,`alert-${this.type}`)}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(oh),a.Y36(a.Qsj),a.Y36(a.SBq),a.Y36(a.R0b))},c.\u0275cmp=a.Xpm({type:c,selectors:[["ngb-alert"]],hostAttrs:["role","alert",1,"alert","show"],hostVars:4,hostBindings:function(r,p){2&r&&a.ekj("fade",p.animation)("alert-dismissible",p.dismissible)},inputs:{animation:"animation",dismissible:"dismissible",type:"type"},outputs:{closed:"closed"},exportAs:["ngbAlert"],standalone:!0,features:[a.TTD,a.jDz],ngContentSelectors:Jd,decls:2,vars:1,consts:function(){let f;return f=$localize`:@@ngb.alert.close:Close`,[["type","button","class","btn-close","aria-label",f,3,"click",4,"ngIf"],["type","button","aria-label",f,1,"btn-close",3,"click"]]},template:function(r,p){1&r&&(a.F$t(),a.Hsn(0),a.YNc(1,sv,1,0,"button",0)),2&r&&(a.xp6(1),a.Q6J("ngIf",p.dismissible))},dependencies:[ut.O5],styles:["ngb-alert{display:block}\n"],encapsulation:2,changeDetection:0}),c})(),e_=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=a.oAB({type:c}),c.\u0275inj=a.cJS({imports:[Af]}),c})();var rl=(()=>{return(c=rl||(rl={})).START="start",c.END="end",rl;var c})();const If=({classList:c})=>c.contains("carousel-item-start")||c.contains("carousel-item-end"),Cc=c=>{c.remove("carousel-item-start"),c.remove("carousel-item-end")},ah=c=>{Cc(c),c.remove("carousel-item-prev"),c.remove("carousel-item-next")},t_=(c,f,{direction:r})=>{const{classList:p}=c;return f?(If(c)?Cc(p):(p.add("carousel-item-"+(r===rl.START?"next":"prev")),du(c),p.add("carousel-item-"+r)),()=>{ah(p),p.add("active")}):(Cc(p),ah(p),void p.add("active"))},om=(c,f,{direction:r})=>{const{classList:p}=c;return f?(If(c)?Cc(p):p.add("carousel-item-"+r),()=>{ah(p),p.remove("active")}):(Cc(p),ah(p),void p.remove("active"))};let lh=(()=>{class c{constructor(r){this._ngbConfig=r,this.interval=5e3,this.wrap=!0,this.keyboard=!0,this.pauseOnHover=!0,this.pauseOnFocus=!0,this.showNavigationArrows=!0,this.showNavigationIndicators=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(r){this._animation=r}}return c.\u0275fac=function(r){return new(r||c)(a.LFG(Qo))},c.\u0275prov=a.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),n_=0,Pf=(()=>{class c{constructor(r){this.tplRef=r,this.id="ngb-slide-"+n_++,this.slid=new a.vpe}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(a.Rgc))},c.\u0275dir=a.lG2({type:c,selectors:[["ng-template","ngbSlide",""]],inputs:{id:"id"},outputs:{slid:"slid"},standalone:!0}),c})(),i_=(()=>{class c{constructor(r,p,M,N,ie){this._platformId=p,this._ngZone=M,this._cd=N,this._container=ie,this.NgbSlideEventSource=yr,this._destroy$=new Re.x,this._interval$=new wt.X(0),this._mouseHover$=new wt.X(!1),this._focused$=new wt.X(!1),this._pauseOnHover$=new wt.X(!1),this._pauseOnFocus$=new wt.X(!1),this._pause$=new wt.X(!1),this._wrap$=new wt.X(!1),this.slide=new a.vpe,this.slid=new a.vpe,this._transitionIds=null,this.animation=r.animation,this.interval=r.interval,this.wrap=r.wrap,this.keyboard=r.keyboard,this.pauseOnHover=r.pauseOnHover,this.pauseOnFocus=r.pauseOnFocus,this.showNavigationArrows=r.showNavigationArrows,this.showNavigationIndicators=r.showNavigationIndicators}set interval(r){this._interval$.next(r)}get interval(){return this._interval$.value}set wrap(r){this._wrap$.next(r)}get wrap(){return this._wrap$.value}set pauseOnHover(r){this._pauseOnHover$.next(r)}get pauseOnHover(){return this._pauseOnHover$.value}set pauseOnFocus(r){this._pauseOnFocus$.next(r)}get pauseOnFocus(){return this._pauseOnFocus$.value}set mouseHover(r){this._mouseHover$.next(r)}get mouseHover(){return this._mouseHover$.value}set focused(r){this._focused$.next(r)}get focused(){return this._focused$.value}arrowLeft(){this.focus(),this.prev(yr.ARROW_LEFT)}arrowRight(){this.focus(),this.next(yr.ARROW_RIGHT)}ngAfterContentInit(){(0,ut.NF)(this._platformId)&&this._ngZone.runOutsideAngular(()=>{const r=(0,mn.a)([this.slide.pipe((0,lr.U)(p=>p.current),(0,ja.O)(this.activeId)),this._wrap$,this.slides.changes.pipe((0,ja.O)(null))]).pipe((0,lr.U)(([p,M])=>{const N=this.slides.toArray(),ie=this._getSlideIdxById(p);return M?N.length>1:ie<N.length-1}),Pr());(0,mn.a)([this._pause$,this._pauseOnHover$,this._mouseHover$,this._pauseOnFocus$,this._focused$,this._interval$,r]).pipe((0,lr.U)(([p,M,N,ie,he,me,De])=>p||M&&N||ie&&he||!De?0:me),Pr(),(0,go.w)(p=>p>0?cn(p,p):Yi),(0,Mn.R)(this._destroy$)).subscribe(()=>this._ngZone.run(()=>this.next(yr.TIMER)))}),this.slides.changes.pipe((0,Mn.R)(this._destroy$)).subscribe(()=>{this._transitionIds?.forEach(r=>(c=>{nh.get(c)?.complete()})(this._getSlideElement(r))),this._transitionIds=null,this._cd.markForCheck(),this._ngZone.onStable.pipe((0,Ei.q)(1)).subscribe(()=>{for(const{id:r}of this.slides){const p=this._getSlideElement(r);r===this.activeId?p.classList.add("active"):p.classList.remove("active")}})})}ngAfterContentChecked(){let r=this._getSlideById(this.activeId);this.activeId=r?r.id:this.slides.length?this.slides.first.id:""}ngAfterViewInit(){if(this.activeId){const r=this._getSlideElement(this.activeId);r&&r.classList.add("active")}}ngOnDestroy(){this._destroy$.next()}select(r,p){this._cycleToSelected(r,this._getSlideEventDirection(this.activeId,r),p)}prev(r){this._cycleToSelected(this._getPrevSlide(this.activeId),rl.END,r)}next(r){this._cycleToSelected(this._getNextSlide(this.activeId),rl.START,r)}pause(){this._pause$.next(!0)}cycle(){this._pause$.next(!1)}focus(){this._container.nativeElement.focus()}_cycleToSelected(r,p,M){const N=this._transitionIds;if(N&&(N[0]!==r||N[1]!==this.activeId))return;let ie=this._getSlideById(r);if(ie&&ie.id!==this.activeId){this._transitionIds=[this.activeId,r],this.slide.emit({prev:this.activeId,current:ie.id,direction:p,paused:this._pause$.value,source:M});const he={animation:this.animation,runningTransition:"stop",context:{direction:p}},me=[],De=this._getSlideById(this.activeId);if(De){const Kt=Cs(this._ngZone,this._getSlideElement(De.id),om,he);Kt.subscribe(()=>{De.slid.emit({isShown:!1,direction:p,source:M})}),me.push(Kt)}const Fe=this.activeId;this.activeId=ie.id;const Tt=this._getSlideById(this.activeId),xt=Cs(this._ngZone,this._getSlideElement(ie.id),t_,he);xt.subscribe(()=>{Tt?.slid.emit({isShown:!0,direction:p,source:M})}),me.push(xt),sn(...me).pipe((0,Ei.q)(1)).subscribe(()=>{this._transitionIds=null,this.slid.emit({prev:Fe,current:ie.id,direction:p,paused:this._pause$.value,source:M})})}this._cd.markForCheck()}_getSlideEventDirection(r,p){return this._getSlideIdxById(r)>this._getSlideIdxById(p)?rl.END:rl.START}_getSlideById(r){return this.slides.find(p=>p.id===r)||null}_getSlideIdxById(r){const p=this._getSlideById(r);return null!=p?this.slides.toArray().indexOf(p):-1}_getNextSlide(r){const p=this.slides.toArray(),M=this._getSlideIdxById(r);return M===p.length-1?this.wrap?p[0].id:p[p.length-1].id:p[M+1].id}_getPrevSlide(r){const p=this.slides.toArray(),M=this._getSlideIdxById(r);return 0===M?this.wrap?p[p.length-1].id:p[0].id:p[M-1].id}_getSlideElement(r){return this._container.nativeElement.querySelector(`#slide-${r}`)}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(lh),a.Y36(a.Lbi),a.Y36(a.R0b),a.Y36(a.sBO),a.Y36(a.SBq))},c.\u0275cmp=a.Xpm({type:c,selectors:[["ngb-carousel"]],contentQueries:function(r,p,M){if(1&r&&a.Suo(M,Pf,4),2&r){let N;a.iGM(N=a.CRH())&&(p.slides=N)}},hostAttrs:["tabIndex","0",1,"carousel","slide"],hostVars:3,hostBindings:function(r,p){1&r&&a.NdJ("keydown.arrowLeft",function(){return p.keyboard&&p.arrowLeft()})("keydown.arrowRight",function(){return p.keyboard&&p.arrowRight()})("mouseenter",function(){return p.mouseHover=!0})("mouseleave",function(){return p.mouseHover=!1})("focusin",function(){return p.focused=!0})("focusout",function(){return p.focused=!1}),2&r&&(a.uIk("aria-activedescendant","slide-"+p.activeId),a.Udp("display","block"))},inputs:{animation:"animation",activeId:"activeId",interval:"interval",wrap:"wrap",keyboard:"keyboard",pauseOnHover:"pauseOnHover",pauseOnFocus:"pauseOnFocus",showNavigationArrows:"showNavigationArrows",showNavigationIndicators:"showNavigationIndicators"},outputs:{slide:"slide",slid:"slid"},exportAs:["ngbCarousel"],standalone:!0,features:[a.jDz],decls:6,vars:6,consts:function(){let f,r,p;return f=$localize`:Currently selected slide number read by screen reader@@ngb.carousel.slide-number: Slide ${"\ufffd0\ufffd"}:INTERPOLATION: of ${"\ufffd1\ufffd"}:INTERPOLATION_1: `,r=$localize`:@@ngb.carousel.previous:Previous`,p=$localize`:@@ngb.carousel.next:Next`,[["role","tablist",1,"carousel-indicators"],["type","button","data-bs-target","","role","tab",3,"active","click",4,"ngFor","ngForOf"],[1,"carousel-inner"],["class","carousel-item","role","tabpanel",3,"id",4,"ngFor","ngForOf"],["class","carousel-control-prev","type","button",3,"click",4,"ngIf"],["class","carousel-control-next","type","button",3,"click",4,"ngIf"],["type","button","data-bs-target","","role","tab",3,"click"],["role","tabpanel",1,"carousel-item",3,"id"],[1,"visually-hidden"],f,[3,"ngTemplateOutlet"],["type","button",1,"carousel-control-prev",3,"click"],["aria-hidden","true",1,"carousel-control-prev-icon"],r,["type","button",1,"carousel-control-next",3,"click"],["aria-hidden","true",1,"carousel-control-next-icon"],p]},template:function(r,p){1&r&&(a.TgZ(0,"div",0),a.YNc(1,vg,1,5,"button",1),a.qZA(),a.TgZ(2,"div",2),a.YNc(3,ov,4,4,"div",3),a.qZA(),a.YNc(4,av,4,0,"button",4),a.YNc(5,cf,4,0,"button",5)),2&r&&(a.ekj("visually-hidden",!p.showNavigationIndicators),a.xp6(1),a.Q6J("ngForOf",p.slides),a.xp6(2),a.Q6J("ngForOf",p.slides),a.xp6(1),a.Q6J("ngIf",p.showNavigationArrows),a.xp6(1),a.Q6J("ngIf",p.showNavigationArrows))},dependencies:[ut.ax,ut.tP,ut.O5],encapsulation:2,changeDetection:0}),c})();var yr=(()=>{return(c=yr||(yr={})).TIMER="timer",c.ARROW_LEFT="arrowLeft",c.ARROW_RIGHT="arrowRight",c.INDICATOR="indicator",yr;var c})();let am=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=a.oAB({type:c}),c.\u0275inj=a.cJS({imports:[i_]}),c})(),Of=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=a.oAB({type:c}),c.\u0275inj=a.cJS({}),c})();class ss{constructor(f,r,p){this.year=gr(f)?f:null,this.month=gr(r)?r:null,this.day=gr(p)?p:null}static from(f){return f instanceof ss?f:f?new ss(f.year,f.month,f.day):null}equals(f){return null!=f&&this.year===f.year&&this.month===f.month&&this.day===f.day}before(f){return!!f&&(this.year===f.year?this.month===f.month?this.day!==f.day&&this.day<f.day:this.month<f.month:this.year<f.year)}after(f){return!!f&&(this.year===f.year?this.month===f.month?this.day!==f.day&&this.day>f.day:this.month>f.month:this.year>f.year)}}function rc(c,f){return!function lm(c,f){return!c&&!f||!!c&&!!f&&c.equals(f)}(c,f)}function Nf(c,f){return!(!c&&!f||c&&f&&c.year===f.year&&c.month===f.month)}function td(c,f,r){return c&&f&&c.before(f)?f:c&&r&&c.after(r)?r:c||null}function nd(c,f){const{minDate:r,maxDate:p,disabled:M,markDisabled:N}=f;return!(null==c||M||N&&N(c,{year:c.year,month:c.month})||r&&c.before(r)||p&&c.after(p))}function s_(c){return new ss(c.getFullYear(),c.getMonth()+1,c.getDate())}function ch(c){const f=new Date(c.year,c.month-1,c.day,12);return isNaN(f.getTime())||f.setFullYear(c.year),f}let sd=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275prov=a.Yz7({token:c,factory:function(){return function hm(){return new Ff}()},providedIn:"root"}),c})(),Ff=(()=>{class c extends sd{getDaysPerWeek(){return 7}getMonths(){return[1,2,3,4,5,6,7,8,9,10,11,12]}getWeeksPerMonth(){return 6}getNext(r,p="d",M=1){let N=ch(r),ie=!0,he=N.getMonth();switch(p){case"y":N.setFullYear(N.getFullYear()+M);break;case"m":he+=M,N.setMonth(he),he%=12,he<0&&(he+=12);break;case"d":N.setDate(N.getDate()+M),ie=!1;break;default:return r}return ie&&N.getMonth()!==he&&N.setDate(0),s_(N)}getPrev(r,p="d",M=1){return this.getNext(r,p,-M)}getWeekday(r){let M=ch(r).getDay();return 0===M?7:M}getWeekNumber(r,p){7===p&&(p=0);const ie=ch(r[(11-p)%7]);ie.setDate(ie.getDate()+4-(ie.getDay()||7));const he=ie.getTime();return ie.setMonth(0),ie.setDate(1),Math.floor(Math.round((he-ie.getTime())/864e5)/7)+1}getToday(){return s_(new Date)}isValid(r){if(!(r&&gr(r.year)&&gr(r.month)&&gr(r.day)&&0!==r.year))return!1;const p=ch(r);return!isNaN(p.getTime())&&p.getFullYear()===r.year&&p.getMonth()+1===r.month&&p.getDate()===r.day}}return c.\u0275fac=function(){let f;return function(p){return(f||(f=a.n5z(c)))(p||c)}}(),c.\u0275prov=a.Yz7({token:c,factory:c.\u0275fac}),c})(),Il=(()=>{class c{getMonthLabel(r){return`${this.getMonthFullName(r.month,r.year)} ${this.getYearNumerals(r.year)}`}getDayNumerals(r){return`${r.day}`}getWeekNumerals(r){return`${r}`}getYearNumerals(r){return`${r}`}getWeekLabel(){return""}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275prov=a.Yz7({token:c,factory:function(r){let p=null;return p=r?new r:function Mv(c){return new o_(c)}(a.LFG(a.soG)),p},providedIn:"root"}),c})(),o_=(()=>{class c extends Il{constructor(r){super(),this._locale=r,this._monthsShort=(0,ut.UT)(r,ut.x.Standalone,ut.Tn.Abbreviated),this._monthsFull=(0,ut.UT)(r,ut.x.Standalone,ut.Tn.Wide)}getWeekdayLabel(r,p){const M=(0,ut.Mn)(this._locale,ut.x.Standalone,void 0===p?ut.Tn.Short:p);return M.map((ie,he)=>M[(he+1)%7])[r-1]||""}getMonthShortName(r){return this._monthsShort[r-1]||""}getMonthFullName(r){return this._monthsFull[r-1]||""}getDayAriaLabel(r){const p=new Date(r.year,r.month-1,r.day);return(0,ut.p6)(p,"fullDate",this._locale)}}return c.\u0275fac=function(r){return new(r||c)(a.LFG(a.soG))},c.\u0275prov=a.Yz7({token:c,factory:c.\u0275fac}),c})(),od=(()=>{class c{constructor(r,p){this._calendar=r,this._i18n=p,this._VALIDATORS={dayTemplateData:M=>{if(this._state.dayTemplateData!==M)return{dayTemplateData:M}},displayMonths:M=>{if(gr(M=no(M))&&M>0&&this._state.displayMonths!==M)return{displayMonths:M}},disabled:M=>{if(this._state.disabled!==M)return{disabled:M}},firstDayOfWeek:M=>{if(gr(M=no(M))&&M>=0&&this._state.firstDayOfWeek!==M)return{firstDayOfWeek:M}},focusVisible:M=>{if(this._state.focusVisible!==M&&!this._state.disabled)return{focusVisible:M}},markDisabled:M=>{if(this._state.markDisabled!==M)return{markDisabled:M}},maxDate:M=>{const N=this.toValidDate(M,null);if(rc(this._state.maxDate,N))return{maxDate:N}},minDate:M=>{const N=this.toValidDate(M,null);if(rc(this._state.minDate,N))return{minDate:N}},navigation:M=>{if(this._state.navigation!==M)return{navigation:M}},outsideDays:M=>{if(this._state.outsideDays!==M)return{outsideDays:M}},weekdays:M=>{const N=!0===M||!1===M?ut.Tn.Short:M,ie=!0!==M&&!1!==M||M;if(this._state.weekdayWidth!==N||this._state.weekdaysVisible!==ie)return{weekdayWidth:N,weekdaysVisible:ie}}},this._model$=new Re.x,this._dateSelect$=new Re.x,this._state={dayTemplateData:null,markDisabled:null,maxDate:null,minDate:null,disabled:!1,displayMonths:1,firstDate:null,firstDayOfWeek:1,lastDate:null,focusDate:null,focusVisible:!1,months:[],navigation:"select",outsideDays:"visible",prevDisabled:!1,nextDisabled:!1,selectedDate:null,selectBoxes:{years:[],months:[]},weekdayWidth:ut.Tn.Short,weekdaysVisible:!0}}get model$(){return this._model$.pipe((0,Ir.h)(r=>r.months.length>0))}get dateSelect$(){return this._dateSelect$.pipe((0,Ir.h)(r=>null!==r))}set(r){let p=Object.keys(r).map(M=>this._VALIDATORS[M](r[M])).reduce((M,N)=>({...M,...N}),{});Object.keys(p).length>0&&this._nextState(p)}focus(r){const p=this.toValidDate(r,null);null!=p&&!this._state.disabled&&rc(this._state.focusDate,p)&&this._nextState({focusDate:r})}focusSelect(){nd(this._state.focusDate,this._state)&&this.select(this._state.focusDate,{emitEvent:!0})}open(r){const p=this.toValidDate(r,this._calendar.getToday());null!=p&&!this._state.disabled&&(!this._state.firstDate||Nf(this._state.firstDate,p))&&this._nextState({firstDate:p})}select(r,p={}){const M=this.toValidDate(r,null);null!=M&&!this._state.disabled&&(rc(this._state.selectedDate,M)&&this._nextState({selectedDate:M}),p.emitEvent&&nd(M,this._state)&&this._dateSelect$.next(M))}toValidDate(r,p){const M=ss.from(r);return void 0===p&&(p=this._calendar.getToday()),this._calendar.isValid(M)?M:p}getMonth(r){for(let p of this._state.months)if(r.month===p.number&&r.year===p.year)return p;throw new Error(`month ${r.month} of year ${r.year} not found`)}_nextState(r){const p=this._updateState(r);this._patchContexts(p),this._state=p,this._model$.next(this._state)}_patchContexts(r){const{months:p,displayMonths:M,selectedDate:N,focusDate:ie,focusVisible:he,disabled:me,outsideDays:De}=r;r.months.forEach(Fe=>{Fe.weeks.forEach(Tt=>{Tt.days.forEach(xt=>{ie&&(xt.context.focused=ie.equals(xt.date)&&he),xt.tabindex=!me&&ie&&xt.date.equals(ie)&&ie.month===Fe.number?0:-1,!0===me&&(xt.context.disabled=!0),void 0!==N&&(xt.context.selected=null!==N&&N.equals(xt.date)),Fe.number!==xt.date.month&&(xt.hidden="hidden"===De||"collapsed"===De||M>1&&xt.date.after(p[0].firstDate)&&xt.date.before(p[M-1].lastDate))})})})}_updateState(r){const p=Object.assign({},this._state,r);let M=p.firstDate;if(("minDate"in r||"maxDate"in r)&&(function cm(c,f){if(f&&c&&f.before(c))throw new Error(`'maxDate' ${f} should be greater than 'minDate' ${c}`)}(p.minDate,p.maxDate),p.focusDate=td(p.focusDate,p.minDate,p.maxDate),p.firstDate=td(p.firstDate,p.minDate,p.maxDate),M=p.focusDate),"disabled"in r&&(p.focusVisible=!1),"selectedDate"in r&&0===this._state.months.length&&(M=p.selectedDate),"focusVisible"in r||"focusDate"in r&&(p.focusDate=td(p.focusDate,p.minDate,p.maxDate),M=p.focusDate,0!==p.months.length&&p.focusDate&&!p.focusDate.before(p.firstDate)&&!p.focusDate.after(p.lastDate)))return p;if("firstDate"in r&&(p.firstDate=td(p.firstDate,p.minDate,p.maxDate),M=p.firstDate),M){const ie=function rd(c,f,r,p,M){const{displayMonths:N,months:ie}=r,he=ie.splice(0,ie.length);return Array.from({length:N},(De,Fe)=>{const Tt=Object.assign(c.getNext(f,"m",Fe),{day:1});if(ie[Fe]=null,!M){const xt=he.findIndex(Kt=>Kt.firstDate.equals(Tt));-1!==xt&&(ie[Fe]=he.splice(xt,1)[0])}return Tt}).forEach((De,Fe)=>{null===ie[Fe]&&(ie[Fe]=function um(c,f,r,p,M={}){const{dayTemplateData:N,minDate:ie,maxDate:he,firstDayOfWeek:me,markDisabled:De,outsideDays:Fe,weekdayWidth:Tt,weekdaysVisible:xt}=r,Kt=c.getToday();M.firstDate=null,M.lastDate=null,M.number=f.month,M.year=f.year,M.weeks=M.weeks||[],M.weekdays=M.weekdays||[],f=function dm(c,f,r){const p=c.getDaysPerWeek(),M=new ss(f.year,f.month,1),N=c.getWeekday(M)%p;return c.getPrev(M,"d",(p+N-r)%p)}(c,f,me),xt||(M.weekdays.length=0);for(let Bn=0;Bn<c.getWeeksPerMonth();Bn++){let Tn=M.weeks[Bn];Tn||(Tn=M.weeks[Bn]={number:0,days:[],collapsed:!0});const Rn=Tn.days;for(let Yn=0;Yn<c.getDaysPerWeek();Yn++){0===Bn&&xt&&(M.weekdays[Yn]=p.getWeekdayLabel(c.getWeekday(f),Tt));const mi=new ss(f.year,f.month,f.day),Di=c.getNext(mi),wi=p.getDayAriaLabel(mi);let si=!!(ie&&mi.before(ie)||he&&mi.after(he));!si&&De&&(si=De(mi,{month:M.number,year:M.year}));let gi=mi.equals(Kt),Xi=N?N(mi,{month:M.number,year:M.year}):void 0;null===M.firstDate&&mi.month===M.number&&(M.firstDate=mi),mi.month===M.number&&Di.month!==M.number&&(M.lastDate=mi);let hi=Rn[Yn];hi||(hi=Rn[Yn]={}),hi.date=mi,hi.context=Object.assign(hi.context||{},{$implicit:mi,date:mi,data:Xi,currentMonth:M.number,currentYear:M.year,disabled:si,focused:!1,selected:!1,today:gi}),hi.tabindex=-1,hi.ariaLabel=wi,hi.hidden=!1,f=Di}Tn.number=c.getWeekNumber(Rn.map(Yn=>Yn.date),me),Tn.collapsed="collapsed"===Fe&&Rn[0].date.month!==M.number&&Rn[Rn.length-1].date.month!==M.number}return M}(c,De,r,p,he.shift()||{}))}),ie}(this._calendar,M,p,this._i18n,"dayTemplateData"in r||"firstDayOfWeek"in r||"markDisabled"in r||"minDate"in r||"maxDate"in r||"disabled"in r||"outsideDays"in r||"weekdaysVisible"in r);p.months=ie,p.firstDate=ie[0].firstDate,p.lastDate=ie[ie.length-1].lastDate,"selectedDate"in r&&!nd(p.selectedDate,p)&&(p.selectedDate=null),"firstDate"in r&&(!p.focusDate||p.focusDate.before(p.firstDate)||p.focusDate.after(p.lastDate))&&(p.focusDate=M);const he=!this._state.firstDate||this._state.firstDate.year!==p.firstDate.year,me=!this._state.firstDate||this._state.firstDate.month!==p.firstDate.month;"select"===p.navigation?(("minDate"in r||"maxDate"in r||0===p.selectBoxes.years.length||he)&&(p.selectBoxes.years=function id(c,f,r){if(!c)return[];const p=f?Math.max(f.year,c.year-500):c.year-10,N=(r?Math.min(r.year,c.year+500):c.year+10)-p+1,ie=Array(N);for(let he=0;he<N;he++)ie[he]=p+he;return ie}(p.firstDate,p.minDate,p.maxDate)),("minDate"in r||"maxDate"in r||0===p.selectBoxes.months.length||he)&&(p.selectBoxes.months=function r_(c,f,r,p){if(!f)return[];let M=c.getMonths(f.year);if(r&&f.year===r.year){const N=M.findIndex(ie=>ie===r.month);M=M.slice(N)}if(p&&f.year===p.year){const N=M.findIndex(ie=>ie===p.month);M=M.slice(0,N+1)}return M}(this._calendar,p.firstDate,p.minDate,p.maxDate))):p.selectBoxes={years:[],months:[]},("arrows"===p.navigation||"select"===p.navigation)&&(me||he||"minDate"in r||"maxDate"in r||"disabled"in r)&&(p.prevDisabled=p.disabled||function os(c,f,r){const p=Object.assign(c.getPrev(f,"m"),{day:1});return null!=r&&(p.year===r.year&&p.month<r.month||p.year<r.year&&1===r.month)}(this._calendar,p.firstDate,p.minDate),p.nextDisabled=p.disabled||function Ur(c,f,r){const p=Object.assign(c.getNext(f,"m"),{day:1});return null!=r&&p.after(r)}(this._calendar,p.lastDate,p.maxDate))}return p}}return c.\u0275fac=function(r){return new(r||c)(a.LFG(sd),a.LFG(Il))},c.\u0275prov=a.Yz7({token:c,factory:c.\u0275fac}),c})();var Ec=(()=>{return(c=Ec||(Ec={}))[c.PREV=0]="PREV",c[c.NEXT=1]="NEXT",Ec;var c})();let fm=(()=>{class c{constructor(r){this.i18n=r}isMuted(){return!this.selected&&(this.date.month!==this.currentMonth||this.disabled)}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(Il))},c.\u0275cmp=a.Xpm({type:c,selectors:[["","ngbDatepickerDayView",""]],hostAttrs:[1,"btn-light"],hostVars:10,hostBindings:function(r,p){2&r&&a.ekj("bg-primary",p.selected)("text-white",p.selected)("text-muted",p.isMuted())("outside",p.isMuted())("active",p.focused)},inputs:{currentMonth:"currentMonth",date:"date",disabled:"disabled",focused:"focused",selected:"selected"},standalone:!0,features:[a.jDz],attrs:lv,decls:1,vars:1,template:function(r,p){1&r&&a._uU(0),2&r&&a.Oqu(p.i18n.getDayNumerals(p.date))},styles:["[ngbDatepickerDayView]{text-align:center;width:2rem;height:2rem;line-height:2rem;border-radius:.25rem;background:transparent}[ngbDatepickerDayView]:hover:not(.bg-primary),[ngbDatepickerDayView].active:not(.bg-primary){background-color:var(--bs-btn-bg);outline:1px solid var(--bs-border-color)}[ngbDatepickerDayView].outside{opacity:.5}\n"],encapsulation:2,changeDetection:0}),c})(),Ac=(()=>{class c{constructor(r,p){this.i18n=r,this._renderer=p,this.select=new a.vpe,this._month=-1,this._year=-1}changeMonth(r){this.select.emit(new ss(this.date.year,no(r),1))}changeYear(r){this.select.emit(new ss(no(r),this.date.month,1))}ngAfterViewChecked(){this.date&&(this.date.month!==this._month&&(this._month=this.date.month,this._renderer.setProperty(this.monthSelect.nativeElement,"value",this._month)),this.date.year!==this._year&&(this._year=this.date.year,this._renderer.setProperty(this.yearSelect.nativeElement,"value",this._year)))}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(Il),a.Y36(a.Qsj))},c.\u0275cmp=a.Xpm({type:c,selectors:[["ngb-datepicker-navigation-select"]],viewQuery:function(r,p){if(1&r&&(a.Gf(cv,7,a.SBq),a.Gf(uv,7,a.SBq)),2&r){let M;a.iGM(M=a.CRH())&&(p.monthSelect=M.first),a.iGM(M=a.CRH())&&(p.yearSelect=M.first)}},inputs:{date:"date",disabled:"disabled",months:"months",years:"years"},outputs:{select:"select"},standalone:!0,features:[a.jDz],decls:6,vars:4,consts:function(){let f,r,p,M;return f=$localize`:@@ngb.datepicker.select-month:Select month`,r=$localize`:@@ngb.datepicker.select-month:Select month`,p=$localize`:@@ngb.datepicker.select-year:Select year`,M=$localize`:@@ngb.datepicker.select-year:Select year`,[["aria-label",f,"title",r,1,"form-select",3,"disabled","change"],["month",""],[3,"value",4,"ngFor","ngForOf"],["aria-label",p,"title",M,1,"form-select",3,"disabled","change"],["year",""],[3,"value"]]},template:function(r,p){1&r&&(a.TgZ(0,"select",0,1),a.NdJ("change",function(N){return p.changeMonth(N.target.value)}),a.YNc(2,dv,2,3,"option",2),a.qZA(),a.TgZ(3,"select",3,4),a.NdJ("change",function(N){return p.changeYear(N.target.value)}),a.YNc(5,hv,2,2,"option",2),a.qZA()),2&r&&(a.Q6J("disabled",p.disabled),a.xp6(2),a.Q6J("ngForOf",p.months),a.xp6(1),a.Q6J("disabled",p.disabled),a.xp6(2),a.Q6J("ngForOf",p.years))},dependencies:[ut.ax],styles:["ngb-datepicker-navigation-select>.form-select{flex:1 1 auto;padding:0 .5rem;font-size:.875rem;height:1.85rem}ngb-datepicker-navigation-select>.form-select:focus{z-index:1}ngb-datepicker-navigation-select>.form-select::-ms-value{background-color:transparent!important}\n"],encapsulation:2,changeDetection:0}),c})(),a_=(()=>{class c{constructor(r){this.i18n=r,this.navigation=Ec,this.months=[],this.navigate=new a.vpe,this.select=new a.vpe}onClickPrev(r){r.currentTarget.focus(),this.navigate.emit(this.navigation.PREV)}onClickNext(r){r.currentTarget.focus(),this.navigate.emit(this.navigation.NEXT)}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(Il))},c.\u0275cmp=a.Xpm({type:c,selectors:[["ngb-datepicker-navigation"]],inputs:{date:"date",disabled:"disabled",months:"months",showSelect:"showSelect",prevDisabled:"prevDisabled",nextDisabled:"nextDisabled",selectBoxes:"selectBoxes"},outputs:{navigate:"navigate",select:"select"},standalone:!0,features:[a.jDz],decls:8,vars:4,consts:function(){let f,r,p,M;return f=$localize`:@@ngb.datepicker.previous-month:Previous month`,r=$localize`:@@ngb.datepicker.previous-month:Previous month`,p=$localize`:@@ngb.datepicker.next-month:Next month`,M=$localize`:@@ngb.datepicker.next-month:Next month`,[[1,"ngb-dp-arrow"],["type","button","aria-label",f,"title",r,1,"btn","btn-link","ngb-dp-arrow-btn",3,"disabled","click"],[1,"ngb-dp-navigation-chevron"],["class","ngb-dp-navigation-select",3,"date","disabled","months","years","select",4,"ngIf"],[4,"ngIf"],[1,"ngb-dp-arrow","right"],["type","button","aria-label",p,"title",M,1,"btn","btn-link","ngb-dp-arrow-btn",3,"disabled","click"],[1,"ngb-dp-navigation-select",3,"date","disabled","months","years","select"],["ngFor","",3,"ngForOf"],["class","ngb-dp-arrow",4,"ngIf"],[1,"ngb-dp-month-name"]]},template:function(r,p){1&r&&(a.TgZ(0,"div",0)(1,"button",1),a.NdJ("click",function(N){return p.onClickPrev(N)}),a._UZ(2,"span",2),a.qZA()(),a.YNc(3,yg,1,4,"ngb-datepicker-navigation-select",3),a.YNc(4,Ip,1,1,null,4),a.TgZ(5,"div",5)(6,"button",6),a.NdJ("click",function(N){return p.onClickNext(N)}),a._UZ(7,"span",2),a.qZA()()),2&r&&(a.xp6(1),a.Q6J("disabled",p.prevDisabled),a.xp6(2),a.Q6J("ngIf",p.showSelect),a.xp6(1),a.Q6J("ngIf",!p.showSelect),a.xp6(2),a.Q6J("disabled",p.nextDisabled))},dependencies:[ut.O5,ut.ax,Ac],styles:["ngb-datepicker-navigation{display:flex;align-items:center}.ngb-dp-navigation-chevron{border-style:solid;border-width:.2em .2em 0 0;display:inline-block;width:.75em;height:.75em;margin-left:.25em;margin-right:.15em;transform:rotate(-135deg)}.ngb-dp-arrow{display:flex;flex:1 1 auto;padding-right:0;padding-left:0;margin:0;width:2rem;height:2rem}.ngb-dp-arrow.right{justify-content:flex-end}.ngb-dp-arrow.right .ngb-dp-navigation-chevron{transform:rotate(45deg);margin-left:.15em;margin-right:.25em}.ngb-dp-arrow-btn{padding:0 .25rem;margin:0 .5rem;border:none;background-color:transparent;z-index:1}.ngb-dp-arrow-btn:focus{outline-width:1px;outline-style:auto}@media all and (-ms-high-contrast: none),(-ms-high-contrast: active){.ngb-dp-arrow-btn:focus{outline-style:solid}}.ngb-dp-month-name{font-size:larger;height:2rem;line-height:2rem;text-align:center}.ngb-dp-navigation-select{display:flex;flex:1 1 9rem}\n"],encapsulation:2,changeDetection:0}),c})();var xi=(()=>{return(c=xi||(xi={}))[c.Tab=9]="Tab",c[c.Enter=13]="Enter",c[c.Escape=27]="Escape",c[c.Space=32]="Space",c[c.PageUp=33]="PageUp",c[c.PageDown=34]="PageDown",c[c.End=35]="End",c[c.Home=36]="Home",c[c.ArrowLeft=37]="ArrowLeft",c[c.ArrowUp=38]="ArrowUp",c[c.ArrowRight=39]="ArrowRight",c[c.ArrowDown=40]="ArrowDown",xi;var c})();let uh=(()=>{class c{processKey(r,p){const{state:M,calendar:N}=p;switch(r.which){case xi.PageUp:p.focusDate(N.getPrev(M.focusedDate,r.shiftKey?"y":"m",1));break;case xi.PageDown:p.focusDate(N.getNext(M.focusedDate,r.shiftKey?"y":"m",1));break;case xi.End:p.focusDate(r.shiftKey?M.maxDate:M.lastDate);break;case xi.Home:p.focusDate(r.shiftKey?M.minDate:M.firstDate);break;case xi.ArrowLeft:p.focusDate(N.getPrev(M.focusedDate,"d",1));break;case xi.ArrowUp:p.focusDate(N.getPrev(M.focusedDate,"d",N.getDaysPerWeek()));break;case xi.ArrowRight:p.focusDate(N.getNext(M.focusedDate,"d",1));break;case xi.ArrowDown:p.focusDate(N.getNext(M.focusedDate,"d",N.getDaysPerWeek()));break;case xi.Enter:case xi.Space:p.focusSelect();break;default:return}r.preventDefault(),r.stopPropagation()}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275prov=a.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),Lf=(()=>{class c{constructor(){this.displayMonths=1,this.firstDayOfWeek=1,this.navigation="select",this.outsideDays="visible",this.showWeekNumbers=!1,this.weekdays=ut.Tn.Short}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275prov=a.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),fu=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275prov=a.Yz7({token:c,factory:function(){return function Bf(){return new Ic}()},providedIn:"root"}),c})(),Ic=(()=>{class c extends fu{fromModel(r){return r&&gr(r.year)&&gr(r.month)&&gr(r.day)?{year:r.year,month:r.month,day:r.day}:null}toModel(r){return r&&gr(r.year)&&gr(r.month)&&gr(r.day)?{year:r.year,month:r.month,day:r.day}:null}}return c.\u0275fac=function(){let f;return function(p){return(f||(f=a.n5z(c)))(p||c)}}(),c.\u0275prov=a.Yz7({token:c,factory:c.\u0275fac}),c})(),jf=(()=>{class c{constructor(r){this.templateRef=r}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(a.Rgc))},c.\u0275dir=a.lG2({type:c,selectors:[["ng-template","ngbDatepickerContent",""]],standalone:!0}),c})(),ad=(()=>{class c{constructor(r,p,M,N){this.i18n=r,this.datepicker=p,this._keyboardService=M,this._service=N}set month(r){this.viewModel=this._service.getMonth(r)}onKeyDown(r){this._keyboardService.processKey(r,this.datepicker)}doSelect(r){!r.context.disabled&&!r.hidden&&this.datepicker.onDateSelect(r.date)}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(Il),a.Y36((0,a.Gpc)(()=>dh)),a.Y36(uh),a.Y36(od))},c.\u0275cmp=a.Xpm({type:c,selectors:[["ngb-datepicker-month"]],hostAttrs:["role","grid"],hostBindings:function(r,p){1&r&&a.NdJ("keydown",function(N){return p.onKeyDown(N)})},inputs:{month:"month"},standalone:!0,features:[a.jDz],decls:2,vars:2,consts:[["class","ngb-dp-week ngb-dp-weekdays","role","row",4,"ngIf"],["ngFor","",3,"ngForOf"],["role","row",1,"ngb-dp-week","ngb-dp-weekdays"],["class","ngb-dp-weekday ngb-dp-showweek small",4,"ngIf"],["class","ngb-dp-weekday small","role","columnheader",4,"ngFor","ngForOf"],[1,"ngb-dp-weekday","ngb-dp-showweek","small"],["role","columnheader",1,"ngb-dp-weekday","small"],["class","ngb-dp-week","role","row",4,"ngIf"],["role","row",1,"ngb-dp-week"],["class","ngb-dp-week-number small text-muted",4,"ngIf"],["class","ngb-dp-day","role","gridcell",3,"disabled","tabindex","hidden","ngb-dp-today","click",4,"ngFor","ngForOf"],[1,"ngb-dp-week-number","small","text-muted"],["role","gridcell",1,"ngb-dp-day",3,"tabindex","click"],[3,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(r,p){1&r&&(a.YNc(0,bg,3,2,"div",0),a.YNc(1,Dg,1,1,"ng-template",1)),2&r&&(a.Q6J("ngIf",p.viewModel.weekdays.length>0),a.xp6(1),a.Q6J("ngForOf",p.viewModel.weeks))},dependencies:[ut.O5,ut.ax,ut.tP],styles:['ngb-datepicker-month{display:block}.ngb-dp-weekday,.ngb-dp-week-number{line-height:2rem;text-align:center;font-style:italic}.ngb-dp-weekday{color:var(--bs-info)}.ngb-dp-week{border-radius:.25rem;display:flex}.ngb-dp-weekdays{border-bottom:1px solid var(--bs-border-color);border-radius:0;background-color:var(--bs-light)}.ngb-dp-day,.ngb-dp-weekday,.ngb-dp-week-number{width:2rem;height:2rem}.ngb-dp-day{cursor:pointer}.ngb-dp-day.disabled,.ngb-dp-day.hidden{cursor:default;pointer-events:none}.ngb-dp-day[tabindex="0"]{z-index:1}\n'],encapsulation:2}),c})(),dh=(()=>{class c{constructor(r,p,M,N,ie,he,me,De){this._service=r,this._calendar=p,this.i18n=M,this._elementRef=he,this._ngbDateAdapter=me,this._ngZone=De,this._controlValue=null,this._destroyed$=new Re.x,this._publicState={},this.navigate=new a.vpe,this.dateSelect=new a.vpe,this.onChange=Fe=>{},this.onTouched=()=>{},["dayTemplate","dayTemplateData","displayMonths","firstDayOfWeek","footerTemplate","markDisabled","minDate","maxDate","navigation","outsideDays","showWeekNumbers","startDate","weekdays"].forEach(Fe=>this[Fe]=N[Fe]),r.dateSelect$.pipe((0,Mn.R)(this._destroyed$)).subscribe(Fe=>{this.dateSelect.emit(Fe)}),r.model$.pipe((0,Mn.R)(this._destroyed$)).subscribe(Fe=>{const Tt=Fe.firstDate,xt=this.model?this.model.firstDate:null;this._publicState={maxDate:Fe.maxDate,minDate:Fe.minDate,firstDate:Fe.firstDate,lastDate:Fe.lastDate,focusedDate:Fe.focusDate,months:Fe.months.map(Yn=>Yn.firstDate)};let Kt=!1;if(!Tt.equals(xt)&&(this.navigate.emit({current:xt?{year:xt.year,month:xt.month}:null,next:{year:Tt.year,month:Tt.month},preventDefault:()=>Kt=!0}),Kt&&null!==xt))return void this._service.open(xt);const Bn=Fe.selectedDate,Tn=Fe.focusDate,Rn=this.model?this.model.focusDate:null;this.model=Fe,rc(Bn,this._controlValue)&&(this._controlValue=Bn,this.onTouched(),this.onChange(this._ngbDateAdapter.toModel(Bn))),rc(Tn,Rn)&&Rn&&Fe.focusVisible&&this.focus(),ie.markForCheck()})}get state(){return this._publicState}get calendar(){return this._calendar}focusDate(r){this._service.focus(ss.from(r))}focusSelect(){this._service.focusSelect()}focus(){this._ngZone.onStable.asObservable().pipe((0,Ei.q)(1)).subscribe(()=>{const r=this._elementRef.nativeElement.querySelector('div.ngb-dp-day[tabindex="0"]');r&&r.focus()})}navigateTo(r){this._service.open(ss.from(r?r.day?r:{...r,day:1}:null))}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{const r=et(this._contentEl.nativeElement,"focusin"),p=et(this._contentEl.nativeElement,"focusout"),{nativeElement:M}=this._elementRef;(0,Ii.T)(r,p).pipe((0,Ir.h)(({target:N,relatedTarget:ie})=>!(xf(N,"ngb-dp-day")&&xf(ie,"ngb-dp-day")&&M.contains(N)&&M.contains(ie))),(0,Mn.R)(this._destroyed$)).subscribe(({type:N})=>this._ngZone.run(()=>this._service.set({focusVisible:"focusin"===N})))})}ngOnDestroy(){this._destroyed$.next()}ngOnInit(){if(void 0===this.model){const r={};["dayTemplateData","displayMonths","markDisabled","firstDayOfWeek","navigation","minDate","maxDate","outsideDays","weekdays"].forEach(p=>r[p]=this[p]),this._service.set(r),this.navigateTo(this.startDate)}this.dayTemplate||(this.dayTemplate=this._defaultDayTemplate)}ngOnChanges(r){const p={};if(["dayTemplateData","displayMonths","markDisabled","firstDayOfWeek","navigation","minDate","maxDate","outsideDays","weekdays"].filter(M=>M in r).forEach(M=>p[M]=this[M]),this._service.set(p),"startDate"in r){const{currentValue:M,previousValue:N}=r.startDate;Nf(N,M)&&this.navigateTo(this.startDate)}}onDateSelect(r){this._service.focus(r),this._service.select(r,{emitEvent:!0})}onNavigateDateSelect(r){this._service.open(r)}onNavigateEvent(r){switch(r){case Ec.PREV:this._service.open(this._calendar.getPrev(this.model.firstDate,"m",1));break;case Ec.NEXT:this._service.open(this._calendar.getNext(this.model.firstDate,"m",1))}}registerOnChange(r){this.onChange=r}registerOnTouched(r){this.onTouched=r}setDisabledState(r){this._service.set({disabled:r})}writeValue(r){this._controlValue=ss.from(this._ngbDateAdapter.fromModel(r)),this._service.select(this._controlValue)}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(od),a.Y36(sd),a.Y36(Il),a.Y36(Lf),a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(fu),a.Y36(a.R0b))},c.\u0275cmp=a.Xpm({type:c,selectors:[["ngb-datepicker"]],contentQueries:function(r,p,M){if(1&r&&a.Suo(M,jf,7),2&r){let N;a.iGM(N=a.CRH())&&(p.contentTemplate=N.first)}},viewQuery:function(r,p){if(1&r&&(a.Gf(wg,7),a.Gf(Np,7)),2&r){let M;a.iGM(M=a.CRH())&&(p._defaultDayTemplate=M.first),a.iGM(M=a.CRH())&&(p._contentEl=M.first)}},hostVars:2,hostBindings:function(r,p){2&r&&a.ekj("disabled",p.model.disabled)},inputs:{dayTemplate:"dayTemplate",dayTemplateData:"dayTemplateData",displayMonths:"displayMonths",firstDayOfWeek:"firstDayOfWeek",footerTemplate:"footerTemplate",markDisabled:"markDisabled",maxDate:"maxDate",minDate:"minDate",navigation:"navigation",outsideDays:"outsideDays",showWeekNumbers:"showWeekNumbers",startDate:"startDate",weekdays:"weekdays"},outputs:{navigate:"navigate",dateSelect:"dateSelect"},exportAs:["ngbDatepicker"],standalone:!0,features:[a._Bn([{provide:Un,useExisting:(0,a.Gpc)(()=>c),multi:!0},od]),a.TTD,a.jDz],decls:10,vars:5,consts:[["defaultDayTemplate",""],["defaultContentTemplate",""],[1,"ngb-dp-header"],[3,"date","months","disabled","showSelect","prevDisabled","nextDisabled","selectBoxes","navigate","select",4,"ngIf"],[1,"ngb-dp-content"],["content",""],[3,"ngTemplateOutlet"],["ngbDatepickerDayView","",3,"date","currentMonth","selected","disabled","focused"],["class","ngb-dp-month",4,"ngFor","ngForOf"],[1,"ngb-dp-month"],["class","ngb-dp-month-name",4,"ngIf"],[3,"month"],[1,"ngb-dp-month-name"],[3,"date","months","disabled","showSelect","prevDisabled","nextDisabled","selectBoxes","navigate","select"]],template:function(r,p){if(1&r&&(a.YNc(0,Rg,1,5,"ng-template",null,0,a.W1O),a.YNc(2,hf,1,1,"ng-template",null,1,a.W1O),a.TgZ(4,"div",2),a.YNc(5,Fp,1,7,"ngb-datepicker-navigation",3),a.qZA(),a.TgZ(6,"div",4,5),a.YNc(8,ff,0,0,"ng-template",6),a.qZA(),a.YNc(9,to,0,0,"ng-template",6)),2&r){const M=a.MAs(3);a.xp6(5),a.Q6J("ngIf","none"!==p.navigation),a.xp6(1),a.ekj("ngb-dp-months",!p.contentTemplate),a.xp6(2),a.Q6J("ngTemplateOutlet",(null==p.contentTemplate?null:p.contentTemplate.templateRef)||M),a.xp6(1),a.Q6J("ngTemplateOutlet",p.footerTemplate)}},dependencies:[ut.O5,ut.ax,ut.tP,fm,ad,a_],styles:["ngb-datepicker{border:1px solid var(--bs-border-color);border-radius:.25rem;display:inline-block}ngb-datepicker-month{pointer-events:auto}ngb-datepicker.dropdown-menu{padding:0}ngb-datepicker.disabled .ngb-dp-weekday,ngb-datepicker.disabled .ngb-dp-week-number,ngb-datepicker.disabled .ngb-dp-month-name{color:var(--bs-text-muted)}.ngb-dp-body{z-index:1055}.ngb-dp-header{border-bottom:0;border-radius:.25rem .25rem 0 0;padding-top:.25rem;background-color:var(--bs-light)}.ngb-dp-months{display:flex}.ngb-dp-month{pointer-events:none}.ngb-dp-month-name{font-size:larger;height:2rem;line-height:2rem;text-align:center;background-color:var(--bs-light)}.ngb-dp-month+.ngb-dp-month .ngb-dp-month-name,.ngb-dp-month+.ngb-dp-month .ngb-dp-week{padding-left:1rem}.ngb-dp-month:last-child .ngb-dp-week{padding-right:.25rem}.ngb-dp-month:first-child .ngb-dp-week{padding-left:.25rem}.ngb-dp-month .ngb-dp-week:last-child{padding-bottom:.25rem}\n"],encapsulation:2,changeDetection:0}),c})();typeof navigator<"u"&&navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));const mm=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function fh(c){const f=Array.from(c.querySelectorAll(mm)).filter(r=>-1!==r.tabIndex);return[f[0],f[f.length-1]]}new Date(1882,10,12),new Date(2174,10,25);let oc=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=a.oAB({type:c}),c.\u0275inj=a.cJS({imports:[dh,ad]}),c})(),Mu=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=a.oAB({type:c}),c.\u0275inj=a.cJS({}),c})();class Oa{constructor(f,r,p){this.nodes=f,this.viewRef=r,this.componentRef=p}}let Kf=(()=>{class c{constructor(r,p){this._el=r,this._zone=p}ngOnInit(){this._zone.onStable.asObservable().pipe((0,Ei.q)(1)).subscribe(()=>{Cs(this._zone,this._el.nativeElement,(r,p)=>{p&&du(r),r.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return Cs(this._zone,this._el.nativeElement,({classList:r})=>r.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(a.SBq),a.Y36(a.R0b))},c.\u0275cmp=a.Xpm({type:c,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(r,p){2&r&&(a.Tol("modal-backdrop"+(p.backdropClass?" "+p.backdropClass:"")),a.ekj("show",!p.animation)("fade",p.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},standalone:!0,features:[a.jDz],decls:0,vars:0,template:function(r,p){},encapsulation:2}),c})();class xu{close(f){}dismiss(f){}}class R_{constructor(f,r,p,M){this._windowCmptRef=f,this._contentRef=r,this._backdropCmptRef=p,this._beforeDismiss=M,this._closed=new Re.x,this._dismissed=new Re.x,this._hidden=new Re.x,f.instance.dismissEvent.subscribe(N=>{this.dismiss(N)}),this.result=new Promise((N,ie)=>{this._resolve=N,this._reject=ie}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe((0,Mn.R)(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe((0,Mn.R)(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(f){this._windowCmptRef&&(this._closed.next(f),this._resolve(f),this._removeModalElements())}_dismiss(f){this._dismissed.next(f),this._reject(f),this._removeModalElements()}dismiss(f){if(this._windowCmptRef)if(this._beforeDismiss){const r=this._beforeDismiss();!function Jg(c){return c&&c.then}(r)?!1!==r&&this._dismiss(f):r.then(p=>{!1!==p&&this._dismiss(f)},()=>{})}else this._dismiss(f)}_removeModalElements(){const f=this._windowCmptRef.instance.hide(),r=this._backdropCmptRef?this._backdropCmptRef.instance.hide():(0,xe.of)(void 0);f.subscribe(()=>{const{nativeElement:p}=this._windowCmptRef.location;p.parentNode.removeChild(p),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),r.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:p}=this._backdropCmptRef.location;p.parentNode.removeChild(p),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),sn(f,r).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var Bc=(()=>{return(c=Bc||(Bc={}))[c.BACKDROP_CLICK=0]="BACKDROP_CLICK",c[c.ESC=1]="ESC",Bc;var c})();let xh=(()=>{class c{constructor(r,p,M){this._document=r,this._elRef=p,this._zone=M,this._closed$=new Re.x,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new a.vpe,this.shown=new Re.x,this.hidden=new Re.x}get fullscreenClass(){return!0===this.fullscreen?" modal-fullscreen":nc(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(r){this.dismissEvent.emit(r)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe((0,Ei.q)(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:r}=this._elRef,p={animation:this.animation,runningTransition:"stop"},ie=sn(Cs(this._zone,r,()=>r.classList.remove("show"),p),Cs(this._zone,this._dialogEl.nativeElement,()=>{},p));return ie.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),ie}_show(){const r={animation:this.animation,runningTransition:"continue"};sn(Cs(this._zone,this._elRef.nativeElement,(N,ie)=>{ie&&du(N),N.classList.add("show")},r),Cs(this._zone,this._dialogEl.nativeElement,()=>{},r)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:r}=this._elRef;this._zone.runOutsideAngular(()=>{et(r,"keydown").pipe((0,Mn.R)(this._closed$),(0,Ir.h)(M=>M.which===xi.Escape)).subscribe(M=>{this.keyboard?requestAnimationFrame(()=>{M.defaultPrevented||this._zone.run(()=>this.dismiss(Bc.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let p=!1;et(this._dialogEl.nativeElement,"mousedown").pipe((0,Mn.R)(this._closed$),(0,Pi.b)(()=>p=!1),(0,go.w)(()=>et(r,"mouseup").pipe((0,Mn.R)(this._closed$),(0,Ei.q)(1))),(0,Ir.h)(({target:M})=>r===M)).subscribe(()=>{p=!0}),et(r,"click").pipe((0,Mn.R)(this._closed$)).subscribe(({target:M})=>{r===M&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!p&&this._zone.run(()=>this.dismiss(Bc.BACKDROP_CLICK))),p=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:r}=this._elRef;if(!r.contains(document.activeElement)){const p=r.querySelector("[ngbAutofocus]"),M=fh(r)[0];(p||M||r).focus()}}_restoreFocus(){const r=this._document.body,p=this._elWithFocus;let M;M=p&&p.focus&&r.contains(p)?p:r,this._zone.runOutsideAngular(()=>{setTimeout(()=>M.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&Cs(this._zone,this._elRef.nativeElement,({classList:r})=>(r.add("modal-static"),()=>r.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(ut.K0),a.Y36(a.SBq),a.Y36(a.R0b))},c.\u0275cmp=a.Xpm({type:c,selectors:[["ngb-modal-window"]],viewQuery:function(r,p){if(1&r&&a.Gf(Xu,7),2&r){let M;a.iGM(M=a.CRH())&&(p._dialogEl=M.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(r,p){2&r&&(a.uIk("aria-modal",!0)("aria-labelledby",p.ariaLabelledBy)("aria-describedby",p.ariaDescribedBy),a.Tol("modal d-block"+(p.windowClass?" "+p.windowClass:"")),a.ekj("fade",p.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},standalone:!0,features:[a.jDz],ngContentSelectors:Jd,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(r,p){1&r&&(a.F$t(),a.TgZ(0,"div",0,1)(2,"div",2),a.Hsn(3),a.qZA()()),2&r&&a.Tol("modal-dialog"+(p.size?" modal-"+p.size:"")+(p.centered?" modal-dialog-centered":"")+p.fullscreenClass+(p.scrollable?" modal-dialog-scrollable":"")+(p.modalDialogClass?" "+p.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}\n"],encapsulation:2}),c})(),Xf=(()=>{class c{constructor(r){this._document=r}hide(){const r=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),p=this._document.body,M=p.style,{overflow:N,paddingRight:ie}=M;if(r>0){const he=parseFloat(window.getComputedStyle(p).paddingRight);M.paddingRight=`${he+r}px`}return M.overflow="hidden",()=>{r>0&&(M.paddingRight=ie),M.overflow=N}}}return c.\u0275fac=function(r){return new(r||c)(a.LFG(ut.K0))},c.\u0275prov=a.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),jc=(()=>{class c{constructor(r,p,M,N,ie,he,me){this._applicationRef=r,this._injector=p,this._environmentInjector=M,this._document=N,this._scrollBar=ie,this._rendererFactory=he,this._ngZone=me,this._activeWindowCmptHasChanged=new Re.x,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._backdropAttributes=["animation","backdropClass"],this._modalRefs=[],this._windowAttributes=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","scrollable","size","windowClass","modalDialogClass"],this._windowCmpts=[],this._activeInstances=new a.vpe,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const De=this._windowCmpts[this._windowCmpts.length-1];((c,f,r,p=!1)=>{c.runOutsideAngular(()=>{const M=et(f,"focusin").pipe((0,Mn.R)(r),(0,lr.U)(N=>N.target));et(f,"keydown").pipe((0,Mn.R)(r),(0,Ir.h)(N=>N.which===xi.Tab),Or(M)).subscribe(([N,ie])=>{const[he,me]=fh(f);(ie===he||ie===f)&&N.shiftKey&&(me.focus(),N.preventDefault()),ie===me&&!N.shiftKey&&(he.focus(),N.preventDefault())}),p&&et(f,"click").pipe((0,Mn.R)(r),Or(M),(0,lr.U)(N=>N[1])).subscribe(N=>N.focus())})})(this._ngZone,De.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(De.location.nativeElement)}})}_restoreScrollBar(){const r=this._scrollBarRestoreFn;r&&(this._scrollBarRestoreFn=null,r())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(r,p,M){const N=M.container instanceof HTMLElement?M.container:uu(M.container)?this._document.querySelector(M.container):this._document.body,ie=this._rendererFactory.createRenderer(null,null);if(!N)throw new Error(`The specified modal container "${M.container||"body"}" was not found in the DOM.`);this._hideScrollBar();const he=new xu,me=(r=M.injector||r).get(a.lqb,null)||this._environmentInjector,De=this._getContentRef(r,me,p,he,M);let Fe=!1!==M.backdrop?this._attachBackdrop(N):void 0,Tt=this._attachWindowComponent(N,De.nodes),xt=new R_(Tt,De,Fe,M.beforeDismiss);return this._registerModalRef(xt),this._registerWindowCmpt(Tt),xt.hidden.pipe((0,Ei.q)(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(ie.removeClass(this._document.body,"modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),he.close=Kt=>{xt.close(Kt)},he.dismiss=Kt=>{xt.dismiss(Kt)},this._applyWindowOptions(Tt.instance,M),1===this._modalRefs.length&&ie.addClass(this._document.body,"modal-open"),Fe&&Fe.instance&&(this._applyBackdropOptions(Fe.instance,M),Fe.changeDetectorRef.detectChanges()),Tt.changeDetectorRef.detectChanges(),xt}get activeInstances(){return this._activeInstances}dismissAll(r){this._modalRefs.forEach(p=>p.dismiss(r))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(r){let p=(0,a.LMc)(Kf,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(p.hostView),r.appendChild(p.location.nativeElement),p}_attachWindowComponent(r,p){let M=(0,a.LMc)(xh,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:p});return this._applicationRef.attachView(M.hostView),r.appendChild(M.location.nativeElement),M}_applyWindowOptions(r,p){this._windowAttributes.forEach(M=>{uu(p[M])&&(r[M]=p[M])})}_applyBackdropOptions(r,p){this._backdropAttributes.forEach(M=>{uu(p[M])&&(r[M]=p[M])})}_getContentRef(r,p,M,N,ie){return M?M instanceof a.Rgc?this._createFromTemplateRef(M,N):nc(M)?this._createFromString(M):this._createFromComponent(r,p,M,N,ie):new Oa([])}_createFromTemplateRef(r,p){const N=r.createEmbeddedView({$implicit:p,close(ie){p.close(ie)},dismiss(ie){p.dismiss(ie)}});return this._applicationRef.attachView(N),new Oa([N.rootNodes],N)}_createFromString(r){const p=this._document.createTextNode(`${r}`);return new Oa([[p]])}_createFromComponent(r,p,M,N,ie){const he=a.zs3.create({providers:[{provide:xu,useValue:N}],parent:r}),me=(0,a.LMc)(M,{environmentInjector:p,elementInjector:he}),De=me.location.nativeElement;return ie.scrollable&&De.classList.add("component-host-scrollable"),this._applicationRef.attachView(me.hostView),new Oa([[De]],me.hostView,me)}_setAriaHidden(r){const p=r.parentElement;p&&r!==this._document.body&&(Array.from(p.children).forEach(M=>{M!==r&&"SCRIPT"!==M.nodeName&&(this._ariaHiddenValues.set(M,M.getAttribute("aria-hidden")),M.setAttribute("aria-hidden","true"))}),this._setAriaHidden(p))}_revertAriaHidden(){this._ariaHiddenValues.forEach((r,p)=>{r?p.setAttribute("aria-hidden",r):p.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(r){const p=()=>{const M=this._modalRefs.indexOf(r);M>-1&&(this._modalRefs.splice(M,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(r),this._activeInstances.emit(this._modalRefs),r.result.then(p,p)}_registerWindowCmpt(r){this._windowCmpts.push(r),this._activeWindowCmptHasChanged.next(),r.onDestroy(()=>{const p=this._windowCmpts.indexOf(r);p>-1&&(this._windowCmpts.splice(p,1),this._activeWindowCmptHasChanged.next())})}}return c.\u0275fac=function(r){return new(r||c)(a.LFG(a.z2F),a.LFG(a.zs3),a.LFG(a.lqb),a.LFG(ut.K0),a.LFG(Xf),a.LFG(a.FYo),a.LFG(a.R0b))},c.\u0275prov=a.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),Em=(()=>{class c{constructor(r){this._ngbConfig=r,this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(r){this._animation=r}}return c.\u0275fac=function(r){return new(r||c)(a.LFG(Qo))},c.\u0275prov=a.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),Am=(()=>{class c{constructor(r,p,M){this._injector=r,this._modalStack=p,this._config=M}open(r,p={}){const M={...this._config,animation:this._config.animation,...p};return this._modalStack.open(this._injector,r,M)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(r){this._modalStack.dismissAll(r)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return c.\u0275fac=function(r){return new(r||c)(a.LFG(a.zs3),a.LFG(jc),a.LFG(Em))},c.\u0275prov=a.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),Dh=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=a.oAB({type:c}),c.\u0275inj=a.cJS({providers:[Am]}),c})();const Sh=({classList:c})=>(c.remove("show"),()=>c.remove("active")),Ch=(c,f)=>{f&&du(c),c.classList.add("show")};let Uc=(()=>{class c{constructor(r){this.elRef=r}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(a.SBq))},c.\u0275dir=a.lG2({type:c,selectors:[["","ngbNavPane",""]],hostAttrs:[1,"tab-pane"],hostVars:5,hostBindings:function(r,p){2&r&&(a.Ikx("id",p.item.panelDomId),a.uIk("role",p.role?p.role:p.nav.roles?"tabpanel":void 0)("aria-labelledby",p.item.domId),a.ekj("fade",p.nav.animation))},inputs:{item:"item",nav:"nav",role:"role"},standalone:!0}),c})(),Eh=(()=>{class c{constructor(r,p){this._cd=r,this._ngZone=p,this._activePane=null}isPanelTransitioning(r){return this._activePane?.item===r}ngAfterViewInit(){this._updateActivePane(),this.nav.navItemChange$.pipe((0,Mn.R)(this.nav.destroy$),(0,ja.O)(this._activePane?.item||null),Pr(),function Gt(c){return(0,Ir.h)((f,r)=>c<=r)}(1)).subscribe(r=>{const p={animation:this.nav.animation,runningTransition:"stop"};this._cd.detectChanges(),this._activePane?Cs(this._ngZone,this._activePane.elRef.nativeElement,Sh,p).subscribe(()=>{const M=this._activePane?.item;this._activePane=this._getPaneForItem(r),this._cd.markForCheck(),this._activePane&&(this._activePane.elRef.nativeElement.classList.add("active"),Cs(this._ngZone,this._activePane.elRef.nativeElement,Ch,p).subscribe(()=>{r&&(r.shown.emit(),this.nav.shown.emit(r.id))})),M&&(M.hidden.emit(),this.nav.hidden.emit(M.id))}):this._updateActivePane()})}_updateActivePane(){this._activePane=this._getActivePane(),this._activePane?.elRef.nativeElement.classList.add("show"),this._activePane?.elRef.nativeElement.classList.add("active")}_getPaneForItem(r){return this._panes&&this._panes.find(p=>p.item===r)||null}_getActivePane(){return this._panes&&this._panes.find(r=>r.item.active)||null}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(a.sBO),a.Y36(a.R0b))},c.\u0275cmp=a.Xpm({type:c,selectors:[["","ngbNavOutlet",""]],viewQuery:function(r,p){if(1&r&&a.Gf(Uc,5),2&r){let M;a.iGM(M=a.CRH())&&(p._panes=M)}},hostVars:2,hostBindings:function(r,p){2&r&&a.ekj("tab-content",!0)},inputs:{paneRole:"paneRole",nav:["ngbNavOutlet","nav"]},standalone:!0,features:[a.jDz],attrs:Lp,decls:1,vars:1,consts:[["ngFor","",3,"ngForOf"],["ngbNavPane","",3,"item","nav","role",4,"ngIf"],["ngbNavPane","",3,"item","nav","role"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(r,p){1&r&&a.YNc(0,Eg,1,1,"ng-template",0),2&r&&a.Q6J("ngForOf",p.nav.items)},dependencies:[Uc,ut.ax,ut.O5,ut.tP],encapsulation:2,changeDetection:0}),c})(),Om=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=a.oAB({type:c}),c.\u0275inj=a.cJS({imports:[Eh]}),c})(),No=(()=>{class c{constructor(){this.disabled=!1,this.boundaryLinks=!1,this.directionLinks=!0,this.ellipses=!0,this.maxSize=0,this.pageSize=10,this.rotate=!1}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275prov=a.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),Qf=(()=>{class c{constructor(r){this.templateRef=r}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(a.Rgc))},c.\u0275dir=a.lG2({type:c,selectors:[["ng-template","ngbPaginationEllipsis",""]],standalone:!0}),c})(),Ih=(()=>{class c{constructor(r){this.templateRef=r}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(a.Rgc))},c.\u0275dir=a.lG2({type:c,selectors:[["ng-template","ngbPaginationFirst",""]],standalone:!0}),c})(),Ph=(()=>{class c{constructor(r){this.templateRef=r}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(a.Rgc))},c.\u0275dir=a.lG2({type:c,selectors:[["ng-template","ngbPaginationLast",""]],standalone:!0}),c})(),Oh=(()=>{class c{constructor(r){this.templateRef=r}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(a.Rgc))},c.\u0275dir=a.lG2({type:c,selectors:[["ng-template","ngbPaginationNext",""]],standalone:!0}),c})(),pd=(()=>{class c{constructor(r){this.templateRef=r}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(a.Rgc))},c.\u0275dir=a.lG2({type:c,selectors:[["ng-template","ngbPaginationNumber",""]],standalone:!0}),c})(),bs=(()=>{class c{constructor(r){this.templateRef=r}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(a.Rgc))},c.\u0275dir=a.lG2({type:c,selectors:[["ng-template","ngbPaginationPrevious",""]],standalone:!0}),c})(),ep=(()=>{class c{constructor(r){this.templateRef=r}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(a.Rgc))},c.\u0275dir=a.lG2({type:c,selectors:[["ng-template","ngbPaginationPages",""]],standalone:!0}),c})(),tp=(()=>{class c{constructor(r){this.pageCount=0,this.pages=[],this.page=1,this.pageChange=new a.vpe(!0),this.disabled=r.disabled,this.boundaryLinks=r.boundaryLinks,this.directionLinks=r.directionLinks,this.ellipses=r.ellipses,this.maxSize=r.maxSize,this.pageSize=r.pageSize,this.rotate=r.rotate,this.size=r.size}hasPrevious(){return this.page>1}hasNext(){return this.page<this.pageCount}nextDisabled(){return!this.hasNext()||this.disabled}previousDisabled(){return!this.hasPrevious()||this.disabled}selectPage(r){this._updatePages(r)}ngOnChanges(r){this._updatePages(this.page)}isEllipsis(r){return-1===r}_applyEllipses(r,p){this.ellipses&&(r>0&&(r>2?this.pages.unshift(-1):2===r&&this.pages.unshift(2),this.pages.unshift(1)),p<this.pageCount&&(p<this.pageCount-2?this.pages.push(-1):p===this.pageCount-2&&this.pages.push(this.pageCount-1),this.pages.push(this.pageCount)))}_applyRotation(){let r=0,p=this.pageCount,M=Math.floor(this.maxSize/2);return this.page<=M?p=this.maxSize:this.pageCount-this.page<M?r=this.pageCount-this.maxSize:(r=this.page-M-1,p=this.page+(this.maxSize%2==0?M-1:M)),[r,p]}_applyPagination(){let p=(Math.ceil(this.page/this.maxSize)-1)*this.maxSize;return[p,p+this.maxSize]}_setPageInRange(r){const p=this.page;this.page=eh(r,this.pageCount,1),this.page!==p&&Vr(this.collectionSize)&&this.pageChange.emit(this.page)}_updatePages(r){this.pageCount=Math.ceil(this.collectionSize/this.pageSize),Vr(this.pageCount)||(this.pageCount=0),this.pages.length=0;for(let p=1;p<=this.pageCount;p++)this.pages.push(p);if(this._setPageInRange(r),this.maxSize>0&&this.pageCount>this.maxSize){let p=0,M=this.pageCount;[p,M]=this.rotate?this._applyRotation():this._applyPagination(),this.pages=this.pages.slice(p,M),this._applyEllipses(p,M)}}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(No))},c.\u0275cmp=a.Xpm({type:c,selectors:[["ngb-pagination"]],contentQueries:function(r,p,M){if(1&r&&(a.Suo(M,Qf,5),a.Suo(M,Ih,5),a.Suo(M,Ph,5),a.Suo(M,Oh,5),a.Suo(M,pd,5),a.Suo(M,bs,5),a.Suo(M,ep,5)),2&r){let N;a.iGM(N=a.CRH())&&(p.tplEllipsis=N.first),a.iGM(N=a.CRH())&&(p.tplFirst=N.first),a.iGM(N=a.CRH())&&(p.tplLast=N.first),a.iGM(N=a.CRH())&&(p.tplNext=N.first),a.iGM(N=a.CRH())&&(p.tplNumber=N.first),a.iGM(N=a.CRH())&&(p.tplPrevious=N.first),a.iGM(N=a.CRH())&&(p.tplPages=N.first)}},hostAttrs:["role","navigation"],inputs:{disabled:"disabled",boundaryLinks:"boundaryLinks",directionLinks:"directionLinks",ellipses:"ellipses",rotate:"rotate",collectionSize:"collectionSize",maxSize:"maxSize",page:"page",pageSize:"pageSize",size:"size"},outputs:{pageChange:"pageChange"},standalone:!0,features:[a.TTD,a.jDz],decls:20,vars:12,consts:function(){let f,r,p,M,N,ie,he,me;return f=$localize`:@@ngb.pagination.first:`,r=$localize`:@@ngb.pagination.previous:`,p=$localize`:@@ngb.pagination.next:`,M=$localize`:@@ngb.pagination.last:`,N=$localize`:@@ngb.pagination.first-aria:First`,ie=$localize`:@@ngb.pagination.previous-aria:Previous`,he=$localize`:@@ngb.pagination.next-aria:Next`,me=$localize`:@@ngb.pagination.last-aria:Last`,[["first",""],["previous",""],["next",""],["last",""],["ellipsis",""],["defaultNumber",""],["defaultPages",""],["class","page-item",3,"disabled",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["aria-hidden","true"],f,r,p,M,["class","visually-hidden",4,"ngIf"],[1,"visually-hidden"],["class","page-item",3,"active","disabled",4,"ngFor","ngForOf"],[1,"page-item"],["class","page-link","tabindex","-1","aria-disabled","true",4,"ngIf"],["class","page-link","href","",3,"click",4,"ngIf"],["tabindex","-1","aria-disabled","true",1,"page-link"],["href","",1,"page-link",3,"click"],["aria-label",N,"href","",1,"page-link",3,"click"],["aria-label",ie,"href","",1,"page-link",3,"click"],["aria-label",he,"href","",1,"page-link",3,"click"],["aria-label",me,"href","",1,"page-link",3,"click"]]},template:function(r,p){if(1&r&&(a.YNc(0,kp,2,0,"ng-template",null,0,a.W1O),a.YNc(2,Ag,2,0,"ng-template",null,1,a.W1O),a.YNc(4,Gp,2,0,"ng-template",null,2,a.W1O),a.YNc(6,Ig,2,0,"ng-template",null,3,a.W1O),a.YNc(8,Pg,1,0,"ng-template",null,4,a.W1O),a.YNc(10,mf,2,2,"ng-template",null,5,a.W1O),a.YNc(12,cu,1,1,"ng-template",null,6,a.W1O),a.TgZ(14,"ul"),a.YNc(15,Lg,3,9,"li",7),a.YNc(16,jg,3,8,"li",7),a.YNc(17,kg,0,0,"ng-template",8),a.YNc(18,Vg,3,9,"li",7),a.YNc(19,Up,3,9,"li",7),a.qZA()),2&r){const M=a.MAs(13);a.xp6(14),a.Tol("pagination"+(p.size?" pagination-"+p.size:"")),a.xp6(1),a.Q6J("ngIf",p.boundaryLinks),a.xp6(1),a.Q6J("ngIf",p.directionLinks),a.xp6(1),a.Q6J("ngTemplateOutlet",(null==p.tplPages?null:p.tplPages.templateRef)||M)("ngTemplateOutletContext",a.kEZ(8,bf,p.page,p.pages,p.disabled)),a.xp6(1),a.Q6J("ngIf",p.directionLinks),a.xp6(1),a.Q6J("ngIf",p.boundaryLinks)}},dependencies:[ut.O5,ut.ax,ut.tP],encapsulation:2,changeDetection:0}),c})(),Nh=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=a.oAB({type:c}),c.\u0275inj=a.cJS({imports:[tp]}),c})(),E_=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=a.oAB({type:c}),c.\u0275inj=a.cJS({}),c})(),ol=(()=>{class c{constructor(){this.max=100,this.animated=!1,this.ariaLabel="progress bar",this.striped=!1,this.showValue=!1}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275prov=a.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),pa=(()=>{class c{constructor(r){this.value=0,this.max=r.max,this.animated=r.animated,this.ariaLabel=r.ariaLabel,this.striped=r.striped,this.textType=r.textType,this.type=r.type,this.showValue=r.showValue,this.height=r.height}set max(r){this._max=!Vr(r)||r<=0?100:r}get max(){return this._max}getValue(){return eh(this.value,this.max)}getPercentValue(){return 100*this.getValue()/this.max}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(ol))},c.\u0275cmp=a.Xpm({type:c,selectors:[["ngb-progressbar"]],hostAttrs:["role","progressbar","aria-valuemin","0",1,"progress"],hostVars:5,hostBindings:function(r,p){2&r&&(a.uIk("aria-valuenow",p.getValue())("aria-valuemax",p.max)("aria-label",p.ariaLabel),a.Udp("height",p.height))},inputs:{max:"max",animated:"animated",ariaLabel:"ariaLabel",striped:"striped",showValue:"showValue",textType:"textType",type:"type",value:"value",height:"height"},standalone:!0,features:[a.jDz],ngContentSelectors:Jd,decls:3,vars:11,consts:function(){let f;return f=$localize`:@@ngb.progressbar.value:${"\ufffd0\ufffd"}:INTERPOLATION:`,[[4,"ngIf"],f]},template:function(r,p){1&r&&(a.F$t(),a.TgZ(0,"div"),a.YNc(1,Hg,3,3,"span",0),a.Hsn(2),a.qZA()),2&r&&(a.MT6("progress-bar",p.type?p.textType?" bg-"+p.type:" text-bg-"+p.type:"","",p.textType?" text-"+p.textType:"",""),a.Udp("width",p.getPercentValue(),"%"),a.ekj("progress-bar-animated",p.animated)("progress-bar-striped",p.striped),a.xp6(1),a.Q6J("ngIf",p.showValue))},dependencies:[ut.O5,ut.Zx],encapsulation:2,changeDetection:0}),c})(),Lh=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=a.oAB({type:c}),c.\u0275inj=a.cJS({imports:[pa]}),c})(),rp=(()=>{class c{constructor(){this.max=10,this.readonly=!1,this.resettable=!1,this.tabindex=0}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275prov=a.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),Bh=(()=>{class c{constructor(r,p){this._changeDetectorRef=p,this.contexts=[],this.disabled=!1,this.hover=new a.vpe,this.leave=new a.vpe,this.rateChange=new a.vpe(!0),this.onChange=M=>{},this.onTouched=()=>{},this.max=r.max,this.readonly=r.readonly,this.tabindex=r.tabindex}ariaValueText(r,p){return`${r} out of ${p}`}isInteractive(){return!this.readonly&&!this.disabled}enter(r){this.isInteractive()&&this._updateState(r),this.hover.emit(r)}handleBlur(){this.onTouched()}handleClick(r){this.isInteractive()&&this.update(this.resettable&&this.rate===r?0:r)}handleKeyDown(r){switch(r.which){case xi.ArrowDown:case xi.ArrowLeft:this.update(this.rate-1);break;case xi.ArrowUp:case xi.ArrowRight:this.update(this.rate+1);break;case xi.Home:this.update(0);break;case xi.End:this.update(this.max);break;default:return}r.preventDefault()}ngOnChanges(r){r.rate&&this.update(this.rate),r.max&&this._updateMax()}ngOnInit(){this._setupContexts(),this._updateState(this.rate)}registerOnChange(r){this.onChange=r}registerOnTouched(r){this.onTouched=r}reset(){this.leave.emit(this.nextRate),this._updateState(this.rate)}setDisabledState(r){this.disabled=r}update(r,p=!0){const M=eh(r,this.max,0);this.isInteractive()&&this.rate!==M&&(this.rate=M,this.rateChange.emit(this.rate)),p&&(this.onChange(this.rate),this.onTouched()),this._updateState(this.rate)}writeValue(r){this.update(r,!1),this._changeDetectorRef.markForCheck()}_updateState(r){this.nextRate=r,this.contexts.forEach((p,M)=>p.fill=Math.round(100*eh(r-M,1,0)))}_updateMax(){this.max>0&&(this._setupContexts(),this.update(this.rate))}_setupContexts(){this.contexts=Array.from({length:this.max},(r,p)=>({fill:0,index:p}))}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(rp),a.Y36(a.sBO))},c.\u0275cmp=a.Xpm({type:c,selectors:[["ngb-rating"]],contentQueries:function(r,p,M){if(1&r&&a.Suo(M,a.Rgc,5),2&r){let N;a.iGM(N=a.CRH())&&(p.starTemplateFromContent=N.first)}},hostAttrs:["role","slider","aria-valuemin","0",1,"d-inline-flex"],hostVars:5,hostBindings:function(r,p){1&r&&a.NdJ("blur",function(){return p.handleBlur()})("keydown",function(N){return p.handleKeyDown(N)})("mouseleave",function(){return p.reset()}),2&r&&(a.Ikx("tabindex",p.disabled?-1:p.tabindex),a.uIk("aria-valuemax",p.max)("aria-valuenow",p.nextRate)("aria-valuetext",p.ariaValueText(p.nextRate,p.max))("aria-disabled",!!p.readonly||null))},inputs:{max:"max",rate:"rate",readonly:"readonly",resettable:"resettable",starTemplate:"starTemplate",tabindex:"tabindex",ariaValueText:"ariaValueText"},outputs:{hover:"hover",leave:"leave",rateChange:"rateChange"},standalone:!0,features:[a._Bn([{provide:Un,useExisting:(0,a.Gpc)(()=>c),multi:!0}]),a.TTD,a.jDz],decls:3,vars:1,consts:[["t",""],["ngFor","",3,"ngForOf"],[1,"visually-hidden"],[3,"mouseenter","click"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(r,p){1&r&&(a.YNc(0,zp,1,1,"ng-template",null,0,a.W1O),a.YNc(2,Rc,4,5,"ng-template",1)),2&r&&(a.xp6(2),a.Q6J("ngForOf",p.contexts))},dependencies:[ut.ax,ut.tP],encapsulation:2,changeDetection:0}),c})(),md=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=a.oAB({type:c}),c.\u0275inj=a.cJS({imports:[Bh]}),c})();class jh{constructor(f,r,p){this.hour=no(f),this.minute=no(r),this.second=no(p)}changeHour(f=1){this.updateHour((isNaN(this.hour)?0:this.hour)+f)}updateHour(f){this.hour=Vr(f)?(f<0?24+f:f)%24:NaN}changeMinute(f=1){this.updateMinute((isNaN(this.minute)?0:this.minute)+f)}updateMinute(f){Vr(f)?(this.minute=f%60<0?60+f%60:f%60,this.changeHour(Math.floor(f/60))):this.minute=NaN}changeSecond(f=1){this.updateSecond((isNaN(this.second)?0:this.second)+f)}updateSecond(f){Vr(f)?(this.second=f<0?60+f%60:f%60,this.changeMinute(Math.floor(f/60))):this.second=NaN}isValid(f=!0){return Vr(this.hour)&&Vr(this.minute)&&(!f||Vr(this.second))}toString(){return`${this.hour||0}:${this.minute||0}:${this.second||0}`}}let sp=(()=>{class c{constructor(){this.meridian=!1,this.spinners=!0,this.seconds=!1,this.hourStep=1,this.minuteStep=1,this.secondStep=1,this.disabled=!1,this.readonlyInputs=!1,this.size="medium"}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275prov=a.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),gd=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275prov=a.Yz7({token:c,factory:function(){return function A_(){return new I_}()},providedIn:"root"}),c})(),I_=(()=>{class c extends gd{fromModel(r){return r&&gr(r.hour)&&gr(r.minute)?{hour:r.hour,minute:r.minute,second:gr(r.second)?r.second:null}:null}toModel(r){return r&&gr(r.hour)&&gr(r.minute)?{hour:r.hour,minute:r.minute,second:gr(r.second)?r.second:null}:null}}return c.\u0275fac=function(){let f;return function(p){return(f||(f=a.n5z(c)))(p||c)}}(),c.\u0275prov=a.Yz7({token:c,factory:c.\u0275fac}),c})(),_d=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275prov=a.Yz7({token:c,factory:function(r){let p=null;return p=r?new r:function P_(c){return new lc(c)}(a.LFG(a.soG)),p},providedIn:"root"}),c})(),lc=(()=>{class c extends _d{constructor(r){super(),this._periods=(0,ut.ol)(r,ut.x.Standalone,ut.Tn.Narrow)}getMorningPeriod(){return this._periods[0]}getAfternoonPeriod(){return this._periods[1]}}return c.\u0275fac=function(r){return new(r||c)(a.LFG(a.soG))},c.\u0275prov=a.Yz7({token:c,factory:c.\u0275fac}),c})();const kh=/[^0-9]/g;let Lv=(()=>{class c{constructor(r,p,M,N){this._config=r,this._ngbTimeAdapter=p,this._cd=M,this.i18n=N,this.onChange=ie=>{},this.onTouched=()=>{},this.meridian=r.meridian,this.spinners=r.spinners,this.seconds=r.seconds,this.hourStep=r.hourStep,this.minuteStep=r.minuteStep,this.secondStep=r.secondStep,this.disabled=r.disabled,this.readonlyInputs=r.readonlyInputs,this.size=r.size}set hourStep(r){this._hourStep=gr(r)?r:this._config.hourStep}get hourStep(){return this._hourStep}set minuteStep(r){this._minuteStep=gr(r)?r:this._config.minuteStep}get minuteStep(){return this._minuteStep}set secondStep(r){this._secondStep=gr(r)?r:this._config.secondStep}get secondStep(){return this._secondStep}writeValue(r){const p=this._ngbTimeAdapter.fromModel(r);this.model=p?new jh(p.hour,p.minute,p.second):new jh,!this.seconds&&(!p||!Vr(p.second))&&(this.model.second=0),this._cd.markForCheck()}registerOnChange(r){this.onChange=r}registerOnTouched(r){this.onTouched=r}setDisabledState(r){this.disabled=r}changeHour(r){this.model?.changeHour(r),this.propagateModelChange()}changeMinute(r){this.model?.changeMinute(r),this.propagateModelChange()}changeSecond(r){this.model?.changeSecond(r),this.propagateModelChange()}updateHour(r){const p=!!this.model&&this.model.hour>=12,M=no(r);this.model?.updateHour(this.meridian&&(p&&M<12||!p&&12===M)?M+12:M),this.propagateModelChange()}updateMinute(r){this.model?.updateMinute(no(r)),this.propagateModelChange()}updateSecond(r){this.model?.updateSecond(no(r)),this.propagateModelChange()}toggleMeridian(){this.meridian&&this.changeHour(12)}formatInput(r){r.value=r.value.replace(kh,"")}formatHour(r){return Vr(r)?th(this.meridian?r%12==0?12:r%12:r%24):th(NaN)}formatMinSec(r){return th(Vr(r)?r:NaN)}handleBlur(){this.onTouched()}get isSmallSize(){return"small"===this.size}get isLargeSize(){return"large"===this.size}ngOnChanges(r){r.seconds&&!this.seconds&&this.model&&!Vr(this.model.second)&&(this.model.second=0,this.propagateModelChange(!1))}propagateModelChange(r=!0){r&&this.onTouched(),this.model?.isValid(this.seconds)?this.onChange(this._ngbTimeAdapter.toModel({hour:this.model.hour,minute:this.model.minute,second:this.model.second})):this.onChange(this._ngbTimeAdapter.toModel(null))}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(sp),a.Y36(gd),a.Y36(a.sBO),a.Y36(_d))},c.\u0275cmp=a.Xpm({type:c,selectors:[["ngb-timepicker"]],inputs:{meridian:"meridian",spinners:"spinners",seconds:"seconds",hourStep:"hourStep",minuteStep:"minuteStep",secondStep:"secondStep",readonlyInputs:"readonlyInputs",size:"size"},exportAs:["ngbTimepicker"],standalone:!0,features:[a._Bn([{provide:Un,useExisting:(0,a.Gpc)(()=>c),multi:!0}]),a.TTD,a.jDz],decls:16,vars:25,consts:function(){let f,r,p,M,N,ie,he,me,De,Fe,Tt,xt,Kt,Bn;return f=$localize`:@@ngb.timepicker.HH:HH`,r=$localize`:@@ngb.timepicker.hours:Hours`,p=$localize`:@@ngb.timepicker.MM:MM`,M=$localize`:@@ngb.timepicker.minutes:Minutes`,N=$localize`:@@ngb.timepicker.increment-hours:Increment hours`,ie=$localize`:@@ngb.timepicker.decrement-hours:Decrement hours`,he=$localize`:@@ngb.timepicker.increment-minutes:Increment minutes`,me=$localize`:@@ngb.timepicker.decrement-minutes:Decrement minutes`,De=$localize`:@@ngb.timepicker.SS:SS`,Fe=$localize`:@@ngb.timepicker.seconds:Seconds`,Tt=$localize`:@@ngb.timepicker.increment-seconds:Increment seconds`,xt=$localize`:@@ngb.timepicker.decrement-seconds:Decrement seconds`,Kt=$localize`:@@ngb.timepicker.PM:${"\ufffd0\ufffd"}:INTERPOLATION:`,Bn=$localize`:@@ngb.timepicker.AM:${"\ufffd0\ufffd"}:INTERPOLATION:`,[[3,"disabled"],[1,"ngb-tp"],[1,"ngb-tp-input-container","ngb-tp-hour"],["tabindex","-1","type","button","class","btn btn-link",3,"btn-sm","btn-lg","disabled","click",4,"ngIf"],["type","text","maxlength","2","inputmode","numeric","placeholder",f,"aria-label",r,1,"ngb-tp-input","form-control",3,"value","readOnly","disabled","change","blur","input","keydown.ArrowUp","keydown.ArrowDown"],[1,"ngb-tp-spacer"],[1,"ngb-tp-input-container","ngb-tp-minute"],["type","text","maxlength","2","inputmode","numeric","placeholder",p,"aria-label",M,1,"ngb-tp-input","form-control",3,"value","readOnly","disabled","change","blur","input","keydown.ArrowUp","keydown.ArrowDown"],["class","ngb-tp-spacer",4,"ngIf"],["class","ngb-tp-input-container ngb-tp-second",4,"ngIf"],["class","ngb-tp-meridian",4,"ngIf"],["tabindex","-1","type","button",1,"btn","btn-link",3,"disabled","click"],[1,"chevron","ngb-tp-chevron"],[1,"visually-hidden"],N,[1,"chevron","ngb-tp-chevron","bottom"],ie,he,me,[1,"ngb-tp-input-container","ngb-tp-second"],["type","text","maxlength","2","inputmode","numeric","placeholder",De,"aria-label",Fe,1,"ngb-tp-input","form-control",3,"value","readOnly","disabled","change","blur","input","keydown.ArrowUp","keydown.ArrowDown"],Tt,xt,[1,"ngb-tp-meridian"],["type","button",1,"btn","btn-outline-primary",3,"disabled","click"],[4,"ngIf","ngIfElse"],["am",""],Kt,Bn]},template:function(r,p){1&r&&(a.TgZ(0,"fieldset",0)(1,"div",1)(2,"div",2),a.YNc(3,$p,4,7,"button",3),a.TgZ(4,"input",4),a.NdJ("change",function(N){return p.updateHour(N.target.value)})("blur",function(){return p.handleBlur()})("input",function(N){return p.formatInput(N.target)})("keydown.ArrowUp",function(N){return p.changeHour(p.hourStep),N.preventDefault()})("keydown.ArrowDown",function(N){return p.changeHour(-p.hourStep),N.preventDefault()}),a.qZA(),a.YNc(5,Yp,4,7,"button",3),a.qZA(),a.TgZ(6,"div",5),a._uU(7,":"),a.qZA(),a.TgZ(8,"div",6),a.YNc(9,zg,4,7,"button",3),a.TgZ(10,"input",7),a.NdJ("change",function(N){return p.updateMinute(N.target.value)})("blur",function(){return p.handleBlur()})("input",function(N){return p.formatInput(N.target)})("keydown.ArrowUp",function(N){return p.changeMinute(p.minuteStep),N.preventDefault()})("keydown.ArrowDown",function(N){return p.changeMinute(-p.minuteStep),N.preventDefault()}),a.qZA(),a.YNc(11,pv,4,7,"button",3),a.qZA(),a.YNc(12,qd,2,0,"div",8),a.YNc(13,Zp,4,9,"div",9),a.YNc(14,qp,1,0,"div",8),a.YNc(15,Kd,5,9,"div",10),a.qZA()()),2&r&&(a.ekj("disabled",p.disabled),a.Q6J("disabled",p.disabled),a.xp6(3),a.Q6J("ngIf",p.spinners),a.xp6(1),a.ekj("form-control-sm",p.isSmallSize)("form-control-lg",p.isLargeSize),a.Q6J("value",p.formatHour(null==p.model?null:p.model.hour))("readOnly",p.readonlyInputs)("disabled",p.disabled),a.xp6(1),a.Q6J("ngIf",p.spinners),a.xp6(4),a.Q6J("ngIf",p.spinners),a.xp6(1),a.ekj("form-control-sm",p.isSmallSize)("form-control-lg",p.isLargeSize),a.Q6J("value",p.formatMinSec(null==p.model?null:p.model.minute))("readOnly",p.readonlyInputs)("disabled",p.disabled),a.xp6(1),a.Q6J("ngIf",p.spinners),a.xp6(1),a.Q6J("ngIf",p.seconds),a.xp6(1),a.Q6J("ngIf",p.seconds),a.xp6(1),a.Q6J("ngIf",p.meridian),a.xp6(1),a.Q6J("ngIf",p.meridian))},dependencies:[ut.O5],styles:['ngb-timepicker{font-size:1rem}.ngb-tp{display:flex;align-items:center}.ngb-tp-input-container{width:4em}.ngb-tp-chevron:before{border-style:solid;border-width:.29em .29em 0 0;content:"";display:inline-block;height:.69em;left:.05em;position:relative;top:.15em;transform:rotate(-45deg);vertical-align:middle;width:.69em}.ngb-tp-chevron.bottom:before{top:-.3em;transform:rotate(135deg)}.ngb-tp-input{text-align:center}.ngb-tp-hour,.ngb-tp-minute,.ngb-tp-second,.ngb-tp-meridian{display:flex;flex-direction:column;align-items:center;justify-content:space-around}.ngb-tp-spacer{width:1em;text-align:center}\n'],encapsulation:2}),c})(),Gh=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=a.oAB({type:c}),c.\u0275inj=a.cJS({imports:[Lv]}),c})();const Bv=(c,f)=>{const{classList:r}=c;if(f)return r.add("fade"),du(c),r.add("show","showing"),()=>{r.remove("showing")};r.add("show")},wu=({classList:c})=>(c.add("showing"),()=>{c.remove("show","showing")});let op=(()=>{class c{constructor(r){this._ngbConfig=r,this.autohide=!0,this.delay=5e3,this.ariaLive="polite"}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(r){this._animation=r}}return c.\u0275fac=function(r){return new(r||c)(a.LFG(Qo))},c.\u0275prov=a.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),Bm=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275dir=a.lG2({type:c,selectors:[["","ngbToastHeader",""]],standalone:!0}),c})(),Vh=(()=>{class c{constructor(r,p,M,N){this.ariaLive=r,this._zone=M,this._element=N,this.contentHeaderTpl=null,this.shown=new a.vpe,this.hidden=new a.vpe,null==this.ariaLive&&(this.ariaLive=p.ariaLive),this.delay=p.delay,this.autohide=p.autohide,this.animation=p.animation}ngAfterContentInit(){this._zone.onStable.asObservable().pipe((0,Ei.q)(1)).subscribe(()=>{this._init(),this.show()})}ngOnChanges(r){"autohide"in r&&(this._clearTimeout(),this._init())}hide(){this._clearTimeout();const r=Cs(this._zone,this._element.nativeElement,wu,{animation:this.animation,runningTransition:"stop"});return r.subscribe(()=>{this.hidden.emit()}),r}show(){const r=Cs(this._zone,this._element.nativeElement,Bv,{animation:this.animation,runningTransition:"continue"});return r.subscribe(()=>{this.shown.emit()}),r}_init(){this.autohide&&!this._timeoutID&&(this._timeoutID=setTimeout(()=>this.hide(),this.delay))}_clearTimeout(){this._timeoutID&&(clearTimeout(this._timeoutID),this._timeoutID=null)}}return c.\u0275fac=function(r){return new(r||c)(a.$8M("aria-live"),a.Y36(op),a.Y36(a.R0b),a.Y36(a.SBq))},c.\u0275cmp=a.Xpm({type:c,selectors:[["ngb-toast"]],contentQueries:function(r,p,M){if(1&r&&a.Suo(M,Bm,7,a.Rgc),2&r){let N;a.iGM(N=a.CRH())&&(p.contentHeaderTpl=N.first)}},hostAttrs:["role","alert","aria-atomic","true",1,"toast"],hostVars:3,hostBindings:function(r,p){2&r&&(a.uIk("aria-live",p.ariaLive),a.ekj("fade",p.animation))},inputs:{animation:"animation",delay:"delay",autohide:"autohide",header:"header"},outputs:{shown:"shown",hidden:"hidden"},exportAs:["ngbToast"],standalone:!0,features:[a.TTD,a.jDz],ngContentSelectors:Jd,decls:5,vars:1,consts:function(){let f;return f=$localize`:@@ngb.toast.close-aria:Close`,[["headerTpl",""],[3,"ngIf"],[1,"toast-body"],[1,"me-auto"],[1,"toast-header"],[3,"ngTemplateOutlet"],["type","button","aria-label",f,1,"btn-close",3,"click"]]},template:function(r,p){1&r&&(a.F$t(),a.YNc(0,Xd,2,1,"ng-template",null,0,a.W1O),a.YNc(2,Xp,3,1,"ng-template",1),a.TgZ(3,"div",2),a.Hsn(4),a.qZA()),2&r&&(a.xp6(2),a.Q6J("ngIf",p.contentHeaderTpl||p.header))},dependencies:[ut.O5,ut.tP],styles:["ngb-toast{display:block}ngb-toast .toast-header .close{margin-left:auto;margin-bottom:.25rem}\n"],encapsulation:2}),c})(),Uh=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=a.oAB({type:c}),c.\u0275inj=a.cJS({imports:[Vh]}),c})(),jm=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=a.oAB({type:c}),c.\u0275inj=a.cJS({}),c})(),vd=(()=>{class c{constructor(){this.highlightClass="ngb-highlight",this.accentSensitive=!0}ngOnChanges(r){!this.accentSensitive&&!String.prototype.normalize&&(console.warn("The `accentSensitive` input in `ngb-highlight` cannot be set to `false` in a browser that does not implement the `String.normalize` function. You will have to include a polyfill in your application to use this feature in the current browser."),this.accentSensitive=!0);const p=tm(this.result),M=Array.isArray(this.term)?this.term:[this.term],N=De=>this.accentSensitive?De:wf(De),ie=M.map(De=>function gv(c){return c.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}(N(tm(De)))).filter(De=>De),he=this.accentSensitive?p:wf(p),me=ie.length?he.split(new RegExp(`(${ie.join("|")})`,"gmi")):[p];if(this.accentSensitive)this.parts=me;else{let De=0;this.parts=me.map(Fe=>p.substring(De,De+=Fe.length))}}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=a.Xpm({type:c,selectors:[["ngb-highlight"]],inputs:{highlightClass:"highlightClass",result:"result",term:"term",accentSensitive:"accentSensitive"},standalone:!0,features:[a.TTD,a.jDz],decls:1,vars:1,consts:[["ngFor","",3,"ngForOf"],[3,"class",4,"ngIf","ngIfElse"],["even",""]],template:function(r,p){1&r&&a.YNc(0,Qd,3,2,"ng-template",0),2&r&&a.Q6J("ngForOf",p.parts)},dependencies:[ut.O5,ut.ax],styles:[".ngb-highlight{font-weight:700}\n"],encapsulation:2,changeDetection:0}),c})();new a.OlP("live announcer delay",{providedIn:"root",factory:function Fl(){return 100}});let bd=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=a.oAB({type:c}),c.\u0275inj=a.cJS({imports:[vd]}),c})(),zm=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=a.oAB({type:c}),c.\u0275inj=a.cJS({}),c})();const N_=[sm,e_,am,Of,oc,Mu,Dh,Om,zm,Nh,E_,Lh,md,Gh,Uh,jm,bd];let Wm=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=a.oAB({type:c}),c.\u0275inj=a.cJS({imports:[N_,sm,e_,am,Of,oc,Mu,Dh,Om,zm,Nh,E_,Lh,md,Gh,Uh,jm,bd]}),c})(),F_=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=a.oAB({type:c}),c.\u0275inj=a.cJS({imports:[ut.ez,Wm,ut.ez,Wm]}),c})()},984:(gn,qe,ee)=>{ee.d(qe,{S:()=>be});var a=ee(2148),Y=ee(1571);let be=(()=>{class xe{}return xe.\u0275fac=function(ze){return new(ze||xe)},xe.\u0275mod=Y.oAB({type:xe}),xe.\u0275inj=Y.cJS({imports:[a.HLk,a.HLk]}),xe})()},9203:(gn,qe,ee)=>{ee.d(qe,{M:()=>be});var a=ee(2148),Y=ee(1571);let be=(()=>{class xe extends a.pN9{ngOnInit(){super.ngOnInit(),this.scene&&(this.scene.objRef=this.objRef),this.fixCanvasInit()}fixCanvasInit(){let ze=this.parent;ze.contentScene=this,ze.contentCamera=this.camera}}return xe.\u0275fac=function(){let Re;return function(Xe){return(Re||(Re=Y.n5z(xe)))(Xe||xe)}}(),xe.\u0275cmp=Y.Xpm({type:xe,selectors:[["ng-component"]],viewQuery:function(ze,Xe){if(1&ze&&(Y.Gf(a.pN9,7),Y.Gf(a.Pts,7)),2&ze){let St;Y.iGM(St=Y.CRH())&&(Xe.scene=St.first),Y.iGM(St=Y.CRH())&&(Xe.camera=St.first)}},features:[Y.qOj],decls:0,vars:0,template:function(ze,Xe){},encapsulation:2}),xe})()},1001:(gn,qe,ee)=>{ee.d(qe,{Z:()=>St});var a=ee(1571),Y=ee(2655),be=ee(2148),xe=ee(6895);function Re(je,Pe){1&je&&(a.ynx(0),a.Hsn(1),a.BQk())}function ze(je,Pe){if(1&je&&(a.TgZ(0,"th-canvas",2),a._UZ(1,"router-outlet"),a.qZA()),2&je){const Oe=a.oxw();a.Q6J("thStats",Oe.debug)}}const Xe=["*"];let St=(()=>{class je{constructor(Oe){this.route=Oe,this.withContent=!1,this.debug=!1}ngOnInit(){this.route.queryParams.subscribe(Oe=>{this.debug="true"===Oe.debug})}}return je.\u0275fac=function(Oe){return new(Oe||je)(a.Y36(Y.gz))},je.\u0275cmp=a.Xpm({type:je,selectors:[["jn-website-th"]],inputs:{withContent:"withContent",debug:"debug"},ngContentSelectors:Xe,decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["routing",""],[3,"thStats"]],template:function(Oe,Ke){if(1&Oe&&(a.F$t(),a.YNc(0,Re,2,0,"ng-container",0),a.YNc(1,ze,2,1,"ng-template",null,1,a.W1O)),2&Oe){const Xt=a.MAs(2);a.Q6J("ngIf",Ke.withContent)("ngIfElse",Xt)}},dependencies:[Y.lC,be.lFy,be.I1v,xe.O5],encapsulation:2}),je})()},6133:(gn,qe,ee)=>{ee.r(qe),ee.d(qe,{JnWebsiteThreeModule:()=>je});var a=ee(984),Y=ee(2655),be=ee(1001),xe=ee(8655),Re=ee(475),ze=ee(1571);const Xe=[{path:"",component:be.Z,children:[{path:"scenes",children:[{path:"environment",component:xe.v,data:{testCase:0}},{path:"vr",component:Re.M}]}]}];let St=(()=>{class Pe{}return Pe.\u0275fac=function(Ke){return new(Ke||Pe)},Pe.\u0275mod=ze.oAB({type:Pe}),Pe.\u0275inj=ze.cJS({imports:[Y.Bz.forChild(Xe),Y.Bz]}),Pe})(),je=(()=>{class Pe{}return Pe.\u0275fac=function(Ke){return new(Ke||Pe)},Pe.\u0275mod=ze.oAB({type:Pe}),Pe.\u0275inj=ze.cJS({imports:[St,a.S]}),Pe})()},8655:(gn,qe,ee)=>{ee.d(qe,{v:()=>ke});var a=ee(9203),Y=ee(1571),be=ee(2655),xe=ee(2148),Re=ee(6895),ze=ee(475),Xe=ee(6682),St=ee(1135);let je=(()=>{class Se extends xe.JO{ngOnInit(){super.ngOnInit(),this.group&&(this.group.objRef=this.objRef)}}return Se.\u0275fac=function(){let Me;return function(We){return(Me||(Me=Y.n5z(Se)))(We||Se)}}(),Se.\u0275cmp=Y.Xpm({type:Se,selectors:[["ng-component"]],viewQuery:function(Ze,We){if(1&Ze&&Y.Gf(xe.JO,7),2&Ze){let Pt;Y.iGM(Pt=Y.CRH())&&(We.group=Pt.first)}},features:[Y.qOj],decls:0,vars:0,template:function(Ze,We){},encapsulation:2}),Se})(),Pe=(()=>{class Se extends je{set grid(Ze){this.grid$$.next({...this.grid$$.value,...Ze})}get grid(){return this.grid$$.value}set animation(Ze){this.grid$$.next({...this.grid$$.value,...Ze})}get animation(){return this.animation$$.value}constructor(Ze,We){super(We),this.engine=Ze,this.grid$$=new St.X({padding:.5}),this.point={geometry:{radius:.02},material:{color:"#FFFFFF"}},this.animation$$=new St.X({enabled:!0,frame:0,wave:{speed:.01,height:.1},point:{inflate:.02}})}ngAfterViewInit(){this.initGeometry()}initGeometry(){const Ze=this.grid.padding,We=this.grid.size.x,Pt=this.grid.size.y,fn=We*Pt,Zt=new Float32Array(3*fn),kt=new Float32Array(fn);let ai=0,cn=0;for(let Ce=0;Ce<We;Ce++)for(let Ge=0;Ge<Pt;Ge++)Zt[ai]=this.objRef.position.x+Ce*Ze-We*Ze/2,Zt[ai+1]=this.objRef.position.y,Zt[ai+2]=this.objRef.position.z+Ge*Ze-Pt*Ze/2,kt[cn]=this.point.geometry.radius,ai+=3,cn++;this.geometry&&(this.geometry.objRef.setAttribute("position",new Xe.TlE(Zt,3)),this.geometry.objRef.setAttribute("scale",new Xe.TlE(kt,1))),this.engine.beforeRender$.subscribe(Ce=>{if(this.geometry&&this.animation.enabled){const Ge=this.geometry.objRef.attributes.position.array,tt=this.geometry.objRef.attributes.scale.array,Et=this.grid.size.x,wt=this.grid.size.y;let mn=0,Jn=0;for(let Yi=0;Yi<Et;Yi++)for(let Cn=0;Cn<wt;Cn++){let In=Math.sin(.3*(Yi+this.animation.frame)),sn=Math.sin(.5*(Cn+this.animation.frame));Ge[mn+1]=In*this.animation.wave.height+sn*this.animation.wave.height,Ge[mn+1]=Math.max(0,Ge[mn+1]),tt[Jn]=(In<0?0:In*this.animation.point.inflate)+(sn<0?0:sn*this.animation.point.inflate)+this.point.geometry.radius,mn+=3,Jn++}this.geometry.objRef.attributes.position.needsUpdate=!0,this.geometry.objRef.attributes.scale.needsUpdate=!0}this.animation.frame+=this.animation.wave.speed})}getShaderUniforms(){return{color:{value:new Xe.Ilk(this.point.material.color)}}}getShaderVertex(){return"\n        attribute float scale;\n\n        void main() {\n            vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\n            gl_PointSize = scale * ( 300.0 / - mvPosition.z );\n            gl_Position = projectionMatrix * mvPosition;\n        }\n        "}getShaderFragment(){return"\n        uniform vec3 color;\n\n        void main() {\n\n            if ( length( gl_PointCoord - vec2( 0.5, 0.5 ) ) > 0.475 )\n                discard;\n\n            gl_FragColor = vec4( color, 1.0 );\n\n        }\n        "}}return Se.\u0275fac=function(Ze){return new(Ze||Se)(Y.Y36(xe.D9c),Y.Y36(xe.EZf))},Se.\u0275cmp=Y.Xpm({type:Se,selectors:[["jn-website-th-prefab-wave-point"]],viewQuery:function(Ze,We){if(1&Ze&&(Y.Gf(xe.XHp,7),Y.Gf(xe.sI,7)),2&Ze){let Pt;Y.iGM(Pt=Y.CRH())&&(We.points=Pt.first),Y.iGM(Pt=Y.CRH())&&(We.geometry=Pt.first)}},inputs:{grid:"grid",point:"point",animation:"animation"},features:[Y.qOj],decls:4,vars:3,consts:[[3,"vertexShader","fragmentShader","uniforms"]],template:function(Ze,We){1&Ze&&(Y.TgZ(0,"th-group")(1,"th-points"),Y._UZ(2,"th-bufferGeometry")(3,"th-shaderMaterial",0),Y.qZA()()),2&Ze&&(Y.xp6(3),Y.Q6J("vertexShader",We.getShaderVertex())("fragmentShader",We.getShaderFragment())("uniforms",We.getShaderUniforms()))},dependencies:[xe.XHp,xe.JO,xe.DOm,xe.sI],encapsulation:2,changeDetection:0}),Se})();function Oe(Se,Me){1&Se&&Y._UZ(0,"jn-website-th-scene-vr")}const Ke=function(Se){return[Se,0,0]},Xt=function(){return[2e3,2e3]},et=function(){return{color:"#222222"}},Ct=function(){return[200,40,"#ffffff","#aaaaaa"]};function Je(Se,Me){if(1&Se&&(Y.TgZ(0,"th-group")(1,"th-mesh",5),Y._UZ(2,"th-planeGeometry",6)(3,"th-meshBasicMaterial",6),Y.qZA(),Y._UZ(4,"th-gridHelper",6),Y.qZA()),2&Se){const Ze=Y.oxw();Y.xp6(1),Y.Q6J("rotation",Y.VKq(5,Ke,-.5*Ze.Math.PI))("receiveShadow",!0),Y.xp6(1),Y.Q6J("args",Y.DdM(7,Xt)),Y.xp6(1),Y.Q6J("args",Y.DdM(8,et)),Y.xp6(1),Y.Q6J("args",Y.DdM(9,Ct))}}const Ot=function(){return[0,0,0]},It=function(){return[5,5,5]},Bt=function(Se){return[0,Se,0]},pi=function(){return[0,.2,0]};let ke=(()=>{class Se extends a.M{constructor(Ze,We,Pt){super(Pt),this.route=Ze,this.engine=We,this.debug=!1,this.vr=!1,this.Math=Math,this.wavePoint={grid:{size:{x:100,y:100}},animation:{}}}ngOnInit(){super.ngOnInit(),this.route.queryParams.subscribe(Ze=>{this.debug="true"===Ze.debug,this.vr="true"===Ze.vr})}ngAfterViewInit(){this.initScene()}initScene(){}}return Se.\u0275fac=function(Ze){return new(Ze||Se)(Y.Y36(be.gz),Y.Y36(xe.D9c),Y.Y36(xe.EZf))},Se.\u0275cmp=Y.Xpm({type:Se,selectors:[["jn-website-th-scene-environment"]],inputs:{debug:"debug",vr:"vr"},features:[Y.qOj],decls:7,vars:14,consts:[[3,"position"],[3,"position","lookAt"],[4,"ngIf"],[3,"intensity"],[3,"grid","animation","position"],[3,"rotation","receiveShadow"],[3,"args"]],template:function(Ze,We){1&Ze&&(Y.TgZ(0,"th-scene",0),Y._UZ(1,"th-perspectiveCamera",1),Y.YNc(2,Oe,1,0,"jn-website-th-scene-vr",2),Y._UZ(3,"th-ambientLight",3),Y.TgZ(4,"th-group"),Y._UZ(5,"jn-website-th-prefab-wave-point",4),Y.YNc(6,Je,5,10,"th-group",2),Y.qZA()()),2&Ze&&(Y.Q6J("position",Y.DdM(9,Ot)),Y.xp6(1),Y.Q6J("position",Y.DdM(10,It))("lookAt",Y.VKq(11,Bt,-1)),Y.xp6(1),Y.Q6J("ngIf",We.vr),Y.xp6(1),Y.Q6J("intensity",.3),Y.xp6(2),Y.Q6J("grid",We.wavePoint.grid)("animation",We.wavePoint.animation)("position",Y.DdM(13,pi)),Y.xp6(1),Y.Q6J("ngIf",We.debug))},dependencies:[xe.RjQ,xe.UG5,xe.ITp,xe.YRQ,xe.JO,xe.pN9,xe.WB3,xe.TfJ,Re.O5,ze.M,Pe],encapsulation:2,changeDetection:0}),Se})()},475:(gn,qe,ee)=>{ee.d(qe,{M:()=>Ct});var a=ee(9203),Y=ee(5861);function be(Je){return(be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(Ot){return typeof Ot}:function(Ot){return Ot&&"function"==typeof Symbol&&Ot.constructor===Symbol&&Ot!==Symbol.prototype?"symbol":typeof Ot})(Je)}let Xe=(()=>{class Je{static createButton(It){const Bt=document.createElement("button");function ke(){Bt.style.display="",Bt.style.cursor="auto",Bt.style.left="calc(50% - 75px)",Bt.style.width="150px",Bt.onmouseenter=null,Bt.onmouseleave=null,Bt.onclick=null}function Ze(We){We.style.position="absolute",We.style.bottom="20px",We.style.padding="12px 6px",We.style.border="1px solid #fff",We.style.borderRadius="4px",We.style.background="rgba(0,0,0,0.1)",We.style.color="#fff",We.style.font="normal 13px sans-serif",We.style.textAlign="center",We.style.opacity="0.5",We.style.outline="none",We.style.zIndex="999"}if("xr"in navigator)return Bt.id="VRButton",Bt.style.display="none",Ze(Bt),navigator.xr.isSessionSupported("immersive-vr").then(function(We){We?function pi(){let We=null;function Pt(kt){return fn.apply(this,arguments)}function fn(){return(fn=(0,Y.Z)(function*(kt){kt.addEventListener("end",Zt),yield It.xr.setSession(kt),Bt.textContent="EXIT VR",We=kt})).apply(this,arguments)}function Zt(){We.removeEventListener("end",Zt),Bt.textContent="ENTER VR",We=null}Bt.style.display="",Bt.style.cursor="pointer",Bt.style.left="calc(50% - 50px)",Bt.style.width="100px",Bt.textContent="ENTER VR",Bt.onmouseenter=function(){Bt.style.opacity="1.0"},Bt.onmouseleave=function(){Bt.style.opacity="0.5"},Bt.onclick=function(){null===We?navigator.xr.requestSession("immersive-vr",{optionalFeatures:["local-floor","bounded-floor","hand-tracking","layers"]}).then(Pt):We.end()}}():function Se(){ke(),Bt.textContent="VR NOT SUPPORTED"}(),We&&Je.xrSessionIsGranted&&Bt.click()}).catch(function Me(We){ke(),console.warn("Exception when trying to call xr.isSessionSupported",We),Bt.textContent="VR NOT ALLOWED"}),Bt;{const We=document.createElement("a");return!1===window.isSecureContext?(We.href=document.location.href.replace(/^http:/,"https:"),We.innerHTML="WEBXR NEEDS HTTPS"):(We.href="https://immersiveweb.dev/",We.innerHTML="WEBXR NOT AVAILABLE"),We.style.left="calc(50% - 90px)",We.style.width="180px",We.style.textDecoration="none",Ze(We),We}}static registerSessionGrantedListener(){if("xr"in navigator){if(/WebXRViewer\//i.test(navigator.userAgent))return;navigator.xr.addEventListener("sessiongranted",()=>{Je.xrSessionIsGranted=!0})}}}return function ze(Je,Ot,It){(Ot=function Re(Je){var Ot=function xe(Je,Ot){if("object"!==be(Je)||null===Je)return Je;var It=Je[Symbol.toPrimitive];if(void 0!==It){var Bt=It.call(Je,Ot||"default");if("object"!==be(Bt))return Bt;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===Ot?String:Number)(Je)}(Je,"string");return"symbol"===be(Ot)?Ot:String(Ot)}(Ot))in Je?Object.defineProperty(Je,Ot,{value:It,enumerable:!0,configurable:!0,writable:!0}):Je[Ot]=It}(Je,"xrSessionIsGranted",!1),Je})();Xe.registerSessionGrantedListener();var St=ee(6682),je=ee(1571),Pe=ee(2655),Oe=ee(2148),Ke=ee(6895);const Xt=function(Je){return[Je]};function et(Je,Ot){if(1&Je&&(je.TgZ(0,"th-group",1)(1,"th-mesh",1),je._UZ(2,"th-boxGeometry")(3,"th-meshPhongMaterial",2),je.qZA(),je.TgZ(4,"th-group",3)(5,"th-pointLight",4)(6,"th-mesh"),je._UZ(7,"th-sphereGeometry",2)(8,"th-meshBasicMaterial"),je.qZA()()()()),2&Je){const It=je.oxw();je.Q6J("objRef",It.testCase[0].root.objRef)("position",It.testCase[0].root.position),je.xp6(1),je.Q6J("objRef",It.testCase[0].cube.objRef)("position",It.testCase[0].cube.position),je.xp6(2),je.Q6J("args",It.testCase[0].cube.material),je.xp6(1),je.Q6J("objRef",It.testCase[0].light.objRef),je.xp6(1),je.Q6J("position",It.testCase[0].light.point.position),je.xp6(2),je.Q6J("args",je.VKq(8,Xt,It.testCase[0].light.point.radius))}}let Ct=(()=>{class Je extends a.M{ngOnInit(){super.ngOnInit(),this.route.data.subscribe(It=>{this.testCase[It.testCase]&&(this.testCase[It.testCase].enabled=!0)}),this.route.queryParams.subscribe(It=>{this.testCase[It.testCase]&&(this.testCase[It.testCase].enabled=!0)})}ngAfterViewInit(){this.initScene(),this.initXR()}constructor(It,Bt,pi){super(pi),this.route=It,this.engine=Bt,this.testCase=[{root:{objRef:new St.ZAu,position:new St.Pa4(0,0,-2)},cube:{objRef:new St.Kj0,position:new St.Pa4(0,.5,0),material:{color:"#22AAAA"}},light:{objRef:new St.ZAu,point:{position:new St.Pa4(1,2,0),radius:.1}},onRender:(ke,Se)=>{Se.light.objRef.rotation.y+=1*ke.delta}}]}initScene(){}initXR(){document.body.append(Xe.createButton(this.engine.renderer)),this.engine.renderer.xr.enabled=!0,this.engine.beforeRender$.subscribe(It=>{this.testCase.forEach(Bt=>{Bt.enabled&&Bt.onRender(It,Bt)})}),this.engine.renderer.setAnimationLoop(()=>{this.engine.render()})}}return Je.\u0275fac=function(It){return new(It||Je)(je.Y36(Pe.gz),je.Y36(Oe.D9c),je.Y36(Oe.EZf))},Je.\u0275cmp=je.Xpm({type:Je,selectors:[["jn-website-th-scene-vr"]],features:[je.qOj],decls:2,vars:1,consts:[[3,"objRef","position",4,"ngIf"],[3,"objRef","position"],[3,"args"],[3,"objRef"],[3,"position"]],template:function(It,Bt){1&It&&(je.TgZ(0,"th-scene"),je.YNc(1,et,9,10,"th-group",0),je.qZA()),2&It&&(je.xp6(1),je.Q6J("ngIf",Bt.testCase[0].enabled))},dependencies:[Oe.EFb,Oe.YRQ,Oe.JO,Oe.pN9,Oe.o8H,Oe.WB3,Oe.cw,Oe.$M4,Ke.O5],encapsulation:2,changeDetection:0}),Je})()},8014:(gn,qe,ee)=>{var a=ee(1481),Y=ee(1571),be=ee(2655);const xe=["jn-website-app",""];let Re=(()=>{class Se{}return Se.\u0275fac=function(Ze){return new(Ze||Se)},Se.\u0275cmp=Y.Xpm({type:Se,selectors:[["","jn-website-app",""]],attrs:xe,decls:1,vars:0,template:function(Ze,We){1&Ze&&Y._UZ(0,"router-outlet")},dependencies:[be.lC],styles:["main{width:100%;height:100%;color:#fff;font-family:fantasy}router-outlet{display:none}router-outlet+*{display:contents}ng-component{display:contents}\n"],encapsulation:2}),Se})();var ze=ee(7832),Xe=ee(1001),St=ee(8655),je=ee(6895),Pe=ee(5874),Oe=ee(5361);let Ke=(()=>{class Se extends Oe.v{constructor(){super(...arguments),this.title="< building />",this.subtitle="Content under development."}}return Se.\u0275fac=function(){let Me;return function(We){return(Me||(Me=Y.n5z(Se)))(We||Se)}}(),Se.\u0275cmp=Y.Xpm({type:Se,selectors:[["jn-not-implemented-error"]],features:[Y.qOj],decls:15,vars:4,consts:[[1,"error","d-flex","flex-column","justify-content-center"],[1,"stack","text-center",2,"--stacks","3"],[2,"--index","0"],[2,"--index","1"],[2,"--index","2"],[1,"stack","text-center",2,"--stacks","1"]],template:function(Ze,We){1&Ze&&(Y.TgZ(0,"div",0)(1,"div",1)(2,"span",2)(3,"h1"),Y._uU(4),Y.qZA()(),Y.TgZ(5,"span",3)(6,"h1"),Y._uU(7),Y.qZA()(),Y.TgZ(8,"span",4)(9,"h1"),Y._uU(10),Y.qZA()()(),Y.TgZ(11,"div",5)(12,"span",2)(13,"h6"),Y._uU(14),Y.qZA()()()()),2&Ze&&(Y.xp6(4),Y.Oqu(We.title),Y.xp6(3),Y.Oqu(We.title),Y.xp6(3),Y.Oqu(We.title),Y.xp6(4),Y.Oqu(We.subtitle))},styles:[".error[_ngcontent-%COMP%]{color:var(--color)}.error[_ngcontent-%COMP%]   .stack[_ngcontent-%COMP%]{display:grid}.error[_ngcontent-%COMP%]   .stack[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{grid-row-start:1;grid-column-start:1;--stack-height: calc(100% /var(--stacks) - 1px);--inverse-index: calc(calc(var(--stacks) - 1) - var(--index));--clip-top: calc(var(--stack-height) * var(--index));--clip-bottom: calc(var(--stack-height) * var(--inverse-index));clip-path:inset(var(--clip-top) 0 var(--clip-bottom) 0);animation-name:_ngcontent-%COMP%_stack,_ngcontent-%COMP%_glitch;animation-duration:.34s,2s;animation-timing-function:cubic-bezier(.46,.29,0,1.24),ease;animation-iteration-count:1,infinite;animation-delay:calc(var(--index) * .12s),2s;animation-fill-mode:backwards,none;animation-direction:normal,alternate-reverse}.error[_ngcontent-%COMP%]   .stack[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(odd){--glitch-translate: 8px}.error[_ngcontent-%COMP%]   .stack[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(even){--glitch-translate: -8px}@keyframes _ngcontent-%COMP%_stack{0%{opacity:0;transform:translate(-50%);text-shadow:-2px 3px 0 red,2px -3px 0 blue}60%{opacity:.5;transform:translate(50%)}80%{transform:none;opacity:1;text-shadow:2px -3px 0 red,-2px 3px 0 blue}to{text-shadow:none}}@keyframes _ngcontent-%COMP%_glitch{0%{text-shadow:-2px 3px 0 red,2px -3px 0 blue;transform:translate(var(--glitch-translate))}2%{text-shadow:2px -3px 0 red,-2px 3px 0 blue}4%,to{text-shadow:none;transform:none}}"]}),Se})();var Xt=ee(2148);function et(Se,Me){1&Se&&(Y.ynx(0),Y._UZ(1,"jn-not-found-error",5),Y.BQk())}function Ct(Se,Me){1&Se&&Y._UZ(0,"jn-not-implemented-error",5)}let Je=(()=>{class Se{constructor(Ze){this.router=Ze}isNotFound(){return"/"!==this.router.routerState.snapshot.url}}return Se.\u0275fac=function(Ze){return new(Ze||Se)(Y.Y36(be.F0))},Se.\u0275cmp=Y.Xpm({type:Se,selectors:[["jn-website-page-building"]],decls:8,vars:3,consts:[[1,"position-absolute","w-100","h-100",2,"z-index","-1"],[3,"withContent"],[1,"position-absolute","w-100","h-100","d-flex","justify-content-around",2,"z-index","0"],[4,"ngIf","ngIfElse"],["notImplemented",""],[2,"display","contents"]],template:function(Ze,We){if(1&Ze&&(Y.TgZ(0,"div",0)(1,"jn-website-th",1)(2,"th-canvas"),Y._UZ(3,"jn-website-th-scene-environment"),Y.qZA()()(),Y.TgZ(4,"div",2),Y.YNc(5,et,2,0,"ng-container",3),Y.YNc(6,Ct,1,0,"ng-template",null,4,Y.W1O),Y.qZA()),2&Ze){const Pt=Y.MAs(7);Y.xp6(1),Y.Q6J("withContent",!0),Y.xp6(4),Y.Q6J("ngIf",We.isNotFound())("ngIfElse",Pt)}},dependencies:[Xe.Z,St.v,je.O5,Pe.u,Ke,Xt.lFy],encapsulation:2}),Se})();const Ot=[{path:"",pathMatch:"full",component:Je},{path:"",children:[{path:"webgl/three",loadChildren:()=>Promise.resolve().then(ee.bind(ee,6133)).then(Se=>Se.JnWebsiteThreeModule)},{path:"projects",children:[{path:"streaming",loadChildren:()=>ee.e(777).then(ee.bind(ee,1777)).then(Se=>Se.JnStreamingAppModule)}]}]},{path:"**",component:Je}];let It=(()=>{class Se{}return Se.\u0275fac=function(Ze){return new(Ze||Se)},Se.\u0275mod=Y.oAB({type:Se}),Se.\u0275inj=Y.cJS({imports:[be.Bz.forRoot(Ot,{enableTracing:!1}),be.Bz]}),Se})();var Bt=ee(6133);let pi=(()=>{class Se{}return Se.\u0275fac=function(Ze){return new(Ze||Se)},Se.\u0275mod=Y.oAB({type:Se,bootstrap:[Re]}),Se.\u0275inj=Y.cJS({imports:[It,Bt.JnWebsiteThreeModule,ze.l,a.b2,Xt.HLk]}),Se})();a.q6().bootstrapModule(pi).catch(Se=>console.error(Se))},1135:(gn,qe,ee)=>{ee.d(qe,{X:()=>Y});var a=ee(7579);class Y extends a.x{constructor(xe){super(),this._value=xe}get value(){return this.getValue()}_subscribe(xe){const Re=super._subscribe(xe);return!Re.closed&&xe.next(this._value),Re}getValue(){const{hasError:xe,thrownError:Re,_value:ze}=this;if(xe)throw Re;return this._throwIfClosed(),ze}next(xe){super.next(this._value=xe)}}},9751:(gn,qe,ee)=>{ee.d(qe,{y:()=>St});var a=ee(930),Y=ee(727),be=ee(8822),xe=ee(9635),Re=ee(2416),ze=ee(576),Xe=ee(2806);let St=(()=>{class Ke{constructor(et){et&&(this._subscribe=et)}lift(et){const Ct=new Ke;return Ct.source=this,Ct.operator=et,Ct}subscribe(et,Ct,Je){const Ot=function Oe(Ke){return Ke&&Ke instanceof a.Lv||function Pe(Ke){return Ke&&(0,ze.m)(Ke.next)&&(0,ze.m)(Ke.error)&&(0,ze.m)(Ke.complete)}(Ke)&&(0,Y.Nn)(Ke)}(et)?et:new a.Hp(et,Ct,Je);return(0,Xe.x)(()=>{const{operator:It,source:Bt}=this;Ot.add(It?It.call(Ot,Bt):Bt?this._subscribe(Ot):this._trySubscribe(Ot))}),Ot}_trySubscribe(et){try{return this._subscribe(et)}catch(Ct){et.error(Ct)}}forEach(et,Ct){return new(Ct=je(Ct))((Je,Ot)=>{const It=new a.Hp({next:Bt=>{try{et(Bt)}catch(pi){Ot(pi),It.unsubscribe()}},error:Ot,complete:Je});this.subscribe(It)})}_subscribe(et){var Ct;return null===(Ct=this.source)||void 0===Ct?void 0:Ct.subscribe(et)}[be.L](){return this}pipe(...et){return(0,xe.U)(et)(this)}toPromise(et){return new(et=je(et))((Ct,Je)=>{let Ot;this.subscribe(It=>Ot=It,It=>Je(It),()=>Ct(Ot))})}}return Ke.create=Xt=>new Ke(Xt),Ke})();function je(Ke){var Xt;return null!==(Xt=Ke??Re.v.Promise)&&void 0!==Xt?Xt:Promise}},7579:(gn,qe,ee)=>{ee.d(qe,{x:()=>Xe});var a=ee(9751),Y=ee(727);const xe=(0,ee(3888).d)(je=>function(){je(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Re=ee(8737),ze=ee(2806);let Xe=(()=>{class je extends a.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(Oe){const Ke=new St(this,this);return Ke.operator=Oe,Ke}_throwIfClosed(){if(this.closed)throw new xe}next(Oe){(0,ze.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Ke of this.currentObservers)Ke.next(Oe)}})}error(Oe){(0,ze.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=Oe;const{observers:Ke}=this;for(;Ke.length;)Ke.shift().error(Oe)}})}complete(){(0,ze.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:Oe}=this;for(;Oe.length;)Oe.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var Oe;return(null===(Oe=this.observers)||void 0===Oe?void 0:Oe.length)>0}_trySubscribe(Oe){return this._throwIfClosed(),super._trySubscribe(Oe)}_subscribe(Oe){return this._throwIfClosed(),this._checkFinalizedStatuses(Oe),this._innerSubscribe(Oe)}_innerSubscribe(Oe){const{hasError:Ke,isStopped:Xt,observers:et}=this;return Ke||Xt?Y.Lc:(this.currentObservers=null,et.push(Oe),new Y.w0(()=>{this.currentObservers=null,(0,Re.P)(et,Oe)}))}_checkFinalizedStatuses(Oe){const{hasError:Ke,thrownError:Xt,isStopped:et}=this;Ke?Oe.error(Xt):et&&Oe.complete()}asObservable(){const Oe=new a.y;return Oe.source=this,Oe}}return je.create=(Pe,Oe)=>new St(Pe,Oe),je})();class St extends Xe{constructor(Pe,Oe){super(),this.destination=Pe,this.source=Oe}next(Pe){var Oe,Ke;null===(Ke=null===(Oe=this.destination)||void 0===Oe?void 0:Oe.next)||void 0===Ke||Ke.call(Oe,Pe)}error(Pe){var Oe,Ke;null===(Ke=null===(Oe=this.destination)||void 0===Oe?void 0:Oe.error)||void 0===Ke||Ke.call(Oe,Pe)}complete(){var Pe,Oe;null===(Oe=null===(Pe=this.destination)||void 0===Pe?void 0:Pe.complete)||void 0===Oe||Oe.call(Pe)}_subscribe(Pe){var Oe,Ke;return null!==(Ke=null===(Oe=this.source)||void 0===Oe?void 0:Oe.subscribe(Pe))&&void 0!==Ke?Ke:Y.Lc}}},930:(gn,qe,ee)=>{ee.d(qe,{Hp:()=>Je,Lv:()=>Ke});var a=ee(576),Y=ee(727),be=ee(2416),xe=ee(7849),Re=ee(5032);const ze=je("C",void 0,void 0);function je(ke,Se,Me){return{kind:ke,value:Se,error:Me}}var Pe=ee(3410),Oe=ee(2806);class Ke extends Y.w0{constructor(Se){super(),this.isStopped=!1,Se?(this.destination=Se,(0,Y.Nn)(Se)&&Se.add(this)):this.destination=pi}static create(Se,Me,Ze){return new Je(Se,Me,Ze)}next(Se){this.isStopped?Bt(function St(ke){return je("N",ke,void 0)}(Se),this):this._next(Se)}error(Se){this.isStopped?Bt(function Xe(ke){return je("E",void 0,ke)}(Se),this):(this.isStopped=!0,this._error(Se))}complete(){this.isStopped?Bt(ze,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Se){this.destination.next(Se)}_error(Se){try{this.destination.error(Se)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Xt=Function.prototype.bind;function et(ke,Se){return Xt.call(ke,Se)}class Ct{constructor(Se){this.partialObserver=Se}next(Se){const{partialObserver:Me}=this;if(Me.next)try{Me.next(Se)}catch(Ze){Ot(Ze)}}error(Se){const{partialObserver:Me}=this;if(Me.error)try{Me.error(Se)}catch(Ze){Ot(Ze)}else Ot(Se)}complete(){const{partialObserver:Se}=this;if(Se.complete)try{Se.complete()}catch(Me){Ot(Me)}}}class Je extends Ke{constructor(Se,Me,Ze){let We;if(super(),(0,a.m)(Se)||!Se)We={next:Se??void 0,error:Me??void 0,complete:Ze??void 0};else{let Pt;this&&be.v.useDeprecatedNextContext?(Pt=Object.create(Se),Pt.unsubscribe=()=>this.unsubscribe(),We={next:Se.next&&et(Se.next,Pt),error:Se.error&&et(Se.error,Pt),complete:Se.complete&&et(Se.complete,Pt)}):We=Se}this.destination=new Ct(We)}}function Ot(ke){be.v.useDeprecatedSynchronousErrorHandling?(0,Oe.O)(ke):(0,xe.h)(ke)}function Bt(ke,Se){const{onStoppedNotification:Me}=be.v;Me&&Pe.z.setTimeout(()=>Me(ke,Se))}const pi={closed:!0,next:Re.Z,error:function It(ke){throw ke},complete:Re.Z}},727:(gn,qe,ee)=>{ee.d(qe,{Lc:()=>ze,w0:()=>Re,Nn:()=>Xe});var a=ee(576);const be=(0,ee(3888).d)(je=>function(Oe){je(this),this.message=Oe?`${Oe.length} errors occurred during unsubscription:\n${Oe.map((Ke,Xt)=>`${Xt+1}) ${Ke.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=Oe});var xe=ee(8737);class Re{constructor(Pe){this.initialTeardown=Pe,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let Pe;if(!this.closed){this.closed=!0;const{_parentage:Oe}=this;if(Oe)if(this._parentage=null,Array.isArray(Oe))for(const et of Oe)et.remove(this);else Oe.remove(this);const{initialTeardown:Ke}=this;if((0,a.m)(Ke))try{Ke()}catch(et){Pe=et instanceof be?et.errors:[et]}const{_finalizers:Xt}=this;if(Xt){this._finalizers=null;for(const et of Xt)try{St(et)}catch(Ct){Pe=Pe??[],Ct instanceof be?Pe=[...Pe,...Ct.errors]:Pe.push(Ct)}}if(Pe)throw new be(Pe)}}add(Pe){var Oe;if(Pe&&Pe!==this)if(this.closed)St(Pe);else{if(Pe instanceof Re){if(Pe.closed||Pe._hasParent(this))return;Pe._addParent(this)}(this._finalizers=null!==(Oe=this._finalizers)&&void 0!==Oe?Oe:[]).push(Pe)}}_hasParent(Pe){const{_parentage:Oe}=this;return Oe===Pe||Array.isArray(Oe)&&Oe.includes(Pe)}_addParent(Pe){const{_parentage:Oe}=this;this._parentage=Array.isArray(Oe)?(Oe.push(Pe),Oe):Oe?[Oe,Pe]:Pe}_removeParent(Pe){const{_parentage:Oe}=this;Oe===Pe?this._parentage=null:Array.isArray(Oe)&&(0,xe.P)(Oe,Pe)}remove(Pe){const{_finalizers:Oe}=this;Oe&&(0,xe.P)(Oe,Pe),Pe instanceof Re&&Pe._removeParent(this)}}Re.EMPTY=(()=>{const je=new Re;return je.closed=!0,je})();const ze=Re.EMPTY;function Xe(je){return je instanceof Re||je&&"closed"in je&&(0,a.m)(je.remove)&&(0,a.m)(je.add)&&(0,a.m)(je.unsubscribe)}function St(je){(0,a.m)(je)?je():je.unsubscribe()}},2416:(gn,qe,ee)=>{ee.d(qe,{v:()=>a});const a={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},9841:(gn,qe,ee)=>{ee.d(qe,{a:()=>Pe});var a=ee(9751),Y=ee(4742),be=ee(2076),xe=ee(4671),Re=ee(3268),ze=ee(3269),Xe=ee(1810),St=ee(5403),je=ee(9672);function Pe(...Xt){const et=(0,ze.yG)(Xt),Ct=(0,ze.jO)(Xt),{args:Je,keys:Ot}=(0,Y.D)(Xt);if(0===Je.length)return(0,be.D)([],et);const It=new a.y(function Oe(Xt,et,Ct=xe.y){return Je=>{Ke(et,()=>{const{length:Ot}=Xt,It=new Array(Ot);let Bt=Ot,pi=Ot;for(let ke=0;ke<Ot;ke++)Ke(et,()=>{const Se=(0,be.D)(Xt[ke],et);let Me=!1;Se.subscribe((0,St.x)(Je,Ze=>{It[ke]=Ze,Me||(Me=!0,pi--),pi||Je.next(Ct(It.slice()))},()=>{--Bt||Je.complete()}))},Je)},Je)}}(Je,et,Ot?Bt=>(0,Xe.n)(Ot,Bt):xe.y));return Ct?It.pipe((0,Re.Z)(Ct)):It}function Ke(Xt,et,Ct){Xt?(0,je.f)(Ct,Xt,et):et()}},7272:(gn,qe,ee)=>{ee.d(qe,{z:()=>Re});var a=ee(8189),be=ee(3269),xe=ee(2076);function Re(...ze){return function Y(){return(0,a.J)(1)}()((0,xe.D)(ze,(0,be.yG)(ze)))}},515:(gn,qe,ee)=>{ee.d(qe,{E:()=>Y});const Y=new(ee(9751).y)(Re=>Re.complete())},2076:(gn,qe,ee)=>{ee.d(qe,{D:()=>Ze});var a=ee(8421),Y=ee(9672),be=ee(4482),xe=ee(5403);function Re(We,Pt=0){return(0,be.e)((fn,Zt)=>{fn.subscribe((0,xe.x)(Zt,kt=>(0,Y.f)(Zt,We,()=>Zt.next(kt),Pt),()=>(0,Y.f)(Zt,We,()=>Zt.complete(),Pt),kt=>(0,Y.f)(Zt,We,()=>Zt.error(kt),Pt)))})}function ze(We,Pt=0){return(0,be.e)((fn,Zt)=>{Zt.add(We.schedule(()=>fn.subscribe(Zt),Pt))})}var je=ee(9751),Oe=ee(2202),Ke=ee(576);function et(We,Pt){if(!We)throw new Error("Iterable cannot be null");return new je.y(fn=>{(0,Y.f)(fn,Pt,()=>{const Zt=We[Symbol.asyncIterator]();(0,Y.f)(fn,Pt,()=>{Zt.next().then(kt=>{kt.done?fn.complete():fn.next(kt.value)})},0,!0)})})}var Ct=ee(3670),Je=ee(8239),Ot=ee(1144),It=ee(6495),Bt=ee(2206),pi=ee(4532),ke=ee(3260);function Ze(We,Pt){return Pt?function Me(We,Pt){if(null!=We){if((0,Ct.c)(We))return function Xe(We,Pt){return(0,a.Xf)(We).pipe(ze(Pt),Re(Pt))}(We,Pt);if((0,Ot.z)(We))return function Pe(We,Pt){return new je.y(fn=>{let Zt=0;return Pt.schedule(function(){Zt===We.length?fn.complete():(fn.next(We[Zt++]),fn.closed||this.schedule())})})}(We,Pt);if((0,Je.t)(We))return function St(We,Pt){return(0,a.Xf)(We).pipe(ze(Pt),Re(Pt))}(We,Pt);if((0,Bt.D)(We))return et(We,Pt);if((0,It.T)(We))return function Xt(We,Pt){return new je.y(fn=>{let Zt;return(0,Y.f)(fn,Pt,()=>{Zt=We[Oe.h](),(0,Y.f)(fn,Pt,()=>{let kt,ai;try{({value:kt,done:ai}=Zt.next())}catch(cn){return void fn.error(cn)}ai?fn.complete():fn.next(kt)},0,!0)}),()=>(0,Ke.m)(Zt?.return)&&Zt.return()})}(We,Pt);if((0,ke.L)(We))return function Se(We,Pt){return et((0,ke.Q)(We),Pt)}(We,Pt)}throw(0,pi.z)(We)}(We,Pt):(0,a.Xf)(We)}},8421:(gn,qe,ee)=>{ee.d(qe,{Xf:()=>Xt});var a=ee(655),Y=ee(1144),be=ee(8239),xe=ee(9751),Re=ee(3670),ze=ee(2206),Xe=ee(4532),St=ee(6495),je=ee(3260),Pe=ee(576),Oe=ee(7849),Ke=ee(8822);function Xt(ke){if(ke instanceof xe.y)return ke;if(null!=ke){if((0,Re.c)(ke))return function et(ke){return new xe.y(Se=>{const Me=ke[Ke.L]();if((0,Pe.m)(Me.subscribe))return Me.subscribe(Se);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ke);if((0,Y.z)(ke))return function Ct(ke){return new xe.y(Se=>{for(let Me=0;Me<ke.length&&!Se.closed;Me++)Se.next(ke[Me]);Se.complete()})}(ke);if((0,be.t)(ke))return function Je(ke){return new xe.y(Se=>{ke.then(Me=>{Se.closed||(Se.next(Me),Se.complete())},Me=>Se.error(Me)).then(null,Oe.h)})}(ke);if((0,ze.D)(ke))return It(ke);if((0,St.T)(ke))return function Ot(ke){return new xe.y(Se=>{for(const Me of ke)if(Se.next(Me),Se.closed)return;Se.complete()})}(ke);if((0,je.L)(ke))return function Bt(ke){return It((0,je.Q)(ke))}(ke)}throw(0,Xe.z)(ke)}function It(ke){return new xe.y(Se=>{(function pi(ke,Se){var Me,Ze,We,Pt;return(0,a.mG)(this,void 0,void 0,function*(){try{for(Me=(0,a.KL)(ke);!(Ze=yield Me.next()).done;)if(Se.next(Ze.value),Se.closed)return}catch(fn){We={error:fn}}finally{try{Ze&&!Ze.done&&(Pt=Me.return)&&(yield Pt.call(Me))}finally{if(We)throw We.error}}Se.complete()})})(ke,Se).catch(Me=>Se.error(Me))})}},6451:(gn,qe,ee)=>{ee.d(qe,{T:()=>ze});var a=ee(8189),Y=ee(8421),be=ee(515),xe=ee(3269),Re=ee(2076);function ze(...Xe){const St=(0,xe.yG)(Xe),je=(0,xe._6)(Xe,1/0),Pe=Xe;return Pe.length?1===Pe.length?(0,Y.Xf)(Pe[0]):(0,a.J)(je)((0,Re.D)(Pe,St)):be.E}},9646:(gn,qe,ee)=>{ee.d(qe,{of:()=>be});var a=ee(3269),Y=ee(2076);function be(...xe){const Re=(0,a.yG)(xe);return(0,Y.D)(xe,Re)}},5403:(gn,qe,ee)=>{ee.d(qe,{x:()=>Y});var a=ee(930);function Y(xe,Re,ze,Xe,St){return new be(xe,Re,ze,Xe,St)}class be extends a.Lv{constructor(Re,ze,Xe,St,je,Pe){super(Re),this.onFinalize=je,this.shouldUnsubscribe=Pe,this._next=ze?function(Oe){try{ze(Oe)}catch(Ke){Re.error(Ke)}}:super._next,this._error=St?function(Oe){try{St(Oe)}catch(Ke){Re.error(Ke)}finally{this.unsubscribe()}}:super._error,this._complete=Xe?function(){try{Xe()}catch(Oe){Re.error(Oe)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var Re;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ze}=this;super.unsubscribe(),!ze&&(null===(Re=this.onFinalize)||void 0===Re||Re.call(this))}}}},9300:(gn,qe,ee)=>{ee.d(qe,{h:()=>be});var a=ee(4482),Y=ee(5403);function be(xe,Re){return(0,a.e)((ze,Xe)=>{let St=0;ze.subscribe((0,Y.x)(Xe,je=>xe.call(Re,je,St++)&&Xe.next(je)))})}},4004:(gn,qe,ee)=>{ee.d(qe,{U:()=>be});var a=ee(4482),Y=ee(5403);function be(xe,Re){return(0,a.e)((ze,Xe)=>{let St=0;ze.subscribe((0,Y.x)(Xe,je=>{Xe.next(xe.call(Re,je,St++))}))})}},9718:(gn,qe,ee)=>{ee.d(qe,{h:()=>Y});var a=ee(4004);function Y(be){return(0,a.U)(()=>be)}},8189:(gn,qe,ee)=>{ee.d(qe,{J:()=>be});var a=ee(5577),Y=ee(4671);function be(xe=1/0){return(0,a.z)(Y.y,xe)}},5577:(gn,qe,ee)=>{ee.d(qe,{z:()=>St});var a=ee(4004),Y=ee(8421),be=ee(4482),xe=ee(9672),Re=ee(5403),Xe=ee(576);function St(je,Pe,Oe=1/0){return(0,Xe.m)(Pe)?St((Ke,Xt)=>(0,a.U)((et,Ct)=>Pe(Ke,et,Xt,Ct))((0,Y.Xf)(je(Ke,Xt))),Oe):("number"==typeof Pe&&(Oe=Pe),(0,be.e)((Ke,Xt)=>function ze(je,Pe,Oe,Ke,Xt,et,Ct,Je){const Ot=[];let It=0,Bt=0,pi=!1;const ke=()=>{pi&&!Ot.length&&!It&&Pe.complete()},Se=Ze=>It<Ke?Me(Ze):Ot.push(Ze),Me=Ze=>{et&&Pe.next(Ze),It++;let We=!1;(0,Y.Xf)(Oe(Ze,Bt++)).subscribe((0,Re.x)(Pe,Pt=>{Xt?.(Pt),et?Se(Pt):Pe.next(Pt)},()=>{We=!0},void 0,()=>{if(We)try{for(It--;Ot.length&&It<Ke;){const Pt=Ot.shift();Ct?(0,xe.f)(Pe,Ct,()=>Me(Pt)):Me(Pt)}ke()}catch(Pt){Pe.error(Pt)}}))};return je.subscribe((0,Re.x)(Pe,Se,()=>{pi=!0,ke()})),()=>{Je?.()}}(Ke,Xt,je,Oe)))}},8675:(gn,qe,ee)=>{ee.d(qe,{O:()=>xe});var a=ee(7272),Y=ee(3269),be=ee(4482);function xe(...Re){const ze=(0,Y.yG)(Re);return(0,be.e)((Xe,St)=>{(ze?(0,a.z)(Re,Xe,ze):(0,a.z)(Re,Xe)).subscribe(St)})}},3900:(gn,qe,ee)=>{ee.d(qe,{w:()=>xe});var a=ee(8421),Y=ee(4482),be=ee(5403);function xe(Re,ze){return(0,Y.e)((Xe,St)=>{let je=null,Pe=0,Oe=!1;const Ke=()=>Oe&&!je&&St.complete();Xe.subscribe((0,be.x)(St,Xt=>{je?.unsubscribe();let et=0;const Ct=Pe++;(0,a.Xf)(Re(Xt,Ct)).subscribe(je=(0,be.x)(St,Je=>St.next(ze?ze(Xt,Je,Ct,et++):Je),()=>{je=null,Ke()}))},()=>{Oe=!0,Ke()}))})}},5698:(gn,qe,ee)=>{ee.d(qe,{q:()=>xe});var a=ee(515),Y=ee(4482),be=ee(5403);function xe(Re){return Re<=0?()=>a.E:(0,Y.e)((ze,Xe)=>{let St=0;ze.subscribe((0,be.x)(Xe,je=>{++St<=Re&&(Xe.next(je),Re<=St&&Xe.complete())}))})}},2722:(gn,qe,ee)=>{ee.d(qe,{R:()=>Re});var a=ee(4482),Y=ee(5403),be=ee(8421),xe=ee(5032);function Re(ze){return(0,a.e)((Xe,St)=>{(0,be.Xf)(ze).subscribe((0,Y.x)(St,()=>St.complete(),xe.Z)),!St.closed&&Xe.subscribe(St)})}},8505:(gn,qe,ee)=>{ee.d(qe,{b:()=>Re});var a=ee(576),Y=ee(4482),be=ee(5403),xe=ee(4671);function Re(ze,Xe,St){const je=(0,a.m)(ze)||Xe||St?{next:ze,error:Xe,complete:St}:ze;return je?(0,Y.e)((Pe,Oe)=>{var Ke;null===(Ke=je.subscribe)||void 0===Ke||Ke.call(je);let Xt=!0;Pe.subscribe((0,be.x)(Oe,et=>{var Ct;null===(Ct=je.next)||void 0===Ct||Ct.call(je,et),Oe.next(et)},()=>{var et;Xt=!1,null===(et=je.complete)||void 0===et||et.call(je),Oe.complete()},et=>{var Ct;Xt=!1,null===(Ct=je.error)||void 0===Ct||Ct.call(je,et),Oe.error(et)},()=>{var et,Ct;Xt&&(null===(et=je.unsubscribe)||void 0===et||et.call(je)),null===(Ct=je.finalize)||void 0===Ct||Ct.call(je)}))}):xe.y}},6063:(gn,qe,ee)=>{ee.d(qe,{l:()=>a});const a={now:()=>(a.delegate||Date).now(),delegate:void 0}},3410:(gn,qe,ee)=>{ee.d(qe,{z:()=>a});const a={setTimeout(Y,be,...xe){const{delegate:Re}=a;return Re?.setTimeout?Re.setTimeout(Y,be,...xe):setTimeout(Y,be,...xe)},clearTimeout(Y){const{delegate:be}=a;return(be?.clearTimeout||clearTimeout)(Y)},delegate:void 0}},2202:(gn,qe,ee)=>{ee.d(qe,{h:()=>Y});const Y=function a(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(gn,qe,ee)=>{ee.d(qe,{L:()=>a});const a="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(gn,qe,ee)=>{ee.d(qe,{_6:()=>ze,jO:()=>xe,yG:()=>Re});var a=ee(576),Y=ee(3532);function be(Xe){return Xe[Xe.length-1]}function xe(Xe){return(0,a.m)(be(Xe))?Xe.pop():void 0}function Re(Xe){return(0,Y.K)(be(Xe))?Xe.pop():void 0}function ze(Xe,St){return"number"==typeof be(Xe)?Xe.pop():St}},4742:(gn,qe,ee)=>{ee.d(qe,{D:()=>Re});const{isArray:a}=Array,{getPrototypeOf:Y,prototype:be,keys:xe}=Object;function Re(Xe){if(1===Xe.length){const St=Xe[0];if(a(St))return{args:St,keys:null};if(function ze(Xe){return Xe&&"object"==typeof Xe&&Y(Xe)===be}(St)){const je=xe(St);return{args:je.map(Pe=>St[Pe]),keys:je}}}return{args:Xe,keys:null}}},8737:(gn,qe,ee)=>{function a(Y,be){if(Y){const xe=Y.indexOf(be);0<=xe&&Y.splice(xe,1)}}ee.d(qe,{P:()=>a})},3888:(gn,qe,ee)=>{function a(Y){const xe=Y(Re=>{Error.call(Re),Re.stack=(new Error).stack});return xe.prototype=Object.create(Error.prototype),xe.prototype.constructor=xe,xe}ee.d(qe,{d:()=>a})},1810:(gn,qe,ee)=>{function a(Y,be){return Y.reduce((xe,Re,ze)=>(xe[Re]=be[ze],xe),{})}ee.d(qe,{n:()=>a})},2806:(gn,qe,ee)=>{ee.d(qe,{O:()=>xe,x:()=>be});var a=ee(2416);let Y=null;function be(Re){if(a.v.useDeprecatedSynchronousErrorHandling){const ze=!Y;if(ze&&(Y={errorThrown:!1,error:null}),Re(),ze){const{errorThrown:Xe,error:St}=Y;if(Y=null,Xe)throw St}}else Re()}function xe(Re){a.v.useDeprecatedSynchronousErrorHandling&&Y&&(Y.errorThrown=!0,Y.error=Re)}},9672:(gn,qe,ee)=>{function a(Y,be,xe,Re=0,ze=!1){const Xe=be.schedule(function(){xe(),ze?Y.add(this.schedule(null,Re)):this.unsubscribe()},Re);if(Y.add(Xe),!ze)return Xe}ee.d(qe,{f:()=>a})},4671:(gn,qe,ee)=>{function a(Y){return Y}ee.d(qe,{y:()=>a})},1144:(gn,qe,ee)=>{ee.d(qe,{z:()=>a});const a=Y=>Y&&"number"==typeof Y.length&&"function"!=typeof Y},2206:(gn,qe,ee)=>{ee.d(qe,{D:()=>Y});var a=ee(576);function Y(be){return Symbol.asyncIterator&&(0,a.m)(be?.[Symbol.asyncIterator])}},576:(gn,qe,ee)=>{function a(Y){return"function"==typeof Y}ee.d(qe,{m:()=>a})},3670:(gn,qe,ee)=>{ee.d(qe,{c:()=>be});var a=ee(8822),Y=ee(576);function be(xe){return(0,Y.m)(xe[a.L])}},6495:(gn,qe,ee)=>{ee.d(qe,{T:()=>be});var a=ee(2202),Y=ee(576);function be(xe){return(0,Y.m)(xe?.[a.h])}},8239:(gn,qe,ee)=>{ee.d(qe,{t:()=>Y});var a=ee(576);function Y(be){return(0,a.m)(be?.then)}},3260:(gn,qe,ee)=>{ee.d(qe,{L:()=>xe,Q:()=>be});var a=ee(655),Y=ee(576);function be(Re){return(0,a.FC)(this,arguments,function*(){const Xe=Re.getReader();try{for(;;){const{value:St,done:je}=yield(0,a.qq)(Xe.read());if(je)return yield(0,a.qq)(void 0);yield yield(0,a.qq)(St)}}finally{Xe.releaseLock()}})}function xe(Re){return(0,Y.m)(Re?.getReader)}},3532:(gn,qe,ee)=>{ee.d(qe,{K:()=>Y});var a=ee(576);function Y(be){return be&&(0,a.m)(be.schedule)}},4482:(gn,qe,ee)=>{ee.d(qe,{A:()=>Y,e:()=>be});var a=ee(576);function Y(xe){return(0,a.m)(xe?.lift)}function be(xe){return Re=>{if(Y(Re))return Re.lift(function(ze){try{return xe(ze,this)}catch(Xe){this.error(Xe)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(gn,qe,ee)=>{ee.d(qe,{Z:()=>xe});var a=ee(4004);const{isArray:Y}=Array;function xe(Re){return(0,a.U)(ze=>function be(Re,ze){return Y(ze)?Re(...ze):Re(ze)}(Re,ze))}},5032:(gn,qe,ee)=>{function a(){}ee.d(qe,{Z:()=>a})},9635:(gn,qe,ee)=>{ee.d(qe,{U:()=>be,z:()=>Y});var a=ee(4671);function Y(...xe){return be(xe)}function be(xe){return 0===xe.length?a.y:1===xe.length?xe[0]:function(ze){return xe.reduce((Xe,St)=>St(Xe),ze)}}},7849:(gn,qe,ee)=>{ee.d(qe,{h:()=>be});var a=ee(2416),Y=ee(3410);function be(xe){Y.z.setTimeout(()=>{const{onUnhandledError:Re}=a.v;if(!Re)throw xe;Re(xe)})}},4532:(gn,qe,ee)=>{function a(Y){return new TypeError(`You provided ${null!==Y&&"object"==typeof Y?"an invalid object":`'${Y}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}ee.d(qe,{z:()=>a})},655:(gn,qe,ee)=>{function Ke(Ce,Ge,tt,Qe){return new(tt||(tt=Promise))(function(wt,mn){function Jn(In){try{Cn(Qe.next(In))}catch(sn){mn(sn)}}function Yi(In){try{Cn(Qe.throw(In))}catch(sn){mn(sn)}}function Cn(In){In.done?wt(In.value):function Et(wt){return wt instanceof tt?wt:new tt(function(mn){mn(wt)})}(In.value).then(Jn,Yi)}Cn((Qe=Qe.apply(Ce,Ge||[])).next())})}function ke(Ce){return this instanceof ke?(this.v=Ce,this):new ke(Ce)}function Se(Ce,Ge,tt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Et,Qe=tt.apply(Ce,Ge||[]),wt=[];return Et={},mn("next"),mn("throw"),mn("return"),Et[Symbol.asyncIterator]=function(){return this},Et;function mn(Ii){Qe[Ii]&&(Et[Ii]=function(Kr){return new Promise(function(Sn,Mn){wt.push([Ii,Kr,Sn,Mn])>1||Jn(Ii,Kr)})})}function Jn(Ii,Kr){try{!function Yi(Ii){Ii.value instanceof ke?Promise.resolve(Ii.value.v).then(Cn,In):sn(wt[0][2],Ii)}(Qe[Ii](Kr))}catch(Sn){sn(wt[0][3],Sn)}}function Cn(Ii){Jn("next",Ii)}function In(Ii){Jn("throw",Ii)}function sn(Ii,Kr){Ii(Kr),wt.shift(),wt.length&&Jn(wt[0][0],wt[0][1])}}function Ze(Ce){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var tt,Ge=Ce[Symbol.asyncIterator];return Ge?Ge.call(Ce):(Ce=function Je(Ce){var Ge="function"==typeof Symbol&&Symbol.iterator,tt=Ge&&Ce[Ge],Qe=0;if(tt)return tt.call(Ce);if(Ce&&"number"==typeof Ce.length)return{next:function(){return Ce&&Qe>=Ce.length&&(Ce=void 0),{value:Ce&&Ce[Qe++],done:!Ce}}};throw new TypeError(Ge?"Object is not iterable.":"Symbol.iterator is not defined.")}(Ce),tt={},Qe("next"),Qe("throw"),Qe("return"),tt[Symbol.asyncIterator]=function(){return this},tt);function Qe(wt){tt[wt]=Ce[wt]&&function(mn){return new Promise(function(Jn,Yi){!function Et(wt,mn,Jn,Yi){Promise.resolve(Yi).then(function(Cn){wt({value:Cn,done:Jn})},mn)}(Jn,Yi,(mn=Ce[wt](mn)).done,mn.value)})}}}ee.d(qe,{FC:()=>Se,KL:()=>Ze,mG:()=>Ke,qq:()=>ke})},6895:(gn,qe,ee)=>{ee.d(qe,{Do:()=>Bt,EM:()=>Vo,HT:()=>xe,JF:()=>oa,K0:()=>ze,Mn:()=>Qe,Mx:()=>Oi,NF:()=>kd,O5:()=>Rr,S$:()=>Je,Tn:()=>kt,UT:()=>Et,V_:()=>je,Ye:()=>pi,Zx:()=>sa,ax:()=>On,b0:()=>It,bD:()=>za,ez:()=>Bd,ol:()=>tt,p6:()=>hr,q:()=>be,tP:()=>Nr,w_:()=>Re,x:()=>Zt});var a=ee(1571);let Y=null;function be(){return Y}function xe(O){Y||(Y=O)}class Re{}const ze=new a.OlP("DocumentToken");let Xe=(()=>{class O{historyGo(B){throw new Error("Not implemented")}}return O.\u0275fac=function(B){return new(B||O)},O.\u0275prov=a.Yz7({token:O,factory:function(){return function St(){return(0,a.LFG)(Pe)}()},providedIn:"platform"}),O})();const je=new a.OlP("Location Initialized");let Pe=(()=>{class O extends Xe{constructor(B){super(),this._doc=B,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return be().getBaseHref(this._doc)}onPopState(B){const Q=be().getGlobalEventTarget(this._doc,"window");return Q.addEventListener("popstate",B,!1),()=>Q.removeEventListener("popstate",B)}onHashChange(B){const Q=be().getGlobalEventTarget(this._doc,"window");return Q.addEventListener("hashchange",B,!1),()=>Q.removeEventListener("hashchange",B)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(B){this._location.pathname=B}pushState(B,Q,ue){Oe()?this._history.pushState(B,Q,ue):this._location.hash=ue}replaceState(B,Q,ue){Oe()?this._history.replaceState(B,Q,ue):this._location.hash=ue}forward(){this._history.forward()}back(){this._history.back()}historyGo(B=0){this._history.go(B)}getState(){return this._history.state}}return O.\u0275fac=function(B){return new(B||O)(a.LFG(ze))},O.\u0275prov=a.Yz7({token:O,factory:function(){return function Ke(){return new Pe((0,a.LFG)(ze))}()},providedIn:"platform"}),O})();function Oe(){return!!window.history.pushState}function Xt(O,W){if(0==O.length)return W;if(0==W.length)return O;let B=0;return O.endsWith("/")&&B++,W.startsWith("/")&&B++,2==B?O+W.substring(1):1==B?O+W:O+"/"+W}function et(O){const W=O.match(/#|\?|$/),B=W&&W.index||O.length;return O.slice(0,B-("/"===O[B-1]?1:0))+O.slice(B)}function Ct(O){return O&&"?"!==O[0]?"?"+O:O}let Je=(()=>{class O{historyGo(B){throw new Error("Not implemented")}}return O.\u0275fac=function(B){return new(B||O)},O.\u0275prov=a.Yz7({token:O,factory:function(){return(0,a.f3M)(It)},providedIn:"root"}),O})();const Ot=new a.OlP("appBaseHref");let It=(()=>{class O extends Je{constructor(B,Q){super(),this._platformLocation=B,this._removeListenerFns=[],this._baseHref=Q??this._platformLocation.getBaseHrefFromDOM()??(0,a.f3M)(ze).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(B){this._removeListenerFns.push(this._platformLocation.onPopState(B),this._platformLocation.onHashChange(B))}getBaseHref(){return this._baseHref}prepareExternalUrl(B){return Xt(this._baseHref,B)}path(B=!1){const Q=this._platformLocation.pathname+Ct(this._platformLocation.search),ue=this._platformLocation.hash;return ue&&B?`${Q}${ue}`:Q}pushState(B,Q,ue,Be){const st=this.prepareExternalUrl(ue+Ct(Be));this._platformLocation.pushState(B,Q,st)}replaceState(B,Q,ue,Be){const st=this.prepareExternalUrl(ue+Ct(Be));this._platformLocation.replaceState(B,Q,st)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(B=0){this._platformLocation.historyGo?.(B)}}return O.\u0275fac=function(B){return new(B||O)(a.LFG(Xe),a.LFG(Ot,8))},O.\u0275prov=a.Yz7({token:O,factory:O.\u0275fac,providedIn:"root"}),O})(),Bt=(()=>{class O extends Je{constructor(B,Q){super(),this._platformLocation=B,this._baseHref="",this._removeListenerFns=[],null!=Q&&(this._baseHref=Q)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(B){this._removeListenerFns.push(this._platformLocation.onPopState(B),this._platformLocation.onHashChange(B))}getBaseHref(){return this._baseHref}path(B=!1){let Q=this._platformLocation.hash;return null==Q&&(Q="#"),Q.length>0?Q.substring(1):Q}prepareExternalUrl(B){const Q=Xt(this._baseHref,B);return Q.length>0?"#"+Q:Q}pushState(B,Q,ue,Be){let st=this.prepareExternalUrl(ue+Ct(Be));0==st.length&&(st=this._platformLocation.pathname),this._platformLocation.pushState(B,Q,st)}replaceState(B,Q,ue,Be){let st=this.prepareExternalUrl(ue+Ct(Be));0==st.length&&(st=this._platformLocation.pathname),this._platformLocation.replaceState(B,Q,st)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(B=0){this._platformLocation.historyGo?.(B)}}return O.\u0275fac=function(B){return new(B||O)(a.LFG(Xe),a.LFG(Ot,8))},O.\u0275prov=a.Yz7({token:O,factory:O.\u0275fac}),O})(),pi=(()=>{class O{constructor(B){this._subject=new a.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=B;const Q=this._locationStrategy.getBaseHref();this._basePath=function Ze(O){if(new RegExp("^(https?:)?//").test(O)){const[,B]=O.split(/\/\/[^\/]+/);return B}return O}(et(Me(Q))),this._locationStrategy.onPopState(ue=>{this._subject.emit({url:this.path(!0),pop:!0,state:ue.state,type:ue.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(B=!1){return this.normalize(this._locationStrategy.path(B))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(B,Q=""){return this.path()==this.normalize(B+Ct(Q))}normalize(B){return O.stripTrailingSlash(function Se(O,W){if(!O||!W.startsWith(O))return W;const B=W.substring(O.length);return""===B||["/",";","?","#"].includes(B[0])?B:W}(this._basePath,Me(B)))}prepareExternalUrl(B){return B&&"/"!==B[0]&&(B="/"+B),this._locationStrategy.prepareExternalUrl(B)}go(B,Q="",ue=null){this._locationStrategy.pushState(ue,"",B,Q),this._notifyUrlChangeListeners(this.prepareExternalUrl(B+Ct(Q)),ue)}replaceState(B,Q="",ue=null){this._locationStrategy.replaceState(ue,"",B,Q),this._notifyUrlChangeListeners(this.prepareExternalUrl(B+Ct(Q)),ue)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(B=0){this._locationStrategy.historyGo?.(B)}onUrlChange(B){return this._urlChangeListeners.push(B),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(Q=>{this._notifyUrlChangeListeners(Q.url,Q.state)})),()=>{const Q=this._urlChangeListeners.indexOf(B);this._urlChangeListeners.splice(Q,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(B="",Q){this._urlChangeListeners.forEach(ue=>ue(B,Q))}subscribe(B,Q,ue){return this._subject.subscribe({next:B,error:Q,complete:ue})}}return O.normalizeQueryParams=Ct,O.joinWithSlash=Xt,O.stripTrailingSlash=et,O.\u0275fac=function(B){return new(B||O)(a.LFG(Je))},O.\u0275prov=a.Yz7({token:O,factory:function(){return function ke(){return new pi((0,a.LFG)(Je))}()},providedIn:"root"}),O})();function Me(O){return O.replace(/\/index.html$/,"")}var Pt=(()=>((Pt=Pt||{})[Pt.Decimal=0]="Decimal",Pt[Pt.Percent=1]="Percent",Pt[Pt.Currency=2]="Currency",Pt[Pt.Scientific=3]="Scientific",Pt))(),Zt=(()=>((Zt=Zt||{})[Zt.Format=0]="Format",Zt[Zt.Standalone=1]="Standalone",Zt))(),kt=(()=>((kt=kt||{})[kt.Narrow=0]="Narrow",kt[kt.Abbreviated=1]="Abbreviated",kt[kt.Wide=2]="Wide",kt[kt.Short=3]="Short",kt))(),ai=(()=>((ai=ai||{})[ai.Short=0]="Short",ai[ai.Medium=1]="Medium",ai[ai.Long=2]="Long",ai[ai.Full=3]="Full",ai))(),cn=(()=>((cn=cn||{})[cn.Decimal=0]="Decimal",cn[cn.Group=1]="Group",cn[cn.List=2]="List",cn[cn.PercentSign=3]="PercentSign",cn[cn.PlusSign=4]="PlusSign",cn[cn.MinusSign=5]="MinusSign",cn[cn.Exponential=6]="Exponential",cn[cn.SuperscriptingExponent=7]="SuperscriptingExponent",cn[cn.PerMille=8]="PerMille",cn[cn.Infinity=9]="Infinity",cn[cn.NaN=10]="NaN",cn[cn.TimeSeparator=11]="TimeSeparator",cn[cn.CurrencyDecimal=12]="CurrencyDecimal",cn[cn.CurrencyGroup=13]="CurrencyGroup",cn))();function tt(O,W,B){const Q=(0,a.cg1)(O),Be=Pr([Q[a.wAp.DayPeriodsFormat],Q[a.wAp.DayPeriodsStandalone]],W);return Pr(Be,B)}function Qe(O,W,B){const Q=(0,a.cg1)(O),Be=Pr([Q[a.wAp.DaysFormat],Q[a.wAp.DaysStandalone]],W);return Pr(Be,B)}function Et(O,W,B){const Q=(0,a.cg1)(O),Be=Pr([Q[a.wAp.MonthsFormat],Q[a.wAp.MonthsStandalone]],W);return Pr(Be,B)}function Yi(O,W){return Pr((0,a.cg1)(O)[a.wAp.DateFormat],W)}function Cn(O,W){return Pr((0,a.cg1)(O)[a.wAp.TimeFormat],W)}function In(O,W){return Pr((0,a.cg1)(O)[a.wAp.DateTimeFormat],W)}function sn(O,W){const B=(0,a.cg1)(O),Q=B[a.wAp.NumberSymbols][W];if(typeof Q>"u"){if(W===cn.CurrencyDecimal)return B[a.wAp.NumberSymbols][cn.Decimal];if(W===cn.CurrencyGroup)return B[a.wAp.NumberSymbols][cn.Group]}return Q}function lr(O){if(!O[a.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${O[a.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Pr(O,W){for(let B=W;B>-1;B--)if(typeof O[B]<"u")return O[B];throw new Error("Locale data API: locale data undefined")}function jo(O){const[W,B]=O.split(":");return{hours:+W,minutes:+B}}const _o=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,xn={},Us=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var ki=(()=>((ki=ki||{})[ki.Short=0]="Short",ki[ki.ShortGMT=1]="ShortGMT",ki[ki.Long=2]="Long",ki[ki.Extended=3]="Extended",ki))(),Gt=(()=>((Gt=Gt||{})[Gt.FullYear=0]="FullYear",Gt[Gt.Month=1]="Month",Gt[Gt.Date=2]="Date",Gt[Gt.Hours=3]="Hours",Gt[Gt.Minutes=4]="Minutes",Gt[Gt.Seconds=5]="Seconds",Gt[Gt.FractionalSeconds=6]="FractionalSeconds",Gt[Gt.Day=7]="Day",Gt))(),ut=(()=>((ut=ut||{})[ut.DayPeriods=0]="DayPeriods",ut[ut.Days=1]="Days",ut[ut.Months=2]="Months",ut[ut.Eras=3]="Eras",ut))();function hr(O,W,B,Q){let ue=function hl(O){if(Ne(O))return O;if("number"==typeof O&&!isNaN(O))return new Date(O);if("string"==typeof O){if(O=O.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(O)){const[ue,Be=1,st=1]=O.split("-").map(un=>+un);return Gi(ue,Be-1,st)}const B=parseFloat(O);if(!isNaN(O-B))return new Date(B);let Q;if(Q=O.match(_o))return function hs(O){const W=new Date(0);let B=0,Q=0;const ue=O[8]?W.setUTCFullYear:W.setFullYear,Be=O[8]?W.setUTCHours:W.setHours;O[9]&&(B=Number(O[9]+O[10]),Q=Number(O[9]+O[11])),ue.call(W,Number(O[1]),Number(O[2])-1,Number(O[3]));const st=Number(O[4]||0)-B,un=Number(O[5]||0)-Q,li=Number(O[6]||0),Vt=Math.floor(1e3*parseFloat("0."+(O[7]||0)));return Be.call(W,st,un,li,Vt),W}(Q)}const W=new Date(O);if(!Ne(W))throw new Error(`Unable to convert "${O}" into a date`);return W}(O);W=Is(B,W)||W;let un,st=[];for(;W;){if(un=Us.exec(W),!un){st.push(W);break}{st=st.concat(un.slice(1));const Vn=st.pop();if(!Vn)break;W=Vn}}let li=ue.getTimezoneOffset();Q&&(li=ia(Q,li),ue=function dl(O,W,B){const Q=B?-1:1,ue=O.getTimezoneOffset();return function xs(O,W){return(O=new Date(O.getTime())).setMinutes(O.getMinutes()+W),O}(O,Q*(ia(W,ue)-ue))}(ue,Q,!0));let Vt="";return st.forEach(Vn=>{const Ln=function na(O){if(Xr[O])return Xr[O];let W;switch(O){case"G":case"GG":case"GGG":W=Zn(ut.Eras,kt.Abbreviated);break;case"GGGG":W=Zn(ut.Eras,kt.Wide);break;case"GGGGG":W=Zn(ut.Eras,kt.Narrow);break;case"y":W=Un(Gt.FullYear,1,0,!1,!0);break;case"yy":W=Un(Gt.FullYear,2,0,!0,!0);break;case"yyy":W=Un(Gt.FullYear,3,0,!1,!0);break;case"yyyy":W=Un(Gt.FullYear,4,0,!1,!0);break;case"Y":W=Ti(1);break;case"YY":W=Ti(2,!0);break;case"YYY":W=Ti(3);break;case"YYYY":W=Ti(4);break;case"M":case"L":W=Un(Gt.Month,1,1);break;case"MM":case"LL":W=Un(Gt.Month,2,1);break;case"MMM":W=Zn(ut.Months,kt.Abbreviated);break;case"MMMM":W=Zn(ut.Months,kt.Wide);break;case"MMMMM":W=Zn(ut.Months,kt.Narrow);break;case"LLL":W=Zn(ut.Months,kt.Abbreviated,Zt.Standalone);break;case"LLLL":W=Zn(ut.Months,kt.Wide,Zt.Standalone);break;case"LLLLL":W=Zn(ut.Months,kt.Narrow,Zt.Standalone);break;case"w":W=Si(1);break;case"ww":W=Si(2);break;case"W":W=Si(1,!0);break;case"d":W=Un(Gt.Date,1);break;case"dd":W=Un(Gt.Date,2);break;case"c":case"cc":W=Un(Gt.Day,1);break;case"ccc":W=Zn(ut.Days,kt.Abbreviated,Zt.Standalone);break;case"cccc":W=Zn(ut.Days,kt.Wide,Zt.Standalone);break;case"ccccc":W=Zn(ut.Days,kt.Narrow,Zt.Standalone);break;case"cccccc":W=Zn(ut.Days,kt.Short,Zt.Standalone);break;case"E":case"EE":case"EEE":W=Zn(ut.Days,kt.Abbreviated);break;case"EEEE":W=Zn(ut.Days,kt.Wide);break;case"EEEEE":W=Zn(ut.Days,kt.Narrow);break;case"EEEEEE":W=Zn(ut.Days,kt.Short);break;case"a":case"aa":case"aaa":W=Zn(ut.DayPeriods,kt.Abbreviated);break;case"aaaa":W=Zn(ut.DayPeriods,kt.Wide);break;case"aaaaa":W=Zn(ut.DayPeriods,kt.Narrow);break;case"b":case"bb":case"bbb":W=Zn(ut.DayPeriods,kt.Abbreviated,Zt.Standalone,!0);break;case"bbbb":W=Zn(ut.DayPeriods,kt.Wide,Zt.Standalone,!0);break;case"bbbbb":W=Zn(ut.DayPeriods,kt.Narrow,Zt.Standalone,!0);break;case"B":case"BB":case"BBB":W=Zn(ut.DayPeriods,kt.Abbreviated,Zt.Format,!0);break;case"BBBB":W=Zn(ut.DayPeriods,kt.Wide,Zt.Format,!0);break;case"BBBBB":W=Zn(ut.DayPeriods,kt.Narrow,Zt.Format,!0);break;case"h":W=Un(Gt.Hours,1,-12);break;case"hh":W=Un(Gt.Hours,2,-12);break;case"H":W=Un(Gt.Hours,1);break;case"HH":W=Un(Gt.Hours,2);break;case"m":W=Un(Gt.Minutes,1);break;case"mm":W=Un(Gt.Minutes,2);break;case"s":W=Un(Gt.Seconds,1);break;case"ss":W=Un(Gt.Seconds,2);break;case"S":W=Un(Gt.FractionalSeconds,1);break;case"SS":W=Un(Gt.FractionalSeconds,2);break;case"SSS":W=Un(Gt.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":W=ls(ki.Short);break;case"ZZZZZ":W=ls(ki.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":W=ls(ki.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":W=ls(ki.Long);break;default:return null}return Xr[O]=W,W}(Vn);Vt+=Ln?Ln(ue,B,li):"''"===Vn?"'":Vn.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),Vt}function Gi(O,W,B){const Q=new Date(0);return Q.setFullYear(O,W,B),Q.setHours(0,0,0),Q}function Is(O,W){const B=function Ge(O){return(0,a.cg1)(O)[a.wAp.LocaleId]}(O);if(xn[B]=xn[B]||{},xn[B][W])return xn[B][W];let Q="";switch(W){case"shortDate":Q=Yi(O,ai.Short);break;case"mediumDate":Q=Yi(O,ai.Medium);break;case"longDate":Q=Yi(O,ai.Long);break;case"fullDate":Q=Yi(O,ai.Full);break;case"shortTime":Q=Cn(O,ai.Short);break;case"mediumTime":Q=Cn(O,ai.Medium);break;case"longTime":Q=Cn(O,ai.Long);break;case"fullTime":Q=Cn(O,ai.Full);break;case"short":const ue=Is(O,"shortTime"),Be=Is(O,"shortDate");Q=Ps(In(O,ai.Short),[ue,Be]);break;case"medium":const st=Is(O,"mediumTime"),un=Is(O,"mediumDate");Q=Ps(In(O,ai.Medium),[st,un]);break;case"long":const li=Is(O,"longTime"),Vt=Is(O,"longDate");Q=Ps(In(O,ai.Long),[li,Vt]);break;case"full":const Vn=Is(O,"fullTime"),Ln=Is(O,"fullDate");Q=Ps(In(O,ai.Full),[Vn,Ln])}return Q&&(xn[B][W]=Q),Q}function Ps(O,W){return W&&(O=O.replace(/\{([^}]+)}/g,function(B,Q){return null!=W&&Q in W?W[Q]:B})),O}function Dr(O,W,B="-",Q,ue){let Be="";(O<0||ue&&O<=0)&&(ue?O=1-O:(O=-O,Be=B));let st=String(O);for(;st.length<W;)st="0"+st;return Q&&(st=st.slice(st.length-W)),Be+st}function Un(O,W,B=0,Q=!1,ue=!1){return function(Be,st){let un=function ka(O,W){switch(O){case Gt.FullYear:return W.getFullYear();case Gt.Month:return W.getMonth();case Gt.Date:return W.getDate();case Gt.Hours:return W.getHours();case Gt.Minutes:return W.getMinutes();case Gt.Seconds:return W.getSeconds();case Gt.FractionalSeconds:return W.getMilliseconds();case Gt.Day:return W.getDay();default:throw new Error(`Unknown DateType value "${O}".`)}}(O,Be);if((B>0||un>-B)&&(un+=B),O===Gt.Hours)0===un&&-12===B&&(un=12);else if(O===Gt.FractionalSeconds)return function zt(O,W){return Dr(O,3).substring(0,W)}(un,W);const li=sn(st,cn.MinusSign);return Dr(un,W,li,Q,ue)}}function Zn(O,W,B=Zt.Format,Q=!1){return function(ue,Be){return function Kc(O,W,B,Q,ue,Be){switch(B){case ut.Months:return Et(W,ue,Q)[O.getMonth()];case ut.Days:return Qe(W,ue,Q)[O.getDay()];case ut.DayPeriods:const st=O.getHours(),un=O.getMinutes();if(Be){const Vt=function ja(O){const W=(0,a.cg1)(O);return lr(W),(W[a.wAp.ExtraData][2]||[]).map(Q=>"string"==typeof Q?jo(Q):[jo(Q[0]),jo(Q[1])])}(W),Vn=function Wr(O,W,B){const Q=(0,a.cg1)(O);lr(Q);const Be=Pr([Q[a.wAp.ExtraData][0],Q[a.wAp.ExtraData][1]],W)||[];return Pr(Be,B)||[]}(W,ue,Q),Ln=Vt.findIndex(fr=>{if(Array.isArray(fr)){const[ci,di]=fr,V=st>=ci.hours&&un>=ci.minutes,C=st<di.hours||st===di.hours&&un<di.minutes;if(ci.hours<di.hours){if(V&&C)return!0}else if(V||C)return!0}else if(fr.hours===st&&fr.minutes===un)return!0;return!1});if(-1!==Ln)return Vn[Ln]}return tt(W,ue,Q)[st<12?0:1];case ut.Eras:return function wt(O,W){return Pr((0,a.cg1)(O)[a.wAp.Eras],W)}(W,Q)[O.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${B}`)}}(ue,Be,O,W,B,Q)}}function ls(O){return function(W,B,Q){const ue=-1*Q,Be=sn(B,cn.MinusSign),st=ue>0?Math.floor(ue/60):Math.ceil(ue/60);switch(O){case ki.Short:return(ue>=0?"+":"")+Dr(st,2,Be)+Dr(Math.abs(ue%60),2,Be);case ki.ShortGMT:return"GMT"+(ue>=0?"+":"")+Dr(st,1,Be);case ki.Long:return"GMT"+(ue>=0?"+":"")+Dr(st,2,Be)+":"+Dr(Math.abs(ue%60),2,Be);case ki.Extended:return 0===Q?"Z":(ue>=0?"+":"")+Dr(st,2,Be)+":"+Dr(Math.abs(ue%60),2,Be);default:throw new Error(`Unknown zone width "${O}"`)}}}const Ga=0,Hs=4;function ds(O){return Gi(O.getFullYear(),O.getMonth(),O.getDate()+(Hs-O.getDay()))}function Si(O,W=!1){return function(B,Q){let ue;if(W){const Be=new Date(B.getFullYear(),B.getMonth(),1).getDay()-1,st=B.getDate();ue=1+Math.floor((st+Be)/7)}else{const Be=ds(B),st=function Os(O){const W=Gi(O,Ga,1).getDay();return Gi(O,0,1+(W<=Hs?Hs:Hs+7)-W)}(Be.getFullYear()),un=Be.getTime()-st.getTime();ue=1+Math.round(un/6048e5)}return Dr(ue,O,sn(Q,cn.MinusSign))}}function Ti(O,W=!1){return function(B,Q){return Dr(ds(B).getFullYear(),O,sn(Q,cn.MinusSign),W)}}const Xr={};function ia(O,W){O=O.replace(/:/g,"");const B=Date.parse("Jan 01, 1970 00:00:00 "+O)/6e4;return isNaN(B)?W:B}function Ne(O){return O instanceof Date&&!isNaN(O.valueOf())}const _e=/^(\d+)?\.((\d+)(-(\d+))?)?$/,ae=22,Ee=".",Ve="0",rn=";",Hn=",",Vi="#";function Ns(O){const W=parseInt(O);if(isNaN(W))throw new Error("Invalid integer literal when parsing "+O);return W}function Oi(O,W){W=encodeURIComponent(W);for(const B of O.split(";")){const Q=B.indexOf("="),[ue,Be]=-1==Q?[B,""]:[B.slice(0,Q),B.slice(Q+1)];if(ue.trim()===W)return decodeURIComponent(Be)}return null}class qt{constructor(W,B,Q,ue){this.$implicit=W,this.ngForOf=B,this.index=Q,this.count=ue}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let On=(()=>{class O{set ngForOf(B){this._ngForOf=B,this._ngForOfDirty=!0}set ngForTrackBy(B){this._trackByFn=B}get ngForTrackBy(){return this._trackByFn}constructor(B,Q,ue){this._viewContainer=B,this._template=Q,this._differs=ue,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(B){B&&(this._template=B)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const B=this._ngForOf;!this._differ&&B&&(this._differ=this._differs.find(B).create(this.ngForTrackBy))}if(this._differ){const B=this._differ.diff(this._ngForOf);B&&this._applyChanges(B)}}_applyChanges(B){const Q=this._viewContainer;B.forEachOperation((ue,Be,st)=>{if(null==ue.previousIndex)Q.createEmbeddedView(this._template,new qt(ue.item,this._ngForOf,-1,-1),null===st?void 0:st);else if(null==st)Q.remove(null===Be?void 0:Be);else if(null!==Be){const un=Q.get(Be);Q.move(un,st),Qi(un,ue)}});for(let ue=0,Be=Q.length;ue<Be;ue++){const un=Q.get(ue).context;un.index=ue,un.count=Be,un.ngForOf=this._ngForOf}B.forEachIdentityChange(ue=>{Qi(Q.get(ue.currentIndex),ue)})}static ngTemplateContextGuard(B,Q){return!0}}return O.\u0275fac=function(B){return new(B||O)(a.Y36(a.s_b),a.Y36(a.Rgc),a.Y36(a.ZZ4))},O.\u0275dir=a.lG2({type:O,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),O})();function Qi(O,W){O.context.$implicit=W.item}let Rr=(()=>{class O{constructor(B,Q){this._viewContainer=B,this._context=new ir,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=Q}set ngIf(B){this._context.$implicit=this._context.ngIf=B,this._updateView()}set ngIfThen(B){ko("ngIfThen",B),this._thenTemplateRef=B,this._thenViewRef=null,this._updateView()}set ngIfElse(B){ko("ngIfElse",B),this._elseTemplateRef=B,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(B,Q){return!0}}return O.\u0275fac=function(B){return new(B||O)(a.Y36(a.s_b),a.Y36(a.Rgc))},O.\u0275dir=a.lG2({type:O,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),O})();class ir{constructor(){this.$implicit=null,this.ngIf=null}}function ko(O,W){if(W&&!W.createEmbeddedView)throw new Error(`${O} must be a TemplateRef, but received '${(0,a.AaK)(W)}'.`)}let Nr=(()=>{class O{constructor(B){this._viewContainerRef=B,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(B){if(B.ngTemplateOutlet||B.ngTemplateOutletInjector){const Q=this._viewContainerRef;if(this._viewRef&&Q.remove(Q.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:ue,ngTemplateOutletContext:Be,ngTemplateOutletInjector:st}=this;this._viewRef=Q.createEmbeddedView(ue,Be,st?{injector:st}:void 0)}else this._viewRef=null}else this._viewRef&&B.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return O.\u0275fac=function(B){return new(B||O)(a.Y36(a.s_b))},O.\u0275dir=a.lG2({type:O,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[a.TTD]}),O})();let sa=(()=>{class O{constructor(B){this._locale=B}transform(B,Q,ue){if(!function Jl(O){return!(null==O||""===O||O!=O)}(B))return null;ue=ue||this._locale;try{return function Va(O,W,B){return function wr(O,W,B,Q,ue,Be,st=!1){let un="",li=!1;if(isFinite(O)){let Vt=function vo(O){let Q,ue,Be,st,un,W=Math.abs(O)+"",B=0;for((ue=W.indexOf(Ee))>-1&&(W=W.replace(Ee,"")),(Be=W.search(/e/i))>0?(ue<0&&(ue=Be),ue+=+W.slice(Be+1),W=W.substring(0,Be)):ue<0&&(ue=W.length),Be=0;W.charAt(Be)===Ve;Be++);if(Be===(un=W.length))Q=[0],ue=1;else{for(un--;W.charAt(un)===Ve;)un--;for(ue-=Be,Q=[],st=0;Be<=un;Be++,st++)Q[st]=Number(W.charAt(Be))}return ue>ae&&(Q=Q.splice(0,ae-1),B=ue-1,ue=1),{digits:Q,exponent:B,integerLen:ue}}(O);st&&(Vt=function Ul(O){if(0===O.digits[0])return O;const W=O.digits.length-O.integerLen;return O.exponent?O.exponent+=2:(0===W?O.digits.push(0,0):1===W&&O.digits.push(0),O.integerLen+=2),O}(Vt));let Vn=W.minInt,Ln=W.minFrac,fr=W.maxFrac;if(Be){const H=Be.match(_e);if(null===H)throw new Error(`${Be} is not a valid digit info`);const $e=H[1],Yt=H[3],Dn=H[5];null!=$e&&(Vn=Ns($e)),null!=Yt&&(Ln=Ns(Yt)),null!=Dn?fr=Ns(Dn):null!=Yt&&Ln>fr&&(fr=Ln)}!function ba(O,W,B){if(W>B)throw new Error(`The minimum number of digits after fraction (${W}) is higher than the maximum (${B}).`);let Q=O.digits,ue=Q.length-O.integerLen;const Be=Math.min(Math.max(W,ue),B);let st=Be+O.integerLen,un=Q[st];if(st>0){Q.splice(Math.max(O.integerLen,st));for(let Ln=st;Ln<Q.length;Ln++)Q[Ln]=0}else{ue=Math.max(0,ue),O.integerLen=1,Q.length=Math.max(1,st=Be+1),Q[0]=0;for(let Ln=1;Ln<st;Ln++)Q[Ln]=0}if(un>=5)if(st-1<0){for(let Ln=0;Ln>st;Ln--)Q.unshift(0),O.integerLen++;Q.unshift(1),O.integerLen++}else Q[st-1]++;for(;ue<Math.max(0,Be);ue++)Q.push(0);let li=0!==Be;const Vt=W+O.integerLen,Vn=Q.reduceRight(function(Ln,fr,ci,di){return di[ci]=(fr+=Ln)<10?fr:fr-10,li&&(0===di[ci]&&ci>=Vt?di.pop():li=!1),fr>=10?1:0},0);Vn&&(Q.unshift(Vn),O.integerLen++)}(Vt,Ln,fr);let ci=Vt.digits,di=Vt.integerLen;const V=Vt.exponent;let C=[];for(li=ci.every(H=>!H);di<Vn;di++)ci.unshift(0);for(;di<0;di++)ci.unshift(0);di>0?C=ci.splice(di,ci.length):(C=ci,ci=[0]);const u=[];for(ci.length>=W.lgSize&&u.unshift(ci.splice(-W.lgSize,ci.length).join(""));ci.length>W.gSize;)u.unshift(ci.splice(-W.gSize,ci.length).join(""));ci.length&&u.unshift(ci.join("")),un=u.join(sn(B,Q)),C.length&&(un+=sn(B,ue)+C.join("")),V&&(un+=sn(B,cn.Exponential)+"+"+V)}else un=sn(B,cn.Infinity);return un=O<0&&!li?W.negPre+un+W.negSuf:W.posPre+un+W.posSuf,un}(O,function ra(O,W="-"){const B={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},Q=O.split(rn),ue=Q[0],Be=Q[1],st=-1!==ue.indexOf(Ee)?ue.split(Ee):[ue.substring(0,ue.lastIndexOf(Ve)+1),ue.substring(ue.lastIndexOf(Ve)+1)],un=st[0],li=st[1]||"";B.posPre=un.substring(0,un.indexOf(Vi));for(let Vn=0;Vn<li.length;Vn++){const Ln=li.charAt(Vn);Ln===Ve?B.minFrac=B.maxFrac=Vn+1:Ln===Vi?B.maxFrac=Vn+1:B.posSuf+=Ln}const Vt=un.split(Hn);if(B.gSize=Vt[1]?Vt[1].length:0,B.lgSize=Vt[2]||Vt[1]?(Vt[2]||Vt[1]).length:0,Be){const Vn=ue.length-B.posPre.length-B.posSuf.length,Ln=Be.indexOf(Vi);B.negPre=Be.substring(0,Ln).replace(/'/g,""),B.negSuf=Be.slice(Ln+Vn).replace(/'/g,"")}else B.negPre=W+B.posPre,B.negSuf=B.posSuf;return B}(function Ii(O,W){return(0,a.cg1)(O)[a.wAp.NumberFormats][W]}(W,Pt.Percent),sn(W,cn.MinusSign)),W,cn.Group,cn.Decimal,B,!0).replace(new RegExp("%","g"),sn(W,cn.PercentSign))}(function _l(O){if("string"==typeof O&&!isNaN(Number(O)-parseFloat(O)))return Number(O);if("number"!=typeof O)throw new Error(`${O} is not a number`);return O}(B),ue,Q)}catch(Be){throw function Yr(O,W){return new a.vHH(2100,!1)}()}}}return O.\u0275fac=function(B){return new(B||O)(a.Y36(a.soG,16))},O.\u0275pipe=a.Yjl({name:"percent",type:O,pure:!0,standalone:!0}),O})();let Bd=(()=>{class O{}return O.\u0275fac=function(B){return new(B||O)},O.\u0275mod=a.oAB({type:O}),O.\u0275inj=a.cJS({}),O})();const za="browser";function kd(O){return O===za}let Vo=(()=>{class O{}return O.\u0275prov=(0,a.Yz7)({token:O,providedIn:"root",factory:()=>new Uo((0,a.LFG)(ze),window)}),O})();class Uo{constructor(W,B){this.document=W,this.window=B,this.offset=()=>[0,0]}setOffset(W){this.offset=Array.isArray(W)?()=>W:W}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(W){this.supportsScrolling()&&this.window.scrollTo(W[0],W[1])}scrollToAnchor(W){if(!this.supportsScrolling())return;const B=function bl(O,W){const B=O.getElementById(W)||O.getElementsByName(W)[0];if(B)return B;if("function"==typeof O.createTreeWalker&&O.body&&(O.body.createShadowRoot||O.body.attachShadow)){const Q=O.createTreeWalker(O.body,NodeFilter.SHOW_ELEMENT);let ue=Q.currentNode;for(;ue;){const Be=ue.shadowRoot;if(Be){const st=Be.getElementById(W)||Be.querySelector(`[name="${W}"]`);if(st)return st}ue=Q.nextNode()}}return null}(this.document,W);B&&(this.scrollToElement(B),B.focus())}setHistoryScrollRestoration(W){if(this.supportScrollRestoration()){const B=this.window.history;B&&B.scrollRestoration&&(B.scrollRestoration=W)}}scrollToElement(W){const B=W.getBoundingClientRect(),Q=B.left+this.window.pageXOffset,ue=B.top+this.window.pageYOffset,Be=this.offset();this.window.scrollTo(Q-Be[0],ue-Be[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const W=Ji(this.window.history)||Ji(Object.getPrototypeOf(this.window.history));return!(!W||!W.writable&&!W.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Ji(O){return Object.getOwnPropertyDescriptor(O,"scrollRestoration")}class oa{}},1571:(gn,qe,ee)=>{ee.d(qe,{tb:()=>qb,AFp:()=>kb,ip1:()=>jb,CZH:()=>yy,hGG:()=>PM,z2F:()=>Ty,sBO:()=>gM,Sil:()=>XT,_Vd:()=>ld,EJc:()=>qT,Xts:()=>os,SBq:()=>cd,lqb:()=>Ic,qLn:()=>gh,vpe:()=>Bo,XFs:()=>xn,OlP:()=>yi,zs3:()=>yu,ZZ4:()=>k0,aQg:()=>G0,soG:()=>by,YKP:()=>ui,h0i:()=>tn,PXZ:()=>dM,R0b:()=>hc,FiY:()=>qu,Lbi:()=>YT,g9A:()=>Vb,Qsj:()=>ph,FYo:()=>Gf,JOm:()=>il,tp0:()=>nl,Rgc:()=>Od,dDg:()=>aM,eoX:()=>Jb,GfV:()=>gu,s_b:()=>nf,ifc:()=>ae,LMc:()=>FM,MMx:()=>re,Lck:()=>zn,eFA:()=>Xb,Gpc:()=>Ct,f3M:()=>Xr,$WT:()=>Qr,_c5:()=>IM,c2e:()=>JT,zSh:()=>xi,wAp:()=>Nn,vHH:()=>ke,lri:()=>$b,rWj:()=>Yb,D6c:()=>OM,cg1:()=>vp,kL8:()=>K_,dqk:()=>Gi,Z0I:()=>ja,eJc:()=>x0,CqO:()=>Wc,QGY:()=>Rd,F4k:()=>Bl,RDi:()=>_v,AaK:()=>Ke,zW0:()=>r,qOj:()=>cp,TTD:()=>Ho,_Bn:()=>wn,jDz:()=>Nt,xp6:()=>Dm,uIk:()=>wi,Tol:()=>qv,MT6:()=>Km,ekj:()=>gp,Suo:()=>mb,Xpm:()=>Va,lG2:()=>yo,Yz7:()=>Mn,cJS:()=>Ei,oAB:()=>vo,Yjl:()=>Ta,Y36:()=>jc,_UZ:()=>Yh,BQk:()=>wd,ynx:()=>Jh,qZA:()=>$h,TgZ:()=>zc,EpF:()=>uc,n5z:()=>ys,Ikx:()=>Qm,SDv:()=>ot,QtT:()=>Wt,pQV:()=>Jt,LFG:()=>Si,$8M:()=>Tc,$Z:()=>Em,NdJ:()=>Ou,CRH:()=>gb,oxw:()=>Zh,ALo:()=>mt,lcZ:()=>Ri,Hsn:()=>Sd,F$t:()=>jl,Q6J:()=>Ll,s9C:()=>Ym,MGl:()=>Cd,DdM:()=>An,VKq:()=>ar,WLB:()=>Gs,kEZ:()=>mo,iGM:()=>fb,MAs:()=>xd,KtG:()=>Ss,CHM:()=>er,P3R:()=>nd,Udp:()=>U_,YNc:()=>ll,W1O:()=>bb,_uU:()=>Bu,Oqu:()=>ny,hij:()=>$_,Gf:()=>pb});var a=ee(7579),Y=ee(727),be=ee(9751),xe=ee(6451),Re=ee(8421),ze=ee(930),Xe=ee(4482);function je(n,i,...o){if(!0===i)return void n();if(!1===i)return;const d=new ze.Hp({next:()=>{d.unsubscribe(),n()}});return(0,Re.Xf)(i(...o)).subscribe(d)}function Pe(n){for(let i in n)if(n[i]===Pe)return i;throw Error("Could not find renamed property on target object.")}function Oe(n,i){for(const o in i)i.hasOwnProperty(o)&&!n.hasOwnProperty(o)&&(n[o]=i[o])}function Ke(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Ke).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const i=n.toString();if(null==i)return""+i;const o=i.indexOf("\n");return-1===o?i:i.substring(0,o)}function Xt(n,i){return null==n||""===n?null===i?"":i:null==i||""===i?n:n+" "+i}const et=Pe({__forward_ref__:Pe});function Ct(n){return n.__forward_ref__=Ct,n.toString=function(){return Ke(this())},n}function Je(n){return Ot(n)?n():n}function Ot(n){return"function"==typeof n&&n.hasOwnProperty(et)&&n.__forward_ref__===Ct}function It(n){return n&&!!n.\u0275providers}const pi="https://g.co/ng/security#xss";class ke extends Error{constructor(i,o){super(Se(i,o)),this.code=i}}function Se(n,i){return`NG0${Math.abs(n)}${i?": "+i.trim():""}`}function Me(n){return"string"==typeof n?n:null==n?"":String(n)}function Zt(n,i){throw new ke(-201,!1)}function sn(n,i,o,d){throw new Error(`ASSERTION ERROR: ${n}`+(null==d?"":` [Expected=> ${o} ${d} ${i} <=Actual]`))}function Mn(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Ei(n){return{providers:n.providers||[],imports:n.imports||[]}}function lr(n){return Wr(n,go)||Wr(n,Or)}function ja(n){return null!==lr(n)}function Wr(n,i){return n.hasOwnProperty(i)?n[i]:null}function jo(n){return n&&(n.hasOwnProperty(Pi)||n.hasOwnProperty(_o))?n[Pi]:null}const go=Pe({\u0275prov:Pe}),Pi=Pe({\u0275inj:Pe}),Or=Pe({ngInjectableDef:Pe}),_o=Pe({ngInjectorDef:Pe});var xn=(()=>((xn=xn||{})[xn.Default=0]="Default",xn[xn.Host=1]="Host",xn[xn.Self=2]="Self",xn[xn.SkipSelf=4]="SkipSelf",xn[xn.Optional=8]="Optional",xn))();let Us;function Gt(n){const i=Us;return Us=n,i}function ut(n,i,o){const d=lr(n);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:o&xn.Optional?null:void 0!==i?i:void Zt(Ke(n))}const Gi=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),zt={},Un="__NG_DI_FLAG__",ka="ngTempTokenPath",Zn="ngTokenPath",Kc=/\n/gm,ls="\u0275",Ga="__source";let Hs;function Os(n){const i=Hs;return Hs=n,i}function ds(n,i=xn.Default){if(void 0===Hs)throw new ke(-203,!1);return null===Hs?ut(n,void 0,i):Hs.get(n,i&xn.Optional?null:void 0,i)}function Si(n,i=xn.Default){return(function ki(){return Us}()||ds)(Je(n),i)}function Xr(n,i=xn.Default){return Si(n,na(i))}function na(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function ia(n){const i=[];for(let o=0;o<n.length;o++){const d=Je(n[o]);if(Array.isArray(d)){if(0===d.length)throw new ke(900,!1);let m,y=xn.Default;for(let D=0;D<d.length;D++){const I=d[D],F=dl(I);"number"==typeof F?-1===F?m=I.token:y|=F:m=I}i.push(Si(m,y))}else i.push(Si(d))}return i}function xs(n,i){return n[Un]=i,n.prototype[Un]=i,n}function dl(n){return n[Un]}function Ne(n){return{toString:n}.toString()}var _e=(()=>((_e=_e||{})[_e.OnPush=0]="OnPush",_e[_e.Default=1]="Default",_e))(),ae=(()=>{return(n=ae||(ae={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",ae;var n})();const Ee={},Ve=[],rn=Pe({\u0275cmp:Pe}),Hn=Pe({\u0275dir:Pe}),Vi=Pe({\u0275pipe:Pe}),cr=Pe({\u0275mod:Pe}),fs=Pe({\u0275fac:Pe}),wr=Pe({__NG_ELEMENT_ID__:Pe});let ya=0;function Va(n){return Ne(()=>{const i=fc(n),o={...i,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===_e.OnPush,directiveDefs:null,pipeDefs:null,dependencies:i.standalone&&n.dependencies||null,getStandaloneInjector:null,data:n.data||{},encapsulation:n.encapsulation||ae.Emulated,id:"c"+ya++,styles:n.styles||Ve,_:null,schemas:n.schemas||null,tView:null};pl(o);const d=n.dependencies;return o.directiveDefs=zs(d,!1),o.pipeDefs=zs(d,!0),o})}function ra(n){return vi(n)||ur(n)}function Ul(n){return null!==n}function vo(n){return Ne(()=>({type:n.type,bootstrap:n.bootstrap||Ve,declarations:n.declarations||Ve,imports:n.imports||Ve,exports:n.exports||Ve,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Ns(n,i){if(null==n)return Ee;const o={};for(const d in n)if(n.hasOwnProperty(d)){let m=n[d],y=m;Array.isArray(m)&&(y=m[1],m=m[0]),o[m]=d,i&&(i[m]=y)}return o}function yo(n){return Ne(()=>{const i=fc(n);return pl(i),i})}function Ta(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function vi(n){return n[rn]||null}function ur(n){return n[Hn]||null}function Oi(n){return n[Vi]||null}function Qr(n){const i=vi(n)||ur(n)||Oi(n);return null!==i&&i.standalone}function $r(n,i){const o=n[cr]||null;if(!o&&!0===i)throw new Error(`Type ${Ke(n)} does not have '\u0275mod' property.`);return o}function fc(n){const i={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:i,exportAs:n.exportAs||null,standalone:!0===n.standalone,selectors:n.selectors||Ve,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Ns(n.inputs,i),outputs:Ns(n.outputs)}}function pl(n){n.features?.forEach(i=>i(n))}function zs(n,i){if(!n)return null;const o=i?Oi:ra;return()=>("function"==typeof n?n():n).map(d=>o(d)).filter(Ul)}const Fs=0,qt=1,On=2,Qi=3,es=4,Rr=5,ir=6,ko=7,Bi=8,Ws=9,bo=10,Gn=11,Ma=12,$s=13,xa=14,To=15,Nr=16,Hl=17,Yr=18,Ds=19,ps=20,Mi=21,Ni=22,Mo=1,ml=2,Wl=7,ts=8,Ys=9,Jr=10;function ns(n){return Array.isArray(n)&&"object"==typeof n[Mo]}function Fr(n){return Array.isArray(n)&&!0===n[Mo]}function Da(n){return 0!=(4&n.flags)}function wa(n){return n.componentOffset>-1}function $l(n){return 1==(1&n.flags)}function ms(n){return!!n.template}function Go(n){return 0!=(256&n[On])}function Ji(n,i){return n.hasOwnProperty(fs)?n[fs]:null}class bl{constructor(i,o,d){this.previousValue=i,this.currentValue=o,this.firstChange=d}isFirstChange(){return this.firstChange}}function Ho(){return oa}function oa(n){return n.type.prototype.ngOnChanges&&(n.setInput=Zi),ws}function ws(){const n=mc(this),i=n?.current;if(i){const o=n.previous;if(o===Ee)n.previous=i;else for(let d in i)o[d]=i[d];n.current=null,this.ngOnChanges(i)}}function Zi(n,i,o,d){const m=this.declaredInputs[o],y=mc(n)||function Xc(n,i){return n[Tl]=i}(n,{previous:Ee,current:null}),D=y.current||(y.current={}),I=y.previous,F=I[m];D[m]=new bl(F&&F.currentValue,i,I===Ee),n[d]=i}Ho.ngInherit=!0;const Tl="__ngSimpleChanges__";function mc(n){return n[Tl]||null}const Ls=function(n,i,o){};function Ui(n){for(;Array.isArray(n);)n=n[Fs];return n}function aa(n,i){return Ui(i[n])}function Rs(n,i){return Ui(i[n.index])}function Kl(n,i){return n.data[i]}function Js(n,i){return n[i]}function is(n,i){const o=i[n];return ns(o)?o:o[Fs]}function xo(n){return 64==(64&n[On])}function bi(n,i){return null==i?null:n[i]}function zu(n){n[Yr]=0}function ft(n,i){n[Rr]+=i;let o=n,d=n[Qi];for(;null!==d&&(1===i&&1===o[Rr]||-1===i&&0===o[Rr]);)d[Rr]+=i,o=d,d=d[Qi]}const _n={lFrame:ca(null),bindingsEnabled:!0};function zo(){return _n.bindingsEnabled}function nt(){return _n.lFrame.lView}function ni(){return _n.lFrame.tView}function er(n){return _n.lFrame.contextLView=n,n[Bi]}function Ss(n){return _n.lFrame.contextLView=null,n}function br(){let n=Xl();for(;null!==n&&64===n.type;)n=n.parent;return n}function Xl(){return _n.lFrame.currentTNode}function co(){const n=_n.lFrame,i=n.currentTNode;return n.isParent?i:i.parent}function $t(n,i){const o=_n.lFrame;o.currentTNode=n,o.isParent=i}function Do(){return _n.lFrame.isParent}function Sa(){_n.lFrame.isParent=!1}function rr(){const n=_n.lFrame;let i=n.bindingRootIndex;return-1===i&&(i=n.bindingRootIndex=n.tView.bindingStartIndex),i}function qn(){return _n.lFrame.bindingIndex}function Zs(){return _n.lFrame.bindingIndex++}function qs(n){const i=_n.lFrame,o=i.bindingIndex;return i.bindingIndex=i.bindingIndex+n,o}function eu(n){_n.lFrame.inI18n=n}function Ya(n,i){const o=_n.lFrame;o.bindingIndex=o.bindingRootIndex=n,le(i)}function le(n){_n.lFrame.currentDirectiveIndex=n}function Za(){return _n.lFrame.currentQueryIndex}function Ks(n){_n.lFrame.currentQueryIndex=n}function Xs(n){const i=n[qt];return 2===i.type?i.declTNode:1===i.type?n[ir]:null}function uo(n,i,o){if(o&xn.SkipSelf){let m=i,y=n;for(;!(m=m.parent,null!==m||o&xn.Host||(m=Xs(y),null===m||(y=y[To],10&m.type))););if(null===m)return!1;i=m,n=y}const d=_n.lFrame=Wo();return d.currentTNode=i,d.lView=n,!0}function wo(n){const i=Wo(),o=n[qt];_n.lFrame=i,i.currentTNode=o.firstChild,i.lView=n,i.tView=o,i.contextLView=n,i.bindingIndex=o.bindingStartIndex,i.inI18n=!1}function Wo(){const n=_n.lFrame,i=null===n?null:n.child;return null===i?ca(n):i}function ca(n){const i={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=i),i}function ua(){const n=_n.lFrame;return _n.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const ho=ua;function Ro(){const n=ua();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Lr(){return _n.lFrame.selectedIndex}function $o(n){_n.lFrame.selectedIndex=n}function zi(){const n=_n.lFrame;return Kl(n.tView,n.selectedIndex)}function B(n,i){for(let o=i.directiveStart,d=i.directiveEnd;o<d;o++){const y=n.data[o].type.prototype,{ngAfterContentInit:D,ngAfterContentChecked:I,ngAfterViewInit:F,ngAfterViewChecked:z,ngOnDestroy:te}=y;D&&(n.contentHooks??(n.contentHooks=[])).push(-o,D),I&&((n.contentHooks??(n.contentHooks=[])).push(o,I),(n.contentCheckHooks??(n.contentCheckHooks=[])).push(o,I)),F&&(n.viewHooks??(n.viewHooks=[])).push(-o,F),z&&((n.viewHooks??(n.viewHooks=[])).push(o,z),(n.viewCheckHooks??(n.viewCheckHooks=[])).push(o,z)),null!=te&&(n.destroyHooks??(n.destroyHooks=[])).push(o,te)}}function Q(n,i,o){st(n,i,3,o)}function ue(n,i,o,d){(3&n[On])===o&&st(n,i,o,d)}function Be(n,i){let o=n[On];(3&o)===i&&(o&=2047,o+=1,n[On]=o)}function st(n,i,o,d){const y=d??-1,D=i.length-1;let I=0;for(let F=void 0!==d?65535&n[Yr]:0;F<D;F++)if("number"==typeof i[F+1]){if(I=i[F],null!=d&&I>=d)break}else i[F]<0&&(n[Yr]+=65536),(I<y||-1==y)&&(un(n,o,i,F),n[Yr]=(4294901760&n[Yr])+F+2),F++}function un(n,i,o,d){const m=o[d]<0,y=o[d+1],I=n[m?-o[d]:o[d]];if(m){if(n[On]>>11<n[Yr]>>16&&(3&n[On])===i){n[On]+=2048,Ls(4,I,y);try{y.call(I)}finally{Ls(5,I,y)}}}else{Ls(4,I,y);try{y.call(I)}finally{Ls(5,I,y)}}}const li=-1;class Vt{constructor(i,o,d){this.factory=i,this.resolving=!1,this.canSeeViewProviders=o,this.injectImpl=d}}function H(n,i,o){let d=0;for(;d<o.length;){const m=o[d];if("number"==typeof m){if(0!==m)break;d++;const y=o[d++],D=o[d++],I=o[d++];n.setAttribute(i,D,I,y)}else{const y=m,D=o[++d];Yt(y)?n.setProperty(i,y,D):n.setAttribute(i,y,D),d++}}return d}function $e(n){return 3===n||4===n||6===n}function Yt(n){return 64===n.charCodeAt(0)}function Dn(n,i){if(null!==i&&0!==i.length)if(null===n||0===n.length)n=i.slice();else{let o=-1;for(let d=0;d<i.length;d++){const m=i[d];"number"==typeof m?o=m:0===o||_r(n,o,m,null,-1===o||2===o?i[++d]:null)}}return n}function _r(n,i,o,d,m){let y=0,D=n.length;if(-1===i)D=-1;else for(;y<n.length;){const I=n[y++];if("number"==typeof I){if(I===i){D=-1;break}if(I>i){D=y-1;break}}}for(;y<n.length;){const I=n[y];if("number"==typeof I)break;if(I===o){if(null===d)return void(null!==m&&(n[y+1]=m));if(d===n[y+1])return void(n[y+2]=m)}y++,null!==d&&y++,null!==m&&y++}-1!==D&&(n.splice(D,0,i),y=D+1),n.splice(y++,0,o),null!==d&&n.splice(y++,0,d),null!==m&&n.splice(y++,0,m)}function tr(n){return n!==li}function Sr(n){return 32767&n}function pr(n,i){let o=function qi(n){return n>>16}(n),d=i;for(;o>0;)d=d[To],o--;return d}let So=!0;function Co(n){const i=So;return So=n,i}const Yo=255,mr=5;let Ea=0;const Qs={};function ks(n,i){const o=Ki(n,i);if(-1!==o)return o;const d=i[qt];d.firstCreatePass&&(n.injectorIndex=i.length,Jo(d.data,n),Jo(i,null),Jo(d.blueprint,null));const m=vs(n,i),y=n.injectorIndex;if(tr(m)){const D=Sr(m),I=pr(m,i),F=I[qt].data;for(let z=0;z<8;z++)i[y+z]=I[D+z]|F[D+z]}return i[y+8]=m,y}function Jo(n,i){n.push(0,0,0,0,0,0,0,0,i)}function Ki(n,i){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===i[n.injectorIndex+8]?-1:n.injectorIndex}function vs(n,i){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let o=0,d=null,m=i;for(;null!==m;){if(d=$u(m),null===d)return li;if(o++,m=m[To],-1!==d.injectorIndex)return d.injectorIndex|o<<16}return li}function Br(n,i,o){!function _s(n,i,o){let d;"string"==typeof o?d=o.charCodeAt(0)||0:o.hasOwnProperty(wr)&&(d=o[wr]),null==d&&(d=o[wr]=Ea++);const m=d&Yo;i.data[n+(m>>mr)]|=1<<m}(n,i,o)}function ha(n,i,o){if(o&xn.Optional||void 0!==n)return n;Zt()}function Zo(n,i,o,d){if(o&xn.Optional&&void 0===d&&(d=null),!(o&(xn.Self|xn.Host))){const m=n[Ws],y=Gt(void 0);try{return m?m.get(i,d,o&xn.Optional):ut(i,d,o&xn.Optional)}finally{Gt(y)}}return ha(d,0,o)}function Ql(n,i,o,d=xn.Default,m){if(null!==n){if(1024&i[On]){const D=function Ud(n,i,o,d,m){let y=n,D=i;for(;null!==y&&null!==D&&1024&D[On]&&!(256&D[On]);){const I=Qa(y,D,o,d|xn.Self,Qs);if(I!==Qs)return I;let F=y.parent;if(!F){const z=D[Mi];if(z){const te=z.get(o,Qs,d);if(te!==Qs)return te}F=$u(D),D=D[To]}y=F}return m}(n,i,o,d,Qs);if(D!==Qs)return D}const y=Qa(n,i,o,d,Qs);if(y!==Qs)return y}return Zo(i,o,d,m)}function Qa(n,i,o,d,m){const y=function Cr(n){if("string"==typeof n)return n.charCodeAt(0)||0;const i=n.hasOwnProperty(wr)?n[wr]:void 0;return"number"==typeof i?i>=0?i&Yo:sf:i}(o);if("function"==typeof y){if(!uo(i,n,d))return d&xn.Host?ha(m,0,d):Zo(i,o,d,m);try{const D=y(d);if(null!=D||d&xn.Optional)return D;Zt()}finally{ho()}}else if("number"==typeof y){let D=null,I=Ki(n,i),F=li,z=d&xn.Host?i[Nr][ir]:null;for((-1===I||d&xn.SkipSelf)&&(F=-1===I?vs(n,i):i[I+8],F!==li&&fa(d,!1)?(D=i[qt],I=Sr(F),i=pr(F,i)):I=-1);-1!==I;){const te=i[qt];if(Tr(y,I,te.data)){const oe=fo(I,i,o,D,d,z);if(oe!==Qs)return oe}F=i[I+8],F!==li&&fa(d,i[qt].data[I+8]===z)&&Tr(y,I,i)?(D=te,I=Sr(F),i=pr(F,i)):I=-1}}return m}function fo(n,i,o,d,m,y){const D=i[qt],I=D.data[n+8],te=Rl(I,D,o,null==d?wa(I)&&So:d!=D&&0!=(3&I.type),m&xn.Host&&y===I);return null!==te?jr(i,D,te,I):Qs}function Rl(n,i,o,d,m){const y=n.providerIndexes,D=i.data,I=1048575&y,F=n.directiveStart,te=y>>20,ve=m?I+te:n.directiveEnd;for(let Ie=d?I:I+te;Ie<ve;Ie++){const at=D[Ie];if(Ie<F&&o===at||Ie>=F&&at.type===o)return Ie}if(m){const Ie=D[F];if(Ie&&ms(Ie)&&Ie.type===o)return F}return null}function jr(n,i,o,d){let m=n[o];const y=i.data;if(function Vn(n){return n instanceof Vt}(m)){const D=m;D.resolving&&function We(n,i){const o=i?`. Dependency path: ${i.join(" > ")} > ${n}`:"";throw new ke(-200,`Circular dependency in DI detected for ${n}${o}`)}(function Ze(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Me(n)}(y[o]));const I=Co(D.canSeeViewProviders);D.resolving=!0;const F=D.injectImpl?Gt(D.injectImpl):null;uo(n,d,xn.Default);try{m=n[o]=D.factory(void 0,y,n,d),i.firstCreatePass&&o>=d.directiveStart&&function W(n,i,o){const{ngOnChanges:d,ngOnInit:m,ngDoCheck:y}=i.type.prototype;if(d){const D=oa(i);(o.preOrderHooks??(o.preOrderHooks=[])).push(n,D),(o.preOrderCheckHooks??(o.preOrderCheckHooks=[])).push(n,D)}m&&(o.preOrderHooks??(o.preOrderHooks=[])).push(0-n,m),y&&((o.preOrderHooks??(o.preOrderHooks=[])).push(n,y),(o.preOrderCheckHooks??(o.preOrderCheckHooks=[])).push(n,y))}(o,y[o],i)}finally{null!==F&&Gt(F),Co(I),D.resolving=!1,ho()}}return m}function Tr(n,i,o){return!!(o[i+(n>>mr)]&1<<n)}function fa(n,i){return!(n&xn.Self||n&xn.Host&&i)}class ji{constructor(i,o){this._tNode=i,this._lView=o}get(i,o,d){return Ql(this._tNode,this._lView,i,na(d),o)}}function sf(){return new ji(br(),nt())}function ys(n){return Ne(()=>{const i=n.prototype.constructor,o=i[fs]||Sl(i),d=Object.prototype;let m=Object.getPrototypeOf(n.prototype).constructor;for(;m&&m!==d;){const y=m[fs]||Sl(m);if(y&&y!==o)return y;m=Object.getPrototypeOf(m)}return y=>new y})}function Sl(n){return Ot(n)?()=>{const i=Sl(Je(n));return i&&i()}:Ji(n)}function $u(n){const i=n[qt],o=i.type;return 2===o?i.declTNode:1===o?n[ir]:null}function Tc(n){return function Xa(n,i){if("class"===i)return n.classes;if("style"===i)return n.styles;const o=n.attrs;if(o){const d=o.length;let m=0;for(;m<d;){const y=o[m];if($e(y))break;if(0===y)m+=2;else if("number"==typeof y)for(m++;m<d&&"string"==typeof o[m];)m++;else{if(y===i)return o[m+1];m+=2}}}return null}(br(),n)}const Cl="__parameters__";function rs(n,i,o){return Ne(()=>{const d=function nu(n){return function(...o){if(n){const d=n(...o);for(const m in d)this[m]=d[m]}}}(i);function m(...y){if(this instanceof m)return d.apply(this,y),this;const D=new m(...y);return I.annotation=D,I;function I(F,z,te){const oe=F.hasOwnProperty(Cl)?F[Cl]:Object.defineProperty(F,Cl,{value:[]})[Cl];for(;oe.length<=te;)oe.push(null);return(oe[te]=oe[te]||[]).push(D),F}}return o&&(m.prototype=Object.create(o.prototype)),m.prototype.ngMetadataName=n,m.annotationCls=m,m})}class yi{constructor(i,o){this._desc=i,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof o?this.__NG_ELEMENT_ID__=o:void 0!==o&&(this.\u0275prov=Mn({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Ko(n,i){n.forEach(o=>Array.isArray(o)?Ko(o,i):i(o))}function w(n,i,o){i>=n.length?n.push(o):n.splice(i,0,o)}function R(n,i){return i>=n.length-1?n.pop():n.splice(i,1)[0]}function T(n,i){const o=[];for(let d=0;d<n;d++)o.push(i);return o}function ye(n,i,o){let d=Ut(n,i);return d>=0?n[1|d]=o:(d=~d,function Z(n,i,o,d){let m=n.length;if(m==i)n.push(o,d);else if(1===m)n.push(d,n[0]),n[0]=o;else{for(m--,n.push(n[m-1],n[m]);m>i;)n[m]=n[m-2],m--;n[i]=o,n[i+1]=d}}(n,d,i,o)),d}function rt(n,i){const o=Ut(n,i);if(o>=0)return n[1|o]}function Ut(n,i){return function Xn(n,i,o){let d=0,m=n.length>>o;for(;m!==d;){const y=d+(m-d>>1),D=n[y<<o];if(i===D)return y<<o;D>i?m=y:d=y+1}return~(m<<o)}(n,i,1)}const qu=xs(rs("Optional"),8),nl=xs(rs("SkipSelf"),4);var il=(()=>((il=il||{})[il.Important=1]="Important",il[il.DashCase=2]="DashCase",il))();const bg=/^>|^->|<!--|-->|--!>|<!-$/g,Tg=/(<|>)/,Mg="\u200b$1\u200b";const df=new Map;let xg=0;const ff="__ngContext__";function to(n,i){ns(i)?(n[ff]=i[ps],function wg(n){df.set(n[ps],n)}(i)):n[ff]=i}let pf;function mf(n,i){return pf(n,i)}function Qu(n){const i=n[Qi];return Fr(i)?i[Qi]:i}function gf(n){return Vp(n[$s])}function _f(n){return Vp(n[es])}function Vp(n){for(;null!==n&&!Fr(n);)n=n[es];return n}function cu(n,i,o,d,m){if(null!=d){let y,D=!1;Fr(d)?y=d:ns(d)&&(D=!0,d=d[Fs]);const I=Ui(d);0===n&&null!==o?null==m?$p(i,o,I):Rc(i,o,I,m||null,!0):1===n&&null!==o?Rc(i,o,I,m||null,!0):2===n?Qp(i,I,D):3===n&&i.destroyNode(I),null!=y&&function mv(n,i,o,d,m){const y=o[Wl];y!==Ui(o)&&cu(i,n,d,y,m);for(let I=Jr;I<o.length;I++){const F=o[I];Qd(F[qt],F,n,i,d,y)}}(i,n,y,o,m)}}function vf(n,i){return n.createText(i)}function Zd(n,i,o){n.setValue(i,o)}function Lg(n,i){return n.createComment(function Op(n){return n.replace(bg,i=>i.replace(Tg,Mg))}(i))}function yf(n,i,o){return n.createElement(i,o)}function Up(n,i){const o=n[Ys],d=o.indexOf(i),m=i[Qi];512&i[On]&&(i[On]&=-513,ft(m,-1)),o.splice(d,1)}function bf(n,i){if(n.length<=Jr)return;const o=Jr+i,d=n[o];if(d){const m=d[Hl];null!==m&&m!==n&&Up(m,d),i>0&&(n[o-1][es]=d[es]);const y=R(n,Jr+i);!function Bg(n,i){Qd(n,i,i[Gn],2,null,null),i[Fs]=null,i[ir]=null}(d[qt],d);const D=y[Ds];null!==D&&D.detachView(y[qt]),d[Qi]=null,d[es]=null,d[On]&=-65}return d}function Hp(n,i){if(!(128&i[On])){const o=i[Gn];o.destroyNode&&Qd(n,i,o,3,null,null),function Gg(n){let i=n[$s];if(!i)return Tf(n[qt],n);for(;i;){let o=null;if(ns(i))o=i[$s];else{const d=i[Jr];d&&(o=d)}if(!o){for(;i&&!i[es]&&i!==n;)ns(i)&&Tf(i[qt],i),i=i[Qi];null===i&&(i=n),ns(i)&&Tf(i[qt],i),o=i&&i[es]}i=o}}(i)}}function Tf(n,i){if(!(128&i[On])){i[On]&=-65,i[On]|=128,function Hg(n,i){let o;if(null!=n&&null!=(o=n.destroyHooks))for(let d=0;d<o.length;d+=2){const m=i[o[d]];if(!(m instanceof Vt)){const y=o[d+1];if(Array.isArray(y))for(let D=0;D<y.length;D+=2){const I=m[y[D]],F=y[D+1];Ls(4,I,F);try{F.call(I)}finally{Ls(5,I,F)}}else{Ls(4,m,y);try{y.call(m)}finally{Ls(5,m,y)}}}}}(n,i),function fv(n,i){const o=n.cleanup,d=i[ko];let m=-1;if(null!==o)for(let y=0;y<o.length-1;y+=2)if("string"==typeof o[y]){const D=o[y+3];D>=0?d[m=D]():d[m=-D].unsubscribe(),y+=2}else{const D=d[m=o[y+1]];o[y].call(D)}if(null!==d){for(let y=m+1;y<d.length;y++)(0,d[y])();i[ko]=null}}(n,i),1===i[qt].type&&i[Gn].destroy();const o=i[Hl];if(null!==o&&Fr(i[Qi])){o!==i[Qi]&&Up(o,i);const d=i[Ds];null!==d&&d.detachView(n)}!function Rg(n){df.delete(n[ps])}(i)}}function zp(n,i,o){return Wp(n,i.parent,o)}function Wp(n,i,o){let d=i;for(;null!==d&&40&d.type;)d=(i=d).parent;if(null===d)return o[Fs];{const{componentOffset:m}=d;if(m>-1){const{encapsulation:y}=n.data[d.directiveStart+m];if(y===ae.None||y===ae.Emulated)return null}return Rs(d,o)}}function Rc(n,i,o,d,m){n.insertBefore(i,o,d,m)}function $p(n,i,o){n.appendChild(i,o)}function Yp(n,i,o,d,m){null!==d?Rc(n,i,o,d,m):$p(n,i,o)}function qd(n,i){return n.parentNode(i)}function Jp(n,i,o){return qp(n,i,o)}function Zp(n,i,o){return 40&n.type?Rs(n,o):null}let Mf,nc,xf,Df,qp=Zp;function Kp(n,i){qp=n,Mf=i}function Kd(n,i,o,d){const m=zp(n,d,i),y=i[Gn],I=Jp(d.parent||i[ir],d,i);if(null!=m)if(Array.isArray(o))for(let F=0;F<o.length;F++)Yp(y,m,o[F],I,!1);else Yp(y,m,o,I,!1);void 0!==Mf&&Mf(y,d,i,o,m)}function Xd(n,i){if(null!==i){const o=i.type;if(3&o)return Rs(i,n);if(4&o)return Xp(-1,n[i.index]);if(8&o){const d=i.child;if(null!==d)return Xd(n,d);{const m=n[i.index];return Fr(m)?Xp(-1,m):Ui(m)}}if(32&o)return mf(i,n)()||Ui(n[i.index]);{const d=$g(n,i);return null!==d?Array.isArray(d)?d[0]:Xd(Qu(n[Nr]),d):Xd(n,i.next)}}return null}function $g(n,i){return null!==i?n[Nr][ir].projection[i.projection]:null}function Xp(n,i){const o=Jr+n+1;if(o<i.length){const d=i[o],m=d[qt].firstChild;if(null!==m)return Xd(d,m)}return i[Wl]}function Qp(n,i,o){const d=qd(n,i);d&&function zg(n,i,o,d){n.removeChild(i,o,d)}(n,d,i,o)}function em(n,i,o,d,m,y,D){for(;null!=o;){const I=d[o.index],F=o.type;if(D&&0===i&&(I&&to(Ui(I),d),o.flags|=2),32!=(32&o.flags))if(8&F)em(n,i,o.child,d,m,y,!1),cu(i,n,m,I,y);else if(32&F){const z=mf(o,d);let te;for(;te=z();)cu(i,n,m,te,y);cu(i,n,m,I,y)}else 16&F?Yg(n,i,d,o,m,y):cu(i,n,m,I,y);o=D?o.projectionNext:o.next}}function Qd(n,i,o,d,m,y){em(o,d,n.firstChild,i,m,y,!1)}function Yg(n,i,o,d,m,y){const D=o[Nr],F=D[ir].projection[d.projection];if(Array.isArray(F))for(let z=0;z<F.length;z++)cu(i,n,m,F[z],y);else em(n,i,F,D[Qi],m,y,!0)}function tm(n,i,o){""===o?n.removeAttribute(i,"class"):n.setAttribute(i,"class",o)}function eh(n,i,o){const{mergedAttrs:d,classes:m,styles:y}=o;null!==d&&H(n,i,d),null!==m&&tm(n,i,m),null!==y&&function no(n,i,o){n.setAttribute(i,"style",o)}(n,i,y)}function gr(n){return function Vr(){if(void 0===nc&&(nc=null,Gi.trustedTypes))try{nc=Gi.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return nc}()?.createHTML(n)||n}function _v(n){xf=n}function qg(n){return function wf(){if(void 0===Df&&(Df=null,Gi.trustedTypes))try{Df=Gi.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Df}()?.createScriptURL(n)||n}class Kg{constructor(i){this.changingThisBreaksApplicationSecurity=i}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${pi})`}}function Qo(n){return n instanceof Kg?n.changingThisBreaksApplicationSecurity:n}function ii(n,i){const o=function Qt(n){return n instanceof Kg&&n.getTypeName()||null}(n);if(null!=o&&o!==i){if("ResourceURL"===o&&"URL"===i)return!0;throw new Error(`Required a safe ${i}, got a ${o} (see ${pi})`)}return o===i}class Sf{constructor(i){this.inertDocumentHelper=i}getInertBodyElement(i){i="<body><remove></remove>"+i;try{const o=(new window.DOMParser).parseFromString(gr(i),"text/html").body;return null===o?this.inertDocumentHelper.getInertBodyElement(i):(o.removeChild(o.firstChild),o)}catch{return null}}}class Qg{constructor(i){this.defaultDoc=i,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(i){const o=this.inertDocument.createElement("template");return o.innerHTML=gr(i),o}}const hu=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function ed(n){return(n=String(n)).match(hu)?n:"unsafe:"+n}function io(n){const i={};for(const o of n.split(","))i[o]=!0;return i}function ic(...n){const i={};for(const o of n)for(const d in o)o.hasOwnProperty(d)&&(i[d]=!0);return i}const Cf=io("area,br,col,hr,img,wbr"),sh=io("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Po=io("rp,rt"),Ef=ic(Cf,ic(sh,io("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),ic(Po,io("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),ic(Po,sh)),oh=io("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),rl=ic(oh,io("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),io("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"));var yr=(()=>((yr=yr||{})[yr.NONE=0]="NONE",yr[yr.HTML=1]="HTML",yr[yr.STYLE=2]="STYLE",yr[yr.SCRIPT=3]="SCRIPT",yr[yr.URL=4]="URL",yr[yr.RESOURCE_URL=5]="RESOURCE_URL",yr))();function ss(n){const i=Ur();return i?i.sanitize(yr.URL,n)||"":ii(n,"URL")?Qo(n):ed(Me(n))}function rc(n){const i=Ur();if(i)return qg(i.sanitize(yr.RESOURCE_URL,n)||"");if(ii(n,"ResourceURL"))return qg(Qo(n));throw new ke(904,!1)}function nd(n,i,o){return function td(n,i){return"src"===i&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===i&&("base"===n||"link"===n)?rc:ss}(i,o)(n)}function Ur(){const n=nt();return n&&n[Ma]}const os=new yi("ENVIRONMENT_INITIALIZER"),rd=new yi("INJECTOR",-1),um=new yi("INJECTOR_DEF_TYPES");class dm{get(i,o=zt){if(o===zt){const d=new Error(`NullInjectorError: No provider for ${Ke(i)}!`);throw d.name="NullInjectorError",d}return o}}function ch(...n){return{\u0275providers:hm(0,n),\u0275fromNgModule:!0}}function hm(n,...i){const o=[],d=new Set;let m;return Ko(i,y=>{const D=y;Ff(D,o,[],d)&&(m||(m=[]),m.push(D))}),void 0!==m&&sd(m,o),o}function sd(n,i){for(let o=0;o<n.length;o++){const{providers:m}=n[o];Il(m,y=>{i.push(y)})}}function Ff(n,i,o,d){if(!(n=Je(n)))return!1;let m=null,y=jo(n);const D=!y&&vi(n);if(y||D){if(D&&!D.standalone)return!1;m=n}else{const F=n.ngModule;if(y=jo(F),!y)return!1;m=F}const I=d.has(m);if(D){if(I)return!1;if(d.add(m),D.dependencies){const F="function"==typeof D.dependencies?D.dependencies():D.dependencies;for(const z of F)Ff(z,i,o,d)}}else{if(!y)return!1;{if(null!=y.imports&&!I){let z;d.add(m);try{Ko(y.imports,te=>{Ff(te,i,o,d)&&(z||(z=[]),z.push(te))})}finally{}void 0!==z&&sd(z,i)}if(!I){const z=Ji(m)||(()=>new m);i.push({provide:m,useFactory:z,deps:Ve},{provide:um,useValue:m,multi:!0},{provide:os,useValue:()=>Si(m),multi:!0})}const F=y.providers;null==F||I||Il(F,te=>{i.push(te)})}}return m!==n&&void 0!==n.providers}function Il(n,i){for(let o of n)It(o)&&(o=o.\u0275providers),Array.isArray(o)?Il(o,i):i(o)}const o_=Pe({provide:String,useValue:Pe});function od(n){return null!==n&&"object"==typeof n&&o_ in n}function Ac(n){return"function"==typeof n}const xi=new yi("Set Injector scope."),uh={},Lf={};let Bf;function fu(){return void 0===Bf&&(Bf=new dm),Bf}class Ic{}class jf extends Ic{get destroyed(){return this._destroyed}constructor(i,o,d,m){super(),this.parent=o,this.source=d,this.scopes=m,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,fh(i,D=>this.processProvider(D)),this.records.set(rd,pu(void 0,this)),m.has("environment")&&this.records.set(Ic,pu(void 0,this));const y=this.records.get(xi);null!=y&&"string"==typeof y.value&&this.scopes.add(y.value),this.injectorDefTypes=new Set(this.get(um.multi,Ve,xn.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const i of this._ngOnDestroyHooks)i.ngOnDestroy();for(const i of this._onDestroyHooks)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(i){this._onDestroyHooks.push(i)}runInContext(i){this.assertNotDestroyed();const o=Os(this),d=Gt(void 0);try{return i()}finally{Os(o),Gt(d)}}get(i,o=zt,d=xn.Default){this.assertNotDestroyed(),d=na(d);const m=Os(this),y=Gt(void 0);try{if(!(d&xn.SkipSelf)){let I=this.records.get(i);if(void 0===I){const F=function mm(n){return"function"==typeof n||"object"==typeof n&&n instanceof yi}(i)&&lr(i);I=F&&this.injectableDefInScope(F)?pu(ad(i),uh):null,this.records.set(i,I)}if(null!=I)return this.hydrate(i,I)}return(d&xn.Self?fu():this.parent).get(i,o=d&xn.Optional&&o===zt?null:o)}catch(D){if("NullInjectorError"===D.name){if((D[ka]=D[ka]||[]).unshift(Ke(i)),m)throw D;return function hl(n,i,o,d){const m=n[ka];throw i[Ga]&&m.unshift(i[Ga]),n.message=function hs(n,i,o,d=null){n=n&&"\n"===n.charAt(0)&&n.charAt(1)==ls?n.slice(2):n;let m=Ke(i);if(Array.isArray(i))m=i.map(Ke).join(" -> ");else if("object"==typeof i){let y=[];for(let D in i)if(i.hasOwnProperty(D)){let I=i[D];y.push(D+":"+("string"==typeof I?JSON.stringify(I):Ke(I)))}m=`{${y.join(", ")}}`}return`${o}${d?"("+d+")":""}[${m}]: ${n.replace(Kc,"\n  ")}`}("\n"+n.message,m,o,d),n[Zn]=m,n[ka]=null,n}(D,i,"R3InjectorError",this.source)}throw D}finally{Gt(y),Os(m)}}resolveInjectorInitializers(){const i=Os(this),o=Gt(void 0);try{const d=this.get(os.multi,Ve,xn.Self);for(const m of d)m()}finally{Os(i),Gt(o)}}toString(){const i=[],o=this.records;for(const d of o.keys())i.push(Ke(d));return`R3Injector[${i.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ke(205,!1)}processProvider(i){let o=Ac(i=Je(i))?i:Je(i&&i.provide);const d=function hh(n){return od(n)?pu(void 0,n.useValue):pu(kf(n),uh)}(i);if(Ac(i)||!0!==i.multi)this.records.get(o);else{let m=this.records.get(o);m||(m=pu(void 0,uh,!0),m.factory=()=>ia(m.multi),this.records.set(o,m)),o=i,m.multi.push(i)}this.records.set(o,d)}hydrate(i,o){return o.value===uh&&(o.value=Lf,o.value=o.factory()),"object"==typeof o.value&&o.value&&function pm(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(o.value)&&this._ngOnDestroyHooks.add(o.value),o.value}injectableDefInScope(i){if(!i.providedIn)return!1;const o=Je(i.providedIn);return"string"==typeof o?"any"===o||this.scopes.has(o):this.injectorDefTypes.has(o)}}function ad(n){const i=lr(n),o=null!==i?i.factory:Ji(n);if(null!==o)return o;if(n instanceof yi)throw new ke(204,!1);if(n instanceof Function)return function dh(n){const i=n.length;if(i>0)throw T(i,"?"),new ke(204,!1);const o=function va(n){const i=n&&(n[go]||n[Or]);return i?(function Pr(n){if(n.hasOwnProperty("name"))return n.name;(""+n).match(/^function\s*([^\s(]+)/)}(n),i):null}(n);return null!==o?()=>o.factory(n):()=>new n}(n);throw new ke(204,!1)}function kf(n,i,o){let d;if(Ac(n)){const m=Je(n);return Ji(m)||ad(m)}if(od(n))d=()=>Je(n.useValue);else if(function fm(n){return!(!n||!n.useFactory)}(n))d=()=>n.useFactory(...ia(n.deps||[]));else if(function Ec(n){return!(!n||!n.useExisting)}(n))d=()=>Si(Je(n.useExisting));else{const m=Je(n&&(n.useClass||n.provide));if(!function l_(n){return!!n.deps}(n))return Ji(m)||ad(m);d=()=>new m(...ia(n.deps))}return d}function pu(n,i,o=!1){return{factory:n,value:i,multi:o?[]:void 0}}function fh(n,i){for(const o of n)Array.isArray(o)?fh(o,i):o&&It(o)?fh(o.\u0275providers,i):i(o)}class gm{}class _m{}class u_{resolveComponentFactory(i){throw function c_(n){const i=Error(`No component factory found for ${Ke(n)}. Did you add it to @NgModule.entryComponents?`);return i.ngComponent=n,i}(i)}}let ld=(()=>{class n{}return n.NULL=new u_,n})();function d_(){return mu(br(),nt())}function mu(n,i){return new cd(Rs(n,i))}let cd=(()=>{class n{constructor(o){this.nativeElement=o}}return n.__NG_ELEMENT_ID__=d_,n})();function h_(n){return n instanceof cd?n.nativeElement:n}class Gf{}let ph=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function Vf(){const n=nt(),o=is(br().index,n);return(ns(o)?o:n)[Gn]}(),n})(),ym=(()=>{class n{}return n.\u0275prov=Mn({token:n,providedIn:"root",factory:()=>null}),n})();class gu{constructor(i){this.full=i,this.major=i.split(".")[0],this.minor=i.split(".")[1],this.patch=i.split(".").slice(2).join(".")}}const bm=new gu("15.2.7"),mh={},Uf="ngOriginalError";function Hf(n){return n[Uf]}class gh{constructor(){this._console=console}handleError(i){const o=this._findOriginalError(i);this._console.error("ERROR",i),o&&this._console.error("ORIGINAL ERROR",o)}_findOriginalError(i){let o=i&&Hf(i);for(;o&&Hf(o);)o=Hf(o);return o||null}}function sl(n){return n instanceof Function?n():n}function __(n,i,o){let d=n.length;for(;;){const m=n.indexOf(i,o);if(-1===m)return m;if(0===m||n.charCodeAt(m-1)<=32){const y=i.length;if(m+y===d||n.charCodeAt(m+y)<=32)return m}o=m+1}}const v_="ng-template";function Av(n,i,o){let d=0,m=!0;for(;d<n.length;){let y=n[d++];if("string"==typeof y&&m){const D=n[d++];if(o&&"class"===y&&-1!==__(D.toLowerCase(),i,0))return!0}else{if(1===y){for(;d<n.length&&"string"==typeof(y=n[d++]);)if(y.toLowerCase()===i)return!0;return!1}"number"==typeof y&&(m=!1)}}return!1}function zf(n){return 4===n.type&&n.value!==v_}function Iv(n,i,o){return i===(4!==n.type||o?n.value:v_)}function Pa(n,i,o){let d=4;const m=n.attrs||[],y=function y_(n){for(let i=0;i<n.length;i++)if($e(n[i]))return i;return n.length}(m);let D=!1;for(let I=0;I<i.length;I++){const F=i[I];if("number"!=typeof F){if(!D)if(4&d){if(d=2|1&d,""!==F&&!Iv(n,F,o)||""===F&&1===i.length){if(Fi(d))return!1;D=!0}}else{const z=8&d?F:i[++I];if(8&d&&null!==n.attrs){if(!Av(n.attrs,z,o)){if(Fi(d))return!1;D=!0}continue}const oe=Wf(8&d?"class":F,m,zf(n),o);if(-1===oe){if(Fi(d))return!1;D=!0;continue}if(""!==z){let ve;ve=oe>y?"":m[oe+1].toLowerCase();const Ie=8&d?ve:null;if(Ie&&-1!==__(Ie,z,0)||2&d&&z!==ve){if(Fi(d))return!1;D=!0}}}}else{if(!D&&!Fi(d)&&!Fi(F))return!1;if(D&&Fi(F))continue;D=!1,d=F|1&d}}return Fi(d)||D}function Fi(n){return 0==(1&n)}function Wf(n,i,o,d){if(null===i)return-1;let m=0;if(d||!o){let y=!1;for(;m<i.length;){const D=i[m];if(D===n)return m;if(3===D||6===D)y=!0;else{if(1===D||2===D){let I=i[++m];for(;"string"==typeof I;)I=i[++m];continue}if(4===D)break;if(0===D){m+=4;continue}}m+=y?1:2}return-1}return function Mm(n,i){let o=n.indexOf(4);if(o>-1)for(o++;o<n.length;){const d=n[o];if("number"==typeof d)return-1;if(d===i)return o;o++}return-1}(i,n)}function $f(n,i,o=!1){for(let d=0;d<i.length;d++)if(Pa(n,i[d],o))return!0;return!1}function vh(n,i){e:for(let o=0;o<i.length;o++){const d=i[o];if(n.length===d.length){for(let m=0;m<n.length;m++)if(n[m]!==d[m])continue e;return!0}}return!1}function b_(n,i){return n?":not("+i.trim()+")":i}function dd(n){let i=n[0],o=1,d=2,m="",y=!1;for(;o<n.length;){let D=n[o];if("string"==typeof D)if(2&d){const I=n[++o];m+="["+D+(I.length>0?'="'+I+'"':"")+"]"}else 8&d?m+="."+D:4&d&&(m+=" "+D);else""!==m&&!Fi(D)&&(i+=b_(y,m),m=""),d=D,y=y||!Fi(d);o++}return""!==m&&(i+=b_(y,m)),i}const ri={};function Dm(n){Jf(ni(),nt(),Lr()+n,!1)}function Jf(n,i,o,d){if(!d)if(3==(3&i[On])){const y=n.preOrderCheckHooks;null!==y&&Q(i,y,o)}else{const y=n.preOrderHooks;null!==y&&ue(i,y,0,o)}$o(o)}function M_(n,i=null,o=null,d){const m=vu(n,i,o,d);return m.resolveInjectorInitializers(),m}function vu(n,i=null,o=null,d,m=new Set){const y=[o||Ve,ch(n)];return d=d||("object"==typeof n?void 0:Ke(n)),new jf(y,i||fu(),d||null,m)}let yu=(()=>{class n{static create(o,d){if(Array.isArray(o))return M_({name:""},d,o,"");{const m=o.name??"";return M_({name:m},o.parent,o.providers,m)}}}return n.THROW_IF_NOT_FOUND=zt,n.NULL=new dm,n.\u0275prov=Mn({token:n,providedIn:"any",factory:()=>Si(rd)}),n.__NG_ELEMENT_ID__=-1,n})();function jc(n,i=xn.Default){const o=nt();return null===o?Si(n,i):Ql(br(),o,Je(n),i)}function Em(){throw new Error("invalid")}function Dh(n,i){const o=n.contentQueries;if(null!==o)for(let d=0;d<o.length;d+=2){const y=o[d+1];if(-1!==y){const D=n.data[y];Ks(o[d]),D.contentQueries(2,i[y],y)}}}function fd(n,i,o,d,m,y,D,I,F,z,te){const oe=i.blueprint.slice();return oe[Fs]=m,oe[On]=76|d,(null!==te||n&&1024&n[On])&&(oe[On]|=1024),zu(oe),oe[Qi]=oe[To]=n,oe[Bi]=o,oe[bo]=D||n&&n[bo],oe[Gn]=I||n&&n[Gn],oe[Ma]=F||n&&n[Ma]||null,oe[Ws]=z||n&&n[Ws]||null,oe[ir]=y,oe[ps]=function Dg(){return xg++}(),oe[Mi]=te,oe[Nr]=2==i.type?n[Nr]:oe,oe}function kc(n,i,o,d,m){let y=n.data[i];if(null===y)y=wh(n,i,o,d,m),function wl(){return _n.lFrame.inI18n}()&&(y.flags|=32);else if(64&y.type){y.type=o,y.value=d,y.attrs=m;const D=co();y.injectorIndex=null===D?-1:D.injectorIndex}return $t(y,!0),y}function wh(n,i,o,d,m){const y=Xl(),D=Do(),F=n.data[i]=function Qf(n,i,o,d,m,y){return{type:o,index:d,insertBeforeIndex:null,injectorIndex:i?i.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:m,attrs:y,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:i,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,D?y:y&&y.parent,o,i,d,m);return null===n.firstChild&&(n.firstChild=F),null!==y&&(D?null==y.child&&null!==F.parent&&(y.child=F):null===y.next&&(y.next=F,F.prev=y)),F}function ea(n,i,o,d){if(0===o)return-1;const m=i.length;for(let y=0;y<o;y++)i.push(d),n.blueprint.push(d),n.data.push(null);return m}function Ol(n,i,o){wo(i);try{const d=n.viewQuery;null!==d&&Gh(1,d,o);const m=n.template;null!==m&&Rh(n,i,m,1,o),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&Dh(n,i),n.staticViewQueries&&Gh(2,n.viewQuery,o);const y=n.components;null!==y&&function Pm(n,i){for(let o=0;o<i.length;o++)I_(n,i[o])}(i,y)}catch(d){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),d}finally{i[On]&=-5,Ro()}}function Gc(n,i,o,d){const m=i[On];if(128!=(128&m)){wo(i);try{zu(i),function la(n){return _n.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==o&&Rh(n,i,o,2,d);const D=3==(3&m);if(D){const z=n.preOrderCheckHooks;null!==z&&Q(i,z,null)}else{const z=n.preOrderHooks;null!==z&&ue(i,z,0,null),Be(i,0)}if(function sp(n){for(let i=gf(n);null!==i;i=_f(i)){if(!i[ml])continue;const o=i[Ys];for(let d=0;d<o.length;d++){const m=o[d];512&m[On]||ft(m[Qi],1),m[On]|=512}}}(i),function jh(n){for(let i=gf(n);null!==i;i=_f(i))for(let o=Jr;o<i.length;o++){const d=i[o],m=d[qt];xo(d)&&Gc(m,d,m.template,d[Bi])}}(i),null!==n.contentQueries&&Dh(n,i),D){const z=n.contentCheckHooks;null!==z&&Q(i,z)}else{const z=n.contentHooks;null!==z&&ue(i,z,1),Be(i,1)}!function Am(n,i){const o=n.hostBindingOpCodes;if(null!==o)try{for(let d=0;d<o.length;d++){const m=o[d];if(m<0)$o(~m);else{const y=m,D=o[++d],I=o[++d];Ya(D,y),I(2,i[y])}}}finally{$o(-1)}}(n,i);const I=n.components;null!==I&&function Im(n,i){for(let o=0;o<i.length;o++)A_(n,i[o])}(i,I);const F=n.viewQuery;if(null!==F&&Gh(2,F,d),D){const z=n.viewCheckHooks;null!==z&&Q(i,z)}else{const z=n.viewHooks;null!==z&&ue(i,z,2),Be(i,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),i[On]&=-41,512&i[On]&&(i[On]&=-513,ft(i[Qi],-1))}finally{Ro()}}}function Rh(n,i,o,d,m){const y=Lr(),D=2&d;try{$o(-1),D&&i.length>Ni&&Jf(n,i,Ni,!1),Ls(D?2:0,m),o(d,m)}finally{$o(y),Ls(D?3:1,m)}}function Vc(n,i,o){if(Da(i)){const m=i.directiveEnd;for(let y=i.directiveStart;y<m;y++){const D=n.data[y];D.contentQueries&&D.contentQueries(1,o[y],y)}}}function Sh(n,i,o){zo()&&(function Fh(n,i,o,d){const m=o.directiveStart,y=o.directiveEnd;wa(o)&&function ol(n,i,o){const d=Rs(i,n),m=Uc(o),y=n[bo],D=_d(n,fd(n,m,null,o.onPush?32:16,d,i,y,y.createRenderer(d,o),null,null,null));n[i.index]=D}(i,o,n.data[m+o.componentOffset]),n.firstCreatePass||ks(o,i),to(d,i);const D=o.initialInputs;for(let I=m;I<y;I++){const F=n.data[I],z=jr(i,n,I,o);to(z,i),null!==D&&rp(0,I-m,z,F,0,D),ms(F)&&(is(o.index,i)[Bi]=jr(i,n,I,o))}}(n,i,o,Rs(o,i)),64==(64&o.flags)&&Du(n,i,o))}function Ch(n,i,o=Rs){const d=i.localNames;if(null!==d){let m=i.index+1;for(let y=0;y<d.length;y+=2){const D=d[y+1],I=-1===D?o(i,n):n[D];n[m++]=I}}}function Uc(n){const i=n.tView;return null===i||i.incompleteFirstPass?n.tView=Eh(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):i}function Eh(n,i,o,d,m,y,D,I,F,z){const te=Ni+d,oe=te+m,ve=function Ah(n,i){const o=[];for(let d=0;d<i;d++)o.push(d<n?null:ri);return o}(te,oe),Ie="function"==typeof z?z():z;return ve[qt]={type:n,blueprint:ve,template:o,queries:null,viewQuery:I,declTNode:i,data:ve.slice().fill(null,te),bindingStartIndex:te,expandoStartIndex:oe,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof y?y():y,pipeRegistry:"function"==typeof D?D():D,firstChild:null,schemas:F,consts:Ie,incompleteFirstPass:!1}}function No(n,i,o,d){const m=wu(i);null===o?m.push(d):(m.push(o),n.firstCreatePass&&op(n).push(d,m.length-1))}function Ih(n,i,o,d){for(let m in n)if(n.hasOwnProperty(m)){o=null===o?{}:o;const y=n[m];null===d?Ph(o,i,m,y):d.hasOwnProperty(m)&&Ph(o,i,d[m],y)}return o}function Ph(n,i,o,d){n.hasOwnProperty(o)?n[o].push(i,d):n[o]=[i,d]}function bs(n,i,o,d,m,y,D,I){const F=Rs(i,o);let te,z=i.inputs;!I&&null!=z&&(te=z[d])?(Uh(n,o,te,d,m),wa(i)&&function ep(n,i){const o=is(i,n);16&o[On]||(o[On]|=32)}(o,i.index)):3&i.type&&(d=function pd(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(d),m=null!=D?D(m,i.value||"",d):m,y.setProperty(F,d,m))}function Nh(n,i,o,d){if(zo()){const m=null===d?null:{"":-1},y=function S_(n,i){const o=n.directiveRegistry;let d=null,m=null;if(o)for(let y=0;y<o.length;y++){const D=o[y];if($f(i,D.selectors,!1))if(d||(d=[]),ms(D))if(null!==D.findHostDirectiveDefs){const I=[];m=m||new Map,D.findHostDirectiveDefs(D,I,m),d.unshift(...I,D),C_(n,i,I.length)}else d.unshift(D),C_(n,i,0);else m=m||new Map,D.findHostDirectiveDefs?.(D,d,m),d.push(D)}return null===d?null:[d,m]}(n,o);let D,I;null===y?D=I=null:[D,I]=y,null!==D&&np(n,i,o,D,m,I),m&&function Iy(n,i,o){if(i){const d=n.localNames=[];for(let m=0;m<i.length;m+=2){const y=o[i[m+1]];if(null==y)throw new ke(-301,!1);d.push(i[m],y)}}}(o,d,m)}o.mergedAttrs=Dn(o.mergedAttrs,o.attrs)}function np(n,i,o,d,m,y){for(let z=0;z<d.length;z++)Br(ks(o,i),n,d[z].type);!function Py(n,i,o){n.flags|=1,n.directiveStart=i,n.directiveEnd=i+o,n.providerIndexes=i}(o,n.data.length,d.length);for(let z=0;z<d.length;z++){const te=d[z];te.providersResolver&&te.providersResolver(te)}let D=!1,I=!1,F=ea(n,i,d.length,null);for(let z=0;z<d.length;z++){const te=d[z];o.mergedAttrs=Dn(o.mergedAttrs,te.hostAttrs),E_(n,o,i,F,te),Fv(F,te,m),null!==te.contentQueries&&(o.flags|=4),(null!==te.hostBindings||null!==te.hostAttrs||0!==te.hostVars)&&(o.flags|=64);const oe=te.type.prototype;!D&&(oe.ngOnChanges||oe.ngOnInit||oe.ngDoCheck)&&((n.preOrderHooks??(n.preOrderHooks=[])).push(o.index),D=!0),!I&&(oe.ngOnChanges||oe.ngDoCheck)&&((n.preOrderCheckHooks??(n.preOrderCheckHooks=[])).push(o.index),I=!0),F++}!function Oh(n,i,o){const m=i.directiveEnd,y=n.data,D=i.attrs,I=[];let F=null,z=null;for(let te=i.directiveStart;te<m;te++){const oe=y[te],ve=o?o.get(oe):null,at=ve?ve.outputs:null;F=Ih(oe.inputs,te,F,ve?ve.inputs:null),z=Ih(oe.outputs,te,z,at);const At=null===F||null===D||zf(i)?null:Bh(F,te,D);I.push(At)}null!==F&&(F.hasOwnProperty("class")&&(i.flags|=8),F.hasOwnProperty("style")&&(i.flags|=16)),i.initialInputs=I,i.inputs=F,i.outputs=z}(n,o,y)}function Du(n,i,o){const d=o.directiveStart,m=o.directiveEnd,y=o.index,D=function js(){return _n.lFrame.currentDirectiveIndex}();try{$o(y);for(let I=d;I<m;I++){const F=n.data[I],z=i[I];le(I),(null!==F.hostBindings||0!==F.hostVars||null!==F.hostAttrs)&&Lm(F,z)}}finally{$o(-1),le(D)}}function Lm(n,i){null!==n.hostBindings&&n.hostBindings(1,i)}function C_(n,i,o){i.componentOffset=o,(n.components??(n.components=[])).push(i.index)}function Fv(n,i,o){if(o){if(i.exportAs)for(let d=0;d<i.exportAs.length;d++)o[i.exportAs[d]]=n;ms(i)&&(o[""]=n)}}function E_(n,i,o,d,m){n.data[d]=m;const y=m.factory||(m.factory=Ji(m.type)),D=new Vt(y,ms(m),jc);n.blueprint[d]=D,o[d]=D,function Fm(n,i,o,d,m){const y=m.hostBindings;if(y){let D=n.hostBindingOpCodes;null===D&&(D=n.hostBindingOpCodes=[]);const I=~i.index;(function ip(n){let i=n.length;for(;i>0;){const o=n[--i];if("number"==typeof o&&o<0)return o}return 0})(D)!=I&&D.push(I),D.push(o,d,y)}}(n,i,d,ea(n,o,m.hostVars,ri),m)}function Lh(n,i,o,d,m,y,D){if(null==y)n.removeAttribute(i,m,o);else{const I=null==D?Me(y):D(y,d||"",m);n.setAttribute(i,m,I,o)}}function rp(n,i,o,d,m,y){const D=y[i];if(null!==D){const I=d.setInput;for(let F=0;F<D.length;){const z=D[F++],te=D[F++],oe=D[F++];null!==I?d.setInput(o,oe,z,te):o[te]=oe}}}function Bh(n,i,o){let d=null,m=0;for(;m<o.length;){const y=o[m];if(0!==y)if(5!==y){if("number"==typeof y)break;if(n.hasOwnProperty(y)){null===d&&(d=[]);const D=n[y];for(let I=0;I<D.length;I+=2)if(D[I]===i){d.push(y,D[I+1],o[m+1]);break}}m+=2}else m+=2;else m+=4}return d}function md(n,i,o,d){return[n,!0,!1,i,null,0,d,o,null,null]}function A_(n,i){const o=is(i,n);if(xo(o)){const d=o[qt];48&o[On]?Gc(d,o,d.template,o[Bi]):o[Rr]>0&&gd(o)}}function gd(n){for(let d=gf(n);null!==d;d=_f(d))for(let m=Jr;m<d.length;m++){const y=d[m];if(xo(y))if(512&y[On]){const D=y[qt];Gc(D,y,D.template,y[Bi])}else y[Rr]>0&&gd(y)}const o=n[qt].components;if(null!==o)for(let d=0;d<o.length;d++){const m=is(o[d],n);xo(m)&&m[Rr]>0&&gd(m)}}function I_(n,i){const o=is(i,n),d=o[qt];(function P_(n,i){for(let o=i.length;o<n.blueprint.length;o++)i.push(n.blueprint[o])})(d,o),Ol(d,o,o[Bi])}function _d(n,i){return n[$s]?n[xa][es]=i:n[$s]=i,n[xa]=i,i}function lc(n){for(;n;){n[On]|=32;const i=Qu(n);if(Go(n)&&!i)return n;n=i}return null}function kh(n,i,o,d=!0){const m=i[bo];m.begin&&m.begin();try{Gc(n,i,n.template,o)}catch(D){throw d&&Vh(i,D),D}finally{m.end&&m.end()}}function Gh(n,i,o){Ks(0),i(n,o)}function wu(n){return n[ko]||(n[ko]=[])}function op(n){return n.cleanup||(n.cleanup=[])}function Vh(n,i){const o=n[Ws],d=o?o.get(gh,null):null;d&&d.handleError(i)}function Uh(n,i,o,d,m){for(let y=0;y<o.length;){const D=o[y++],I=o[y++],F=i[D],z=n.data[D];null!==z.setInput?z.setInput(F,m,d,I):F[I]=m}}function Hh(n,i,o){let d=o?n.styles:null,m=o?n.classes:null,y=0;if(null!==i)for(let D=0;D<i.length;D++){const I=i[D];"number"==typeof I?y=I:1==y?m=Xt(m,I):2==y&&(d=Xt(d,I+": "+i[++D]+";"))}o?n.styles=d:n.stylesWithoutHost=d,o?n.classes=m:n.classesWithoutHost=m}function zh(n,i,o,d,m=!1){for(;null!==o;){const y=i[o.index];if(null!==y&&d.push(Ui(y)),Fr(y))for(let I=Jr;I<y.length;I++){const F=y[I],z=F[qt].firstChild;null!==z&&zh(F[qt],F,z,d)}const D=o.type;if(8&D)zh(n,i,o.child,d);else if(32&D){const I=mf(o,i);let F;for(;F=I();)d.push(F)}else if(16&D){const I=$g(i,o);if(Array.isArray(I))d.push(...I);else{const F=Qu(i[Nr]);zh(F[qt],F,I,d,!0)}}o=m?o.projectionNext:o.next}return d}class Ru{get rootNodes(){const i=this._lView,o=i[qt];return zh(o,i,o.firstChild,[])}constructor(i,o){this._lView=i,this._cdRefInjectingView=o,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Bi]}set context(i){this._lView[Bi]=i}get destroyed(){return 128==(128&this._lView[On])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const i=this._lView[Qi];if(Fr(i)){const o=i[ts],d=o?o.indexOf(this):-1;d>-1&&(bf(i,d),R(o,d))}this._attachedToViewContainer=!1}Hp(this._lView[qt],this._lView)}onDestroy(i){No(this._lView[qt],this._lView,null,i)}markForCheck(){lc(this._cdRefInjectingView||this._lView)}detach(){this._lView[On]&=-65}reattach(){this._lView[On]|=64}detectChanges(){kh(this._lView[qt],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ke(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function kg(n,i){Qd(n,i,i[Gn],2,null,null)}(this._lView[qt],this._lView)}attachToAppRef(i){if(this._attachedToViewContainer)throw new ke(902,!1);this._appRef=i}}class jm extends Ru{constructor(i){super(i),this._view=i}detectChanges(){const i=this._view;kh(i[qt],i,i[Bi],!1)}checkNoChanges(){}get context(){return null}}class vd extends ld{constructor(i){super(),this.ngModule=i}resolveComponentFactory(i){const o=vi(i);return new Fl(o,this.ngModule)}}function Wh(n){const i=[];for(let o in n)n.hasOwnProperty(o)&&i.push({propName:n[o],templateName:o});return i}class Gm{constructor(i,o){this.injector=i,this.parentInjector=o}get(i,o,d){d=na(d);const m=this.injector.get(i,mh,d);return m!==mh||o===mh?m:this.parentInjector.get(i,o,d)}}class Fl extends _m{get inputs(){return Wh(this.componentDef.inputs)}get outputs(){return Wh(this.componentDef.outputs)}constructor(i,o){super(),this.componentDef=i,this.ngModule=o,this.componentType=i.type,this.selector=function yh(n){return n.map(dd).join(",")}(i.selectors),this.ngContentSelectors=i.ngContentSelectors?i.ngContentSelectors:[],this.isBoundToModule=!!o}create(i,o,d,m){let y=(m=m||this.ngModule)instanceof Ic?m:m?.injector;y&&null!==this.componentDef.getStandaloneInjector&&(y=this.componentDef.getStandaloneInjector(y)||y);const D=y?new Gm(i,y):i,I=D.get(Gf,null);if(null===I)throw new ke(407,!1);const F=D.get(ym,null),z=I.createRenderer(null,this.componentDef),te=this.componentDef.selectors[0][0]||"div",oe=d?function Om(n,i,o){return n.selectRootElement(i,o===ae.ShadowDom)}(z,d,this.componentDef.encapsulation):yf(z,te,function km(n){const i=n.toLowerCase();return"svg"===i?"svg":"math"===i?"math":null}(te)),ve=this.componentDef.onPush?288:272,Ie=Eh(0,null,null,1,0,null,null,null,null,null),at=fd(null,Ie,null,ve,null,null,I,z,F,D,null);let At,nn;wo(at);try{const vn=this.componentDef;let Pn,Dt=null;vn.findHostDirectiveDefs?(Pn=[],Dt=new Map,vn.findHostDirectiveDefs(vn,Pn,Dt),Pn.push(vn)):Pn=[vn];const fi=function Um(n,i){const o=n[qt],d=Ni;return n[d]=i,kc(o,d,2,"#host",null)}(at,oe),us=function ap(n,i,o,d,m,y,D,I){const F=m[qt];!function bd(n,i,o,d){for(const m of n)i.mergedAttrs=Dn(i.mergedAttrs,m.hostAttrs);null!==i.mergedAttrs&&(Hh(i,i.mergedAttrs,!0),null!==o&&eh(d,o,i))}(d,n,i,D);const z=y.createRenderer(i,o),te=fd(m,Uc(o),null,o.onPush?32:16,m[n.index],n,y,z,I||null,null,null);return F.firstCreatePass&&C_(F,n,d.length-1),_d(m,te),m[n.index]=te}(fi,oe,vn,Pn,at,I,z);nn=Kl(Ie,Ni),oe&&function lp(n,i,o,d){if(d)H(n,o,["ng-version",bm.full]);else{const{attrs:m,classes:y}=function xm(n){const i=[],o=[];let d=1,m=2;for(;d<n.length;){let y=n[d];if("string"==typeof y)2===m?""!==y&&i.push(y,n[++d]):8===m&&o.push(y);else{if(!Fi(m))break;m=y}d++}return{attrs:i,classes:o}}(i.selectors[0]);m&&H(n,o,m),y&&y.length>0&&tm(n,o,y.join(" "))}}(z,vn,oe,d),void 0!==o&&function jv(n,i,o){const d=n.projection=[];for(let m=0;m<i.length;m++){const y=o[m];d.push(null!=y?Array.from(y):null)}}(nn,this.ngContentSelectors,o),At=function Hm(n,i,o,d,m,y){const D=br(),I=m[qt],F=Rs(D,m);np(I,m,D,o,null,d);for(let te=0;te<o.length;te++)to(jr(m,I,D.directiveStart+te,D),m);Du(I,m,D),F&&to(F,m);const z=jr(m,I,D.directiveStart+D.componentOffset,D);if(n[Bi]=m[Bi]=z,null!==y)for(const te of y)te(z,i);return Vc(I,D,n),z}(us,vn,Pn,Dt,at,[Td]),Ol(Ie,at,null)}finally{Ro()}return new Vm(this.componentType,At,mu(nn,at),at,nn)}}class Vm extends gm{constructor(i,o,d,m,y){super(),this.location=d,this._rootLView=m,this._tNode=y,this.instance=o,this.hostView=this.changeDetectorRef=new jm(m),this.componentType=i}setInput(i,o){const d=this._tNode.inputs;let m;if(null!==d&&(m=d[i])){const y=this._rootLView;Uh(y[qt],y,m,i,o),lc(is(this._tNode.index,y))}}get injector(){return new ji(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(i){this.hostView.onDestroy(i)}}function Td(){const n=br();B(nt()[qt],n)}function cp(n){let i=function O_(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),o=!0;const d=[n];for(;i;){let m;if(ms(n))m=i.\u0275cmp||i.\u0275dir;else{if(i.\u0275cmp)throw new ke(903,!1);m=i.\u0275dir}if(m){if(o){d.push(m);const D=n;D.inputs=Cu(n.inputs),D.declaredInputs=Cu(n.declaredInputs),D.outputs=Cu(n.outputs);const I=m.hostBindings;I&&Wm(n,I);const F=m.viewQuery,z=m.contentQueries;if(F&&zm(n,F),z&&N_(n,z),Oe(n.inputs,m.inputs),Oe(n.declaredInputs,m.declaredInputs),Oe(n.outputs,m.outputs),ms(m)&&m.data.animation){const te=n.data;te.animation=(te.animation||[]).concat(m.data.animation)}}const y=m.features;if(y)for(let D=0;D<y.length;D++){const I=y[D];I&&I.ngInherit&&I(n),I===cp&&(o=!1)}}i=Object.getPrototypeOf(i)}!function Su(n){let i=0,o=null;for(let d=n.length-1;d>=0;d--){const m=n[d];m.hostVars=i+=m.hostVars,m.hostAttrs=Dn(m.hostAttrs,o=Dn(o,m.hostAttrs))}}(d)}function Cu(n){return n===Ee?{}:n===Ve?[]:n}function zm(n,i){const o=n.viewQuery;n.viewQuery=o?(d,m)=>{i(d,m),o(d,m)}:i}function N_(n,i){const o=n.contentQueries;n.contentQueries=o?(d,m,y)=>{i(d,m,y),o(d,m,y)}:i}function Wm(n,i){const o=n.hostBindings;n.hostBindings=o?(d,m)=>{i(d,m),o(d,m)}:i}function r(n){return i=>{i.findHostDirectiveDefs=p,i.hostDirectives=(Array.isArray(n)?n:n()).map(o=>"function"==typeof o?{directive:Je(o),inputs:Ee,outputs:Ee}:{directive:Je(o.directive),inputs:M(o.inputs),outputs:M(o.outputs)})}}function p(n,i,o){if(null!==n.hostDirectives)for(const d of n.hostDirectives){const m=ur(d.directive);N(m.declaredInputs,d.inputs),p(m,i,o),o.set(m,d),i.push(m)}}function M(n){if(void 0===n||0===n.length)return Ee;const i={};for(let o=0;o<n.length;o+=2)i[n[o]]=n[o+1];return i}function N(n,i){for(const o in i)i.hasOwnProperty(o)&&(n[i[o]]=n[o])}function De(n){return!!xt(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function xt(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Bn(n,i,o){return n[i]=o}function Rn(n,i,o){return!Object.is(n[i],o)&&(n[i]=o,!0)}function Yn(n,i,o,d){const m=Rn(n,i,o);return Rn(n,i+1,d)||m}function wi(n,i,o,d){const m=nt();return Rn(m,Zs(),i)&&(ni(),function pa(n,i,o,d,m,y){const D=Rs(n,i);Lh(i[Gn],D,y,n.value,o,d,m)}(zi(),m,n,i,o,d)),wi}function gi(n,i,o,d){return Rn(n,Zs(),o)?i+Me(o)+d:ri}function ll(n,i,o,d,m,y,D,I){const F=nt(),z=ni(),te=n+Ni,oe=z.firstCreatePass?function Iu(n,i,o,d,m,y,D,I,F){const z=i.consts,te=kc(i,n,4,D||null,bi(z,I));Nh(i,o,te,bi(z,F)),B(i,te);const oe=te.tView=Eh(2,te,d,m,y,i.directiveRegistry,i.pipeRegistry,null,i.schemas,z);return null!==i.queries&&(i.queries.template(i,te),oe.queries=i.queries.embeddedTView(te)),te}(te,z,F,i,o,d,m,y,D):z.data[te];$t(oe,!1);const ve=F[Gn].createComment("");Kd(z,F,ve,oe),to(ve,F),_d(F,F[te]=md(ve,F,ve,oe)),$l(oe)&&Sh(z,F,oe),null!=D&&Ch(F,oe,I)}function xd(n){return Js(function Bs(){return _n.lFrame.contextLView}(),Ni+n)}function Ll(n,i,o){const d=nt();return Rn(d,Zs(),i)&&bs(ni(),zi(),d,n,i,d[Gn],o,!1),Ll}function Dd(n,i,o,d,m){const D=m?"class":"style";Uh(n,o,i.inputs[D],D,d)}function zc(n,i,o,d){const m=nt(),y=ni(),D=Ni+n,I=m[Gn],F=y.firstCreatePass?function L_(n,i,o,d,m,y){const D=i.consts,F=kc(i,n,2,d,bi(D,m));return Nh(i,o,F,bi(D,y)),null!==F.attrs&&Hh(F,F.attrs,!1),null!==F.mergedAttrs&&Hh(F,F.mergedAttrs,!0),null!==i.queries&&i.queries.elementStart(i,F),F}(D,y,m,i,o,d):y.data[D],z=m[D]=yf(I,i,function O(){return _n.lFrame.currentNamespace}()),te=$l(F);return $t(F,!0),eh(I,z,F),32!=(32&F.flags)&&Kd(y,m,z,F),0===function _c(){return _n.lFrame.elementDepthCount}()&&to(z,m),function Hi(){_n.lFrame.elementDepthCount++}(),te&&(Sh(y,m,F),Vc(y,F,m)),null!==d&&Ch(m,F),zc}function $h(){let n=br();Do()?Sa():(n=n.parent,$t(n,!1));const i=n;!function xl(){_n.lFrame.elementDepthCount--}();const o=ni();return o.firstCreatePass&&(B(o,n),Da(n)&&o.queries.elementEnd(n)),null!=i.classesWithoutHost&&function di(n){return 0!=(8&n.flags)}(i)&&Dd(o,i,nt(),i.classesWithoutHost,!0),null!=i.stylesWithoutHost&&function V(n){return 0!=(16&n.flags)}(i)&&Dd(o,i,nt(),i.stylesWithoutHost,!1),$h}function Yh(n,i,o,d){return zc(n,i,o,d),$h(),Yh}function Jh(n,i,o){const d=nt(),m=ni(),y=n+Ni,D=m.firstCreatePass?function B_(n,i,o,d,m){const y=i.consts,D=bi(y,d),I=kc(i,n,8,"ng-container",D);return null!==D&&Hh(I,D,!0),Nh(i,o,I,bi(y,m)),null!==i.queries&&i.queries.elementStart(i,I),I}(y,m,d,i,o):m.data[y];$t(D,!0);const I=d[y]=d[Gn].createComment("");return Kd(m,d,I,D),to(I,d),$l(D)&&(Sh(m,d,D),Vc(m,D,d)),null!=o&&Ch(d,D),Jh}function wd(){let n=br();const i=ni();return Do()?Sa():(n=n.parent,$t(n,!1)),i.firstCreatePass&&(B(i,n),Da(n)&&i.queries.elementEnd(n)),wd}function uc(){return nt()}function Rd(n){return!!n&&"function"==typeof n.then}function Bl(n){return!!n&&"function"==typeof n.subscribe}const Wc=Bl;function Ou(n,i,o,d){const m=nt(),y=ni(),D=br();return function $m(n,i,o,d,m,y,D){const I=$l(d),z=n.firstCreatePass&&op(n),te=i[Bi],oe=wu(i);let ve=!0;if(3&d.type||D){const At=Rs(d,i),nn=D?D(At):At,vn=oe.length,Pn=D?fi=>D(Ui(fi[d.index])):d.index;let Dt=null;if(!D&&I&&(Dt=function dp(n,i,o,d){const m=n.cleanup;if(null!=m)for(let y=0;y<m.length-1;y+=2){const D=m[y];if(D===o&&m[y+1]===d){const I=i[ko],F=m[y+2];return I.length>F?I[F]:null}"string"==typeof D&&(y+=2)}return null}(n,i,m,d.index)),null!==Dt)(Dt.__ngLastListenerFn__||Dt).__ngNextListenerFn__=y,Dt.__ngLastListenerFn__=y,ve=!1;else{y=hp(d,i,te,y,!1);const fi=o.listen(nn,m,y);oe.push(y,fi),z&&z.push(m,Pn,vn,vn+1)}}else y=hp(d,i,te,y,!1);const Ie=d.outputs;let at;if(ve&&null!==Ie&&(at=Ie[m])){const At=at.length;if(At)for(let nn=0;nn<At;nn+=2){const us=i[at[nn]][at[nn+1]].subscribe(y),Vs=oe.length;oe.push(y,us),z&&z.push(m,d.index,Vs,-(Vs+1))}}}(y,m,m[Gn],D,n,i,d),Ou}function Nu(n,i,o,d){try{return Ls(6,i,o),!1!==o(d)}catch(m){return Vh(n,m),!1}finally{Ls(7,i,o)}}function hp(n,i,o,d,m){return function y(D){if(D===Function)return d;lc(n.componentOffset>-1?is(n.index,i):i);let F=Nu(i,o,d,D),z=y.__ngNextListenerFn__;for(;z;)F=Nu(i,o,z,D)&&F,z=z.__ngNextListenerFn__;return m&&!1===F&&(D.preventDefault(),D.returnValue=!1),F}}function Zh(n=1){return function da(n){return(_n.lFrame.contextLView=function qa(n,i){for(;n>0;)i=i[To],n--;return i}(n,_n.lFrame.contextLView))[Bi]}(n)}function Oy(n,i){let o=null;const d=function Yf(n){const i=n.attrs;if(null!=i){const o=i.indexOf(5);if(!(1&o))return i[o+1]}return null}(n);for(let m=0;m<i.length;m++){const y=i[m];if("*"!==y){if(null===d?$f(n,y,!0):vh(d,y))return m}else o=m}return o}function jl(n){const i=nt()[Nr][ir];if(!i.projection){const d=i.projection=T(n?n.length:1,null),m=d.slice();let y=i.child;for(;null!==y;){const D=n?Oy(y,n):0;null!==D&&(m[D]?m[D].projectionNext=y:d[D]=y,m[D]=y),y=y.next}}}function Sd(n,i=0,o){const d=nt(),m=ni(),y=kc(m,Ni+n,16,null,o||null);null===y.projection&&(y.projection=i),Sa(),32!=(32&y.flags)&&function wy(n,i,o){Yg(i[Gn],0,i,o,zp(n,o,i),Jp(o.parent||i[ir],o,i))}(m,d,y)}function Ym(n,i,o){return Cd(n,"",i,"",o),Ym}function Cd(n,i,o,d,m){const y=nt(),D=gi(y,i,o,d);return D!==ri&&bs(ni(),zi(),y,n,D,y[Gn],m,!1),Cd}function mp(n,i){return n<<17|i<<2}function Fu(n){return n>>17&32767}function j_(n){return 2|n}function ga(n){return(131068&n)>>2}function Uv(n,i){return-131069&n|i<<2}function Kh(n){return 1|n}function Hv(n,i,o,d,m){const y=n[o+1],D=null===i;let I=d?Fu(y):ga(y),F=!1;for(;0!==I&&(!1===F||D);){const te=n[I+1];G_(n[I],i)&&(F=!0,n[I+1]=d?Kh(te):j_(te)),I=d?Fu(te):ga(te)}F&&(n[o+1]=d?j_(y):Kh(y))}function G_(n,i){return null===n||null==i||(Array.isArray(n)?n[1]:n)===i||!(!Array.isArray(n)||"string"!=typeof i)&&Ut(n,i)>=0}const Es={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function V_(n){return n.substring(Es.key,Es.keyEnd)}function zv(n,i){const o=Es.textEnd;return o===i?-1:(i=Es.keyEnd=function $v(n,i,o){for(;i<o&&n.charCodeAt(i)>32;)i++;return i}(n,Es.key=i,o),Qh(n,i,o))}function Qh(n,i,o){for(;i<o&&n.charCodeAt(i)<=32;)i++;return i}function U_(n,i,o){return Gl(n,i,o,!1),U_}function gp(n,i){return Gl(n,i,null,!0),gp}function qv(n){cl(ye,Yc,n,!0)}function Yc(n,i){for(let o=function Fy(n){return function Jm(n){Es.key=0,Es.keyEnd=0,Es.value=0,Es.valueEnd=0,Es.textEnd=n.length}(n),zv(n,Qh(n,0,Es.textEnd))}(i);o>=0;o=zv(i,o))ye(n,V_(i),!0)}function Gl(n,i,o,d){const m=nt(),y=ni(),D=qs(2);y.firstUpdatePass&&jy(y,n,D,d),i!==ri&&Rn(m,D,i)&&z_(y,y.data[Lr()],m,m[Gn],n,m[D+1]=function ey(n,i){return null==n||""===n||("string"==typeof i?n+=i:"object"==typeof n&&(n=Ke(Qo(n)))),n}(i,o),d,D)}function cl(n,i,o,d){const m=ni(),y=qs(2);m.firstUpdatePass&&jy(m,null,y,d);const D=nt();if(o!==ri&&Rn(D,y,o)){const I=m.data[Lr()];if(ty(I,d)&&!H_(m,y)){let F=d?I.classesWithoutHost:I.stylesWithoutHost;null!==F&&(o=Xt(F,o||"")),Dd(m,I,D,o,d)}else!function Y0(n,i,o,d,m,y,D,I){m===ri&&(m=Ve);let F=0,z=0,te=0<m.length?m[0]:null,oe=0<y.length?y[0]:null;for(;null!==te||null!==oe;){const ve=F<m.length?m[F+1]:void 0,Ie=z<y.length?y[z+1]:void 0;let At,at=null;te===oe?(F+=2,z+=2,ve!==Ie&&(at=oe,At=Ie)):null===oe||null!==te&&te<oe?(F+=2,at=te):(z+=2,at=oe,At=Ie),null!==at&&z_(n,i,o,d,at,At,D,I),te=F<m.length?m[F]:null,oe=z<y.length?y[z]:null}}(m,I,D,D[Gn],D[y+1],D[y+1]=function Qv(n,i,o){if(null==o||""===o)return Ve;const d=[],m=Qo(o);if(Array.isArray(m))for(let y=0;y<m.length;y++)n(d,m[y],!0);else if("object"==typeof m)for(const y in m)m.hasOwnProperty(y)&&n(d,y,m[y]);else"string"==typeof m&&i(d,m);return d}(n,i,o),d,y)}}function H_(n,i){return i>=n.expandoStartIndex}function jy(n,i,o,d){const m=n.data;if(null===m[o+1]){const y=m[Lr()],D=H_(n,o);ty(y,d)&&null===i&&!D&&(i=!1),i=function Zm(n,i,o,d){const m=function Ja(n){const i=_n.lFrame.currentDirectiveIndex;return-1===i?null:n[i]}(n);let y=d?i.residualClasses:i.residualStyles;if(null===m)0===(d?i.classBindings:i.styleBindings)&&(o=ef(o=Xv(null,n,i,o,d),i.attrs,d),y=null);else{const D=i.directiveStylingLast;if(-1===D||n[D]!==m)if(o=Xv(m,n,i,o,d),null===y){let F=function Kv(n,i,o){const d=o?i.classBindings:i.styleBindings;if(0!==ga(d))return n[Fu(d)]}(n,i,d);void 0!==F&&Array.isArray(F)&&(F=Xv(null,n,i,F[1],d),F=ef(F,i.attrs,d),function W0(n,i,o,d){n[Fu(o?i.classBindings:i.styleBindings)]=d}(n,i,d,F))}else y=function $0(n,i,o){let d;const m=i.directiveEnd;for(let y=1+i.directiveStylingLast;y<m;y++)d=ef(d,n[y].hostAttrs,o);return ef(d,i.attrs,o)}(n,i,d)}return void 0!==y&&(d?i.residualClasses=y:i.residualStyles=y),o}(m,y,i,d),function H0(n,i,o,d,m,y){let D=y?i.classBindings:i.styleBindings,I=Fu(D),F=ga(D);n[d]=o;let te,z=!1;if(Array.isArray(o)?(te=o[1],(null===te||Ut(o,te)>0)&&(z=!0)):te=o,m)if(0!==F){const ve=Fu(n[I+1]);n[d+1]=mp(ve,I),0!==ve&&(n[ve+1]=Uv(n[ve+1],d)),n[I+1]=function $c(n,i){return 131071&n|i<<17}(n[I+1],d)}else n[d+1]=mp(I,0),0!==I&&(n[I+1]=Uv(n[I+1],d)),I=d;else n[d+1]=mp(F,0),0===I?I=d:n[F+1]=Uv(n[F+1],d),F=d;z&&(n[d+1]=j_(n[d+1])),Hv(n,te,d,!0),Hv(n,te,d,!1),function k_(n,i,o,d,m){const y=m?n.residualClasses:n.residualStyles;null!=y&&"string"==typeof i&&Ut(y,i)>=0&&(o[d+1]=Kh(o[d+1]))}(i,te,n,d,y),D=mp(I,F),y?i.classBindings=D:i.styleBindings=D}(m,y,i,o,D,d)}}function Xv(n,i,o,d,m){let y=null;const D=o.directiveEnd;let I=o.directiveStylingLast;for(-1===I?I=o.directiveStart:I++;I<D&&(y=i[I],d=ef(d,y.hostAttrs,m),y!==n);)I++;return null!==n&&(o.directiveStylingLast=I),d}function ef(n,i,o){const d=o?1:2;let m=-1;if(null!==i)for(let y=0;y<i.length;y++){const D=i[y];"number"==typeof D?m=D:m===d&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),ye(n,D,!!o||i[++y]))}return void 0===n?null:n}function z_(n,i,o,d,m,y,D,I){if(!(3&i.type))return;const F=n.data,z=F[I+1],te=function U0(n){return 1==(1&n)}(z)?W_(F,i,o,m,ga(z),D):void 0;dc(te)||(dc(y)||function V0(n){return 2==(2&n)}(z)&&(y=W_(F,null,o,m,I,D)),function Ry(n,i,o,d,m){if(i)m?n.addClass(o,d):n.removeClass(o,d);else{let y=-1===d.indexOf("-")?void 0:il.DashCase;null==m?n.removeStyle(o,d,y):("string"==typeof m&&m.endsWith("!important")&&(m=m.slice(0,-10),y|=il.Important),n.setStyle(o,d,m,y))}}(d,D,aa(Lr(),o),m,y))}function W_(n,i,o,d,m,y){const D=null===i;let I;for(;m>0;){const F=n[m],z=Array.isArray(F),te=z?F[1]:F,oe=null===te;let ve=o[m+1];ve===ri&&(ve=oe?Ve:void 0);let Ie=oe?rt(ve,d):te===d?ve:void 0;if(z&&!dc(Ie)&&(Ie=rt(F,d)),dc(Ie)&&(I=Ie,D))return I;const at=n[m+1];m=D?Fu(at):ga(at)}if(null!==i){let F=y?i.residualClasses:i.residualStyles;null!=F&&(I=rt(F,d))}return I}function dc(n){return void 0!==n}function ty(n,i){return 0!=(n.flags&(i?8:16))}function Bu(n,i=""){const o=nt(),d=ni(),m=n+Ni,y=d.firstCreatePass?kc(d,m,1,i,null):d.data[m],D=o[m]=vf(o[Gn],i);Kd(d,o,D,y),$t(y,!1)}function ny(n){return $_("",n,""),ny}function $_(n,i,o){const d=nt(),m=gi(d,n,i,o);return m!==ri&&function Nl(n,i,o){const d=aa(i,n);Zd(n[Gn],d,o)}(d,Lr(),m),$_}function Km(n,i,o,d,m){cl(ye,Yc,function Xi(n,i,o,d,m,y){const I=Yn(n,qn(),o,m);return qs(2),I?i+Me(o)+d+Me(m)+y:ri}(nt(),n,i,o,d,m),!0)}function Qm(n,i,o){const d=nt();return Rn(d,Zs(),i)&&bs(ni(),zi(),d,n,i,d[Gn],o,!0),Qm}const tf=void 0;var K0=["en",[["a","p"],["AM","PM"],tf],[["AM","PM"],tf,tf],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],tf,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],tf,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",tf,"{1} 'at' {0}",tf],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function ay(n){const o=Math.floor(Math.abs(n)),d=n.toString().replace(/^[^.]*\.?/,"").length;return 1===o&&0===d?1:5}];let Fa={};function vp(n){const i=function ly(n){return n.toLowerCase().replace(/_/g,"-")}(n);let o=s0(i);if(o)return o;const d=i.split("-")[0];if(o=s0(d),o)return o;if("en"===d)return K0;throw new ke(701,!1)}function K_(n){return vp(n)[Nn.PluralCase]}function s0(n){return n in Fa||(Fa[n]=Gi.ng&&Gi.ng.common&&Gi.ng.common.locales&&Gi.ng.common.locales[n]),Fa[n]}var Nn=(()=>((Nn=Nn||{})[Nn.LocaleId=0]="LocaleId",Nn[Nn.DayPeriodsFormat=1]="DayPeriodsFormat",Nn[Nn.DayPeriodsStandalone=2]="DayPeriodsStandalone",Nn[Nn.DaysFormat=3]="DaysFormat",Nn[Nn.DaysStandalone=4]="DaysStandalone",Nn[Nn.MonthsFormat=5]="MonthsFormat",Nn[Nn.MonthsStandalone=6]="MonthsStandalone",Nn[Nn.Eras=7]="Eras",Nn[Nn.FirstDayOfWeek=8]="FirstDayOfWeek",Nn[Nn.WeekendRange=9]="WeekendRange",Nn[Nn.DateFormat=10]="DateFormat",Nn[Nn.TimeFormat=11]="TimeFormat",Nn[Nn.DateTimeFormat=12]="DateTimeFormat",Nn[Nn.NumberSymbols=13]="NumberSymbols",Nn[Nn.NumberFormats=14]="NumberFormats",Nn[Nn.CurrencyCode=15]="CurrencyCode",Nn[Nn.CurrencySymbol=16]="CurrencySymbol",Nn[Nn.CurrencyName=17]="CurrencyName",Nn[Nn.Currencies=18]="Currencies",Nn[Nn.Directionality=19]="Directionality",Nn[Nn.PluralCase=20]="PluralCase",Nn[Nn.ExtraData=21]="ExtraData",Nn))();const Q0=["zero","one","two","few","many"],yp="en-US",Id={marker:"element"},bp={marker:"ICU"};var Ts=(()=>((Ts=Ts||{})[Ts.SHIFT=2]="SHIFT",Ts[Ts.APPEND_EAGERLY=1]="APPEND_EAGERLY",Ts[Ts.COMMENT=2]="COMMENT",Ts))();let as=yp;function a0(n){(function In(n,i){null==n&&sn(i,n,null,"!=")})(n,"Expected localeId to be defined"),"string"==typeof n&&(as=n.toLowerCase().replace(/_/g,"-"))}function Tp(n,i,o){const d=i.insertBeforeIndex,m=Array.isArray(d)?d[0]:d;return null===m?Zp(n,0,o):Ui(o[m])}function l0(n,i,o,d,m){const y=i.insertBeforeIndex;if(Array.isArray(y)){let D=d,I=null;if(3&i.type||(I=D,D=m),null!==D&&-1===i.componentOffset)for(let F=1;F<y.length;F++)Rc(n,D,o[y[F]],I,!1)}}function c0(n,i){if(n.push(i),n.length>1)for(let o=n.length-2;o>=0;o--){const d=n[o];u0(d)||uy(d,i)&&null===eg(d)&&Q_(d,i.index)}}function u0(n){return!(64&n.type)}function uy(n,i){return u0(i)||n.index>i.index}function eg(n){const i=n.insertBeforeIndex;return Array.isArray(i)?i[0]:i}function Q_(n,i){const o=n.insertBeforeIndex;Array.isArray(o)?o[0]=i:(Kp(Tp,l0),n.insertBeforeIndex=i)}function tg(n,i){const o=n.data[i];return null===o||"string"==typeof o?null:o.hasOwnProperty("currentCaseLViewIndex")?o:o.value}function Jc(n,i,o){const d=wh(n,o,64,null,null);return c0(i,d),d}function ng(n,i){const o=i[n.currentCaseLViewIndex];return null===o?o:o<0?~o:o}function dy(n){return n>>>17}function hy(n){return(131070&n)>>>1}let ig=0,rg=0;function h0(n,i,o,d){const m=o[Gn];let D,y=null;for(let I=0;I<i.length;I++){const F=i[I];if("string"==typeof F){const z=i[++I];null===o[z]&&(o[z]=vf(m,F))}else if("number"==typeof F)switch(1&F){case 0:const z=dy(F);let te,oe;if(null===y&&(y=z,D=qd(m,d)),z===y?(te=d,oe=D):(te=null,oe=Ui(o[z])),null!==oe){const At=hy(F);Rc(m,oe,o[At],te,!1);const vn=tg(n,At);if(null!==vn&&"object"==typeof vn){const Pn=ng(vn,o);null!==Pn&&h0(n,vn.create[Pn],o,o[vn.anchorIdx])}}break;case 1:const Ie=i[++I],at=i[++I];Lh(m,aa(F>>>1,o),null,null,Ie,at,null)}else switch(F){case bp:const z=i[++I],te=i[++I];null===o[te]&&to(o[te]=Lg(m,z),o);break;case Id:const oe=i[++I],ve=i[++I];null===o[ve]&&to(o[ve]=yf(m,oe,null),o)}}}function f0(n,i,o,d,m){for(let y=0;y<o.length;y++){const D=o[y],I=o[++y];if(D&m){let F="";for(let z=y+1;z<=y+I;z++){const te=o[z];if("string"==typeof te)F+=te;else if("number"==typeof te)if(te<0)F+=Me(i[d-te]);else{const oe=te>>>2;switch(3&te){case 1:const ve=o[++z],Ie=o[++z],at=n.data[oe];"string"==typeof at?Lh(i[Gn],i[oe],null,at,ve,F,Ie):bs(n,at,i,ve,F,i[Gn],Ie,!1);break;case 0:const At=i[oe];null!==At&&Zd(i[Gn],At,F);break;case 2:ob(n,tg(n,oe),i,F);break;case 3:p0(n,tg(n,oe),d,i)}}}}else{const F=o[y+1];if(F>0&&3==(3&F)){const te=tg(n,F>>>2);i[te.currentCaseLViewIndex]<0&&p0(n,te,d,i)}}y+=I}}function p0(n,i,o,d){let m=d[i.currentCaseLViewIndex];if(null!==m){let y=ig;m<0&&(m=d[i.currentCaseLViewIndex]=~m,y=-1),f0(n,d,i.update[m],o,y)}}function ob(n,i,o,d){const m=function ab(n,i){let o=n.cases.indexOf(i);if(-1===o)switch(n.type){case 1:{const d=function o0(n,i){const o=K_(i)(parseInt(n,10)),d=Q0[o];return void 0!==d?d:"other"}(i,function Ms(){return as}());o=n.cases.indexOf(d),-1===o&&"other"!==d&&(o=n.cases.indexOf("other"));break}case 0:o=n.cases.indexOf("other")}return-1===o?null:o}(i,d);if(ng(i,o)!==m&&(m0(n,i,o),o[i.currentCaseLViewIndex]=null===m?null:~m,null!==m)){const D=o[i.anchorIdx];D&&h0(n,i.create[m],o,D)}}function m0(n,i,o){let d=ng(i,o);if(null!==d){const m=i.remove[d];for(let y=0;y<m.length;y++){const D=m[y];if(D>0){const I=aa(D,o);null!==I&&Qp(o[Gn],I)}else m0(n,tg(n,~D),o)}}}function lb(){const n=[];let o,d,i=-1;function y(I,F){i=0;const z=ng(I,F);d=null!==z?I.remove[z]:Ve}function D(){if(i<d.length){const I=d[i++];return I>0?o[I]:(n.push(i,d),y(o[qt].data[~I],o),D())}return 0===n.length?null:(d=n.pop(),i=n.pop(),D())}return function m(I,F){for(o=F;n.length;)n.pop();return y(I.value,F),D}}const ev=/\ufffd(\d+):?\d*\ufffd/gi,ub=/\ufffd(\d+)\ufffd/,_0=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,sg="\ufffd",v=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,e=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,t=/\uE500/g;function g(n,i,o,d,m,y,D){const I=ea(n,d,1,null);let F=I<<Ts.SHIFT,z=co();i===z&&(z=null),null===z&&(F|=Ts.APPEND_EAGERLY),D&&(F|=Ts.COMMENT,function Og(n){void 0===pf&&(pf=n())}(lb)),m.push(F,null===y?"":y);const te=wh(n,I,D?32:1,null===y?"":y,null);c0(o,te);const oe=te.index;return $t(te,!1),null!==z&&i!==z&&function tb(n,i){let o=n.insertBeforeIndex;null===o?(Kp(Tp,l0),o=n.insertBeforeIndex=[null,i]):(function Ge(n,i,o){n!=i&&sn(o,n,i,"==")}(Array.isArray(o),!0,"Expecting array here"),o.push(i))}(z,oe),te}function _(n,i,o,d,m,y,D){const I=D.match(ev),F=g(n,i,o,y,d,I?null:D,!1);I&&x(m,D,F.index,null,0,null)}function x(n,i,o,d,m,y){const D=n.length,I=D+1;n.push(null,null);const F=D+2,z=i.split(ev);let te=0;for(let oe=0;oe<z.length;oe++){const ve=z[oe];if(1&oe){const Ie=m+parseInt(ve,10);n.push(-1-Ie),te|=A(Ie)}else""!==ve&&n.push(ve)}return n.push(o<<2|(d?1:0)),d&&n.push(d,y),n[D]=te,n[I]=n.length-F,te}function A(n){return 1<<Math.min(n,31)}function L(n){let i,y,o="",d=0,m=!1;for(;null!==(i=v.exec(n));)m?i[0]===`${sg}/*${y}${sg}`&&(d=i.index,m=!1):(o+=n.substring(d,i.index+i[0].length),y=i[1],m=!0);return o+=n.slice(d),o}function j(n,i,o,d,m,y){let D=0;const I={type:m.type,currentCaseLViewIndex:ea(n,i,1,null),anchorIdx:y,cases:[],create:[],remove:[],update:[]};(function de(n,i,o){n.push(A(i.mainBinding),2,-1-i.mainBinding,o<<2|2)})(o,m,y),function eb(n,i,o){const d=n.data[i];null===d?n.data[i]=o:d.value=o}(n,y,I);const F=m.values;for(let z=0;z<F.length;z++){const te=F[z],oe=[];for(let ve=0;ve<te.length;ve++){const Ie=te[ve];if("string"!=typeof Ie){const at=oe.push(Ie)-1;te[ve]=`\x3c!--\ufffd${at}\ufffd--\x3e`}}D=K(n,I,i,o,d,m.cases[z],te.join(""),oe)|D}D&&function ge(n,i,o){n.push(i,1,o<<2|3)}(o,D,y)}function k(n){const i=[],o=[];let d=1,m=0;const y=J(n=n.replace(_0,function(D,I,F){return d="select"===F?0:1,m=parseInt(I.slice(1),10),""}));for(let D=0;D<y.length;){let I=y[D++].trim();1===d&&(I=I.replace(/\s*(?:=)?(\w+)\s*/,"$1")),I.length&&i.push(I);const F=J(y[D++]);i.length>o.length&&o.push(F)}return{type:d,mainBinding:m,cases:i,values:o}}function J(n){if(!n)return[];let i=0;const o=[],d=[],m=/[{}]/g;let y;for(m.lastIndex=0;y=m.exec(n);){const I=y.index;if("}"==y[0]){if(o.pop(),0==o.length){const F=n.substring(i,I);_0.test(F)?d.push(k(F)):d.push(F),i=I+1}}else{if(0==o.length){const F=n.substring(i,I);d.push(F),i=I+1}o.push("{")}}const D=n.substring(i);return d.push(D),d}function K(n,i,o,d,m,y,D,I){const F=[],z=[],te=[];i.cases.push(y),i.create.push(F),i.remove.push(z),i.update.push(te);const ve=function Rf(n){const i=new Qg(n);return function rh(){try{return!!(new window.DOMParser).parseFromString(gr(""),"text/html")}catch{return!1}}()?new Sf(i):i}(function du(){return void 0!==xf?xf:typeof document<"u"?document:void 0}()).getInertBodyElement(D),Ie=function Pf(n){return"content"in n&&function i_(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}(ve)||ve;return Ie?$(n,i,o,d,F,z,te,Ie,m,I,0):0}function $(n,i,o,d,m,y,D,I,F,z,te){let oe=0,ve=I.firstChild;for(;ve;){const Ie=ea(n,o,1,null);switch(ve.nodeType){case Node.ELEMENT_NODE:const at=ve,At=at.tagName.toLowerCase();if(Ef.hasOwnProperty(At)){X(m,Id,At,F,Ie),n.data[Ie]=At;const Dt=at.attributes;for(let fi=0;fi<Dt.length;fi++){const us=Dt.item(fi),Vs=us.name.toLowerCase();us.value.match(ev)?rl.hasOwnProperty(Vs)&&x(D,us.value,Ie,us.name,0,oh[Vs]?ed:null):fe(m,Ie,us)}oe=$(n,i,o,d,m,y,D,ve,Ie,z,te+1)|oe,q(y,Ie,te)}break;case Node.TEXT_NODE:const nn=ve.textContent||"",vn=nn.match(ev);X(m,null,vn?"":nn,F,Ie),q(y,Ie,te),vn&&(oe=x(D,nn,Ie,null,0,null)|oe);break;case Node.COMMENT_NODE:const Pn=ub.exec(ve.textContent||"");if(Pn){const fi=z[parseInt(Pn[1],10)];X(m,bp,"",F,Ie),j(n,o,d,F,fi,Ie),se(y,Ie,te)}}ve=ve.nextSibling}return oe}function q(n,i,o){0===o&&n.push(i)}function se(n,i,o){0===o&&(n.push(~i),n.push(i))}function X(n,i,o,d,m){null!==i&&n.push(i),n.push(o,m,function nb(n,i,o){return n|i<<17|o<<1}(0,d,m))}function fe(n,i,o){n.push(i<<1|1,o.name,o.value)}function jt(n,i,o=-1){const d=ni(),m=nt(),y=Ni+n,D=bi(d.consts,i),I=co();d.firstCreatePass&&function h(n,i,o,d,m,y){const D=co(),I=[],F=[],z=[[]];m=function G(n,i){if(function E(n){return-1===n}(i))return L(n);{const o=n.indexOf(`:${i}${sg}`)+2+i.toString().length,d=n.search(new RegExp(`${sg}\\/\\*\\d+:${i}${sg}`));return L(n.substring(o,d))}}(m,y);const te=function s(n){return n.replace(t," ")}(m).split(e);for(let oe=0;oe<te.length;oe++){let ve=te[oe];if(1&oe){const Ie=47===ve.charCodeAt(0),At=(ve.charCodeAt(Ie?1:0),Ni+Number.parseInt(ve.substring(Ie?2:1)));if(Ie)z.shift(),$t(co(),!1);else{const nn=Jc(n,z[0],At);z.unshift([]),$t(nn,!0)}}else{const Ie=J(ve);for(let at=0;at<Ie.length;at++){let At=Ie[at];if(1&at){const nn=At;if("object"!=typeof nn)throw new Error(`Unable to parse ICU expression in "${m}" message.`);j(n,o,F,i,nn,g(n,D,z[0],o,I,"",!0).index)}else""!==At&&_(n,D,z[0],I,F,o,At)}}}n.data[d]={create:I,update:F}}(d,null===I?0:I.index,m,y,D,o);const F=d.data[y],te=Wp(d,I===m[ir]?null:I,m);(function sb(n,i,o,d){const m=n[Gn];for(let y=0;y<i.length;y++){const D=i[y++],I=i[y],z=(D&Ts.APPEND_EAGERLY)===Ts.APPEND_EAGERLY,te=D>>>Ts.SHIFT;let oe=n[te];null===oe&&(oe=n[te]=(D&Ts.COMMENT)===Ts.COMMENT?m.createComment(I):vf(m,I)),z&&null!==o&&Rc(m,o,oe,d,!1)}})(m,F.create,te,I&&8&I.type?m[I.index]:null),eu(!0)}function ot(n,i,o){jt(n,i,o),function Rt(){eu(!1)}()}function Jt(n){return function ib(n){n&&(ig|=1<<Math.min(rg,31)),rg++}(Rn(nt(),Zs(),n)),Jt}function Wt(n){!function rb(n,i,o){if(rg>0){const d=n.data[o];f0(n,i,Array.isArray(d)?d:d.update,qn()-rg-1,ig)}ig=0,rg=0}(ni(),nt(),n+Ni)}function Qn(n,i,o,d,m){if(n=Je(n),Array.isArray(n))for(let y=0;y<n.length;y++)Qn(n[y],i,o,d,m);else{const y=ni(),D=nt();let I=Ac(n)?n:Je(n.provide),F=kf(n);const z=br(),te=1048575&z.providerIndexes,oe=z.directiveStart,ve=z.providerIndexes>>20;if(Ac(n)||!n.multi){const Ie=new Vt(F,m,jc),at=ln(I,i,m?te:te+ve,oe);-1===at?(Br(ks(z,D),y,I),bn(y,n,i.length),i.push(I),z.directiveStart++,z.directiveEnd++,m&&(z.providerIndexes+=1048576),o.push(Ie),D.push(Ie)):(o[at]=Ie,D[at]=Ie)}else{const Ie=ln(I,i,te+ve,oe),at=ln(I,i,te,te+ve),nn=at>=0&&o[at];if(m&&!nn||!m&&!(Ie>=0&&o[Ie])){Br(ks(z,D),y,I);const vn=function en(n,i,o,d,m){const y=new Vt(n,o,jc);return y.multi=[],y.index=i,y.componentProviders=0,ei(y,m,d&&!o),y}(m?bt:Ci,o.length,m,d,F);!m&&nn&&(o[at].providerFactory=vn),bn(y,n,i.length,0),i.push(I),z.directiveStart++,z.directiveEnd++,m&&(z.providerIndexes+=1048576),o.push(vn),D.push(vn)}else bn(y,n,Ie>-1?Ie:at,ei(o[m?at:Ie],F,!m&&d));!m&&d&&nn&&o[at].componentProviders++}}}function bn(n,i,o,d){const m=Ac(i),y=function a_(n){return!!n.useClass}(i);if(m||y){const F=(y?Je(i.useClass):i).prototype.ngOnDestroy;if(F){const z=n.destroyHooks||(n.destroyHooks=[]);if(!m&&i.multi){const te=z.indexOf(o);-1===te?z.push(o,[d,F]):z[te+1].push(d,F)}else z.push(o,F)}}}function ei(n,i,o){return o&&n.componentProviders++,n.multi.push(i)-1}function ln(n,i,o,d){for(let m=o;m<d;m++)if(i[m]===n)return m;return-1}function Ci(n,i,o,d){return _t(this.multi,[])}function bt(n,i,o,d){const m=this.multi;let y;if(this.providerFactory){const D=this.providerFactory.componentProviders,I=jr(o,o[qt],this.providerFactory.index,d);y=I.slice(0,D),_t(m,y);for(let F=D;F<I.length;F++)y.push(I[F])}else y=[],_t(m,y);return y}function _t(n,i){for(let o=0;o<n.length;o++)i.push((0,n[o])());return i}function wn(n,i=[]){return o=>{o.providersResolver=(d,m)=>function pt(n,i,o){const d=ni();if(d.firstCreatePass){const m=ms(n);Qn(o,d.data,d.blueprint,m,!0),Qn(i,d.data,d.blueprint,m,!1)}}(d,m?m(n):n,i)}}class tn{}class ui{}function zn(n,i){return new Ar(n,i??null)}class Ar extends tn{constructor(i,o){super(),this._parent=o,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new vd(this);const d=$r(i);this._bootstrapComponents=sl(d.bootstrap),this._r3Injector=vu(i,o,[{provide:tn,useValue:this},{provide:ld,useValue:this.componentFactoryResolver}],Ke(i),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(i)}get injector(){return this._r3Injector}destroy(){const i=this._r3Injector;!i.destroyed&&i.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(i){this.destroyCbs.push(i)}}class sr extends ui{constructor(i){super(),this.moduleType=i}create(i){return new Ar(this.moduleType,i)}}class pe extends tn{constructor(i,o,d){super(),this.componentFactoryResolver=new vd(this),this.instance=null;const m=new jf([...i,{provide:tn,useValue:this},{provide:ld,useValue:this.componentFactoryResolver}],o||fu(),d,new Set(["environment"]));this.injector=m,m.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(i){this.injector.onDestroy(i)}}function re(n,i,o=null){return new pe(n,i,o).injector}let it=(()=>{class n{constructor(o){this._injector=o,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(o){if(!o.standalone)return null;if(!this.cachedInjectors.has(o.id)){const d=hm(0,o.type),m=d.length>0?re([d],this._injector,`Standalone[${o.type.name}]`):null;this.cachedInjectors.set(o.id,m)}return this.cachedInjectors.get(o.id)}ngOnDestroy(){try{for(const o of this.cachedInjectors.values())null!==o&&o.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=Mn({token:n,providedIn:"environment",factory:()=>new n(Si(Ic))}),n})();function Nt(n){n.getStandaloneInjector=i=>i.get(it).getOrCreateStandaloneInjector(n)}function An(n,i,o){const d=rr()+n,m=nt();return m[d]===ri?Bn(m,d,o?i.call(o):i()):function Tn(n,i){return n[i]}(m,d)}function ar(n,i,o,d){return py(nt(),rr(),n,i,o,d)}function Gs(n,i,o,d,m){return function ce(n,i,o,d,m,y,D){const I=i+o;return Yn(n,I,m,y)?Bn(n,I+2,D?d.call(D,m,y):d(m,y)):Mp(n,I+2)}(nt(),rr(),n,i,o,d,m)}function mo(n,i,o,d,m,y){return function Ue(n,i,o,d,m,y,D,I){const F=i+o;return function mi(n,i,o,d,m){const y=Yn(n,i,o,d);return Rn(n,i+2,m)||y}(n,F,m,y,D)?Bn(n,F+3,I?d.call(I,m,y,D):d(m,y,D)):Mp(n,F+3)}(nt(),rr(),n,i,o,d,m,y)}function Mp(n,i){const o=n[i];return o===ri?void 0:o}function py(n,i,o,d,m,y){const D=i+o;return Rn(n,D,m)?Bn(n,D+1,y?d.call(y,m):d(m)):Mp(n,D+1)}function mt(n,i){const o=ni();let d;const m=n+Ni;o.firstCreatePass?(d=function kn(n,i){if(i)for(let o=i.length-1;o>=0;o--){const d=i[o];if(n===d.name)return d}}(i,o.pipeRegistry),o.data[m]=d,d.onDestroy&&(o.destroyHooks??(o.destroyHooks=[])).push(m,d.onDestroy)):d=o.data[m];const y=d.factory||(d.factory=Ji(d.type)),D=Gt(jc);try{const I=Co(!1),F=y();return Co(I),function Pu(n,i,o,d){o>=n.data.length&&(n.data[o]=null,n.blueprint[o]=null),i[o]=d}(o,nt(),m,F),F}finally{Gt(D)}}function Ri(n,i,o){const d=n+Ni,m=nt(),y=Js(m,d);return function qr(n,i){return n[qt].data[i].pure}(m,d)?py(m,rr(),i,y.transform,o,y):y.transform(o)}function Vl(n){return i=>{setTimeout(n,void 0,i)}}const Bo=class La extends a.x{constructor(i=!1){super(),this.__isAsync=i}emit(i){super.next(i)}subscribe(i,o,d){let m=i,y=o||(()=>null),D=d;if(i&&"object"==typeof i){const F=i;m=F.next?.bind(F),y=F.error?.bind(F),D=F.complete?.bind(F)}this.__isAsync&&(y=Vl(y),m&&(m=Vl(m)),D&&(D=Vl(D)));const I=super.subscribe({next:m,error:y,complete:D});return i instanceof Y.w0&&i.add(I),I}};function As(){return this._results[Symbol.iterator]()}class Li{get changes(){return this._changes||(this._changes=new Bo)}constructor(i=!1){this._emitDistinctChangesOnly=i,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const o=Li.prototype;o[Symbol.iterator]||(o[Symbol.iterator]=As)}get(i){return this._results[i]}map(i){return this._results.map(i)}filter(i){return this._results.filter(i)}find(i){return this._results.find(i)}reduce(i,o){return this._results.reduce(i,o)}forEach(i){this._results.forEach(i)}some(i){return this._results.some(i)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(i,o){const d=this;d.dirty=!1;const m=function eo(n){return n.flat(Number.POSITIVE_INFINITY)}(i);(this._changesDetected=!function Aa(n,i,o){if(n.length!==i.length)return!1;for(let d=0;d<n.length;d++){let m=n[d],y=i[d];if(o&&(m=o(m),y=o(y)),y!==m)return!1}return!0}(d._results,m,o))&&(d._results=m,d.length=m.length,d.last=m[this.length-1],d.first=m[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Od=(()=>{class n{}return n.__NG_ELEMENT_ID__=my,n})();const ao=Od,Nd=class extends ao{constructor(i,o,d){super(),this._declarationLView=i,this._declarationTContainer=o,this.elementRef=d}createEmbeddedView(i,o){const d=this._declarationTContainer.tView,m=fd(this._declarationLView,d,i,16,null,d.declTNode,null,null,null,null,o||null);m[Hl]=this._declarationLView[this._declarationTContainer.index];const D=this._declarationLView[Ds];return null!==D&&(m[Ds]=D.createEmbeddedView(d)),Ol(d,m,i),new Ru(m)}};function my(){return Gu(br(),nt())}function Gu(n,i){return 4&n.type?new Nd(i,n,mu(n,i)):null}let nf=(()=>{class n{}return n.__NG_ELEMENT_ID__=ta,n})();function ta(){return gy(br(),nt())}const Fd=nf,og=class extends Fd{constructor(i,o,d){super(),this._lContainer=i,this._hostTNode=o,this._hostLView=d}get element(){return mu(this._hostTNode,this._hostLView)}get injector(){return new ji(this._hostTNode,this._hostLView)}get parentInjector(){const i=vs(this._hostTNode,this._hostLView);if(tr(i)){const o=pr(i,this._hostLView),d=Sr(i);return new ji(o[qt].data[d+8],o)}return new ji(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(i){const o=_a(this._lContainer);return null!==o&&o[i]||null}get length(){return this._lContainer.length-Jr}createEmbeddedView(i,o,d){let m,y;"number"==typeof d?m=d:null!=d&&(m=d.index,y=d.injector);const D=i.createEmbeddedView(o||{},y);return this.insert(D,m),D}createComponent(i,o,d,m,y){const D=i&&!function tl(n){return"function"==typeof n}(i);let I;if(D)I=o;else{const oe=o||{};I=oe.index,d=oe.injector,m=oe.projectableNodes,y=oe.environmentInjector||oe.ngModuleRef}const F=D?i:new Fl(vi(i)),z=d||this.parentInjector;if(!y&&null==F.ngModule){const ve=(D?z:this.parentInjector).get(Ic,null);ve&&(y=ve)}const te=F.create(z,m,void 0,y);return this.insert(te.hostView,I),te}insert(i,o){const d=i._lView,m=d[qt];if(function gs(n){return Fr(n[Qi])}(d)){const te=this.indexOf(i);if(-1!==te)this.detach(te);else{const oe=d[Qi],ve=new og(oe,oe[ir],oe[Qi]);ve.detach(ve.indexOf(i))}}const y=this._adjustIndex(o),D=this._lContainer;!function Vg(n,i,o,d){const m=Jr+d,y=o.length;d>0&&(o[m-1][es]=i),d<y-Jr?(i[es]=o[m],w(o,Jr+d,i)):(o.push(i),i[es]=null),i[Qi]=o;const D=i[Hl];null!==D&&o!==D&&function Ug(n,i){const o=n[Ys];i[Nr]!==i[Qi][Qi][Nr]&&(n[ml]=!0),null===o?n[Ys]=[i]:o.push(i)}(D,i);const I=i[Ds];null!==I&&I.insertView(n),i[On]|=64}(m,d,D,y);const I=Xp(y,D),F=d[Gn],z=qd(F,D[Wl]);return null!==z&&function jg(n,i,o,d,m,y){d[Fs]=m,d[ir]=i,Qd(n,d,o,1,m,y)}(m,D[ir],F,d,z,I),i.attachToViewContainerRef(),w(xp(D),y,i),i}move(i,o){return this.insert(i,o)}indexOf(i){const o=_a(this._lContainer);return null!==o?o.indexOf(i):-1}remove(i){const o=this._adjustIndex(i,-1),d=bf(this._lContainer,o);d&&(R(xp(this._lContainer),o),Hp(d[qt],d))}detach(i){const o=this._adjustIndex(i,-1),d=bf(this._lContainer,o);return d&&null!=R(xp(this._lContainer),o)?new Ru(d):null}_adjustIndex(i,o=0){return i??this.length+o}};function _a(n){return n[ts]}function xp(n){return n[ts]||(n[ts]=[])}function gy(n,i){let o;const d=i[n.index];if(Fr(d))o=d;else{let m;if(8&n.type)m=Ui(d);else{const y=i[Gn];m=y.createComment("");const D=Rs(n,i);Rc(y,qd(y,D),m,function Wg(n,i){return n.nextSibling(i)}(y,D),!1)}i[n.index]=o=md(d,i,m,n),_d(i,o)}return new og(o,n,i)}class ag{constructor(i){this.queryList=i,this.matches=null}clone(){return new ag(this.queryList)}setDirty(){this.queryList.setDirty()}}class y0{constructor(i=[]){this.queries=i}createEmbeddedView(i){const o=i.queries;if(null!==o){const d=null!==i.contentQueries?i.contentQueries[0]:o.length,m=[];for(let y=0;y<d;y++){const D=o.getByIndex(y);m.push(this.queries[D.indexInDeclarationView].clone())}return new y0(m)}return null}insertView(i){this.dirtyQueriesWithMatches(i)}detachView(i){this.dirtyQueriesWithMatches(i)}dirtyQueriesWithMatches(i){for(let o=0;o<this.queries.length;o++)null!==yb(i,o).matches&&this.queries[o].setDirty()}}class db{constructor(i,o,d=null){this.predicate=i,this.flags=o,this.read=d}}class b0{constructor(i=[]){this.queries=i}elementStart(i,o){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(i,o)}elementEnd(i){for(let o=0;o<this.queries.length;o++)this.queries[o].elementEnd(i)}embeddedTView(i){let o=null;for(let d=0;d<this.length;d++){const m=null!==o?o.length:0,y=this.getByIndex(d).embeddedTView(i,m);y&&(y.indexInDeclarationView=d,null!==o?o.push(y):o=[y])}return null!==o?new b0(o):null}template(i,o){for(let d=0;d<this.queries.length;d++)this.queries[d].template(i,o)}getByIndex(i){return this.queries[i]}get length(){return this.queries.length}track(i){this.queries.push(i)}}class T0{constructor(i,o=-1){this.metadata=i,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=o}elementStart(i,o){this.isApplyingToNode(o)&&this.matchTNode(i,o)}elementEnd(i){this._declarationNodeIndex===i.index&&(this._appliesToNextNode=!1)}template(i,o){this.elementStart(i,o)}embeddedTView(i,o){return this.isApplyingToNode(i)?(this.crossesNgTemplate=!0,this.addMatch(-i.index,o),new T0(this.metadata)):null}isApplyingToNode(i){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const o=this._declarationNodeIndex;let d=i.parent;for(;null!==d&&8&d.type&&d.index!==o;)d=d.parent;return o===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(i,o){const d=this.metadata.predicate;if(Array.isArray(d))for(let m=0;m<d.length;m++){const y=d[m];this.matchTNodeWithReadOption(i,o,MT(o,y)),this.matchTNodeWithReadOption(i,o,Rl(o,i,y,!1,!1))}else d===Od?4&o.type&&this.matchTNodeWithReadOption(i,o,-1):this.matchTNodeWithReadOption(i,o,Rl(o,i,d,!1,!1))}matchTNodeWithReadOption(i,o,d){if(null!==d){const m=this.metadata.read;if(null!==m)if(m===cd||m===nf||m===Od&&4&o.type)this.addMatch(o.index,-2);else{const y=Rl(o,i,m,!1,!1);null!==y&&this.addMatch(o.index,y)}else this.addMatch(o.index,d)}}addMatch(i,o){null===this.matches?this.matches=[i,o]:this.matches.push(i,o)}}function MT(n,i){const o=n.localNames;if(null!==o)for(let d=0;d<o.length;d+=2)if(o[d]===i)return o[d+1];return null}function DT(n,i,o,d){return-1===o?function xT(n,i){return 11&n.type?mu(n,i):4&n.type?Gu(n,i):null}(i,n):-2===o?function wT(n,i,o){return o===cd?mu(i,n):o===Od?Gu(i,n):o===nf?gy(i,n):void 0}(n,i,d):jr(n,n[qt],o,i)}function hb(n,i,o,d){const m=i[Ds].queries[d];if(null===m.matches){const y=n.data,D=o.matches,I=[];for(let F=0;F<D.length;F+=2){const z=D[F];I.push(z<0?null:DT(i,y[z],D[F+1],o.metadata.read))}m.matches=I}return m.matches}function M0(n,i,o,d){const m=n.queries.getByIndex(o),y=m.matches;if(null!==y){const D=hb(n,i,m,o);for(let I=0;I<y.length;I+=2){const F=y[I];if(F>0)d.push(D[I/2]);else{const z=y[I+1],te=i[-F];for(let oe=Jr;oe<te.length;oe++){const ve=te[oe];ve[Hl]===ve[Qi]&&M0(ve[qt],ve,z,d)}if(null!==te[Ys]){const oe=te[Ys];for(let ve=0;ve<oe.length;ve++){const Ie=oe[ve];M0(Ie[qt],Ie,z,d)}}}}}return d}function fb(n){const i=nt(),o=ni(),d=Za();Ks(d+1);const m=yb(o,d);if(n.dirty&&function Ml(n){return 4==(4&n[On])}(i)===(2==(2&m.metadata.flags))){if(null===m.matches)n.reset([]);else{const y=m.crossesNgTemplate?M0(o,i,d,[]):hb(o,i,m,d);n.reset(y,h_),n.notifyOnChanges()}return!0}return!1}function pb(n,i,o){const d=ni();d.firstCreatePass&&(vb(d,new db(n,i,o),-1),2==(2&i)&&(d.staticViewQueries=!0)),_b(d,nt(),i)}function mb(n,i,o,d){const m=ni();if(m.firstCreatePass){const y=br();vb(m,new db(i,o,d),y.index),function ST(n,i){const o=n.contentQueries||(n.contentQueries=[]);i!==(o.length?o[o.length-1]:-1)&&o.push(n.queries.length-1,i)}(m,n),2==(2&o)&&(m.staticContentQueries=!0)}_b(m,nt(),o)}function gb(){return function RT(n,i){return n[Ds].queries[i].queryList}(nt(),Za())}function _b(n,i,o){const d=new Li(4==(4&o));No(n,i,d,d.destroy),null===i[Ds]&&(i[Ds]=new y0),i[Ds].queries.push(new ag(d))}function vb(n,i,o){null===n.queries&&(n.queries=new b0),n.queries.track(new T0(i,o))}function yb(n,i){return n.queries.getByIndex(i)}function bb(n,i){return Gu(n,i)}function x0(n){return!!$r(n)}function vy(...n){}const jb=new yi("Application Initializer");let yy=(()=>{class n{constructor(o){this.appInits=o,this.resolve=vy,this.reject=vy,this.initialized=!1,this.done=!1,this.donePromise=new Promise((d,m)=>{this.resolve=d,this.reject=m})}runInitializers(){if(this.initialized)return;const o=[],d=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let m=0;m<this.appInits.length;m++){const y=this.appInits[m]();if(Rd(y))o.push(y);else if(Wc(y)){const D=new Promise((I,F)=>{y.subscribe({complete:I,error:F})});o.push(D)}}Promise.all(o).then(()=>{d()}).catch(m=>{this.reject(m)}),0===o.length&&d(),this.initialized=!0}}return n.\u0275fac=function(o){return new(o||n)(Si(jb,8))},n.\u0275prov=Mn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const kb=new yi("AppId",{providedIn:"root",factory:function Gb(){return`${C0()}${C0()}${C0()}`}});function C0(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Vb=new yi("Platform Initializer"),YT=new yi("Platform ID",{providedIn:"platform",factory:()=>"unknown"});let JT=(()=>{class n{log(o){console.log(o)}warn(o){console.warn(o)}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=Mn({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const by=new yi("LocaleId",{providedIn:"root",factory:()=>Xr(by,xn.Optional|xn.SkipSelf)||function ZT(){return typeof $localize<"u"&&$localize.locale||yp}()}),qT=new yi("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class KT{constructor(i,o){this.ngModuleFactory=i,this.componentFactories=o}}let XT=(()=>{class n{compileModuleSync(o){return new sr(o)}compileModuleAsync(o){return Promise.resolve(this.compileModuleSync(o))}compileModuleAndAllComponentsSync(o){const d=this.compileModuleSync(o),y=sl($r(o).declarations).reduce((D,I)=>{const F=vi(I);return F&&D.push(new Fl(F)),D},[]);return new KT(d,y)}compileModuleAndAllComponentsAsync(o){return Promise.resolve(this.compileModuleAndAllComponentsSync(o))}clearCache(){}clearCacheFor(o){}getModuleId(o){}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=Mn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const tM=(()=>Promise.resolve(0))();function E0(n){typeof Zone>"u"?tM.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class hc{constructor({enableLongStackTrace:i=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Bo(!1),this.onMicrotaskEmpty=new Bo(!1),this.onStable=new Bo(!1),this.onError=new Bo(!1),typeof Zone>"u")throw new ke(908,!1);Zone.assertZonePatched();const m=this;m._nesting=0,m._outer=m._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(m._inner=m._inner.fork(new Zone.TaskTrackingZoneSpec)),i&&Zone.longStackTraceZoneSpec&&(m._inner=m._inner.fork(Zone.longStackTraceZoneSpec)),m.shouldCoalesceEventChangeDetection=!d&&o,m.shouldCoalesceRunChangeDetection=d,m.lastRequestAnimationFrameId=-1,m.nativeRequestAnimationFrame=function nM(){let n=Gi.requestAnimationFrame,i=Gi.cancelAnimationFrame;if(typeof Zone<"u"&&n&&i){const o=n[Zone.__symbol__("OriginalDelegate")];o&&(n=o);const d=i[Zone.__symbol__("OriginalDelegate")];d&&(i=d)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:i}}().nativeRequestAnimationFrame,function sM(n){const i=()=>{!function rM(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Gi,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,I0(n),n.isCheckStableRunning=!0,A0(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),I0(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(o,d,m,y,D,I)=>{try{return zb(n),o.invokeTask(m,y,D,I)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===y.type||n.shouldCoalesceRunChangeDetection)&&i(),Wb(n)}},onInvoke:(o,d,m,y,D,I,F)=>{try{return zb(n),o.invoke(m,y,D,I,F)}finally{n.shouldCoalesceRunChangeDetection&&i(),Wb(n)}},onHasTask:(o,d,m,y)=>{o.hasTask(m,y),d===m&&("microTask"==y.change?(n._hasPendingMicrotasks=y.microTask,I0(n),A0(n)):"macroTask"==y.change&&(n.hasPendingMacrotasks=y.macroTask))},onHandleError:(o,d,m,y)=>(o.handleError(m,y),n.runOutsideAngular(()=>n.onError.emit(y)),!1)})}(m)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!hc.isInAngularZone())throw new ke(909,!1)}static assertNotInAngularZone(){if(hc.isInAngularZone())throw new ke(909,!1)}run(i,o,d){return this._inner.run(i,o,d)}runTask(i,o,d,m){const y=this._inner,D=y.scheduleEventTask("NgZoneEvent: "+m,i,iM,vy,vy);try{return y.runTask(D,o,d)}finally{y.cancelTask(D)}}runGuarded(i,o,d){return this._inner.runGuarded(i,o,d)}runOutsideAngular(i){return this._outer.run(i)}}const iM={};function A0(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function I0(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function zb(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function Wb(n){n._nesting--,A0(n)}class oM{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Bo,this.onMicrotaskEmpty=new Bo,this.onStable=new Bo,this.onError=new Bo}run(i,o,d){return i.apply(o,d)}runGuarded(i,o,d){return i.apply(o,d)}runOutsideAngular(i){return i()}runTask(i,o,d,m){return i.apply(o,d)}}const $b=new yi(""),Yb=new yi("");let P0,aM=(()=>{class n{constructor(o,d,m){this._ngZone=o,this.registry=d,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,P0||(function lM(n){P0=n}(m),m.addToWindow(d)),this._watchAngularEvents(),o.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{hc.assertNotInAngularZone(),E0(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())E0(()=>{for(;0!==this._callbacks.length;){let o=this._callbacks.pop();clearTimeout(o.timeoutId),o.doneCb(this._didWork)}this._didWork=!1});else{let o=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(o)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(o=>({source:o.source,creationLocation:o.creationLocation,data:o.data})):[]}addCallback(o,d,m){let y=-1;d&&d>0&&(y=setTimeout(()=>{this._callbacks=this._callbacks.filter(D=>D.timeoutId!==y),o(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:o,timeoutId:y,updateCb:m})}whenStable(o,d,m){if(m&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(o,d,m),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(o){this.registry.registerApplication(o,this)}unregisterApplication(o){this.registry.unregisterApplication(o)}findProviders(o,d,m){return[]}}return n.\u0275fac=function(o){return new(o||n)(Si(hc),Si(Jb),Si(Yb))},n.\u0275prov=Mn({token:n,factory:n.\u0275fac}),n})(),Jb=(()=>{class n{constructor(){this._applications=new Map}registerApplication(o,d){this._applications.set(o,d)}unregisterApplication(o){this._applications.delete(o)}unregisterAllApplications(){this._applications.clear()}getTestability(o){return this._applications.get(o)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(o,d=!0){return P0?.findTestabilityInTree(this,o,d)??null}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=Mn({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const Ld=!1;let rf=null;const Zb=new yi("AllowMultipleToken"),O0=new yi("PlatformDestroyListeners"),qb=new yi("appBootstrapListener");class dM{constructor(i,o){this.name=i,this.token=o}}function Xb(n,i,o=[]){const d=`Platform: ${i}`,m=new yi(d);return(y=[])=>{let D=N0();if(!D||D.injector.get(Zb,!1)){const I=[...o,...y,{provide:m,useValue:!0}];n?n(I):function hM(n){if(rf&&!rf.get(Zb,!1))throw new ke(400,!1);rf=n;const i=n.get(eT);(function Kb(n){const i=n.get(Vb,null);i&&i.forEach(o=>o())})(n)}(function Qb(n=[],i){return yu.create({name:i,providers:[{provide:xi,useValue:"platform"},{provide:O0,useValue:new Set([()=>rf=null])},...n]})}(I,d))}return function pM(n){const i=N0();if(!i)throw new ke(401,!1);return i}()}}function N0(){return rf?.get(eT)??null}let eT=(()=>{class n{constructor(o){this._injector=o,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(o,d){const m=function nT(n,i){let o;return o="noop"===n?new oM:("zone.js"===n?void 0:n)||new hc(i),o}(d?.ngZone,function tT(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(d)),y=[{provide:hc,useValue:m}];return m.run(()=>{const D=yu.create({providers:y,parent:this.injector,name:o.moduleType.name}),I=o.create(D),F=I.injector.get(gh,null);if(!F)throw new ke(402,!1);return m.runOutsideAngular(()=>{const z=m.onError.subscribe({next:te=>{F.handleError(te)}});I.onDestroy(()=>{My(this._modules,I),z.unsubscribe()})}),function iT(n,i,o){try{const d=o();return Rd(d)?d.catch(m=>{throw i.runOutsideAngular(()=>n.handleError(m)),m}):d}catch(d){throw i.runOutsideAngular(()=>n.handleError(d)),d}}(F,m,()=>{const z=I.injector.get(yy);return z.runInitializers(),z.donePromise.then(()=>(a0(I.injector.get(by,yp)||yp),this._moduleDoBootstrap(I),I))})})}bootstrapModule(o,d=[]){const m=rT({},d);return function cM(n,i,o){const d=new sr(o);return Promise.resolve(d)}(0,0,o).then(y=>this.bootstrapModuleFactory(y,m))}_moduleDoBootstrap(o){const d=o.injector.get(Ty);if(o._bootstrapComponents.length>0)o._bootstrapComponents.forEach(m=>d.bootstrap(m));else{if(!o.instance.ngDoBootstrap)throw new ke(-403,!1);o.instance.ngDoBootstrap(d)}this._modules.push(o)}onDestroy(o){this._destroyListeners.push(o)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ke(404,!1);this._modules.slice().forEach(d=>d.destroy()),this._destroyListeners.forEach(d=>d());const o=this._injector.get(O0,null);o&&(o.forEach(d=>d()),o.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(o){return new(o||n)(Si(yu))},n.\u0275prov=Mn({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function rT(n,i){return Array.isArray(i)?i.reduce(rT,n):{...n,...i}}let Ty=(()=>{class n{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(o,d,m){this._zone=o,this._injector=d,this._exceptionHandler=m,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const y=new be.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),D=new be.y(I=>{let F;this._zone.runOutsideAngular(()=>{F=this._zone.onStable.subscribe(()=>{hc.assertNotInAngularZone(),E0(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const z=this._zone.onUnstable.subscribe(()=>{hc.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{F.unsubscribe(),z.unsubscribe()}});this.isStable=(0,xe.T)(y,D.pipe(function St(n={}){const{connector:i=(()=>new a.x),resetOnError:o=!0,resetOnComplete:d=!0,resetOnRefCountZero:m=!0}=n;return y=>{let D,I,F,z=0,te=!1,oe=!1;const ve=()=>{I?.unsubscribe(),I=void 0},Ie=()=>{ve(),D=F=void 0,te=oe=!1},at=()=>{const At=D;Ie(),At?.unsubscribe()};return(0,Xe.e)((At,nn)=>{z++,!oe&&!te&&ve();const vn=F=F??i();nn.add(()=>{z--,0===z&&!oe&&!te&&(I=je(at,m))}),vn.subscribe(nn),!D&&z>0&&(D=new ze.Hp({next:Pn=>vn.next(Pn),error:Pn=>{oe=!0,ve(),I=je(Ie,o,Pn),vn.error(Pn)},complete:()=>{te=!0,ve(),I=je(Ie,d),vn.complete()}}),(0,Re.Xf)(At).subscribe(D))})(y)}}()))}bootstrap(o,d){const m=o instanceof _m;if(!this._injector.get(yy).done){!m&&Qr(o);throw new ke(405,Ld)}let D;D=m?o:this._injector.get(ld).resolveComponentFactory(o),this.componentTypes.push(D.componentType);const I=function uM(n){return n.isBoundToModule}(D)?void 0:this._injector.get(tn),z=D.create(yu.NULL,[],d||D.selector,I),te=z.location.nativeElement,oe=z.injector.get($b,null);return oe?.registerApplication(te),z.onDestroy(()=>{this.detachView(z.hostView),My(this.components,z),oe?.unregisterApplication(te)}),this._loadComponent(z),z}tick(){if(this._runningTick)throw new ke(101,!1);try{this._runningTick=!0;for(let o of this._views)o.detectChanges()}catch(o){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(o))}finally{this._runningTick=!1}}attachView(o){const d=o;this._views.push(d),d.attachToAppRef(this)}detachView(o){const d=o;My(this._views,d),d.detachFromAppRef()}_loadComponent(o){this.attachView(o.hostView),this.tick(),this.components.push(o);const d=this._injector.get(qb,[]);d.push(...this._bootstrapListeners),d.forEach(m=>m(o))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(o=>o()),this._views.slice().forEach(o=>o.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(o){return this._destroyListeners.push(o),()=>My(this._destroyListeners,o)}destroy(){if(this._destroyed)throw new ke(406,!1);const o=this._injector;o.destroy&&!o.destroyed&&o.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(o){return new(o||n)(Si(hc),Si(Ic),Si(gh))},n.\u0275prov=Mn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function My(n,i){const o=n.indexOf(i);o>-1&&n.splice(o,1)}let gM=(()=>{class n{}return n.__NG_ELEMENT_ID__=_M,n})();function _M(n){return function vM(n,i,o){if(wa(n)&&!o){const d=is(n.index,i);return new Ru(d,d)}return 47&n.type?new Ru(i[Nr],i):null}(br(),nt(),16==(16&n))}class cT{constructor(){}supports(i){return De(i)}create(i){return new DM(i)}}const xM=(n,i)=>i;class DM{constructor(i){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=i||xM}forEachItem(i){let o;for(o=this._itHead;null!==o;o=o._next)i(o)}forEachOperation(i){let o=this._itHead,d=this._removalsHead,m=0,y=null;for(;o||d;){const D=!d||o&&o.currentIndex<dT(d,m,y)?o:d,I=dT(D,m,y),F=D.currentIndex;if(D===d)m--,d=d._nextRemoved;else if(o=o._next,null==D.previousIndex)m++;else{y||(y=[]);const z=I-m,te=F-m;if(z!=te){for(let ve=0;ve<z;ve++){const Ie=ve<y.length?y[ve]:y[ve]=0,at=Ie+ve;te<=at&&at<z&&(y[ve]=Ie+1)}y[D.previousIndex]=te-z}}I!==F&&i(D,I,F)}}forEachPreviousItem(i){let o;for(o=this._previousItHead;null!==o;o=o._nextPrevious)i(o)}forEachAddedItem(i){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)i(o)}forEachMovedItem(i){let o;for(o=this._movesHead;null!==o;o=o._nextMoved)i(o)}forEachRemovedItem(i){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)i(o)}forEachIdentityChange(i){let o;for(o=this._identityChangesHead;null!==o;o=o._nextIdentityChange)i(o)}diff(i){if(null==i&&(i=[]),!De(i))throw new ke(900,!1);return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let m,y,D,o=this._itHead,d=!1;if(Array.isArray(i)){this.length=i.length;for(let I=0;I<this.length;I++)y=i[I],D=this._trackByFn(I,y),null!==o&&Object.is(o.trackById,D)?(d&&(o=this._verifyReinsertion(o,y,D,I)),Object.is(o.item,y)||this._addIdentityChange(o,y)):(o=this._mismatch(o,y,D,I),d=!0),o=o._next}else m=0,function Tt(n,i){if(Array.isArray(n))for(let o=0;o<n.length;o++)i(n[o]);else{const o=n[Symbol.iterator]();let d;for(;!(d=o.next()).done;)i(d.value)}}(i,I=>{D=this._trackByFn(m,I),null!==o&&Object.is(o.trackById,D)?(d&&(o=this._verifyReinsertion(o,I,D,m)),Object.is(o.item,I)||this._addIdentityChange(o,I)):(o=this._mismatch(o,I,D,m),d=!0),o=o._next,m++}),this.length=m;return this._truncate(o),this.collection=i,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let i;for(i=this._previousItHead=this._itHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._additionsHead;null!==i;i=i._nextAdded)i.previousIndex=i.currentIndex;for(this._additionsHead=this._additionsTail=null,i=this._movesHead;null!==i;i=i._nextMoved)i.previousIndex=i.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(i,o,d,m){let y;return null===i?y=this._itTail:(y=i._prev,this._remove(i)),null!==(i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(i.item,o)||this._addIdentityChange(i,o),this._reinsertAfter(i,y,m)):null!==(i=null===this._linkedRecords?null:this._linkedRecords.get(d,m))?(Object.is(i.item,o)||this._addIdentityChange(i,o),this._moveAfter(i,y,m)):i=this._addAfter(new wM(o,d),y,m),i}_verifyReinsertion(i,o,d,m){let y=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==y?i=this._reinsertAfter(y,i._prev,m):i.currentIndex!=m&&(i.currentIndex=m,this._addToMoves(i,m)),i}_truncate(i){for(;null!==i;){const o=i._next;this._addToRemovals(this._unlink(i)),i=o}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(i,o,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(i);const m=i._prevRemoved,y=i._nextRemoved;return null===m?this._removalsHead=y:m._nextRemoved=y,null===y?this._removalsTail=m:y._prevRemoved=m,this._insertAfter(i,o,d),this._addToMoves(i,d),i}_moveAfter(i,o,d){return this._unlink(i),this._insertAfter(i,o,d),this._addToMoves(i,d),i}_addAfter(i,o,d){return this._insertAfter(i,o,d),this._additionsTail=null===this._additionsTail?this._additionsHead=i:this._additionsTail._nextAdded=i,i}_insertAfter(i,o,d){const m=null===o?this._itHead:o._next;return i._next=m,i._prev=o,null===m?this._itTail=i:m._prev=i,null===o?this._itHead=i:o._next=i,null===this._linkedRecords&&(this._linkedRecords=new uT),this._linkedRecords.put(i),i.currentIndex=d,i}_remove(i){return this._addToRemovals(this._unlink(i))}_unlink(i){null!==this._linkedRecords&&this._linkedRecords.remove(i);const o=i._prev,d=i._next;return null===o?this._itHead=d:o._next=d,null===d?this._itTail=o:d._prev=o,i}_addToMoves(i,o){return i.previousIndex===o||(this._movesTail=null===this._movesTail?this._movesHead=i:this._movesTail._nextMoved=i),i}_addToRemovals(i){return null===this._unlinkedRecords&&(this._unlinkedRecords=new uT),this._unlinkedRecords.put(i),i.currentIndex=null,i._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=i,i._prevRemoved=null):(i._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=i),i}_addIdentityChange(i,o){return i.item=o,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=i:this._identityChangesTail._nextIdentityChange=i,i}}class wM{constructor(i,o){this.item=i,this.trackById=o,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class RM{constructor(){this._head=null,this._tail=null}add(i){null===this._head?(this._head=this._tail=i,i._nextDup=null,i._prevDup=null):(this._tail._nextDup=i,i._prevDup=this._tail,i._nextDup=null,this._tail=i)}get(i,o){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===o||o<=d.currentIndex)&&Object.is(d.trackById,i))return d;return null}remove(i){const o=i._prevDup,d=i._nextDup;return null===o?this._head=d:o._nextDup=d,null===d?this._tail=o:d._prevDup=o,null===this._head}}class uT{constructor(){this.map=new Map}put(i){const o=i.trackById;let d=this.map.get(o);d||(d=new RM,this.map.set(o,d)),d.add(i)}get(i,o){const m=this.map.get(i);return m?m.get(i,o):null}remove(i){const o=i.trackById;return this.map.get(o).remove(i)&&this.map.delete(o),i}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function dT(n,i,o){const d=n.previousIndex;if(null===d)return d;let m=0;return o&&d<o.length&&(m=o[d]),d+i+m}class hT{constructor(){}supports(i){return i instanceof Map||xt(i)}create(){return new SM}}class SM{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(i){let o;for(o=this._mapHead;null!==o;o=o._next)i(o)}forEachPreviousItem(i){let o;for(o=this._previousMapHead;null!==o;o=o._nextPrevious)i(o)}forEachChangedItem(i){let o;for(o=this._changesHead;null!==o;o=o._nextChanged)i(o)}forEachAddedItem(i){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)i(o)}forEachRemovedItem(i){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)i(o)}diff(i){if(i){if(!(i instanceof Map||xt(i)))throw new ke(900,!1)}else i=new Map;return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let o=this._mapHead;if(this._appendAfter=null,this._forEach(i,(d,m)=>{if(o&&o.key===m)this._maybeAddToChanges(o,d),this._appendAfter=o,o=o._next;else{const y=this._getOrCreateRecordForKey(m,d);o=this._insertBeforeOrAppend(o,y)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(let d=o;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(i,o){if(i){const d=i._prev;return o._next=i,o._prev=d,i._prev=o,d&&(d._next=o),i===this._mapHead&&(this._mapHead=o),this._appendAfter=i,i}return this._appendAfter?(this._appendAfter._next=o,o._prev=this._appendAfter):this._mapHead=o,this._appendAfter=o,null}_getOrCreateRecordForKey(i,o){if(this._records.has(i)){const m=this._records.get(i);this._maybeAddToChanges(m,o);const y=m._prev,D=m._next;return y&&(y._next=D),D&&(D._prev=y),m._next=null,m._prev=null,m}const d=new CM(i);return this._records.set(i,d),d.currentValue=o,this._addToAdditions(d),d}_reset(){if(this.isDirty){let i;for(this._previousMapHead=this._mapHead,i=this._previousMapHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._changesHead;null!==i;i=i._nextChanged)i.previousValue=i.currentValue;for(i=this._additionsHead;null!=i;i=i._nextAdded)i.previousValue=i.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(i,o){Object.is(o,i.currentValue)||(i.previousValue=i.currentValue,i.currentValue=o,this._addToChanges(i))}_addToAdditions(i){null===this._additionsHead?this._additionsHead=this._additionsTail=i:(this._additionsTail._nextAdded=i,this._additionsTail=i)}_addToChanges(i){null===this._changesHead?this._changesHead=this._changesTail=i:(this._changesTail._nextChanged=i,this._changesTail=i)}_forEach(i,o){i instanceof Map?i.forEach(o):Object.keys(i).forEach(d=>o(i[d],d))}}class CM{constructor(i){this.key=i,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function fT(){return new k0([new cT])}let k0=(()=>{class n{constructor(o){this.factories=o}static create(o,d){if(null!=d){const m=d.factories.slice();o=o.concat(m)}return new n(o)}static extend(o){return{provide:n,useFactory:d=>n.create(o,d||fT()),deps:[[n,new nl,new qu]]}}find(o){const d=this.factories.find(m=>m.supports(o));if(null!=d)return d;throw new ke(901,!1)}}return n.\u0275prov=Mn({token:n,providedIn:"root",factory:fT}),n})();function pT(){return new G0([new hT])}let G0=(()=>{class n{constructor(o){this.factories=o}static create(o,d){if(d){const m=d.factories.slice();o=o.concat(m)}return new n(o)}static extend(o){return{provide:n,useFactory:d=>n.create(o,d||pT()),deps:[[n,new nl,new qu]]}}find(o){const d=this.factories.find(m=>m.supports(o));if(d)return d;throw new ke(901,!1)}}return n.\u0275prov=Mn({token:n,providedIn:"root",factory:pT}),n})();const IM=Xb(null,"core",[]);let PM=(()=>{class n{constructor(o){}}return n.\u0275fac=function(o){return new(o||n)(Si(Ty))},n.\u0275mod=vo({type:n}),n.\u0275inj=Ei({}),n})();function OM(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}function FM(n,i){const o=vi(n),d=i.elementInjector||fu();return new Fl(o).create(d,i.projectableNodes,i.hostElement,i.environmentInjector)}},1481:(gn,qe,ee)=>{ee.d(qe,{Dx:()=>ki,b2:()=>Pi,q6:()=>va});var a=ee(6895),Y=ee(1571);class be extends a.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class xe extends be{static makeCurrent(){(0,a.HT)(new xe)}onAndCancel(_e,ae,Ee){return _e.addEventListener(ae,Ee,!1),()=>{_e.removeEventListener(ae,Ee,!1)}}dispatchEvent(_e,ae){_e.dispatchEvent(ae)}remove(_e){_e.parentNode&&_e.parentNode.removeChild(_e)}createElement(_e,ae){return(ae=ae||this.getDefaultDocument()).createElement(_e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(_e){return _e.nodeType===Node.ELEMENT_NODE}isShadowRoot(_e){return _e instanceof DocumentFragment}getGlobalEventTarget(_e,ae){return"window"===ae?window:"document"===ae?_e:"body"===ae?_e.body:null}getBaseHref(_e){const ae=function ze(){return Re=Re||document.querySelector("base"),Re?Re.getAttribute("href"):null}();return null==ae?null:function St(Ne){Xe=Xe||document.createElement("a"),Xe.setAttribute("href",Ne);const _e=Xe.pathname;return"/"===_e.charAt(0)?_e:`/${_e}`}(ae)}resetBaseElement(){Re=null}getUserAgent(){return window.navigator.userAgent}getCookie(_e){return(0,a.Mx)(document.cookie,_e)}}let Xe,Re=null;const je=new Y.OlP("TRANSITION_ID"),Oe=[{provide:Y.ip1,useFactory:function Pe(Ne,_e,ae){return()=>{ae.get(Y.CZH).donePromise.then(()=>{const Ee=(0,a.q)(),Ve=_e.querySelectorAll(`style[ng-transition="${Ne}"]`);for(let rn=0;rn<Ve.length;rn++)Ee.remove(Ve[rn])})}},deps:[je,a.K0,Y.zs3],multi:!0}];let Xt=(()=>{class Ne{build(){return new XMLHttpRequest}}return Ne.\u0275fac=function(ae){return new(ae||Ne)},Ne.\u0275prov=Y.Yz7({token:Ne,factory:Ne.\u0275fac}),Ne})();const et=new Y.OlP("EventManagerPlugins");let Ct=(()=>{class Ne{constructor(ae,Ee){this._zone=Ee,this._eventNameToPlugin=new Map,ae.forEach(Ve=>{Ve.manager=this}),this._plugins=ae.slice().reverse()}addEventListener(ae,Ee,Ve){return this._findPluginFor(Ee).addEventListener(ae,Ee,Ve)}addGlobalEventListener(ae,Ee,Ve){return this._findPluginFor(Ee).addGlobalEventListener(ae,Ee,Ve)}getZone(){return this._zone}_findPluginFor(ae){const Ee=this._eventNameToPlugin.get(ae);if(Ee)return Ee;const Ve=this._plugins;for(let rn=0;rn<Ve.length;rn++){const Hn=Ve[rn];if(Hn.supports(ae))return this._eventNameToPlugin.set(ae,Hn),Hn}throw new Error(`No event manager plugin found for event ${ae}`)}}return Ne.\u0275fac=function(ae){return new(ae||Ne)(Y.LFG(et),Y.LFG(Y.R0b))},Ne.\u0275prov=Y.Yz7({token:Ne,factory:Ne.\u0275fac}),Ne})();class Je{constructor(_e){this._doc=_e}addGlobalEventListener(_e,ae,Ee){const Ve=(0,a.q)().getGlobalEventTarget(this._doc,_e);if(!Ve)throw new Error(`Unsupported event target ${Ve} for event ${ae}`);return this.addEventListener(Ve,ae,Ee)}}let Ot=(()=>{class Ne{constructor(){this.usageCount=new Map}addStyles(ae){for(const Ee of ae)1===this.changeUsageCount(Ee,1)&&this.onStyleAdded(Ee)}removeStyles(ae){for(const Ee of ae)0===this.changeUsageCount(Ee,-1)&&this.onStyleRemoved(Ee)}onStyleRemoved(ae){}onStyleAdded(ae){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(ae,Ee){const Ve=this.usageCount;let rn=Ve.get(ae)??0;return rn+=Ee,rn>0?Ve.set(ae,rn):Ve.delete(ae),rn}ngOnDestroy(){for(const ae of this.getAllStyles())this.onStyleRemoved(ae);this.usageCount.clear()}}return Ne.\u0275fac=function(ae){return new(ae||Ne)},Ne.\u0275prov=Y.Yz7({token:Ne,factory:Ne.\u0275fac}),Ne})(),It=(()=>{class Ne extends Ot{constructor(ae){super(),this.doc=ae,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(ae){for(const Ee of this.hostNodes)this.addStyleToHost(Ee,ae)}onStyleRemoved(ae){const Ee=this.styleRef;Ee.get(ae)?.forEach(rn=>rn.remove()),Ee.delete(ae)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(ae){this.hostNodes.add(ae);for(const Ee of this.getAllStyles())this.addStyleToHost(ae,Ee)}removeHost(ae){this.hostNodes.delete(ae)}addStyleToHost(ae,Ee){const Ve=this.doc.createElement("style");Ve.textContent=Ee,ae.appendChild(Ve);const rn=this.styleRef.get(Ee);rn?rn.push(Ve):this.styleRef.set(Ee,[Ve])}resetHostNodes(){const ae=this.hostNodes;ae.clear(),ae.add(this.doc.head)}}return Ne.\u0275fac=function(ae){return new(ae||Ne)(Y.LFG(a.K0))},Ne.\u0275prov=Y.Yz7({token:Ne,factory:Ne.\u0275fac}),Ne})();const Bt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},pi=/%COMP%/g,Pt=new Y.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function kt(Ne,_e){return _e.flat(100).map(ae=>ae.replace(pi,Ne))}function ai(Ne){return _e=>{if("__ngUnwrap__"===_e)return Ne;!1===Ne(_e)&&(_e.preventDefault(),_e.returnValue=!1)}}let cn=(()=>{class Ne{constructor(ae,Ee,Ve,rn){this.eventManager=ae,this.sharedStylesHost=Ee,this.appId=Ve,this.removeStylesOnCompDestory=rn,this.rendererByCompId=new Map,this.defaultRenderer=new Ce(ae)}createRenderer(ae,Ee){if(!ae||!Ee)return this.defaultRenderer;const Ve=this.getOrCreateRenderer(ae,Ee);return Ve instanceof mn?Ve.applyToHost(ae):Ve instanceof wt&&Ve.applyStyles(),Ve}getOrCreateRenderer(ae,Ee){const Ve=this.rendererByCompId;let rn=Ve.get(Ee.id);if(!rn){const Hn=this.eventManager,Vi=this.sharedStylesHost,cr=this.removeStylesOnCompDestory;switch(Ee.encapsulation){case Y.ifc.Emulated:rn=new mn(Hn,Vi,Ee,this.appId,cr);break;case Y.ifc.ShadowDom:return new Et(Hn,Vi,ae,Ee);default:rn=new wt(Hn,Vi,Ee,cr)}rn.onDestroy=()=>Ve.delete(Ee.id),Ve.set(Ee.id,rn)}return rn}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return Ne.\u0275fac=function(ae){return new(ae||Ne)(Y.LFG(Ct),Y.LFG(It),Y.LFG(Y.AFp),Y.LFG(Pt))},Ne.\u0275prov=Y.Yz7({token:Ne,factory:Ne.\u0275fac}),Ne})();class Ce{constructor(_e){this.eventManager=_e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(_e,ae){return ae?document.createElementNS(Bt[ae]||ae,_e):document.createElement(_e)}createComment(_e){return document.createComment(_e)}createText(_e){return document.createTextNode(_e)}appendChild(_e,ae){(Qe(_e)?_e.content:_e).appendChild(ae)}insertBefore(_e,ae,Ee){_e&&(Qe(_e)?_e.content:_e).insertBefore(ae,Ee)}removeChild(_e,ae){_e&&_e.removeChild(ae)}selectRootElement(_e,ae){let Ee="string"==typeof _e?document.querySelector(_e):_e;if(!Ee)throw new Error(`The selector "${_e}" did not match any elements`);return ae||(Ee.textContent=""),Ee}parentNode(_e){return _e.parentNode}nextSibling(_e){return _e.nextSibling}setAttribute(_e,ae,Ee,Ve){if(Ve){ae=Ve+":"+ae;const rn=Bt[Ve];rn?_e.setAttributeNS(rn,ae,Ee):_e.setAttribute(ae,Ee)}else _e.setAttribute(ae,Ee)}removeAttribute(_e,ae,Ee){if(Ee){const Ve=Bt[Ee];Ve?_e.removeAttributeNS(Ve,ae):_e.removeAttribute(`${Ee}:${ae}`)}else _e.removeAttribute(ae)}addClass(_e,ae){_e.classList.add(ae)}removeClass(_e,ae){_e.classList.remove(ae)}setStyle(_e,ae,Ee,Ve){Ve&(Y.JOm.DashCase|Y.JOm.Important)?_e.style.setProperty(ae,Ee,Ve&Y.JOm.Important?"important":""):_e.style[ae]=Ee}removeStyle(_e,ae,Ee){Ee&Y.JOm.DashCase?_e.style.removeProperty(ae):_e.style[ae]=""}setProperty(_e,ae,Ee){_e[ae]=Ee}setValue(_e,ae){_e.nodeValue=ae}listen(_e,ae,Ee){return"string"==typeof _e?this.eventManager.addGlobalEventListener(_e,ae,ai(Ee)):this.eventManager.addEventListener(_e,ae,ai(Ee))}}function Qe(Ne){return"TEMPLATE"===Ne.tagName&&void 0!==Ne.content}class Et extends Ce{constructor(_e,ae,Ee,Ve){super(_e),this.sharedStylesHost=ae,this.hostEl=Ee,this.shadowRoot=Ee.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const rn=kt(Ve.id,Ve.styles);for(const Hn of rn){const Vi=document.createElement("style");Vi.textContent=Hn,this.shadowRoot.appendChild(Vi)}}nodeOrShadowRoot(_e){return _e===this.hostEl?this.shadowRoot:_e}appendChild(_e,ae){return super.appendChild(this.nodeOrShadowRoot(_e),ae)}insertBefore(_e,ae,Ee){return super.insertBefore(this.nodeOrShadowRoot(_e),ae,Ee)}removeChild(_e,ae){return super.removeChild(this.nodeOrShadowRoot(_e),ae)}parentNode(_e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(_e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class wt extends Ce{constructor(_e,ae,Ee,Ve,rn=Ee.id){super(_e),this.sharedStylesHost=ae,this.removeStylesOnCompDestory=Ve,this.rendererUsageCount=0,this.styles=kt(rn,Ee.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class mn extends wt{constructor(_e,ae,Ee,Ve,rn){const Hn=Ve+"-"+Ee.id;super(_e,ae,Ee,rn,Hn),this.contentAttr=function fn(Ne){return"_ngcontent-%COMP%".replace(pi,Ne)}(Hn),this.hostAttr=function Zt(Ne){return"_nghost-%COMP%".replace(pi,Ne)}(Hn)}applyToHost(_e){this.applyStyles(),this.setAttribute(_e,this.hostAttr,"")}createElement(_e,ae){const Ee=super.createElement(_e,ae);return super.setAttribute(Ee,this.contentAttr,""),Ee}}let Jn=(()=>{class Ne extends Je{constructor(ae){super(ae)}supports(ae){return!0}addEventListener(ae,Ee,Ve){return ae.addEventListener(Ee,Ve,!1),()=>this.removeEventListener(ae,Ee,Ve)}removeEventListener(ae,Ee,Ve){return ae.removeEventListener(Ee,Ve)}}return Ne.\u0275fac=function(ae){return new(ae||Ne)(Y.LFG(a.K0))},Ne.\u0275prov=Y.Yz7({token:Ne,factory:Ne.\u0275fac}),Ne})();const Yi=["alt","control","meta","shift"],Cn={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},In={alt:Ne=>Ne.altKey,control:Ne=>Ne.ctrlKey,meta:Ne=>Ne.metaKey,shift:Ne=>Ne.shiftKey};let sn=(()=>{class Ne extends Je{constructor(ae){super(ae)}supports(ae){return null!=Ne.parseEventName(ae)}addEventListener(ae,Ee,Ve){const rn=Ne.parseEventName(Ee),Hn=Ne.eventCallback(rn.fullKey,Ve,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,a.q)().onAndCancel(ae,rn.domEventName,Hn))}static parseEventName(ae){const Ee=ae.toLowerCase().split("."),Ve=Ee.shift();if(0===Ee.length||"keydown"!==Ve&&"keyup"!==Ve)return null;const rn=Ne._normalizeKey(Ee.pop());let Hn="",Vi=Ee.indexOf("code");if(Vi>-1&&(Ee.splice(Vi,1),Hn="code."),Yi.forEach(fs=>{const wr=Ee.indexOf(fs);wr>-1&&(Ee.splice(wr,1),Hn+=fs+".")}),Hn+=rn,0!=Ee.length||0===rn.length)return null;const cr={};return cr.domEventName=Ve,cr.fullKey=Hn,cr}static matchEventFullKeyCode(ae,Ee){let Ve=Cn[ae.key]||ae.key,rn="";return Ee.indexOf("code.")>-1&&(Ve=ae.code,rn="code."),!(null==Ve||!Ve)&&(Ve=Ve.toLowerCase()," "===Ve?Ve="space":"."===Ve&&(Ve="dot"),Yi.forEach(Hn=>{Hn!==Ve&&(0,In[Hn])(ae)&&(rn+=Hn+".")}),rn+=Ve,rn===Ee)}static eventCallback(ae,Ee,Ve){return rn=>{Ne.matchEventFullKeyCode(rn,ae)&&Ve.runGuarded(()=>Ee(rn))}}static _normalizeKey(ae){return"esc"===ae?"escape":ae}}return Ne.\u0275fac=function(ae){return new(ae||Ne)(Y.LFG(a.K0))},Ne.\u0275prov=Y.Yz7({token:Ne,factory:Ne.\u0275fac}),Ne})();const va=(0,Y.eFA)(Y._c5,"browser",[{provide:Y.Lbi,useValue:a.bD},{provide:Y.g9A,useValue:function Ei(){xe.makeCurrent()},multi:!0},{provide:a.K0,useFactory:function ja(){return(0,Y.RDi)(document),document},deps:[]}]),Pr=new Y.OlP(""),jo=[{provide:Y.rWj,useClass:class Ke{addToWindow(_e){Y.dqk.getAngularTestability=(Ee,Ve=!0)=>{const rn=_e.findTestabilityInTree(Ee,Ve);if(null==rn)throw new Error("Could not find testability for element.");return rn},Y.dqk.getAllAngularTestabilities=()=>_e.getAllTestabilities(),Y.dqk.getAllAngularRootElements=()=>_e.getAllRootElements(),Y.dqk.frameworkStabilizers||(Y.dqk.frameworkStabilizers=[]),Y.dqk.frameworkStabilizers.push(Ee=>{const Ve=Y.dqk.getAllAngularTestabilities();let rn=Ve.length,Hn=!1;const Vi=function(cr){Hn=Hn||cr,rn--,0==rn&&Ee(Hn)};Ve.forEach(function(cr){cr.whenStable(Vi)})})}findTestabilityInTree(_e,ae,Ee){return null==ae?null:_e.getTestability(ae)??(Ee?(0,a.q)().isShadowRoot(ae)?this.findTestabilityInTree(_e,ae.host,!0):this.findTestabilityInTree(_e,ae.parentElement,!0):null)}},deps:[]},{provide:Y.lri,useClass:Y.dDg,deps:[Y.R0b,Y.eoX,Y.rWj]},{provide:Y.dDg,useClass:Y.dDg,deps:[Y.R0b,Y.eoX,Y.rWj]}],go=[{provide:Y.zSh,useValue:"root"},{provide:Y.qLn,useFactory:function lr(){return new Y.qLn},deps:[]},{provide:et,useClass:Jn,multi:!0,deps:[a.K0,Y.R0b,Y.Lbi]},{provide:et,useClass:sn,multi:!0,deps:[a.K0]},{provide:cn,useClass:cn,deps:[Ct,It,Y.AFp,Pt]},{provide:Y.FYo,useExisting:cn},{provide:Ot,useExisting:It},{provide:It,useClass:It,deps:[a.K0]},{provide:Ct,useClass:Ct,deps:[et,Y.R0b]},{provide:a.JF,useClass:Xt,deps:[]},[]];let Pi=(()=>{class Ne{constructor(ae){}static withServerTransition(ae){return{ngModule:Ne,providers:[{provide:Y.AFp,useValue:ae.appId},{provide:je,useExisting:Y.AFp},Oe]}}}return Ne.\u0275fac=function(ae){return new(ae||Ne)(Y.LFG(Pr,12))},Ne.\u0275mod=Y.oAB({type:Ne}),Ne.\u0275inj=Y.cJS({providers:[...go,...jo],imports:[a.ez,Y.hGG]}),Ne})(),ki=(()=>{class Ne{constructor(ae){this._doc=ae}getTitle(){return this._doc.title}setTitle(ae){this._doc.title=ae||""}}return Ne.\u0275fac=function(ae){return new(ae||Ne)(Y.LFG(a.K0))},Ne.\u0275prov=Y.Yz7({token:Ne,factory:function(ae){let Ee=null;return Ee=ae?new ae:function Us(){return new ki((0,Y.LFG)(a.K0))}(),Ee},providedIn:"root"}),Ne})();typeof window<"u"&&window},2655:(gn,qe,ee)=>{ee.d(qe,{gz:()=>Go,F0:()=>Ki,Bz:()=>qo,lC:()=>Ji});var a=ee(1571),Y=ee(2076),be=ee(9646),xe=ee(1135);const ze=(0,ee(3888).d)(w=>function(){w(this),this.name="EmptyError",this.message="no elements in sequence"});var Xe=ee(9841),St=ee(7272),je=ee(9751),Pe=ee(8421);function Oe(w){return new je.y(R=>{(0,Pe.Xf)(w()).subscribe(R)})}var Ke=ee(9635),Xt=ee(576);function et(w,R){const T=(0,Xt.m)(w)?w:()=>w,P=U=>U.error(T());return new je.y(R?U=>R.schedule(P,0,U):P)}var Ct=ee(515),Je=ee(727),Ot=ee(4482),It=ee(5403);function Bt(){return(0,Ot.e)((w,R)=>{let T=null;w._refCount++;const P=(0,It.x)(R,void 0,void 0,void 0,()=>{if(!w||w._refCount<=0||0<--w._refCount)return void(T=null);const U=w._connection,Z=T;T=null,U&&(!Z||U===Z)&&U.unsubscribe(),R.unsubscribe()});w.subscribe(P),P.closed||(T=w.connect())})}class pi extends je.y{constructor(R,T){super(),this.source=R,this.subjectFactory=T,this._subject=null,this._refCount=0,this._connection=null,(0,Ot.A)(R)&&(this.lift=R.lift)}_subscribe(R){return this.getSubject().subscribe(R)}getSubject(){const R=this._subject;return(!R||R.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:R}=this;this._subject=this._connection=null,R?.unsubscribe()}connect(){let R=this._connection;if(!R){R=this._connection=new Je.w0;const T=this.getSubject();R.add(this.source.subscribe((0,It.x)(T,void 0,()=>{this._teardown(),T.complete()},P=>{this._teardown(),T.error(P)},()=>this._teardown()))),R.closed&&(this._connection=null,R=Je.w0.EMPTY)}return R}refCount(){return Bt()(this)}}var ke=ee(7579),Se=ee(6895),Me=ee(4004),Ze=ee(3900),We=ee(5698),Pt=ee(8675),fn=ee(9300),Zt=ee(5577);function kt(w){return(0,Ot.e)((R,T)=>{let P=!1;R.subscribe((0,It.x)(T,U=>{P=!0,T.next(U)},()=>{P||T.next(w),T.complete()}))})}function ai(w=cn){return(0,Ot.e)((R,T)=>{let P=!1;R.subscribe((0,It.x)(T,U=>{P=!0,T.next(U)},()=>P?T.complete():T.error(w())))})}function cn(){return new ze}var Ce=ee(4671);function Ge(w,R){const T=arguments.length>=2;return P=>P.pipe(w?(0,fn.h)((U,Z)=>w(U,Z,P)):Ce.y,(0,We.q)(1),T?kt(R):ai(()=>new ze))}function tt(w,R){return(0,Xt.m)(R)?(0,Zt.z)(w,R,1):(0,Zt.z)(w,1)}var Qe=ee(8505);function Et(w){return(0,Ot.e)((R,T)=>{let Z,P=null,U=!1;P=R.subscribe((0,It.x)(T,void 0,void 0,ne=>{Z=(0,Pe.Xf)(w(ne,Et(w)(R))),P?(P.unsubscribe(),P=null,Z.subscribe(T)):U=!0})),U&&(P.unsubscribe(),P=null,Z.subscribe(T))})}function mn(w,R){return(0,Ot.e)(function wt(w,R,T,P,U){return(Z,ne)=>{let ye=T,rt=R,Ut=0;Z.subscribe((0,It.x)(ne,on=>{const Xn=Ut++;rt=ye?w(rt,on,Xn):(ye=!0,on),P&&ne.next(rt)},U&&(()=>{ye&&ne.next(rt),ne.complete()})))}}(w,R,arguments.length>=2,!0))}function Jn(w){return w<=0?()=>Ct.E:(0,Ot.e)((R,T)=>{let P=[];R.subscribe((0,It.x)(T,U=>{P.push(U),w<P.length&&P.shift()},()=>{for(const U of P)T.next(U);T.complete()},void 0,()=>{P=null}))})}function Yi(w,R){const T=arguments.length>=2;return P=>P.pipe(w?(0,fn.h)((U,Z)=>w(U,Z,P)):Ce.y,Jn(1),T?kt(R):ai(()=>new ze))}var In=ee(9718);function sn(w){return(0,Ot.e)((R,T)=>{try{R.subscribe(T)}finally{T.add(w)}})}var Ii=ee(8189),Kr=ee(1481);const Sn="primary",Mn=Symbol("RouteTitle");class Ir{constructor(R){this.params=R||{}}has(R){return Object.prototype.hasOwnProperty.call(this.params,R)}get(R){if(this.has(R)){const T=this.params[R];return Array.isArray(T)?T[0]:T}return null}getAll(R){if(this.has(R)){const T=this.params[R];return Array.isArray(T)?T:[T]}return[]}get keys(){return Object.keys(this.params)}}function Ei(w){return new Ir(w)}function lr(w,R,T){const P=T.path.split("/");if(P.length>w.length||"full"===T.pathMatch&&(R.hasChildren()||P.length<w.length))return null;const U={};for(let Z=0;Z<P.length;Z++){const ne=P[Z],ye=w[Z];if(ne.startsWith(":"))U[ne.substring(1)]=ye;else if(ne!==ye.path)return null}return{consumed:w.slice(0,P.length),posParams:U}}function Wr(w,R){const T=w?Object.keys(w):void 0,P=R?Object.keys(R):void 0;if(!T||!P||T.length!=P.length)return!1;let U;for(let Z=0;Z<T.length;Z++)if(U=T[Z],!va(w[U],R[U]))return!1;return!0}function va(w,R){if(Array.isArray(w)&&Array.isArray(R)){if(w.length!==R.length)return!1;const T=[...w].sort(),P=[...R].sort();return T.every((U,Z)=>P[Z]===U)}return w===R}function Pr(w){return Array.prototype.concat.apply([],w)}function jo(w){return w.length>0?w[w.length-1]:null}function Pi(w,R){for(const T in w)w.hasOwnProperty(T)&&R(w[T],T)}function Or(w){return(0,a.CqO)(w)?w:(0,a.QGY)(w)?(0,Y.D)(Promise.resolve(w)):(0,be.of)(w)}const _o=!1,xn={exact:function ut(w,R,T){if(!Zn(w.segments,R.segments)||!Ps(w.segments,R.segments,T)||w.numberOfChildren!==R.numberOfChildren)return!1;for(const P in R.children)if(!w.children[P]||!ut(w.children[P],R.children[P],T))return!1;return!0},subset:Gi},Us={exact:function Gt(w,R){return Wr(w,R)},subset:function hr(w,R){return Object.keys(R).length<=Object.keys(w).length&&Object.keys(R).every(T=>va(w[T],R[T]))},ignored:()=>!0};function ki(w,R,T){return xn[T.paths](w.root,R.root,T.matrixParams)&&Us[T.queryParams](w.queryParams,R.queryParams)&&!("exact"===T.fragment&&w.fragment!==R.fragment)}function Gi(w,R,T){return Is(w,R,R.segments,T)}function Is(w,R,T,P){if(w.segments.length>T.length){const U=w.segments.slice(0,T.length);return!(!Zn(U,T)||R.hasChildren()||!Ps(U,T,P))}if(w.segments.length===T.length){if(!Zn(w.segments,T)||!Ps(w.segments,T,P))return!1;for(const U in R.children)if(!w.children[U]||!Gi(w.children[U],R.children[U],P))return!1;return!0}{const U=T.slice(0,w.segments.length),Z=T.slice(w.segments.length);return!!(Zn(w.segments,U)&&Ps(w.segments,U,P)&&w.children[Sn])&&Is(w.children[Sn],R,Z,P)}}function Ps(w,R,T){return R.every((P,U)=>Us[T](w[U].parameters,P.parameters))}class Dr{constructor(R=new zt([],{}),T={},P=null){this.root=R,this.queryParams=T,this.fragment=P}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ei(this.queryParams)),this._queryParamMap}toString(){return Hs.serialize(this)}}class zt{constructor(R,T){this.segments=R,this.children=T,this.parent=null,Pi(T,(P,U)=>P.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Os(this)}}class Un{constructor(R,T){this.path=R,this.parameters=T}get parameterMap(){return this._parameterMap||(this._parameterMap=Ei(this.parameters)),this._parameterMap}toString(){return dl(this)}}function Zn(w,R){return w.length===R.length&&w.every((T,P)=>T.path===R[P].path)}let ls=(()=>{class w{}return w.\u0275fac=function(T){return new(T||w)},w.\u0275prov=a.Yz7({token:w,factory:function(){return new Ga},providedIn:"root"}),w})();class Ga{parse(R){const T=new Hn(R);return new Dr(T.parseRootSegment(),T.parseQueryParams(),T.parseFragment())}serialize(R){const T=`/${ds(R.root,!0)}`,P=function hs(w){const R=Object.keys(w).map(T=>{const P=w[T];return Array.isArray(P)?P.map(U=>`${Ti(T)}=${Ti(U)}`).join("&"):`${Ti(T)}=${Ti(P)}`}).filter(T=>!!T);return R.length?`?${R.join("&")}`:""}(R.queryParams);return`${T}${P}${"string"==typeof R.fragment?`#${function Xr(w){return encodeURI(w)}(R.fragment)}`:""}`}}const Hs=new Ga;function Os(w){return w.segments.map(R=>dl(R)).join("/")}function ds(w,R){if(!w.hasChildren())return Os(w);if(R){const T=w.children[Sn]?ds(w.children[Sn],!1):"",P=[];return Pi(w.children,(U,Z)=>{Z!==Sn&&P.push(`${Z}:${ds(U,!1)}`)}),P.length>0?`${T}(${P.join("//")})`:T}{const T=function Kc(w,R){let T=[];return Pi(w.children,(P,U)=>{U===Sn&&(T=T.concat(R(P,U)))}),Pi(w.children,(P,U)=>{U!==Sn&&(T=T.concat(R(P,U)))}),T}(w,(P,U)=>U===Sn?[ds(w.children[Sn],!1)]:[`${U}:${ds(P,!1)}`]);return 1===Object.keys(w.children).length&&null!=w.children[Sn]?`${Os(w)}/${T[0]}`:`${Os(w)}/(${T.join("//")})`}}function Si(w){return encodeURIComponent(w).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ti(w){return Si(w).replace(/%3B/gi,";")}function na(w){return Si(w).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ia(w){return decodeURIComponent(w)}function xs(w){return ia(w.replace(/\+/g,"%20"))}function dl(w){return`${na(w.path)}${function hl(w){return Object.keys(w).map(R=>`;${na(R)}=${na(w[R])}`).join("")}(w.parameters)}`}const Ne=/^[^\/()?;=#]+/;function _e(w){const R=w.match(Ne);return R?R[0]:""}const ae=/^[^=?&#]+/,Ve=/^[^&#]+/;class Hn{constructor(R){this.url=R,this.remaining=R}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new zt([],{}):new zt([],this.parseChildren())}parseQueryParams(){const R={};if(this.consumeOptional("?"))do{this.parseQueryParam(R)}while(this.consumeOptional("&"));return R}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const R=[];for(this.peekStartsWith("(")||R.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),R.push(this.parseSegment());let T={};this.peekStartsWith("/(")&&(this.capture("/"),T=this.parseParens(!0));let P={};return this.peekStartsWith("(")&&(P=this.parseParens(!1)),(R.length>0||Object.keys(T).length>0)&&(P[Sn]=new zt(R,T)),P}parseSegment(){const R=_e(this.remaining);if(""===R&&this.peekStartsWith(";"))throw new a.vHH(4009,_o);return this.capture(R),new Un(ia(R),this.parseMatrixParams())}parseMatrixParams(){const R={};for(;this.consumeOptional(";");)this.parseParam(R);return R}parseParam(R){const T=_e(this.remaining);if(!T)return;this.capture(T);let P="";if(this.consumeOptional("=")){const U=_e(this.remaining);U&&(P=U,this.capture(P))}R[ia(T)]=ia(P)}parseQueryParam(R){const T=function Ee(w){const R=w.match(ae);return R?R[0]:""}(this.remaining);if(!T)return;this.capture(T);let P="";if(this.consumeOptional("=")){const ne=function rn(w){const R=w.match(Ve);return R?R[0]:""}(this.remaining);ne&&(P=ne,this.capture(P))}const U=xs(T),Z=xs(P);if(R.hasOwnProperty(U)){let ne=R[U];Array.isArray(ne)||(ne=[ne],R[U]=ne),ne.push(Z)}else R[U]=Z}parseParens(R){const T={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const P=_e(this.remaining),U=this.remaining[P.length];if("/"!==U&&")"!==U&&";"!==U)throw new a.vHH(4010,_o);let Z;P.indexOf(":")>-1?(Z=P.slice(0,P.indexOf(":")),this.capture(Z),this.capture(":")):R&&(Z=Sn);const ne=this.parseChildren();T[Z]=1===Object.keys(ne).length?ne[Sn]:new zt([],ne),this.consumeOptional("//")}return T}peekStartsWith(R){return this.remaining.startsWith(R)}consumeOptional(R){return!!this.peekStartsWith(R)&&(this.remaining=this.remaining.substring(R.length),!0)}capture(R){if(!this.consumeOptional(R))throw new a.vHH(4011,_o)}}function Vi(w){return w.segments.length>0?new zt([],{[Sn]:w}):w}function cr(w){const R={};for(const P of Object.keys(w.children)){const Z=cr(w.children[P]);(Z.segments.length>0||Z.hasChildren())&&(R[P]=Z)}return function fs(w){if(1===w.numberOfChildren&&w.children[Sn]){const R=w.children[Sn];return new zt(w.segments.concat(R.segments),R.children)}return w}(new zt(w.segments,R))}function wr(w){return w instanceof Dr}const ya=!1;function Ul(w,R,T,P,U){if(0===T.length)return Ns(R.root,R.root,R.root,P,U);const Z=function vi(w){if("string"==typeof w[0]&&1===w.length&&"/"===w[0])return new Ta(!0,0,w);let R=0,T=!1;const P=w.reduce((U,Z,ne)=>{if("object"==typeof Z&&null!=Z){if(Z.outlets){const ye={};return Pi(Z.outlets,(rt,Ut)=>{ye[Ut]="string"==typeof rt?rt.split("/"):rt}),[...U,{outlets:ye}]}if(Z.segmentPath)return[...U,Z.segmentPath]}return"string"!=typeof Z?[...U,Z]:0===ne?(Z.split("/").forEach((ye,rt)=>{0==rt&&"."===ye||(0==rt&&""===ye?T=!0:".."===ye?R++:""!=ye&&U.push(ye))}),U):[...U,Z]},[]);return new Ta(T,R,P)}(T);return Z.toRoot()?Ns(R.root,R.root,new zt([],{}),P,U):function ne(rt){const Ut=function Qr(w,R,T,P){if(w.isAbsolute)return new ur(R.root,!0,0);if(-1===P)return new ur(T,T===R.root,0);return function $r(w,R,T){let P=w,U=R,Z=T;for(;Z>U;){if(Z-=U,P=P.parent,!P)throw new a.vHH(4005,ya&&"Invalid number of '../'");U=P.segments.length}return new ur(P,!1,U-Z)}(T,P+(vo(w.commands[0])?0:1),w.numberOfDoubleDots)}(Z,R,w.snapshot?._urlSegment,rt),on=Ut.processChildren?zs(Ut.segmentGroup,Ut.index,Z.commands):pl(Ut.segmentGroup,Ut.index,Z.commands);return Ns(R.root,Ut.segmentGroup,on,P,U)}(w.snapshot?._lastPathIndex)}function vo(w){return"object"==typeof w&&null!=w&&!w.outlets&&!w.segmentPath}function ba(w){return"object"==typeof w&&null!=w&&w.outlets}function Ns(w,R,T,P,U){let ne,Z={};P&&Pi(P,(rt,Ut)=>{Z[Ut]=Array.isArray(rt)?rt.map(on=>`${on}`):`${rt}`}),ne=w===R?T:yo(w,R,T);const ye=Vi(cr(ne));return new Dr(ye,Z,U)}function yo(w,R,T){const P={};return Pi(w.children,(U,Z)=>{P[Z]=U===R?T:yo(U,R,T)}),new zt(w.segments,P)}class Ta{constructor(R,T,P){if(this.isAbsolute=R,this.numberOfDoubleDots=T,this.commands=P,R&&P.length>0&&vo(P[0]))throw new a.vHH(4003,ya&&"Root segment cannot have matrix parameters");const U=P.find(ba);if(U&&U!==jo(P))throw new a.vHH(4004,ya&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ur{constructor(R,T,P){this.segmentGroup=R,this.processChildren=T,this.index=P}}function pl(w,R,T){if(w||(w=new zt([],{})),0===w.segments.length&&w.hasChildren())return zs(w,R,T);const P=function Fs(w,R,T){let P=0,U=R;const Z={match:!1,pathIndex:0,commandIndex:0};for(;U<w.segments.length;){if(P>=T.length)return Z;const ne=w.segments[U],ye=T[P];if(ba(ye))break;const rt=`${ye}`,Ut=P<T.length-1?T[P+1]:null;if(U>0&&void 0===rt)break;if(rt&&Ut&&"object"==typeof Ut&&void 0===Ut.outlets){if(!es(rt,Ut,ne))return Z;P+=2}else{if(!es(rt,{},ne))return Z;P++}U++}return{match:!0,pathIndex:U,commandIndex:P}}(w,R,T),U=T.slice(P.commandIndex);if(P.match&&P.pathIndex<w.segments.length){const Z=new zt(w.segments.slice(0,P.pathIndex),{});return Z.children[Sn]=new zt(w.segments.slice(P.pathIndex),w.children),zs(Z,0,U)}return P.match&&0===U.length?new zt(w.segments,{}):P.match&&!w.hasChildren()?qt(w,R,T):P.match?zs(w,0,U):qt(w,R,T)}function zs(w,R,T){if(0===T.length)return new zt(w.segments,{});{const P=function fc(w){return ba(w[0])?w[0].outlets:{[Sn]:w}}(T),U={};if(!P[Sn]&&w.children[Sn]&&1===w.numberOfChildren&&0===w.children[Sn].segments.length){const Z=zs(w.children[Sn],R,T);return new zt(w.segments,Z.children)}return Pi(P,(Z,ne)=>{"string"==typeof Z&&(Z=[Z]),null!==Z&&(U[ne]=pl(w.children[ne],R,Z))}),Pi(w.children,(Z,ne)=>{void 0===P[ne]&&(U[ne]=Z)}),new zt(w.segments,U)}}function qt(w,R,T){const P=w.segments.slice(0,R);let U=0;for(;U<T.length;){const Z=T[U];if(ba(Z)){const rt=On(Z.outlets);return new zt(P,rt)}if(0===U&&vo(T[0])){P.push(new Un(w.segments[R].path,Qi(T[0]))),U++;continue}const ne=ba(Z)?Z.outlets[Sn]:`${Z}`,ye=U<T.length-1?T[U+1]:null;ne&&ye&&vo(ye)?(P.push(new Un(ne,Qi(ye))),U+=2):(P.push(new Un(ne,{})),U++)}return new zt(P,{})}function On(w){const R={};return Pi(w,(T,P)=>{"string"==typeof T&&(T=[T]),null!==T&&(R[P]=qt(new zt([],{}),0,T))}),R}function Qi(w){const R={};return Pi(w,(T,P)=>R[P]=`${T}`),R}function es(w,R,T){return w==T.path&&Wr(R,T.parameters)}const Rr="imperative";class ir{constructor(R,T){this.id=R,this.url=T}}class ko extends ir{constructor(R,T,P="imperative",U=null){super(R,T),this.type=0,this.navigationTrigger=P,this.restoredState=U}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Bi extends ir{constructor(R,T,P){super(R,T),this.urlAfterRedirects=P,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Ws extends ir{constructor(R,T,P,U){super(R,T),this.reason=P,this.code=U,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class bo extends ir{constructor(R,T,P,U){super(R,T),this.reason=P,this.code=U,this.type=16}}class Gn extends ir{constructor(R,T,P,U){super(R,T),this.error=P,this.target=U,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Ma extends ir{constructor(R,T,P,U){super(R,T),this.urlAfterRedirects=P,this.state=U,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class $s extends ir{constructor(R,T,P,U){super(R,T),this.urlAfterRedirects=P,this.state=U,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class xa extends ir{constructor(R,T,P,U,Z){super(R,T),this.urlAfterRedirects=P,this.state=U,this.shouldActivate=Z,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class To extends ir{constructor(R,T,P,U){super(R,T),this.urlAfterRedirects=P,this.state=U,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Nr extends ir{constructor(R,T,P,U){super(R,T),this.urlAfterRedirects=P,this.state=U,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Hl{constructor(R){this.route=R,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Yr{constructor(R){this.route=R,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Ds{constructor(R){this.snapshot=R,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ps{constructor(R){this.snapshot=R,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Mi{constructor(R){this.snapshot=R,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ni{constructor(R){this.snapshot=R,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class zl{constructor(R,T,P){this.routerEvent=R,this.position=T,this.anchor=P,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let Wl=(()=>{class w{createUrlTree(T,P,U,Z,ne,ye){return Ul(T||P.root,U,Z,ne,ye)}}return w.\u0275fac=function(T){return new(T||w)},w.\u0275prov=a.Yz7({token:w,factory:w.\u0275fac}),w})(),Ys=(()=>{class w{}return w.\u0275fac=function(T){return new(T||w)},w.\u0275prov=a.Yz7({token:w,factory:function(R){return Wl.\u0275fac(R)},providedIn:"root"}),w})();class Jr{constructor(R){this._root=R}get root(){return this._root.value}parent(R){const T=this.pathFromRoot(R);return T.length>1?T[T.length-2]:null}children(R){const T=Ua(R,this._root);return T?T.children.map(P=>P.value):[]}firstChild(R){const T=Ua(R,this._root);return T&&T.children.length>0?T.children[0].value:null}siblings(R){const T=ns(R,this._root);return T.length<2?[]:T[T.length-2].children.map(U=>U.value).filter(U=>U!==R)}pathFromRoot(R){return ns(R,this._root).map(T=>T.value)}}function Ua(w,R){if(w===R.value)return R;for(const T of R.children){const P=Ua(w,T);if(P)return P}return null}function ns(w,R){if(w===R.value)return[R];for(const T of R.children){const P=ns(w,T);if(P.length)return P.unshift(R),P}return[]}class Fr{constructor(R,T){this.value=R,this.children=T}toString(){return`TreeNode(${this.value})`}}function Da(w){const R={};return w&&w.children.forEach(T=>R[T.value.outlet]=T),R}class wa extends Jr{constructor(R,T){super(R),this.snapshot=T,Jl(this,R)}toString(){return this.snapshot.toString()}}function $l(w,R){const T=function ms(w,R){const ne=new sa([],{},{},"",{},Sn,R,null,w.root,-1,{});return new Yl("",new Fr(ne,[]))}(w,R),P=new xe.X([new Un("",{})]),U=new xe.X({}),Z=new xe.X({}),ne=new xe.X({}),ye=new xe.X(""),rt=new Go(P,U,ne,ye,Z,Sn,R,T.root);return rt.snapshot=T.root,new wa(new Fr(rt,[]),T)}class Go{constructor(R,T,P,U,Z,ne,ye,rt){this.url=R,this.params=T,this.queryParams=P,this.fragment=U,this.data=Z,this.outlet=ne,this.component=ye,this.title=this.data?.pipe((0,Me.U)(Ut=>Ut[Mn]))??(0,be.of)(void 0),this._futureSnapshot=rt}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Me.U)(R=>Ei(R)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Me.U)(R=>Ei(R)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Ha(w,R="emptyOnly"){const T=w.pathFromRoot;let P=0;if("always"!==R)for(P=T.length-1;P>=1;){const U=T[P],Z=T[P-1];if(U.routeConfig&&""===U.routeConfig.path)P--;else{if(Z.component)break;P--}}return function gl(w){return w.reduce((R,T)=>({params:{...R.params,...T.params},data:{...R.data,...T.data},resolve:{...T.data,...R.resolve,...T.routeConfig?.data,...T._resolvedData}}),{params:{},data:{},resolve:{}})}(T.slice(P))}class sa{get title(){return this.data?.[Mn]}constructor(R,T,P,U,Z,ne,ye,rt,Ut,on,Xn){this.url=R,this.params=T,this.queryParams=P,this.fragment=U,this.data=Z,this.outlet=ne,this.component=ye,this.routeConfig=rt,this._urlSegment=Ut,this._lastPathIndex=on,this._resolve=Xn}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Ei(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ei(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(P=>P.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Yl extends Jr{constructor(R,T){super(T),this.url=R,Jl(this,T)}toString(){return _l(this._root)}}function Jl(w,R){R.value._routerState=w,R.children.forEach(T=>Jl(w,T))}function _l(w){const R=w.children.length>0?` { ${w.children.map(_l).join(", ")} } `:"";return`${w.value}${R}`}function vl(w){if(w.snapshot){const R=w.snapshot,T=w._futureSnapshot;w.snapshot=T,Wr(R.queryParams,T.queryParams)||w.queryParams.next(T.queryParams),R.fragment!==T.fragment&&w.fragment.next(T.fragment),Wr(R.params,T.params)||w.params.next(T.params),function ja(w,R){if(w.length!==R.length)return!1;for(let T=0;T<w.length;++T)if(!Wr(w[T],R[T]))return!1;return!0}(R.url,T.url)||w.url.next(T.url),Wr(R.data,T.data)||w.data.next(T.data)}else w.snapshot=w._futureSnapshot,w.data.next(w._futureSnapshot.data)}function yl(w,R){const T=Wr(w.params,R.params)&&function ka(w,R){return Zn(w,R)&&w.every((T,P)=>Wr(T.parameters,R[P].parameters))}(w.url,R.url);return T&&!(!w.parent!=!R.parent)&&(!w.parent||yl(w.parent,R.parent))}function za(w,R,T){if(T&&w.shouldReuseRoute(R.value,T.value.snapshot)){const P=T.value;P._futureSnapshot=R.value;const U=function jd(w,R,T){return R.children.map(P=>{for(const U of T.children)if(w.shouldReuseRoute(P.value,U.value.snapshot))return za(w,P,U);return za(w,P)})}(w,R,T);return new Fr(P,U)}{if(w.shouldAttach(R.value)){const Z=w.retrieve(R.value);if(null!==Z){const ne=Z.route;return ne.value._futureSnapshot=R.value,ne.children=R.children.map(ye=>za(w,ye)),ne}}const P=function Vu(w){return new Go(new xe.X(w.url),new xe.X(w.params),new xe.X(w.queryParams),new xe.X(w.fragment),new xe.X(w.data),w.outlet,w.component,w)}(R.value),U=R.children.map(Z=>za(w,Z));return new Fr(P,U)}}const pc="ngNavigationCancelingError";function kd(w,R){const{redirectTo:T,navigationBehaviorOptions:P}=wr(R)?{redirectTo:R,navigationBehaviorOptions:void 0}:R,U=Gd(!1,0,R);return U.url=T,U.navigationBehaviorOptions=P,U}function Gd(w,R,T){const P=new Error("NavigationCancelingError: "+(w||""));return P[pc]=!0,P.cancellationCode=R,T&&(P.url=T),P}function Zl(w){return Uu(w)&&wr(w.url)}function Uu(w){return w&&w[pc]}class Vd{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Vo,this.attachRef=null}}let Vo=(()=>{class w{constructor(){this.contexts=new Map}onChildOutletCreated(T,P){const U=this.getOrCreateContext(T);U.outlet=P,this.contexts.set(T,U)}onChildOutletDestroyed(T){const P=this.getContext(T);P&&(P.outlet=null,P.attachRef=null)}onOutletDeactivated(){const T=this.contexts;return this.contexts=new Map,T}onOutletReAttached(T){this.contexts=T}getOrCreateContext(T){let P=this.getContext(T);return P||(P=new Vd,this.contexts.set(T,P)),P}getContext(T){return this.contexts.get(T)||null}}return w.\u0275fac=function(T){return new(T||w)},w.\u0275prov=a.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})();const Uo=!1;let Ji=(()=>{class w{constructor(){this.activated=null,this._activatedRoute=null,this.name=Sn,this.activateEvents=new a.vpe,this.deactivateEvents=new a.vpe,this.attachEvents=new a.vpe,this.detachEvents=new a.vpe,this.parentContexts=(0,a.f3M)(Vo),this.location=(0,a.f3M)(a.s_b),this.changeDetector=(0,a.f3M)(a.sBO),this.environmentInjector=(0,a.f3M)(a.lqb)}ngOnChanges(T){if(T.name){const{firstChange:P,previousValue:U}=T.name;if(P)return;this.isTrackedInParentContexts(U)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(U)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(T){return this.parentContexts.getContext(T)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const T=this.parentContexts.getContext(this.name);T?.route&&(T.attachRef?this.attach(T.attachRef,T.route):this.activateWith(T.route,T.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new a.vHH(4012,Uo);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new a.vHH(4012,Uo);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new a.vHH(4012,Uo);this.location.detach();const T=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(T.instance),T}attach(T,P){this.activated=T,this._activatedRoute=P,this.location.insert(T.hostView),this.attachEvents.emit(T.instance)}deactivate(){if(this.activated){const T=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(T)}}activateWith(T,P){if(this.isActivated)throw new a.vHH(4013,Uo);this._activatedRoute=T;const U=this.location,ne=T.snapshot.component,ye=this.parentContexts.getOrCreateContext(this.name).children,rt=new bl(T,ye,U.injector);if(P&&function Ho(w){return!!w.resolveComponentFactory}(P)){const Ut=P.resolveComponentFactory(ne);this.activated=U.createComponent(Ut,U.length,rt)}else this.activated=U.createComponent(ne,{index:U.length,injector:rt,environmentInjector:P??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return w.\u0275fac=function(T){return new(T||w)},w.\u0275dir=a.lG2({type:w,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[a.TTD]}),w})();class bl{constructor(R,T,P){this.route=R,this.childContexts=T,this.parent=P}get(R,T){return R===Go?this.route:R===Vo?this.childContexts:this.parent.get(R,T)}}let oa=(()=>{class w{}return w.\u0275fac=function(T){return new(T||w)},w.\u0275cmp=a.Xpm({type:w,selectors:[["ng-component"]],standalone:!0,features:[a.jDz],decls:1,vars:0,template:function(T,P){1&T&&a._UZ(0,"router-outlet")},dependencies:[Ji],encapsulation:2}),w})();function ws(w,R){return w.providers&&!w._injector&&(w._injector=(0,a.MMx)(w.providers,R,`Route: ${w.path}`)),w._injector??R}function Wa(w){const R=w.children&&w.children.map(Wa),T=R?{...w,children:R}:{...w};return!T.component&&!T.loadComponent&&(R||T.loadChildren)&&T.outlet&&T.outlet!==Sn&&(T.component=oa),T}function Ui(w){return w.outlet||Sn}function Hu(w,R){const T=w.filter(P=>Ui(P)===R);return T.push(...w.filter(P=>Ui(P)!==R)),T}function aa(w){if(!w)return null;if(w.routeConfig?._injector)return w.routeConfig._injector;for(let R=w.parent;R;R=R.parent){const T=R.routeConfig;if(T?._loadedInjector)return T._loadedInjector;if(T?._injector)return T._injector}return null}class gc{constructor(R,T,P,U){this.routeReuseStrategy=R,this.futureState=T,this.currState=P,this.forwardEvent=U}activate(R){const T=this.futureState._root,P=this.currState?this.currState._root:null;this.deactivateChildRoutes(T,P,R),vl(this.futureState.root),this.activateChildRoutes(T,P,R)}deactivateChildRoutes(R,T,P){const U=Da(T);R.children.forEach(Z=>{const ne=Z.value.outlet;this.deactivateRoutes(Z,U[ne],P),delete U[ne]}),Pi(U,(Z,ne)=>{this.deactivateRouteAndItsChildren(Z,P)})}deactivateRoutes(R,T,P){const U=R.value,Z=T?T.value:null;if(U===Z)if(U.component){const ne=P.getContext(U.outlet);ne&&this.deactivateChildRoutes(R,T,ne.children)}else this.deactivateChildRoutes(R,T,P);else Z&&this.deactivateRouteAndItsChildren(T,P)}deactivateRouteAndItsChildren(R,T){R.value.component&&this.routeReuseStrategy.shouldDetach(R.value.snapshot)?this.detachAndStoreRouteSubtree(R,T):this.deactivateRouteAndOutlet(R,T)}detachAndStoreRouteSubtree(R,T){const P=T.getContext(R.value.outlet),U=P&&R.value.component?P.children:T,Z=Da(R);for(const ne of Object.keys(Z))this.deactivateRouteAndItsChildren(Z[ne],U);if(P&&P.outlet){const ne=P.outlet.detach(),ye=P.children.onOutletDeactivated();this.routeReuseStrategy.store(R.value.snapshot,{componentRef:ne,route:R,contexts:ye})}}deactivateRouteAndOutlet(R,T){const P=T.getContext(R.value.outlet),U=P&&R.value.component?P.children:T,Z=Da(R);for(const ne of Object.keys(Z))this.deactivateRouteAndItsChildren(Z[ne],U);P&&(P.outlet&&(P.outlet.deactivate(),P.children.onOutletDeactivated()),P.attachRef=null,P.resolver=null,P.route=null)}activateChildRoutes(R,T,P){const U=Da(T);R.children.forEach(Z=>{this.activateRoutes(Z,U[Z.value.outlet],P),this.forwardEvent(new Ni(Z.value.snapshot))}),R.children.length&&this.forwardEvent(new ps(R.value.snapshot))}activateRoutes(R,T,P){const U=R.value,Z=T?T.value:null;if(vl(U),U===Z)if(U.component){const ne=P.getOrCreateContext(U.outlet);this.activateChildRoutes(R,T,ne.children)}else this.activateChildRoutes(R,T,P);else if(U.component){const ne=P.getOrCreateContext(U.outlet);if(this.routeReuseStrategy.shouldAttach(U.snapshot)){const ye=this.routeReuseStrategy.retrieve(U.snapshot);this.routeReuseStrategy.store(U.snapshot,null),ne.children.onOutletReAttached(ye.contexts),ne.attachRef=ye.componentRef,ne.route=ye.route.value,ne.outlet&&ne.outlet.attach(ye.componentRef,ye.route.value),vl(ye.route.value),this.activateChildRoutes(R,null,ne.children)}else{const ye=aa(U.snapshot),rt=ye?.get(a._Vd)??null;ne.attachRef=null,ne.route=U,ne.resolver=rt,ne.injector=ye,ne.outlet&&ne.outlet.activateWith(U,ne.injector),this.activateChildRoutes(R,null,ne.children)}}else this.activateChildRoutes(R,null,P)}}class Kl{constructor(R){this.path=R,this.route=this.path[this.path.length-1]}}class Js{constructor(R,T){this.component=R,this.route=T}}function is(w,R,T){const P=w._root;return gs(P,R?R._root:null,T,[P.value])}function xo(w,R){const T=Symbol(),P=R.get(w,T);return P===T?"function"!=typeof w||(0,a.Z0I)(w)?R.get(w):w:P}function gs(w,R,T,P,U={canDeactivateChecks:[],canActivateChecks:[]}){const Z=Da(R);return w.children.forEach(ne=>{(function bi(w,R,T,P,U={canDeactivateChecks:[],canActivateChecks:[]}){const Z=w.value,ne=R?R.value:null,ye=T?T.getContext(w.value.outlet):null;if(ne&&Z.routeConfig===ne.routeConfig){const rt=function zu(w,R,T){if("function"==typeof T)return T(w,R);switch(T){case"pathParamsChange":return!Zn(w.url,R.url);case"pathParamsOrQueryParamsChange":return!Zn(w.url,R.url)||!Wr(w.queryParams,R.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!yl(w,R)||!Wr(w.queryParams,R.queryParams);default:return!yl(w,R)}}(ne,Z,Z.routeConfig.runGuardsAndResolvers);rt?U.canActivateChecks.push(new Kl(P)):(Z.data=ne.data,Z._resolvedData=ne._resolvedData),gs(w,R,Z.component?ye?ye.children:null:T,P,U),rt&&ye&&ye.outlet&&ye.outlet.isActivated&&U.canDeactivateChecks.push(new Js(ye.outlet.component,ne))}else ne&&ft(R,ye,U),U.canActivateChecks.push(new Kl(P)),gs(w,null,Z.component?ye?ye.children:null:T,P,U)})(ne,Z[ne.value.outlet],T,P.concat([ne.value]),U),delete Z[ne.value.outlet]}),Pi(Z,(ne,ye)=>ft(ne,T.getContext(ye),U)),U}function ft(w,R,T){const P=Da(w),U=w.value;Pi(P,(Z,ne)=>{ft(Z,U.component?R?R.children.getContext(ne):null:R,T)}),T.canDeactivateChecks.push(new Js(U.component&&R&&R.outlet&&R.outlet.isActivated?R.outlet.component:null,U))}function _n(w){return"function"==typeof w}function nt(w){return w instanceof ze||"EmptyError"===w?.name}const ni=Symbol("INITIAL_VALUE");function er(){return(0,Ze.w)(w=>(0,Xe.a)(w.map(R=>R.pipe((0,We.q)(1),(0,Pt.O)(ni)))).pipe((0,Me.U)(R=>{for(const T of R)if(!0!==T){if(T===ni)return ni;if(!1===T||T instanceof Dr)return T}return!0}),(0,fn.h)(R=>R!==ni),(0,We.q)(1)))}function yc(w){return(0,Ke.z)((0,Qe.b)(R=>{if(wr(R))throw kd(0,R)}),(0,Me.U)(R=>!0===R))}const qn={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function la(w,R,T,P,U){const Z=Zs(w,R,T);return Z.matched?function rr(w,R,T,P){const U=R.canMatch;if(!U||0===U.length)return(0,be.of)(!0);const Z=U.map(ne=>{const ye=xo(ne,w);return Or(function zo(w){return w&&_n(w.canMatch)}(ye)?ye.canMatch(R,T):w.runInContext(()=>ye(R,T)))});return(0,be.of)(Z).pipe(er(),yc())}(P=ws(R,P),R,T).pipe((0,Me.U)(ne=>!0===ne?Z:{...qn})):(0,be.of)(Z)}function Zs(w,R,T){if(""===R.path)return"full"===R.pathMatch&&(w.hasChildren()||T.length>0)?{...qn}:{matched:!0,consumedSegments:[],remainingSegments:T,parameters:{},positionalParamSegments:{}};const U=(R.matcher||lr)(T,w,R);if(!U)return{...qn};const Z={};Pi(U.posParams,(ye,rt)=>{Z[rt]=ye.path});const ne=U.consumed.length>0?{...Z,...U.consumed[U.consumed.length-1].parameters}:Z;return{matched:!0,consumedSegments:U.consumed,remainingSegments:T.slice(U.consumed.length),parameters:ne,positionalParamSegments:U.posParams??{}}}function qs(w,R,T,P){if(T.length>0&&function Ya(w,R,T){return T.some(P=>le(w,R,P)&&Ui(P)!==Sn)}(w,T,P)){const Z=new zt(R,function eu(w,R,T,P){const U={};U[Sn]=P,P._sourceSegment=w,P._segmentIndexShift=R.length;for(const Z of T)if(""===Z.path&&Ui(Z)!==Sn){const ne=new zt([],{});ne._sourceSegment=w,ne._segmentIndexShift=R.length,U[Ui(Z)]=ne}return U}(w,R,P,new zt(T,w.children)));return Z._sourceSegment=w,Z._segmentIndexShift=R.length,{segmentGroup:Z,slicedSegments:[]}}if(0===T.length&&function js(w,R,T){return T.some(P=>le(w,R,P))}(w,T,P)){const Z=new zt(w.segments,function wl(w,R,T,P,U){const Z={};for(const ne of P)if(le(w,T,ne)&&!U[Ui(ne)]){const ye=new zt([],{});ye._sourceSegment=w,ye._segmentIndexShift=R.length,Z[Ui(ne)]=ye}return{...U,...Z}}(w,R,T,P,w.children));return Z._sourceSegment=w,Z._segmentIndexShift=R.length,{segmentGroup:Z,slicedSegments:T}}const U=new zt(w.segments,w.children);return U._sourceSegment=w,U._segmentIndexShift=R.length,{segmentGroup:U,slicedSegments:T}}function le(w,R,T){return(!(w.hasChildren()||R.length>0)||"full"!==T.pathMatch)&&""===T.path}function Ja(w,R,T,P){return!!(Ui(w)===P||P!==Sn&&le(R,T,w))&&("**"===w.path||Zs(R,w,T).matched)}function Za(w,R,T){return 0===R.length&&!w.children[T]}const Ks=!1;class Xs{constructor(R){this.segmentGroup=R||null}}class uo{constructor(R){this.urlTree=R}}function wo(w){return et(new Xs(w))}function Wo(w){return et(new uo(w))}class Ro{constructor(R,T,P,U,Z){this.injector=R,this.configLoader=T,this.urlSerializer=P,this.urlTree=U,this.config=Z,this.allowRedirects=!0}apply(){const R=qs(this.urlTree.root,[],[],this.config).segmentGroup,T=new zt(R.segments,R.children);return this.expandSegmentGroup(this.injector,this.config,T,Sn).pipe((0,Me.U)(Z=>this.createUrlTree(cr(Z),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Et(Z=>{if(Z instanceof uo)return this.allowRedirects=!1,this.match(Z.urlTree);throw Z instanceof Xs?this.noMatchError(Z):Z}))}match(R){return this.expandSegmentGroup(this.injector,this.config,R.root,Sn).pipe((0,Me.U)(U=>this.createUrlTree(cr(U),R.queryParams,R.fragment))).pipe(Et(U=>{throw U instanceof Xs?this.noMatchError(U):U}))}noMatchError(R){return new a.vHH(4002,Ks)}createUrlTree(R,T,P){const U=Vi(R);return new Dr(U,T,P)}expandSegmentGroup(R,T,P,U){return 0===P.segments.length&&P.hasChildren()?this.expandChildren(R,T,P).pipe((0,Me.U)(Z=>new zt([],Z))):this.expandSegment(R,P,T,P.segments,U,!0)}expandChildren(R,T,P){const U=[];for(const Z of Object.keys(P.children))"primary"===Z?U.unshift(Z):U.push(Z);return(0,Y.D)(U).pipe(tt(Z=>{const ne=P.children[Z],ye=Hu(T,Z);return this.expandSegmentGroup(R,ye,ne,Z).pipe((0,Me.U)(rt=>({segment:rt,outlet:Z})))}),mn((Z,ne)=>(Z[ne.outlet]=ne.segment,Z),{}),Yi())}expandSegment(R,T,P,U,Z,ne){return(0,Y.D)(P).pipe(tt(ye=>this.expandSegmentAgainstRoute(R,T,P,ye,U,Z,ne).pipe(Et(Ut=>{if(Ut instanceof Xs)return(0,be.of)(null);throw Ut}))),Ge(ye=>!!ye),Et((ye,rt)=>{if(nt(ye))return Za(T,U,Z)?(0,be.of)(new zt([],{})):wo(T);throw ye}))}expandSegmentAgainstRoute(R,T,P,U,Z,ne,ye){return Ja(U,T,Z,ne)?void 0===U.redirectTo?this.matchSegmentAgainstRoute(R,T,U,Z,ne):ye&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(R,T,P,U,Z,ne):wo(T):wo(T)}expandSegmentAgainstRouteUsingRedirect(R,T,P,U,Z,ne){return"**"===U.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(R,P,U,ne):this.expandRegularSegmentAgainstRouteUsingRedirect(R,T,P,U,Z,ne)}expandWildCardWithParamsAgainstRouteUsingRedirect(R,T,P,U){const Z=this.applyRedirectCommands([],P.redirectTo,{});return P.redirectTo.startsWith("/")?Wo(Z):this.lineralizeSegments(P,Z).pipe((0,Zt.z)(ne=>{const ye=new zt(ne,{});return this.expandSegment(R,ye,T,ne,U,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(R,T,P,U,Z,ne){const{matched:ye,consumedSegments:rt,remainingSegments:Ut,positionalParamSegments:on}=Zs(T,U,Z);if(!ye)return wo(T);const Xn=this.applyRedirectCommands(rt,U.redirectTo,on);return U.redirectTo.startsWith("/")?Wo(Xn):this.lineralizeSegments(U,Xn).pipe((0,Zt.z)(Gr=>this.expandSegment(R,T,P,Gr.concat(Ut),ne,!1)))}matchSegmentAgainstRoute(R,T,P,U,Z){return"**"===P.path?(R=ws(P,R),P.loadChildren?(P._loadedRoutes?(0,be.of)({routes:P._loadedRoutes,injector:P._loadedInjector}):this.configLoader.loadChildren(R,P)).pipe((0,Me.U)(ye=>(P._loadedRoutes=ye.routes,P._loadedInjector=ye.injector,new zt(U,{})))):(0,be.of)(new zt(U,{}))):la(T,P,U,R).pipe((0,Ze.w)(({matched:ne,consumedSegments:ye,remainingSegments:rt})=>ne?this.getChildConfig(R=P._injector??R,P,U).pipe((0,Zt.z)(on=>{const Xn=on.injector??R,Gr=on.routes,{segmentGroup:vr,slicedSegments:po}=qs(T,ye,rt,Gr),Xo=new zt(vr.segments,vr.children);if(0===po.length&&Xo.hasChildren())return this.expandChildren(Xn,Gr,Xo).pipe((0,Me.U)(wc=>new zt(ye,wc)));if(0===Gr.length&&0===po.length)return(0,be.of)(new zt(ye,{}));const Ao=Ui(P)===Z;return this.expandSegment(Xn,Xo,Gr,po,Ao?Sn:Z,!0).pipe((0,Me.U)(Dc=>new zt(ye.concat(Dc.segments),Dc.children)))})):wo(T)))}getChildConfig(R,T,P){return T.children?(0,be.of)({routes:T.children,injector:R}):T.loadChildren?void 0!==T._loadedRoutes?(0,be.of)({routes:T._loadedRoutes,injector:T._loadedInjector}):function Qc(w,R,T,P){const U=R.canLoad;if(void 0===U||0===U.length)return(0,be.of)(!0);const Z=U.map(ne=>{const ye=xo(ne,w);return Or(function Wu(w){return w&&_n(w.canLoad)}(ye)?ye.canLoad(R,T):w.runInContext(()=>ye(R,T)))});return(0,be.of)(Z).pipe(er(),yc())}(R,T,P).pipe((0,Zt.z)(U=>U?this.configLoader.loadChildren(R,T).pipe((0,Qe.b)(Z=>{T._loadedRoutes=Z.routes,T._loadedInjector=Z.injector})):function ua(w){return et(Gd(Ks,3))}())):(0,be.of)({routes:[],injector:R})}lineralizeSegments(R,T){let P=[],U=T.root;for(;;){if(P=P.concat(U.segments),0===U.numberOfChildren)return(0,be.of)(P);if(U.numberOfChildren>1||!U.children[Sn])return R.redirectTo,et(new a.vHH(4e3,Ks));U=U.children[Sn]}}applyRedirectCommands(R,T,P){return this.applyRedirectCreateUrlTree(T,this.urlSerializer.parse(T),R,P)}applyRedirectCreateUrlTree(R,T,P,U){const Z=this.createSegmentGroup(R,T.root,P,U);return new Dr(Z,this.createQueryParams(T.queryParams,this.urlTree.queryParams),T.fragment)}createQueryParams(R,T){const P={};return Pi(R,(U,Z)=>{if("string"==typeof U&&U.startsWith(":")){const ye=U.substring(1);P[Z]=T[ye]}else P[Z]=U}),P}createSegmentGroup(R,T,P,U){const Z=this.createSegments(R,T.segments,P,U);let ne={};return Pi(T.children,(ye,rt)=>{ne[rt]=this.createSegmentGroup(R,ye,P,U)}),new zt(Z,ne)}createSegments(R,T,P,U){return T.map(Z=>Z.path.startsWith(":")?this.findPosParam(R,Z,U):this.findOrReturn(Z,P))}findPosParam(R,T,P){const U=P[T.path.substring(1)];if(!U)throw new a.vHH(4001,Ks);return U}findOrReturn(R,T){let P=0;for(const U of T){if(U.path===R.path)return T.splice(P),U;P++}return R}}class Lr{}class Ca{constructor(R,T,P,U,Z,ne,ye){this.injector=R,this.rootComponentType=T,this.config=P,this.urlTree=U,this.url=Z,this.paramsInheritanceStrategy=ne,this.urlSerializer=ye}recognize(){const R=qs(this.urlTree.root,[],[],this.config.filter(T=>void 0===T.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,R,Sn).pipe((0,Me.U)(T=>{if(null===T)return null;const P=new sa([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Sn,this.rootComponentType,null,this.urlTree.root,-1,{}),U=new Fr(P,T),Z=new Yl(this.url,U);return this.inheritParamsAndData(Z._root),Z}))}inheritParamsAndData(R){const T=R.value,P=Ha(T,this.paramsInheritanceStrategy);T.params=Object.freeze(P.params),T.data=Object.freeze(P.data),R.children.forEach(U=>this.inheritParamsAndData(U))}processSegmentGroup(R,T,P,U){return 0===P.segments.length&&P.hasChildren()?this.processChildren(R,T,P):this.processSegment(R,T,P,P.segments,U)}processChildren(R,T,P){return(0,Y.D)(Object.keys(P.children)).pipe(tt(U=>{const Z=P.children[U],ne=Hu(T,U);return this.processSegmentGroup(R,ne,Z,U)}),mn((U,Z)=>U&&Z?(U.push(...Z),U):null),function Cn(w,R=!1){return(0,Ot.e)((T,P)=>{let U=0;T.subscribe((0,It.x)(P,Z=>{const ne=w(Z,U++);(ne||R)&&P.next(Z),!ne&&P.complete()}))})}(U=>null!==U),kt(null),Yi(),(0,Me.U)(U=>{if(null===U)return null;const Z=O(U);return function bc(w){w.sort((R,T)=>R.value.outlet===Sn?-1:T.value.outlet===Sn?1:R.value.outlet.localeCompare(T.value.outlet))}(Z),Z}))}processSegment(R,T,P,U,Z){return(0,Y.D)(T).pipe(tt(ne=>this.processSegmentAgainstRoute(ne._injector??R,ne,P,U,Z)),Ge(ne=>!!ne),Et(ne=>{if(nt(ne))return Za(P,U,Z)?(0,be.of)([]):(0,be.of)(null);throw ne}))}processSegmentAgainstRoute(R,T,P,U,Z){if(T.redirectTo||!Ja(T,P,U,Z))return(0,be.of)(null);let ne;if("**"===T.path){const ye=U.length>0?jo(U).parameters:{},rt=Q(P)+U.length,Ut=new sa(U,ye,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Be(T),Ui(T),T.component??T._loadedComponent??null,T,B(P),rt,st(T));ne=(0,be.of)({snapshot:Ut,consumedSegments:[],remainingSegments:[]})}else ne=la(P,T,U,R).pipe((0,Me.U)(({matched:ye,consumedSegments:rt,remainingSegments:Ut,parameters:on})=>{if(!ye)return null;const Xn=Q(P)+rt.length;return{snapshot:new sa(rt,on,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Be(T),Ui(T),T.component??T._loadedComponent??null,T,B(P),Xn,st(T)),consumedSegments:rt,remainingSegments:Ut}}));return ne.pipe((0,Ze.w)(ye=>{if(null===ye)return(0,be.of)(null);const{snapshot:rt,consumedSegments:Ut,remainingSegments:on}=ye;R=T._injector??R;const Xn=T._loadedInjector??R,Gr=function Ka(w){return w.children?w.children:w.loadChildren?w._loadedRoutes:[]}(T),{segmentGroup:vr,slicedSegments:po}=qs(P,Ut,on,Gr.filter(Ao=>void 0===Ao.redirectTo));if(0===po.length&&vr.hasChildren())return this.processChildren(Xn,Gr,vr).pipe((0,Me.U)(Ao=>null===Ao?null:[new Fr(rt,Ao)]));if(0===Gr.length&&0===po.length)return(0,be.of)([new Fr(rt,[])]);const Xo=Ui(T)===Z;return this.processSegment(Xn,Gr,vr,po,Xo?Sn:Z).pipe((0,Me.U)(Ao=>null===Ao?null:[new Fr(rt,Ao)]))}))}}function tu(w){const R=w.value.routeConfig;return R&&""===R.path&&void 0===R.redirectTo}function O(w){const R=[],T=new Set;for(const P of w){if(!tu(P)){R.push(P);continue}const U=R.find(Z=>P.value.routeConfig===Z.value.routeConfig);void 0!==U?(U.children.push(...P.children),T.add(U)):R.push(P)}for(const P of T){const U=O(P.children);R.push(new Fr(P.value,U))}return R.filter(P=>!T.has(P))}function B(w){let R=w;for(;R._sourceSegment;)R=R._sourceSegment;return R}function Q(w){let R=w,T=R._segmentIndexShift??0;for(;R._sourceSegment;)R=R._sourceSegment,T+=R._segmentIndexShift??0;return T-1}function Be(w){return w.data||{}}function st(w){return w.resolve||{}}function ci(w){return"string"==typeof w.title||null===w.title}function di(w){return(0,Ze.w)(R=>{const T=w(R);return T?(0,Y.D)(T).pipe((0,Me.U)(()=>R)):(0,be.of)(R)})}const C=new a.OlP("ROUTES");let u=(()=>{class w{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,a.f3M)(a.Sil)}loadComponent(T){if(this.componentLoaders.get(T))return this.componentLoaders.get(T);if(T._loadedComponent)return(0,be.of)(T._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(T);const P=Or(T.loadComponent()).pipe((0,Me.U)($e),(0,Qe.b)(Z=>{this.onLoadEndListener&&this.onLoadEndListener(T),T._loadedComponent=Z}),sn(()=>{this.componentLoaders.delete(T)})),U=new pi(P,()=>new ke.x).pipe(Bt());return this.componentLoaders.set(T,U),U}loadChildren(T,P){if(this.childrenLoaders.get(P))return this.childrenLoaders.get(P);if(P._loadedRoutes)return(0,be.of)({routes:P._loadedRoutes,injector:P._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(P);const Z=this.loadModuleFactoryOrRoutes(P.loadChildren).pipe((0,Me.U)(ye=>{this.onLoadEndListener&&this.onLoadEndListener(P);let rt,Ut,on=!1;Array.isArray(ye)?Ut=ye:(rt=ye.create(T).injector,Ut=Pr(rt.get(C,[],a.XFs.Self|a.XFs.Optional)));return{routes:Ut.map(Wa),injector:rt}}),sn(()=>{this.childrenLoaders.delete(P)})),ne=new pi(Z,()=>new ke.x).pipe(Bt());return this.childrenLoaders.set(P,ne),ne}loadModuleFactoryOrRoutes(T){return Or(T()).pipe((0,Me.U)($e),(0,Zt.z)(P=>P instanceof a.YKP||Array.isArray(P)?(0,be.of)(P):(0,Y.D)(this.compiler.compileModuleAsync(P))))}}return w.\u0275fac=function(T){return new(T||w)},w.\u0275prov=a.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})();function $e(w){return function H(w){return w&&"object"==typeof w&&"default"in w}(w)?w.default:w}let Dn=(()=>{class w{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new ke.x,this.configLoader=(0,a.f3M)(u),this.environmentInjector=(0,a.f3M)(a.lqb),this.urlSerializer=(0,a.f3M)(ls),this.rootContexts=(0,a.f3M)(Vo),this.navigationId=0,this.afterPreactivation=()=>(0,be.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=U=>this.events.next(new Yr(U)),this.configLoader.onLoadStartListener=U=>this.events.next(new Hl(U))}complete(){this.transitions?.complete()}handleNavigationRequest(T){const P=++this.navigationId;this.transitions?.next({...this.transitions.value,...T,id:P})}setupNavigations(T){return this.transitions=new xe.X({id:0,targetPageId:0,currentUrlTree:T.currentUrlTree,currentRawUrl:T.currentUrlTree,extractedUrl:T.urlHandlingStrategy.extract(T.currentUrlTree),urlAfterRedirects:T.urlHandlingStrategy.extract(T.currentUrlTree),rawUrl:T.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Rr,restoredState:null,currentSnapshot:T.routerState.snapshot,targetSnapshot:null,currentRouterState:T.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,fn.h)(P=>0!==P.id),(0,Me.U)(P=>({...P,extractedUrl:T.urlHandlingStrategy.extract(P.rawUrl)})),(0,Ze.w)(P=>{let U=!1,Z=!1;return(0,be.of)(P).pipe((0,Qe.b)(ne=>{this.currentNavigation={id:ne.id,initialUrl:ne.rawUrl,extractedUrl:ne.extractedUrl,trigger:ne.source,extras:ne.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Ze.w)(ne=>{const ye=T.browserUrlTree.toString(),rt=!T.navigated||ne.extractedUrl.toString()!==ye||ye!==T.currentUrlTree.toString();if(!rt&&"reload"!==(ne.extras.onSameUrlNavigation??T.onSameUrlNavigation)){const on="";return this.events.next(new bo(ne.id,T.serializeUrl(P.rawUrl),on,0)),T.rawUrlTree=ne.rawUrl,ne.resolve(null),Ct.E}if(T.urlHandlingStrategy.shouldProcessUrl(ne.rawUrl))return _r(ne.source)&&(T.browserUrlTree=ne.extractedUrl),(0,be.of)(ne).pipe((0,Ze.w)(on=>{const Xn=this.transitions?.getValue();return this.events.next(new ko(on.id,this.urlSerializer.serialize(on.extractedUrl),on.source,on.restoredState)),Xn!==this.transitions?.getValue()?Ct.E:Promise.resolve(on)}),function da(w,R,T,P){return(0,Ze.w)(U=>function ho(w,R,T,P,U){return new Ro(w,R,T,P,U).apply()}(w,R,T,U.extractedUrl,P).pipe((0,Me.U)(Z=>({...U,urlAfterRedirects:Z}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,T.config),(0,Qe.b)(on=>{this.currentNavigation={...this.currentNavigation,finalUrl:on.urlAfterRedirects},P.urlAfterRedirects=on.urlAfterRedirects}),function un(w,R,T,P,U){return(0,Zt.z)(Z=>function zi(w,R,T,P,U,Z,ne="emptyOnly"){return new Ca(w,R,T,P,U,ne,Z).recognize().pipe((0,Ze.w)(ye=>null===ye?function $o(w){return new je.y(R=>R.error(w))}(new Lr):(0,be.of)(ye)))}(w,R,T,Z.urlAfterRedirects,P.serialize(Z.urlAfterRedirects),P,U).pipe((0,Me.U)(ne=>({...Z,targetSnapshot:ne}))))}(this.environmentInjector,this.rootComponentType,T.config,this.urlSerializer,T.paramsInheritanceStrategy),(0,Qe.b)(on=>{if(P.targetSnapshot=on.targetSnapshot,"eager"===T.urlUpdateStrategy){if(!on.extras.skipLocationChange){const Gr=T.urlHandlingStrategy.merge(on.urlAfterRedirects,on.rawUrl);T.setBrowserUrl(Gr,on)}T.browserUrlTree=on.urlAfterRedirects}const Xn=new Ma(on.id,this.urlSerializer.serialize(on.extractedUrl),this.urlSerializer.serialize(on.urlAfterRedirects),on.targetSnapshot);this.events.next(Xn)}));if(rt&&T.urlHandlingStrategy.shouldProcessUrl(T.rawUrlTree)){const{id:on,extractedUrl:Xn,source:Gr,restoredState:vr,extras:po}=ne,Xo=new ko(on,this.urlSerializer.serialize(Xn),Gr,vr);this.events.next(Xo);const Ao=$l(Xn,this.rootComponentType).snapshot;return P={...ne,targetSnapshot:Ao,urlAfterRedirects:Xn,extras:{...po,skipLocationChange:!1,replaceUrl:!1}},(0,be.of)(P)}{const on="";return this.events.next(new bo(ne.id,T.serializeUrl(P.extractedUrl),on,1)),T.rawUrlTree=ne.rawUrl,ne.resolve(null),Ct.E}}),(0,Qe.b)(ne=>{const ye=new $s(ne.id,this.urlSerializer.serialize(ne.extractedUrl),this.urlSerializer.serialize(ne.urlAfterRedirects),ne.targetSnapshot);this.events.next(ye)}),(0,Me.U)(ne=>P={...ne,guards:is(ne.targetSnapshot,ne.currentSnapshot,this.rootContexts)}),function Ss(w,R){return(0,Zt.z)(T=>{const{targetSnapshot:P,currentSnapshot:U,guards:{canActivateChecks:Z,canDeactivateChecks:ne}}=T;return 0===ne.length&&0===Z.length?(0,be.of)({...T,guardsResult:!0}):function br(w,R,T,P){return(0,Y.D)(w).pipe((0,Zt.z)(U=>function Bs(w,R,T,P,U){const Z=R&&R.routeConfig?R.routeConfig.canDeactivate:null;if(!Z||0===Z.length)return(0,be.of)(!0);const ne=Z.map(ye=>{const rt=aa(R)??U,Ut=xo(ye,rt);return Or(function xl(w){return w&&_n(w.canDeactivate)}(Ut)?Ut.canDeactivate(w,R,T,P):rt.runInContext(()=>Ut(w,R,T,P))).pipe(Ge())});return(0,be.of)(ne).pipe(er())}(U.component,U.route,T,R,P)),Ge(U=>!0!==U,!0))}(ne,P,U,w).pipe((0,Zt.z)(ye=>ye&&function $a(w){return"boolean"==typeof w}(ye)?function Xl(w,R,T,P){return(0,Y.D)(R).pipe(tt(U=>(0,St.z)(function $t(w,R){return null!==w&&R&&R(new Ds(w)),(0,be.of)(!0)}(U.route.parent,P),function co(w,R){return null!==w&&R&&R(new Mi(w)),(0,be.of)(!0)}(U.route,P),function Sa(w,R,T){const P=R[R.length-1],Z=R.slice(0,R.length-1).reverse().map(ne=>function Ml(w){const R=w.routeConfig?w.routeConfig.canActivateChild:null;return R&&0!==R.length?{node:w,guards:R}:null}(ne)).filter(ne=>null!==ne).map(ne=>Oe(()=>{const ye=ne.guards.map(rt=>{const Ut=aa(ne.node)??T,on=xo(rt,Ut);return Or(function Hi(w){return w&&_n(w.canActivateChild)}(on)?on.canActivateChild(P,w):Ut.runInContext(()=>on(P,w))).pipe(Ge())});return(0,be.of)(ye).pipe(er())}));return(0,be.of)(Z).pipe(er())}(w,U.path,T),function Do(w,R,T){const P=R.routeConfig?R.routeConfig.canActivate:null;if(!P||0===P.length)return(0,be.of)(!0);const U=P.map(Z=>Oe(()=>{const ne=aa(R)??T,ye=xo(Z,ne);return Or(function _c(w){return w&&_n(w.canActivate)}(ye)?ye.canActivate(R,w):ne.runInContext(()=>ye(R,w))).pipe(Ge())}));return(0,be.of)(U).pipe(er())}(w,U.route,T))),Ge(U=>!0!==U,!0))}(P,Z,w,R):(0,be.of)(ye)),(0,Me.U)(ye=>({...T,guardsResult:ye})))})}(this.environmentInjector,ne=>this.events.next(ne)),(0,Qe.b)(ne=>{if(P.guardsResult=ne.guardsResult,wr(ne.guardsResult))throw kd(0,ne.guardsResult);const ye=new xa(ne.id,this.urlSerializer.serialize(ne.extractedUrl),this.urlSerializer.serialize(ne.urlAfterRedirects),ne.targetSnapshot,!!ne.guardsResult);this.events.next(ye)}),(0,fn.h)(ne=>!!ne.guardsResult||(T.restoreHistory(ne),this.cancelNavigationTransition(ne,"",3),!1)),di(ne=>{if(ne.guards.canActivateChecks.length)return(0,be.of)(ne).pipe((0,Qe.b)(ye=>{const rt=new To(ye.id,this.urlSerializer.serialize(ye.extractedUrl),this.urlSerializer.serialize(ye.urlAfterRedirects),ye.targetSnapshot);this.events.next(rt)}),(0,Ze.w)(ye=>{let rt=!1;return(0,be.of)(ye).pipe(function li(w,R){return(0,Zt.z)(T=>{const{targetSnapshot:P,guards:{canActivateChecks:U}}=T;if(!U.length)return(0,be.of)(T);let Z=0;return(0,Y.D)(U).pipe(tt(ne=>function Vt(w,R,T,P){const U=w.routeConfig,Z=w._resolve;return void 0!==U?.title&&!ci(U)&&(Z[Mn]=U.title),function Vn(w,R,T,P){const U=function Ln(w){return[...Object.keys(w),...Object.getOwnPropertySymbols(w)]}(w);if(0===U.length)return(0,be.of)({});const Z={};return(0,Y.D)(U).pipe((0,Zt.z)(ne=>function fr(w,R,T,P){const U=aa(R)??P,Z=xo(w,U);return Or(Z.resolve?Z.resolve(R,T):U.runInContext(()=>Z(R,T)))}(w[ne],R,T,P).pipe(Ge(),(0,Qe.b)(ye=>{Z[ne]=ye}))),Jn(1),(0,In.h)(Z),Et(ne=>nt(ne)?Ct.E:et(ne)))}(Z,w,R,P).pipe((0,Me.U)(ne=>(w._resolvedData=ne,w.data=Ha(w,T).resolve,U&&ci(U)&&(w.data[Mn]=U.title),null)))}(ne.route,P,w,R)),(0,Qe.b)(()=>Z++),Jn(1),(0,Zt.z)(ne=>Z===U.length?(0,be.of)(T):Ct.E))})}(T.paramsInheritanceStrategy,this.environmentInjector),(0,Qe.b)({next:()=>rt=!0,complete:()=>{rt||(T.restoreHistory(ye),this.cancelNavigationTransition(ye,"",2))}}))}),(0,Qe.b)(ye=>{const rt=new Nr(ye.id,this.urlSerializer.serialize(ye.extractedUrl),this.urlSerializer.serialize(ye.urlAfterRedirects),ye.targetSnapshot);this.events.next(rt)}))}),di(ne=>{const ye=rt=>{const Ut=[];rt.routeConfig?.loadComponent&&!rt.routeConfig._loadedComponent&&Ut.push(this.configLoader.loadComponent(rt.routeConfig).pipe((0,Qe.b)(on=>{rt.component=on}),(0,Me.U)(()=>{})));for(const on of rt.children)Ut.push(...ye(on));return Ut};return(0,Xe.a)(ye(ne.targetSnapshot.root)).pipe(kt(),(0,We.q)(1))}),di(()=>this.afterPreactivation()),(0,Me.U)(ne=>{const ye=function Bd(w,R,T){const P=za(w,R._root,T?T._root:void 0);return new wa(P,R)}(T.routeReuseStrategy,ne.targetSnapshot,ne.currentRouterState);return P={...ne,targetRouterState:ye}}),(0,Qe.b)(ne=>{T.currentUrlTree=ne.urlAfterRedirects,T.rawUrlTree=T.urlHandlingStrategy.merge(ne.urlAfterRedirects,ne.rawUrl),T.routerState=ne.targetRouterState,"deferred"===T.urlUpdateStrategy&&(ne.extras.skipLocationChange||T.setBrowserUrl(T.rawUrlTree,ne),T.browserUrlTree=ne.urlAfterRedirects)}),((w,R,T)=>(0,Me.U)(P=>(new gc(R,P.targetRouterState,P.currentRouterState,T).activate(w),P)))(this.rootContexts,T.routeReuseStrategy,ne=>this.events.next(ne)),(0,We.q)(1),(0,Qe.b)({next:ne=>{U=!0,this.lastSuccessfulNavigation=this.currentNavigation,T.navigated=!0,this.events.next(new Bi(ne.id,this.urlSerializer.serialize(ne.extractedUrl),this.urlSerializer.serialize(T.currentUrlTree))),T.titleStrategy?.updateTitle(ne.targetRouterState.snapshot),ne.resolve(!0)},complete:()=>{U=!0}}),sn(()=>{U||Z||this.cancelNavigationTransition(P,"",1),this.currentNavigation?.id===P.id&&(this.currentNavigation=null)}),Et(ne=>{if(Z=!0,Uu(ne)){Zl(ne)||(T.navigated=!0,T.restoreHistory(P,!0));const ye=new Ws(P.id,this.urlSerializer.serialize(P.extractedUrl),ne.message,ne.cancellationCode);if(this.events.next(ye),Zl(ne)){const rt=T.urlHandlingStrategy.merge(ne.url,T.rawUrlTree),Ut={skipLocationChange:P.extras.skipLocationChange,replaceUrl:"eager"===T.urlUpdateStrategy||_r(P.source)};T.scheduleNavigation(rt,Rr,null,Ut,{resolve:P.resolve,reject:P.reject,promise:P.promise})}else P.resolve(!1)}else{T.restoreHistory(P,!0);const ye=new Gn(P.id,this.urlSerializer.serialize(P.extractedUrl),ne,P.targetSnapshot??void 0);this.events.next(ye);try{P.resolve(T.errorHandler(ne))}catch(rt){P.reject(rt)}}return Ct.E}))}))}cancelNavigationTransition(T,P,U){const Z=new Ws(T.id,this.urlSerializer.serialize(T.extractedUrl),P,U);this.events.next(Z),T.resolve(!1)}}return w.\u0275fac=function(T){return new(T||w)},w.\u0275prov=a.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})();function _r(w){return w!==Rr}let tr=(()=>{class w{buildTitle(T){let P,U=T.root;for(;void 0!==U;)P=this.getResolvedTitleForRoute(U)??P,U=U.children.find(Z=>Z.outlet===Sn);return P}getResolvedTitleForRoute(T){return T.data[Mn]}}return w.\u0275fac=function(T){return new(T||w)},w.\u0275prov=a.Yz7({token:w,factory:function(){return(0,a.f3M)(Sr)},providedIn:"root"}),w})(),Sr=(()=>{class w extends tr{constructor(T){super(),this.title=T}updateTitle(T){const P=this.buildTitle(T);void 0!==P&&this.title.setTitle(P)}}return w.\u0275fac=function(T){return new(T||w)(a.LFG(Kr.Dx))},w.\u0275prov=a.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})(),qi=(()=>{class w{}return w.\u0275fac=function(T){return new(T||w)},w.\u0275prov=a.Yz7({token:w,factory:function(){return(0,a.f3M)(So)},providedIn:"root"}),w})();class pr{shouldDetach(R){return!1}store(R,T){}shouldAttach(R){return!1}retrieve(R){return null}shouldReuseRoute(R,T){return R.routeConfig===T.routeConfig}}let So=(()=>{class w extends pr{}return w.\u0275fac=function(){let R;return function(P){return(R||(R=a.n5z(w)))(P||w)}}(),w.\u0275prov=a.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})();const Eo=new a.OlP("",{providedIn:"root",factory:()=>({})});let Yo=(()=>{class w{}return w.\u0275fac=function(T){return new(T||w)},w.\u0275prov=a.Yz7({token:w,factory:function(){return(0,a.f3M)(mr)},providedIn:"root"}),w})(),mr=(()=>{class w{shouldProcessUrl(T){return!0}extract(T){return T}merge(T,P){return T}}return w.\u0275fac=function(T){return new(T||w)},w.\u0275prov=a.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})();function Qs(w){throw w}function _s(w,R,T){return R.parse("/")}const ks={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Jo={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Ki=(()=>{class w{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,a.f3M)(a.c2e),this.isNgZoneEnabled=!1,this.options=(0,a.f3M)(Eo,{optional:!0})||{},this.errorHandler=this.options.errorHandler||Qs,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||_s,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,a.f3M)(Yo),this.routeReuseStrategy=(0,a.f3M)(qi),this.urlCreationStrategy=(0,a.f3M)(Ys),this.titleStrategy=(0,a.f3M)(tr),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Pr((0,a.f3M)(C,{optional:!0})??[]),this.navigationTransitions=(0,a.f3M)(Dn),this.urlSerializer=(0,a.f3M)(ls),this.location=(0,a.f3M)(Se.Ye),this.isNgZoneEnabled=(0,a.f3M)(a.R0b)instanceof a.R0b&&a.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Dr,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=$l(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(T=>{this.lastSuccessfulId=T.id,this.currentPageId=T.targetPageId},T=>{this.console.warn(`Unhandled Navigation Error: ${T}`)})}resetRootComponentType(T){this.routerState.root.component=T,this.navigationTransitions.rootComponentType=T}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const T=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Rr,T)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(T=>{const P="popstate"===T.type?"popstate":"hashchange";"popstate"===P&&setTimeout(()=>{this.navigateToSyncWithBrowser(T.url,P,T.state)},0)}))}navigateToSyncWithBrowser(T,P,U){const Z={replaceUrl:!0},ne=U?.navigationId?U:null;if(U){const rt={...U};delete rt.navigationId,delete rt.\u0275routerPageId,0!==Object.keys(rt).length&&(Z.state=rt)}const ye=this.parseUrl(T);this.scheduleNavigation(ye,P,ne,Z)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(T){this.config=T.map(Wa),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(T,P={}){const{relativeTo:U,queryParams:Z,fragment:ne,queryParamsHandling:ye,preserveFragment:rt}=P,Ut=rt?this.currentUrlTree.fragment:ne;let on=null;switch(ye){case"merge":on={...this.currentUrlTree.queryParams,...Z};break;case"preserve":on=this.currentUrlTree.queryParams;break;default:on=Z||null}return null!==on&&(on=this.removeEmptyProps(on)),this.urlCreationStrategy.createUrlTree(U,this.routerState,this.currentUrlTree,T,on,Ut??null)}navigateByUrl(T,P={skipLocationChange:!1}){const U=wr(T)?T:this.parseUrl(T),Z=this.urlHandlingStrategy.merge(U,this.rawUrlTree);return this.scheduleNavigation(Z,Rr,null,P)}navigate(T,P={skipLocationChange:!1}){return function vs(w){for(let R=0;R<w.length;R++){const T=w[R];if(null==T)throw new a.vHH(4008,false)}}(T),this.navigateByUrl(this.createUrlTree(T,P),P)}serializeUrl(T){return this.urlSerializer.serialize(T)}parseUrl(T){let P;try{P=this.urlSerializer.parse(T)}catch(U){P=this.malformedUriErrorHandler(U,this.urlSerializer,T)}return P}isActive(T,P){let U;if(U=!0===P?{...ks}:!1===P?{...Jo}:P,wr(T))return ki(this.currentUrlTree,T,U);const Z=this.parseUrl(T);return ki(this.currentUrlTree,Z,U)}removeEmptyProps(T){return Object.keys(T).reduce((P,U)=>{const Z=T[U];return null!=Z&&(P[U]=Z),P},{})}scheduleNavigation(T,P,U,Z,ne){if(this.disposed)return Promise.resolve(!1);let ye,rt,Ut,on;return ne?(ye=ne.resolve,rt=ne.reject,Ut=ne.promise):Ut=new Promise((Xn,Gr)=>{ye=Xn,rt=Gr}),on="computed"===this.canceledNavigationResolution?U&&U.\u0275routerPageId?U.\u0275routerPageId:Z.replaceUrl||Z.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:on,source:P,restoredState:U,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:T,extras:Z,resolve:ye,reject:rt,promise:Ut,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Ut.catch(Xn=>Promise.reject(Xn))}setBrowserUrl(T,P){const U=this.urlSerializer.serialize(T),Z={...P.extras.state,...this.generateNgRouterState(P.id,P.targetPageId)};this.location.isCurrentPathEqualTo(U)||P.extras.replaceUrl?this.location.replaceState(U,"",Z):this.location.go(U,"",Z)}restoreHistory(T,P=!1){if("computed"===this.canceledNavigationResolution){const U=this.currentPageId-T.targetPageId;"popstate"!==T.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.getCurrentNavigation()?.finalUrl||0===U?this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===U&&(this.resetState(T),this.browserUrlTree=T.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(U)}else"replace"===this.canceledNavigationResolution&&(P&&this.resetState(T),this.resetUrlToCurrentUrlTree())}resetState(T){this.routerState=T.currentRouterState,this.currentUrlTree=T.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,T.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(T,P){return"computed"===this.canceledNavigationResolution?{navigationId:T,\u0275routerPageId:P}:{navigationId:T}}}return w.\u0275fac=function(T){return new(T||w)},w.\u0275prov=a.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})();class Zo{}let fo=(()=>{class w{constructor(T,P,U,Z,ne){this.router=T,this.injector=U,this.preloadingStrategy=Z,this.loader=ne}setUpPreloading(){this.subscription=this.router.events.pipe((0,fn.h)(T=>T instanceof Bi),tt(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(T,P){const U=[];for(const Z of P){Z.providers&&!Z._injector&&(Z._injector=(0,a.MMx)(Z.providers,T,`Route: ${Z.path}`));const ne=Z._injector??T,ye=Z._loadedInjector??ne;(Z.loadChildren&&!Z._loadedRoutes&&void 0===Z.canLoad||Z.loadComponent&&!Z._loadedComponent)&&U.push(this.preloadConfig(ne,Z)),(Z.children||Z._loadedRoutes)&&U.push(this.processRoutes(ye,Z.children??Z._loadedRoutes))}return(0,Y.D)(U).pipe((0,Ii.J)())}preloadConfig(T,P){return this.preloadingStrategy.preload(P,()=>{let U;U=P.loadChildren&&void 0===P.canLoad?this.loader.loadChildren(T,P):(0,be.of)(null);const Z=U.pipe((0,Zt.z)(ne=>null===ne?(0,be.of)(void 0):(P._loadedRoutes=ne.routes,P._loadedInjector=ne.injector,this.processRoutes(ne.injector??T,ne.routes))));if(P.loadComponent&&!P._loadedComponent){const ne=this.loader.loadComponent(P);return(0,Y.D)([Z,ne]).pipe((0,Ii.J)())}return Z})}}return w.\u0275fac=function(T){return new(T||w)(a.LFG(Ki),a.LFG(a.Sil),a.LFG(a.lqb),a.LFG(Zo),a.LFG(u))},w.\u0275prov=a.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})();const Rl=new a.OlP("");let jr=(()=>{class w{constructor(T,P,U,Z,ne={}){this.urlSerializer=T,this.transitions=P,this.viewportScroller=U,this.zone=Z,this.options=ne,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},ne.scrollPositionRestoration=ne.scrollPositionRestoration||"disabled",ne.anchorScrolling=ne.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(T=>{T instanceof ko?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=T.navigationTrigger,this.restoredId=T.restoredState?T.restoredState.navigationId:0):T instanceof Bi&&(this.lastId=T.id,this.scheduleScrollEvent(T,this.urlSerializer.parse(T.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(T=>{T instanceof zl&&(T.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(T.position):T.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(T.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(T,P){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new zl(T,"popstate"===this.lastSource?this.store[this.restoredId]:null,P))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return w.\u0275fac=function(T){a.$Z()},w.\u0275prov=a.Yz7({token:w,factory:w.\u0275fac}),w})();var Cr=(()=>((Cr=Cr||{})[Cr.COMPLETE=0]="COMPLETE",Cr[Cr.FAILED=1]="FAILED",Cr[Cr.REDIRECTING=2]="REDIRECTING",Cr))();const fa=!1;function ys(w,R){return{\u0275kind:w,\u0275providers:R}}const Sl=new a.OlP("",{providedIn:"root",factory:()=>!1});function el(){const w=(0,a.f3M)(a.zs3);return R=>{const T=w.get(a.z2F);if(R!==T.components[0])return;const P=w.get(Ki),U=w.get(Cl);1===w.get(dn)&&P.initialNavigation(),w.get(Yu,null,a.XFs.Optional)?.setUpPreloading(),w.get(Rl,null,a.XFs.Optional)?.init(),P.resetRootComponentType(T.componentTypes[0]),U.closed||(U.next(),U.complete(),U.unsubscribe())}}const Cl=new a.OlP(fa?"bootstrap done indicator":"",{factory:()=>new ke.x}),dn=new a.OlP(fa?"initial navigation":"",{providedIn:"root",factory:()=>1});function rs(){let w=[];return w=fa?[{provide:a.Xts,multi:!0,useFactory:()=>{const R=(0,a.f3M)(Ki);return()=>R.events.subscribe(T=>{console.group?.(`Router Event: ${T.constructor.name}`),console.log(function Mo(w){if(!("type"in w))return`Unknown Router Event: ${w.constructor.name}`;switch(w.type){case 14:return`ActivationEnd(path: '${w.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${w.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${w.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${w.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${w.id}, url: '${w.url}', urlAfterRedirects: '${w.urlAfterRedirects}', state: ${w.state}, shouldActivate: ${w.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${w.id}, url: '${w.url}', urlAfterRedirects: '${w.urlAfterRedirects}', state: ${w.state})`;case 2:return`NavigationCancel(id: ${w.id}, url: '${w.url}')`;case 16:return`NavigationSkipped(id: ${w.id}, url: '${w.url}')`;case 1:return`NavigationEnd(id: ${w.id}, url: '${w.url}', urlAfterRedirects: '${w.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${w.id}, url: '${w.url}', error: ${w.error})`;case 0:return`NavigationStart(id: ${w.id}, url: '${w.url}')`;case 6:return`ResolveEnd(id: ${w.id}, url: '${w.url}', urlAfterRedirects: '${w.urlAfterRedirects}', state: ${w.state})`;case 5:return`ResolveStart(id: ${w.id}, url: '${w.url}', urlAfterRedirects: '${w.urlAfterRedirects}', state: ${w.state})`;case 10:return`RouteConfigLoadEnd(path: ${w.route.path})`;case 9:return`RouteConfigLoadStart(path: ${w.route.path})`;case 4:return`RoutesRecognized(id: ${w.id}, url: '${w.url}', urlAfterRedirects: '${w.urlAfterRedirects}', state: ${w.state})`;case 15:return`Scroll(anchor: '${w.anchor}', position: '${w.position?`${w.position[0]}, ${w.position[1]}`:null}')`}}(T)),console.log(T),console.groupEnd?.()})}}]:[],ys(1,w)}const Yu=new a.OlP(fa?"router preloader":"");function El(w){return ys(0,[{provide:Yu,useExisting:fo},{provide:Zo,useExisting:w}])}const Kn=!1,Al=new a.OlP(Kn?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),Zu=[Se.Ye,{provide:ls,useClass:Ga},Ki,Vo,{provide:Go,useFactory:function sf(w){return w.routerState.root},deps:[Ki]},u,Kn?{provide:Sl,useValue:!0}:[]];function xc(){return new a.PXZ("Router",Ki)}let qo=(()=>{class w{constructor(T){}static forRoot(T,P){return{ngModule:w,providers:[Zu,Kn&&P?.enableTracing?rs().\u0275providers:[],{provide:C,multi:!0,useValue:T},{provide:Al,useFactory:ec,deps:[[Ki,new a.FiY,new a.tp0]]},{provide:Eo,useValue:P||{}},P?.useHash?{provide:Se.S$,useClass:Se.Do}:{provide:Se.S$,useClass:Se.b0},{provide:Rl,useFactory:()=>{const w=(0,a.f3M)(Se.EM),R=(0,a.f3M)(a.R0b),T=(0,a.f3M)(Eo),P=(0,a.f3M)(Dn),U=(0,a.f3M)(ls);return T.scrollOffset&&w.setOffset(T.scrollOffset),new jr(U,P,w,R,T)}},P?.preloadingStrategy?El(P.preloadingStrategy).\u0275providers:[],{provide:a.PXZ,multi:!0,useFactory:xc},P?.initialNavigation?tl(P):[],[{provide:Aa,useFactory:el},{provide:a.tb,multi:!0,useExisting:Aa}]]}}static forChild(T){return{ngModule:w,providers:[{provide:C,multi:!0,useValue:T}]}}}return w.\u0275fac=function(T){return new(T||w)(a.LFG(Al,8))},w.\u0275mod=a.oAB({type:w}),w.\u0275inj=a.cJS({imports:[oa]}),w})();function ec(w){if(Kn&&w)throw new a.vHH(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function tl(w){return["disabled"===w.initialNavigation?ys(3,[{provide:a.ip1,multi:!0,useFactory:()=>{const R=(0,a.f3M)(Ki);return()=>{R.setUpLocationChangeListener()}}},{provide:dn,useValue:2}]).\u0275providers:[],"enabledBlocking"===w.initialNavigation?ys(2,[{provide:dn,useValue:0},{provide:a.ip1,multi:!0,deps:[a.zs3],useFactory:R=>{const T=R.get(Se.V_,Promise.resolve());return()=>T.then(()=>new Promise(P=>{const U=R.get(Ki),Z=R.get(Cl);(function Tr(w,R){w.events.pipe((0,fn.h)(T=>T instanceof Bi||T instanceof Ws||T instanceof Gn||T instanceof bo),(0,Me.U)(T=>T instanceof Bi||T instanceof bo?Cr.COMPLETE:T instanceof Ws&&(0===T.code||1===T.code)?Cr.REDIRECTING:Cr.FAILED),(0,fn.h)(T=>T!==Cr.REDIRECTING),(0,We.q)(1)).subscribe(()=>{R()})})(U,()=>{P(!0)}),R.get(Dn).afterPreactivation=()=>(P(!0),Z.closed?(0,be.of)(void 0):Z),U.initialNavigation()}))}}]).\u0275providers:[]]}const Aa=new a.OlP(Kn?"Router Initializer":"")},2148:(gn,qe,ee)=>{ee.d(qe,{HLk:()=>Ln,I1v:()=>Ks,ITp:()=>va,cw:()=>Un,sI:()=>zt,Pts:()=>Qe,lFy:()=>Sn,D9c:()=>mn,UG5:()=>vi,JO:()=>ur,YRQ:()=>Fs,WB3:()=>To,o8H:()=>Mi,EZf:()=>Ce,RjQ:()=>Pi,TfJ:()=>Jr,EFb:()=>Fr,XHp:()=>wa,VIe:()=>Za,pN9:()=>Et,DOm:()=>Ha,$M4:()=>pc});var a=ee(1571),Y=ee(6682),be=ee(7579),xe=ee(6063);class Re extends be.x{constructor(C=1/0,u=1/0,H=xe.l){super(),this._bufferSize=C,this._windowTime=u,this._timestampProvider=H,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=u===1/0,this._bufferSize=Math.max(1,C),this._windowTime=Math.max(1,u)}next(C){const{isStopped:u,_buffer:H,_infiniteTimeWindow:$e,_timestampProvider:Yt,_windowTime:Dn}=this;u||(H.push(C),!$e&&H.push(Yt.now()+Dn)),this._trimBuffer(),super.next(C)}_subscribe(C){this._throwIfClosed(),this._trimBuffer();const u=this._innerSubscribe(C),{_infiniteTimeWindow:H,_buffer:$e}=this,Yt=$e.slice();for(let Dn=0;Dn<Yt.length&&!C.closed;Dn+=H?1:2)C.next(Yt[Dn]);return this._checkFinalizedStatuses(C),u}_trimBuffer(){const{_bufferSize:C,_timestampProvider:u,_buffer:H,_infiniteTimeWindow:$e}=this,Yt=($e?1:2)*C;if(C<1/0&&Yt<H.length&&H.splice(0,H.length-Yt),!$e){const Dn=u.now();let _r=0;for(let tr=1;tr<H.length&&H[tr]<=Dn;tr+=2)_r=tr;_r&&H.splice(0,_r+1)}}}var ze=ee(2722),Xe=function(){var V=0,C=document.createElement("div");function u(qi){return C.appendChild(qi.dom),qi}function H(qi){for(var pr=0;pr<C.children.length;pr++)C.children[pr].style.display=pr===qi?"block":"none";V=qi}C.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",C.addEventListener("click",function(qi){qi.preventDefault(),H(++V%C.children.length)},!1);var $e=(performance||Date).now(),Yt=$e,Dn=0,_r=u(new Xe.Panel("FPS","#0ff","#002")),tr=u(new Xe.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var Sr=u(new Xe.Panel("MB","#f08","#201"));return H(0),{REVISION:16,dom:C,addPanel:u,showPanel:H,begin:function(){$e=(performance||Date).now()},end:function(){Dn++;var qi=(performance||Date).now();if(tr.update(qi-$e,200),qi>=Yt+1e3&&(_r.update(1e3*Dn/(qi-Yt),100),Yt=qi,Dn=0,Sr)){var pr=performance.memory;Sr.update(pr.usedJSHeapSize/1048576,pr.jsHeapSizeLimit/1048576)}return qi},update:function(){$e=this.end()},domElement:C,setMode:H}};Xe.Panel=function(V,C,u){var H=1/0,$e=0,Yt=Math.round,Dn=Yt(window.devicePixelRatio||1),_r=80*Dn,tr=48*Dn,Sr=3*Dn,qi=2*Dn,pr=3*Dn,So=15*Dn,Co=74*Dn,Eo=30*Dn,Yo=document.createElement("canvas");Yo.width=_r,Yo.height=tr,Yo.style.cssText="width:80px;height:48px";var mr=Yo.getContext("2d");return mr.font="bold "+9*Dn+"px Helvetica,Arial,sans-serif",mr.textBaseline="top",mr.fillStyle=u,mr.fillRect(0,0,_r,tr),mr.fillStyle=C,mr.fillText(V,Sr,qi),mr.fillRect(pr,So,Co,Eo),mr.fillStyle=u,mr.globalAlpha=.9,mr.fillRect(pr,So,Co,Eo),{dom:Yo,update:function(Ea,Qs){H=Math.min(H,Ea),$e=Math.max($e,Ea),mr.fillStyle=u,mr.globalAlpha=1,mr.fillRect(0,0,_r,So),mr.fillStyle=C,mr.fillText(Yt(Ea)+" "+V+" ("+Yt(H)+"-"+Yt($e)+")",Sr,qi),mr.drawImage(Yo,pr+Dn,So,Co-Dn,Eo,pr,So,Co-Dn,Eo),mr.fillRect(pr+Co-Dn,So,Dn,Eo),mr.fillStyle=u,mr.globalAlpha=.9,mr.fillRect(pr+Co-Dn,So,Dn,Yt((1-Ea/Qs)*Eo))}}};const St=Xe;var je=ee(6895);const Pe=["rendererCanvas"];var Bt=(()=>{return(V=Bt||(Bt={})).mouseEnter="mouseEnter",V.mouseExit="mouseExit",V.click="click",V.pointerDown="pointerDown",V.pointerUp="pointerUp",Bt;var V})();const pi=new a.OlP("A reference to the raycaster object",{factory:()=>new Y.iMs});let ke=(()=>{class V{constructor(){this.raycaster=(0,a.f3M)(pi),this.selected=null,this.enabled=!0,this.groups=[],this.paused=!1,this.maxClickDistance=23,this.nid=V.instanceCnt++,this.onPointerMove=this.onPointerMove.bind(this),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerUp=this.onPointerUp.bind(this)}ngOnDestroy(){this.disable(),this.unsubscribe()}subscribe(){if(!this.canvas)throw new Error("missing canvas");this.canvas.addEventListener("pointermove",this.onPointerMove),this.canvas.addEventListener("pointerdown",this.onPointerDown),this.canvas.addEventListener("pointerup",this.onPointerUp)}unsubscribe(){if(!this.canvas)throw new Error("missing canvas");this.canvas.removeEventListener("pointermove",this.onPointerMove),this.canvas.removeEventListener("pointerdown",this.onPointerDown),this.canvas.removeEventListener("pointerup",this.onPointerUp)}enable(){this.enabled=!0}disable(){this.enabled=!1}pause(){this.paused=!0}resume(){this.paused=!1}get isEnabled(){return this.enabled}init(u,H){this.camera=u,this.canvas=H,this.subscribe()}addEventTarget(u){this.groups.push(u)}removeEventTarget(u){const H=this.groups.indexOf(u);H>=0&&this.groups.splice(H,1)}onPointerMove(u){if(!this.isReady())return;const H=this.getFirstIntersectedGroup(u.layerX,u.layerY,Bt.mouseEnter);if((!this.selected||this.selected!==H?.target)&&(this.selected&&(this.selected.host.objRef?.dispatchEvent({type:Bt.mouseExit,component:this.selected.host}),this.selected.emitOnMouseExit(),this.selected=null),H&&H.target)){this.selected=H.target;const $e={type:Bt.mouseEnter,component:H.target.host,...H};this.selected.host.objRef?.dispatchEvent($e),this.selected.emitOnMouseEnter($e)}}onPointerDown(u){if(this.maxClickDistance=u.width,this.pointerDownEvent=u,!this.isReady())return;const H=this.getFirstIntersectedGroup(u.layerX,u.layerY,Bt.pointerDown);if(H&&H.target&&H.target.host.objRef){const $e={type:Bt.pointerDown,component:H.target.host,...H};H.target.host.objRef.dispatchEvent($e),H.target.emitOnPointerDown($e)}}onPointerUp(u){const H=this.pointerDownEvent;if(this.pointerDownEvent=void 0,!this.isReady())return;let $e=this.getFirstIntersectedGroup(u.layerX,u.layerY,Bt.pointerUp);if($e&&$e.target&&$e.target.host.objRef){const Yt={type:Bt.pointerUp,component:$e.target.host,...$e};$e.target.host.objRef.dispatchEvent(Yt),$e.target.emitOnPointerUp(Yt)}if(!(this.calcPointerDownUpDinstance(u,H)>this.maxClickDistance)&&($e=this.getFirstIntersectedGroup(u.layerX,u.layerY,Bt.click),$e&&$e.target&&$e.target.host.objRef)){const Yt={type:Bt.click,component:$e.target.host,...$e};$e.target.host.objRef.dispatchEvent(Yt),$e.target.emitOnClick(Yt)}}isReady(u){return!!(this.enabled&&(u||!this.paused)&&this.camera&&this.camera.objRef&&this.groups&&this.groups.length>0)}calcPointerDownUpDinstance(u,H){if(!H)return Number.MAX_VALUE;const $e=u.layerX-H.layerX,Yt=u.layerY-H.layerY;return Math.sqrt($e*$e+Yt*Yt)}getFirstIntersectedGroup(u,H,$e){if(!this.camera||!this.canvas||!this.camera.objRef)return;const Yt=new Y.FM8(u=u/this.canvas.clientWidth*2-1,H=-H/this.canvas.clientHeight*2+1);let Dn,_r;this.raycaster.setFromCamera(Yt,this.camera.objRef);for(const tr of this.groups){const Sr=tr.host.objRef;if(!tr[$e]||!Sr)continue;const qi=this.raycaster.intersectObject(Sr,!0);qi.length>0&&(!Dn||Dn.distance>qi[0].distance)&&(Dn=qi[0],_r=tr)}return _r&&Dn?{target:_r,...Dn}:void 0}}return V.instanceCnt=0,V.\u0275fac=function(u){return new(u||V)},V.\u0275prov=a.Yz7({token:V,factory:V.\u0275fac}),V})();function Me(V,C){return function Se(V){return!(!V||!V.set)}(V)?void 0===C?V:Array.isArray(C)?(V.set(...C),V):V.copy&&C?(V.copy(C),V):void 0!==C?(V.set(C),V):V:C}function kt(V){return!0===V.__isProxy&&void 0===V.objRef}let ai=(()=>{class V{set objRef(u){this.applyObjRef(u)}get objRef(){return this._objRef}constructor(){this.autoAddToParent=!0,this.autoDispose=!0}addToParent(){}removeFromParent(){}set threeEvents(u){this.removeEvents(),this.eventListeners=u,this.applyEvents()}get threeEvents(){return this.eventListeners}get onUpdate(){return this.updateEmitter||(this.updateEmitter=new a.vpe),this.updateEmitter}get objRef$(){return this._objRef$||(this._objRef$=new Re(1)),this._objRef$}ngOnInit(){this.objRef||(this.objRef=this.createThreeInstance(this.args))}getType(){throw new Error("derive me")}createThreeInstance(u){return Array.isArray(u)?new(this.getType())(...u):new(this.getType())(u)}ngOnChanges(u){if(!this.objRef||kt(this.objRef)){u.objRef?.currentValue?this.objRef=u.objRef?.currentValue:this.objRef||(this.objRef=this.createThreeInstance(u.args?.currentValue));for(const H in u)this[H]=u[H].currentValue;this.emitPropertyChanges(u)}else this.emitPropertyChanges(u)}disposeObjRef(){(function Ze(V){return!(!V||"function"!=typeof V.dispose)})(this.objRef)&&this.objRef.dispose()}ngOnDestroy(){this.removeEvents(),this.removeFromParent(),this.autoDispose&&this.disposeObjRef()}applyObjRef(u){this._objRef!==u&&(this.removeFromParent(),this._objRef=u,this.autoAddToParent&&this.addToParent()),this.emitObjRefChange()}emitObjRefChange(){this._objRef&&!kt(this._objRef)&&(this._objRef.dispatchEvent?.({type:"loaded",object:this._objRef}),this._objRef$&&this._objRef$.next(this._objRef))}emitPropertyChanges(u){this._objRef&&this._objRef.dispatchEvent?.({type:"changes",changes:u}),this.updateEmitter&&this.updateEmitter.next(u)}removeEvents(){if(this.eventListeners&&this._objRef){for(const u of Object.entries(this.eventListeners))this._objRef.removeEventListener(u[0],u[1]);this.eventListeners=void 0}}applyEvents(){if(this.eventListeners&&this._objRef)for(const u of Object.entries(this.eventListeners))this._objRef.addEventListener(u[0],u[1])}}return V.\u0275fac=function(u){return new(u||V)},V.\u0275cmp=a.Xpm({type:V,selectors:[["th-abs-wrapper"]],inputs:{autoAddToParent:"autoAddToParent",autoDispose:"autoDispose",objRef:"objRef",args:"args",threeEvents:"threeEvents"},outputs:{onUpdate:"onUpdate",objRef$:"objRef$"},features:[a.TTD],decls:0,vars:0,template:function(u,H){},encapsulation:2}),V})(),cn=(()=>{class V extends ai{constructor(u){super(),this.parent=u}addToParent(){this._objRef&&this.parent.objRef&&(!this._objRef.parent||this._objRef.parent.uuid!==this.parent.objRef.uuid)&&this.parent.objRef.add(this._objRef)}removeFromParent(){this._objRef?.parent?.remove(this._objRef)}applyObjRef(u){(this._objRef!==u||this._objRef?.parent?.uuid!==this.parent.objRef.uuid)&&(this.removeFromParent(),this._objRef=u,this.autoAddToParent&&this.addToParent()),this.emitObjRefChange()}attachToParent(u,H){!this.parent.objRef||u===H&&H?.parent?.uuid===this.parent.objRef.uuid||(H&&H.parent&&H.parent.remove(H),u&&(!u.parent||u.parent&&u.parent.uuid!==this.parent.objRef.uuid)&&this.parent.objRef.add(u))}set lookAt(u){Promise.resolve().then(()=>{this.objRef&&(Array.isArray(u)?this.objRef.lookAt(...u):this.objRef.lookAt(u))})}}return V.\u0275fac=function(u){return new(u||V)(a.Y36(V))},V.\u0275cmp=a.Xpm({type:V,selectors:[["th-abs-object"]],inputs:{lookAt:"lookAt"},features:[a.qOj],decls:0,vars:0,template:function(u,H){},encapsulation:2}),V})(),Ce=(()=>{class V extends cn{getType(){return Y.Tme}set id(u){this._objRef&&(this._objRef.id=u)}set uuid(u){this._objRef&&(this._objRef.uuid=u)}set name(u){this._objRef&&(this._objRef.name=u)}set type(u){this._objRef&&(this._objRef.type=u)}set children(u){this._objRef&&(this._objRef.children=u)}set up(u){this._objRef&&(this._objRef.up=Me(this._objRef.up,u))}set position(u){this._objRef&&Me(this._objRef.position,u)}set rotation(u){this._objRef&&Me(this._objRef.rotation,u)}set quaternion(u){this._objRef&&Me(this._objRef.quaternion,u)}set scale(u){this._objRef&&Me(this._objRef.scale,u)}set modelViewMatrix(u){this._objRef&&Me(this._objRef.modelViewMatrix,u)}set normalMatrix(u){this._objRef&&Me(this._objRef.normalMatrix,u)}set matrix(u){this._objRef&&(this._objRef.matrix=Me(this._objRef.matrix,u))}set matrixWorld(u){this._objRef&&(this._objRef.matrixWorld=Me(this._objRef.matrixWorld,u))}set matrixAutoUpdate(u){this._objRef&&(this._objRef.matrixAutoUpdate=u)}set matrixWorldAutoUpdate(u){this._objRef&&(this._objRef.matrixWorldAutoUpdate=u)}set matrixWorldNeedsUpdate(u){this._objRef&&(this._objRef.matrixWorldNeedsUpdate=u)}set layers(u){this._objRef&&(this._objRef.layers=Me(this._objRef.layers,u))}set visible(u){this._objRef&&(this._objRef.visible=u)}set castShadow(u){this._objRef&&(this._objRef.castShadow=u)}set receiveShadow(u){this._objRef&&(this._objRef.receiveShadow=u)}set frustumCulled(u){this._objRef&&(this._objRef.frustumCulled=u)}set renderOrder(u){this._objRef&&(this._objRef.renderOrder=u)}set animations(u){this._objRef&&(this._objRef.animations=u)}set userData(u){this._objRef&&(this._objRef.userData=u)}set customDepthMaterial(u){this._objRef&&(this._objRef.customDepthMaterial=u)}set customDistanceMaterial(u){this._objRef&&(this._objRef.customDistanceMaterial=u)}set onBeforeRender(u){this._objRef&&(this._objRef.onBeforeRender=u)}set onAfterRender(u){this._objRef&&(this._objRef.onAfterRender=u)}constructor(u){super(u)}}return V.\u0275fac=function(u){return new(u||V)(a.Y36(V,4))},V.\u0275cmp=a.Xpm({type:V,selectors:[["th-object3D"]],inputs:{id:"id",uuid:"uuid",name:"name",type:"type",children:"children",up:"up",position:"position",rotation:"rotation",quaternion:"quaternion",scale:"scale",modelViewMatrix:"modelViewMatrix",normalMatrix:"normalMatrix",matrix:"matrix",matrixWorld:"matrixWorld",matrixAutoUpdate:"matrixAutoUpdate",matrixWorldAutoUpdate:"matrixWorldAutoUpdate",matrixWorldNeedsUpdate:"matrixWorldNeedsUpdate",layers:"layers",visible:"visible",castShadow:"castShadow",receiveShadow:"receiveShadow",frustumCulled:"frustumCulled",renderOrder:"renderOrder",animations:"animations",userData:"userData",customDepthMaterial:"customDepthMaterial",customDistanceMaterial:"customDistanceMaterial",onBeforeRender:"onBeforeRender",onAfterRender:"onAfterRender"},features:[a._Bn([]),a.qOj],decls:0,vars:0,template:function(u,H){},encapsulation:2,changeDetection:0}),V})(),Qe=(()=>{class V extends Ce{getType(){return Y.V1s}set matrixWorldInverse(u){this._objRef&&(this._objRef.matrixWorldInverse=Me(this._objRef.matrixWorldInverse,u))}set projectionMatrix(u){this._objRef&&(this._objRef.projectionMatrix=Me(this._objRef.projectionMatrix,u))}set projectionMatrixInverse(u){this._objRef&&(this._objRef.projectionMatrixInverse=Me(this._objRef.projectionMatrixInverse,u))}}return V.\u0275fac=function(){let C;return function(H){return(C||(C=a.n5z(V)))(H||V)}}(),V.\u0275cmp=a.Xpm({type:V,selectors:[["th-camera"]],inputs:{matrixWorldInverse:"matrixWorldInverse",projectionMatrix:"projectionMatrix",projectionMatrixInverse:"projectionMatrixInverse"},features:[a._Bn([{provide:Ce,useExisting:(0,a.Gpc)(()=>V)}]),a.qOj],decls:0,vars:0,template:function(u,H){},encapsulation:2,changeDetection:0}),V})(),Et=(()=>{class V extends Ce{getType(){return Y.xsS}set type(u){this._objRef&&(this._objRef.type=u)}set fog(u){this._objRef&&(this._objRef.fog=u)}set backgroundBlurriness(u){this._objRef&&(this._objRef.backgroundBlurriness=u)}set backgroundIntensity(u){this._objRef&&(this._objRef.backgroundIntensity=u)}set overrideMaterial(u){this._objRef&&(this._objRef.overrideMaterial=u)}set background(u){this._objRef&&(this._objRef.background=Me(this._objRef.background,u))}set environment(u){this._objRef&&(this._objRef.environment=u)}}return V.\u0275fac=function(){let C;return function(H){return(C||(C=a.n5z(V)))(H||V)}}(),V.\u0275cmp=a.Xpm({type:V,selectors:[["th-scene"]],inputs:{type:"type",fog:"fog",backgroundBlurriness:"backgroundBlurriness",backgroundIntensity:"backgroundIntensity",overrideMaterial:"overrideMaterial",background:"background",environment:"environment"},features:[a._Bn([{provide:Ce,useExisting:(0,a.Gpc)(()=>V)}]),a.qOj],decls:0,vars:0,template:function(u,H){},encapsulation:2,changeDetection:0}),V})();const wt={alpha:!0,antialias:!0,preserveDrawingBuffer:!0};let mn=(()=>{class V{get canvas(){return this.rendererParameters?.domElement}constructor(u){this.ngZone=u,this.clock=new Y.SUY,this.destroyed$=new be.x,this.resizeEmitter=new a.vpe,this.beforeRenderEmitter=new a.vpe,this.views=[],this.beforeRender$=this.beforeRenderEmitter.pipe((0,ze.R)(this.destroyed$)),this.resize$=this.resizeEmitter.pipe((0,ze.R)(this.destroyed$))}get renderer(){return this._renderer}ngOnDestroy(){this.resizeObserver&&this.canvas&&this.resizeObserver.unobserve(this.canvas)}initResizeObserver(){this.ngZone.runOutsideAngular(()=>{if(!this.canvas)throw new Error("missing canvas element");this.resize(),this.resizeObserver||(this.resizeObserver=new ResizeObserver(()=>{this.resize()})),this.resizeObserver.observe(this.canvas)})}initRenderer(){this._renderer||(this._renderer=new Y.CP7({canvas:this.rendererParameters?.domElement,...wt}),Object.assign(this._renderer,{...wt,...this.rendererParameters}),this.resize())}setRenderer(u){this.rendererParameters=u,this.initRenderer(),this.initResizeObserver()}addView(u){this.views.push(u);const H=this.calcRendererSize();H&&this.adjustViewDimensions(u,H.width,H.height)}render(){this.beforeRenderEmitter.emit({engine:this,delta:this.clock.getDelta()});for(const u of this.views)this.renderView(u)}renderView(u){if(!this._renderer)return;const H=u.camera,$e=u.scene;if(!(H&&$e&&H.objRef&&$e.objRef))return;const Yt=this._renderer;(function We(V){return void 0!==V&&(V.observed||V.observers?.length>0)})(u.onRender)&&this.ngZone.run(()=>u.onRender.emit({renderer:Yt,scene:$e,camera:H})),this.applyRendererParametersFromView(u),u.effectComposer?u.effectComposer.render():this._renderer.render($e.objRef,H.objRef)}applyRendererParametersFromView(u){this._renderer&&(u.viewPort&&(u.viewPort instanceof Y.Ltg?this._renderer.setViewport(u.viewPort):this._renderer.setViewport(u.viewPort.x,u.viewPort.y,u.viewPort.width,u.viewPort.height)),u.scissor&&(u.scissor instanceof Y.Ltg?this._renderer.setScissor(u.scissor):this._renderer.setScissor(u.scissor.x,u.scissor.y,u.scissor.width,u.scissor.height)),void 0!==u.scissorTest&&this._renderer.setScissorTest(u.scissorTest),u.clearColor&&this._renderer.setClearColor(u.clearColor),void 0!==u.clearAlpha&&this._renderer.setClearAlpha(u.clearAlpha),void 0!==u.shadow&&(this._renderer.shadowMap.enabled=!0))}resize(){if(!this._renderer||!this.canvas)return!1;const{width:u,height:H}=this.calcRendererSize();this._renderer.setSize(u,H,!1);for(const $e of this.views)this.adjustViewDimensions($e,u,H);return this.resizeEmitter.emit({width:u,height:H}),!0}calcRendererSize(){if(!this._renderer||!this.canvas)return;const u=window.devicePixelRatio;return{width:(this.canvas.clientWidth??0)*u,height:(this.canvas.clientHeight??0)*u}}adjustViewDimensions(u,H,$e){u.viewPort||(u.camera&&u.camera.objRef.aspect&&(u.camera.objRef.aspect=H/$e,u.camera.objRef.updateProjectionMatrix()),u.effectComposer?.setSize(H,$e))}}return V.\u0275fac=function(u){return new(u||V)(a.LFG(a.R0b))},V.\u0275prov=a.Yz7({token:V,factory:V.\u0275fac}),V})(),Jn=(()=>{class V{constructor(u,H){this.engServ=u,this.raycaster=H,this.onRender=new a.vpe}set contentScene(u){u&&(this.scene=u)}set effectComposer(u){this._effectComposer=u,this.configureEffectComposerRenderTarget()}get effectComposer(){return this._effectComposer}set camera(u){this._camera=u,this.initRaycaster()}get camera(){return this._camera}set contentCamera(u){u&&(this.camera=u)}set viewPort(u){this._viewPort=u,this.configureEffectComposerRenderTarget()}get viewPort(){return this._viewPort}ngOnInit(){this.initRaycaster()}initRaycaster(){this.camera&&this.engServ.canvas&&this.raycaster.init(this.camera,this.engServ.canvas)}add(u){}remove(u){}configureEffectComposerRenderTarget(){if(this.viewPort&&this.effectComposer){let u,H;this.viewPort instanceof Y.Ltg?(u=this.viewPort.z,H=this.viewPort?.width):(u=this.viewPort.width,H=this.viewPort.height),this.effectComposer.setSize(u,H)}}}return V.\u0275fac=function(u){return new(u||V)(a.Y36(mn),a.Y36(ke))},V.\u0275cmp=a.Xpm({type:V,selectors:[["th-view"]],contentQueries:function(u,H,$e){if(1&u&&(a.Suo($e,Et,5),a.Suo($e,Qe,5)),2&u){let Yt;a.iGM(Yt=a.CRH())&&(H.contentScene=Yt.first),a.iGM(Yt=a.CRH())&&(H.contentCamera=Yt.first)}},inputs:{scene:"scene",effectComposer:"effectComposer",camera:"camera",shadow:"shadow",viewPort:"viewPort",scissor:"scissor",scissorTest:"scissorTest",clearColor:"clearColor",clearAlpha:"clearAlpha"},outputs:{onRender:"onRender"},features:[a._Bn([{provide:Ce,useExisting:(0,a.Gpc)(()=>V)},{provide:pi,useValue:new Y.iMs},ke])],decls:0,vars:0,template:function(u,H){},encapsulation:2}),V})(),Kr=(()=>{class V{constructor(u,H){this.engineService=u,this.ngZone=H,this.active=!0,this.destroyed$=new be.x,this.beforeRender$=this.engineService.beforeRender$,this.engineService.resize$.pipe((0,ze.R)(this.destroyed$)).subscribe(()=>this.requestAnimationFrame())}ngOnDestroy(){this.stop(),this.destroyed$.next(),this.destroyed$.complete()}start(){this.active||(this.active=!0,this.requestAnimationFrame())}stop(){this.active=!1,void 0!==this.frameId&&(cancelAnimationFrame(this.frameId),this.frameId=void 0)}isActive(){return this.active}requestAnimationFrame(){void 0===this.frameId&&this.ngZone.runOutsideAngular(()=>this.frameId=requestAnimationFrame(()=>{this.frameId=void 0,this.engineService.render(),this.active&&this.requestAnimationFrame()}))}}return V.\u0275fac=function(u){return new(u||V)(a.LFG(mn),a.LFG(a.R0b))},V.\u0275prov=a.Yz7({token:V,factory:V.\u0275fac}),V})(),Sn=(()=>{class V extends Jn{get obj(){return this}set views(u){u.forEach(H=>this.engServ.addView(H))}set rendererCanvas(u){u&&(this._rendererCanvas=u,u.nativeElement.id+=this.nid)}get rendererCanvas(){return this._rendererCanvas}constructor(u,H,$e){super(u,$e),this.engServ=u,this.animationLoop=H,this.raycaster=$e,this.nid=V.instanceCnt++,this.disableDefaultView=!1}ngAfterContentChecked(){this.animationLoop.requestAnimationFrame()}ngAfterViewInit(){this.animationLoop.requestAnimationFrame()}ngOnInit(){this.applyRendererParameters(),super.ngOnInit(),this.disableDefaultView||this.engServ.addView(this)}applyRendererParameters(){if(!this.rendererCanvas)throw new Error("Missing Canvas");this.engServ.setRenderer({...this.rendererParameters,domElement:this.rendererCanvas.nativeElement})}}return V.instanceCnt=0,V.\u0275fac=function(u){return new(u||V)(a.Y36(mn),a.Y36(Kr),a.Y36((0,a.Gpc)(()=>ke)))},V.\u0275cmp=a.Xpm({type:V,selectors:[["th-canvas"]],contentQueries:function(u,H,$e){if(1&u&&a.Suo($e,Jn,4),2&u){let Yt;a.iGM(Yt=a.CRH())&&(H.views=Yt)}},viewQuery:function(u,H){if(1&u&&a.Gf(Pe,7),2&u){let $e;a.iGM($e=a.CRH())&&(H.rendererCanvas=$e.first)}},inputs:{rendererParameters:"rendererParameters",disableDefaultView:"disableDefaultView"},features:[a._Bn([{provide:Ce,useExisting:(0,a.Gpc)(()=>V)},mn,Kr,{provide:pi,useValue:new Y.iMs},(0,a.Gpc)(()=>ke),{provide:Jn,useExisting:(0,a.Gpc)(()=>V)}]),a.qOj],decls:2,vars:0,consts:[["id","rendererCanvas"],["rendererCanvas",""]],template:function(u,H){1&u&&a._UZ(0,"canvas",0,1)},styles:["[_nghost-%COMP%]{display:flex;flex:auto;line-height:0;height:100%}canvas[_ngcontent-%COMP%]{flex:auto;outline:none;width:100%;height:100%}"],changeDetection:0}),V})(),Wr=(()=>{class V extends Ce{getType(){return Y._kC}set type(u){this._objRef&&(this._objRef.type=u)}set color(u){this._objRef&&(this._objRef.color=Me(this._objRef.color,u))}set intensity(u){this._objRef&&(this._objRef.intensity=u)}set shadow(u){this._objRef&&(this._objRef.shadow=u)}set shadowCameraFov(u){this._objRef&&(this._objRef.shadowCameraFov=u)}set shadowCameraLeft(u){this._objRef&&(this._objRef.shadowCameraLeft=u)}set shadowCameraRight(u){this._objRef&&(this._objRef.shadowCameraRight=u)}set shadowCameraTop(u){this._objRef&&(this._objRef.shadowCameraTop=u)}set shadowCameraBottom(u){this._objRef&&(this._objRef.shadowCameraBottom=u)}set shadowCameraNear(u){this._objRef&&(this._objRef.shadowCameraNear=u)}set shadowCameraFar(u){this._objRef&&(this._objRef.shadowCameraFar=u)}set shadowBias(u){this._objRef&&(this._objRef.shadowBias=u)}set shadowMapWidth(u){this._objRef&&(this._objRef.shadowMapWidth=u)}set shadowMapHeight(u){this._objRef&&(this._objRef.shadowMapHeight=u)}}return V.\u0275fac=function(){let C;return function(H){return(C||(C=a.n5z(V)))(H||V)}}(),V.\u0275cmp=a.Xpm({type:V,selectors:[["th-light"]],inputs:{type:"type",color:"color",intensity:"intensity",shadow:"shadow",shadowCameraFov:"shadowCameraFov",shadowCameraLeft:"shadowCameraLeft",shadowCameraRight:"shadowCameraRight",shadowCameraTop:"shadowCameraTop",shadowCameraBottom:"shadowCameraBottom",shadowCameraNear:"shadowCameraNear",shadowCameraFar:"shadowCameraFar",shadowBias:"shadowBias",shadowMapWidth:"shadowMapWidth",shadowMapHeight:"shadowMapHeight"},features:[a._Bn([{provide:Ce,useExisting:(0,a.Gpc)(()=>V)}]),a.qOj],decls:0,vars:0,template:function(u,H){},encapsulation:2,changeDetection:0}),V})(),va=(()=>{class V extends Wr{getType(){return Y.Mig}set type(u){this._objRef&&(this._objRef.type=u)}}return V.\u0275fac=function(){let C;return function(H){return(C||(C=a.n5z(V)))(H||V)}}(),V.\u0275cmp=a.Xpm({type:V,selectors:[["th-ambientLight"]],inputs:{type:"type"},features:[a._Bn([{provide:Ce,useExisting:(0,a.Gpc)(()=>V)}]),a.qOj],decls:0,vars:0,template:function(u,H){},encapsulation:2,changeDetection:0}),V})(),Pi=(()=>{class V extends Qe{getType(){return Y.cPb}set type(u){this._objRef&&(this._objRef.type=u)}set zoom(u){this._objRef&&(this._objRef.zoom=u)}set fov(u){this._objRef&&(this._objRef.fov=u)}set aspect(u){this._objRef&&(this._objRef.aspect=u)}set near(u){this._objRef&&(this._objRef.near=u)}set far(u){this._objRef&&(this._objRef.far=u)}set focus(u){this._objRef&&(this._objRef.focus=u)}set view(u){this._objRef&&(this._objRef.view=u)}set filmGauge(u){this._objRef&&(this._objRef.filmGauge=u)}set filmOffset(u){this._objRef&&(this._objRef.filmOffset=u)}}return V.\u0275fac=function(){let C;return function(H){return(C||(C=a.n5z(V)))(H||V)}}(),V.\u0275cmp=a.Xpm({type:V,selectors:[["th-perspectiveCamera"]],inputs:{type:"type",zoom:"zoom",fov:"fov",aspect:"aspect",near:"near",far:"far",focus:"focus",view:"view",filmGauge:"filmGauge",filmOffset:"filmOffset"},features:[a._Bn([{provide:Ce,useExisting:(0,a.Gpc)(()=>V)},{provide:Qe,useExisting:(0,a.Gpc)(()=>V)}]),a.qOj],decls:0,vars:0,template:function(u,H){},encapsulation:2,changeDetection:0}),V})(),ki=(()=>{class V extends Ce{getType(){return Y.x12}set geometry(u){this._objRef&&(this._objRef.geometry=u)}set material(u){this._objRef&&(this._objRef.material=u)}set type(u){this._objRef&&(this._objRef.type=u)}set morphTargetInfluences(u){this._objRef&&(this._objRef.morphTargetInfluences=u)}set morphTargetDictionary(u){this._objRef&&(this._objRef.morphTargetDictionary=u)}}return V.\u0275fac=function(){let C;return function(H){return(C||(C=a.n5z(V)))(H||V)}}(),V.\u0275cmp=a.Xpm({type:V,selectors:[["th-line"]],inputs:{geometry:"geometry",material:"material",type:"type",morphTargetInfluences:"morphTargetInfluences",morphTargetDictionary:"morphTargetDictionary"},features:[a._Bn([{provide:Ce,useExisting:(0,a.Gpc)(()=>V)}]),a.qOj],decls:0,vars:0,template:function(u,H){},encapsulation:2,changeDetection:0}),V})(),Gt=(()=>{class V extends ki{getType(){return Y.ejS}set type(u){this._objRef&&(this._objRef.type=u)}}return V.\u0275fac=function(){let C;return function(H){return(C||(C=a.n5z(V)))(H||V)}}(),V.\u0275cmp=a.Xpm({type:V,selectors:[["th-lineSegments"]],inputs:{type:"type"},features:[a._Bn([{provide:Ce,useExisting:(0,a.Gpc)(()=>V)}]),a.qOj],decls:0,vars:0,template:function(u,H){},encapsulation:2,changeDetection:0}),V})(),Dr=(()=>{class V extends ai{constructor(u){super(),this.parent=u}addToParent(){this.parent.objRef&&(this.parent.objRef.geometry=this.objRef,this.parent.objRef.updateMorphTargets&&this.parent.objRef.updateMorphTargets())}removeFromParent(){this._objRef&&this.parent&&this.parent.objRef&&(this.parent.objRef.geometry=void 0)}}return V.\u0275fac=function(u){return new(u||V)(a.Y36(Ce))},V.\u0275cmp=a.Xpm({type:V,selectors:[["th-abs-geometry"]],features:[a.qOj],decls:0,vars:0,template:function(u,H){},encapsulation:2}),V})(),zt=(()=>{class V extends Dr{getType(){return Y.u9r}set id(u){this._objRef&&(this._objRef.id=u)}set uuid(u){this._objRef&&(this._objRef.uuid=u)}set name(u){this._objRef&&(this._objRef.name=u)}set type(u){this._objRef&&(this._objRef.type=u)}set index(u){this._objRef&&(this._objRef.index=Me(this._objRef.index,u))}set attributes(u){this._objRef&&(this._objRef.attributes=u)}set morphAttributes(u){this._objRef&&(this._objRef.morphAttributes=u)}set morphTargetsRelative(u){this._objRef&&(this._objRef.morphTargetsRelative=u)}set groups(u){this._objRef&&(this._objRef.groups=u)}set boundingBox(u){this._objRef&&(this._objRef.boundingBox=Me(this._objRef.boundingBox,u))}set boundingSphere(u){this._objRef&&(this._objRef.boundingSphere=Me(this._objRef.boundingSphere,u))}set drawRange(u){this._objRef&&(this._objRef.drawRange=u)}set userData(u){this._objRef&&(this._objRef.userData=u)}set drawcalls(u){this._objRef&&(this._objRef.drawcalls=u)}set offsets(u){this._objRef&&(this._objRef.offsets=u)}constructor(u){super(u)}}return V.\u0275fac=function(u){return new(u||V)(a.Y36(Ce,4))},V.\u0275cmp=a.Xpm({type:V,selectors:[["th-bufferGeometry"]],inputs:{id:"id",uuid:"uuid",name:"name",type:"type",index:"index",attributes:"attributes",morphAttributes:"morphAttributes",morphTargetsRelative:"morphTargetsRelative",groups:"groups",boundingBox:"boundingBox",boundingSphere:"boundingSphere",drawRange:"drawRange",userData:"userData",drawcalls:"drawcalls",offsets:"offsets"},features:[a._Bn([]),a.qOj],decls:0,vars:0,template:function(u,H){},encapsulation:2,changeDetection:0}),V})(),Un=(()=>{class V extends zt{getType(){return Y.DvJ}set type(u){this._objRef&&(this._objRef.type=u)}set parameters(u){this._objRef&&(this._objRef.parameters=u)}}return V.\u0275fac=function(){let C;return function(H){return(C||(C=a.n5z(V)))(H||V)}}(),V.\u0275cmp=a.Xpm({type:V,selectors:[["th-boxGeometry"]],inputs:{type:"type",parameters:"parameters"},features:[a._Bn([{provide:zt,useExisting:(0,a.Gpc)(()=>V)}]),a.qOj],decls:0,vars:0,template:function(u,H){},encapsulation:2,changeDetection:0}),V})(),vi=(()=>{class V extends Gt{getType(){return Y.VLJ}set type(u){this._objRef&&(this._objRef.type=u)}}return V.\u0275fac=function(){let C;return function(H){return(C||(C=a.n5z(V)))(H||V)}}(),V.\u0275cmp=a.Xpm({type:V,selectors:[["th-gridHelper"]],inputs:{type:"type"},features:[a._Bn([{provide:Ce,useExisting:(0,a.Gpc)(()=>V)}]),a.qOj],decls:0,vars:0,template:function(u,H){},encapsulation:2,changeDetection:0}),V})(),ur=(()=>{class V extends Ce{getType(){return Y.ZAu}set type(u){this._objRef&&(this._objRef.type=u)}}return V.\u0275fac=function(){let C;return function(H){return(C||(C=a.n5z(V)))(H||V)}}(),V.\u0275cmp=a.Xpm({type:V,selectors:[["th-group"]],inputs:{type:"type"},features:[a._Bn([{provide:Ce,useExisting:(0,a.Gpc)(()=>V)}]),a.qOj],decls:0,vars:0,template:function(u,H){},encapsulation:2,changeDetection:0}),V})(),Fs=(()=>{class V extends Ce{getType(){return Y.Kj0}set geometry(u){this._objRef&&(this._objRef.geometry=u)}set material(u){this._objRef&&(this._objRef.material=u)}set morphTargetInfluences(u){this._objRef&&(this._objRef.morphTargetInfluences=u)}set morphTargetDictionary(u){this._objRef&&(this._objRef.morphTargetDictionary=u)}set type(u){this._objRef&&(this._objRef.type=u)}}return V.\u0275fac=function(){let C;return function(H){return(C||(C=a.n5z(V)))(H||V)}}(),V.\u0275cmp=a.Xpm({type:V,selectors:[["th-mesh"]],inputs:{geometry:"geometry",material:"material",morphTargetInfluences:"morphTargetInfluences",morphTargetDictionary:"morphTargetDictionary",type:"type"},features:[a._Bn([{provide:Ce,useExisting:(0,a.Gpc)(()=>V)}]),a.qOj],decls:0,vars:0,template:function(u,H){},encapsulation:2,changeDetection:0}),V})(),es=(()=>{class V extends ai{constructor(u){super(),this.parent=u}addToParent(){if(!this.parent.objRef)throw new Error("parent object doesn't hold a three js object instance");this.parent.objRef.material=this.objRef}removeFromParent(){this._objRef&&this.parent&&this.parent.objRef&&(this.parent.objRef.material=void 0)}}return V.\u0275fac=function(u){return new(u||V)(a.Y36(Ce))},V.\u0275cmp=a.Xpm({type:V,selectors:[["th-abs-material"]],features:[a.qOj],decls:0,vars:0,template:function(u,H){},encapsulation:2}),V})(),Rr=(()=>{class V extends es{getType(){return Y.F5T}set alphaTest(u){this._objRef&&(this._objRef.alphaTest=u)}set alphaToCoverage(u){this._objRef&&(this._objRef.alphaToCoverage=u)}set blendDst(u){this._objRef&&(this._objRef.blendDst=u)}set blendDstAlpha(u){this._objRef&&(this._objRef.blendDstAlpha=u)}set blendEquation(u){this._objRef&&(this._objRef.blendEquation=u)}set blendEquationAlpha(u){this._objRef&&(this._objRef.blendEquationAlpha=u)}set blending(u){this._objRef&&(this._objRef.blending=u)}set blendSrc(u){this._objRef&&(this._objRef.blendSrc=u)}set blendSrcAlpha(u){this._objRef&&(this._objRef.blendSrcAlpha=u)}set clipIntersection(u){this._objRef&&(this._objRef.clipIntersection=u)}set clippingPlanes(u){this._objRef&&(this._objRef.clippingPlanes=u)}set clipShadows(u){this._objRef&&(this._objRef.clipShadows=u)}set colorWrite(u){this._objRef&&(this._objRef.colorWrite=u)}set defines(u){this._objRef&&(this._objRef.defines=u)}set depthFunc(u){this._objRef&&(this._objRef.depthFunc=u)}set depthTest(u){this._objRef&&(this._objRef.depthTest=u)}set depthWrite(u){this._objRef&&(this._objRef.depthWrite=u)}set id(u){this._objRef&&(this._objRef.id=u)}set stencilWrite(u){this._objRef&&(this._objRef.stencilWrite=u)}set stencilFunc(u){this._objRef&&(this._objRef.stencilFunc=u)}set stencilRef(u){this._objRef&&(this._objRef.stencilRef=u)}set stencilWriteMask(u){this._objRef&&(this._objRef.stencilWriteMask=u)}set stencilFuncMask(u){this._objRef&&(this._objRef.stencilFuncMask=u)}set stencilFail(u){this._objRef&&(this._objRef.stencilFail=u)}set stencilZFail(u){this._objRef&&(this._objRef.stencilZFail=u)}set stencilZPass(u){this._objRef&&(this._objRef.stencilZPass=u)}set name(u){this._objRef&&(this._objRef.name=u)}set needsUpdate(u){this._objRef&&(this._objRef.needsUpdate=u)}set opacity(u){this._objRef&&(this._objRef.opacity=u)}set polygonOffset(u){this._objRef&&(this._objRef.polygonOffset=u)}set polygonOffsetFactor(u){this._objRef&&(this._objRef.polygonOffsetFactor=u)}set polygonOffsetUnits(u){this._objRef&&(this._objRef.polygonOffsetUnits=u)}set precision(u){this._objRef&&(this._objRef.precision=u)}set premultipliedAlpha(u){this._objRef&&(this._objRef.premultipliedAlpha=u)}set dithering(u){this._objRef&&(this._objRef.dithering=u)}set side(u){this._objRef&&(this._objRef.side=u)}set shadowSide(u){this._objRef&&(this._objRef.shadowSide=u)}set toneMapped(u){this._objRef&&(this._objRef.toneMapped=u)}set transparent(u){this._objRef&&(this._objRef.transparent=u)}set type(u){this._objRef&&(this._objRef.type=u)}set uuid(u){this._objRef&&(this._objRef.uuid=u)}set vertexColors(u){this._objRef&&(this._objRef.vertexColors=u)}set visible(u){this._objRef&&(this._objRef.visible=u)}set userData(u){this._objRef&&(this._objRef.userData=u)}set version(u){this._objRef&&(this._objRef.version=u)}constructor(u){super(u)}}return V.\u0275fac=function(u){return new(u||V)(a.Y36(Ce,4))},V.\u0275cmp=a.Xpm({type:V,selectors:[["th-material"]],inputs:{alphaTest:"alphaTest",alphaToCoverage:"alphaToCoverage",blendDst:"blendDst",blendDstAlpha:"blendDstAlpha",blendEquation:"blendEquation",blendEquationAlpha:"blendEquationAlpha",blending:"blending",blendSrc:"blendSrc",blendSrcAlpha:"blendSrcAlpha",clipIntersection:"clipIntersection",clippingPlanes:"clippingPlanes",clipShadows:"clipShadows",colorWrite:"colorWrite",defines:"defines",depthFunc:"depthFunc",depthTest:"depthTest",depthWrite:"depthWrite",id:"id",stencilWrite:"stencilWrite",stencilFunc:"stencilFunc",stencilRef:"stencilRef",stencilWriteMask:"stencilWriteMask",stencilFuncMask:"stencilFuncMask",stencilFail:"stencilFail",stencilZFail:"stencilZFail",stencilZPass:"stencilZPass",name:"name",needsUpdate:"needsUpdate",opacity:"opacity",polygonOffset:"polygonOffset",polygonOffsetFactor:"polygonOffsetFactor",polygonOffsetUnits:"polygonOffsetUnits",precision:"precision",premultipliedAlpha:"premultipliedAlpha",dithering:"dithering",side:"side",shadowSide:"shadowSide",toneMapped:"toneMapped",transparent:"transparent",type:"type",uuid:"uuid",vertexColors:"vertexColors",visible:"visible",userData:"userData",version:"version"},features:[a._Bn([]),a.qOj],decls:0,vars:0,template:function(u,H){},encapsulation:2,changeDetection:0}),V})(),To=(()=>{class V extends Rr{getType(){return Y.vBJ}set type(u){this._objRef&&(this._objRef.type=u)}set color(u){this._objRef&&(this._objRef.color=Me(this._objRef.color,u))}set map(u){this._objRef&&(this._objRef.map=u)}set lightMap(u){this._objRef&&(this._objRef.lightMap=u)}set lightMapIntensity(u){this._objRef&&(this._objRef.lightMapIntensity=u)}set aoMap(u){this._objRef&&(this._objRef.aoMap=u)}set aoMapIntensity(u){this._objRef&&(this._objRef.aoMapIntensity=u)}set specularMap(u){this._objRef&&(this._objRef.specularMap=u)}set alphaMap(u){this._objRef&&(this._objRef.alphaMap=u)}set envMap(u){this._objRef&&(this._objRef.envMap=u)}set combine(u){this._objRef&&(this._objRef.combine=u)}set reflectivity(u){this._objRef&&(this._objRef.reflectivity=u)}set refractionRatio(u){this._objRef&&(this._objRef.refractionRatio=u)}set wireframe(u){this._objRef&&(this._objRef.wireframe=u)}set wireframeLinewidth(u){this._objRef&&(this._objRef.wireframeLinewidth=u)}set wireframeLinecap(u){this._objRef&&(this._objRef.wireframeLinecap=u)}set wireframeLinejoin(u){this._objRef&&(this._objRef.wireframeLinejoin=u)}set fog(u){this._objRef&&(this._objRef.fog=u)}}return V.\u0275fac=function(){let C;return function(H){return(C||(C=a.n5z(V)))(H||V)}}(),V.\u0275cmp=a.Xpm({type:V,selectors:[["th-meshBasicMaterial"]],inputs:{type:"type",color:"color",map:"map",lightMap:"lightMap",lightMapIntensity:"lightMapIntensity",aoMap:"aoMap",aoMapIntensity:"aoMapIntensity",specularMap:"specularMap",alphaMap:"alphaMap",envMap:"envMap",combine:"combine",reflectivity:"reflectivity",refractionRatio:"refractionRatio",wireframe:"wireframe",wireframeLinewidth:"wireframeLinewidth",wireframeLinecap:"wireframeLinecap",wireframeLinejoin:"wireframeLinejoin",fog:"fog"},features:[a._Bn([{provide:Rr,useExisting:(0,a.Gpc)(()=>V)}]),a.qOj],decls:0,vars:0,template:function(u,H){},encapsulation:2,changeDetection:0}),V})(),Mi=(()=>{class V extends Rr{getType(){return Y.xoR}set type(u){this._objRef&&(this._objRef.type=u)}set color(u){this._objRef&&(this._objRef.color=Me(this._objRef.color,u))}set specular(u){this._objRef&&(this._objRef.specular=Me(this._objRef.specular,u))}set shininess(u){this._objRef&&(this._objRef.shininess=u)}set map(u){this._objRef&&(this._objRef.map=u)}set lightMap(u){this._objRef&&(this._objRef.lightMap=u)}set lightMapIntensity(u){this._objRef&&(this._objRef.lightMapIntensity=u)}set aoMap(u){this._objRef&&(this._objRef.aoMap=u)}set aoMapIntensity(u){this._objRef&&(this._objRef.aoMapIntensity=u)}set emissive(u){this._objRef&&(this._objRef.emissive=Me(this._objRef.emissive,u))}set emissiveIntensity(u){this._objRef&&(this._objRef.emissiveIntensity=u)}set emissiveMap(u){this._objRef&&(this._objRef.emissiveMap=u)}set bumpMap(u){this._objRef&&(this._objRef.bumpMap=u)}set bumpScale(u){this._objRef&&(this._objRef.bumpScale=u)}set normalMap(u){this._objRef&&(this._objRef.normalMap=u)}set normalMapType(u){this._objRef&&(this._objRef.normalMapType=u)}set normalScale(u){this._objRef&&(this._objRef.normalScale=Me(this._objRef.normalScale,u))}set displacementMap(u){this._objRef&&(this._objRef.displacementMap=u)}set displacementScale(u){this._objRef&&(this._objRef.displacementScale=u)}set displacementBias(u){this._objRef&&(this._objRef.displacementBias=u)}set specularMap(u){this._objRef&&(this._objRef.specularMap=u)}set alphaMap(u){this._objRef&&(this._objRef.alphaMap=u)}set envMap(u){this._objRef&&(this._objRef.envMap=u)}set combine(u){this._objRef&&(this._objRef.combine=u)}set reflectivity(u){this._objRef&&(this._objRef.reflectivity=u)}set refractionRatio(u){this._objRef&&(this._objRef.refractionRatio=u)}set wireframe(u){this._objRef&&(this._objRef.wireframe=u)}set wireframeLinewidth(u){this._objRef&&(this._objRef.wireframeLinewidth=u)}set wireframeLinecap(u){this._objRef&&(this._objRef.wireframeLinecap=u)}set wireframeLinejoin(u){this._objRef&&(this._objRef.wireframeLinejoin=u)}set flatShading(u){this._objRef&&(this._objRef.flatShading=u)}set metal(u){this._objRef&&(this._objRef.metal=u)}set fog(u){this._objRef&&(this._objRef.fog=u)}}return V.\u0275fac=function(){let C;return function(H){return(C||(C=a.n5z(V)))(H||V)}}(),V.\u0275cmp=a.Xpm({type:V,selectors:[["th-meshPhongMaterial"]],inputs:{type:"type",color:"color",specular:"specular",shininess:"shininess",map:"map",lightMap:"lightMap",lightMapIntensity:"lightMapIntensity",aoMap:"aoMap",aoMapIntensity:"aoMapIntensity",emissive:"emissive",emissiveIntensity:"emissiveIntensity",emissiveMap:"emissiveMap",bumpMap:"bumpMap",bumpScale:"bumpScale",normalMap:"normalMap",normalMapType:"normalMapType",normalScale:"normalScale",displacementMap:"displacementMap",displacementScale:"displacementScale",displacementBias:"displacementBias",specularMap:"specularMap",alphaMap:"alphaMap",envMap:"envMap",combine:"combine",reflectivity:"reflectivity",refractionRatio:"refractionRatio",wireframe:"wireframe",wireframeLinewidth:"wireframeLinewidth",wireframeLinecap:"wireframeLinecap",wireframeLinejoin:"wireframeLinejoin",flatShading:"flatShading",metal:"metal",fog:"fog"},features:[a._Bn([{provide:Rr,useExisting:(0,a.Gpc)(()=>V)}]),a.qOj],decls:0,vars:0,template:function(u,H){},encapsulation:2,changeDetection:0}),V})(),Jr=(()=>{class V extends zt{getType(){return Y._12}set type(u){this._objRef&&(this._objRef.type=u)}set parameters(u){this._objRef&&(this._objRef.parameters=u)}}return V.\u0275fac=function(){let C;return function(H){return(C||(C=a.n5z(V)))(H||V)}}(),V.\u0275cmp=a.Xpm({type:V,selectors:[["th-planeGeometry"]],inputs:{type:"type",parameters:"parameters"},features:[a._Bn([{provide:zt,useExisting:(0,a.Gpc)(()=>V)}]),a.qOj],decls:0,vars:0,template:function(u,H){},encapsulation:2,changeDetection:0}),V})(),Fr=(()=>{class V extends Wr{getType(){return Y.cek}set type(u){this._objRef&&(this._objRef.type=u)}set intensity(u){this._objRef&&(this._objRef.intensity=u)}set distance(u){this._objRef&&(this._objRef.distance=u)}set castShadow(u){this._objRef&&(this._objRef.castShadow=u)}set decay(u){this._objRef&&(this._objRef.decay=u)}set shadow(u){this._objRef&&(this._objRef.shadow=u)}set power(u){this._objRef&&(this._objRef.power=u)}}return V.\u0275fac=function(){let C;return function(H){return(C||(C=a.n5z(V)))(H||V)}}(),V.\u0275cmp=a.Xpm({type:V,selectors:[["th-pointLight"]],inputs:{type:"type",intensity:"intensity",distance:"distance",castShadow:"castShadow",decay:"decay",shadow:"shadow",power:"power"},features:[a._Bn([{provide:Ce,useExisting:(0,a.Gpc)(()=>V)}]),a.qOj],decls:0,vars:0,template:function(u,H){},encapsulation:2,changeDetection:0}),V})(),wa=(()=>{class V extends Ce{getType(){return Y.woe}set type(u){this._objRef&&(this._objRef.type=u)}set morphTargetInfluences(u){this._objRef&&(this._objRef.morphTargetInfluences=u)}set morphTargetDictionary(u){this._objRef&&(this._objRef.morphTargetDictionary=u)}set geometry(u){this._objRef&&(this._objRef.geometry=u)}set material(u){this._objRef&&(this._objRef.material=u)}}return V.\u0275fac=function(){let C;return function(H){return(C||(C=a.n5z(V)))(H||V)}}(),V.\u0275cmp=a.Xpm({type:V,selectors:[["th-points"]],inputs:{type:"type",morphTargetInfluences:"morphTargetInfluences",morphTargetDictionary:"morphTargetDictionary",geometry:"geometry",material:"material"},features:[a._Bn([{provide:Ce,useExisting:(0,a.Gpc)(()=>V)}]),a.qOj],decls:0,vars:0,template:function(u,H){},encapsulation:2,changeDetection:0}),V})(),Ha=(()=>{class V extends Rr{getType(){return Y.jyz}set type(u){this._objRef&&(this._objRef.type=u)}set defines(u){this._objRef&&(this._objRef.defines=u)}set uniforms(u){this._objRef&&(this._objRef.uniforms=u)}set vertexShader(u){this._objRef&&(this._objRef.vertexShader=u)}set fragmentShader(u){this._objRef&&(this._objRef.fragmentShader=u)}set linewidth(u){this._objRef&&(this._objRef.linewidth=u)}set wireframe(u){this._objRef&&(this._objRef.wireframe=u)}set wireframeLinewidth(u){this._objRef&&(this._objRef.wireframeLinewidth=u)}set fog(u){this._objRef&&(this._objRef.fog=u)}set lights(u){this._objRef&&(this._objRef.lights=u)}set clipping(u){this._objRef&&(this._objRef.clipping=u)}set derivatives(u){this._objRef&&(this._objRef.derivatives=u)}set extensions(u){this._objRef&&(this._objRef.extensions=u)}set defaultAttributeValues(u){this._objRef&&(this._objRef.defaultAttributeValues=u)}set index0AttributeName(u){this._objRef&&(this._objRef.index0AttributeName=u)}set uniformsNeedUpdate(u){this._objRef&&(this._objRef.uniformsNeedUpdate=u)}set glslVersion(u){this._objRef&&(this._objRef.glslVersion=u)}set isShaderMaterial(u){this._objRef&&(this._objRef.isShaderMaterial=u)}}return V.\u0275fac=function(){let C;return function(H){return(C||(C=a.n5z(V)))(H||V)}}(),V.\u0275cmp=a.Xpm({type:V,selectors:[["th-shaderMaterial"]],inputs:{type:"type",defines:"defines",uniforms:"uniforms",vertexShader:"vertexShader",fragmentShader:"fragmentShader",linewidth:"linewidth",wireframe:"wireframe",wireframeLinewidth:"wireframeLinewidth",fog:"fog",lights:"lights",clipping:"clipping",derivatives:"derivatives",extensions:"extensions",defaultAttributeValues:"defaultAttributeValues",index0AttributeName:"index0AttributeName",uniformsNeedUpdate:"uniformsNeedUpdate",glslVersion:"glslVersion",isShaderMaterial:"isShaderMaterial"},features:[a._Bn([{provide:Rr,useExisting:(0,a.Gpc)(()=>V)}]),a.qOj],decls:0,vars:0,template:function(u,H){},encapsulation:2,changeDetection:0}),V})(),pc=(()=>{class V extends zt{getType(){return Y.xo$}set type(u){this._objRef&&(this._objRef.type=u)}set parameters(u){this._objRef&&(this._objRef.parameters=u)}}return V.\u0275fac=function(){let C;return function(H){return(C||(C=a.n5z(V)))(H||V)}}(),V.\u0275cmp=a.Xpm({type:V,selectors:[["th-sphereGeometry"]],inputs:{type:"type",parameters:"parameters"},features:[a._Bn([{provide:zt,useExisting:(0,a.Gpc)(()=>V)}]),a.qOj],decls:0,vars:0,template:function(u,H){},encapsulation:2,changeDetection:0}),V})(),Wa=(()=>{class V{}return V.\u0275fac=function(u){return new(u||V)},V.\u0275mod=a.oAB({type:V}),V.\u0275inj=a.cJS({}),V})(),Za=(()=>{class V{constructor(u,H){this.engineService=u,this.animationLoopService=H}get beforeRender(){return this.engineService.beforeRender$}get onResize(){return this.engineService.resize$}set renderOnDemand(u){u?this.animationLoopService.stop():this.animationLoopService.start()}get renderOnDemand(){return!this.animationLoopService.isActive()}}return V.\u0275fac=function(u){return new(u||V)(a.Y36(mn),a.Y36(Kr))},V.\u0275dir=a.lG2({type:V,selectors:[["","beforeRender",""],["","onResize",""],["","renderOnDemand",""]],inputs:{renderOnDemand:"renderOnDemand"},outputs:{beforeRender:"beforeRender",onResize:"onResize"}}),V})(),Ks=(()=>{class V{constructor(u){this.engineService=u,this.stats=St()}ngOnDestroy(){this.renderSubscription&&this.renderSubscription.unsubscribe()}ngOnInit(){if(!this.engineService.canvas)throw new Error("No canvas present");const u=this.engineService.canvas.parentElement;u&&(u.style.position="relative",this.stats.domElement.style.position="absolute",this.stats.showPanel(0),this.engineService.canvas.parentElement?.appendChild(this.stats.dom),this.renderSubscription=this.engineService.beforeRender$.subscribe(()=>{this.stats.update()}))}set thStats(u){this.stats.domElement.style.visibility=u?"visible":"hidden"}}return V.\u0275fac=function(u){return new(u||V)(a.Y36(mn))},V.\u0275dir=a.lG2({type:V,selectors:[["","thStats",""]],inputs:{thStats:"thStats"}}),V})();new Y.Pa4,new Y.Pa4,new Y.Pa4;let Ln=(()=>{class V{}return V.\u0275fac=function(u){return new(u||V)},V.\u0275mod=a.oAB({type:V}),V.\u0275inj=a.cJS({imports:[Wa,je.ez,Wa]}),V})()},6682:(gn,qe,ee)=>{ee.d(qe,{CP7:()=>Ov,DvJ:()=>P,F5T:()=>jr,FM8:()=>ft,Ilk:()=>$t,Kj0:()=>w,Ltg:()=>qn,Mig:()=>Jv,Pa4:()=>le,SUY:()=>z_,TlE:()=>ji,Tme:()=>_s,V1s:()=>Gr,VLJ:()=>o0,ZAu:()=>vu,_12:()=>au,_kC:()=>k_,cPb:()=>vr,cek:()=>$v,ejS:()=>Nm,iMs:()=>oy,jyz:()=>Xn,u9r:()=>Kn,vBJ:()=>Cr,woe:()=>Lm,x12:()=>bs,xo$:()=>ma,xoR:()=>zc,xsS:()=>D_});var a=ee(5861);const Y="148",Re=0,ze=1,Xe=2,Pe=1,Oe=2,Ke=3,Xt=0,et=1,Ct=2,Je=3,Ot=0,It=1,Bt=2,pi=3,ke=4,Se=5,Me=100,Ze=101,We=102,Pt=103,fn=104,Zt=200,kt=201,ai=202,cn=203,Ce=204,Ge=205,tt=206,Qe=207,Et=208,wt=209,mn=210,Jn=0,Yi=1,Cn=2,In=3,sn=4,Ii=5,Kr=6,Sn=7,Mn=0,Ir=1,Ei=2,lr=0,ja=1,Wr=2,va=3,Pr=4,jo=5,Pi=301,Or=302,_o=303,xn=304,Us=306,ki=1e3,Gt=1001,ut=1002,hr=1003,Gi=1004,Ps=1005,zt=1006,Un=1007,Zn=1008,ls=1009,Ga=1010,Hs=1011,Os=1012,ds=1013,Si=1014,Ti=1015,Xr=1016,na=1017,ia=1018,xs=1020,dl=1021,hl=1022,hs=1023,Ne=1024,_e=1025,ae=1026,Ee=1027,Ve=1028,rn=1029,Hn=1030,Vi=1031,cr=1033,fs=33776,wr=33777,ya=33778,Va=33779,fl=35840,ra=35841,Ul=35842,vo=35843,ba=36196,Ns=37492,yo=37496,Ta=37808,vi=37809,ur=37810,Oi=37811,Qr=37812,$r=37813,fc=37814,pl=37815,zs=37816,Fs=37817,qt=37818,On=37819,Qi=37820,es=37821,Rr=36492,ps=3e3,Mi=3001,zl=3201,Mo=0,ml=1,ts="srgb",Ys="srgb-linear",Vd="300 es",Vo=1035;class Uo{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const s=this._listeners;void 0===s[e]&&(s[e]=[]),-1===s[e].indexOf(t)&&s[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const s=this._listeners;return void 0!==s[e]&&-1!==s[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const l=this._listeners[e];if(void 0!==l){const h=l.indexOf(t);-1!==h&&l.splice(h,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const s=this._listeners[e.type];if(void 0!==s){e.target=this;const l=s.slice(0);for(let h=0,g=l.length;h<g;h++)l[h].call(this,e);e.target=null}}}const Ji=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],Ho=Math.PI/180,oa=180/Math.PI;function ws(){const v=4294967295*Math.random()|0,e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,s=4294967295*Math.random()|0;return(Ji[255&v]+Ji[v>>8&255]+Ji[v>>16&255]+Ji[v>>24&255]+"-"+Ji[255&e]+Ji[e>>8&255]+"-"+Ji[e>>16&15|64]+Ji[e>>24&255]+"-"+Ji[63&t|128]+Ji[t>>8&255]+"-"+Ji[t>>16&255]+Ji[t>>24&255]+Ji[255&s]+Ji[s>>8&255]+Ji[s>>16&255]+Ji[s>>24&255]).toLowerCase()}function Zi(v,e,t){return Math.max(e,Math.min(t,v))}function lo(v,e,t){return(1-t)*v+t*e}function Js(v){return 0==(v&v-1)&&0!==v}function Ml(v){return Math.pow(2,Math.floor(Math.log(v)/Math.LN2))}function gs(v,e){switch(e.constructor){case Float32Array:return v;case Uint16Array:return v/65535;case Uint8Array:return v/255;case Int16Array:return Math.max(v/32767,-1);case Int8Array:return Math.max(v/127,-1);default:throw new Error("Invalid component type.")}}function bi(v,e){switch(e.constructor){case Float32Array:return v;case Uint16Array:return Math.round(65535*v);case Uint8Array:return Math.round(255*v);case Int16Array:return Math.round(32767*v);case Int8Array:return Math.round(127*v);default:throw new Error("Invalid component type.")}}class ft{constructor(e=0,t=0){ft.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,s=this.y,l=e.elements;return this.x=l[0]*t+l[3]*s+l[6],this.y=l[1]*t+l[4]*s+l[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const s=this.length();return this.divideScalar(s||1).multiplyScalar(Math.max(e,Math.min(t,s)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,s=this.y-e.y;return t*t+s*s}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,s){return this.x=e.x+(t.x-e.x)*s,this.y=e.y+(t.y-e.y)*s,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const s=Math.cos(t),l=Math.sin(t),h=this.x-e.x,g=this.y-e.y;return this.x=h*s-g*l+e.x,this.y=h*l+g*s+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class _n{constructor(){_n.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,s,l,h,g,_,b,x){const S=this.elements;return S[0]=e,S[1]=l,S[2]=_,S[3]=t,S[4]=h,S[5]=b,S[6]=s,S[7]=g,S[8]=x,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,s=e.elements;return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],this}extractBasis(e,t,s){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),s.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const s=e.elements,l=t.elements,h=this.elements,g=s[0],_=s[3],b=s[6],x=s[1],S=s[4],A=s[7],E=s[2],L=s[5],G=s[8],j=l[0],k=l[3],J=l[6],K=l[1],$=l[4],q=l[7],se=l[2],de=l[5],ge=l[8];return h[0]=g*j+_*K+b*se,h[3]=g*k+_*$+b*de,h[6]=g*J+_*q+b*ge,h[1]=x*j+S*K+A*se,h[4]=x*k+S*$+A*de,h[7]=x*J+S*q+A*ge,h[2]=E*j+L*K+G*se,h[5]=E*k+L*$+G*de,h[8]=E*J+L*q+G*ge,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],s=e[1],l=e[2],h=e[3],g=e[4],_=e[5],b=e[6],x=e[7],S=e[8];return t*g*S-t*_*x-s*h*S+s*_*b+l*h*x-l*g*b}invert(){const e=this.elements,t=e[0],s=e[1],l=e[2],h=e[3],g=e[4],_=e[5],b=e[6],x=e[7],S=e[8],A=S*g-_*x,E=_*b-S*h,L=x*h-g*b,G=t*A+s*E+l*L;if(0===G)return this.set(0,0,0,0,0,0,0,0,0);const j=1/G;return e[0]=A*j,e[1]=(l*x-S*s)*j,e[2]=(_*s-l*g)*j,e[3]=E*j,e[4]=(S*t-l*b)*j,e[5]=(l*h-_*t)*j,e[6]=L*j,e[7]=(s*b-x*t)*j,e[8]=(g*t-s*h)*j,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,s,l,h,g,_){const b=Math.cos(h),x=Math.sin(h);return this.set(s*b,s*x,-s*(b*g+x*_)+g+e,-l*x,l*b,-l*(-x*g+b*_)+_+t,0,0,1),this}scale(e,t){return this.premultiply($a.makeScale(e,t)),this}rotate(e){return this.premultiply($a.makeRotation(-e)),this}translate(e,t){return this.premultiply($a.makeTranslation(e,t)),this}makeTranslation(e,t){return this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),s=Math.sin(e);return this.set(t,-s,0,s,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,s=e.elements;for(let l=0;l<9;l++)if(t[l]!==s[l])return!1;return!0}fromArray(e,t=0){for(let s=0;s<9;s++)this.elements[s]=e[s+t];return this}toArray(e=[],t=0){const s=this.elements;return e[t]=s[0],e[t+1]=s[1],e[t+2]=s[2],e[t+3]=s[3],e[t+4]=s[4],e[t+5]=s[5],e[t+6]=s[6],e[t+7]=s[7],e[t+8]=s[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}const $a=new _n;function Wu(v){for(let e=v.length-1;e>=0;--e)if(v[e]>=65535)return!0;return!1}function xl(v){return document.createElementNS("http://www.w3.org/1999/xhtml",v)}function zo(v){return v<.04045?.0773993808*v:Math.pow(.9478672986*v+.0521327014,2.4)}function vc(v){return v<.0031308?12.92*v:1.055*Math.pow(v,.41666)-.055}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const Dl={[ts]:{[Ys]:zo},[Ys]:{[ts]:vc}},nt={legacyMode:!0,get workingColorSpace(){return Ys},set workingColorSpace(v){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(v,e,t){if(this.legacyMode||e===t||!e||!t)return v;if(Dl[e]&&void 0!==Dl[e][t]){const s=Dl[e][t];return v.r=s(v.r),v.g=s(v.g),v.b=s(v.b),v}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(v,e){return this.convert(v,this.workingColorSpace,e)},toWorkingColorSpace:function(v,e){return this.convert(v,e,this.workingColorSpace)}},ni={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},er={r:0,g:0,b:0},Ss={h:0,s:0,l:0},br={h:0,s:0,l:0};function Xl(v,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?v+6*(e-v)*t:t<.5?e:t<2/3?v+6*(e-v)*(2/3-t):v}function co(v,e){return e.r=v.r,e.g=v.g,e.b=v.b,e}let Do,$t=(()=>{class v{constructor(t,s,l){return this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===s&&void 0===l?this.set(t):this.setRGB(t,s,l)}set(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,s=ts){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,nt.toWorkingColorSpace(this,s),this}setRGB(t,s,l,h=nt.workingColorSpace){return this.r=t,this.g=s,this.b=l,nt.toWorkingColorSpace(this,h),this}setHSL(t,s,l,h=nt.workingColorSpace){if(t=function Tl(v,e){return(v%e+e)%e}(t,1),s=Zi(s,0,1),l=Zi(l,0,1),0===s)this.r=this.g=this.b=l;else{const g=l<=.5?l*(1+s):l+s-l*s,_=2*l-g;this.r=Xl(_,g,t+1/3),this.g=Xl(_,g,t),this.b=Xl(_,g,t-1/3)}return nt.toWorkingColorSpace(this,h),this}setStyle(t,s=ts){function l(g){void 0!==g&&parseFloat(g)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let h;if(h=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(t)){let g;const b=h[2];switch(h[1]){case"rgb":case"rgba":if(g=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(b))return this.r=Math.min(255,parseInt(g[1],10))/255,this.g=Math.min(255,parseInt(g[2],10))/255,this.b=Math.min(255,parseInt(g[3],10))/255,nt.toWorkingColorSpace(this,s),l(g[4]),this;if(g=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(b))return this.r=Math.min(100,parseInt(g[1],10))/100,this.g=Math.min(100,parseInt(g[2],10))/100,this.b=Math.min(100,parseInt(g[3],10))/100,nt.toWorkingColorSpace(this,s),l(g[4]),this;break;case"hsl":case"hsla":if(g=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(b)){const x=parseFloat(g[1])/360,S=parseFloat(g[2])/100,A=parseFloat(g[3])/100;return l(g[4]),this.setHSL(x,S,A,s)}}}else if(h=/^\#([A-Fa-f\d]+)$/.exec(t)){const g=h[1],_=g.length;if(3===_)return this.r=parseInt(g.charAt(0)+g.charAt(0),16)/255,this.g=parseInt(g.charAt(1)+g.charAt(1),16)/255,this.b=parseInt(g.charAt(2)+g.charAt(2),16)/255,nt.toWorkingColorSpace(this,s),this;if(6===_)return this.r=parseInt(g.charAt(0)+g.charAt(1),16)/255,this.g=parseInt(g.charAt(2)+g.charAt(3),16)/255,this.b=parseInt(g.charAt(4)+g.charAt(5),16)/255,nt.toWorkingColorSpace(this,s),this}return t&&t.length>0?this.setColorName(t,s):this}setColorName(t,s=ts){const l=ni[t.toLowerCase()];return void 0!==l?this.setHex(l,s):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=zo(t.r),this.g=zo(t.g),this.b=zo(t.b),this}copyLinearToSRGB(t){return this.r=vc(t.r),this.g=vc(t.g),this.b=vc(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=ts){return nt.fromWorkingColorSpace(co(this,er),t),Zi(255*er.r,0,255)<<16^Zi(255*er.g,0,255)<<8^Zi(255*er.b,0,255)<<0}getHexString(t=ts){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,s=nt.workingColorSpace){nt.fromWorkingColorSpace(co(this,er),s);const l=er.r,h=er.g,g=er.b,_=Math.max(l,h,g),b=Math.min(l,h,g);let x,S;const A=(b+_)/2;if(b===_)x=0,S=0;else{const E=_-b;switch(S=A<=.5?E/(_+b):E/(2-_-b),_){case l:x=(h-g)/E+(h<g?6:0);break;case h:x=(g-l)/E+2;break;case g:x=(l-h)/E+4}x/=6}return t.h=x,t.s=S,t.l=A,t}getRGB(t,s=nt.workingColorSpace){return nt.fromWorkingColorSpace(co(this,er),s),t.r=er.r,t.g=er.g,t.b=er.b,t}getStyle(t=ts){return nt.fromWorkingColorSpace(co(this,er),t),t!==ts?`color(${t} ${er.r} ${er.g} ${er.b})`:`rgb(${255*er.r|0},${255*er.g|0},${255*er.b|0})`}offsetHSL(t,s,l){return this.getHSL(Ss),Ss.h+=t,Ss.s+=s,Ss.l+=l,this.setHSL(Ss.h,Ss.s,Ss.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,s){return this.r=t.r+s.r,this.g=t.g+s.g,this.b=t.b+s.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,s){return this.r+=(t.r-this.r)*s,this.g+=(t.g-this.g)*s,this.b+=(t.b-this.b)*s,this}lerpColors(t,s,l){return this.r=t.r+(s.r-t.r)*l,this.g=t.g+(s.g-t.g)*l,this.b=t.b+(s.b-t.b)*l,this}lerpHSL(t,s){this.getHSL(Ss),t.getHSL(br);const l=lo(Ss.h,br.h,s),h=lo(Ss.s,br.s,s),g=lo(Ss.l,br.l,s);return this.setHSL(l,h,g),this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,s=0){return this.r=t[s],this.g=t[s+1],this.b=t[s+2],this}toArray(t=[],s=0){return t[s]=this.r,t[s+1]=this.g,t[s+2]=this.b,t}fromBufferAttribute(t,s){return this.r=t.getX(s),this.g=t.getY(s),this.b=t.getZ(s),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}return v.NAMES=ni,v})();class Sa{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===Do&&(Do=xl("canvas")),Do.width=e.width,Do.height=e.height;const s=Do.getContext("2d");e instanceof ImageData?s.putImageData(e,0,0):s.drawImage(e,0,0,e.width,e.height),t=Do}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=xl("canvas");t.width=e.width,t.height=e.height;const s=t.getContext("2d");s.drawImage(e,0,0,e.width,e.height);const l=s.getImageData(0,0,e.width,e.height),h=l.data;for(let g=0;g<h.length;g++)h[g]=255*zo(h[g]/255);return s.putImageData(l,0,0),t}if(e.data){const t=e.data.slice(0);for(let s=0;s<t.length;s++)t[s]=t instanceof Uint8Array||t instanceof Uint8ClampedArray?Math.floor(255*zo(t[s]/255)):zo(t[s]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class Bs{constructor(e=null){this.isSource=!0,this.uuid=ws(),this.data=e,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const s={uuid:this.uuid,url:""},l=this.data;if(null!==l){let h;if(Array.isArray(l)){h=[];for(let g=0,_=l.length;g<_;g++)h.push(Qc(l[g].isDataTexture?l[g].image:l[g]))}else h=Qc(l);s.url=h}return t||(e.images[this.uuid]=s),s}}function Qc(v){return typeof HTMLImageElement<"u"&&v instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&v instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&v instanceof ImageBitmap?Sa.getDataURL(v):v.data?{data:Array.from(v.data),width:v.width,height:v.height,type:v.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let yc=0,rr=(()=>{class v extends Uo{constructor(t=v.DEFAULT_IMAGE,s=v.DEFAULT_MAPPING,l=Gt,h=Gt,g=zt,_=Zn,b=hs,x=ls,S=v.DEFAULT_ANISOTROPY,A=ps){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:yc++}),this.uuid=ws(),this.name="",this.source=new Bs(t),this.mipmaps=[],this.mapping=s,this.wrapS=l,this.wrapT=h,this.magFilter=g,this.minFilter=_,this.anisotropy=S,this.format=b,this.internalFormat=null,this.type=x,this.offset=new ft(0,0),this.repeat=new ft(1,1),this.center=new ft(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new _n,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=A,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(t){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const s=void 0===t||"string"==typeof t;if(!s&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const l={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(l.userData=this.userData),s||(t.textures[this.uuid]=l),l}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(300!==this.mapping)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case ki:t.x=t.x-Math.floor(t.x);break;case Gt:t.x=t.x<0?0:1;break;case ut:t.x=1===Math.abs(Math.floor(t.x)%2)?Math.ceil(t.x)-t.x:t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case ki:t.y=t.y-Math.floor(t.y);break;case Gt:t.y=t.y<0?0:1;break;case ut:t.y=1===Math.abs(Math.floor(t.y)%2)?Math.ceil(t.y)-t.y:t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){!0===t&&(this.version++,this.source.needsUpdate=!0)}}return v.DEFAULT_IMAGE=null,v.DEFAULT_MAPPING=300,v.DEFAULT_ANISOTROPY=1,v})();class qn{constructor(e=0,t=0,s=0,l=1){qn.prototype.isVector4=!0,this.x=e,this.y=t,this.z=s,this.w=l}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,s,l){return this.x=e,this.y=t,this.z=s,this.w=l,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,s=this.y,l=this.z,h=this.w,g=e.elements;return this.x=g[0]*t+g[4]*s+g[8]*l+g[12]*h,this.y=g[1]*t+g[5]*s+g[9]*l+g[13]*h,this.z=g[2]*t+g[6]*s+g[10]*l+g[14]*h,this.w=g[3]*t+g[7]*s+g[11]*l+g[15]*h,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,s,l,h;const b=e.elements,x=b[0],S=b[4],A=b[8],E=b[1],L=b[5],G=b[9],j=b[2],k=b[6],J=b[10];if(Math.abs(S-E)<.01&&Math.abs(A-j)<.01&&Math.abs(G-k)<.01){if(Math.abs(S+E)<.1&&Math.abs(A+j)<.1&&Math.abs(G+k)<.1&&Math.abs(x+L+J-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const $=(x+1)/2,q=(L+1)/2,se=(J+1)/2,de=(S+E)/4,ge=(A+j)/4,X=(G+k)/4;return $>q&&$>se?$<.01?(s=0,l=.707106781,h=.707106781):(s=Math.sqrt($),l=de/s,h=ge/s):q>se?q<.01?(s=.707106781,l=0,h=.707106781):(l=Math.sqrt(q),s=de/l,h=X/l):se<.01?(s=.707106781,l=.707106781,h=0):(h=Math.sqrt(se),s=ge/h,l=X/h),this.set(s,l,h,t),this}let K=Math.sqrt((k-G)*(k-G)+(A-j)*(A-j)+(E-S)*(E-S));return Math.abs(K)<.001&&(K=1),this.x=(k-G)/K,this.y=(A-j)/K,this.z=(E-S)/K,this.w=Math.acos((x+L+J-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const s=this.length();return this.divideScalar(s||1).multiplyScalar(Math.max(e,Math.min(t,s)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,s){return this.x=e.x+(t.x-e.x)*s,this.y=e.y+(t.y-e.y)*s,this.z=e.z+(t.z-e.z)*s,this.w=e.w+(t.w-e.w)*s,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class la extends Uo{constructor(e=1,t=1,s={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new qn(0,0,e,t),this.scissorTest=!1,this.viewport=new qn(0,0,e,t),this.texture=new rr({width:e,height:t,depth:1},s.mapping,s.wrapS,s.wrapT,s.magFilter,s.minFilter,s.format,s.type,s.anisotropy,s.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==s.generateMipmaps&&s.generateMipmaps,this.texture.internalFormat=void 0!==s.internalFormat?s.internalFormat:null,this.texture.minFilter=void 0!==s.minFilter?s.minFilter:zt,this.depthBuffer=void 0===s.depthBuffer||s.depthBuffer,this.stencilBuffer=void 0!==s.stencilBuffer&&s.stencilBuffer,this.depthTexture=void 0!==s.depthTexture?s.depthTexture:null,this.samples=void 0!==s.samples?s.samples:0}setSize(e,t,s=1){(this.width!==e||this.height!==t||this.depth!==s)&&(this.width=e,this.height=t,this.depth=s,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=s,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new Bs(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Zs extends rr{constructor(e=null,t=1,s=1,l=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:s,depth:l},this.magFilter=hr,this.minFilter=hr,this.wrapR=Gt,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class wl extends rr{constructor(e=null,t=1,s=1,l=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:s,depth:l},this.magFilter=hr,this.minFilter=hr,this.wrapR=Gt,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class js{constructor(e=0,t=0,s=0,l=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=s,this._w=l}static slerpFlat(e,t,s,l,h,g,_){let b=s[l+0],x=s[l+1],S=s[l+2],A=s[l+3];const E=h[g+0],L=h[g+1],G=h[g+2],j=h[g+3];if(0===_)return e[t+0]=b,e[t+1]=x,e[t+2]=S,void(e[t+3]=A);if(1===_)return e[t+0]=E,e[t+1]=L,e[t+2]=G,void(e[t+3]=j);if(A!==j||b!==E||x!==L||S!==G){let k=1-_;const J=b*E+x*L+S*G+A*j,K=J>=0?1:-1,$=1-J*J;if($>Number.EPSILON){const se=Math.sqrt($),de=Math.atan2(se,J*K);k=Math.sin(k*de)/se,_=Math.sin(_*de)/se}const q=_*K;if(b=b*k+E*q,x=x*k+L*q,S=S*k+G*q,A=A*k+j*q,k===1-_){const se=1/Math.sqrt(b*b+x*x+S*S+A*A);b*=se,x*=se,S*=se,A*=se}}e[t]=b,e[t+1]=x,e[t+2]=S,e[t+3]=A}static multiplyQuaternionsFlat(e,t,s,l,h,g){const _=s[l],b=s[l+1],x=s[l+2],S=s[l+3],A=h[g],E=h[g+1],L=h[g+2],G=h[g+3];return e[t]=_*G+S*A+b*L-x*E,e[t+1]=b*G+S*E+x*A-_*L,e[t+2]=x*G+S*L+_*E-b*A,e[t+3]=S*G-_*A-b*E-x*L,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,s,l){return this._x=e,this._y=t,this._z=s,this._w=l,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const s=e._x,l=e._y,h=e._z,g=e._order,_=Math.cos,b=Math.sin,x=_(s/2),S=_(l/2),A=_(h/2),E=b(s/2),L=b(l/2),G=b(h/2);switch(g){case"XYZ":this._x=E*S*A+x*L*G,this._y=x*L*A-E*S*G,this._z=x*S*G+E*L*A,this._w=x*S*A-E*L*G;break;case"YXZ":this._x=E*S*A+x*L*G,this._y=x*L*A-E*S*G,this._z=x*S*G-E*L*A,this._w=x*S*A+E*L*G;break;case"ZXY":this._x=E*S*A-x*L*G,this._y=x*L*A+E*S*G,this._z=x*S*G+E*L*A,this._w=x*S*A-E*L*G;break;case"ZYX":this._x=E*S*A-x*L*G,this._y=x*L*A+E*S*G,this._z=x*S*G-E*L*A,this._w=x*S*A+E*L*G;break;case"YZX":this._x=E*S*A+x*L*G,this._y=x*L*A+E*S*G,this._z=x*S*G-E*L*A,this._w=x*S*A-E*L*G;break;case"XZY":this._x=E*S*A-x*L*G,this._y=x*L*A-E*S*G,this._z=x*S*G+E*L*A,this._w=x*S*A+E*L*G;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+g)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const s=t/2,l=Math.sin(s);return this._x=e.x*l,this._y=e.y*l,this._z=e.z*l,this._w=Math.cos(s),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,s=t[0],l=t[4],h=t[8],g=t[1],_=t[5],b=t[9],x=t[2],S=t[6],A=t[10],E=s+_+A;if(E>0){const L=.5/Math.sqrt(E+1);this._w=.25/L,this._x=(S-b)*L,this._y=(h-x)*L,this._z=(g-l)*L}else if(s>_&&s>A){const L=2*Math.sqrt(1+s-_-A);this._w=(S-b)/L,this._x=.25*L,this._y=(l+g)/L,this._z=(h+x)/L}else if(_>A){const L=2*Math.sqrt(1+_-s-A);this._w=(h-x)/L,this._x=(l+g)/L,this._y=.25*L,this._z=(b+S)/L}else{const L=2*Math.sqrt(1+A-s-_);this._w=(g-l)/L,this._x=(h+x)/L,this._y=(b+S)/L,this._z=.25*L}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let s=e.dot(t)+1;return s<Number.EPSILON?(s=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=s):(this._x=0,this._y=-e.z,this._z=e.y,this._w=s)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=s),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Zi(this.dot(e),-1,1)))}rotateTowards(e,t){const s=this.angleTo(e);if(0===s)return this;const l=Math.min(1,t/s);return this.slerp(e,l),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const s=e._x,l=e._y,h=e._z,g=e._w,_=t._x,b=t._y,x=t._z,S=t._w;return this._x=s*S+g*_+l*x-h*b,this._y=l*S+g*b+h*_-s*x,this._z=h*S+g*x+s*b-l*_,this._w=g*S-s*_-l*b-h*x,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const s=this._x,l=this._y,h=this._z,g=this._w;let _=g*e._w+s*e._x+l*e._y+h*e._z;if(_<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,_=-_):this.copy(e),_>=1)return this._w=g,this._x=s,this._y=l,this._z=h,this;const b=1-_*_;if(b<=Number.EPSILON){const L=1-t;return this._w=L*g+t*this._w,this._x=L*s+t*this._x,this._y=L*l+t*this._y,this._z=L*h+t*this._z,this.normalize(),this._onChangeCallback(),this}const x=Math.sqrt(b),S=Math.atan2(x,_),A=Math.sin((1-t)*S)/x,E=Math.sin(t*S)/x;return this._w=g*A+this._w*E,this._x=s*A+this._x*E,this._y=l*A+this._y*E,this._z=h*A+this._z*E,this._onChangeCallback(),this}slerpQuaternions(e,t,s){return this.copy(e).slerp(t,s)}random(){const e=Math.random(),t=Math.sqrt(1-e),s=Math.sqrt(e),l=2*Math.PI*Math.random(),h=2*Math.PI*Math.random();return this.set(t*Math.cos(l),s*Math.sin(h),s*Math.cos(h),t*Math.sin(l))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class le{constructor(e=0,t=0,s=0){le.prototype.isVector3=!0,this.x=e,this.y=t,this.z=s}set(e,t,s){return void 0===s&&(s=this.z),this.x=e,this.y=t,this.z=s,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(Za.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(Za.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,s=this.y,l=this.z,h=e.elements;return this.x=h[0]*t+h[3]*s+h[6]*l,this.y=h[1]*t+h[4]*s+h[7]*l,this.z=h[2]*t+h[5]*s+h[8]*l,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,s=this.y,l=this.z,h=e.elements,g=1/(h[3]*t+h[7]*s+h[11]*l+h[15]);return this.x=(h[0]*t+h[4]*s+h[8]*l+h[12])*g,this.y=(h[1]*t+h[5]*s+h[9]*l+h[13])*g,this.z=(h[2]*t+h[6]*s+h[10]*l+h[14])*g,this}applyQuaternion(e){const t=this.x,s=this.y,l=this.z,h=e.x,g=e.y,_=e.z,b=e.w,x=b*t+g*l-_*s,S=b*s+_*t-h*l,A=b*l+h*s-g*t,E=-h*t-g*s-_*l;return this.x=x*b+E*-h+S*-_-A*-g,this.y=S*b+E*-g+A*-h-x*-_,this.z=A*b+E*-_+x*-g-S*-h,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,s=this.y,l=this.z,h=e.elements;return this.x=h[0]*t+h[4]*s+h[8]*l,this.y=h[1]*t+h[5]*s+h[9]*l,this.z=h[2]*t+h[6]*s+h[10]*l,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const s=this.length();return this.divideScalar(s||1).multiplyScalar(Math.max(e,Math.min(t,s)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,s){return this.x=e.x+(t.x-e.x)*s,this.y=e.y+(t.y-e.y)*s,this.z=e.z+(t.z-e.z)*s,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const s=e.x,l=e.y,h=e.z,g=t.x,_=t.y,b=t.z;return this.x=l*b-h*_,this.y=h*g-s*b,this.z=s*_-l*g,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const s=e.dot(this)/t;return this.copy(e).multiplyScalar(s)}projectOnPlane(e){return Ja.copy(this).projectOnVector(e),this.sub(Ja)}reflect(e){return this.sub(Ja.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const s=this.dot(e)/t;return Math.acos(Zi(s,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,s=this.y-e.y,l=this.z-e.z;return t*t+s*s+l*l}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,s){const l=Math.sin(t)*e;return this.x=l*Math.sin(s),this.y=Math.cos(t)*e,this.z=l*Math.cos(s),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,s){return this.x=e*Math.sin(t),this.y=s,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),s=this.setFromMatrixColumn(e,1).length(),l=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=s,this.z=l,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,s=Math.sqrt(1-e**2);return this.x=s*Math.cos(t),this.y=s*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Ja=new le,Za=new js;class Ks{constructor(e=new le(1/0,1/0,1/0),t=new le(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,s=1/0,l=1/0,h=-1/0,g=-1/0,_=-1/0;for(let b=0,x=e.length;b<x;b+=3){const S=e[b],A=e[b+1],E=e[b+2];S<t&&(t=S),A<s&&(s=A),E<l&&(l=E),S>h&&(h=S),A>g&&(g=A),E>_&&(_=E)}return this.min.set(t,s,l),this.max.set(h,g,_),this}setFromBufferAttribute(e){let t=1/0,s=1/0,l=1/0,h=-1/0,g=-1/0,_=-1/0;for(let b=0,x=e.count;b<x;b++){const S=e.getX(b),A=e.getY(b),E=e.getZ(b);S<t&&(t=S),A<s&&(s=A),E<l&&(l=E),S>h&&(h=S),A>g&&(g=A),E>_&&(_=E)}return this.min.set(t,s,l),this.max.set(h,g,_),this}setFromPoints(e){this.makeEmpty();for(let t=0,s=e.length;t<s;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const s=uo.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(s),this.max.copy(e).add(s),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const s=e.geometry;if(void 0!==s)if(t&&null!=s.attributes&&void 0!==s.attributes.position){const h=s.attributes.position;for(let g=0,_=h.count;g<_;g++)uo.fromBufferAttribute(h,g).applyMatrix4(e.matrixWorld),this.expandByPoint(uo)}else null===s.boundingBox&&s.computeBoundingBox(),wo.copy(s.boundingBox),wo.applyMatrix4(e.matrixWorld),this.union(wo);const l=e.children;for(let h=0,g=l.length;h<g;h++)this.expandByObject(l[h],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,uo),uo.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,s;return e.normal.x>0?(t=e.normal.x*this.min.x,s=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,s=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,s+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,s+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,s+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,s+=e.normal.z*this.min.z),t<=-e.constant&&s>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(qa),Lr.subVectors(this.max,qa),Wo.subVectors(e.a,qa),ca.subVectors(e.b,qa),ua.subVectors(e.c,qa),ho.subVectors(ca,Wo),Ro.subVectors(ua,ca),da.subVectors(Wo,ua);let t=[0,-ho.z,ho.y,0,-Ro.z,Ro.y,0,-da.z,da.y,ho.z,0,-ho.x,Ro.z,0,-Ro.x,da.z,0,-da.x,-ho.y,ho.x,0,-Ro.y,Ro.x,0,-da.y,da.x,0];return!(!Ca(t,Wo,ca,ua,Lr)||(t=[1,0,0,0,1,0,0,0,1],!Ca(t,Wo,ca,ua,Lr)))&&($o.crossVectors(ho,Ro),t=[$o.x,$o.y,$o.z],Ca(t,Wo,ca,ua,Lr))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return uo.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=.5*this.getSize(uo).length(),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(Xs[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Xs[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Xs[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Xs[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Xs[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Xs[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Xs[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Xs[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Xs)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Xs=[new le,new le,new le,new le,new le,new le,new le,new le],uo=new le,wo=new Ks,Wo=new le,ca=new le,ua=new le,ho=new le,Ro=new le,da=new le,qa=new le,Lr=new le,$o=new le,zi=new le;function Ca(v,e,t,s,l){for(let h=0,g=v.length-3;h<=g;h+=3){zi.fromArray(v,h);const _=l.x*Math.abs(zi.x)+l.y*Math.abs(zi.y)+l.z*Math.abs(zi.z),b=e.dot(zi),x=t.dot(zi),S=s.dot(zi);if(Math.max(-Math.max(b,x,S),Math.min(b,x,S))>_)return!1}return!0}const bc=new Ks,Ka=new le,tu=new le;class O{constructor(e=new le,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const s=this.center;void 0!==t?s.copy(t):bc.setFromPoints(e).getCenter(s);let l=0;for(let h=0,g=e.length;h<g;h++)l=Math.max(l,s.distanceToSquared(e[h]));return this.radius=Math.sqrt(l),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const s=this.center.distanceToSquared(e);return t.copy(e),s>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Ka.subVectors(e,this.center);const t=Ka.lengthSq();if(t>this.radius*this.radius){const s=Math.sqrt(t),l=.5*(s-this.radius);this.center.addScaledVector(Ka,l/s),this.radius+=l}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(tu.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Ka.copy(e.center).add(tu)),this.expandByPoint(Ka.copy(e.center).sub(tu))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const W=new le,B=new le,Q=new le,ue=new le,Be=new le,st=new le,un=new le;class li{constructor(e=new le,t=new le(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,W)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const s=t.dot(this.direction);return s<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(s).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=W.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(W.copy(this.direction).multiplyScalar(t).add(this.origin),W.distanceToSquared(e))}distanceSqToSegment(e,t,s,l){B.copy(e).add(t).multiplyScalar(.5),Q.copy(t).sub(e).normalize(),ue.copy(this.origin).sub(B);const h=.5*e.distanceTo(t),g=-this.direction.dot(Q),_=ue.dot(this.direction),b=-ue.dot(Q),x=ue.lengthSq(),S=Math.abs(1-g*g);let A,E,L,G;if(S>0)if(A=g*b-_,E=g*_-b,G=h*S,A>=0)if(E>=-G)if(E<=G){const j=1/S;A*=j,E*=j,L=A*(A+g*E+2*_)+E*(g*A+E+2*b)+x}else E=h,A=Math.max(0,-(g*E+_)),L=-A*A+E*(E+2*b)+x;else E=-h,A=Math.max(0,-(g*E+_)),L=-A*A+E*(E+2*b)+x;else E<=-G?(A=Math.max(0,-(-g*h+_)),E=A>0?-h:Math.min(Math.max(-h,-b),h),L=-A*A+E*(E+2*b)+x):E<=G?(A=0,E=Math.min(Math.max(-h,-b),h),L=E*(E+2*b)+x):(A=Math.max(0,-(g*h+_)),E=A>0?h:Math.min(Math.max(-h,-b),h),L=-A*A+E*(E+2*b)+x);else E=g>0?-h:h,A=Math.max(0,-(g*E+_)),L=-A*A+E*(E+2*b)+x;return s&&s.copy(this.direction).multiplyScalar(A).add(this.origin),l&&l.copy(Q).multiplyScalar(E).add(B),L}intersectSphere(e,t){W.subVectors(e.center,this.origin);const s=W.dot(this.direction),l=W.dot(W)-s*s,h=e.radius*e.radius;if(l>h)return null;const g=Math.sqrt(h-l),_=s-g,b=s+g;return _<0&&b<0?null:this.at(_<0?b:_,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const s=-(this.origin.dot(e.normal)+e.constant)/t;return s>=0?s:null}intersectPlane(e,t){const s=this.distanceToPlane(e);return null===s?null:this.at(s,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let s,l,h,g,_,b;const x=1/this.direction.x,S=1/this.direction.y,A=1/this.direction.z,E=this.origin;return x>=0?(s=(e.min.x-E.x)*x,l=(e.max.x-E.x)*x):(s=(e.max.x-E.x)*x,l=(e.min.x-E.x)*x),S>=0?(h=(e.min.y-E.y)*S,g=(e.max.y-E.y)*S):(h=(e.max.y-E.y)*S,g=(e.min.y-E.y)*S),s>g||h>l||((h>s||isNaN(s))&&(s=h),(g<l||isNaN(l))&&(l=g),A>=0?(_=(e.min.z-E.z)*A,b=(e.max.z-E.z)*A):(_=(e.max.z-E.z)*A,b=(e.min.z-E.z)*A),s>b||_>l)||((_>s||s!=s)&&(s=_),(b<l||l!=l)&&(l=b),l<0)?null:this.at(s>=0?s:l,t)}intersectsBox(e){return null!==this.intersectBox(e,W)}intersectTriangle(e,t,s,l,h){Be.subVectors(t,e),st.subVectors(s,e),un.crossVectors(Be,st);let _,g=this.direction.dot(un);if(g>0){if(l)return null;_=1}else{if(!(g<0))return null;_=-1,g=-g}ue.subVectors(this.origin,e);const b=_*this.direction.dot(st.crossVectors(ue,st));if(b<0)return null;const x=_*this.direction.dot(Be.cross(ue));if(x<0||b+x>g)return null;const S=-_*ue.dot(un);return S<0?null:this.at(S/g,h)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Vt{constructor(){Vt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,s,l,h,g,_,b,x,S,A,E,L,G,j,k){const J=this.elements;return J[0]=e,J[4]=t,J[8]=s,J[12]=l,J[1]=h,J[5]=g,J[9]=_,J[13]=b,J[2]=x,J[6]=S,J[10]=A,J[14]=E,J[3]=L,J[7]=G,J[11]=j,J[15]=k,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Vt).fromArray(this.elements)}copy(e){const t=this.elements,s=e.elements;return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t[9]=s[9],t[10]=s[10],t[11]=s[11],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],this}copyPosition(e){const t=this.elements,s=e.elements;return t[12]=s[12],t[13]=s[13],t[14]=s[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,s){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),s.setFromMatrixColumn(this,2),this}makeBasis(e,t,s){return this.set(e.x,t.x,s.x,0,e.y,t.y,s.y,0,e.z,t.z,s.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,s=e.elements,l=1/Vn.setFromMatrixColumn(e,0).length(),h=1/Vn.setFromMatrixColumn(e,1).length(),g=1/Vn.setFromMatrixColumn(e,2).length();return t[0]=s[0]*l,t[1]=s[1]*l,t[2]=s[2]*l,t[3]=0,t[4]=s[4]*h,t[5]=s[5]*h,t[6]=s[6]*h,t[7]=0,t[8]=s[8]*g,t[9]=s[9]*g,t[10]=s[10]*g,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,s=e.x,l=e.y,h=e.z,g=Math.cos(s),_=Math.sin(s),b=Math.cos(l),x=Math.sin(l),S=Math.cos(h),A=Math.sin(h);if("XYZ"===e.order){const E=g*S,L=g*A,G=_*S,j=_*A;t[0]=b*S,t[4]=-b*A,t[8]=x,t[1]=L+G*x,t[5]=E-j*x,t[9]=-_*b,t[2]=j-E*x,t[6]=G+L*x,t[10]=g*b}else if("YXZ"===e.order){const E=b*S,L=b*A,G=x*S,j=x*A;t[0]=E+j*_,t[4]=G*_-L,t[8]=g*x,t[1]=g*A,t[5]=g*S,t[9]=-_,t[2]=L*_-G,t[6]=j+E*_,t[10]=g*b}else if("ZXY"===e.order){const E=b*S,L=b*A,G=x*S,j=x*A;t[0]=E-j*_,t[4]=-g*A,t[8]=G+L*_,t[1]=L+G*_,t[5]=g*S,t[9]=j-E*_,t[2]=-g*x,t[6]=_,t[10]=g*b}else if("ZYX"===e.order){const E=g*S,L=g*A,G=_*S,j=_*A;t[0]=b*S,t[4]=G*x-L,t[8]=E*x+j,t[1]=b*A,t[5]=j*x+E,t[9]=L*x-G,t[2]=-x,t[6]=_*b,t[10]=g*b}else if("YZX"===e.order){const E=g*b,L=g*x,G=_*b,j=_*x;t[0]=b*S,t[4]=j-E*A,t[8]=G*A+L,t[1]=A,t[5]=g*S,t[9]=-_*S,t[2]=-x*S,t[6]=L*A+G,t[10]=E-j*A}else if("XZY"===e.order){const E=g*b,L=g*x,G=_*b,j=_*x;t[0]=b*S,t[4]=-A,t[8]=x*S,t[1]=E*A+j,t[5]=g*S,t[9]=L*A-G,t[2]=G*A-L,t[6]=_*S,t[10]=j*A+E}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(fr,e,ci)}lookAt(e,t,s){const l=this.elements;return C.subVectors(e,t),0===C.lengthSq()&&(C.z=1),C.normalize(),di.crossVectors(s,C),0===di.lengthSq()&&(1===Math.abs(s.z)?C.x+=1e-4:C.z+=1e-4,C.normalize(),di.crossVectors(s,C)),di.normalize(),V.crossVectors(C,di),l[0]=di.x,l[4]=V.x,l[8]=C.x,l[1]=di.y,l[5]=V.y,l[9]=C.y,l[2]=di.z,l[6]=V.z,l[10]=C.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const s=e.elements,l=t.elements,h=this.elements,g=s[0],_=s[4],b=s[8],x=s[12],S=s[1],A=s[5],E=s[9],L=s[13],G=s[2],j=s[6],k=s[10],J=s[14],K=s[3],$=s[7],q=s[11],se=s[15],de=l[0],ge=l[4],X=l[8],fe=l[12],Te=l[1],Ye=l[5],yt=l[9],He=l[13],Ae=l[2],ct=l[6],Mt=l[10],Lt=l[14],vt=l[3],jt=l[7],Rt=l[11],ot=l[15];return h[0]=g*de+_*Te+b*Ae+x*vt,h[4]=g*ge+_*Ye+b*ct+x*jt,h[8]=g*X+_*yt+b*Mt+x*Rt,h[12]=g*fe+_*He+b*Lt+x*ot,h[1]=S*de+A*Te+E*Ae+L*vt,h[5]=S*ge+A*Ye+E*ct+L*jt,h[9]=S*X+A*yt+E*Mt+L*Rt,h[13]=S*fe+A*He+E*Lt+L*ot,h[2]=G*de+j*Te+k*Ae+J*vt,h[6]=G*ge+j*Ye+k*ct+J*jt,h[10]=G*X+j*yt+k*Mt+J*Rt,h[14]=G*fe+j*He+k*Lt+J*ot,h[3]=K*de+$*Te+q*Ae+se*vt,h[7]=K*ge+$*Ye+q*ct+se*jt,h[11]=K*X+$*yt+q*Mt+se*Rt,h[15]=K*fe+$*He+q*Lt+se*ot,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],s=e[4],l=e[8],h=e[12],g=e[1],_=e[5],b=e[9],x=e[13],S=e[2],A=e[6],E=e[10],L=e[14];return e[3]*(+h*b*A-l*x*A-h*_*E+s*x*E+l*_*L-s*b*L)+e[7]*(+t*b*L-t*x*E+h*g*E-l*g*L+l*x*S-h*b*S)+e[11]*(+t*x*A-t*_*L-h*g*A+s*g*L+h*_*S-s*x*S)+e[15]*(-l*_*S-t*b*A+t*_*E+l*g*A-s*g*E+s*b*S)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,s){const l=this.elements;return e.isVector3?(l[12]=e.x,l[13]=e.y,l[14]=e.z):(l[12]=e,l[13]=t,l[14]=s),this}invert(){const e=this.elements,t=e[0],s=e[1],l=e[2],h=e[3],g=e[4],_=e[5],b=e[6],x=e[7],S=e[8],A=e[9],E=e[10],L=e[11],G=e[12],j=e[13],k=e[14],J=e[15],K=A*k*x-j*E*x+j*b*L-_*k*L-A*b*J+_*E*J,$=G*E*x-S*k*x-G*b*L+g*k*L+S*b*J-g*E*J,q=S*j*x-G*A*x+G*_*L-g*j*L-S*_*J+g*A*J,se=G*A*b-S*j*b-G*_*E+g*j*E+S*_*k-g*A*k,de=t*K+s*$+l*q+h*se;if(0===de)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const ge=1/de;return e[0]=K*ge,e[1]=(j*E*h-A*k*h-j*l*L+s*k*L+A*l*J-s*E*J)*ge,e[2]=(_*k*h-j*b*h+j*l*x-s*k*x-_*l*J+s*b*J)*ge,e[3]=(A*b*h-_*E*h-A*l*x+s*E*x+_*l*L-s*b*L)*ge,e[4]=$*ge,e[5]=(S*k*h-G*E*h+G*l*L-t*k*L-S*l*J+t*E*J)*ge,e[6]=(G*b*h-g*k*h-G*l*x+t*k*x+g*l*J-t*b*J)*ge,e[7]=(g*E*h-S*b*h+S*l*x-t*E*x-g*l*L+t*b*L)*ge,e[8]=q*ge,e[9]=(G*A*h-S*j*h-G*s*L+t*j*L+S*s*J-t*A*J)*ge,e[10]=(g*j*h-G*_*h+G*s*x-t*j*x-g*s*J+t*_*J)*ge,e[11]=(S*_*h-g*A*h-S*s*x+t*A*x+g*s*L-t*_*L)*ge,e[12]=se*ge,e[13]=(S*j*l-G*A*l+G*s*E-t*j*E-S*s*k+t*A*k)*ge,e[14]=(G*_*l-g*j*l-G*s*b+t*j*b+g*s*k-t*_*k)*ge,e[15]=(g*A*l-S*_*l+S*s*b-t*A*b-g*s*E+t*_*E)*ge,this}scale(e){const t=this.elements,s=e.x,l=e.y,h=e.z;return t[0]*=s,t[4]*=l,t[8]*=h,t[1]*=s,t[5]*=l,t[9]*=h,t[2]*=s,t[6]*=l,t[10]*=h,t[3]*=s,t[7]*=l,t[11]*=h,this}getMaxScaleOnAxis(){const e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))}makeTranslation(e,t,s){return this.set(1,0,0,e,0,1,0,t,0,0,1,s,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),s=Math.sin(e);return this.set(1,0,0,0,0,t,-s,0,0,s,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),s=Math.sin(e);return this.set(t,0,s,0,0,1,0,0,-s,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),s=Math.sin(e);return this.set(t,-s,0,0,s,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const s=Math.cos(t),l=Math.sin(t),h=1-s,g=e.x,_=e.y,b=e.z,x=h*g,S=h*_;return this.set(x*g+s,x*_-l*b,x*b+l*_,0,x*_+l*b,S*_+s,S*b-l*g,0,x*b-l*_,S*b+l*g,h*b*b+s,0,0,0,0,1),this}makeScale(e,t,s){return this.set(e,0,0,0,0,t,0,0,0,0,s,0,0,0,0,1),this}makeShear(e,t,s,l,h,g){return this.set(1,s,h,0,e,1,g,0,t,l,1,0,0,0,0,1),this}compose(e,t,s){const l=this.elements,h=t._x,g=t._y,_=t._z,b=t._w,x=h+h,S=g+g,A=_+_,E=h*x,L=h*S,G=h*A,j=g*S,k=g*A,J=_*A,K=b*x,$=b*S,q=b*A,se=s.x,de=s.y,ge=s.z;return l[0]=(1-(j+J))*se,l[1]=(L+q)*se,l[2]=(G-$)*se,l[3]=0,l[4]=(L-q)*de,l[5]=(1-(E+J))*de,l[6]=(k+K)*de,l[7]=0,l[8]=(G+$)*ge,l[9]=(k-K)*ge,l[10]=(1-(E+j))*ge,l[11]=0,l[12]=e.x,l[13]=e.y,l[14]=e.z,l[15]=1,this}decompose(e,t,s){const l=this.elements;let h=Vn.set(l[0],l[1],l[2]).length();const g=Vn.set(l[4],l[5],l[6]).length(),_=Vn.set(l[8],l[9],l[10]).length();this.determinant()<0&&(h=-h),e.x=l[12],e.y=l[13],e.z=l[14],Ln.copy(this);const x=1/h,S=1/g,A=1/_;return Ln.elements[0]*=x,Ln.elements[1]*=x,Ln.elements[2]*=x,Ln.elements[4]*=S,Ln.elements[5]*=S,Ln.elements[6]*=S,Ln.elements[8]*=A,Ln.elements[9]*=A,Ln.elements[10]*=A,t.setFromRotationMatrix(Ln),s.x=h,s.y=g,s.z=_,this}makePerspective(e,t,s,l,h,g){const _=this.elements,x=2*h/(s-l),S=(t+e)/(t-e),A=(s+l)/(s-l),E=-(g+h)/(g-h),L=-2*g*h/(g-h);return _[0]=2*h/(t-e),_[4]=0,_[8]=S,_[12]=0,_[1]=0,_[5]=x,_[9]=A,_[13]=0,_[2]=0,_[6]=0,_[10]=E,_[14]=L,_[3]=0,_[7]=0,_[11]=-1,_[15]=0,this}makeOrthographic(e,t,s,l,h,g){const _=this.elements,b=1/(t-e),x=1/(s-l),S=1/(g-h),A=(t+e)*b,E=(s+l)*x,L=(g+h)*S;return _[0]=2*b,_[4]=0,_[8]=0,_[12]=-A,_[1]=0,_[5]=2*x,_[9]=0,_[13]=-E,_[2]=0,_[6]=0,_[10]=-2*S,_[14]=-L,_[3]=0,_[7]=0,_[11]=0,_[15]=1,this}equals(e){const t=this.elements,s=e.elements;for(let l=0;l<16;l++)if(t[l]!==s[l])return!1;return!0}fromArray(e,t=0){for(let s=0;s<16;s++)this.elements[s]=e[s+t];return this}toArray(e=[],t=0){const s=this.elements;return e[t]=s[0],e[t+1]=s[1],e[t+2]=s[2],e[t+3]=s[3],e[t+4]=s[4],e[t+5]=s[5],e[t+6]=s[6],e[t+7]=s[7],e[t+8]=s[8],e[t+9]=s[9],e[t+10]=s[10],e[t+11]=s[11],e[t+12]=s[12],e[t+13]=s[13],e[t+14]=s[14],e[t+15]=s[15],e}}const Vn=new le,Ln=new Vt,fr=new le(0,0,0),ci=new le(1,1,1),di=new le,V=new le,C=new le,u=new Vt,H=new js;let $e=(()=>{class v{constructor(t=0,s=0,l=0,h=v.DefaultOrder){this.isEuler=!0,this._x=t,this._y=s,this._z=l,this._order=h}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,s,l,h=this._order){return this._x=t,this._y=s,this._z=l,this._order=h,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,s=this._order,l=!0){const h=t.elements,g=h[0],_=h[4],b=h[8],x=h[1],S=h[5],A=h[9],E=h[2],L=h[6],G=h[10];switch(s){case"XYZ":this._y=Math.asin(Zi(b,-1,1)),Math.abs(b)<.9999999?(this._x=Math.atan2(-A,G),this._z=Math.atan2(-_,g)):(this._x=Math.atan2(L,S),this._z=0);break;case"YXZ":this._x=Math.asin(-Zi(A,-1,1)),Math.abs(A)<.9999999?(this._y=Math.atan2(b,G),this._z=Math.atan2(x,S)):(this._y=Math.atan2(-E,g),this._z=0);break;case"ZXY":this._x=Math.asin(Zi(L,-1,1)),Math.abs(L)<.9999999?(this._y=Math.atan2(-E,G),this._z=Math.atan2(-_,S)):(this._y=0,this._z=Math.atan2(x,g));break;case"ZYX":this._y=Math.asin(-Zi(E,-1,1)),Math.abs(E)<.9999999?(this._x=Math.atan2(L,G),this._z=Math.atan2(x,g)):(this._x=0,this._z=Math.atan2(-_,S));break;case"YZX":this._z=Math.asin(Zi(x,-1,1)),Math.abs(x)<.9999999?(this._x=Math.atan2(-A,S),this._y=Math.atan2(-E,g)):(this._x=0,this._y=Math.atan2(b,G));break;case"XZY":this._z=Math.asin(-Zi(_,-1,1)),Math.abs(_)<.9999999?(this._x=Math.atan2(L,S),this._y=Math.atan2(b,g)):(this._x=Math.atan2(-A,G),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+s)}return this._order=s,!0===l&&this._onChangeCallback(),this}setFromQuaternion(t,s,l){return u.makeRotationFromQuaternion(t),this.setFromRotationMatrix(u,s,l)}setFromVector3(t,s=this._order){return this.set(t.x,t.y,t.z,s)}reorder(t){return H.setFromEuler(this),this.setFromQuaternion(H,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],s=0){return t[s]=this._x,t[s+1]=this._y,t[s+2]=this._z,t[s+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}return v.DefaultOrder="XYZ",v.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],v})();class Yt{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}isEnabled(e){return 0!=(this.mask&(1<<e|0))}}let Dn=0;const _r=new le,tr=new js,Sr=new Vt,qi=new le,pr=new le,So=new le,Co=new js,Eo=new le(1,0,0),Yo=new le(0,1,0),mr=new le(0,0,1),Ea={type:"added"},Qs={type:"removed"};let _s=(()=>{class v extends Uo{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Dn++}),this.uuid=ws(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=v.DefaultUp.clone();const t=new le,s=new $e,l=new js,h=new le(1,1,1);s._onChange(function g(){l.setFromEuler(s,!1)}),l._onChange(function _(){s.setFromQuaternion(l,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:s},quaternion:{configurable:!0,enumerable:!0,value:l},scale:{configurable:!0,enumerable:!0,value:h},modelViewMatrix:{value:new Vt},normalMatrix:{value:new _n}}),this.matrix=new Vt,this.matrixWorld=new Vt,this.matrixAutoUpdate=v.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=v.DefaultMatrixWorldAutoUpdate,this.layers=new Yt,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,s){this.quaternion.setFromAxisAngle(t,s)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,s){return tr.setFromAxisAngle(t,s),this.quaternion.multiply(tr),this}rotateOnWorldAxis(t,s){return tr.setFromAxisAngle(t,s),this.quaternion.premultiply(tr),this}rotateX(t){return this.rotateOnAxis(Eo,t)}rotateY(t){return this.rotateOnAxis(Yo,t)}rotateZ(t){return this.rotateOnAxis(mr,t)}translateOnAxis(t,s){return _r.copy(t).applyQuaternion(this.quaternion),this.position.add(_r.multiplyScalar(s)),this}translateX(t){return this.translateOnAxis(Eo,t)}translateY(t){return this.translateOnAxis(Yo,t)}translateZ(t){return this.translateOnAxis(mr,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(Sr.copy(this.matrixWorld).invert())}lookAt(t,s,l){t.isVector3?qi.copy(t):qi.set(t,s,l);const h=this.parent;this.updateWorldMatrix(!0,!1),pr.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Sr.lookAt(pr,qi,this.up):Sr.lookAt(qi,pr,this.up),this.quaternion.setFromRotationMatrix(Sr),h&&(Sr.extractRotation(h.matrixWorld),tr.setFromRotationMatrix(Sr),this.quaternion.premultiply(tr.invert()))}add(t){if(arguments.length>1){for(let s=0;s<arguments.length;s++)this.add(arguments[s]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(Ea)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let l=0;l<arguments.length;l++)this.remove(arguments[l]);return this}const s=this.children.indexOf(t);return-1!==s&&(t.parent=null,this.children.splice(s,1),t.dispatchEvent(Qs)),this}removeFromParent(){const t=this.parent;return null!==t&&t.remove(this),this}clear(){for(let t=0;t<this.children.length;t++){const s=this.children[t];s.parent=null,s.dispatchEvent(Qs)}return this.children.length=0,this}attach(t){return this.updateWorldMatrix(!0,!1),Sr.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),Sr.multiply(t.parent.matrixWorld)),t.applyMatrix4(Sr),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,s){if(this[t]===s)return this;for(let l=0,h=this.children.length;l<h;l++){const _=this.children[l].getObjectByProperty(t,s);if(void 0!==_)return _}}getObjectsByProperty(t,s){let l=[];this[t]===s&&l.push(this);for(let h=0,g=this.children.length;h<g;h++){const _=this.children[h].getObjectsByProperty(t,s);_.length>0&&(l=l.concat(_))}return l}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(pr,t,So),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(pr,Co,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const s=this.matrixWorld.elements;return t.set(s[8],s[9],s[10]).normalize()}raycast(){}traverse(t){t(this);const s=this.children;for(let l=0,h=s.length;l<h;l++)s[l].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);const s=this.children;for(let l=0,h=s.length;l<h;l++)s[l].traverseVisible(t)}traverseAncestors(t){const s=this.parent;null!==s&&(t(s),s.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const s=this.children;for(let l=0,h=s.length;l<h;l++){const g=s[l];(!0===g.matrixWorldAutoUpdate||!0===t)&&g.updateMatrixWorld(t)}}updateWorldMatrix(t,s){const l=this.parent;if(!0===t&&null!==l&&!0===l.matrixWorldAutoUpdate&&l.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===s){const h=this.children;for(let g=0,_=h.length;g<_;g++){const b=h[g];!0===b.matrixWorldAutoUpdate&&b.updateWorldMatrix(!1,!0)}}}toJSON(t){const s=void 0===t||"string"==typeof t,l={};s&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},l.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const h={};function g(b,x){return void 0===b[x.uuid]&&(b[x.uuid]=x.toJSON(t)),x.uuid}if(h.uuid=this.uuid,h.type=this.type,""!==this.name&&(h.name=this.name),!0===this.castShadow&&(h.castShadow=!0),!0===this.receiveShadow&&(h.receiveShadow=!0),!1===this.visible&&(h.visible=!1),!1===this.frustumCulled&&(h.frustumCulled=!1),0!==this.renderOrder&&(h.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(h.userData=this.userData),h.layers=this.layers.mask,h.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(h.matrixAutoUpdate=!1),this.isInstancedMesh&&(h.type="InstancedMesh",h.count=this.count,h.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(h.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?h.background=this.background.toJSON():this.background.isTexture&&(h.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(h.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){h.geometry=g(t.geometries,this.geometry);const b=this.geometry.parameters;if(void 0!==b&&void 0!==b.shapes){const x=b.shapes;if(Array.isArray(x))for(let S=0,A=x.length;S<A;S++)g(t.shapes,x[S]);else g(t.shapes,x)}}if(this.isSkinnedMesh&&(h.bindMode=this.bindMode,h.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(g(t.skeletons,this.skeleton),h.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const b=[];for(let x=0,S=this.material.length;x<S;x++)b.push(g(t.materials,this.material[x]));h.material=b}else h.material=g(t.materials,this.material);if(this.children.length>0){h.children=[];for(let b=0;b<this.children.length;b++)h.children.push(this.children[b].toJSON(t).object)}if(this.animations.length>0){h.animations=[];for(let b=0;b<this.animations.length;b++)h.animations.push(g(t.animations,this.animations[b]))}if(s){const b=_(t.geometries),x=_(t.materials),S=_(t.textures),A=_(t.images),E=_(t.shapes),L=_(t.skeletons),G=_(t.animations),j=_(t.nodes);b.length>0&&(l.geometries=b),x.length>0&&(l.materials=x),S.length>0&&(l.textures=S),A.length>0&&(l.images=A),E.length>0&&(l.shapes=E),L.length>0&&(l.skeletons=L),G.length>0&&(l.animations=G),j.length>0&&(l.nodes=j)}return l.object=h,l;function _(b){const x=[];for(const S in b){const A=b[S];delete A.metadata,x.push(A)}return x}}clone(t){return(new this.constructor).copy(this,t)}copy(t,s=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===s)for(let l=0;l<t.children.length;l++)this.add(t.children[l].clone());return this}}return v.DefaultUp=new le(0,1,0),v.DefaultMatrixAutoUpdate=!0,v.DefaultMatrixWorldAutoUpdate=!0,v})();const ks=new le,Jo=new le,Ki=new le,vs=new le,Br=new le,Xa=new le,ha=new le,Zo=new le,Ql=new le,Qa=new le;class fo{constructor(e=new le,t=new le,s=new le){this.a=e,this.b=t,this.c=s}static getNormal(e,t,s,l){l.subVectors(s,t),ks.subVectors(e,t),l.cross(ks);const h=l.lengthSq();return h>0?l.multiplyScalar(1/Math.sqrt(h)):l.set(0,0,0)}static getBarycoord(e,t,s,l,h){ks.subVectors(l,t),Jo.subVectors(s,t),Ki.subVectors(e,t);const g=ks.dot(ks),_=ks.dot(Jo),b=ks.dot(Ki),x=Jo.dot(Jo),S=Jo.dot(Ki),A=g*x-_*_;if(0===A)return h.set(-2,-1,-1);const E=1/A,L=(x*b-_*S)*E,G=(g*S-_*b)*E;return h.set(1-L-G,G,L)}static containsPoint(e,t,s,l){return this.getBarycoord(e,t,s,l,vs),vs.x>=0&&vs.y>=0&&vs.x+vs.y<=1}static getUV(e,t,s,l,h,g,_,b){return this.getBarycoord(e,t,s,l,vs),b.set(0,0),b.addScaledVector(h,vs.x),b.addScaledVector(g,vs.y),b.addScaledVector(_,vs.z),b}static isFrontFacing(e,t,s,l){return ks.subVectors(s,t),Jo.subVectors(e,t),ks.cross(Jo).dot(l)<0}set(e,t,s){return this.a.copy(e),this.b.copy(t),this.c.copy(s),this}setFromPointsAndIndices(e,t,s,l){return this.a.copy(e[t]),this.b.copy(e[s]),this.c.copy(e[l]),this}setFromAttributeAndIndices(e,t,s,l){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,s),this.c.fromBufferAttribute(e,l),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return ks.subVectors(this.c,this.b),Jo.subVectors(this.a,this.b),.5*ks.cross(Jo).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return fo.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return fo.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,s,l,h){return fo.getUV(e,this.a,this.b,this.c,t,s,l,h)}containsPoint(e){return fo.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return fo.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const s=this.a,l=this.b,h=this.c;let g,_;Br.subVectors(l,s),Xa.subVectors(h,s),Zo.subVectors(e,s);const b=Br.dot(Zo),x=Xa.dot(Zo);if(b<=0&&x<=0)return t.copy(s);Ql.subVectors(e,l);const S=Br.dot(Ql),A=Xa.dot(Ql);if(S>=0&&A<=S)return t.copy(l);const E=b*A-S*x;if(E<=0&&b>=0&&S<=0)return g=b/(b-S),t.copy(s).addScaledVector(Br,g);Qa.subVectors(e,h);const L=Br.dot(Qa),G=Xa.dot(Qa);if(G>=0&&L<=G)return t.copy(h);const j=L*x-b*G;if(j<=0&&x>=0&&G<=0)return _=x/(x-G),t.copy(s).addScaledVector(Xa,_);const k=S*G-L*A;if(k<=0&&A-S>=0&&L-G>=0)return ha.subVectors(h,l),_=(A-S)/(A-S+(L-G)),t.copy(l).addScaledVector(ha,_);const J=1/(k+j+E);return g=j*J,_=E*J,t.copy(s).addScaledVector(Br,g).addScaledVector(Xa,_)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let Rl=0;class jr extends Uo{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Rl++}),this.uuid=ws(),this.name="",this.type="Material",this.blending=It,this.side=Xt,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=Ce,this.blendDst=Ge,this.blendEquation=Me,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=In,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const s=e[t];if(void 0===s){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}const l=this[t];void 0!==l?l&&l.isColor?l.set(s):l&&l.isVector3&&s&&s.isVector3?l.copy(s):this[t]=s:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const s={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function l(h){const g=[];for(const _ in h){const b=h[_];delete b.metadata,g.push(b)}return g}if(s.uuid=this.uuid,s.type=this.type,""!==this.name&&(s.name=this.name),this.color&&this.color.isColor&&(s.color=this.color.getHex()),void 0!==this.roughness&&(s.roughness=this.roughness),void 0!==this.metalness&&(s.metalness=this.metalness),void 0!==this.sheen&&(s.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(s.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(s.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(s.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(s.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(s.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(s.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(s.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(s.shininess=this.shininess),void 0!==this.clearcoat&&(s.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(s.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(s.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(s.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(s.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,s.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(s.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(s.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(s.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(s.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(s.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(s.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(s.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(s.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(s.lightMap=this.lightMap.toJSON(e).uuid,s.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(s.aoMap=this.aoMap.toJSON(e).uuid,s.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(s.bumpMap=this.bumpMap.toJSON(e).uuid,s.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(s.normalMap=this.normalMap.toJSON(e).uuid,s.normalMapType=this.normalMapType,s.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(s.displacementMap=this.displacementMap.toJSON(e).uuid,s.displacementScale=this.displacementScale,s.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(s.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(s.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(s.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(s.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(s.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(s.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(s.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(s.combine=this.combine)),void 0!==this.envMapIntensity&&(s.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(s.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(s.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(s.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(s.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(s.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(s.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(s.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(s.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(s.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(s.size=this.size),null!==this.shadowSide&&(s.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(s.sizeAttenuation=this.sizeAttenuation),this.blending!==It&&(s.blending=this.blending),this.side!==Xt&&(s.side=this.side),this.vertexColors&&(s.vertexColors=!0),this.opacity<1&&(s.opacity=this.opacity),!0===this.transparent&&(s.transparent=this.transparent),s.depthFunc=this.depthFunc,s.depthTest=this.depthTest,s.depthWrite=this.depthWrite,s.colorWrite=this.colorWrite,s.stencilWrite=this.stencilWrite,s.stencilWriteMask=this.stencilWriteMask,s.stencilFunc=this.stencilFunc,s.stencilRef=this.stencilRef,s.stencilFuncMask=this.stencilFuncMask,s.stencilFail=this.stencilFail,s.stencilZFail=this.stencilZFail,s.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(s.rotation=this.rotation),!0===this.polygonOffset&&(s.polygonOffset=!0),0!==this.polygonOffsetFactor&&(s.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(s.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(s.linewidth=this.linewidth),void 0!==this.dashSize&&(s.dashSize=this.dashSize),void 0!==this.gapSize&&(s.gapSize=this.gapSize),void 0!==this.scale&&(s.scale=this.scale),!0===this.dithering&&(s.dithering=!0),this.alphaTest>0&&(s.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(s.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(s.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(s.wireframe=this.wireframe),this.wireframeLinewidth>1&&(s.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(s.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(s.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(s.flatShading=this.flatShading),!1===this.visible&&(s.visible=!1),!1===this.toneMapped&&(s.toneMapped=!1),!1===this.fog&&(s.fog=!1),Object.keys(this.userData).length>0&&(s.userData=this.userData),t){const h=l(e.textures),g=l(e.images);h.length>0&&(s.textures=h),g.length>0&&(s.images=g)}return s}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let s=null;if(null!==t){const l=t.length;s=new Array(l);for(let h=0;h!==l;++h)s[h]=t[h].clone()}return this.clippingPlanes=s,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}class Cr extends jr{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new $t(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Mn,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Tr=new le,fa=new ft;class ji{constructor(e,t,s=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=s,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,s){e*=this.itemSize,s*=t.itemSize;for(let l=0,h=this.itemSize;l<h;l++)this.array[e+l]=t.array[s+l];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,s=this.count;t<s;t++)fa.fromBufferAttribute(this,t),fa.applyMatrix3(e),this.setXY(t,fa.x,fa.y);else if(3===this.itemSize)for(let t=0,s=this.count;t<s;t++)Tr.fromBufferAttribute(this,t),Tr.applyMatrix3(e),this.setXYZ(t,Tr.x,Tr.y,Tr.z);return this}applyMatrix4(e){for(let t=0,s=this.count;t<s;t++)Tr.fromBufferAttribute(this,t),Tr.applyMatrix4(e),this.setXYZ(t,Tr.x,Tr.y,Tr.z);return this}applyNormalMatrix(e){for(let t=0,s=this.count;t<s;t++)Tr.fromBufferAttribute(this,t),Tr.applyNormalMatrix(e),this.setXYZ(t,Tr.x,Tr.y,Tr.z);return this}transformDirection(e){for(let t=0,s=this.count;t<s;t++)Tr.fromBufferAttribute(this,t),Tr.transformDirection(e),this.setXYZ(t,Tr.x,Tr.y,Tr.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=gs(t,this.array)),t}setX(e,t){return this.normalized&&(t=bi(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=gs(t,this.array)),t}setY(e,t){return this.normalized&&(t=bi(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=gs(t,this.array)),t}setZ(e,t){return this.normalized&&(t=bi(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=gs(t,this.array)),t}setW(e,t){return this.normalized&&(t=bi(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,s){return e*=this.itemSize,this.normalized&&(t=bi(t,this.array),s=bi(s,this.array)),this.array[e+0]=t,this.array[e+1]=s,this}setXYZ(e,t,s,l){return e*=this.itemSize,this.normalized&&(t=bi(t,this.array),s=bi(s,this.array),l=bi(l,this.array)),this.array[e+0]=t,this.array[e+1]=s,this.array[e+2]=l,this}setXYZW(e,t,s,l,h){return e*=this.itemSize,this.normalized&&(t=bi(t,this.array),s=bi(s,this.array),l=bi(l,this.array),h=bi(h,this.array)),this.array[e+0]=t,this.array[e+1]=s,this.array[e+2]=l,this.array[e+3]=h,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),35044!==this.usage&&(e.usage=this.usage),(0!==this.updateRange.offset||-1!==this.updateRange.count)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class $u extends ji{constructor(e,t,s){super(new Uint16Array(e),t,s)}}class el extends ji{constructor(e,t,s){super(new Uint32Array(e),t,s)}}class dn extends ji{constructor(e,t,s){super(new Float32Array(e),t,s)}}let nu=0;const rs=new Vt,Yu=new _s,El=new le,yi=new Ks,Ju=new Ks,kr=new le;class Kn extends Uo{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:nu++}),this.uuid=ws(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return this.index=Array.isArray(e)?new(Wu(e)?el:$u)(e,1):e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,s=0){this.groups.push({start:e,count:t,materialIndex:s})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const s=this.attributes.normal;if(void 0!==s){const h=(new _n).getNormalMatrix(e);s.applyNormalMatrix(h),s.needsUpdate=!0}const l=this.attributes.tangent;return void 0!==l&&(l.transformDirection(e),l.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return rs.makeRotationFromQuaternion(e),this.applyMatrix4(rs),this}rotateX(e){return rs.makeRotationX(e),this.applyMatrix4(rs),this}rotateY(e){return rs.makeRotationY(e),this.applyMatrix4(rs),this}rotateZ(e){return rs.makeRotationZ(e),this.applyMatrix4(rs),this}translate(e,t,s){return rs.makeTranslation(e,t,s),this.applyMatrix4(rs),this}scale(e,t,s){return rs.makeScale(e,t,s),this.applyMatrix4(rs),this}lookAt(e){return Yu.lookAt(e),Yu.updateMatrix(),this.applyMatrix4(Yu.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(El).negate(),this.translate(El.x,El.y,El.z),this}setFromPoints(e){const t=[];for(let s=0,l=e.length;s<l;s++){const h=e[s];t.push(h.x,h.y,h.z||0)}return this.setAttribute("position",new dn(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Ks);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new le(-1/0,-1/0,-1/0),new le(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let s=0,l=t.length;s<l;s++)yi.setFromBufferAttribute(t[s]),this.morphTargetsRelative?(kr.addVectors(this.boundingBox.min,yi.min),this.boundingBox.expandByPoint(kr),kr.addVectors(this.boundingBox.max,yi.max),this.boundingBox.expandByPoint(kr)):(this.boundingBox.expandByPoint(yi.min),this.boundingBox.expandByPoint(yi.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new O);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new le,1/0);if(e){const s=this.boundingSphere.center;if(yi.setFromBufferAttribute(e),t)for(let h=0,g=t.length;h<g;h++)Ju.setFromBufferAttribute(t[h]),this.morphTargetsRelative?(kr.addVectors(yi.min,Ju.min),yi.expandByPoint(kr),kr.addVectors(yi.max,Ju.max),yi.expandByPoint(kr)):(yi.expandByPoint(Ju.min),yi.expandByPoint(Ju.max));yi.getCenter(s);let l=0;for(let h=0,g=e.count;h<g;h++)kr.fromBufferAttribute(e,h),l=Math.max(l,s.distanceToSquared(kr));if(t)for(let h=0,g=t.length;h<g;h++){const _=t[h],b=this.morphTargetsRelative;for(let x=0,S=_.count;x<S;x++)kr.fromBufferAttribute(_,x),b&&(El.fromBufferAttribute(e,x),kr.add(El)),l=Math.max(l,s.distanceToSquared(kr))}this.boundingSphere.radius=Math.sqrt(l),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const s=e.array,l=t.position.array,h=t.normal.array,g=t.uv.array,_=l.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new ji(new Float32Array(4*_),4));const b=this.getAttribute("tangent").array,x=[],S=[];for(let Te=0;Te<_;Te++)x[Te]=new le,S[Te]=new le;const A=new le,E=new le,L=new le,G=new ft,j=new ft,k=new ft,J=new le,K=new le;function $(Te,Ye,yt){A.fromArray(l,3*Te),E.fromArray(l,3*Ye),L.fromArray(l,3*yt),G.fromArray(g,2*Te),j.fromArray(g,2*Ye),k.fromArray(g,2*yt),E.sub(A),L.sub(A),j.sub(G),k.sub(G);const He=1/(j.x*k.y-k.x*j.y);isFinite(He)&&(J.copy(E).multiplyScalar(k.y).addScaledVector(L,-j.y).multiplyScalar(He),K.copy(L).multiplyScalar(j.x).addScaledVector(E,-k.x).multiplyScalar(He),x[Te].add(J),x[Ye].add(J),x[yt].add(J),S[Te].add(K),S[Ye].add(K),S[yt].add(K))}let q=this.groups;0===q.length&&(q=[{start:0,count:s.length}]);for(let Te=0,Ye=q.length;Te<Ye;++Te){const yt=q[Te],He=yt.start;for(let ct=He,Mt=He+yt.count;ct<Mt;ct+=3)$(s[ct+0],s[ct+1],s[ct+2])}const se=new le,de=new le,ge=new le,X=new le;function fe(Te){ge.fromArray(h,3*Te),X.copy(ge);const Ye=x[Te];se.copy(Ye),se.sub(ge.multiplyScalar(ge.dot(Ye))).normalize(),de.crossVectors(X,Ye);const He=de.dot(S[Te])<0?-1:1;b[4*Te]=se.x,b[4*Te+1]=se.y,b[4*Te+2]=se.z,b[4*Te+3]=He}for(let Te=0,Ye=q.length;Te<Ye;++Te){const yt=q[Te],He=yt.start;for(let ct=He,Mt=He+yt.count;ct<Mt;ct+=3)fe(s[ct+0]),fe(s[ct+1]),fe(s[ct+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let s=this.getAttribute("normal");if(void 0===s)s=new ji(new Float32Array(3*t.count),3),this.setAttribute("normal",s);else for(let E=0,L=s.count;E<L;E++)s.setXYZ(E,0,0,0);const l=new le,h=new le,g=new le,_=new le,b=new le,x=new le,S=new le,A=new le;if(e)for(let E=0,L=e.count;E<L;E+=3){const G=e.getX(E+0),j=e.getX(E+1),k=e.getX(E+2);l.fromBufferAttribute(t,G),h.fromBufferAttribute(t,j),g.fromBufferAttribute(t,k),S.subVectors(g,h),A.subVectors(l,h),S.cross(A),_.fromBufferAttribute(s,G),b.fromBufferAttribute(s,j),x.fromBufferAttribute(s,k),_.add(S),b.add(S),x.add(S),s.setXYZ(G,_.x,_.y,_.z),s.setXYZ(j,b.x,b.y,b.z),s.setXYZ(k,x.x,x.y,x.z)}else for(let E=0,L=t.count;E<L;E+=3)l.fromBufferAttribute(t,E+0),h.fromBufferAttribute(t,E+1),g.fromBufferAttribute(t,E+2),S.subVectors(g,h),A.subVectors(l,h),S.cross(A),s.setXYZ(E+0,S.x,S.y,S.z),s.setXYZ(E+1,S.x,S.y,S.z),s.setXYZ(E+2,S.x,S.y,S.z);this.normalizeNormals(),s.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,s=e.count;t<s;t++)kr.fromBufferAttribute(e,t),kr.normalize(),e.setXYZ(t,kr.x,kr.y,kr.z)}toNonIndexed(){function e(_,b){const x=_.array,S=_.itemSize,A=_.normalized,E=new x.constructor(b.length*S);let L=0,G=0;for(let j=0,k=b.length;j<k;j++){L=_.isInterleavedBufferAttribute?b[j]*_.data.stride+_.offset:b[j]*S;for(let J=0;J<S;J++)E[G++]=x[L++]}return new ji(E,S,A)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Kn,s=this.index.array,l=this.attributes;for(const _ in l){const x=e(l[_],s);t.setAttribute(_,x)}const h=this.morphAttributes;for(const _ in h){const b=[],x=h[_];for(let S=0,A=x.length;S<A;S++){const L=e(x[S],s);b.push(L)}t.morphAttributes[_]=b}t.morphTargetsRelative=this.morphTargetsRelative;const g=this.groups;for(let _=0,b=g.length;_<b;_++){const x=g[_];t.addGroup(x.start,x.count,x.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const b=this.parameters;for(const x in b)void 0!==b[x]&&(e[x]=b[x]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const s=this.attributes;for(const b in s)e.data.attributes[b]=s[b].toJSON(e.data);const l={};let h=!1;for(const b in this.morphAttributes){const x=this.morphAttributes[b],S=[];for(let A=0,E=x.length;A<E;A++)S.push(x[A].toJSON(e.data));S.length>0&&(l[b]=S,h=!0)}h&&(e.data.morphAttributes=l,e.data.morphTargetsRelative=this.morphTargetsRelative);const g=this.groups;g.length>0&&(e.data.groups=JSON.parse(JSON.stringify(g)));const _=this.boundingSphere;return null!==_&&(e.data.boundingSphere={center:_.center.toArray(),radius:_.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const s=e.index;null!==s&&this.setIndex(s.clone(t));const l=e.attributes;for(const x in l)this.setAttribute(x,l[x].clone(t));const h=e.morphAttributes;for(const x in h){const S=[],A=h[x];for(let E=0,L=A.length;E<L;E++)S.push(A[E].clone(t));this.morphAttributes[x]=S}this.morphTargetsRelative=e.morphTargetsRelative;const g=e.groups;for(let x=0,S=g.length;x<S;x++){const A=g[x];this.addGroup(A.start,A.count,A.materialIndex)}const _=e.boundingBox;null!==_&&(this.boundingBox=_.clone());const b=e.boundingSphere;return null!==b&&(this.boundingSphere=b.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,void 0!==e.parameters&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const af=new Vt,Al=new li,Zu=new O,xc=new le,qo=new le,iu=new le,Hd=new le,Er=new le,ec=new ft,tl=new ft,Aa=new ft,eo=new le,Ko=new le;class w extends _s{constructor(e=new Kn,t=new Cr){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,s=Object.keys(t);if(s.length>0){const l=t[s[0]];if(void 0!==l){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let h=0,g=l.length;h<g;h++){const _=l[h].name||String(h);this.morphTargetInfluences.push(0),this.morphTargetDictionary[_]=h}}}}getVertexPosition(e,t){const s=this.geometry,h=s.morphAttributes.position,g=s.morphTargetsRelative;t.fromBufferAttribute(s.attributes.position,e);const _=this.morphTargetInfluences;if(h&&_){Er.set(0,0,0);for(let b=0,x=h.length;b<x;b++){const S=_[b];0!==S&&(Hd.fromBufferAttribute(h[b],e),Er.addScaledVector(g?Hd:Hd.sub(t),S))}t.add(Er)}return this.isSkinnedMesh&&this.boneTransform(e,t),t}raycast(e,t){const s=this.geometry,l=this.material,h=this.matrixWorld;if(void 0===l||(null===s.boundingSphere&&s.computeBoundingSphere(),Zu.copy(s.boundingSphere),Zu.applyMatrix4(h),!1===e.ray.intersectsSphere(Zu))||(af.copy(h).invert(),Al.copy(e.ray).applyMatrix4(af),null!==s.boundingBox&&!1===Al.intersectsBox(s.boundingBox)))return;let g;const _=s.index,b=s.attributes.position,x=s.attributes.uv,S=s.attributes.uv2,A=s.groups,E=s.drawRange;if(null!==_)if(Array.isArray(l))for(let L=0,G=A.length;L<G;L++){const j=A[L],k=l[j.materialIndex];for(let $=Math.max(j.start,E.start),q=Math.min(_.count,Math.min(j.start+j.count,E.start+E.count));$<q;$+=3){const se=_.getX($),de=_.getX($+1),ge=_.getX($+2);g=T(this,k,e,Al,x,S,se,de,ge),g&&(g.faceIndex=Math.floor($/3),g.face.materialIndex=j.materialIndex,t.push(g))}}else for(let j=Math.max(0,E.start),k=Math.min(_.count,E.start+E.count);j<k;j+=3){const J=_.getX(j),K=_.getX(j+1),$=_.getX(j+2);g=T(this,l,e,Al,x,S,J,K,$),g&&(g.faceIndex=Math.floor(j/3),t.push(g))}else if(void 0!==b)if(Array.isArray(l))for(let L=0,G=A.length;L<G;L++){const j=A[L],k=l[j.materialIndex];for(let $=Math.max(j.start,E.start),q=Math.min(b.count,Math.min(j.start+j.count,E.start+E.count));$<q;$+=3)g=T(this,k,e,Al,x,S,$,$+1,$+2),g&&(g.faceIndex=Math.floor($/3),g.face.materialIndex=j.materialIndex,t.push(g))}else for(let j=Math.max(0,E.start),k=Math.min(b.count,E.start+E.count);j<k;j+=3)g=T(this,l,e,Al,x,S,j,j+1,j+2),g&&(g.faceIndex=Math.floor(j/3),t.push(g))}}function T(v,e,t,s,l,h,g,_,b){v.getVertexPosition(g,xc),v.getVertexPosition(_,qo),v.getVertexPosition(b,iu);const x=function R(v,e,t,s,l,h,g,_){let b;if(b=e.side===et?s.intersectTriangle(g,h,l,!0,_):s.intersectTriangle(l,h,g,e.side===Xt,_),null===b)return null;Ko.copy(_),Ko.applyMatrix4(v.matrixWorld);const x=t.ray.origin.distanceTo(Ko);return x<t.near||x>t.far?null:{distance:x,point:Ko.clone(),object:v}}(v,e,t,s,xc,qo,iu,eo);if(x){l&&(ec.fromBufferAttribute(l,g),tl.fromBufferAttribute(l,_),Aa.fromBufferAttribute(l,b),x.uv=fo.getUV(eo,xc,qo,iu,ec,tl,Aa,new ft)),h&&(ec.fromBufferAttribute(h,g),tl.fromBufferAttribute(h,_),Aa.fromBufferAttribute(h,b),x.uv2=fo.getUV(eo,xc,qo,iu,ec,tl,Aa,new ft));const S={a:g,b:_,c:b,normal:new le,materialIndex:0};fo.getNormal(xc,qo,iu,S.normal),x.face=S}return x}class P extends Kn{constructor(e=1,t=1,s=1,l=1,h=1,g=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:s,widthSegments:l,heightSegments:h,depthSegments:g};const _=this;l=Math.floor(l),h=Math.floor(h),g=Math.floor(g);const b=[],x=[],S=[],A=[];let E=0,L=0;function G(j,k,J,K,$,q,se,de,ge,X,fe){const Te=q/ge,Ye=se/X,yt=q/2,He=se/2,Ae=de/2,ct=ge+1,Mt=X+1;let Lt=0,vt=0;const jt=new le;for(let Rt=0;Rt<Mt;Rt++){const ot=Rt*Ye-He;for(let lt=0;lt<ct;lt++)jt[j]=(lt*Te-yt)*K,jt[k]=ot*$,jt[J]=Ae,x.push(jt.x,jt.y,jt.z),jt[j]=0,jt[k]=0,jt[J]=de>0?1:-1,S.push(jt.x,jt.y,jt.z),A.push(lt/ge),A.push(1-Rt/X),Lt+=1}for(let Rt=0;Rt<X;Rt++)for(let ot=0;ot<ge;ot++){const Jt=E+ot+ct*(Rt+1),Wt=E+(ot+1)+ct*(Rt+1),an=E+(ot+1)+ct*Rt;b.push(E+ot+ct*Rt,Jt,an),b.push(Jt,Wt,an),vt+=6}_.addGroup(L,vt,fe),L+=vt,E+=Lt}G("z","y","x",-1,-1,s,t,e,g,h,0),G("z","y","x",1,-1,s,t,-e,g,h,1),G("x","z","y",1,1,e,s,t,l,g,2),G("x","z","y",1,-1,e,s,-t,l,g,3),G("x","y","z",1,-1,e,t,s,l,h,4),G("x","y","z",-1,-1,e,t,-s,l,h,5),this.setIndex(b),this.setAttribute("position",new dn(x,3)),this.setAttribute("normal",new dn(S,3)),this.setAttribute("uv",new dn(A,2))}static fromJSON(e){return new P(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function U(v){const e={};for(const t in v){e[t]={};for(const s in v[t]){const l=v[t][s];e[t][s]=l&&(l.isColor||l.isMatrix3||l.isMatrix4||l.isVector2||l.isVector3||l.isVector4||l.isTexture||l.isQuaternion)?l.clone():Array.isArray(l)?l.slice():l}}return e}function Z(v){const e={};for(let t=0;t<v.length;t++){const s=U(v[t]);for(const l in s)e[l]=s[l]}return e}function ye(v){return null===v.getRenderTarget()&&v.outputEncoding===Mi?ts:Ys}const rt={clone:U,merge:Z};class Xn extends jr{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=U(e.uniforms),this.uniformsGroups=function ne(v){const e=[];for(let t=0;t<v.length;t++)e.push(v[t].clone());return e}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const l in this.uniforms){const g=this.uniforms[l].value;t.uniforms[l]=g&&g.isTexture?{type:"t",value:g.toJSON(e).uuid}:g&&g.isColor?{type:"c",value:g.getHex()}:g&&g.isVector2?{type:"v2",value:g.toArray()}:g&&g.isVector3?{type:"v3",value:g.toArray()}:g&&g.isVector4?{type:"v4",value:g.toArray()}:g&&g.isMatrix3?{type:"m3",value:g.toArray()}:g&&g.isMatrix4?{type:"m4",value:g.toArray()}:{value:g}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const s={};for(const l in this.extensions)!0===this.extensions[l]&&(s[l]=!0);return Object.keys(s).length>0&&(t.extensions=s),t}}class Gr extends _s{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Vt,this.projectionMatrix=new Vt,this.projectionMatrixInverse=new Vt}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class vr extends Gr{constructor(e=50,t=1,s=.1,l=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=s,this.far=l,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*oa*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*Ho*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*oa*Math.atan(Math.tan(.5*Ho*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,s,l,h,g){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=s,this.view.offsetY=l,this.view.width=h,this.view.height=g,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*Ho*this.fov)/this.zoom,s=2*t,l=this.aspect*s,h=-.5*l;const g=this.view;if(null!==this.view&&this.view.enabled){const b=g.fullWidth,x=g.fullHeight;h+=g.offsetX*l/b,t-=g.offsetY*s/x,l*=g.width/b,s*=g.height/x}const _=this.filmOffset;0!==_&&(h+=e*_/this.getFilmWidth()),this.projectionMatrix.makePerspective(h,h+l,t,t-s,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}class Ao extends _s{constructor(e,t,s){super(),this.type="CubeCamera",this.renderTarget=s;const l=new vr(-90,1,e,t);l.layers=this.layers,l.up.set(0,1,0),l.lookAt(1,0,0),this.add(l);const h=new vr(-90,1,e,t);h.layers=this.layers,h.up.set(0,1,0),h.lookAt(-1,0,0),this.add(h);const g=new vr(-90,1,e,t);g.layers=this.layers,g.up.set(0,0,-1),g.lookAt(0,1,0),this.add(g);const _=new vr(-90,1,e,t);_.layers=this.layers,_.up.set(0,0,1),_.lookAt(0,-1,0),this.add(_);const b=new vr(-90,1,e,t);b.layers=this.layers,b.up.set(0,1,0),b.lookAt(0,0,1),this.add(b);const x=new vr(-90,1,e,t);x.layers=this.layers,x.up.set(0,1,0),x.lookAt(0,0,-1),this.add(x)}update(e,t){null===this.parent&&this.updateMatrixWorld();const s=this.renderTarget,[l,h,g,_,b,x]=this.children,S=e.getRenderTarget(),A=e.toneMapping,E=e.xr.enabled;e.toneMapping=lr,e.xr.enabled=!1;const L=s.texture.generateMipmaps;s.texture.generateMipmaps=!1,e.setRenderTarget(s,0),e.render(t,l),e.setRenderTarget(s,1),e.render(t,h),e.setRenderTarget(s,2),e.render(t,g),e.setRenderTarget(s,3),e.render(t,_),e.setRenderTarget(s,4),e.render(t,b),s.texture.generateMipmaps=L,e.setRenderTarget(s,5),e.render(t,x),e.setRenderTarget(S),e.toneMapping=A,e.xr.enabled=E,s.texture.needsPMREMUpdate=!0}}class ru extends rr{constructor(e,t,s,l,h,g,_,b,x,S){super(e=void 0!==e?e:[],t=void 0!==t?t:Pi,s,l,h,g,_,b,x,S),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class Dc extends la{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const s={width:e,height:e,depth:1};this.texture=new ru([s,s,s,s,s,s],t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:zt}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const s_uniforms={tEquirect:{value:null}},s_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",s_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",l=new P(5,5,5),h=new Xn({name:"CubemapFromEquirect",uniforms:U(s_uniforms),vertexShader:s_vertexShader,fragmentShader:s_fragmentShader,side:et,blending:Ot});h.uniforms.tEquirect.value=t;const g=new w(l,h),_=t.minFilter;return t.minFilter===Zn&&(t.minFilter=zt),new Ao(1,10,this).update(e,g),t.minFilter=_,g.geometry.dispose(),g.material.dispose(),this}clear(e,t,s,l){const h=e.getRenderTarget();for(let g=0;g<6;g++)e.setRenderTarget(this,g),e.clear(t,s,l);e.setRenderTarget(h)}}const wc=new le,su=new le,qu=new _n;class tc{constructor(e=new le(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,s,l){return this.normal.set(e,t,s),this.constant=l,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,s){const l=wc.subVectors(s,t).cross(su.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(l,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const s=e.delta(wc),l=this.normal.dot(s);if(0===l)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const h=-(e.start.dot(this.normal)+this.constant)/l;return h<0||h>1?null:t.copy(s).multiplyScalar(h).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),s=this.distanceToPoint(e.end);return t<0&&s>0||s<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const s=t||qu.getNormalMatrix(e),l=this.coplanarPoint(wc).applyMatrix4(e),h=this.normal.applyMatrix3(s).normalize();return this.constant=-l.dot(h),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const nl=new O,zd=new le;class Wd{constructor(e=new tc,t=new tc,s=new tc,l=new tc,h=new tc,g=new tc){this.planes=[e,t,s,l,h,g]}set(e,t,s,l,h,g){const _=this.planes;return _[0].copy(e),_[1].copy(t),_[2].copy(s),_[3].copy(l),_[4].copy(h),_[5].copy(g),this}copy(e){const t=this.planes;for(let s=0;s<6;s++)t[s].copy(e.planes[s]);return this}setFromProjectionMatrix(e){const t=this.planes,s=e.elements,l=s[0],h=s[1],g=s[2],_=s[3],b=s[4],x=s[5],S=s[6],A=s[7],E=s[8],L=s[9],G=s[10],j=s[11],k=s[12],J=s[13],K=s[14],$=s[15];return t[0].setComponents(_-l,A-b,j-E,$-k).normalize(),t[1].setComponents(_+l,A+b,j+E,$+k).normalize(),t[2].setComponents(_+h,A+x,j+L,$+J).normalize(),t[3].setComponents(_-h,A-x,j-L,$-J).normalize(),t[4].setComponents(_-g,A-S,j-G,$-K).normalize(),t[5].setComponents(_+g,A+S,j+G,$+K).normalize(),this}intersectsObject(e){const t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),nl.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(nl)}intersectsSprite(e){return nl.center.set(0,0,0),nl.radius=.7071067811865476,nl.applyMatrix4(e.matrixWorld),this.intersectsSphere(nl)}intersectsSphere(e){const t=this.planes,s=e.center,l=-e.radius;for(let h=0;h<6;h++)if(t[h].distanceToPoint(s)<l)return!1;return!0}intersectsBox(e){const t=this.planes;for(let s=0;s<6;s++){const l=t[s];if(zd.x=l.normal.x>0?e.max.x:e.min.x,zd.y=l.normal.y>0?e.max.y:e.min.y,zd.z=l.normal.z>0?e.max.z:e.min.z,l.distanceToPoint(zd)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let s=0;s<6;s++)if(t[s].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function ou(){let v=null,e=!1,t=null,s=null;function l(h,g){t(h,g),s=v.requestAnimationFrame(l)}return{start:function(){!0!==e&&null!==t&&(s=v.requestAnimationFrame(l),e=!0)},stop:function(){v.cancelAnimationFrame(s),e=!1},setAnimationLoop:function(h){t=h},setContext:function(h){v=h}}}function Ku(v,e){const t=e.isWebGL2,s=new WeakMap;return{get:function g(x){return x.isInterleavedBufferAttribute&&(x=x.data),s.get(x)},remove:function _(x){x.isInterleavedBufferAttribute&&(x=x.data);const S=s.get(x);S&&(v.deleteBuffer(S.buffer),s.delete(x))},update:function b(x,S){if(x.isGLBufferAttribute){const E=s.get(x);return void((!E||E.version<x.version)&&s.set(x,{buffer:x.buffer,type:x.type,bytesPerElement:x.elementSize,version:x.version}))}x.isInterleavedBufferAttribute&&(x=x.data);const A=s.get(x);void 0===A?s.set(x,function l(x,S){const A=x.array,E=x.usage,L=v.createBuffer();let G;if(v.bindBuffer(S,L),v.bufferData(S,A,E),x.onUploadCallback(),A instanceof Float32Array)G=5126;else if(A instanceof Uint16Array)if(x.isFloat16BufferAttribute){if(!t)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");G=5131}else G=5123;else if(A instanceof Int16Array)G=5122;else if(A instanceof Uint32Array)G=5125;else if(A instanceof Int32Array)G=5124;else if(A instanceof Int8Array)G=5120;else if(A instanceof Uint8Array)G=5121;else{if(!(A instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+A);G=5121}return{buffer:L,type:G,bytesPerElement:A.BYTES_PER_ELEMENT,version:x.version}}(x,S)):A.version<x.version&&(function h(x,S,A){const E=S.array,L=S.updateRange;v.bindBuffer(A,x),-1===L.count?v.bufferSubData(A,0,E):(t?v.bufferSubData(A,L.offset*E.BYTES_PER_ELEMENT,E,L.offset,L.count):v.bufferSubData(A,L.offset*E.BYTES_PER_ELEMENT,E.subarray(L.offset,L.offset+L.count)),L.count=-1),S.onUploadCallback()}(A.buffer,x,S),A.version=x.version)}}}class au extends Kn{constructor(e=1,t=1,s=1,l=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:s,heightSegments:l};const h=e/2,g=t/2,_=Math.floor(s),b=Math.floor(l),x=_+1,S=b+1,A=e/_,E=t/b,L=[],G=[],j=[],k=[];for(let J=0;J<S;J++){const K=J*E-g;for(let $=0;$<x;$++)G.push($*A-h,-K,0),j.push(0,0,1),k.push($/_),k.push(1-J/b)}for(let J=0;J<b;J++)for(let K=0;K<_;K++){const q=K+x*(J+1),se=K+1+x*(J+1),de=K+1+x*J;L.push(K+x*J,q,de),L.push(q,se,de)}this.setIndex(L),this.setAttribute("position",new dn(G,3)),this.setAttribute("normal",new dn(j,3)),this.setAttribute("uv",new dn(k,2))}static fromJSON(e){return new au(e.width,e.height,e.widthSegments,e.heightSegments)}}const ii={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\n#ifdef USE_IRIDESCENCE\n\tvec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\t return vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat R21 = R12;\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );\n\t#else\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if defined( USE_SHADOWMAP ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_COORDS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef texture2DLodEXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},Qt={common:{diffuse:{value:new $t(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new _n},uv2Transform:{value:new _n},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new ft(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new $t(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new $t(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new _n}},sprite:{diffuse:{value:new $t(16777215)},opacity:{value:1},center:{value:new ft(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new _n}}},Ia={basic:{uniforms:Z([Qt.common,Qt.specularmap,Qt.envmap,Qt.aomap,Qt.lightmap,Qt.fog]),vertexShader:ii.meshbasic_vert,fragmentShader:ii.meshbasic_frag},lambert:{uniforms:Z([Qt.common,Qt.specularmap,Qt.envmap,Qt.aomap,Qt.lightmap,Qt.emissivemap,Qt.bumpmap,Qt.normalmap,Qt.displacementmap,Qt.fog,Qt.lights,{emissive:{value:new $t(0)}}]),vertexShader:ii.meshlambert_vert,fragmentShader:ii.meshlambert_frag},phong:{uniforms:Z([Qt.common,Qt.specularmap,Qt.envmap,Qt.aomap,Qt.lightmap,Qt.emissivemap,Qt.bumpmap,Qt.normalmap,Qt.displacementmap,Qt.fog,Qt.lights,{emissive:{value:new $t(0)},specular:{value:new $t(1118481)},shininess:{value:30}}]),vertexShader:ii.meshphong_vert,fragmentShader:ii.meshphong_frag},standard:{uniforms:Z([Qt.common,Qt.envmap,Qt.aomap,Qt.lightmap,Qt.emissivemap,Qt.bumpmap,Qt.normalmap,Qt.displacementmap,Qt.roughnessmap,Qt.metalnessmap,Qt.fog,Qt.lights,{emissive:{value:new $t(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ii.meshphysical_vert,fragmentShader:ii.meshphysical_frag},toon:{uniforms:Z([Qt.common,Qt.aomap,Qt.lightmap,Qt.emissivemap,Qt.bumpmap,Qt.normalmap,Qt.displacementmap,Qt.gradientmap,Qt.fog,Qt.lights,{emissive:{value:new $t(0)}}]),vertexShader:ii.meshtoon_vert,fragmentShader:ii.meshtoon_frag},matcap:{uniforms:Z([Qt.common,Qt.bumpmap,Qt.normalmap,Qt.displacementmap,Qt.fog,{matcap:{value:null}}]),vertexShader:ii.meshmatcap_vert,fragmentShader:ii.meshmatcap_frag},points:{uniforms:Z([Qt.points,Qt.fog]),vertexShader:ii.points_vert,fragmentShader:ii.points_frag},dashed:{uniforms:Z([Qt.common,Qt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ii.linedashed_vert,fragmentShader:ii.linedashed_frag},depth:{uniforms:Z([Qt.common,Qt.displacementmap]),vertexShader:ii.depth_vert,fragmentShader:ii.depth_frag},normal:{uniforms:Z([Qt.common,Qt.bumpmap,Qt.normalmap,Qt.displacementmap,{opacity:{value:1}}]),vertexShader:ii.meshnormal_vert,fragmentShader:ii.meshnormal_frag},sprite:{uniforms:Z([Qt.sprite,Qt.fog]),vertexShader:ii.sprite_vert,fragmentShader:ii.sprite_frag},background:{uniforms:{uvTransform:{value:new _n},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:ii.background_vert,fragmentShader:ii.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:ii.backgroundCube_vert,fragmentShader:ii.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:ii.cube_vert,fragmentShader:ii.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ii.equirect_vert,fragmentShader:ii.equirect_frag},distanceRGBA:{uniforms:Z([Qt.common,Qt.displacementmap,{referencePosition:{value:new le},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ii.distanceRGBA_vert,fragmentShader:ii.distanceRGBA_frag},shadow:{uniforms:Z([Qt.lights,Qt.fog,{color:{value:new $t(0)},opacity:{value:1}}]),vertexShader:ii.shadow_vert,fragmentShader:ii.shadow_frag}};Ia.physical={uniforms:Z([Ia.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new ft(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new $t(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new ft},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new $t(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new $t(1,1,1)},specularColorMap:{value:null}}]),vertexShader:ii.meshphysical_vert,fragmentShader:ii.meshphysical_frag};const ih={r:0,b:0,g:0};function Xg(v,e,t,s,l,h,g){const _=new $t(0);let x,S,b=!0===h?0:1,A=null,E=0,L=null;function j(k,J){k.getRGB(ih,ye(v)),s.buffers.color.setClear(ih.r,ih.g,ih.b,J,g)}return{getClearColor:function(){return _},setClearColor:function(k,J=1){_.set(k),b=J,j(_,b)},getClearAlpha:function(){return b},setClearAlpha:function(k){b=k,j(_,b)},render:function G(k,J){let K=!1,$=!0===J.isScene?J.background:null;$&&$.isTexture&&($=(J.backgroundBlurriness>0?t:e).get($));const q=v.xr,se=q.getSession&&q.getSession();se&&"additive"===se.environmentBlendMode&&($=null),null===$?j(_,b):$&&$.isColor&&(j($,1),K=!0),(v.autoClear||K)&&v.clear(v.autoClearColor,v.autoClearDepth,v.autoClearStencil),$&&($.isCubeTexture||$.mapping===Us)?(void 0===S&&(S=new w(new P(1,1,1),new Xn({name:"BackgroundCubeMaterial",uniforms:U(Ia.backgroundCube.uniforms),vertexShader:Ia.backgroundCube.vertexShader,fragmentShader:Ia.backgroundCube.fragmentShader,side:et,depthTest:!1,depthWrite:!1,fog:!1})),S.geometry.deleteAttribute("normal"),S.geometry.deleteAttribute("uv"),S.onBeforeRender=function(de,ge,X){this.matrixWorld.copyPosition(X.matrixWorld)},Object.defineProperty(S.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),l.update(S)),S.material.uniforms.envMap.value=$,S.material.uniforms.flipEnvMap.value=$.isCubeTexture&&!1===$.isRenderTargetTexture?-1:1,S.material.uniforms.backgroundBlurriness.value=J.backgroundBlurriness,S.material.uniforms.backgroundIntensity.value=J.backgroundIntensity,S.material.toneMapped=$.encoding!==Mi,(A!==$||E!==$.version||L!==v.toneMapping)&&(S.material.needsUpdate=!0,A=$,E=$.version,L=v.toneMapping),S.layers.enableAll(),k.unshift(S,S.geometry,S.material,0,0,null)):$&&$.isTexture&&(void 0===x&&(x=new w(new au(2,2),new Xn({name:"BackgroundMaterial",uniforms:U(Ia.background.uniforms),vertexShader:Ia.background.vertexShader,fragmentShader:Ia.background.fragmentShader,side:Xt,depthTest:!1,depthWrite:!1,fog:!1})),x.geometry.deleteAttribute("normal"),Object.defineProperty(x.material,"map",{get:function(){return this.uniforms.t2D.value}}),l.update(x)),x.material.uniforms.t2D.value=$,x.material.uniforms.backgroundIntensity.value=J.backgroundIntensity,x.material.toneMapped=$.encoding!==Mi,!0===$.matrixAutoUpdate&&$.updateMatrix(),x.material.uniforms.uvTransform.value.copy($.matrix),(A!==$||E!==$.version||L!==v.toneMapping)&&(x.material.needsUpdate=!0,A=$,E=$.version,L=v.toneMapping),x.layers.enableAll(),k.unshift(x,x.geometry,x.material,0,0,null))}}}function rm(v,e,t,s){const l=v.getParameter(34921),h=s.isWebGL2?null:e.get("OES_vertex_array_object"),g=s.isWebGL2||null!==h,_={},b=k(null);let x=b,S=!1;function L(Ae){return s.isWebGL2?v.bindVertexArray(Ae):h.bindVertexArrayOES(Ae)}function G(Ae){return s.isWebGL2?v.deleteVertexArray(Ae):h.deleteVertexArrayOES(Ae)}function k(Ae){const ct=[],Mt=[],Lt=[];for(let vt=0;vt<l;vt++)ct[vt]=0,Mt[vt]=0,Lt[vt]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:ct,enabledAttributes:Mt,attributeDivisors:Lt,object:Ae,attributes:{},index:null}}function $(){const Ae=x.newAttributes;for(let ct=0,Mt=Ae.length;ct<Mt;ct++)Ae[ct]=0}function q(Ae){se(Ae,0)}function se(Ae,ct){const Lt=x.enabledAttributes,vt=x.attributeDivisors;x.newAttributes[Ae]=1,0===Lt[Ae]&&(v.enableVertexAttribArray(Ae),Lt[Ae]=1),vt[Ae]!==ct&&((s.isWebGL2?v:e.get("ANGLE_instanced_arrays"))[s.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](Ae,ct),vt[Ae]=ct)}function de(){const Ae=x.newAttributes,ct=x.enabledAttributes;for(let Mt=0,Lt=ct.length;Mt<Lt;Mt++)ct[Mt]!==Ae[Mt]&&(v.disableVertexAttribArray(Mt),ct[Mt]=0)}function ge(Ae,ct,Mt,Lt,vt,jt){!0!==s.isWebGL2||5124!==Mt&&5125!==Mt?v.vertexAttribPointer(Ae,ct,Mt,Lt,vt,jt):v.vertexAttribIPointer(Ae,ct,Mt,vt,jt)}function yt(){He(),S=!0,x!==b&&(x=b,L(x.object))}function He(){b.geometry=null,b.program=null,b.wireframe=!1}return{setup:function A(Ae,ct,Mt,Lt,vt){let jt=!1;if(g){const Rt=function j(Ae,ct,Mt){const Lt=!0===Mt.wireframe;let vt=_[Ae.id];void 0===vt&&(vt={},_[Ae.id]=vt);let jt=vt[ct.id];void 0===jt&&(jt={},vt[ct.id]=jt);let Rt=jt[Lt];return void 0===Rt&&(Rt=k(function E(){return s.isWebGL2?v.createVertexArray():h.createVertexArrayOES()}()),jt[Lt]=Rt),Rt}(Lt,Mt,ct);x!==Rt&&(x=Rt,L(x.object)),jt=function J(Ae,ct,Mt,Lt){const vt=x.attributes,jt=ct.attributes;let Rt=0;const ot=Mt.getAttributes();for(const lt in ot)if(ot[lt].location>=0){const Wt=vt[lt];let an=jt[lt];if(void 0===an&&("instanceMatrix"===lt&&Ae.instanceMatrix&&(an=Ae.instanceMatrix),"instanceColor"===lt&&Ae.instanceColor&&(an=Ae.instanceColor)),void 0===Wt||Wt.attribute!==an||an&&Wt.data!==an.data)return!0;Rt++}return x.attributesNum!==Rt||x.index!==Lt}(Ae,Lt,Mt,vt),jt&&function K(Ae,ct,Mt,Lt){const vt={},jt=ct.attributes;let Rt=0;const ot=Mt.getAttributes();for(const lt in ot)if(ot[lt].location>=0){let Wt=jt[lt];void 0===Wt&&("instanceMatrix"===lt&&Ae.instanceMatrix&&(Wt=Ae.instanceMatrix),"instanceColor"===lt&&Ae.instanceColor&&(Wt=Ae.instanceColor));const an={};an.attribute=Wt,Wt&&Wt.data&&(an.data=Wt.data),vt[lt]=an,Rt++}x.attributes=vt,x.attributesNum=Rt,x.index=Lt}(Ae,Lt,Mt,vt)}else{const Rt=!0===ct.wireframe;(x.geometry!==Lt.id||x.program!==Mt.id||x.wireframe!==Rt)&&(x.geometry=Lt.id,x.program=Mt.id,x.wireframe=Rt,jt=!0)}null!==vt&&t.update(vt,34963),(jt||S)&&(S=!1,function X(Ae,ct,Mt,Lt){if(!1===s.isWebGL2&&(Ae.isInstancedMesh||Lt.isInstancedBufferGeometry)&&null===e.get("ANGLE_instanced_arrays"))return;$();const vt=Lt.attributes,jt=Mt.getAttributes(),Rt=ct.defaultAttributeValues;for(const ot in jt){const lt=jt[ot];if(lt.location>=0){let Jt=vt[ot];if(void 0===Jt&&("instanceMatrix"===ot&&Ae.instanceMatrix&&(Jt=Ae.instanceMatrix),"instanceColor"===ot&&Ae.instanceColor&&(Jt=Ae.instanceColor)),void 0!==Jt){const Wt=Jt.normalized,an=Jt.itemSize,pt=t.get(Jt);if(void 0===pt)continue;const Qn=pt.buffer,bn=pt.type,ei=pt.bytesPerElement;if(Jt.isInterleavedBufferAttribute){const ln=Jt.data,Ci=ln.stride,bt=Jt.offset;if(ln.isInstancedInterleavedBuffer){for(let _t=0;_t<lt.locationSize;_t++)se(lt.location+_t,ln.meshPerAttribute);!0!==Ae.isInstancedMesh&&void 0===Lt._maxInstanceCount&&(Lt._maxInstanceCount=ln.meshPerAttribute*ln.count)}else for(let _t=0;_t<lt.locationSize;_t++)q(lt.location+_t);v.bindBuffer(34962,Qn);for(let _t=0;_t<lt.locationSize;_t++)ge(lt.location+_t,an/lt.locationSize,bn,Wt,Ci*ei,(bt+an/lt.locationSize*_t)*ei)}else{if(Jt.isInstancedBufferAttribute){for(let ln=0;ln<lt.locationSize;ln++)se(lt.location+ln,Jt.meshPerAttribute);!0!==Ae.isInstancedMesh&&void 0===Lt._maxInstanceCount&&(Lt._maxInstanceCount=Jt.meshPerAttribute*Jt.count)}else for(let ln=0;ln<lt.locationSize;ln++)q(lt.location+ln);v.bindBuffer(34962,Qn);for(let ln=0;ln<lt.locationSize;ln++)ge(lt.location+ln,an/lt.locationSize,bn,Wt,an*ei,an/lt.locationSize*ln*ei)}}else if(void 0!==Rt){const Wt=Rt[ot];if(void 0!==Wt)switch(Wt.length){case 2:v.vertexAttrib2fv(lt.location,Wt);break;case 3:v.vertexAttrib3fv(lt.location,Wt);break;case 4:v.vertexAttrib4fv(lt.location,Wt);break;default:v.vertexAttrib1fv(lt.location,Wt)}}}}de()}(Ae,ct,Mt,Lt),null!==vt&&v.bindBuffer(34963,t.get(vt).buffer))},reset:yt,resetDefaultState:He,dispose:function fe(){yt();for(const Ae in _){const ct=_[Ae];for(const Mt in ct){const Lt=ct[Mt];for(const vt in Lt)G(Lt[vt].object),delete Lt[vt];delete ct[Mt]}delete _[Ae]}},releaseStatesOfGeometry:function Te(Ae){if(void 0===_[Ae.id])return;const ct=_[Ae.id];for(const Mt in ct){const Lt=ct[Mt];for(const vt in Lt)G(Lt[vt].object),delete Lt[vt];delete ct[Mt]}delete _[Ae.id]},releaseStatesOfProgram:function Ye(Ae){for(const ct in _){const Mt=_[ct];if(void 0===Mt[Ae.id])continue;const Lt=Mt[Ae.id];for(const vt in Lt)G(Lt[vt].object),delete Lt[vt];delete Mt[Ae.id]}},initAttributes:$,enableAttribute:q,disableUnusedAttributes:de}}function bv(v,e,t,s){const l=s.isWebGL2;let h;this.setMode=function g(x){h=x},this.render=function _(x,S){v.drawArrays(h,x,S),t.update(S,h,1)},this.renderInstances=function b(x,S,A){if(0===A)return;let E,L;if(l)E=v,L="drawArraysInstanced";else if(E=e.get("ANGLE_instanced_arrays"),L="drawArraysInstancedANGLE",null===E)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");E[L](h,x,S,A),t.update(S,h,A)}}function Rf(v,e,t){let s;function h(ge){if("highp"===ge){if(v.getShaderPrecisionFormat(35633,36338).precision>0&&v.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";ge="mediump"}return"mediump"===ge&&v.getShaderPrecisionFormat(35633,36337).precision>0&&v.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const g=typeof WebGL2RenderingContext<"u"&&v instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&v instanceof WebGL2ComputeRenderingContext;let _=void 0!==t.precision?t.precision:"highp";const b=h(_);b!==_&&(console.warn("THREE.WebGLRenderer:",_,"not supported, using",b,"instead."),_=b);const x=g||e.has("WEBGL_draw_buffers"),S=!0===t.logarithmicDepthBuffer,A=v.getParameter(34930),E=v.getParameter(35660),L=v.getParameter(3379),G=v.getParameter(34076),j=v.getParameter(34921),k=v.getParameter(36347),J=v.getParameter(36348),K=v.getParameter(36349),$=E>0,q=g||e.has("OES_texture_float");return{isWebGL2:g,drawBuffers:x,getMaxAnisotropy:function l(){if(void 0!==s)return s;if(!0===e.has("EXT_texture_filter_anisotropic")){const ge=e.get("EXT_texture_filter_anisotropic");s=v.getParameter(ge.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else s=0;return s},getMaxPrecision:h,precision:_,logarithmicDepthBuffer:S,maxTextures:A,maxVertexTextures:E,maxTextureSize:L,maxCubemapSize:G,maxAttributes:j,maxVertexUniforms:k,maxVaryings:J,maxFragmentUniforms:K,vertexTextures:$,floatFragmentTextures:q,floatVertexTextures:$&&q,maxSamples:g?v.getParameter(36183):0}}function Sf(v){const e=this;let t=null,s=0,l=!1,h=!1;const g=new tc,_=new _n,b={value:null,needsUpdate:!1};function x(){b.value!==t&&(b.value=t,b.needsUpdate=s>0),e.numPlanes=s,e.numIntersection=0}function S(A,E,L,G){const j=null!==A?A.length:0;let k=null;if(0!==j){if(k=b.value,!0!==G||null===k){const J=L+4*j,K=E.matrixWorldInverse;_.getNormalMatrix(K),(null===k||k.length<J)&&(k=new Float32Array(J));for(let $=0,q=L;$!==j;++$,q+=4)g.copy(A[$]).applyMatrix4(K,_),g.normal.toArray(k,q),k[q+3]=g.constant}b.value=k,b.needsUpdate=!0}return e.numPlanes=j,e.numIntersection=0,k}this.uniform=b,this.numPlanes=0,this.numIntersection=0,this.init=function(A,E,L){const G=0!==A.length||E||0!==s||l;return l=E,t=S(A,L,0),s=A.length,G},this.beginShadows=function(){h=!0,S(null)},this.endShadows=function(){h=!1,x()},this.setState=function(A,E,L){const G=A.clippingPlanes,j=A.clipIntersection,k=A.clipShadows,J=v.get(A);if(!l||null===G||0===G.length||h&&!k)h?S(null):x();else{const K=h?0:s,$=4*K;let q=J.clippingState||null;b.value=q,q=S(G,E,$,L);for(let se=0;se!==$;++se)q[se]=t[se];J.clippingState=q,this.numIntersection=j?this.numPlanes:0,this.numPlanes+=K}}}function Qg(v){let e=new WeakMap;function t(g,_){return _===_o?g.mapping=Pi:_===xn&&(g.mapping=Or),g}function l(g){const _=g.target;_.removeEventListener("dispose",l);const b=e.get(_);void 0!==b&&(e.delete(_),b.dispose())}return{get:function s(g){if(g&&g.isTexture&&!1===g.isRenderTargetTexture){const _=g.mapping;if(_===_o||_===xn){if(e.has(g))return t(e.get(g).texture,g.mapping);{const b=g.image;if(b&&b.height>0){const x=new Dc(b.height/2);return x.fromEquirectangularTexture(v,g),e.set(g,x),g.addEventListener("dispose",l),t(x.texture,g.mapping)}return null}}}return g},dispose:function h(){e=new WeakMap}}}class rh extends Gr{constructor(e=-1,t=1,s=1,l=-1,h=.1,g=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=s,this.bottom=l,this.near=h,this.far=g,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,s,l,h,g){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=s,this.view.offsetY=l,this.view.width=h,this.view.height=g,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),s=(this.right+this.left)/2,l=(this.top+this.bottom)/2;let h=s-e,g=s+e,_=l+t,b=l-t;if(null!==this.view&&this.view.enabled){const x=(this.right-this.left)/this.view.fullWidth/this.zoom,S=(this.top-this.bottom)/this.view.fullHeight/this.zoom;h+=x*this.view.offsetX,g=h+x*this.view.width,_-=S*this.view.offsetY,b=_-S*this.view.height}this.projectionMatrix.makeOrthographic(h,g,_,b,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}const ed=[.125,.215,.35,.446,.526,.582],ic=new rh,Cf=new $t;let sh=null;const Po=(1+Math.sqrt(5))/2,Sc=1/Po,Tv=[new le(1,1,1),new le(-1,1,1),new le(1,1,-1),new le(-1,1,-1),new le(0,Po,Sc),new le(0,Po,-Sc),new le(Sc,0,Po),new le(-Sc,0,Po),new le(Po,Sc,0),new le(-Po,Sc,0)];class sm{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,s=.1,l=100){sh=this._renderer.getRenderTarget(),this._setSize(256);const h=this._allocateTargets();return h.depthBuffer=!0,this._sceneToCubeUV(e,s,l,h),t>0&&this._blur(h,0,0,t),this._applyPMREM(h),this._cleanup(h),h}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=If(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=rl(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(sh),e.scissorTest=!1,Af(e,0,0,e.width,e.height)}_fromTexture(e,t){this._setSize(e.mapping===Pi||e.mapping===Or?0===e.image.length?16:e.image[0].width||e.image[0].image.width:e.image.width/4),sh=this._renderer.getRenderTarget();const s=t||this._allocateTargets();return this._textureToCubeUV(e,s),this._applyPMREM(s),this._cleanup(s),s}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,s={magFilter:zt,minFilter:zt,generateMipmaps:!1,type:Xr,format:hs,encoding:ps,depthBuffer:!1},l=oh(e,t,s);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=oh(e,t,s);const{_lodMax:h}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function Ef(v){const e=[],t=[],s=[];let l=v;const h=v-4+1+ed.length;for(let g=0;g<h;g++){const _=Math.pow(2,l);t.push(_);let b=1/_;g>v-4?b=ed[g-v+4-1]:0===g&&(b=0),s.push(b);const x=1/(_-2),S=-x,A=1+x,E=[S,S,A,S,A,A,S,S,A,A,S,A],L=6,G=6,j=3,k=2,J=1,K=new Float32Array(j*G*L),$=new Float32Array(k*G*L),q=new Float32Array(J*G*L);for(let de=0;de<L;de++){const ge=de%3*2/3-1,X=de>2?0:-1;K.set([ge,X,0,ge+2/3,X,0,ge+2/3,X+1,0,ge,X,0,ge+2/3,X+1,0,ge,X+1,0],j*G*de),$.set(E,k*G*de),q.set([de,de,de,de,de,de],J*G*de)}const se=new Kn;se.setAttribute("position",new ji(K,j)),se.setAttribute("uv",new ji($,k)),se.setAttribute("faceIndex",new ji(q,J)),e.push(se),l>4&&l--}return{lodPlanes:e,sizeLods:t,sigmas:s}}(h)),this._blurMaterial=function e_(v,e,t){const s=new Float32Array(20),l=new le(0,1,0);return new Xn({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${v}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:s},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:l}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:Ot,depthTest:!1,depthWrite:!1})}(h,e,t)}return l}_compileMaterial(e){const t=new w(this._lodPlanes[0],e);this._renderer.compile(t,ic)}_sceneToCubeUV(e,t,s,l){const _=new vr(90,1,t,s),b=[1,-1,1,1,1,1],x=[1,1,1,-1,-1,-1],S=this._renderer,A=S.autoClear,E=S.toneMapping;S.getClearColor(Cf),S.toneMapping=lr,S.autoClear=!1;const L=new Cr({name:"PMREM.Background",side:et,depthWrite:!1,depthTest:!1}),G=new w(new P,L);let j=!1;const k=e.background;k?k.isColor&&(L.color.copy(k),e.background=null,j=!0):(L.color.copy(Cf),j=!0);for(let J=0;J<6;J++){const K=J%3;0===K?(_.up.set(0,b[J],0),_.lookAt(x[J],0,0)):1===K?(_.up.set(0,0,b[J]),_.lookAt(0,x[J],0)):(_.up.set(0,b[J],0),_.lookAt(0,0,x[J]));const $=this._cubeSize;Af(l,K*$,J>2?$:0,$,$),S.setRenderTarget(l),j&&S.render(G,_),S.render(e,_)}G.geometry.dispose(),G.material.dispose(),S.toneMapping=E,S.autoClear=A,e.background=k}_textureToCubeUV(e,t){const s=this._renderer,l=e.mapping===Pi||e.mapping===Or;l?(null===this._cubemapMaterial&&(this._cubemapMaterial=If()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=rl());const h=l?this._cubemapMaterial:this._equirectMaterial,g=new w(this._lodPlanes[0],h);h.uniforms.envMap.value=e;const b=this._cubeSize;Af(t,0,0,3*b,2*b),s.setRenderTarget(t),s.render(g,ic)}_applyPMREM(e){const t=this._renderer,s=t.autoClear;t.autoClear=!1;for(let l=1;l<this._lodPlanes.length;l++){const h=Math.sqrt(this._sigmas[l]*this._sigmas[l]-this._sigmas[l-1]*this._sigmas[l-1]);this._blur(e,l-1,l,h,Tv[(l-1)%Tv.length])}t.autoClear=s}_blur(e,t,s,l,h){const g=this._pingPongRenderTarget;this._halfBlur(e,g,t,s,l,"latitudinal",h),this._halfBlur(g,e,s,s,l,"longitudinal",h)}_halfBlur(e,t,s,l,h,g,_){const b=this._renderer,x=this._blurMaterial;"latitudinal"!==g&&"longitudinal"!==g&&console.error("blur direction must be either latitudinal or longitudinal!");const A=new w(this._lodPlanes[l],x),E=x.uniforms,L=this._sizeLods[s]-1,G=isFinite(h)?Math.PI/(2*L):2*Math.PI/39,j=h/G,k=isFinite(h)?1+Math.floor(3*j):20;k>20&&console.warn(`sigmaRadians, ${h}, is too large and will clip, as it requested ${k} samples when the maximum is set to 20`);const J=[];let K=0;for(let ge=0;ge<20;++ge){const X=ge/j,fe=Math.exp(-X*X/2);J.push(fe),0===ge?K+=fe:ge<k&&(K+=2*fe)}for(let ge=0;ge<J.length;ge++)J[ge]=J[ge]/K;E.envMap.value=e.texture,E.samples.value=k,E.weights.value=J,E.latitudinal.value="latitudinal"===g,_&&(E.poleAxis.value=_);const{_lodMax:$}=this;E.dTheta.value=G,E.mipInt.value=$-s;const q=this._sizeLods[l];Af(t,3*q*(l>$-4?l-$+4:0),4*(this._cubeSize-q),3*q,2*q),b.setRenderTarget(t),b.render(A,ic)}}function oh(v,e,t){const s=new la(v,e,t);return s.texture.mapping=Us,s.texture.name="PMREM.cubeUv",s.scissorTest=!0,s}function Af(v,e,t,s,l){v.viewport.set(e,t,s,l),v.scissor.set(e,t,s,l)}function rl(){return new Xn({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:Ot,depthTest:!1,depthWrite:!1})}function If(){return new Xn({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:Ot,depthTest:!1,depthWrite:!1})}function ah(v){let e=new WeakMap,t=null;function h(_){const b=_.target;b.removeEventListener("dispose",h);const x=e.get(b);void 0!==x&&(e.delete(b),x.dispose())}return{get:function s(_){if(_&&_.isTexture){const b=_.mapping,x=b===_o||b===xn,S=b===Pi||b===Or;if(x||S){if(_.isRenderTargetTexture&&!0===_.needsPMREMUpdate){_.needsPMREMUpdate=!1;let A=e.get(_);return null===t&&(t=new sm(v)),A=x?t.fromEquirectangular(_,A):t.fromCubemap(_,A),e.set(_,A),A.texture}if(e.has(_))return e.get(_).texture;{const A=_.image;if(x&&A&&A.height>0||S&&A&&function l(_){let b=0;for(let S=0;S<6;S++)void 0!==_[S]&&b++;return 6===b}(A)){null===t&&(t=new sm(v));const E=x?t.fromEquirectangular(_):t.fromCubemap(_);return e.set(_,E),_.addEventListener("dispose",h),E.texture}return null}}}return _},dispose:function g(){e=new WeakMap,null!==t&&(t.dispose(),t=null)}}}function t_(v){const e={};function t(s){if(void 0!==e[s])return e[s];let l;switch(s){case"WEBGL_depth_texture":l=v.getExtension("WEBGL_depth_texture")||v.getExtension("MOZ_WEBGL_depth_texture")||v.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":l=v.getExtension("EXT_texture_filter_anisotropic")||v.getExtension("MOZ_EXT_texture_filter_anisotropic")||v.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":l=v.getExtension("WEBGL_compressed_texture_s3tc")||v.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||v.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":l=v.getExtension("WEBGL_compressed_texture_pvrtc")||v.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:l=v.getExtension(s)}return e[s]=l,l}return{has:function(s){return null!==t(s)},init:function(s){s.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(s){const l=t(s);return null===l&&console.warn("THREE.WebGLRenderer: "+s+" extension not supported."),l}}}function om(v,e,t,s){const l={},h=new WeakMap;function g(A){const E=A.target;null!==E.index&&e.remove(E.index);for(const G in E.attributes)e.remove(E.attributes[G]);E.removeEventListener("dispose",g),delete l[E.id];const L=h.get(E);L&&(e.remove(L),h.delete(E)),s.releaseStatesOfGeometry(E),!0===E.isInstancedBufferGeometry&&delete E._maxInstanceCount,t.memory.geometries--}function x(A){const E=[],L=A.index,G=A.attributes.position;let j=0;if(null!==L){const K=L.array;j=L.version;for(let $=0,q=K.length;$<q;$+=3){const se=K[$+0],de=K[$+1],ge=K[$+2];E.push(se,de,de,ge,ge,se)}}else{j=G.version;for(let $=0,q=G.array.length/3-1;$<q;$+=3){const se=$+0,de=$+1,ge=$+2;E.push(se,de,de,ge,ge,se)}}const k=new(Wu(E)?el:$u)(E,1);k.version=j;const J=h.get(A);J&&e.remove(J),h.set(A,k)}return{get:function _(A,E){return!0===l[E.id]||(E.addEventListener("dispose",g),l[E.id]=!0,t.memory.geometries++),E},update:function b(A){const E=A.attributes;for(const G in E)e.update(E[G],34962);const L=A.morphAttributes;for(const G in L){const j=L[G];for(let k=0,J=j.length;k<J;k++)e.update(j[k],34962)}},getWireframeAttribute:function S(A){const E=h.get(A);if(E){const L=A.index;null!==L&&E.version<L.version&&x(A)}else x(A);return h.get(A)}}}function lh(v,e,t,s){const l=s.isWebGL2;let h,_,b;this.setMode=function g(E){h=E},this.setIndex=function x(E){_=E.type,b=E.bytesPerElement},this.render=function S(E,L){v.drawElements(h,L,_,E*b),t.update(L,h,1)},this.renderInstances=function A(E,L,G){if(0===G)return;let j,k;if(l)j=v,k="drawElementsInstanced";else if(j=e.get("ANGLE_instanced_arrays"),k="drawElementsInstancedANGLE",null===j)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");j[k](h,L,_,E*b,G),t.update(L,h,G)}}function n_(v){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function l(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function s(h,g,_){switch(t.calls++,g){case 4:t.triangles+=_*(h/3);break;case 1:t.lines+=_*(h/2);break;case 3:t.lines+=_*(h-1);break;case 2:t.lines+=_*h;break;case 0:t.points+=_*h;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",g)}}}}function Pf(v,e){return v[0]-e[0]}function i_(v,e){return Math.abs(e[1])-Math.abs(v[1])}function yr(v,e,t){const s={},l=new Float32Array(8),h=new WeakMap,g=new qn,_=[];for(let x=0;x<8;x++)_[x]=[x,0];return{update:function b(x,S,A,E){const L=x.morphTargetInfluences;if(!0===e.isWebGL2){const G=S.morphAttributes.position||S.morphAttributes.normal||S.morphAttributes.color,j=void 0!==G?G.length:0;let k=h.get(S);if(void 0===k||k.count!==j){let ct=function(){He.dispose(),h.delete(S),S.removeEventListener("dispose",ct)};void 0!==k&&k.texture.dispose();const $=void 0!==S.morphAttributes.position,q=void 0!==S.morphAttributes.normal,se=void 0!==S.morphAttributes.color,de=S.morphAttributes.position||[],ge=S.morphAttributes.normal||[],X=S.morphAttributes.color||[];let fe=0;!0===$&&(fe=1),!0===q&&(fe=2),!0===se&&(fe=3);let Te=S.attributes.position.count*fe,Ye=1;Te>e.maxTextureSize&&(Ye=Math.ceil(Te/e.maxTextureSize),Te=e.maxTextureSize);const yt=new Float32Array(Te*Ye*4*j),He=new Zs(yt,Te,Ye,j);He.type=Ti,He.needsUpdate=!0;const Ae=4*fe;for(let Mt=0;Mt<j;Mt++){const Lt=de[Mt],vt=ge[Mt],jt=X[Mt],Rt=Te*Ye*4*Mt;for(let ot=0;ot<Lt.count;ot++){const lt=ot*Ae;!0===$&&(g.fromBufferAttribute(Lt,ot),yt[Rt+lt+0]=g.x,yt[Rt+lt+1]=g.y,yt[Rt+lt+2]=g.z,yt[Rt+lt+3]=0),!0===q&&(g.fromBufferAttribute(vt,ot),yt[Rt+lt+4]=g.x,yt[Rt+lt+5]=g.y,yt[Rt+lt+6]=g.z,yt[Rt+lt+7]=0),!0===se&&(g.fromBufferAttribute(jt,ot),yt[Rt+lt+8]=g.x,yt[Rt+lt+9]=g.y,yt[Rt+lt+10]=g.z,yt[Rt+lt+11]=4===jt.itemSize?g.w:1)}}k={count:j,texture:He,size:new ft(Te,Ye)},h.set(S,k),S.addEventListener("dispose",ct)}let J=0;for(let $=0;$<L.length;$++)J+=L[$];const K=S.morphTargetsRelative?1:1-J;E.getUniforms().setValue(v,"morphTargetBaseInfluence",K),E.getUniforms().setValue(v,"morphTargetInfluences",L),E.getUniforms().setValue(v,"morphTargetsTexture",k.texture,t),E.getUniforms().setValue(v,"morphTargetsTextureSize",k.size)}else{const G=void 0===L?0:L.length;let j=s[S.id];if(void 0===j||j.length!==G){j=[];for(let q=0;q<G;q++)j[q]=[q,0];s[S.id]=j}for(let q=0;q<G;q++){const se=j[q];se[0]=q,se[1]=L[q]}j.sort(i_);for(let q=0;q<8;q++)q<G&&j[q][1]?(_[q][0]=j[q][0],_[q][1]=j[q][1]):(_[q][0]=Number.MAX_SAFE_INTEGER,_[q][1]=0);_.sort(Pf);const k=S.morphAttributes.position,J=S.morphAttributes.normal;let K=0;for(let q=0;q<8;q++){const se=_[q],de=se[0],ge=se[1];de!==Number.MAX_SAFE_INTEGER&&ge?(k&&S.getAttribute("morphTarget"+q)!==k[de]&&S.setAttribute("morphTarget"+q,k[de]),J&&S.getAttribute("morphNormal"+q)!==J[de]&&S.setAttribute("morphNormal"+q,J[de]),l[q]=ge,K+=ge):(k&&!0===S.hasAttribute("morphTarget"+q)&&S.deleteAttribute("morphTarget"+q),J&&!0===S.hasAttribute("morphNormal"+q)&&S.deleteAttribute("morphNormal"+q),l[q]=0)}const $=S.morphTargetsRelative?1:1-K;E.getUniforms().setValue(v,"morphTargetBaseInfluence",$),E.getUniforms().setValue(v,"morphTargetInfluences",l)}}}}function am(v,e,t,s){let l=new WeakMap;function _(b){const x=b.target;x.removeEventListener("dispose",_),t.remove(x.instanceMatrix),null!==x.instanceColor&&t.remove(x.instanceColor)}return{update:function h(b){const x=s.render.frame,A=e.get(b,b.geometry);return l.get(A)!==x&&(e.update(A),l.set(A,x)),b.isInstancedMesh&&(!1===b.hasEventListener("dispose",_)&&b.addEventListener("dispose",_),t.update(b.instanceMatrix,34962),null!==b.instanceColor&&t.update(b.instanceColor,34962)),A},dispose:function g(){l=new WeakMap}}}const Of=new rr,ss=new Zs,rc=new wl,Nf=new ru,lm=[],cm=[],td=new Float32Array(16),nd=new Float32Array(9),r_=new Float32Array(4);function id(v,e,t){const s=v[0];if(s<=0||s>0)return v;const l=e*t;let h=lm[l];if(void 0===h&&(h=new Float32Array(l),lm[l]=h),0!==e){s.toArray(h,0);for(let g=1,_=0;g!==e;++g)_+=t,v[g].toArray(h,_)}return h}function Ur(v,e){if(v.length!==e.length)return!1;for(let t=0,s=v.length;t<s;t++)if(v[t]!==e[t])return!1;return!0}function os(v,e){for(let t=0,s=e.length;t<s;t++)v[t]=e[t]}function rd(v,e){let t=cm[e];void 0===t&&(t=new Int32Array(e),cm[e]=t);for(let s=0;s!==e;++s)t[s]=v.allocateTextureUnit();return t}function um(v,e){const t=this.cache;t[0]!==e&&(v.uniform1f(this.addr,e),t[0]=e)}function dm(v,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(v.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ur(t,e))return;v.uniform2fv(this.addr,e),os(t,e)}}function s_(v,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(v.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(void 0!==e.r)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(v.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Ur(t,e))return;v.uniform3fv(this.addr,e),os(t,e)}}function ch(v,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(v.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ur(t,e))return;v.uniform4fv(this.addr,e),os(t,e)}}function hm(v,e){const t=this.cache,s=e.elements;if(void 0===s){if(Ur(t,e))return;v.uniformMatrix2fv(this.addr,!1,e),os(t,e)}else{if(Ur(t,s))return;r_.set(s),v.uniformMatrix2fv(this.addr,!1,r_),os(t,s)}}function sd(v,e){const t=this.cache,s=e.elements;if(void 0===s){if(Ur(t,e))return;v.uniformMatrix3fv(this.addr,!1,e),os(t,e)}else{if(Ur(t,s))return;nd.set(s),v.uniformMatrix3fv(this.addr,!1,nd),os(t,s)}}function Ff(v,e){const t=this.cache,s=e.elements;if(void 0===s){if(Ur(t,e))return;v.uniformMatrix4fv(this.addr,!1,e),os(t,e)}else{if(Ur(t,s))return;td.set(s),v.uniformMatrix4fv(this.addr,!1,td),os(t,s)}}function Mv(v,e){const t=this.cache;t[0]!==e&&(v.uniform1i(this.addr,e),t[0]=e)}function Il(v,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(v.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ur(t,e))return;v.uniform2iv(this.addr,e),os(t,e)}}function o_(v,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(v.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Ur(t,e))return;v.uniform3iv(this.addr,e),os(t,e)}}function od(v,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(v.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ur(t,e))return;v.uniform4iv(this.addr,e),os(t,e)}}function Ec(v,e){const t=this.cache;t[0]!==e&&(v.uniform1ui(this.addr,e),t[0]=e)}function fm(v,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(v.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ur(t,e))return;v.uniform2uiv(this.addr,e),os(t,e)}}function Ac(v,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(v.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Ur(t,e))return;v.uniform3uiv(this.addr,e),os(t,e)}}function a_(v,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(v.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ur(t,e))return;v.uniform4uiv(this.addr,e),os(t,e)}}function xi(v,e,t){const s=this.cache,l=t.allocateTextureUnit();s[0]!==l&&(v.uniform1i(this.addr,l),s[0]=l),t.setTexture2D(e||Of,l)}function uh(v,e,t){const s=this.cache,l=t.allocateTextureUnit();s[0]!==l&&(v.uniform1i(this.addr,l),s[0]=l),t.setTexture3D(e||rc,l)}function Lf(v,e,t){const s=this.cache,l=t.allocateTextureUnit();s[0]!==l&&(v.uniform1i(this.addr,l),s[0]=l),t.setTextureCube(e||Nf,l)}function Bf(v,e,t){const s=this.cache,l=t.allocateTextureUnit();s[0]!==l&&(v.uniform1i(this.addr,l),s[0]=l),t.setTexture2DArray(e||ss,l)}function Ic(v,e){v.uniform1fv(this.addr,e)}function jf(v,e){const t=id(e,this.size,2);v.uniform2fv(this.addr,t)}function ad(v,e){const t=id(e,this.size,3);v.uniform3fv(this.addr,t)}function dh(v,e){const t=id(e,this.size,4);v.uniform4fv(this.addr,t)}function hh(v,e){const t=id(e,this.size,4);v.uniformMatrix2fv(this.addr,!1,t)}function kf(v,e){const t=id(e,this.size,9);v.uniformMatrix3fv(this.addr,!1,t)}function pu(v,e){const t=id(e,this.size,16);v.uniformMatrix4fv(this.addr,!1,t)}function l_(v,e){v.uniform1iv(this.addr,e)}function pm(v,e){v.uniform2iv(this.addr,e)}function mm(v,e){v.uniform3iv(this.addr,e)}function fh(v,e){v.uniform4iv(this.addr,e)}function gm(v,e){v.uniform1uiv(this.addr,e)}function _m(v,e){v.uniform2uiv(this.addr,e)}function c_(v,e){v.uniform3uiv(this.addr,e)}function vm(v,e){v.uniform4uiv(this.addr,e)}function xv(v,e,t){const s=this.cache,l=e.length,h=rd(t,l);Ur(s,h)||(v.uniform1iv(this.addr,h),os(s,h));for(let g=0;g!==l;++g)t.setTexture2D(e[g]||Of,h[g])}function u_(v,e,t){const s=this.cache,l=e.length,h=rd(t,l);Ur(s,h)||(v.uniform1iv(this.addr,h),os(s,h));for(let g=0;g!==l;++g)t.setTexture3D(e[g]||rc,h[g])}function ld(v,e,t){const s=this.cache,l=e.length,h=rd(t,l);Ur(s,h)||(v.uniform1iv(this.addr,h),os(s,h));for(let g=0;g!==l;++g)t.setTextureCube(e[g]||Nf,h[g])}function d_(v,e,t){const s=this.cache,l=e.length,h=rd(t,l);Ur(s,h)||(v.uniform1iv(this.addr,h),os(s,h));for(let g=0;g!==l;++g)t.setTexture2DArray(e[g]||ss,h[g])}class cd{constructor(e,t,s){this.id=e,this.addr=s,this.cache=[],this.setValue=function fu(v){switch(v){case 5126:return um;case 35664:return dm;case 35665:return s_;case 35666:return ch;case 35674:return hm;case 35675:return sd;case 35676:return Ff;case 5124:case 35670:return Mv;case 35667:case 35671:return Il;case 35668:case 35672:return o_;case 35669:case 35673:return od;case 5125:return Ec;case 36294:return fm;case 36295:return Ac;case 36296:return a_;case 35678:case 36198:case 36298:case 36306:case 35682:return xi;case 35679:case 36299:case 36307:return uh;case 35680:case 36300:case 36308:case 36293:return Lf;case 36289:case 36303:case 36311:case 36292:return Bf}}(t.type)}}class h_{constructor(e,t,s){this.id=e,this.addr=s,this.cache=[],this.size=t.size,this.setValue=function mu(v){switch(v){case 5126:return Ic;case 35664:return jf;case 35665:return ad;case 35666:return dh;case 35674:return hh;case 35675:return kf;case 35676:return pu;case 5124:case 35670:return l_;case 35667:case 35671:return pm;case 35668:case 35672:return mm;case 35669:case 35673:return fh;case 5125:return gm;case 36294:return _m;case 36295:return c_;case 36296:return vm;case 35678:case 36198:case 36298:case 36306:case 35682:return xv;case 35679:case 36299:case 36307:return u_;case 35680:case 36300:case 36308:case 36293:return ld;case 36289:case 36303:case 36311:case 36292:return d_}}(t.type)}}class Gf{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,s){const l=this.seq;for(let h=0,g=l.length;h!==g;++h){const _=l[h];_.setValue(e,t[_.id],s)}}}const ph=/(\w+)(\])?(\[|\.)?/g;function Vf(v,e){v.seq.push(e),v.map[e.id]=e}function ym(v,e,t){const s=v.name,l=s.length;for(ph.lastIndex=0;;){const h=ph.exec(s);let _=h[1];const x=h[3];if("]"===h[2]&&(_|=0),void 0===x||"["===x&&ph.lastIndex+2===l){Vf(t,void 0===x?new cd(_,v,e):new h_(_,v,e));break}{let A=t.map[_];void 0===A&&(A=new Gf(_),Vf(t,A)),t=A}}}class gu{constructor(e,t){this.seq=[],this.map={};const s=e.getProgramParameter(t,35718);for(let l=0;l<s;++l){const h=e.getActiveUniform(t,l);ym(h,e.getUniformLocation(t,h.name),this)}}setValue(e,t,s,l){const h=this.map[t];void 0!==h&&h.setValue(e,s,l)}setOptional(e,t,s){const l=t[s];void 0!==l&&this.setValue(e,s,l)}static upload(e,t,s,l){for(let h=0,g=t.length;h!==g;++h){const _=t[h],b=s[_.id];!1!==b.needsUpdate&&_.setValue(e,b.value,l)}}static seqWithValue(e,t){const s=[];for(let l=0,h=e.length;l!==h;++l){const g=e[l];g.id in t&&s.push(g)}return s}}function bm(v,e,t){const s=v.createShader(e);return v.shaderSource(s,t),v.compileShader(s),s}let mh=0;function Hf(v,e,t){const s=v.getShaderParameter(e,35713),l=v.getShaderInfoLog(e).trim();if(s&&""===l)return"";const h=/ERROR: 0:(\d+)/.exec(l);if(h){const g=parseInt(h[1]);return t.toUpperCase()+"\n\n"+l+"\n\n"+function Uf(v,e){const t=v.split("\n"),s=[],l=Math.max(e-6,0),h=Math.min(e+6,t.length);for(let g=l;g<h;g++){const _=g+1;s.push(`${_===e?">":" "} ${_}: ${t[g]}`)}return s.join("\n")}(v.getShaderSource(e),g)}return l}function gh(v,e){const t=function f_(v){switch(v){case ps:return["Linear","( value )"];case Mi:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",v),["Linear","( value )"]}}(e);return"vec4 "+v+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function Dv(v,e){let t;switch(e){case ja:t="Linear";break;case Wr:t="Reinhard";break;case va:t="OptimizedCineon";break;case Pr:t="ACESFilmic";break;case jo:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+v+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function _h(v){return""!==v}function p_(v,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return v.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function m_(v,e){return v.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const ud=/^[ \t]*#include +<([\w\d./]+)>/gm;function sl(v){return v.replace(ud,Cv)}function Cv(v,e){const t=ii[e];if(void 0===t)throw new Error("Can not resolve #include <"+e+">");return sl(t)}const Ev=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function g_(v){return v.replace(Ev,Sy)}function Sy(v,e,t,s){let l="";for(let h=parseInt(e);h<parseInt(t);h++)l+=s.replace(/\[\s*i\s*\]/g,"[ "+h+" ]").replace(/UNROLLED_LOOP_INDEX/g,h);return l}function Tm(v){let e="precision "+v.precision+" float;\nprecision "+v.precision+" int;";return"highp"===v.precision?e+="\n#define HIGH_PRECISION":"mediump"===v.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===v.precision&&(e+="\n#define LOW_PRECISION"),e}function Iv(v,e,t,s){const l=v.getContext(),h=t.defines;let g=t.vertexShader,_=t.fragmentShader;const b=function Cy(v){let e="SHADOWMAP_TYPE_BASIC";return v.shadowMapType===Pe?e="SHADOWMAP_TYPE_PCF":v.shadowMapType===Oe?e="SHADOWMAP_TYPE_PCF_SOFT":v.shadowMapType===Ke&&(e="SHADOWMAP_TYPE_VSM"),e}(t),x=function __(v){let e="ENVMAP_TYPE_CUBE";if(v.envMap)switch(v.envMapMode){case Pi:case Or:e="ENVMAP_TYPE_CUBE";break;case Us:e="ENVMAP_TYPE_CUBE_UV"}return e}(t),S=function v_(v){let e="ENVMAP_MODE_REFLECTION";return v.envMap&&v.envMapMode===Or&&(e="ENVMAP_MODE_REFRACTION"),e}(t),A=function Av(v){let e="ENVMAP_BLENDING_NONE";if(v.envMap)switch(v.combine){case Mn:e="ENVMAP_BLENDING_MULTIPLY";break;case Ir:e="ENVMAP_BLENDING_MIX";break;case Ei:e="ENVMAP_BLENDING_ADD"}return e}(t),E=function zf(v){const e=v.envMapCubeUVHeight;if(null===e)return null;const t=Math.log2(e)-2,s=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:s,maxMip:t}}(t),L=t.isWebGL2?"":function wv(v){return[v.extensionDerivatives||v.envMapCubeUVHeight||v.bumpMap||v.tangentSpaceNormalMap||v.clearcoatNormalMap||v.flatShading||"physical"===v.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(v.extensionFragDepth||v.logarithmicDepthBuffer)&&v.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",v.extensionDrawBuffers&&v.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(v.extensionShaderTextureLOD||v.envMap||v.transmission)&&v.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(_h).join("\n")}(t),G=function Rv(v){const e=[];for(const t in v){const s=v[t];!1!==s&&e.push("#define "+t+" "+s)}return e.join("\n")}(h),j=l.createProgram();let k,J,K=t.glslVersion?"#version "+t.glslVersion+"\n":"";t.isRawShaderMaterial?(k=[G].filter(_h).join("\n"),k.length>0&&(k+="\n"),J=[L,G].filter(_h).join("\n"),J.length>0&&(J+="\n")):(k=[Tm(t),"#define SHADER_NAME "+t.shaderName,G,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+S:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&!1===t.flatShading?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+b:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(_h).join("\n"),J=[L,Tm(t),"#define SHADER_NAME "+t.shaderName,G,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+x:"",t.envMap?"#define "+S:"",t.envMap?"#define "+A:"",E?"#define CUBEUV_TEXEL_WIDTH "+E.texelWidth:"",E?"#define CUBEUV_TEXEL_HEIGHT "+E.texelHeight:"",E?"#define CUBEUV_MAX_MIP "+E.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+b:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==lr?"#define TONE_MAPPING":"",t.toneMapping!==lr?ii.tonemapping_pars_fragment:"",t.toneMapping!==lr?Dv("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",ii.encodings_pars_fragment,gh("linearToOutputTexel",t.outputEncoding),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"","\n"].filter(_h).join("\n")),g=sl(g),g=p_(g,t),g=m_(g,t),_=sl(_),_=p_(_,t),_=m_(_,t),g=g_(g),_=g_(_),t.isWebGL2&&!0!==t.isRawShaderMaterial&&(K="#version 300 es\n",k=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+k,J=["#define varying in",t.glslVersion===Vd?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===Vd?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+J);const q=K+J+_,se=bm(l,35633,K+k+g),de=bm(l,35632,q);if(l.attachShader(j,se),l.attachShader(j,de),void 0!==t.index0AttributeName?l.bindAttribLocation(j,0,t.index0AttributeName):!0===t.morphTargets&&l.bindAttribLocation(j,0,"position"),l.linkProgram(j),v.debug.checkShaderErrors){const fe=l.getProgramInfoLog(j).trim(),Te=l.getShaderInfoLog(se).trim(),Ye=l.getShaderInfoLog(de).trim();let yt=!0,He=!0;if(!1===l.getProgramParameter(j,35714)){yt=!1;const Ae=Hf(l,se,"vertex"),ct=Hf(l,de,"fragment");console.error("THREE.WebGLProgram: Shader Error "+l.getError()+" - VALIDATE_STATUS "+l.getProgramParameter(j,35715)+"\n\nProgram Info Log: "+fe+"\n"+Ae+"\n"+ct)}else""!==fe?console.warn("THREE.WebGLProgram: Program Info Log:",fe):(""===Te||""===Ye)&&(He=!1);He&&(this.diagnostics={runnable:yt,programLog:fe,vertexShader:{log:Te,prefix:k},fragmentShader:{log:Ye,prefix:J}})}let ge,X;return l.deleteShader(se),l.deleteShader(de),this.getUniforms=function(){return void 0===ge&&(ge=new gu(l,j)),ge},this.getAttributes=function(){return void 0===X&&(X=function Sv(v,e){const t={},s=v.getProgramParameter(e,35721);for(let l=0;l<s;l++){const h=v.getActiveAttrib(e,l),g=h.name;let _=1;35674===h.type&&(_=2),35675===h.type&&(_=3),35676===h.type&&(_=4),t[g]={type:h.type,location:v.getAttribLocation(e,g),locationSize:_}}return t}(l,j)),X},this.destroy=function(){s.releaseStatesOfProgram(this),l.deleteProgram(j),this.program=void 0},this.name=t.shaderName,this.id=mh++,this.cacheKey=e,this.usedTimes=1,this.program=j,this.vertexShader=se,this.fragmentShader=de,this}let Pa=0;class Fi{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const s=e.fragmentShader,l=this._getShaderStage(e.vertexShader),h=this._getShaderStage(s),g=this._getShaderCacheForMaterial(e);return!1===g.has(l)&&(g.add(l),l.usedTimes++),!1===g.has(h)&&(g.add(h),h.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const s of t)s.usedTimes--,0===s.usedTimes&&this.shaderCache.delete(s.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let s=t.get(e);return void 0===s&&(s=new Set,t.set(e,s)),s}_getShaderStage(e){const t=this.shaderCache;let s=t.get(e);return void 0===s&&(s=new Wf(e),t.set(e,s)),s}}class Wf{constructor(e){this.id=Pa++,this.code=e,this.usedTimes=0}}function $f(v,e,t,s,l,h,g){const _=new Yt,b=new Fi,x=[],S=l.isWebGL2,A=l.logarithmicDepthBuffer,E=l.vertexTextures;let L=l.precision;const G={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function j(X,fe,Te,Ye,yt){const He=Ye.fog,Ae=yt.geometry,Mt=(X.isMeshStandardMaterial?t:e).get(X.envMap||(X.isMeshStandardMaterial?Ye.environment:null)),Lt=Mt&&Mt.mapping===Us?Mt.image.height:null,vt=G[X.type];null!==X.precision&&(L=l.getMaxPrecision(X.precision),L!==X.precision&&console.warn("THREE.WebGLProgram.getParameters:",X.precision,"not supported, using",L,"instead."));const jt=Ae.morphAttributes.position||Ae.morphAttributes.normal||Ae.morphAttributes.color,Rt=void 0!==jt?jt.length:0;let lt,Jt,Wt,an,ot=0;if(void 0!==Ae.morphAttributes.position&&(ot=1),void 0!==Ae.morphAttributes.normal&&(ot=2),void 0!==Ae.morphAttributes.color&&(ot=3),vt){const Ci=Ia[vt];lt=Ci.vertexShader,Jt=Ci.fragmentShader}else lt=X.vertexShader,Jt=X.fragmentShader,b.update(X),Wt=b.getVertexShaderID(X),an=b.getFragmentShaderID(X);const pt=v.getRenderTarget(),bn=X.clearcoat>0,ei=X.iridescence>0;return{isWebGL2:S,shaderID:vt,shaderName:X.type,vertexShader:lt,fragmentShader:Jt,defines:X.defines,customVertexShaderID:Wt,customFragmentShaderID:an,isRawShaderMaterial:!0===X.isRawShaderMaterial,glslVersion:X.glslVersion,precision:L,instancing:!0===yt.isInstancedMesh,instancingColor:!0===yt.isInstancedMesh&&null!==yt.instanceColor,supportsVertexTextures:E,outputEncoding:null===pt?v.outputEncoding:!0===pt.isXRRenderTarget?pt.texture.encoding:ps,map:!!X.map,matcap:!!X.matcap,envMap:!!Mt,envMapMode:Mt&&Mt.mapping,envMapCubeUVHeight:Lt,lightMap:!!X.lightMap,aoMap:!!X.aoMap,emissiveMap:!!X.emissiveMap,bumpMap:!!X.bumpMap,normalMap:!!X.normalMap,objectSpaceNormalMap:X.normalMapType===ml,tangentSpaceNormalMap:X.normalMapType===Mo,decodeVideoTexture:!!X.map&&!0===X.map.isVideoTexture&&X.map.encoding===Mi,clearcoat:bn,clearcoatMap:bn&&!!X.clearcoatMap,clearcoatRoughnessMap:bn&&!!X.clearcoatRoughnessMap,clearcoatNormalMap:bn&&!!X.clearcoatNormalMap,iridescence:ei,iridescenceMap:ei&&!!X.iridescenceMap,iridescenceThicknessMap:ei&&!!X.iridescenceThicknessMap,displacementMap:!!X.displacementMap,roughnessMap:!!X.roughnessMap,metalnessMap:!!X.metalnessMap,specularMap:!!X.specularMap,specularIntensityMap:!!X.specularIntensityMap,specularColorMap:!!X.specularColorMap,opaque:!1===X.transparent&&X.blending===It,alphaMap:!!X.alphaMap,alphaTest:X.alphaTest>0,gradientMap:!!X.gradientMap,sheen:X.sheen>0,sheenColorMap:!!X.sheenColorMap,sheenRoughnessMap:!!X.sheenRoughnessMap,transmission:X.transmission>0,transmissionMap:!!X.transmissionMap,thicknessMap:!!X.thicknessMap,combine:X.combine,vertexTangents:!!X.normalMap&&!!Ae.attributes.tangent,vertexColors:X.vertexColors,vertexAlphas:!0===X.vertexColors&&!!Ae.attributes.color&&4===Ae.attributes.color.itemSize,vertexUvs:!!(X.map||X.bumpMap||X.normalMap||X.specularMap||X.alphaMap||X.emissiveMap||X.roughnessMap||X.metalnessMap||X.clearcoatMap||X.clearcoatRoughnessMap||X.clearcoatNormalMap||X.iridescenceMap||X.iridescenceThicknessMap||X.displacementMap||X.transmissionMap||X.thicknessMap||X.specularIntensityMap||X.specularColorMap||X.sheenColorMap||X.sheenRoughnessMap),uvsVertexOnly:!(X.map||X.bumpMap||X.normalMap||X.specularMap||X.alphaMap||X.emissiveMap||X.roughnessMap||X.metalnessMap||X.clearcoatNormalMap||X.iridescenceMap||X.iridescenceThicknessMap||X.transmission>0||X.transmissionMap||X.thicknessMap||X.specularIntensityMap||X.specularColorMap||X.sheen>0||X.sheenColorMap||X.sheenRoughnessMap||!X.displacementMap),fog:!!He,useFog:!0===X.fog,fogExp2:He&&He.isFogExp2,flatShading:!!X.flatShading,sizeAttenuation:X.sizeAttenuation,logarithmicDepthBuffer:A,skinning:!0===yt.isSkinnedMesh,morphTargets:void 0!==Ae.morphAttributes.position,morphNormals:void 0!==Ae.morphAttributes.normal,morphColors:void 0!==Ae.morphAttributes.color,morphTargetsCount:Rt,morphTextureStride:ot,numDirLights:fe.directional.length,numPointLights:fe.point.length,numSpotLights:fe.spot.length,numSpotLightMaps:fe.spotLightMap.length,numRectAreaLights:fe.rectArea.length,numHemiLights:fe.hemi.length,numDirLightShadows:fe.directionalShadowMap.length,numPointLightShadows:fe.pointShadowMap.length,numSpotLightShadows:fe.spotShadowMap.length,numSpotLightShadowsWithMaps:fe.numSpotLightShadowsWithMaps,numClippingPlanes:g.numPlanes,numClipIntersection:g.numIntersection,dithering:X.dithering,shadowMapEnabled:v.shadowMap.enabled&&Te.length>0,shadowMapType:v.shadowMap.type,toneMapping:X.toneMapped?v.toneMapping:lr,physicallyCorrectLights:v.physicallyCorrectLights,premultipliedAlpha:X.premultipliedAlpha,doubleSided:X.side===Ct,flipSided:X.side===et,useDepthPacking:!!X.depthPacking,depthPacking:X.depthPacking||0,index0AttributeName:X.index0AttributeName,extensionDerivatives:X.extensions&&X.extensions.derivatives,extensionFragDepth:X.extensions&&X.extensions.fragDepth,extensionDrawBuffers:X.extensions&&X.extensions.drawBuffers,extensionShaderTextureLOD:X.extensions&&X.extensions.shaderTextureLOD,rendererExtensionFragDepth:S||s.has("EXT_frag_depth"),rendererExtensionDrawBuffers:S||s.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:S||s.has("EXT_shader_texture_lod"),customProgramCacheKey:X.customProgramCacheKey()}},getProgramCacheKey:function k(X){const fe=[];if(X.shaderID?fe.push(X.shaderID):(fe.push(X.customVertexShaderID),fe.push(X.customFragmentShaderID)),void 0!==X.defines)for(const Te in X.defines)fe.push(Te),fe.push(X.defines[Te]);return!1===X.isRawShaderMaterial&&(function J(X,fe){X.push(fe.precision),X.push(fe.outputEncoding),X.push(fe.envMapMode),X.push(fe.envMapCubeUVHeight),X.push(fe.combine),X.push(fe.vertexUvs),X.push(fe.fogExp2),X.push(fe.sizeAttenuation),X.push(fe.morphTargetsCount),X.push(fe.morphAttributeCount),X.push(fe.numDirLights),X.push(fe.numPointLights),X.push(fe.numSpotLights),X.push(fe.numSpotLightMaps),X.push(fe.numHemiLights),X.push(fe.numRectAreaLights),X.push(fe.numDirLightShadows),X.push(fe.numPointLightShadows),X.push(fe.numSpotLightShadows),X.push(fe.numSpotLightShadowsWithMaps),X.push(fe.shadowMapType),X.push(fe.toneMapping),X.push(fe.numClippingPlanes),X.push(fe.numClipIntersection),X.push(fe.depthPacking)}(fe,X),function K(X,fe){_.disableAll(),fe.isWebGL2&&_.enable(0),fe.supportsVertexTextures&&_.enable(1),fe.instancing&&_.enable(2),fe.instancingColor&&_.enable(3),fe.map&&_.enable(4),fe.matcap&&_.enable(5),fe.envMap&&_.enable(6),fe.lightMap&&_.enable(7),fe.aoMap&&_.enable(8),fe.emissiveMap&&_.enable(9),fe.bumpMap&&_.enable(10),fe.normalMap&&_.enable(11),fe.objectSpaceNormalMap&&_.enable(12),fe.tangentSpaceNormalMap&&_.enable(13),fe.clearcoat&&_.enable(14),fe.clearcoatMap&&_.enable(15),fe.clearcoatRoughnessMap&&_.enable(16),fe.clearcoatNormalMap&&_.enable(17),fe.iridescence&&_.enable(18),fe.iridescenceMap&&_.enable(19),fe.iridescenceThicknessMap&&_.enable(20),fe.displacementMap&&_.enable(21),fe.specularMap&&_.enable(22),fe.roughnessMap&&_.enable(23),fe.metalnessMap&&_.enable(24),fe.gradientMap&&_.enable(25),fe.alphaMap&&_.enable(26),fe.alphaTest&&_.enable(27),fe.vertexColors&&_.enable(28),fe.vertexAlphas&&_.enable(29),fe.vertexUvs&&_.enable(30),fe.vertexTangents&&_.enable(31),fe.uvsVertexOnly&&_.enable(32),X.push(_.mask),_.disableAll(),fe.fog&&_.enable(0),fe.useFog&&_.enable(1),fe.flatShading&&_.enable(2),fe.logarithmicDepthBuffer&&_.enable(3),fe.skinning&&_.enable(4),fe.morphTargets&&_.enable(5),fe.morphNormals&&_.enable(6),fe.morphColors&&_.enable(7),fe.premultipliedAlpha&&_.enable(8),fe.shadowMapEnabled&&_.enable(9),fe.physicallyCorrectLights&&_.enable(10),fe.doubleSided&&_.enable(11),fe.flipSided&&_.enable(12),fe.useDepthPacking&&_.enable(13),fe.dithering&&_.enable(14),fe.specularIntensityMap&&_.enable(15),fe.specularColorMap&&_.enable(16),fe.transmission&&_.enable(17),fe.transmissionMap&&_.enable(18),fe.thicknessMap&&_.enable(19),fe.sheen&&_.enable(20),fe.sheenColorMap&&_.enable(21),fe.sheenRoughnessMap&&_.enable(22),fe.decodeVideoTexture&&_.enable(23),fe.opaque&&_.enable(24),X.push(_.mask)}(fe,X),fe.push(v.outputEncoding)),fe.push(X.customProgramCacheKey),fe.join()},getUniforms:function $(X){const fe=G[X.type];let Te;return Te=fe?rt.clone(Ia[fe].uniforms):X.uniforms,Te},acquireProgram:function q(X,fe){let Te;for(let Ye=0,yt=x.length;Ye<yt;Ye++){const He=x[Ye];if(He.cacheKey===fe){Te=He,++Te.usedTimes;break}}return void 0===Te&&(Te=new Iv(v,fe,X,h),x.push(Te)),Te},releaseProgram:function se(X){if(0==--X.usedTimes){const fe=x.indexOf(X);x[fe]=x[x.length-1],x.pop(),X.destroy()}},releaseShaderCache:function de(X){b.remove(X)},programs:x,dispose:function ge(){b.dispose()}}}function Yf(){let v=new WeakMap;return{get:function e(h){let g=v.get(h);return void 0===g&&(g={},v.set(h,g)),g},remove:function t(h){v.delete(h)},update:function s(h,g,_){v.get(h)[g]=_},dispose:function l(){v=new WeakMap}}}function y_(v,e){return v.groupOrder!==e.groupOrder?v.groupOrder-e.groupOrder:v.renderOrder!==e.renderOrder?v.renderOrder-e.renderOrder:v.material.id!==e.material.id?v.material.id-e.material.id:v.z!==e.z?v.z-e.z:v.id-e.id}function Mm(v,e){return v.groupOrder!==e.groupOrder?v.groupOrder-e.groupOrder:v.renderOrder!==e.renderOrder?v.renderOrder-e.renderOrder:v.z!==e.z?e.z-v.z:v.id-e.id}function vh(){const v=[];let e=0;const t=[],s=[],l=[];function g(A,E,L,G,j,k){let J=v[e];return void 0===J?(J={id:A.id,object:A,geometry:E,material:L,groupOrder:G,renderOrder:A.renderOrder,z:j,group:k},v[e]=J):(J.id=A.id,J.object=A,J.geometry=E,J.material=L,J.groupOrder=G,J.renderOrder=A.renderOrder,J.z=j,J.group=k),e++,J}return{opaque:t,transmissive:s,transparent:l,init:function h(){e=0,t.length=0,s.length=0,l.length=0},push:function _(A,E,L,G,j,k){const J=g(A,E,L,G,j,k);L.transmission>0?s.push(J):!0===L.transparent?l.push(J):t.push(J)},unshift:function b(A,E,L,G,j,k){const J=g(A,E,L,G,j,k);L.transmission>0?s.unshift(J):!0===L.transparent?l.unshift(J):t.unshift(J)},finish:function S(){for(let A=e,E=v.length;A<E;A++){const L=v[A];if(null===L.id)break;L.id=null,L.object=null,L.geometry=null,L.material=null,L.group=null}},sort:function x(A,E){t.length>1&&t.sort(A||y_),s.length>1&&s.sort(E||Mm),l.length>1&&l.sort(E||Mm)}}}function b_(){let v=new WeakMap;return{get:function e(s,l){const h=v.get(s);let g;return void 0===h?(g=new vh,v.set(s,[g])):l>=h.length?(g=new vh,h.push(g)):g=h[l],g},dispose:function t(){v=new WeakMap}}}function dd(){const v={};return{get:function(e){if(void 0!==v[e.id])return v[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new le,color:new $t};break;case"SpotLight":t={position:new le,direction:new le,color:new $t,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new le,color:new $t,distance:0,decay:0};break;case"HemisphereLight":t={direction:new le,skyColor:new $t,groundColor:new $t};break;case"RectAreaLight":t={color:new $t,position:new le,halfWidth:new le,halfHeight:new le}}return v[e.id]=t,t}}}let xm=0;function ri(v,e){return(e.castShadow?2:0)-(v.castShadow?2:0)+(e.map?1:0)-(v.map?1:0)}function Dm(v,e){const t=new dd,s=function yh(){const v={};return{get:function(e){if(void 0!==v[e.id])return v[e.id];let t;switch(e.type){case"DirectionalLight":case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ft};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ft,shadowCameraNear:1,shadowCameraFar:1e3}}return v[e.id]=t,t}}}(),l={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let S=0;S<9;S++)l.probe.push(new le);const h=new le,g=new Vt,_=new Vt;return{setup:function b(S,A){let E=0,L=0,G=0;for(let Ye=0;Ye<9;Ye++)l.probe[Ye].set(0,0,0);let j=0,k=0,J=0,K=0,$=0,q=0,se=0,de=0,ge=0,X=0;S.sort(ri);const fe=!0!==A?Math.PI:1;for(let Ye=0,yt=S.length;Ye<yt;Ye++){const He=S[Ye],Ae=He.color,ct=He.intensity,Mt=He.distance,Lt=He.shadow&&He.shadow.map?He.shadow.map.texture:null;if(He.isAmbientLight)E+=Ae.r*ct*fe,L+=Ae.g*ct*fe,G+=Ae.b*ct*fe;else if(He.isLightProbe)for(let vt=0;vt<9;vt++)l.probe[vt].addScaledVector(He.sh.coefficients[vt],ct);else if(He.isDirectionalLight){const vt=t.get(He);if(vt.color.copy(He.color).multiplyScalar(He.intensity*fe),He.castShadow){const jt=He.shadow,Rt=s.get(He);Rt.shadowBias=jt.bias,Rt.shadowNormalBias=jt.normalBias,Rt.shadowRadius=jt.radius,Rt.shadowMapSize=jt.mapSize,l.directionalShadow[j]=Rt,l.directionalShadowMap[j]=Lt,l.directionalShadowMatrix[j]=He.shadow.matrix,q++}l.directional[j]=vt,j++}else if(He.isSpotLight){const vt=t.get(He);vt.position.setFromMatrixPosition(He.matrixWorld),vt.color.copy(Ae).multiplyScalar(ct*fe),vt.distance=Mt,vt.coneCos=Math.cos(He.angle),vt.penumbraCos=Math.cos(He.angle*(1-He.penumbra)),vt.decay=He.decay,l.spot[J]=vt;const jt=He.shadow;if(He.map&&(l.spotLightMap[ge]=He.map,ge++,jt.updateMatrices(He),He.castShadow&&X++),l.spotLightMatrix[J]=jt.matrix,He.castShadow){const Rt=s.get(He);Rt.shadowBias=jt.bias,Rt.shadowNormalBias=jt.normalBias,Rt.shadowRadius=jt.radius,Rt.shadowMapSize=jt.mapSize,l.spotShadow[J]=Rt,l.spotShadowMap[J]=Lt,de++}J++}else if(He.isRectAreaLight){const vt=t.get(He);vt.color.copy(Ae).multiplyScalar(ct),vt.halfWidth.set(.5*He.width,0,0),vt.halfHeight.set(0,.5*He.height,0),l.rectArea[K]=vt,K++}else if(He.isPointLight){const vt=t.get(He);if(vt.color.copy(He.color).multiplyScalar(He.intensity*fe),vt.distance=He.distance,vt.decay=He.decay,He.castShadow){const jt=He.shadow,Rt=s.get(He);Rt.shadowBias=jt.bias,Rt.shadowNormalBias=jt.normalBias,Rt.shadowRadius=jt.radius,Rt.shadowMapSize=jt.mapSize,Rt.shadowCameraNear=jt.camera.near,Rt.shadowCameraFar=jt.camera.far,l.pointShadow[k]=Rt,l.pointShadowMap[k]=Lt,l.pointShadowMatrix[k]=He.shadow.matrix,se++}l.point[k]=vt,k++}else if(He.isHemisphereLight){const vt=t.get(He);vt.skyColor.copy(He.color).multiplyScalar(ct*fe),vt.groundColor.copy(He.groundColor).multiplyScalar(ct*fe),l.hemi[$]=vt,$++}}K>0&&(e.isWebGL2||!0===v.has("OES_texture_float_linear")?(l.rectAreaLTC1=Qt.LTC_FLOAT_1,l.rectAreaLTC2=Qt.LTC_FLOAT_2):!0===v.has("OES_texture_half_float_linear")?(l.rectAreaLTC1=Qt.LTC_HALF_1,l.rectAreaLTC2=Qt.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),l.ambient[0]=E,l.ambient[1]=L,l.ambient[2]=G;const Te=l.hash;(Te.directionalLength!==j||Te.pointLength!==k||Te.spotLength!==J||Te.rectAreaLength!==K||Te.hemiLength!==$||Te.numDirectionalShadows!==q||Te.numPointShadows!==se||Te.numSpotShadows!==de||Te.numSpotMaps!==ge)&&(l.directional.length=j,l.spot.length=J,l.rectArea.length=K,l.point.length=k,l.hemi.length=$,l.directionalShadow.length=q,l.directionalShadowMap.length=q,l.pointShadow.length=se,l.pointShadowMap.length=se,l.spotShadow.length=de,l.spotShadowMap.length=de,l.directionalShadowMatrix.length=q,l.pointShadowMatrix.length=se,l.spotLightMatrix.length=de+ge-X,l.spotLightMap.length=ge,l.numSpotLightShadowsWithMaps=X,Te.directionalLength=j,Te.pointLength=k,Te.spotLength=J,Te.rectAreaLength=K,Te.hemiLength=$,Te.numDirectionalShadows=q,Te.numPointShadows=se,Te.numSpotShadows=de,Te.numSpotMaps=ge,l.version=xm++)},setupView:function x(S,A){let E=0,L=0,G=0,j=0,k=0;const J=A.matrixWorldInverse;for(let K=0,$=S.length;K<$;K++){const q=S[K];if(q.isDirectionalLight){const se=l.directional[E];se.direction.setFromMatrixPosition(q.matrixWorld),h.setFromMatrixPosition(q.target.matrixWorld),se.direction.sub(h),se.direction.transformDirection(J),E++}else if(q.isSpotLight){const se=l.spot[G];se.position.setFromMatrixPosition(q.matrixWorld),se.position.applyMatrix4(J),se.direction.setFromMatrixPosition(q.matrixWorld),h.setFromMatrixPosition(q.target.matrixWorld),se.direction.sub(h),se.direction.transformDirection(J),G++}else if(q.isRectAreaLight){const se=l.rectArea[j];se.position.setFromMatrixPosition(q.matrixWorld),se.position.applyMatrix4(J),_.identity(),g.copy(q.matrixWorld),g.premultiply(J),_.extractRotation(g),se.halfWidth.set(.5*q.width,0,0),se.halfHeight.set(0,.5*q.height,0),se.halfWidth.applyMatrix4(_),se.halfHeight.applyMatrix4(_),j++}else if(q.isPointLight){const se=l.point[L];se.position.setFromMatrixPosition(q.matrixWorld),se.position.applyMatrix4(J),L++}else if(q.isHemisphereLight){const se=l.hemi[k];se.direction.setFromMatrixPosition(q.matrixWorld),se.direction.transformDirection(J),k++}}},state:l}}function Jf(v,e){const t=new Dm(v,e),s=[],l=[];return{init:function h(){s.length=0,l.length=0},state:{lightsArray:s,shadowsArray:l,lights:t},setupLights:function b(A){t.setup(s,A)},setupLightsView:function x(A){t.setupView(s,A)},pushLight:function g(A){s.push(A)},pushShadow:function _(A){l.push(A)}}}function wm(v,e){let t=new WeakMap;return{get:function s(h,g=0){const _=t.get(h);let b;return void 0===_?(b=new Jf(v,e),t.set(h,[b])):g>=_.length?(b=new Jf(v,e),_.push(b)):b=_[g],b},dispose:function l(){t=new WeakMap}}}class Pc extends jr{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class sc extends jr{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new le,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const _u="void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",bh="uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}";function Zf(v,e,t){let s=new Wd;const l=new ft,h=new ft,g=new qn,_=new Pc({depthPacking:zl}),b=new sc,x={},S=t.maxTextureSize,A={0:et,1:Xt,2:Ct},E=new Xn({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new ft},radius:{value:4}},vertexShader:_u,fragmentShader:bh}),L=E.clone();L.defines.HORIZONTAL_PASS=1;const G=new Kn;G.setAttribute("position",new ji(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const j=new w(G,E),k=this;function J(q,se){const de=e.update(j);E.defines.VSM_SAMPLES!==q.blurSamples&&(E.defines.VSM_SAMPLES=q.blurSamples,L.defines.VSM_SAMPLES=q.blurSamples,E.needsUpdate=!0,L.needsUpdate=!0),null===q.mapPass&&(q.mapPass=new la(l.x,l.y)),E.uniforms.shadow_pass.value=q.map.texture,E.uniforms.resolution.value=q.mapSize,E.uniforms.radius.value=q.radius,v.setRenderTarget(q.mapPass),v.clear(),v.renderBufferDirect(se,null,de,E,j,null),L.uniforms.shadow_pass.value=q.mapPass.texture,L.uniforms.resolution.value=q.mapSize,L.uniforms.radius.value=q.radius,v.setRenderTarget(q.map),v.clear(),v.renderBufferDirect(se,null,de,L,j,null)}function K(q,se,de,ge,X,fe){let Te=null;const Ye=!0===de.isPointLight?q.customDistanceMaterial:q.customDepthMaterial;if(void 0!==Ye)Te=Ye;else if(Te=!0===de.isPointLight?b:_,v.localClippingEnabled&&!0===se.clipShadows&&Array.isArray(se.clippingPlanes)&&0!==se.clippingPlanes.length||se.displacementMap&&0!==se.displacementScale||se.alphaMap&&se.alphaTest>0||se.map&&se.alphaTest>0){const yt=Te.uuid,He=se.uuid;let Ae=x[yt];void 0===Ae&&(Ae={},x[yt]=Ae);let ct=Ae[He];void 0===ct&&(ct=Te.clone(),Ae[He]=ct),Te=ct}return Te.visible=se.visible,Te.wireframe=se.wireframe,Te.side=fe===Ke?null!==se.shadowSide?se.shadowSide:se.side:null!==se.shadowSide?se.shadowSide:A[se.side],Te.alphaMap=se.alphaMap,Te.alphaTest=se.alphaTest,Te.map=se.map,Te.clipShadows=se.clipShadows,Te.clippingPlanes=se.clippingPlanes,Te.clipIntersection=se.clipIntersection,Te.displacementMap=se.displacementMap,Te.displacementScale=se.displacementScale,Te.displacementBias=se.displacementBias,Te.wireframeLinewidth=se.wireframeLinewidth,Te.linewidth=se.linewidth,!0===de.isPointLight&&!0===Te.isMeshDistanceMaterial&&(Te.referencePosition.setFromMatrixPosition(de.matrixWorld),Te.nearDistance=ge,Te.farDistance=X),Te}function $(q,se,de,ge,X){if(!1===q.visible)return;if(q.layers.test(se.layers)&&(q.isMesh||q.isLine||q.isPoints)&&(q.castShadow||q.receiveShadow&&X===Ke)&&(!q.frustumCulled||s.intersectsObject(q))){q.modelViewMatrix.multiplyMatrices(de.matrixWorldInverse,q.matrixWorld);const Ye=e.update(q),yt=q.material;if(Array.isArray(yt)){const He=Ye.groups;for(let Ae=0,ct=He.length;Ae<ct;Ae++){const Mt=He[Ae],Lt=yt[Mt.materialIndex];if(Lt&&Lt.visible){const vt=K(q,Lt,ge,de.near,de.far,X);v.renderBufferDirect(de,null,Ye,vt,q,Mt)}}}else if(yt.visible){const He=K(q,yt,ge,de.near,de.far,X);v.renderBufferDirect(de,null,Ye,He,q,null)}}const Te=q.children;for(let Ye=0,yt=Te.length;Ye<yt;Ye++)$(Te[Ye],se,de,ge,X)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Pe,this.render=function(q,se,de){if(!1===k.enabled||!1===k.autoUpdate&&!1===k.needsUpdate||0===q.length)return;const ge=v.getRenderTarget(),X=v.getActiveCubeFace(),fe=v.getActiveMipmapLevel(),Te=v.state;Te.setBlending(Ot),Te.buffers.color.setClear(1,1,1,1),Te.buffers.depth.setTest(!0),Te.setScissorTest(!1);for(let Ye=0,yt=q.length;Ye<yt;Ye++){const He=q[Ye],Ae=He.shadow;if(void 0===Ae){console.warn("THREE.WebGLShadowMap:",He,"has no shadow.");continue}if(!1===Ae.autoUpdate&&!1===Ae.needsUpdate)continue;l.copy(Ae.mapSize);const ct=Ae.getFrameExtents();l.multiply(ct),h.copy(Ae.mapSize),(l.x>S||l.y>S)&&(l.x>S&&(h.x=Math.floor(S/ct.x),l.x=h.x*ct.x,Ae.mapSize.x=h.x),l.y>S&&(h.y=Math.floor(S/ct.y),l.y=h.y*ct.y,Ae.mapSize.y=h.y)),null===Ae.map&&(Ae.map=new la(l.x,l.y,this.type!==Ke?{minFilter:hr,magFilter:hr}:{}),Ae.map.texture.name=He.name+".shadowMap",Ae.camera.updateProjectionMatrix()),v.setRenderTarget(Ae.map),v.clear();const Mt=Ae.getViewportCount();for(let Lt=0;Lt<Mt;Lt++){const vt=Ae.getViewport(Lt);g.set(h.x*vt.x,h.y*vt.y,h.x*vt.z,h.y*vt.w),Te.viewport(g),Ae.updateMatrices(He,Lt),s=Ae.getFrustum(),$(se,de,Ae.camera,He,this.type)}!0!==Ae.isPointLightShadow&&this.type===Ke&&J(Ae,de),Ae.needsUpdate=!1}k.needsUpdate=!1,v.setRenderTarget(ge,X,fe)}}function Th(v,e,t){const s=t.isWebGL2,_=new function l(){let we=!1;const ht=new qn;let Ft=null;const yn=new qn(0,0,0,0);return{setMask:function(An){Ft!==An&&!we&&(v.colorMask(An,An,An,An),Ft=An)},setLocked:function(An){we=An},setClear:function(An,ar,Gs,mo,Pd){!0===Pd&&(An*=mo,ar*=mo,Gs*=mo),ht.set(An,ar,Gs,mo),!1===yn.equals(ht)&&(v.clearColor(An,ar,Gs,mo),yn.copy(ht))},reset:function(){we=!1,Ft=null,yn.set(-1,0,0,0)}}},b=new function h(){let we=!1,ht=null,Ft=null,yn=null;return{setTest:function(An){An?Qn(2929):bn(2929)},setMask:function(An){ht!==An&&!we&&(v.depthMask(An),ht=An)},setFunc:function(An){if(Ft!==An){switch(An){case Jn:v.depthFunc(512);break;case Yi:v.depthFunc(519);break;case Cn:v.depthFunc(513);break;case In:v.depthFunc(515);break;case sn:v.depthFunc(514);break;case Ii:v.depthFunc(518);break;case Kr:v.depthFunc(516);break;case Sn:v.depthFunc(517);break;default:v.depthFunc(515)}Ft=An}},setLocked:function(An){we=An},setClear:function(An){yn!==An&&(v.clearDepth(An),yn=An)},reset:function(){we=!1,ht=null,Ft=null,yn=null}}},x=new function g(){let we=!1,ht=null,Ft=null,yn=null,An=null,ar=null,Gs=null,mo=null,Pd=null;return{setTest:function(Zr){we||(Zr?Qn(2960):bn(2960))},setMask:function(Zr){ht!==Zr&&!we&&(v.stencilMask(Zr),ht=Zr)},setFunc:function(Zr,Zc,ul){(Ft!==Zr||yn!==Zc||An!==ul)&&(v.stencilFunc(Zr,Zc,ul),Ft=Zr,yn=Zc,An=ul)},setOp:function(Zr,Zc,ul){(ar!==Zr||Gs!==Zc||mo!==ul)&&(v.stencilOp(Zr,Zc,ul),ar=Zr,Gs=Zc,mo=ul)},setLocked:function(Zr){we=Zr},setClear:function(Zr){Pd!==Zr&&(v.clearStencil(Zr),Pd=Zr)},reset:function(){we=!1,ht=null,Ft=null,yn=null,An=null,ar=null,Gs=null,mo=null,Pd=null}}},S=new WeakMap,A=new WeakMap;let E={},L={},G=new WeakMap,j=[],k=null,J=!1,K=null,$=null,q=null,se=null,de=null,ge=null,X=null,fe=!1,Te=null,Ye=null,yt=null,He=null,Ae=null;const ct=v.getParameter(35661);let Mt=!1,Lt=0;const vt=v.getParameter(7938);-1!==vt.indexOf("WebGL")?(Lt=parseFloat(/^WebGL (\d)/.exec(vt)[1]),Mt=Lt>=1):-1!==vt.indexOf("OpenGL ES")&&(Lt=parseFloat(/^OpenGL ES (\d)/.exec(vt)[1]),Mt=Lt>=2);let jt=null,Rt={};const ot=v.getParameter(3088),lt=v.getParameter(2978),Jt=(new qn).fromArray(ot),Wt=(new qn).fromArray(lt);function an(we,ht,Ft){const yn=new Uint8Array(4),An=v.createTexture();v.bindTexture(we,An),v.texParameteri(we,10241,9728),v.texParameteri(we,10240,9728);for(let ar=0;ar<Ft;ar++)v.texImage2D(ht+ar,0,6408,1,1,0,6408,5121,yn);return An}const pt={};function Qn(we){!0!==E[we]&&(v.enable(we),E[we]=!0)}function bn(we){!1!==E[we]&&(v.disable(we),E[we]=!1)}pt[3553]=an(3553,3553,1),pt[34067]=an(34067,34069,6),_.setClear(0,0,0,1),b.setClear(1),x.setClear(0),Qn(2929),b.setFunc(In),tn(!1),ui(ze),Qn(2884),en(Ot);const bt={[Me]:32774,[Ze]:32778,[We]:32779};if(s)bt[Pt]=32775,bt[fn]=32776;else{const we=e.get("EXT_blend_minmax");null!==we&&(bt[Pt]=we.MIN_EXT,bt[fn]=we.MAX_EXT)}const _t={[Zt]:0,[kt]:1,[ai]:768,[Ce]:770,[mn]:776,[Et]:774,[tt]:772,[cn]:769,[Ge]:771,[wt]:775,[Qe]:773};function en(we,ht,Ft,yn,An,ar,Gs,mo){if(we!==Ot){if(!1===J&&(Qn(3042),J=!0),we===Se)An=An||ht,ar=ar||Ft,Gs=Gs||yn,(ht!==$||An!==de)&&(v.blendEquationSeparate(bt[ht],bt[An]),$=ht,de=An),(Ft!==q||yn!==se||ar!==ge||Gs!==X)&&(v.blendFuncSeparate(_t[Ft],_t[yn],_t[ar],_t[Gs]),q=Ft,se=yn,ge=ar,X=Gs),K=we,fe=!1;else if(we!==K||mo!==fe){if(($!==Me||de!==Me)&&(v.blendEquation(32774),$=Me,de=Me),mo)switch(we){case It:v.blendFuncSeparate(1,771,1,771);break;case Bt:v.blendFunc(1,1);break;case pi:v.blendFuncSeparate(0,769,0,1);break;case ke:v.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",we)}else switch(we){case It:v.blendFuncSeparate(770,771,1,771);break;case Bt:v.blendFunc(770,1);break;case pi:v.blendFuncSeparate(0,769,0,1);break;case ke:v.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",we)}q=null,se=null,ge=null,X=null,K=we,fe=mo}}else!0===J&&(bn(3042),J=!1)}function tn(we){Te!==we&&(v.frontFace(we?2304:2305),Te=we)}function ui(we){we!==Re?(Qn(2884),we!==Ye&&v.cullFace(we===ze?1029:we===Xe?1028:1032)):bn(2884),Ye=we}function Wn(we,ht,Ft){we?(Qn(32823),(He!==ht||Ae!==Ft)&&(v.polygonOffset(ht,Ft),He=ht,Ae=Ft)):bn(32823)}return{buffers:{color:_,depth:b,stencil:x},enable:Qn,disable:bn,bindFramebuffer:function ei(we,ht){return L[we]!==ht&&(v.bindFramebuffer(we,ht),L[we]=ht,s&&(36009===we&&(L[36160]=ht),36160===we&&(L[36009]=ht)),!0)},drawBuffers:function ln(we,ht){let Ft=j,yn=!1;if(we)if(Ft=G.get(ht),void 0===Ft&&(Ft=[],G.set(ht,Ft)),we.isWebGLMultipleRenderTargets){const An=we.texture;if(Ft.length!==An.length||36064!==Ft[0]){for(let ar=0,Gs=An.length;ar<Gs;ar++)Ft[ar]=36064+ar;Ft.length=An.length,yn=!0}}else 36064!==Ft[0]&&(Ft[0]=36064,yn=!0);else 1029!==Ft[0]&&(Ft[0]=1029,yn=!0);yn&&(t.isWebGL2?v.drawBuffers(Ft):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(Ft))},useProgram:function Ci(we){return k!==we&&(v.useProgram(we),k=we,!0)},setBlending:en,setMaterial:function wn(we,ht){we.side===Ct?bn(2884):Qn(2884);let Ft=we.side===et;ht&&(Ft=!Ft),tn(Ft),we.blending===It&&!1===we.transparent?en(Ot):en(we.blending,we.blendEquation,we.blendSrc,we.blendDst,we.blendEquationAlpha,we.blendSrcAlpha,we.blendDstAlpha,we.premultipliedAlpha),b.setFunc(we.depthFunc),b.setTest(we.depthTest),b.setMask(we.depthWrite),_.setMask(we.colorWrite);const yn=we.stencilWrite;x.setTest(yn),yn&&(x.setMask(we.stencilWriteMask),x.setFunc(we.stencilFunc,we.stencilRef,we.stencilFuncMask),x.setOp(we.stencilFail,we.stencilZFail,we.stencilZPass)),Wn(we.polygonOffset,we.polygonOffsetFactor,we.polygonOffsetUnits),!0===we.alphaToCoverage?Qn(32926):bn(32926)},setFlipSided:tn,setCullFace:ui,setLineWidth:function zn(we){we!==yt&&(Mt&&v.lineWidth(we),yt=we)},setPolygonOffset:Wn,setScissorTest:function Ar(we){we?Qn(3089):bn(3089)},activeTexture:function sr(we){void 0===we&&(we=33984+ct-1),jt!==we&&(v.activeTexture(we),jt=we)},bindTexture:function pe(we,ht,Ft){void 0===Ft&&(Ft=null===jt?33984+ct-1:jt);let yn=Rt[Ft];void 0===yn&&(yn={type:void 0,texture:void 0},Rt[Ft]=yn),(yn.type!==we||yn.texture!==ht)&&(jt!==Ft&&(v.activeTexture(Ft),jt=Ft),v.bindTexture(we,ht||pt[we]),yn.type=we,yn.texture=ht)},unbindTexture:function re(){const we=Rt[jt];void 0!==we&&void 0!==we.type&&(v.bindTexture(we.type,null),we.type=void 0,we.texture=void 0)},compressedTexImage2D:function it(){try{v.compressedTexImage2D.apply(v,arguments)}catch(we){console.error("THREE.WebGLState:",we)}},compressedTexImage3D:function Nt(){try{v.compressedTexImage3D.apply(v,arguments)}catch(we){console.error("THREE.WebGLState:",we)}},texImage2D:function ti(){try{v.texImage2D.apply(v,arguments)}catch(we){console.error("THREE.WebGLState:",we)}},texImage3D:function En(){try{v.texImage3D.apply(v,arguments)}catch(we){console.error("THREE.WebGLState:",we)}},updateUBOMapping:function or(we,ht){let Ft=A.get(ht);void 0===Ft&&(Ft=new WeakMap,A.set(ht,Ft));let yn=Ft.get(we);void 0===yn&&(yn=v.getUniformBlockIndex(ht,we.name),Ft.set(we,yn))},uniformBlockBinding:function zr(we,ht){const yn=A.get(ht).get(we);S.get(ht)!==yn&&(v.uniformBlockBinding(ht,yn,we.__bindingPointIndex),S.set(ht,yn))},texStorage2D:function gt(){try{v.texStorage2D.apply(v,arguments)}catch(we){console.error("THREE.WebGLState:",we)}},texStorage3D:function jn(){try{v.texStorage3D.apply(v,arguments)}catch(we){console.error("THREE.WebGLState:",we)}},texSubImage2D:function Ht(){try{v.texSubImage2D.apply(v,arguments)}catch(we){console.error("THREE.WebGLState:",we)}},texSubImage3D:function hn(){try{v.texSubImage3D.apply(v,arguments)}catch(we){console.error("THREE.WebGLState:",we)}},compressedTexSubImage2D:function oi(){try{v.compressedTexSubImage2D.apply(v,arguments)}catch(we){console.error("THREE.WebGLState:",we)}},compressedTexSubImage3D:function pn(){try{v.compressedTexSubImage3D.apply(v,arguments)}catch(we){console.error("THREE.WebGLState:",we)}},scissor:function $n(we){!1===Jt.equals(we)&&(v.scissor(we.x,we.y,we.z,we.w),Jt.copy(we))},viewport:function Fn(we){!1===Wt.equals(we)&&(v.viewport(we.x,we.y,we.z,we.w),Wt.copy(we))},reset:function oo(){v.disable(3042),v.disable(2884),v.disable(2929),v.disable(32823),v.disable(3089),v.disable(2960),v.disable(32926),v.blendEquation(32774),v.blendFunc(1,0),v.blendFuncSeparate(1,0,1,0),v.colorMask(!0,!0,!0,!0),v.clearColor(0,0,0,0),v.depthMask(!0),v.depthFunc(513),v.clearDepth(1),v.stencilMask(4294967295),v.stencilFunc(519,0,4294967295),v.stencilOp(7680,7680,7680),v.clearStencil(0),v.cullFace(1029),v.frontFace(2305),v.polygonOffset(0,0),v.activeTexture(33984),v.bindFramebuffer(36160,null),!0===s&&(v.bindFramebuffer(36009,null),v.bindFramebuffer(36008,null)),v.useProgram(null),v.lineWidth(1),v.scissor(0,0,v.canvas.width,v.canvas.height),v.viewport(0,0,v.canvas.width,v.canvas.height),E={},jt=null,Rt={},L={},G=new WeakMap,j=[],k=null,J=!1,K=null,$=null,q=null,se=null,de=null,ge=null,X=null,fe=!1,Te=null,Ye=null,yt=null,He=null,Ae=null,Jt.set(0,0,v.canvas.width,v.canvas.height),Wt.set(0,0,v.canvas.width,v.canvas.height),_.reset(),b.reset(),x.reset()}}}function Oc(v,e,t,s,l,h,g){const _=l.isWebGL2,b=l.maxTextures,x=l.maxCubemapSize,S=l.maxTextureSize,A=l.maxSamples,E=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,L=!(typeof navigator>"u")&&/OculusBrowser/g.test(navigator.userAgent),G=new WeakMap;let j;const k=new WeakMap;let J=!1;try{J=typeof OffscreenCanvas<"u"&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch{}function K(pe,re){return J?new OffscreenCanvas(pe,re):xl("canvas")}function $(pe,re,it,Nt){let Ht=1;if((pe.width>Nt||pe.height>Nt)&&(Ht=Nt/Math.max(pe.width,pe.height)),Ht<1||!0===re){if(typeof HTMLImageElement<"u"&&pe instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&pe instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&pe instanceof ImageBitmap){const hn=re?Ml:Math.floor,oi=hn(Ht*pe.width),pn=hn(Ht*pe.height);void 0===j&&(j=K(oi,pn));const gt=it?K(oi,pn):j;return gt.width=oi,gt.height=pn,gt.getContext("2d").drawImage(pe,0,0,oi,pn),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+pe.width+"x"+pe.height+") to ("+oi+"x"+pn+")."),gt}return"data"in pe&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+pe.width+"x"+pe.height+")."),pe}return pe}function q(pe){return Js(pe.width)&&Js(pe.height)}function de(pe,re){return pe.generateMipmaps&&re&&pe.minFilter!==hr&&pe.minFilter!==zt}function ge(pe){v.generateMipmap(pe)}function X(pe,re,it,Nt,Ht=!1){if(!1===_)return re;if(null!==pe){if(void 0!==v[pe])return v[pe];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+pe+"'")}let hn=re;return 6403===re&&(5126===it&&(hn=33326),5131===it&&(hn=33325),5121===it&&(hn=33321)),33319===re&&(5126===it&&(hn=33328),5131===it&&(hn=33327),5121===it&&(hn=33323)),6408===re&&(5126===it&&(hn=34836),5131===it&&(hn=34842),5121===it&&(hn=Nt===Mi&&!1===Ht?35907:32856),32819===it&&(hn=32854),32820===it&&(hn=32855)),(33325===hn||33326===hn||33327===hn||33328===hn||34842===hn||34836===hn)&&e.get("EXT_color_buffer_float"),hn}function fe(pe,re,it){return!0===de(pe,it)||pe.isFramebufferTexture&&pe.minFilter!==hr&&pe.minFilter!==zt?Math.log2(Math.max(re.width,re.height))+1:void 0!==pe.mipmaps&&pe.mipmaps.length>0?pe.mipmaps.length:pe.isCompressedTexture&&Array.isArray(pe.image)?re.mipmaps.length:1}function Te(pe){return pe===hr||pe===Gi||pe===Ps?9728:9729}function Ye(pe){const re=pe.target;re.removeEventListener("dispose",Ye),function He(pe){const re=s.get(pe);if(void 0===re.__webglInit)return;const it=pe.source,Nt=k.get(it);if(Nt){const Ht=Nt[re.__cacheKey];Ht.usedTimes--,0===Ht.usedTimes&&Ae(pe),0===Object.keys(Nt).length&&k.delete(it)}s.remove(pe)}(re),re.isVideoTexture&&G.delete(re)}function yt(pe){const re=pe.target;re.removeEventListener("dispose",yt),function ct(pe){const re=pe.texture,it=s.get(pe),Nt=s.get(re);if(void 0!==Nt.__webglTexture&&(v.deleteTexture(Nt.__webglTexture),g.memory.textures--),pe.depthTexture&&pe.depthTexture.dispose(),pe.isWebGLCubeRenderTarget)for(let Ht=0;Ht<6;Ht++)v.deleteFramebuffer(it.__webglFramebuffer[Ht]),it.__webglDepthbuffer&&v.deleteRenderbuffer(it.__webglDepthbuffer[Ht]);else{if(v.deleteFramebuffer(it.__webglFramebuffer),it.__webglDepthbuffer&&v.deleteRenderbuffer(it.__webglDepthbuffer),it.__webglMultisampledFramebuffer&&v.deleteFramebuffer(it.__webglMultisampledFramebuffer),it.__webglColorRenderbuffer)for(let Ht=0;Ht<it.__webglColorRenderbuffer.length;Ht++)it.__webglColorRenderbuffer[Ht]&&v.deleteRenderbuffer(it.__webglColorRenderbuffer[Ht]);it.__webglDepthRenderbuffer&&v.deleteRenderbuffer(it.__webglDepthRenderbuffer)}if(pe.isWebGLMultipleRenderTargets)for(let Ht=0,hn=re.length;Ht<hn;Ht++){const oi=s.get(re[Ht]);oi.__webglTexture&&(v.deleteTexture(oi.__webglTexture),g.memory.textures--),s.remove(re[Ht])}s.remove(re),s.remove(pe)}(re)}function Ae(pe){const re=s.get(pe);v.deleteTexture(re.__webglTexture),delete k.get(pe.source)[re.__cacheKey],g.memory.textures--}let Mt=0;function Rt(pe,re){const it=s.get(pe);if(pe.isVideoTexture&&function Ar(pe){const re=g.render.frame;G.get(pe)!==re&&(G.set(pe,re),pe.update())}(pe),!1===pe.isRenderTargetTexture&&pe.version>0&&it.__version!==pe.version){const Nt=pe.image;if(null===Nt)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==Nt.complete)return void bn(it,pe,re);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}t.bindTexture(3553,it.__webglTexture,33984+re)}const Wt={[ki]:10497,[Gt]:33071,[ut]:33648},an={[hr]:9728,[Gi]:9984,[Ps]:9986,[zt]:9729,[Un]:9985,[Zn]:9987};function pt(pe,re,it){if(it?(v.texParameteri(pe,10242,Wt[re.wrapS]),v.texParameteri(pe,10243,Wt[re.wrapT]),(32879===pe||35866===pe)&&v.texParameteri(pe,32882,Wt[re.wrapR]),v.texParameteri(pe,10240,an[re.magFilter]),v.texParameteri(pe,10241,an[re.minFilter])):(v.texParameteri(pe,10242,33071),v.texParameteri(pe,10243,33071),(32879===pe||35866===pe)&&v.texParameteri(pe,32882,33071),(re.wrapS!==Gt||re.wrapT!==Gt)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),v.texParameteri(pe,10240,Te(re.magFilter)),v.texParameteri(pe,10241,Te(re.minFilter)),re.minFilter!==hr&&re.minFilter!==zt&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===e.has("EXT_texture_filter_anisotropic")){const Nt=e.get("EXT_texture_filter_anisotropic");if(re.magFilter===hr||re.minFilter!==Ps&&re.minFilter!==Zn||re.type===Ti&&!1===e.has("OES_texture_float_linear")||!1===_&&re.type===Xr&&!1===e.has("OES_texture_half_float_linear"))return;(re.anisotropy>1||s.get(re).__currentAnisotropy)&&(v.texParameterf(pe,Nt.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(re.anisotropy,l.getMaxAnisotropy())),s.get(re).__currentAnisotropy=re.anisotropy)}}function Qn(pe,re){let it=!1;void 0===pe.__webglInit&&(pe.__webglInit=!0,re.addEventListener("dispose",Ye));const Nt=re.source;let Ht=k.get(Nt);void 0===Ht&&(Ht={},k.set(Nt,Ht));const hn=function jt(pe){const re=[];return re.push(pe.wrapS),re.push(pe.wrapT),re.push(pe.wrapR||0),re.push(pe.magFilter),re.push(pe.minFilter),re.push(pe.anisotropy),re.push(pe.internalFormat),re.push(pe.format),re.push(pe.type),re.push(pe.generateMipmaps),re.push(pe.premultiplyAlpha),re.push(pe.flipY),re.push(pe.unpackAlignment),re.push(pe.encoding),re.join()}(re);if(hn!==pe.__cacheKey){void 0===Ht[hn]&&(Ht[hn]={texture:v.createTexture(),usedTimes:0},g.memory.textures++,it=!0),Ht[hn].usedTimes++;const oi=Ht[pe.__cacheKey];void 0!==oi&&(Ht[pe.__cacheKey].usedTimes--,0===oi.usedTimes&&Ae(re)),pe.__cacheKey=hn,pe.__webglTexture=Ht[hn].texture}return it}function bn(pe,re,it){let Nt=3553;(re.isDataArrayTexture||re.isCompressedArrayTexture)&&(Nt=35866),re.isData3DTexture&&(Nt=32879);const Ht=Qn(pe,re),hn=re.source;t.bindTexture(Nt,pe.__webglTexture,33984+it);const oi=s.get(hn);if(hn.version!==oi.__version||!0===Ht){t.activeTexture(33984+it),v.pixelStorei(37440,re.flipY),v.pixelStorei(37441,re.premultiplyAlpha),v.pixelStorei(3317,re.unpackAlignment),v.pixelStorei(37443,0);const pn=function se(pe){return!_&&(pe.wrapS!==Gt||pe.wrapT!==Gt||pe.minFilter!==hr&&pe.minFilter!==zt)}(re)&&!1===q(re.image);let gt=$(re.image,pn,!1,S);gt=sr(re,gt);const jn=q(gt)||_,ti=h.convert(re.format,re.encoding);let Fn,En=h.convert(re.type),$n=X(re.internalFormat,ti,En,re.encoding,re.isVideoTexture);pt(Nt,re,jn);const or=re.mipmaps,zr=_&&!0!==re.isVideoTexture,oo=void 0===oi.__version||!0===Ht,we=fe(re,gt,jn);if(re.isDepthTexture)$n=6402,_?$n=re.type===Ti?36012:re.type===Si?33190:re.type===xs?35056:33189:re.type===Ti&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),re.format===ae&&6402===$n&&re.type!==Os&&re.type!==Si&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),re.type=Si,En=h.convert(re.type)),re.format===Ee&&6402===$n&&($n=34041,re.type!==xs&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),re.type=xs,En=h.convert(re.type))),oo&&(zr?t.texStorage2D(3553,1,$n,gt.width,gt.height):t.texImage2D(3553,0,$n,gt.width,gt.height,0,ti,En,null));else if(re.isDataTexture)if(or.length>0&&jn){zr&&oo&&t.texStorage2D(3553,we,$n,or[0].width,or[0].height);for(let ht=0,Ft=or.length;ht<Ft;ht++)Fn=or[ht],zr?t.texSubImage2D(3553,ht,0,0,Fn.width,Fn.height,ti,En,Fn.data):t.texImage2D(3553,ht,$n,Fn.width,Fn.height,0,ti,En,Fn.data);re.generateMipmaps=!1}else zr?(oo&&t.texStorage2D(3553,we,$n,gt.width,gt.height),t.texSubImage2D(3553,0,0,0,gt.width,gt.height,ti,En,gt.data)):t.texImage2D(3553,0,$n,gt.width,gt.height,0,ti,En,gt.data);else if(re.isCompressedTexture)if(re.isCompressedArrayTexture){zr&&oo&&t.texStorage3D(35866,we,$n,or[0].width,or[0].height,gt.depth);for(let ht=0,Ft=or.length;ht<Ft;ht++)Fn=or[ht],re.format!==hs?null!==ti?zr?t.compressedTexSubImage3D(35866,ht,0,0,0,Fn.width,Fn.height,gt.depth,ti,Fn.data,0,0):t.compressedTexImage3D(35866,ht,$n,Fn.width,Fn.height,gt.depth,0,Fn.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):zr?t.texSubImage3D(35866,ht,0,0,0,Fn.width,Fn.height,gt.depth,ti,En,Fn.data):t.texImage3D(35866,ht,$n,Fn.width,Fn.height,gt.depth,0,ti,En,Fn.data)}else{zr&&oo&&t.texStorage2D(3553,we,$n,or[0].width,or[0].height);for(let ht=0,Ft=or.length;ht<Ft;ht++)Fn=or[ht],re.format!==hs?null!==ti?zr?t.compressedTexSubImage2D(3553,ht,0,0,Fn.width,Fn.height,ti,Fn.data):t.compressedTexImage2D(3553,ht,$n,Fn.width,Fn.height,0,Fn.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):zr?t.texSubImage2D(3553,ht,0,0,Fn.width,Fn.height,ti,En,Fn.data):t.texImage2D(3553,ht,$n,Fn.width,Fn.height,0,ti,En,Fn.data)}else if(re.isDataArrayTexture)zr?(oo&&t.texStorage3D(35866,we,$n,gt.width,gt.height,gt.depth),t.texSubImage3D(35866,0,0,0,0,gt.width,gt.height,gt.depth,ti,En,gt.data)):t.texImage3D(35866,0,$n,gt.width,gt.height,gt.depth,0,ti,En,gt.data);else if(re.isData3DTexture)zr?(oo&&t.texStorage3D(32879,we,$n,gt.width,gt.height,gt.depth),t.texSubImage3D(32879,0,0,0,0,gt.width,gt.height,gt.depth,ti,En,gt.data)):t.texImage3D(32879,0,$n,gt.width,gt.height,gt.depth,0,ti,En,gt.data);else if(re.isFramebufferTexture){if(oo)if(zr)t.texStorage2D(3553,we,$n,gt.width,gt.height);else{let ht=gt.width,Ft=gt.height;for(let yn=0;yn<we;yn++)t.texImage2D(3553,yn,$n,ht,Ft,0,ti,En,null),ht>>=1,Ft>>=1}}else if(or.length>0&&jn){zr&&oo&&t.texStorage2D(3553,we,$n,or[0].width,or[0].height);for(let ht=0,Ft=or.length;ht<Ft;ht++)Fn=or[ht],zr?t.texSubImage2D(3553,ht,0,0,ti,En,Fn):t.texImage2D(3553,ht,$n,ti,En,Fn);re.generateMipmaps=!1}else zr?(oo&&t.texStorage2D(3553,we,$n,gt.width,gt.height),t.texSubImage2D(3553,0,0,0,ti,En,gt)):t.texImage2D(3553,0,$n,ti,En,gt);de(re,jn)&&ge(Nt),oi.__version=hn.version,re.onUpdate&&re.onUpdate(re)}pe.__version=re.version}function ln(pe,re,it,Nt,Ht){const hn=h.convert(it.format,it.encoding),oi=h.convert(it.type),pn=X(it.internalFormat,hn,oi,it.encoding);s.get(re).__hasExternalTextures||(32879===Ht||35866===Ht?t.texImage3D(Ht,0,pn,re.width,re.height,re.depth,0,hn,oi,null):t.texImage2D(Ht,0,pn,re.width,re.height,0,hn,oi,null)),t.bindFramebuffer(36160,pe),Wn(re)?E.framebufferTexture2DMultisampleEXT(36160,Nt,Ht,s.get(it).__webglTexture,0,zn(re)):(3553===Ht||Ht>=34069&&Ht<=34074)&&v.framebufferTexture2D(36160,Nt,Ht,s.get(it).__webglTexture,0),t.bindFramebuffer(36160,null)}function Ci(pe,re,it){if(v.bindRenderbuffer(36161,pe),re.depthBuffer&&!re.stencilBuffer){let Nt=33189;if(it||Wn(re)){const Ht=re.depthTexture;Ht&&Ht.isDepthTexture&&(Ht.type===Ti?Nt=36012:Ht.type===Si&&(Nt=33190));const hn=zn(re);Wn(re)?E.renderbufferStorageMultisampleEXT(36161,hn,Nt,re.width,re.height):v.renderbufferStorageMultisample(36161,hn,Nt,re.width,re.height)}else v.renderbufferStorage(36161,Nt,re.width,re.height);v.framebufferRenderbuffer(36160,36096,36161,pe)}else if(re.depthBuffer&&re.stencilBuffer){const Nt=zn(re);it&&!1===Wn(re)?v.renderbufferStorageMultisample(36161,Nt,35056,re.width,re.height):Wn(re)?E.renderbufferStorageMultisampleEXT(36161,Nt,35056,re.width,re.height):v.renderbufferStorage(36161,34041,re.width,re.height),v.framebufferRenderbuffer(36160,33306,36161,pe)}else{const Nt=!0===re.isWebGLMultipleRenderTargets?re.texture:[re.texture];for(let Ht=0;Ht<Nt.length;Ht++){const hn=Nt[Ht],oi=h.convert(hn.format,hn.encoding),pn=h.convert(hn.type),gt=X(hn.internalFormat,oi,pn,hn.encoding),jn=zn(re);it&&!1===Wn(re)?v.renderbufferStorageMultisample(36161,jn,gt,re.width,re.height):Wn(re)?E.renderbufferStorageMultisampleEXT(36161,jn,gt,re.width,re.height):v.renderbufferStorage(36161,gt,re.width,re.height)}}v.bindRenderbuffer(36161,null)}function _t(pe){const re=s.get(pe),it=!0===pe.isWebGLCubeRenderTarget;if(pe.depthTexture&&!re.__autoAllocateDepthBuffer){if(it)throw new Error("target.depthTexture not supported in Cube render targets");!function bt(pe,re){if(re&&re.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,pe),!re.depthTexture||!re.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!s.get(re.depthTexture).__webglTexture||re.depthTexture.image.width!==re.width||re.depthTexture.image.height!==re.height)&&(re.depthTexture.image.width=re.width,re.depthTexture.image.height=re.height,re.depthTexture.needsUpdate=!0),Rt(re.depthTexture,0);const Nt=s.get(re.depthTexture).__webglTexture,Ht=zn(re);if(re.depthTexture.format===ae)Wn(re)?E.framebufferTexture2DMultisampleEXT(36160,36096,3553,Nt,0,Ht):v.framebufferTexture2D(36160,36096,3553,Nt,0);else{if(re.depthTexture.format!==Ee)throw new Error("Unknown depthTexture format");Wn(re)?E.framebufferTexture2DMultisampleEXT(36160,33306,3553,Nt,0,Ht):v.framebufferTexture2D(36160,33306,3553,Nt,0)}}(re.__webglFramebuffer,pe)}else if(it){re.__webglDepthbuffer=[];for(let Nt=0;Nt<6;Nt++)t.bindFramebuffer(36160,re.__webglFramebuffer[Nt]),re.__webglDepthbuffer[Nt]=v.createRenderbuffer(),Ci(re.__webglDepthbuffer[Nt],pe,!1)}else t.bindFramebuffer(36160,re.__webglFramebuffer),re.__webglDepthbuffer=v.createRenderbuffer(),Ci(re.__webglDepthbuffer,pe,!1);t.bindFramebuffer(36160,null)}function zn(pe){return Math.min(A,pe.samples)}function Wn(pe){const re=s.get(pe);return _&&pe.samples>0&&!0===e.has("WEBGL_multisampled_render_to_texture")&&!1!==re.__useRenderToTexture}function sr(pe,re){const it=pe.encoding,Nt=pe.format,Ht=pe.type;return!0===pe.isCompressedTexture||!0===pe.isVideoTexture||pe.format===Vo||it!==ps&&(it===Mi?!1===_?!0===e.has("EXT_sRGB")&&Nt===hs?(pe.format=Vo,pe.minFilter=zt,pe.generateMipmaps=!1):re=Sa.sRGBToLinear(re):(Nt!==hs||Ht!==ls)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",it)),re}this.allocateTextureUnit=function vt(){const pe=Mt;return pe>=b&&console.warn("THREE.WebGLTextures: Trying to use "+pe+" texture units while this GPU supports only "+b),Mt+=1,pe},this.resetTextureUnits=function Lt(){Mt=0},this.setTexture2D=Rt,this.setTexture2DArray=function ot(pe,re){const it=s.get(pe);pe.version>0&&it.__version!==pe.version?bn(it,pe,re):t.bindTexture(35866,it.__webglTexture,33984+re)},this.setTexture3D=function lt(pe,re){const it=s.get(pe);pe.version>0&&it.__version!==pe.version?bn(it,pe,re):t.bindTexture(32879,it.__webglTexture,33984+re)},this.setTextureCube=function Jt(pe,re){const it=s.get(pe);pe.version>0&&it.__version!==pe.version?function ei(pe,re,it){if(6!==re.image.length)return;const Nt=Qn(pe,re),Ht=re.source;t.bindTexture(34067,pe.__webglTexture,33984+it);const hn=s.get(Ht);if(Ht.version!==hn.__version||!0===Nt){t.activeTexture(33984+it),v.pixelStorei(37440,re.flipY),v.pixelStorei(37441,re.premultiplyAlpha),v.pixelStorei(3317,re.unpackAlignment),v.pixelStorei(37443,0);const oi=re.isCompressedTexture||re.image[0].isCompressedTexture,pn=re.image[0]&&re.image[0].isDataTexture,gt=[];for(let ht=0;ht<6;ht++)gt[ht]=oi||pn?pn?re.image[ht].image:re.image[ht]:$(re.image[ht],!1,!0,x),gt[ht]=sr(re,gt[ht]);const jn=gt[0],ti=q(jn)||_,En=h.convert(re.format,re.encoding),$n=h.convert(re.type),Fn=X(re.internalFormat,En,$n,re.encoding),or=_&&!0!==re.isVideoTexture,zr=void 0===hn.__version||!0===Nt;let we,oo=fe(re,jn,ti);if(pt(34067,re,ti),oi){or&&zr&&t.texStorage2D(34067,oo,Fn,jn.width,jn.height);for(let ht=0;ht<6;ht++){we=gt[ht].mipmaps;for(let Ft=0;Ft<we.length;Ft++){const yn=we[Ft];re.format!==hs?null!==En?or?t.compressedTexSubImage2D(34069+ht,Ft,0,0,yn.width,yn.height,En,yn.data):t.compressedTexImage2D(34069+ht,Ft,Fn,yn.width,yn.height,0,yn.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):or?t.texSubImage2D(34069+ht,Ft,0,0,yn.width,yn.height,En,$n,yn.data):t.texImage2D(34069+ht,Ft,Fn,yn.width,yn.height,0,En,$n,yn.data)}}}else{we=re.mipmaps,or&&zr&&(we.length>0&&oo++,t.texStorage2D(34067,oo,Fn,gt[0].width,gt[0].height));for(let ht=0;ht<6;ht++)if(pn){or?t.texSubImage2D(34069+ht,0,0,0,gt[ht].width,gt[ht].height,En,$n,gt[ht].data):t.texImage2D(34069+ht,0,Fn,gt[ht].width,gt[ht].height,0,En,$n,gt[ht].data);for(let Ft=0;Ft<we.length;Ft++){const An=we[Ft].image[ht].image;or?t.texSubImage2D(34069+ht,Ft+1,0,0,An.width,An.height,En,$n,An.data):t.texImage2D(34069+ht,Ft+1,Fn,An.width,An.height,0,En,$n,An.data)}}else{or?t.texSubImage2D(34069+ht,0,0,0,En,$n,gt[ht]):t.texImage2D(34069+ht,0,Fn,En,$n,gt[ht]);for(let Ft=0;Ft<we.length;Ft++){const yn=we[Ft];or?t.texSubImage2D(34069+ht,Ft+1,0,0,En,$n,yn.image[ht]):t.texImage2D(34069+ht,Ft+1,Fn,En,$n,yn.image[ht])}}}de(re,ti)&&ge(34067),hn.__version=Ht.version,re.onUpdate&&re.onUpdate(re)}pe.__version=re.version}(it,pe,re):t.bindTexture(34067,it.__webglTexture,33984+re)},this.rebindTextures=function en(pe,re,it){const Nt=s.get(pe);void 0!==re&&ln(Nt.__webglFramebuffer,pe,pe.texture,36064,3553),void 0!==it&&_t(pe)},this.setupRenderTarget=function wn(pe){const re=pe.texture,it=s.get(pe),Nt=s.get(re);pe.addEventListener("dispose",yt),!0!==pe.isWebGLMultipleRenderTargets&&(void 0===Nt.__webglTexture&&(Nt.__webglTexture=v.createTexture()),Nt.__version=re.version,g.memory.textures++);const Ht=!0===pe.isWebGLCubeRenderTarget,hn=!0===pe.isWebGLMultipleRenderTargets,oi=q(pe)||_;if(Ht){it.__webglFramebuffer=[];for(let pn=0;pn<6;pn++)it.__webglFramebuffer[pn]=v.createFramebuffer()}else{if(it.__webglFramebuffer=v.createFramebuffer(),hn)if(l.drawBuffers){const pn=pe.texture;for(let gt=0,jn=pn.length;gt<jn;gt++){const ti=s.get(pn[gt]);void 0===ti.__webglTexture&&(ti.__webglTexture=v.createTexture(),g.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(_&&pe.samples>0&&!1===Wn(pe)){const pn=hn?re:[re];it.__webglMultisampledFramebuffer=v.createFramebuffer(),it.__webglColorRenderbuffer=[],t.bindFramebuffer(36160,it.__webglMultisampledFramebuffer);for(let gt=0;gt<pn.length;gt++){const jn=pn[gt];it.__webglColorRenderbuffer[gt]=v.createRenderbuffer(),v.bindRenderbuffer(36161,it.__webglColorRenderbuffer[gt]);const ti=h.convert(jn.format,jn.encoding),En=h.convert(jn.type),$n=X(jn.internalFormat,ti,En,jn.encoding,!0===pe.isXRRenderTarget),Fn=zn(pe);v.renderbufferStorageMultisample(36161,Fn,$n,pe.width,pe.height),v.framebufferRenderbuffer(36160,36064+gt,36161,it.__webglColorRenderbuffer[gt])}v.bindRenderbuffer(36161,null),pe.depthBuffer&&(it.__webglDepthRenderbuffer=v.createRenderbuffer(),Ci(it.__webglDepthRenderbuffer,pe,!0)),t.bindFramebuffer(36160,null)}}if(Ht){t.bindTexture(34067,Nt.__webglTexture),pt(34067,re,oi);for(let pn=0;pn<6;pn++)ln(it.__webglFramebuffer[pn],pe,re,36064,34069+pn);de(re,oi)&&ge(34067),t.unbindTexture()}else if(hn){const pn=pe.texture;for(let gt=0,jn=pn.length;gt<jn;gt++){const ti=pn[gt],En=s.get(ti);t.bindTexture(3553,En.__webglTexture),pt(3553,ti,oi),ln(it.__webglFramebuffer,pe,ti,36064+gt,3553),de(ti,oi)&&ge(3553)}t.unbindTexture()}else{let pn=3553;(pe.isWebGL3DRenderTarget||pe.isWebGLArrayRenderTarget)&&(_?pn=pe.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(pn,Nt.__webglTexture),pt(pn,re,oi),ln(it.__webglFramebuffer,pe,re,36064,pn),de(re,oi)&&ge(pn),t.unbindTexture()}pe.depthBuffer&&_t(pe)},this.updateRenderTargetMipmap=function tn(pe){const re=q(pe)||_,it=!0===pe.isWebGLMultipleRenderTargets?pe.texture:[pe.texture];for(let Nt=0,Ht=it.length;Nt<Ht;Nt++){const hn=it[Nt];if(de(hn,re)){const oi=pe.isWebGLCubeRenderTarget?34067:3553,pn=s.get(hn).__webglTexture;t.bindTexture(oi,pn),ge(oi),t.unbindTexture()}}},this.updateMultisampleRenderTarget=function ui(pe){if(_&&pe.samples>0&&!1===Wn(pe)){const re=pe.isWebGLMultipleRenderTargets?pe.texture:[pe.texture],it=pe.width,Nt=pe.height;let Ht=16384;const hn=[],oi=pe.stencilBuffer?33306:36096,pn=s.get(pe),gt=!0===pe.isWebGLMultipleRenderTargets;if(gt)for(let jn=0;jn<re.length;jn++)t.bindFramebuffer(36160,pn.__webglMultisampledFramebuffer),v.framebufferRenderbuffer(36160,36064+jn,36161,null),t.bindFramebuffer(36160,pn.__webglFramebuffer),v.framebufferTexture2D(36009,36064+jn,3553,null,0);t.bindFramebuffer(36008,pn.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,pn.__webglFramebuffer);for(let jn=0;jn<re.length;jn++){hn.push(36064+jn),pe.depthBuffer&&hn.push(oi);const ti=void 0!==pn.__ignoreDepthValues&&pn.__ignoreDepthValues;if(!1===ti&&(pe.depthBuffer&&(Ht|=256),pe.stencilBuffer&&(Ht|=1024)),gt&&v.framebufferRenderbuffer(36008,36064,36161,pn.__webglColorRenderbuffer[jn]),!0===ti&&(v.invalidateFramebuffer(36008,[oi]),v.invalidateFramebuffer(36009,[oi])),gt){const En=s.get(re[jn]).__webglTexture;v.framebufferTexture2D(36009,36064,3553,En,0)}v.blitFramebuffer(0,0,it,Nt,0,0,it,Nt,Ht,9728),L&&v.invalidateFramebuffer(36008,hn)}if(t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,null),gt)for(let jn=0;jn<re.length;jn++){t.bindFramebuffer(36160,pn.__webglMultisampledFramebuffer),v.framebufferRenderbuffer(36160,36064+jn,36161,pn.__webglColorRenderbuffer[jn]);const ti=s.get(re[jn]).__webglTexture;t.bindFramebuffer(36160,pn.__webglFramebuffer),v.framebufferTexture2D(36009,36064+jn,3553,ti,0)}t.bindFramebuffer(36009,pn.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=_t,this.setupFrameBufferTexture=ln,this.useMultisampledRTT=Wn}function T_(v,e,t){const s=t.isWebGL2;return{convert:function l(h,g=null){let _;if(h===ls)return 5121;if(h===na)return 32819;if(h===ia)return 32820;if(h===Ga)return 5120;if(h===Hs)return 5122;if(h===Os)return 5123;if(h===ds)return 5124;if(h===Si)return 5125;if(h===Ti)return 5126;if(h===Xr)return s?5131:(_=e.get("OES_texture_half_float"),null!==_?_.HALF_FLOAT_OES:null);if(h===dl)return 6406;if(h===hs)return 6408;if(h===Ne)return 6409;if(h===_e)return 6410;if(h===ae)return 6402;if(h===Ee)return 34041;if(h===hl)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(h===Vo)return _=e.get("EXT_sRGB"),null!==_?_.SRGB_ALPHA_EXT:null;if(h===Ve)return 6403;if(h===rn)return 36244;if(h===Hn)return 33319;if(h===Vi)return 33320;if(h===cr)return 36249;if(h===fs||h===wr||h===ya||h===Va)if(g===Mi){if(_=e.get("WEBGL_compressed_texture_s3tc_srgb"),null===_)return null;if(h===fs)return _.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(h===wr)return _.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(h===ya)return _.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(h===Va)return _.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(_=e.get("WEBGL_compressed_texture_s3tc"),null===_)return null;if(h===fs)return _.COMPRESSED_RGB_S3TC_DXT1_EXT;if(h===wr)return _.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(h===ya)return _.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(h===Va)return _.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(h===fl||h===ra||h===Ul||h===vo){if(_=e.get("WEBGL_compressed_texture_pvrtc"),null===_)return null;if(h===fl)return _.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(h===ra)return _.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(h===Ul)return _.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(h===vo)return _.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(h===ba)return _=e.get("WEBGL_compressed_texture_etc1"),null!==_?_.COMPRESSED_RGB_ETC1_WEBGL:null;if(h===Ns||h===yo){if(_=e.get("WEBGL_compressed_texture_etc"),null===_)return null;if(h===Ns)return g===Mi?_.COMPRESSED_SRGB8_ETC2:_.COMPRESSED_RGB8_ETC2;if(h===yo)return g===Mi?_.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:_.COMPRESSED_RGBA8_ETC2_EAC}if(h===Ta||h===vi||h===ur||h===Oi||h===Qr||h===$r||h===fc||h===pl||h===zs||h===Fs||h===qt||h===On||h===Qi||h===es){if(_=e.get("WEBGL_compressed_texture_astc"),null===_)return null;if(h===Ta)return g===Mi?_.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:_.COMPRESSED_RGBA_ASTC_4x4_KHR;if(h===vi)return g===Mi?_.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:_.COMPRESSED_RGBA_ASTC_5x4_KHR;if(h===ur)return g===Mi?_.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:_.COMPRESSED_RGBA_ASTC_5x5_KHR;if(h===Oi)return g===Mi?_.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:_.COMPRESSED_RGBA_ASTC_6x5_KHR;if(h===Qr)return g===Mi?_.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:_.COMPRESSED_RGBA_ASTC_6x6_KHR;if(h===$r)return g===Mi?_.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:_.COMPRESSED_RGBA_ASTC_8x5_KHR;if(h===fc)return g===Mi?_.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:_.COMPRESSED_RGBA_ASTC_8x6_KHR;if(h===pl)return g===Mi?_.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:_.COMPRESSED_RGBA_ASTC_8x8_KHR;if(h===zs)return g===Mi?_.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:_.COMPRESSED_RGBA_ASTC_10x5_KHR;if(h===Fs)return g===Mi?_.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:_.COMPRESSED_RGBA_ASTC_10x6_KHR;if(h===qt)return g===Mi?_.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:_.COMPRESSED_RGBA_ASTC_10x8_KHR;if(h===On)return g===Mi?_.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:_.COMPRESSED_RGBA_ASTC_10x10_KHR;if(h===Qi)return g===Mi?_.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:_.COMPRESSED_RGBA_ASTC_12x10_KHR;if(h===es)return g===Mi?_.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:_.COMPRESSED_RGBA_ASTC_12x12_KHR}if(h===Rr){if(_=e.get("EXT_texture_compression_bptc"),null===_)return null;if(h===Rr)return g===Mi?_.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:_.COMPRESSED_RGBA_BPTC_UNORM_EXT}return h===xs?s?34042:(_=e.get("WEBGL_depth_texture"),null!==_?_.UNSIGNED_INT_24_8_WEBGL:null):void 0!==v[h]?v[h]:null}}}class M_ extends vr{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class vu extends _s{constructor(){super(),this.isGroup=!0,this.type="Group"}}const yu={type:"move"};class Rm{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new vu,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new vu,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new le,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new le),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new vu,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new le,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new le),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const s of e.hand.values())this._getHandJoint(t,s)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,s){let l=null,h=null,g=null;const _=this._targetRay,b=this._grip,x=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(x&&e.hand){g=!0;for(const j of e.hand.values()){const k=t.getJointPose(j,s),J=this._getHandJoint(x,j);null!==k&&(J.matrix.fromArray(k.transform.matrix),J.matrix.decompose(J.position,J.rotation,J.scale),J.jointRadius=k.radius),J.visible=null!==k}const E=x.joints["index-finger-tip"].position.distanceTo(x.joints["thumb-tip"].position),L=.02,G=.005;x.inputState.pinching&&E>L+G?(x.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!x.inputState.pinching&&E<=L-G&&(x.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==b&&e.gripSpace&&(h=t.getPose(e.gripSpace,s),null!==h&&(b.matrix.fromArray(h.transform.matrix),b.matrix.decompose(b.position,b.rotation,b.scale),h.linearVelocity?(b.hasLinearVelocity=!0,b.linearVelocity.copy(h.linearVelocity)):b.hasLinearVelocity=!1,h.angularVelocity?(b.hasAngularVelocity=!0,b.angularVelocity.copy(h.angularVelocity)):b.hasAngularVelocity=!1));null!==_&&(l=t.getPose(e.targetRaySpace,s),null===l&&null!==h&&(l=h),null!==l&&(_.matrix.fromArray(l.transform.matrix),_.matrix.decompose(_.position,_.rotation,_.scale),l.linearVelocity?(_.hasLinearVelocity=!0,_.linearVelocity.copy(l.linearVelocity)):_.hasLinearVelocity=!1,l.angularVelocity?(_.hasAngularVelocity=!0,_.angularVelocity.copy(l.angularVelocity)):_.hasAngularVelocity=!1,this.dispatchEvent(yu)))}return null!==_&&(_.visible=null!==l),null!==b&&(b.visible=null!==h),null!==x&&(x.visible=null!==g),this}_getHandJoint(e,t){if(void 0===e.joints[t.jointName]){const s=new vu;s.matrixAutoUpdate=!1,s.visible=!1,e.joints[t.jointName]=s,e.add(s)}return e.joints[t.jointName]}}class Sm extends rr{constructor(e,t,s,l,h,g,_,b,x,S){if((S=void 0!==S?S:ae)!==ae&&S!==Ee)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===s&&S===ae&&(s=Si),void 0===s&&S===Ee&&(s=xs),super(null,l,h,g,_,b,S,s,x),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=void 0!==_?_:hr,this.minFilter=void 0!==b?b:hr,this.flipY=!1,this.generateMipmaps=!1}}class Cm extends Uo{constructor(e,t){super();const s=this;let l=null,h=1,g=null,_="local-floor",b=null,x=null,S=null,A=null,E=null,L=null;const G=t.getContextAttributes();let j=null,k=null;const J=[],K=[],$=new Set,q=new Map,se=new vr;se.layers.enable(1),se.viewport=new qn;const de=new vr;de.layers.enable(2),de.viewport=new qn;const ge=[se,de],X=new M_;X.layers.enable(1),X.layers.enable(2);let fe=null,Te=null;function Ye(ot){const lt=K.indexOf(ot.inputSource);if(-1===lt)return;const Jt=J[lt];void 0!==Jt&&Jt.dispatchEvent({type:ot.type,data:ot.inputSource})}function yt(){l.removeEventListener("select",Ye),l.removeEventListener("selectstart",Ye),l.removeEventListener("selectend",Ye),l.removeEventListener("squeeze",Ye),l.removeEventListener("squeezestart",Ye),l.removeEventListener("squeezeend",Ye),l.removeEventListener("end",yt),l.removeEventListener("inputsourceschange",He);for(let ot=0;ot<J.length;ot++){const lt=K[ot];null!==lt&&(K[ot]=null,J[ot].disconnect(lt))}fe=null,Te=null,e.setRenderTarget(j),E=null,A=null,S=null,l=null,k=null,Rt.stop(),s.isPresenting=!1,s.dispatchEvent({type:"sessionend"})}function He(ot){for(let lt=0;lt<ot.removed.length;lt++){const Jt=ot.removed[lt],Wt=K.indexOf(Jt);Wt>=0&&(K[Wt]=null,J[Wt].disconnect(Jt))}for(let lt=0;lt<ot.added.length;lt++){const Jt=ot.added[lt];let Wt=K.indexOf(Jt);if(-1===Wt){for(let pt=0;pt<J.length;pt++){if(pt>=K.length){K.push(Jt),Wt=pt;break}if(null===K[pt]){K[pt]=Jt,Wt=pt;break}}if(-1===Wt)break}const an=J[Wt];an&&an.connect(Jt)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ot){let lt=J[ot];return void 0===lt&&(lt=new Rm,J[ot]=lt),lt.getTargetRaySpace()},this.getControllerGrip=function(ot){let lt=J[ot];return void 0===lt&&(lt=new Rm,J[ot]=lt),lt.getGripSpace()},this.getHand=function(ot){let lt=J[ot];return void 0===lt&&(lt=new Rm,J[ot]=lt),lt.getHandSpace()},this.setFramebufferScaleFactor=function(ot){h=ot,!0===s.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ot){_=ot,!0===s.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return b||g},this.setReferenceSpace=function(ot){b=ot},this.getBaseLayer=function(){return null!==A?A:E},this.getBinding=function(){return S},this.getFrame=function(){return L},this.getSession=function(){return l},this.setSession=function(){var ot=(0,a.Z)(function*(lt){if(l=lt,null!==l){if(j=e.getRenderTarget(),l.addEventListener("select",Ye),l.addEventListener("selectstart",Ye),l.addEventListener("selectend",Ye),l.addEventListener("squeeze",Ye),l.addEventListener("squeezestart",Ye),l.addEventListener("squeezeend",Ye),l.addEventListener("end",yt),l.addEventListener("inputsourceschange",He),!0!==G.xrCompatible&&(yield t.makeXRCompatible()),void 0===l.renderState.layers||!1===e.capabilities.isWebGL2)E=new XRWebGLLayer(l,t,{antialias:void 0!==l.renderState.layers||G.antialias,alpha:G.alpha,depth:G.depth,stencil:G.stencil,framebufferScaleFactor:h}),l.updateRenderState({baseLayer:E}),k=new la(E.framebufferWidth,E.framebufferHeight,{format:hs,type:ls,encoding:e.outputEncoding,stencilBuffer:G.stencil});else{let Jt=null,Wt=null,an=null;G.depth&&(an=G.stencil?35056:33190,Jt=G.stencil?Ee:ae,Wt=G.stencil?xs:Si);const pt={colorFormat:32856,depthFormat:an,scaleFactor:h};S=new XRWebGLBinding(l,t),A=S.createProjectionLayer(pt),l.updateRenderState({layers:[A]}),k=new la(A.textureWidth,A.textureHeight,{format:hs,type:ls,depthTexture:new Sm(A.textureWidth,A.textureHeight,Wt,void 0,void 0,void 0,void 0,void 0,void 0,Jt),stencilBuffer:G.stencil,encoding:e.outputEncoding,samples:G.antialias?4:0}),e.properties.get(k).__ignoreDepthValues=A.ignoreDepthValues}k.isXRRenderTarget=!0,this.setFoveation(1),b=null,g=yield l.requestReferenceSpace(_),Rt.setContext(l),Rt.start(),s.isPresenting=!0,s.dispatchEvent({type:"sessionstart"})}});return function(lt){return ot.apply(this,arguments)}}();const Ae=new le,ct=new le;function Lt(ot,lt){null===lt?ot.matrixWorld.copy(ot.matrix):ot.matrixWorld.multiplyMatrices(lt.matrixWorld,ot.matrix),ot.matrixWorldInverse.copy(ot.matrixWorld).invert()}this.updateCamera=function(ot){if(null===l)return;X.near=de.near=se.near=ot.near,X.far=de.far=se.far=ot.far,(fe!==X.near||Te!==X.far)&&(l.updateRenderState({depthNear:X.near,depthFar:X.far}),fe=X.near,Te=X.far);const lt=ot.parent,Jt=X.cameras;Lt(X,lt);for(let an=0;an<Jt.length;an++)Lt(Jt[an],lt);X.matrixWorld.decompose(X.position,X.quaternion,X.scale),ot.matrix.copy(X.matrix),ot.matrix.decompose(ot.position,ot.quaternion,ot.scale);const Wt=ot.children;for(let an=0,pt=Wt.length;an<pt;an++)Wt[an].updateMatrixWorld(!0);2===Jt.length?function Mt(ot,lt,Jt){Ae.setFromMatrixPosition(lt.matrixWorld),ct.setFromMatrixPosition(Jt.matrixWorld);const Wt=Ae.distanceTo(ct),an=lt.projectionMatrix.elements,pt=Jt.projectionMatrix.elements,Qn=an[14]/(an[10]-1),bn=an[14]/(an[10]+1),ei=(an[9]+1)/an[5],ln=(an[9]-1)/an[5],Ci=(an[8]-1)/an[0],bt=(pt[8]+1)/pt[0],_t=Qn*Ci,en=Qn*bt,wn=Wt/(-Ci+bt),tn=wn*-Ci;lt.matrixWorld.decompose(ot.position,ot.quaternion,ot.scale),ot.translateX(tn),ot.translateZ(wn),ot.matrixWorld.compose(ot.position,ot.quaternion,ot.scale),ot.matrixWorldInverse.copy(ot.matrixWorld).invert();const ui=Qn+wn,zn=bn+wn;ot.projectionMatrix.makePerspective(_t-tn,en+(Wt-tn),ei*bn/zn*ui,ln*bn/zn*ui,ui,zn)}(X,se,de):X.projectionMatrix.copy(se.projectionMatrix)},this.getCamera=function(){return X},this.getFoveation=function(){return null!==A?A.fixedFoveation:null!==E?E.fixedFoveation:void 0},this.setFoveation=function(ot){null!==A&&(A.fixedFoveation=ot),null!==E&&void 0!==E.fixedFoveation&&(E.fixedFoveation=ot)},this.getPlanes=function(){return $};let vt=null;const Rt=new ou;Rt.setAnimationLoop(function jt(ot,lt){if(x=lt.getViewerPose(b||g),L=lt,null!==x){const Jt=x.views;null!==E&&(e.setRenderTargetFramebuffer(k,E.framebuffer),e.setRenderTarget(k));let Wt=!1;Jt.length!==X.cameras.length&&(X.cameras.length=0,Wt=!0);for(let an=0;an<Jt.length;an++){const pt=Jt[an];let Qn=null;if(null!==E)Qn=E.getViewport(pt);else{const ei=S.getViewSubImage(A,pt);Qn=ei.viewport,0===an&&(e.setRenderTargetTextures(k,ei.colorTexture,A.ignoreDepthValues?void 0:ei.depthStencilTexture),e.setRenderTarget(k))}let bn=ge[an];void 0===bn&&(bn=new vr,bn.layers.enable(an),bn.viewport=new qn,ge[an]=bn),bn.matrix.fromArray(pt.transform.matrix),bn.projectionMatrix.fromArray(pt.projectionMatrix),bn.viewport.set(Qn.x,Qn.y,Qn.width,Qn.height),0===an&&X.matrix.copy(bn.matrix),!0===Wt&&X.cameras.push(bn)}}for(let Jt=0;Jt<J.length;Jt++){const Wt=K[Jt],an=J[Jt];null!==Wt&&void 0!==an&&an.update(Wt,lt,b||g)}if(vt&&vt(ot,lt),lt.detectedPlanes){s.dispatchEvent({type:"planesdetected",data:lt.detectedPlanes});let Jt=null;for(const Wt of $)lt.detectedPlanes.has(Wt)||(null===Jt&&(Jt=[]),Jt.push(Wt));if(null!==Jt)for(const Wt of Jt)$.delete(Wt),q.delete(Wt),s.dispatchEvent({type:"planeremoved",data:Wt});for(const Wt of lt.detectedPlanes)if($.has(Wt)){const an=q.get(Wt);Wt.lastChangedTime>an&&(q.set(Wt,Wt.lastChangedTime),s.dispatchEvent({type:"planechanged",data:Wt}))}else $.add(Wt),q.set(Wt,lt.lastChangedTime),s.dispatchEvent({type:"planeadded",data:Wt})}L=null}),this.setAnimationLoop=function(ot){vt=ot},this.dispose=function(){}}}function Pv(v,e){function l(j,k){j.opacity.value=k.opacity,k.color&&j.diffuse.value.copy(k.color),k.emissive&&j.emissive.value.copy(k.emissive).multiplyScalar(k.emissiveIntensity),k.map&&(j.map.value=k.map),k.alphaMap&&(j.alphaMap.value=k.alphaMap),k.bumpMap&&(j.bumpMap.value=k.bumpMap,j.bumpScale.value=k.bumpScale,k.side===et&&(j.bumpScale.value*=-1)),k.displacementMap&&(j.displacementMap.value=k.displacementMap,j.displacementScale.value=k.displacementScale,j.displacementBias.value=k.displacementBias),k.emissiveMap&&(j.emissiveMap.value=k.emissiveMap),k.normalMap&&(j.normalMap.value=k.normalMap,j.normalScale.value.copy(k.normalScale),k.side===et&&j.normalScale.value.negate()),k.specularMap&&(j.specularMap.value=k.specularMap),k.alphaTest>0&&(j.alphaTest.value=k.alphaTest);const J=e.get(k).envMap;if(J&&(j.envMap.value=J,j.flipEnvMap.value=J.isCubeTexture&&!1===J.isRenderTargetTexture?-1:1,j.reflectivity.value=k.reflectivity,j.ior.value=k.ior,j.refractionRatio.value=k.refractionRatio),k.lightMap){j.lightMap.value=k.lightMap;const q=!0!==v.physicallyCorrectLights?Math.PI:1;j.lightMapIntensity.value=k.lightMapIntensity*q}let K,$;k.aoMap&&(j.aoMap.value=k.aoMap,j.aoMapIntensity.value=k.aoMapIntensity),k.map?K=k.map:k.specularMap?K=k.specularMap:k.displacementMap?K=k.displacementMap:k.normalMap?K=k.normalMap:k.bumpMap?K=k.bumpMap:k.roughnessMap?K=k.roughnessMap:k.metalnessMap?K=k.metalnessMap:k.alphaMap?K=k.alphaMap:k.emissiveMap?K=k.emissiveMap:k.clearcoatMap?K=k.clearcoatMap:k.clearcoatNormalMap?K=k.clearcoatNormalMap:k.clearcoatRoughnessMap?K=k.clearcoatRoughnessMap:k.iridescenceMap?K=k.iridescenceMap:k.iridescenceThicknessMap?K=k.iridescenceThicknessMap:k.specularIntensityMap?K=k.specularIntensityMap:k.specularColorMap?K=k.specularColorMap:k.transmissionMap?K=k.transmissionMap:k.thicknessMap?K=k.thicknessMap:k.sheenColorMap?K=k.sheenColorMap:k.sheenRoughnessMap&&(K=k.sheenRoughnessMap),void 0!==K&&(K.isWebGLRenderTarget&&(K=K.texture),!0===K.matrixAutoUpdate&&K.updateMatrix(),j.uvTransform.value.copy(K.matrix)),k.aoMap?$=k.aoMap:k.lightMap&&($=k.lightMap),void 0!==$&&($.isWebGLRenderTarget&&($=$.texture),!0===$.matrixAutoUpdate&&$.updateMatrix(),j.uv2Transform.value.copy($.matrix))}return{refreshFogUniforms:function t(j,k){k.color.getRGB(j.fogColor.value,ye(v)),k.isFog?(j.fogNear.value=k.near,j.fogFar.value=k.far):k.isFogExp2&&(j.fogDensity.value=k.density)},refreshMaterialUniforms:function s(j,k,J,K,$){k.isMeshBasicMaterial||k.isMeshLambertMaterial?l(j,k):k.isMeshToonMaterial?(l(j,k),function S(j,k){k.gradientMap&&(j.gradientMap.value=k.gradientMap)}(j,k)):k.isMeshPhongMaterial?(l(j,k),function x(j,k){j.specular.value.copy(k.specular),j.shininess.value=Math.max(k.shininess,1e-4)}(j,k)):k.isMeshStandardMaterial?(l(j,k),function A(j,k){j.roughness.value=k.roughness,j.metalness.value=k.metalness,k.roughnessMap&&(j.roughnessMap.value=k.roughnessMap),k.metalnessMap&&(j.metalnessMap.value=k.metalnessMap),e.get(k).envMap&&(j.envMapIntensity.value=k.envMapIntensity)}(j,k),k.isMeshPhysicalMaterial&&function E(j,k,J){j.ior.value=k.ior,k.sheen>0&&(j.sheenColor.value.copy(k.sheenColor).multiplyScalar(k.sheen),j.sheenRoughness.value=k.sheenRoughness,k.sheenColorMap&&(j.sheenColorMap.value=k.sheenColorMap),k.sheenRoughnessMap&&(j.sheenRoughnessMap.value=k.sheenRoughnessMap)),k.clearcoat>0&&(j.clearcoat.value=k.clearcoat,j.clearcoatRoughness.value=k.clearcoatRoughness,k.clearcoatMap&&(j.clearcoatMap.value=k.clearcoatMap),k.clearcoatRoughnessMap&&(j.clearcoatRoughnessMap.value=k.clearcoatRoughnessMap),k.clearcoatNormalMap&&(j.clearcoatNormalScale.value.copy(k.clearcoatNormalScale),j.clearcoatNormalMap.value=k.clearcoatNormalMap,k.side===et&&j.clearcoatNormalScale.value.negate())),k.iridescence>0&&(j.iridescence.value=k.iridescence,j.iridescenceIOR.value=k.iridescenceIOR,j.iridescenceThicknessMinimum.value=k.iridescenceThicknessRange[0],j.iridescenceThicknessMaximum.value=k.iridescenceThicknessRange[1],k.iridescenceMap&&(j.iridescenceMap.value=k.iridescenceMap),k.iridescenceThicknessMap&&(j.iridescenceThicknessMap.value=k.iridescenceThicknessMap)),k.transmission>0&&(j.transmission.value=k.transmission,j.transmissionSamplerMap.value=J.texture,j.transmissionSamplerSize.value.set(J.width,J.height),k.transmissionMap&&(j.transmissionMap.value=k.transmissionMap),j.thickness.value=k.thickness,k.thicknessMap&&(j.thicknessMap.value=k.thicknessMap),j.attenuationDistance.value=k.attenuationDistance,j.attenuationColor.value.copy(k.attenuationColor)),j.specularIntensity.value=k.specularIntensity,j.specularColor.value.copy(k.specularColor),k.specularIntensityMap&&(j.specularIntensityMap.value=k.specularIntensityMap),k.specularColorMap&&(j.specularColorMap.value=k.specularColorMap)}(j,k,$)):k.isMeshMatcapMaterial?(l(j,k),function L(j,k){k.matcap&&(j.matcap.value=k.matcap)}(j,k)):k.isMeshDepthMaterial?l(j,k):k.isMeshDistanceMaterial?(l(j,k),function G(j,k){j.referencePosition.value.copy(k.referencePosition),j.nearDistance.value=k.nearDistance,j.farDistance.value=k.farDistance}(j,k)):k.isMeshNormalMaterial?l(j,k):k.isLineBasicMaterial?(function h(j,k){j.diffuse.value.copy(k.color),j.opacity.value=k.opacity}(j,k),k.isLineDashedMaterial&&function g(j,k){j.dashSize.value=k.dashSize,j.totalSize.value=k.dashSize+k.gapSize,j.scale.value=k.scale}(j,k)):k.isPointsMaterial?function _(j,k,J,K){let $;j.diffuse.value.copy(k.color),j.opacity.value=k.opacity,j.size.value=k.size*J,j.scale.value=.5*K,k.map&&(j.map.value=k.map),k.alphaMap&&(j.alphaMap.value=k.alphaMap),k.alphaTest>0&&(j.alphaTest.value=k.alphaTest),k.map?$=k.map:k.alphaMap&&($=k.alphaMap),void 0!==$&&(!0===$.matrixAutoUpdate&&$.updateMatrix(),j.uvTransform.value.copy($.matrix))}(j,k,J,K):k.isSpriteMaterial?function b(j,k){let J;j.diffuse.value.copy(k.color),j.opacity.value=k.opacity,j.rotation.value=k.rotation,k.map&&(j.map.value=k.map),k.alphaMap&&(j.alphaMap.value=k.alphaMap),k.alphaTest>0&&(j.alphaTest.value=k.alphaTest),k.map?J=k.map:k.alphaMap&&(J=k.alphaMap),void 0!==J&&(!0===J.matrixAutoUpdate&&J.updateMatrix(),j.uvTransform.value.copy(J.matrix))}(j,k):k.isShadowMaterial?(j.color.value.copy(k.color),j.opacity.value=k.opacity):k.isShaderMaterial&&(k.uniformsNeedUpdate=!1)}}}function Ey(v,e,t,s){let l={},h={},g=[];const _=t.isWebGL2?v.getParameter(35375):0;function L(K,$,q){const se=K.value;if(void 0===q[$]){if("number"==typeof se)q[$]=se;else{const de=Array.isArray(se)?se:[se],ge=[];for(let X=0;X<de.length;X++)ge.push(de[X].clone());q[$]=ge}return!0}if("number"==typeof se){if(q[$]!==se)return q[$]=se,!0}else{const de=Array.isArray(q[$])?q[$]:[q[$]],ge=Array.isArray(se)?se:[se];for(let X=0;X<de.length;X++){const fe=de[X];if(!1===fe.equals(ge[X]))return fe.copy(ge[X]),!0}}return!1}function j(K){const $={boundary:0,storage:0};return"number"==typeof K?($.boundary=4,$.storage=4):K.isVector2?($.boundary=8,$.storage=8):K.isVector3||K.isColor?($.boundary=16,$.storage=12):K.isVector4?($.boundary=16,$.storage=16):K.isMatrix3?($.boundary=48,$.storage=48):K.isMatrix4?($.boundary=64,$.storage=64):K.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",K),$}function k(K){const $=K.target;$.removeEventListener("dispose",k);const q=g.indexOf($.__bindingPointIndex);g.splice(q,1),v.deleteBuffer(l[$.id]),delete l[$.id],delete h[$.id]}return{bind:function b(K,$){s.uniformBlockBinding(K,$.program)},update:function x(K,$){let q=l[K.id];void 0===q&&(function G(K){const $=K.uniforms;let q=0;let de=0;for(let ge=0,X=$.length;ge<X;ge++){const fe=$[ge],Te={boundary:0,storage:0},Ye=Array.isArray(fe.value)?fe.value:[fe.value];for(let yt=0,He=Ye.length;yt<He;yt++){const ct=j(Ye[yt]);Te.boundary+=ct.boundary,Te.storage+=ct.storage}fe.__data=new Float32Array(Te.storage/Float32Array.BYTES_PER_ELEMENT),fe.__offset=q,ge>0&&(de=q%16,0!==de&&16-de-Te.boundary<0&&(q+=16-de,fe.__offset=q)),q+=Te.storage}de=q%16,de>0&&(q+=16-de),K.__size=q,K.__cache={}}(K),q=function S(K){const $=function A(){for(let K=0;K<_;K++)if(-1===g.indexOf(K))return g.push(K),K;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();K.__bindingPointIndex=$;const q=v.createBuffer(),se=K.__size,de=K.usage;return v.bindBuffer(35345,q),v.bufferData(35345,se,de),v.bindBuffer(35345,null),v.bindBufferBase(35345,$,q),q}(K),l[K.id]=q,K.addEventListener("dispose",k)),s.updateUBOMapping(K,$.program);const de=e.render.frame;h[K.id]!==de&&(function E(K){const q=K.uniforms,se=K.__cache;v.bindBuffer(35345,l[K.id]);for(let de=0,ge=q.length;de<ge;de++){const X=q[de];if(!0===L(X,de,se)){const fe=X.__offset,Te=Array.isArray(X.value)?X.value:[X.value];let Ye=0;for(let yt=0;yt<Te.length;yt++){const He=Te[yt],Ae=j(He);"number"==typeof He?(X.__data[0]=He,v.bufferSubData(35345,fe+Ye,X.__data)):He.isMatrix3?(X.__data[0]=He.elements[0],X.__data[1]=He.elements[1],X.__data[2]=He.elements[2],X.__data[3]=He.elements[0],X.__data[4]=He.elements[3],X.__data[5]=He.elements[4],X.__data[6]=He.elements[5],X.__data[7]=He.elements[0],X.__data[8]=He.elements[6],X.__data[9]=He.elements[7],X.__data[10]=He.elements[8],X.__data[11]=He.elements[0]):(He.toArray(X.__data,Ye),Ye+=Ae.storage/Float32Array.BYTES_PER_ELEMENT)}v.bufferSubData(35345,fe,X.__data)}}v.bindBuffer(35345,null)}(K),h[K.id]=de)},dispose:function J(){for(const K in l)v.deleteBuffer(l[K]);g=[],l={},h={}}}}function Ov(v={}){this.isWebGLRenderer=!0;const e=void 0!==v.canvas?v.canvas:function Ay(){const v=xl("canvas");return v.style.display="block",v}(),t=void 0!==v.context?v.context:null,s=void 0===v.depth||v.depth,l=void 0===v.stencil||v.stencil,h=void 0!==v.antialias&&v.antialias,g=void 0===v.premultipliedAlpha||v.premultipliedAlpha,_=void 0!==v.preserveDrawingBuffer&&v.preserveDrawingBuffer,b=void 0!==v.powerPreference?v.powerPreference:"default",x=void 0!==v.failIfMajorPerformanceCaveat&&v.failIfMajorPerformanceCaveat;let S;S=null!==t?t.getContextAttributes().alpha:void 0!==v.alpha&&v.alpha;let A=null,E=null;const L=[],G=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=ps,this.physicallyCorrectLights=!1,this.toneMapping=lr,this.toneMappingExposure=1;const j=this;let k=!1,J=0,K=0,$=null,q=-1,se=null;const de=new qn,ge=new qn;let X=null,fe=e.width,Te=e.height,Ye=1,yt=null,He=null;const Ae=new qn(0,0,fe,Te),ct=new qn(0,0,fe,Te);let Mt=!1;const Lt=new Wd;let vt=!1,jt=!1,Rt=null;const ot=new Vt,lt=new ft,Jt=new le,Wt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function an(){return null===$?Ye:1}let bn,ei,ln,Ci,bt,_t,en,wn,tn,ui,zn,Wn,Ar,sr,pe,re,it,Nt,Ht,hn,oi,pn,gt,jn,pt=t;function Qn(ce,Ue){for(let dt=0;dt<ce.length;dt++){const mt=e.getContext(ce[dt],Ue);if(null!==mt)return mt}return null}try{const ce={alpha:!0,depth:s,stencil:l,antialias:h,premultipliedAlpha:g,preserveDrawingBuffer:_,powerPreference:b,failIfMajorPerformanceCaveat:x};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${Y}`),e.addEventListener("webglcontextlost",$n,!1),e.addEventListener("webglcontextrestored",Fn,!1),e.addEventListener("webglcontextcreationerror",or,!1),null===pt){const Ue=["webgl2","webgl","experimental-webgl"];if(!0===j.isWebGL1Renderer&&Ue.shift(),pt=Qn(Ue,ce),null===pt)throw Qn(Ue)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===pt.getShaderPrecisionFormat&&(pt.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(ce){throw console.error("THREE.WebGLRenderer: "+ce.message),ce}function ti(){bn=new t_(pt),ei=new Rf(pt,bn,v),bn.init(ei),pn=new T_(pt,bn,ei),ln=new Th(pt,bn,ei),Ci=new n_,bt=new Yf,_t=new Oc(pt,bn,ln,bt,ei,pn,Ci),en=new Qg(j),wn=new ah(j),tn=new Ku(pt,ei),gt=new rm(pt,bn,tn,ei),ui=new om(pt,tn,Ci,gt),zn=new am(pt,ui,tn,Ci),Ht=new yr(pt,ei,_t),re=new Sf(bt),Wn=new $f(j,en,wn,bn,ei,gt,re),Ar=new Pv(j,bt),sr=new b_,pe=new wm(bn,ei),Nt=new Xg(j,en,wn,ln,zn,S,g),it=new Zf(j,zn,ei),jn=new Ey(pt,Ci,ei,ln),hn=new bv(pt,bn,Ci,ei),oi=new lh(pt,bn,Ci,ei),Ci.programs=Wn.programs,j.capabilities=ei,j.extensions=bn,j.properties=bt,j.renderLists=sr,j.shadowMap=it,j.state=ln,j.info=Ci}ti();const En=new Cm(j,pt);function $n(ce){ce.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),k=!0}function Fn(){console.log("THREE.WebGLRenderer: Context Restored."),k=!1;const ce=Ci.autoReset,Ue=it.enabled,dt=it.autoUpdate,Le=it.needsUpdate,mt=it.type;ti(),Ci.autoReset=ce,it.enabled=Ue,it.autoUpdate=dt,it.needsUpdate=Le,it.type=mt}function or(ce){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",ce.statusMessage)}function zr(ce){const Ue=ce.target;Ue.removeEventListener("dispose",zr),function oo(ce){(function we(ce){const Ue=bt.get(ce).programs;void 0!==Ue&&(Ue.forEach(function(dt){Wn.releaseProgram(dt)}),ce.isShaderMaterial&&Wn.releaseShaderCache(ce))})(ce),bt.remove(ce)}(Ue)}this.xr=En,this.getContext=function(){return pt},this.getContextAttributes=function(){return pt.getContextAttributes()},this.forceContextLoss=function(){const ce=bn.get("WEBGL_lose_context");ce&&ce.loseContext()},this.forceContextRestore=function(){const ce=bn.get("WEBGL_lose_context");ce&&ce.restoreContext()},this.getPixelRatio=function(){return Ye},this.setPixelRatio=function(ce){void 0!==ce&&(Ye=ce,this.setSize(fe,Te,!1))},this.getSize=function(ce){return ce.set(fe,Te)},this.setSize=function(ce,Ue,dt){En.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(fe=ce,Te=Ue,e.width=Math.floor(ce*Ye),e.height=Math.floor(Ue*Ye),!1!==dt&&(e.style.width=ce+"px",e.style.height=Ue+"px"),this.setViewport(0,0,ce,Ue))},this.getDrawingBufferSize=function(ce){return ce.set(fe*Ye,Te*Ye).floor()},this.setDrawingBufferSize=function(ce,Ue,dt){fe=ce,Te=Ue,Ye=dt,e.width=Math.floor(ce*dt),e.height=Math.floor(Ue*dt),this.setViewport(0,0,ce,Ue)},this.getCurrentViewport=function(ce){return ce.copy(de)},this.getViewport=function(ce){return ce.copy(Ae)},this.setViewport=function(ce,Ue,dt,Le){ce.isVector4?Ae.set(ce.x,ce.y,ce.z,ce.w):Ae.set(ce,Ue,dt,Le),ln.viewport(de.copy(Ae).multiplyScalar(Ye).floor())},this.getScissor=function(ce){return ce.copy(ct)},this.setScissor=function(ce,Ue,dt,Le){ce.isVector4?ct.set(ce.x,ce.y,ce.z,ce.w):ct.set(ce,Ue,dt,Le),ln.scissor(ge.copy(ct).multiplyScalar(Ye).floor())},this.getScissorTest=function(){return Mt},this.setScissorTest=function(ce){ln.setScissorTest(Mt=ce)},this.setOpaqueSort=function(ce){yt=ce},this.setTransparentSort=function(ce){He=ce},this.getClearColor=function(ce){return ce.copy(Nt.getClearColor())},this.setClearColor=function(){Nt.setClearColor.apply(Nt,arguments)},this.getClearAlpha=function(){return Nt.getClearAlpha()},this.setClearAlpha=function(){Nt.setClearAlpha.apply(Nt,arguments)},this.clear=function(ce=!0,Ue=!0,dt=!0){let Le=0;ce&&(Le|=16384),Ue&&(Le|=256),dt&&(Le|=1024),pt.clear(Le)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",$n,!1),e.removeEventListener("webglcontextrestored",Fn,!1),e.removeEventListener("webglcontextcreationerror",or,!1),sr.dispose(),pe.dispose(),bt.dispose(),en.dispose(),wn.dispose(),zn.dispose(),gt.dispose(),jn.dispose(),Wn.dispose(),En.dispose(),En.removeEventListener("sessionstart",yn),En.removeEventListener("sessionend",An),Rt&&(Rt.dispose(),Rt=null),ar.stop()},this.renderBufferDirect=function(ce,Ue,dt,Le,mt,kn){null===Ue&&(Ue=Wt);const _i=mt.isMesh&&mt.matrixWorld.determinant()<0,Ri=function v0(ce,Ue,dt,Le,mt){!0!==Ue.isScene&&(Ue=Wt),_t.resetTextureUnits();const kn=Ue.fog,Ri=null===$?j.outputEncoding:!0===$.isXRRenderTarget?$.texture.encoding:ps,Ai=(Le.isMeshStandardMaterial?wn:en).get(Le.envMap||(Le.isMeshStandardMaterial?Ue.environment:null)),nr=!0===Le.vertexColors&&!!dt.attributes.color&&4===dt.attributes.color.itemSize,Wi=!!Le.normalMap&&!!dt.attributes.tangent,$i=!!dt.morphAttributes.position,qr=!!dt.morphAttributes.normal,La=!!dt.morphAttributes.color,Vl=Le.toneMapped?j.toneMapping:lr,Bo=dt.morphAttributes.position||dt.morphAttributes.normal||dt.morphAttributes.color,As=void 0!==Bo?Bo.length:0,Li=bt.get(Le),Od=E.state.lights;!0!==vt||!0!==jt&&ce===se||re.setState(Le,ce,ce===se&&Le.id===q);let ao=!1;Le.version===Li.__version?(Li.needsLights&&Li.lightsStateVersion!==Od.state.version||Li.outputEncoding!==Ri||mt.isInstancedMesh&&!1===Li.instancing||!mt.isInstancedMesh&&!0===Li.instancing||mt.isSkinnedMesh&&!1===Li.skinning||!mt.isSkinnedMesh&&!0===Li.skinning||Li.envMap!==Ai||!0===Le.fog&&Li.fog!==kn||void 0!==Li.numClippingPlanes&&(Li.numClippingPlanes!==re.numPlanes||Li.numIntersection!==re.numIntersection)||Li.vertexAlphas!==nr||Li.vertexTangents!==Wi||Li.morphTargets!==$i||Li.morphNormals!==qr||Li.morphColors!==La||Li.toneMapping!==Vl||!0===ei.isWebGL2&&Li.morphTargetsCount!==As)&&(ao=!0):(ao=!0,Li.__version=Le.version);let Nd=Li.currentProgram;!0===ao&&(Nd=ul(Le,Ue,mt));let my=!1,Gu=!1,nf=!1;const ta=Nd.getUniforms(),Fd=Li.uniforms;if(ln.useProgram(Nd.program)&&(my=!0,Gu=!0,nf=!0),Le.id!==q&&(q=Le.id,Gu=!0),my||se!==ce){if(ta.setValue(pt,"projectionMatrix",ce.projectionMatrix),ei.logarithmicDepthBuffer&&ta.setValue(pt,"logDepthBufFC",2/(Math.log(ce.far+1)/Math.LN2)),se!==ce&&(se=ce,Gu=!0,nf=!0),Le.isShaderMaterial||Le.isMeshPhongMaterial||Le.isMeshToonMaterial||Le.isMeshStandardMaterial||Le.envMap){const _a=ta.map.cameraPosition;void 0!==_a&&_a.setValue(pt,Jt.setFromMatrixPosition(ce.matrixWorld))}(Le.isMeshPhongMaterial||Le.isMeshToonMaterial||Le.isMeshLambertMaterial||Le.isMeshBasicMaterial||Le.isMeshStandardMaterial||Le.isShaderMaterial)&&ta.setValue(pt,"isOrthographic",!0===ce.isOrthographicCamera),(Le.isMeshPhongMaterial||Le.isMeshToonMaterial||Le.isMeshLambertMaterial||Le.isMeshBasicMaterial||Le.isMeshStandardMaterial||Le.isShaderMaterial||Le.isShadowMaterial||mt.isSkinnedMesh)&&ta.setValue(pt,"viewMatrix",ce.matrixWorldInverse)}if(mt.isSkinnedMesh){ta.setOptional(pt,mt,"bindMatrix"),ta.setOptional(pt,mt,"bindMatrixInverse");const _a=mt.skeleton;_a&&(ei.floatVertexTextures?(null===_a.boneTexture&&_a.computeBoneTexture(),ta.setValue(pt,"boneTexture",_a.boneTexture,_t),ta.setValue(pt,"boneTextureSize",_a.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const og=dt.morphAttributes;if((void 0!==og.position||void 0!==og.normal||void 0!==og.color&&!0===ei.isWebGL2)&&Ht.update(mt,dt,Le,Nd),(Gu||Li.receiveShadow!==mt.receiveShadow)&&(Li.receiveShadow=mt.receiveShadow,ta.setValue(pt,"receiveShadow",mt.receiveShadow)),Le.isMeshGouraudMaterial&&null!==Le.envMap&&(Fd.envMap.value=Ai,Fd.flipEnvMap.value=Ai.isCubeTexture&&!1===Ai.isRenderTargetTexture?-1:1),Gu&&(ta.setValue(pt,"toneMappingExposure",j.toneMappingExposure),Li.needsLights&&function Mp(ce,Ue){ce.ambientLightColor.needsUpdate=Ue,ce.lightProbe.needsUpdate=Ue,ce.directionalLights.needsUpdate=Ue,ce.directionalLightShadows.needsUpdate=Ue,ce.pointLights.needsUpdate=Ue,ce.pointLightShadows.needsUpdate=Ue,ce.spotLights.needsUpdate=Ue,ce.spotLightShadows.needsUpdate=Ue,ce.rectAreaLights.needsUpdate=Ue,ce.hemisphereLights.needsUpdate=Ue}(Fd,nf),kn&&!0===Le.fog&&Ar.refreshFogUniforms(Fd,kn),Ar.refreshMaterialUniforms(Fd,Le,Ye,Te,Rt),gu.upload(pt,Li.uniformsList,Fd,_t)),Le.isShaderMaterial&&!0===Le.uniformsNeedUpdate&&(gu.upload(pt,Li.uniformsList,Fd,_t),Le.uniformsNeedUpdate=!1),Le.isSpriteMaterial&&ta.setValue(pt,"center",mt.center),ta.setValue(pt,"modelViewMatrix",mt.modelViewMatrix),ta.setValue(pt,"normalMatrix",mt.normalMatrix),ta.setValue(pt,"modelMatrix",mt.matrixWorld),Le.isShaderMaterial||Le.isRawShaderMaterial){const _a=Le.uniformsGroups;for(let xp=0,gy=_a.length;xp<gy;xp++)if(ei.isWebGL2){const ag=_a[xp];jn.update(ag,Nd),jn.bind(ag,Nd)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Nd}(ce,Ue,dt,Le,mt);ln.setMaterial(Le,_i);let Ai=dt.index,nr=1;!0===Le.wireframe&&(Ai=ui.getWireframeAttribute(dt),nr=2);const Wi=dt.drawRange,$i=dt.attributes.position;let qr=Wi.start*nr,La=(Wi.start+Wi.count)*nr;null!==kn&&(qr=Math.max(qr,kn.start*nr),La=Math.min(La,(kn.start+kn.count)*nr)),null!==Ai?(qr=Math.max(qr,0),La=Math.min(La,Ai.count)):null!=$i&&(qr=Math.max(qr,0),La=Math.min(La,$i.count));const Vl=La-qr;if(Vl<0||Vl===1/0)return;gt.setup(mt,Le,Ri,dt,Ai);let Bo,As=hn;if(null!==Ai&&(Bo=tn.get(Ai),As=oi,As.setIndex(Bo)),mt.isMesh)!0===Le.wireframe?(ln.setLineWidth(Le.wireframeLinewidth*an()),As.setMode(1)):As.setMode(4);else if(mt.isLine){let Li=Le.linewidth;void 0===Li&&(Li=1),ln.setLineWidth(Li*an()),As.setMode(mt.isLineSegments?1:mt.isLineLoop?2:3)}else mt.isPoints?As.setMode(0):mt.isSprite&&As.setMode(4);if(mt.isInstancedMesh)As.renderInstances(qr,Vl,mt.count);else if(dt.isInstancedBufferGeometry){const Od=Math.min(dt.instanceCount,void 0!==dt._maxInstanceCount?dt._maxInstanceCount:1/0);As.renderInstances(qr,Vl,Od)}else As.render(qr,Vl)},this.compile=function(ce,Ue){function dt(Le,mt,kn){!0===Le.transparent&&Le.side===Je?(Le.side=et,Le.needsUpdate=!0,ul(Le,mt,kn),Le.side=Xt,Le.needsUpdate=!0,ul(Le,mt,kn),Le.side=Je):ul(Le,mt,kn)}E=pe.get(ce),E.init(),G.push(E),ce.traverseVisible(function(Le){Le.isLight&&Le.layers.test(Ue.layers)&&(E.pushLight(Le),Le.castShadow&&E.pushShadow(Le))}),E.setupLights(j.physicallyCorrectLights),ce.traverse(function(Le){const mt=Le.material;if(mt)if(Array.isArray(mt))for(let kn=0;kn<mt.length;kn++)dt(mt[kn],ce,Le);else dt(mt,ce,Le)}),G.pop(),E=null};let ht=null;function yn(){ar.stop()}function An(){ar.start()}const ar=new ou;function Gs(ce,Ue,dt,Le){if(!1===ce.visible)return;if(ce.layers.test(Ue.layers))if(ce.isGroup)dt=ce.renderOrder;else if(ce.isLOD)!0===ce.autoUpdate&&ce.update(Ue);else if(ce.isLight)E.pushLight(ce),ce.castShadow&&E.pushShadow(ce);else if(ce.isSprite){if(!ce.frustumCulled||Lt.intersectsSprite(ce)){Le&&Jt.setFromMatrixPosition(ce.matrixWorld).applyMatrix4(ot);const _i=zn.update(ce),Ri=ce.material;Ri.visible&&A.push(ce,_i,Ri,dt,Jt.z,null)}}else if((ce.isMesh||ce.isLine||ce.isPoints)&&(ce.isSkinnedMesh&&ce.skeleton.frame!==Ci.render.frame&&(ce.skeleton.update(),ce.skeleton.frame=Ci.render.frame),!ce.frustumCulled||Lt.intersectsObject(ce))){Le&&Jt.setFromMatrixPosition(ce.matrixWorld).applyMatrix4(ot);const _i=zn.update(ce),Ri=ce.material;if(Array.isArray(Ri)){const Ai=_i.groups;for(let nr=0,Wi=Ai.length;nr<Wi;nr++){const $i=Ai[nr],qr=Ri[$i.materialIndex];qr&&qr.visible&&A.push(ce,_i,qr,dt,Jt.z,$i)}}else Ri.visible&&A.push(ce,_i,Ri,dt,Jt.z,null)}const kn=ce.children;for(let _i=0,Ri=kn.length;_i<Ri;_i++)Gs(kn[_i],Ue,dt,Le)}function mo(ce,Ue,dt,Le){const mt=ce.opaque,kn=ce.transmissive,_i=ce.transparent;E.setupLightsView(dt),kn.length>0&&function Pd(ce,Ue,dt){const Le=ei.isWebGL2;null===Rt&&(Rt=new la(1,1,{generateMipmaps:!0,type:bn.has("EXT_color_buffer_half_float")?Xr:ls,minFilter:Zn,samples:Le&&!0===h?4:0})),j.getDrawingBufferSize(lt),Le?Rt.setSize(lt.x,lt.y):Rt.setSize(Ml(lt.x),Ml(lt.y));const mt=j.getRenderTarget();j.setRenderTarget(Rt),j.clear();const kn=j.toneMapping;j.toneMapping=lr,Zr(ce,Ue,dt),j.toneMapping=kn,_t.updateMultisampleRenderTarget(Rt),_t.updateRenderTargetMipmap(Rt),j.setRenderTarget(mt)}(mt,Ue,dt),Le&&ln.viewport(de.copy(Le)),mt.length>0&&Zr(mt,Ue,dt),kn.length>0&&Zr(kn,Ue,dt),_i.length>0&&Zr(_i,Ue,dt),ln.buffers.depth.setTest(!0),ln.buffers.depth.setMask(!0),ln.buffers.color.setMask(!0),ln.setPolygonOffset(!1)}function Zr(ce,Ue,dt){const Le=!0===Ue.isScene?Ue.overrideMaterial:null;for(let mt=0,kn=ce.length;mt<kn;mt++){const _i=ce[mt],Ri=_i.object,Ai=_i.geometry,nr=null===Le?_i.material:Le,Wi=_i.group;Ri.layers.test(dt.layers)&&Zc(Ri,Ue,dt,Ai,nr,Wi)}}function Zc(ce,Ue,dt,Le,mt,kn){ce.onBeforeRender(j,Ue,dt,Le,mt,kn),ce.modelViewMatrix.multiplyMatrices(dt.matrixWorldInverse,ce.matrixWorld),ce.normalMatrix.getNormalMatrix(ce.modelViewMatrix),mt.onBeforeRender(j,Ue,dt,Le,ce,kn),!0===mt.transparent&&mt.side===Je?(mt.side=et,mt.needsUpdate=!0,j.renderBufferDirect(dt,Ue,Le,mt,ce,kn),mt.side=Xt,mt.needsUpdate=!0,j.renderBufferDirect(dt,Ue,Le,mt,ce,kn),mt.side=Je):j.renderBufferDirect(dt,Ue,Le,mt,ce,kn),ce.onAfterRender(j,Ue,dt,Le,mt,kn)}function ul(ce,Ue,dt){!0!==Ue.isScene&&(Ue=Wt);const Le=bt.get(ce),mt=E.state.lights,_i=mt.state.version,Ri=Wn.getParameters(ce,mt.state,E.state.shadowsArray,Ue,dt),Ai=Wn.getProgramCacheKey(Ri);let nr=Le.programs;Le.environment=ce.isMeshStandardMaterial?Ue.environment:null,Le.fog=Ue.fog,Le.envMap=(ce.isMeshStandardMaterial?wn:en).get(ce.envMap||Le.environment),void 0===nr&&(ce.addEventListener("dispose",zr),nr=new Map,Le.programs=nr);let Wi=nr.get(Ai);if(void 0!==Wi){if(Le.currentProgram===Wi&&Le.lightsStateVersion===_i)return fy(ce,Ri),Wi}else Ri.uniforms=Wn.getUniforms(ce),ce.onBuild(dt,Ri,j),ce.onBeforeCompile(Ri,j),Wi=Wn.acquireProgram(Ri,Ai),nr.set(Ai,Wi),Le.uniforms=Ri.uniforms;const $i=Le.uniforms;(!ce.isShaderMaterial&&!ce.isRawShaderMaterial||!0===ce.clipping)&&($i.clippingPlanes=re.uniform),fy(ce,Ri),Le.needsLights=function py(ce){return ce.isMeshLambertMaterial||ce.isMeshToonMaterial||ce.isMeshPhongMaterial||ce.isMeshStandardMaterial||ce.isShadowMaterial||ce.isShaderMaterial&&!0===ce.lights}(ce),Le.lightsStateVersion=_i,Le.needsLights&&($i.ambientLightColor.value=mt.state.ambient,$i.lightProbe.value=mt.state.probe,$i.directionalLights.value=mt.state.directional,$i.directionalLightShadows.value=mt.state.directionalShadow,$i.spotLights.value=mt.state.spot,$i.spotLightShadows.value=mt.state.spotShadow,$i.rectAreaLights.value=mt.state.rectArea,$i.ltc_1.value=mt.state.rectAreaLTC1,$i.ltc_2.value=mt.state.rectAreaLTC2,$i.pointLights.value=mt.state.point,$i.pointLightShadows.value=mt.state.pointShadow,$i.hemisphereLights.value=mt.state.hemi,$i.directionalShadowMap.value=mt.state.directionalShadowMap,$i.directionalShadowMatrix.value=mt.state.directionalShadowMatrix,$i.spotShadowMap.value=mt.state.spotShadowMap,$i.spotLightMatrix.value=mt.state.spotLightMatrix,$i.spotLightMap.value=mt.state.spotLightMap,$i.pointShadowMap.value=mt.state.pointShadowMap,$i.pointShadowMatrix.value=mt.state.pointShadowMatrix);const qr=Wi.getUniforms(),La=gu.seqWithValue(qr.seq,$i);return Le.currentProgram=Wi,Le.uniformsList=La,Wi}function fy(ce,Ue){const dt=bt.get(ce);dt.outputEncoding=Ue.outputEncoding,dt.instancing=Ue.instancing,dt.skinning=Ue.skinning,dt.morphTargets=Ue.morphTargets,dt.morphNormals=Ue.morphNormals,dt.morphColors=Ue.morphColors,dt.morphTargetsCount=Ue.morphTargetsCount,dt.numClippingPlanes=Ue.numClippingPlanes,dt.numIntersection=Ue.numClipIntersection,dt.vertexAlphas=Ue.vertexAlphas,dt.vertexTangents=Ue.vertexTangents,dt.toneMapping=Ue.toneMapping}ar.setAnimationLoop(function Ft(ce){ht&&ht(ce)}),typeof self<"u"&&ar.setContext(self),this.setAnimationLoop=function(ce){ht=ce,En.setAnimationLoop(ce),null===ce?ar.stop():ar.start()},En.addEventListener("sessionstart",yn),En.addEventListener("sessionend",An),this.render=function(ce,Ue){if(void 0===Ue||!0===Ue.isCamera){if(!0!==k){if(!0===ce.matrixWorldAutoUpdate&&ce.updateMatrixWorld(),null===Ue.parent&&!0===Ue.matrixWorldAutoUpdate&&Ue.updateMatrixWorld(),!0===En.enabled&&!0===En.isPresenting&&(!0===En.cameraAutoUpdate&&En.updateCamera(Ue),Ue=En.getCamera()),!0===ce.isScene&&ce.onBeforeRender(j,ce,Ue,$),E=pe.get(ce,G.length),E.init(),G.push(E),ot.multiplyMatrices(Ue.projectionMatrix,Ue.matrixWorldInverse),Lt.setFromProjectionMatrix(ot),jt=this.localClippingEnabled,vt=re.init(this.clippingPlanes,jt,Ue),A=sr.get(ce,L.length),A.init(),L.push(A),Gs(ce,Ue,0,j.sortObjects),A.finish(),!0===j.sortObjects&&A.sort(yt,He),!0===vt&&re.beginShadows(),it.render(E.state.shadowsArray,ce,Ue),!0===vt&&re.endShadows(),!0===this.info.autoReset&&this.info.reset(),Nt.render(A,ce),E.setupLights(j.physicallyCorrectLights),Ue.isArrayCamera){const Le=Ue.cameras;for(let mt=0,kn=Le.length;mt<kn;mt++){const _i=Le[mt];mo(A,ce,_i,_i.viewport)}}else mo(A,ce,Ue);null!==$&&(_t.updateMultisampleRenderTarget($),_t.updateRenderTargetMipmap($)),!0===ce.isScene&&ce.onAfterRender(j,ce,Ue),gt.resetDefaultState(),q=-1,se=null,G.pop(),E=G.length>0?G[G.length-1]:null,L.pop(),A=L.length>0?L[L.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return J},this.getActiveMipmapLevel=function(){return K},this.getRenderTarget=function(){return $},this.setRenderTargetTextures=function(ce,Ue,dt){bt.get(ce.texture).__webglTexture=Ue,bt.get(ce.depthTexture).__webglTexture=dt;const Le=bt.get(ce);Le.__hasExternalTextures=!0,Le.__hasExternalTextures&&(Le.__autoAllocateDepthBuffer=void 0===dt,Le.__autoAllocateDepthBuffer||!0===bn.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Le.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(ce,Ue){const dt=bt.get(ce);dt.__webglFramebuffer=Ue,dt.__useDefaultFramebuffer=void 0===Ue},this.setRenderTarget=function(ce,Ue=0,dt=0){$=ce,J=Ue,K=dt;let Le=!0,mt=null,kn=!1,_i=!1;if(ce){const Ai=bt.get(ce);void 0!==Ai.__useDefaultFramebuffer?(ln.bindFramebuffer(36160,null),Le=!1):void 0===Ai.__webglFramebuffer?_t.setupRenderTarget(ce):Ai.__hasExternalTextures&&_t.rebindTextures(ce,bt.get(ce.texture).__webglTexture,bt.get(ce.depthTexture).__webglTexture);const nr=ce.texture;(nr.isData3DTexture||nr.isDataArrayTexture||nr.isCompressedArrayTexture)&&(_i=!0);const Wi=bt.get(ce).__webglFramebuffer;ce.isWebGLCubeRenderTarget?(mt=Wi[Ue],kn=!0):mt=ei.isWebGL2&&ce.samples>0&&!1===_t.useMultisampledRTT(ce)?bt.get(ce).__webglMultisampledFramebuffer:Wi,de.copy(ce.viewport),ge.copy(ce.scissor),X=ce.scissorTest}else de.copy(Ae).multiplyScalar(Ye).floor(),ge.copy(ct).multiplyScalar(Ye).floor(),X=Mt;if(ln.bindFramebuffer(36160,mt)&&ei.drawBuffers&&Le&&ln.drawBuffers(ce,mt),ln.viewport(de),ln.scissor(ge),ln.setScissorTest(X),kn){const Ai=bt.get(ce.texture);pt.framebufferTexture2D(36160,36064,34069+Ue,Ai.__webglTexture,dt)}else if(_i){const Ai=bt.get(ce.texture);pt.framebufferTextureLayer(36160,36064,Ai.__webglTexture,dt||0,Ue||0)}q=-1},this.readRenderTargetPixels=function(ce,Ue,dt,Le,mt,kn,_i){if(!ce||!ce.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Ri=bt.get(ce).__webglFramebuffer;if(ce.isWebGLCubeRenderTarget&&void 0!==_i&&(Ri=Ri[_i]),Ri){ln.bindFramebuffer(36160,Ri);try{const Ai=ce.texture,nr=Ai.format,Wi=Ai.type;if(nr!==hs&&pn.convert(nr)!==pt.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const $i=Wi===Xr&&(bn.has("EXT_color_buffer_half_float")||ei.isWebGL2&&bn.has("EXT_color_buffer_float"));if(!(Wi===ls||pn.convert(Wi)===pt.getParameter(35738)||Wi===Ti&&(ei.isWebGL2||bn.has("OES_texture_float")||bn.has("WEBGL_color_buffer_float"))||$i))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");Ue>=0&&Ue<=ce.width-Le&&dt>=0&&dt<=ce.height-mt&&pt.readPixels(Ue,dt,Le,mt,pn.convert(nr),pn.convert(Wi),kn)}finally{const Ai=null!==$?bt.get($).__webglFramebuffer:null;ln.bindFramebuffer(36160,Ai)}}},this.copyFramebufferToTexture=function(ce,Ue,dt=0){const Le=Math.pow(2,-dt),mt=Math.floor(Ue.image.width*Le),kn=Math.floor(Ue.image.height*Le);_t.setTexture2D(Ue,0),pt.copyTexSubImage2D(3553,dt,0,0,ce.x,ce.y,mt,kn),ln.unbindTexture()},this.copyTextureToTexture=function(ce,Ue,dt,Le=0){const mt=Ue.image.width,kn=Ue.image.height,_i=pn.convert(dt.format),Ri=pn.convert(dt.type);_t.setTexture2D(dt,0),pt.pixelStorei(37440,dt.flipY),pt.pixelStorei(37441,dt.premultiplyAlpha),pt.pixelStorei(3317,dt.unpackAlignment),Ue.isDataTexture?pt.texSubImage2D(3553,Le,ce.x,ce.y,mt,kn,_i,Ri,Ue.image.data):Ue.isCompressedTexture?pt.compressedTexSubImage2D(3553,Le,ce.x,ce.y,Ue.mipmaps[0].width,Ue.mipmaps[0].height,_i,Ue.mipmaps[0].data):pt.texSubImage2D(3553,Le,ce.x,ce.y,_i,Ri,Ue.image),0===Le&&dt.generateMipmaps&&pt.generateMipmap(3553),ln.unbindTexture()},this.copyTextureToTexture3D=function(ce,Ue,dt,Le,mt=0){if(j.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const kn=ce.max.x-ce.min.x+1,_i=ce.max.y-ce.min.y+1,Ri=ce.max.z-ce.min.z+1,Ai=pn.convert(Le.format),nr=pn.convert(Le.type);let Wi;if(Le.isData3DTexture)_t.setTexture3D(Le,0),Wi=32879;else{if(!Le.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");_t.setTexture2DArray(Le,0),Wi=35866}pt.pixelStorei(37440,Le.flipY),pt.pixelStorei(37441,Le.premultiplyAlpha),pt.pixelStorei(3317,Le.unpackAlignment);const $i=pt.getParameter(3314),qr=pt.getParameter(32878),La=pt.getParameter(3316),Vl=pt.getParameter(3315),Bo=pt.getParameter(32877),As=dt.isCompressedTexture?dt.mipmaps[0]:dt.image;pt.pixelStorei(3314,As.width),pt.pixelStorei(32878,As.height),pt.pixelStorei(3316,ce.min.x),pt.pixelStorei(3315,ce.min.y),pt.pixelStorei(32877,ce.min.z),dt.isDataTexture||dt.isData3DTexture?pt.texSubImage3D(Wi,mt,Ue.x,Ue.y,Ue.z,kn,_i,Ri,Ai,nr,As.data):dt.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),pt.compressedTexSubImage3D(Wi,mt,Ue.x,Ue.y,Ue.z,kn,_i,Ri,Ai,As.data)):pt.texSubImage3D(Wi,mt,Ue.x,Ue.y,Ue.z,kn,_i,Ri,Ai,nr,As),pt.pixelStorei(3314,$i),pt.pixelStorei(32878,qr),pt.pixelStorei(3316,La),pt.pixelStorei(3315,Vl),pt.pixelStorei(32877,Bo),0===mt&&Le.generateMipmaps&&pt.generateMipmap(Wi),ln.unbindTexture()},this.initTexture=function(ce){ce.isCubeTexture?_t.setTextureCube(ce,0):ce.isData3DTexture?_t.setTexture3D(ce,0):ce.isDataArrayTexture||ce.isCompressedArrayTexture?_t.setTexture2DArray(ce,0):_t.setTexture2D(ce,0),ln.unbindTexture()},this.resetState=function(){J=0,K=0,$=null,ln.reset(),gt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}(class Nv extends Ov{}).prototype.isWebGL1Renderer=!0;class D_ extends _s{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(t.backgroundIntensity=this.backgroundIntensity),t}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}class No extends jr{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new $t(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const Qf=new le,Ih=new le,Ph=new Vt,Oh=new li,pd=new O;class bs extends _s{constructor(e=new Kn,t=new No){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,s=[0];for(let l=1,h=t.count;l<h;l++)Qf.fromBufferAttribute(t,l-1),Ih.fromBufferAttribute(t,l),s[l]=s[l-1],s[l]+=Qf.distanceTo(Ih);e.setAttribute("lineDistance",new dn(s,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const s=this.geometry,l=this.matrixWorld,h=e.params.Line.threshold,g=s.drawRange;if(null===s.boundingSphere&&s.computeBoundingSphere(),pd.copy(s.boundingSphere),pd.applyMatrix4(l),pd.radius+=h,!1===e.ray.intersectsSphere(pd))return;Ph.copy(l).invert(),Oh.copy(e.ray).applyMatrix4(Ph);const _=h/((this.scale.x+this.scale.y+this.scale.z)/3),b=_*_,x=new le,S=new le,A=new le,E=new le,L=this.isLineSegments?2:1,G=s.index,k=s.attributes.position;if(null!==G)for(let $=Math.max(0,g.start),q=Math.min(G.count,g.start+g.count)-1;$<q;$+=L){const se=G.getX($),de=G.getX($+1);if(x.fromBufferAttribute(k,se),S.fromBufferAttribute(k,de),Oh.distanceSqToSegment(x,S,E,A)>b)continue;E.applyMatrix4(this.matrixWorld);const X=e.ray.origin.distanceTo(E);X<e.near||X>e.far||t.push({distance:X,point:A.clone().applyMatrix4(this.matrixWorld),index:$,face:null,faceIndex:null,object:this})}else for(let $=Math.max(0,g.start),q=Math.min(k.count,g.start+g.count)-1;$<q;$+=L){if(x.fromBufferAttribute(k,$),S.fromBufferAttribute(k,$+1),Oh.distanceSqToSegment(x,S,E,A)>b)continue;E.applyMatrix4(this.matrixWorld);const de=e.ray.origin.distanceTo(E);de<e.near||de>e.far||t.push({distance:de,point:A.clone().applyMatrix4(this.matrixWorld),index:$,face:null,faceIndex:null,object:this})}}updateMorphTargets(){const t=this.geometry.morphAttributes,s=Object.keys(t);if(s.length>0){const l=t[s[0]];if(void 0!==l){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let h=0,g=l.length;h<g;h++){const _=l[h].name||String(h);this.morphTargetInfluences.push(0),this.morphTargetDictionary[_]=h}}}}}const ep=new le,tp=new le;class Nm extends bs{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,s=[];for(let l=0,h=t.count;l<h;l+=2)ep.fromBufferAttribute(t,l),tp.fromBufferAttribute(t,l+1),s[l]=0===l?0:s[l-1],s[l+1]=s[l]+ep.distanceTo(tp);e.setAttribute("lineDistance",new dn(s,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class np extends jr{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new $t(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const Fm=new Vt,ip=new li,Fh=new O,Du=new le;class Lm extends _s{constructor(e=new Kn,t=new np){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const s=this.geometry,l=this.matrixWorld,h=e.params.Points.threshold,g=s.drawRange;if(null===s.boundingSphere&&s.computeBoundingSphere(),Fh.copy(s.boundingSphere),Fh.applyMatrix4(l),Fh.radius+=h,!1===e.ray.intersectsSphere(Fh))return;Fm.copy(l).invert(),ip.copy(e.ray).applyMatrix4(Fm);const _=h/((this.scale.x+this.scale.y+this.scale.z)/3),b=_*_,x=s.index,A=s.attributes.position;if(null!==x)for(let G=Math.max(0,g.start),j=Math.min(x.count,g.start+g.count);G<j;G++){const k=x.getX(G);Du.fromBufferAttribute(A,k),S_(Du,k,b,l,e,t,this)}else for(let G=Math.max(0,g.start),j=Math.min(A.count,g.start+g.count);G<j;G++)Du.fromBufferAttribute(A,G),S_(Du,G,b,l,e,t,this)}updateMorphTargets(){const t=this.geometry.morphAttributes,s=Object.keys(t);if(s.length>0){const l=t[s[0]];if(void 0!==l){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let h=0,g=l.length;h<g;h++){const _=l[h].name||String(h);this.morphTargetInfluences.push(0),this.morphTargetDictionary[_]=h}}}}}function S_(v,e,t,s,l,h,g){const _=ip.distanceSqToPoint(v);if(_<t){const b=new le;ip.closestPointToPoint(v,b),b.applyMatrix4(s);const x=l.ray.origin.distanceTo(b);if(x<l.near||x>l.far)return;h.push({distance:x,distanceToRay:Math.sqrt(_),point:b,index:e,face:null,object:g})}}class ma extends Kn{constructor(e=1,t=32,s=16,l=0,h=2*Math.PI,g=0,_=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:s,phiStart:l,phiLength:h,thetaStart:g,thetaLength:_},t=Math.max(3,Math.floor(t)),s=Math.max(2,Math.floor(s));const b=Math.min(g+_,Math.PI);let x=0;const S=[],A=new le,E=new le,L=[],G=[],j=[],k=[];for(let J=0;J<=s;J++){const K=[],$=J/s;let q=0;0==J&&0==g?q=.5/t:J==s&&b==Math.PI&&(q=-.5/t);for(let se=0;se<=t;se++){const de=se/t;A.x=-e*Math.cos(l+de*h)*Math.sin(g+$*_),A.y=e*Math.cos(g+$*_),A.z=e*Math.sin(l+de*h)*Math.sin(g+$*_),G.push(A.x,A.y,A.z),E.copy(A).normalize(),j.push(E.x,E.y,E.z),k.push(de+q,1-$),K.push(x++)}S.push(K)}for(let J=0;J<s;J++)for(let K=0;K<t;K++){const q=S[J][K],se=S[J+1][K],de=S[J+1][K+1];(0!==J||g>0)&&L.push(S[J][K+1],q,de),(J!==s-1||b<Math.PI)&&L.push(q,se,de)}this.setIndex(L),this.setAttribute("position",new dn(G,3)),this.setAttribute("normal",new dn(j,3)),this.setAttribute("uv",new dn(k,2))}static fromJSON(e){return new ma(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class zc extends jr{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new $t(16777215),this.specular=new $t(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new $t(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Mo,this.normalScale=new ft(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Mn,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}function Lo(v,e,t){return Rd(v)?new v.constructor(v.subarray(e,void 0!==t?t:v.length)):v.slice(e,t)}function uc(v,e,t){return!v||!t&&v.constructor===e?v:"number"==typeof e.BYTES_PER_ELEMENT?new e(v):Array.prototype.slice.call(v)}function Rd(v){return ArrayBuffer.isView(v)&&!(v instanceof DataView)}class Nu{constructor(e,t,s,l){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==l?l:new t.constructor(s),this.sampleValues=t,this.valueSize=s,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let s=this._cachedIndex,l=t[s],h=t[s-1];e:{t:{let g;n:{i:if(!(e<l)){for(let _=s+2;;){if(void 0===l){if(e<h)break i;return s=t.length,this._cachedIndex=s,this.copySampleValue_(s-1)}if(s===_)break;if(h=l,l=t[++s],e<l)break t}g=t.length;break n}if(e>=h)break e;{const _=t[1];e<_&&(s=2,h=_);for(let b=s-2;;){if(void 0===h)return this._cachedIndex=0,this.copySampleValue_(0);if(s===b)break;if(l=h,h=t[--s-1],e>=h)break t}g=s,s=0}}for(;s<g;){const _=s+g>>>1;e<t[_]?g=_:s=_+1}if(l=t[s],h=t[s-1],void 0===h)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===l)return s=t.length,this._cachedIndex=s,this.copySampleValue_(s-1)}this._cachedIndex=s,this.intervalChanged_(s,h,l)}return this.interpolate_(s,h,e,l)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,s=this.sampleValues,l=this.valueSize,h=e*l;for(let g=0;g!==l;++g)t[g]=s[h+g];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class hp extends Nu{constructor(e,t,s,l){super(e,t,s,l),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:2400,endingEnd:2400}}intervalChanged_(e,t,s){const l=this.parameterPositions;let h=e-2,g=e+1,_=l[h],b=l[g];if(void 0===_)switch(this.getSettings_().endingStart){case 2401:h=e,_=2*t-s;break;case 2402:h=l.length-2,_=t+l[h]-l[h+1];break;default:h=e,_=s}if(void 0===b)switch(this.getSettings_().endingEnd){case 2401:g=e,b=2*s-t;break;case 2402:g=1,b=s+l[1]-l[0];break;default:g=e-1,b=t}const x=.5*(s-t),S=this.valueSize;this._weightPrev=x/(t-_),this._weightNext=x/(b-s),this._offsetPrev=h*S,this._offsetNext=g*S}interpolate_(e,t,s,l){const h=this.resultBuffer,g=this.sampleValues,_=this.valueSize,b=e*_,x=b-_,S=this._offsetPrev,A=this._offsetNext,E=this._weightPrev,L=this._weightNext,G=(s-t)/(l-t),j=G*G,k=j*G,J=-E*k+2*E*j-E*G,K=(1+E)*k+(-1.5-2*E)*j+(-.5+E)*G+1,$=(-1-L)*k+(1.5+L)*j+.5*G,q=L*k-L*j;for(let se=0;se!==_;++se)h[se]=J*g[S+se]+K*g[x+se]+$*g[b+se]+q*g[A+se];return h}}class Zh extends Nu{constructor(e,t,s,l){super(e,t,s,l)}interpolate_(e,t,s,l){const h=this.resultBuffer,g=this.sampleValues,_=this.valueSize,b=e*_,x=b-_,S=(s-t)/(l-t),A=1-S;for(let E=0;E!==_;++E)h[E]=g[x+E]*A+g[b+E]*S;return h}}class Oy extends Nu{constructor(e,t,s,l){super(e,t,s,l)}interpolate_(e){return this.copySampleValue_(e-1)}}class jl{constructor(e,t,s,l){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=uc(t,this.TimeBufferType),this.values=uc(s,this.ValueBufferType),this.setInterpolation(l||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let s;if(t.toJSON!==this.toJSON)s=t.toJSON(e);else{s={name:e.name,times:uc(e.times,Array),values:uc(e.values,Array)};const l=e.getInterpolation();l!==e.DefaultInterpolation&&(s.interpolation=l)}return s.type=e.ValueTypeName,s}InterpolantFactoryMethodDiscrete(e){return new Oy(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Zh(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new hp(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case 2300:t=this.InterpolantFactoryMethodDiscrete;break;case 2301:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const s="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(s);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",s),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let s=0,l=t.length;s!==l;++s)t[s]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let s=0,l=t.length;s!==l;++s)t[s]*=e}return this}trim(e,t){const s=this.times,l=s.length;let h=0,g=l-1;for(;h!==l&&s[h]<e;)++h;for(;-1!==g&&s[g]>t;)--g;if(++g,0!==h||g!==l){h>=g&&(g=Math.max(g,1),h=g-1);const _=this.getValueSize();this.times=Lo(s,h,g),this.values=Lo(this.values,h*_,g*_)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const s=this.times,l=this.values,h=s.length;0===h&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let g=null;for(let _=0;_!==h;_++){const b=s[_];if("number"==typeof b&&isNaN(b)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,_,b),e=!1;break}if(null!==g&&g>b){console.error("THREE.KeyframeTrack: Out of order keys.",this,_,b,g),e=!1;break}g=b}if(void 0!==l&&Rd(l))for(let _=0,b=l.length;_!==b;++_){const x=l[_];if(isNaN(x)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,_,x),e=!1;break}}return e}optimize(){const e=Lo(this.times),t=Lo(this.values),s=this.getValueSize(),l=2302===this.getInterpolation(),h=e.length-1;let g=1;for(let _=1;_<h;++_){let b=!1;const x=e[_];if(x!==e[_+1]&&(1!==_||x!==e[0]))if(l)b=!0;else{const A=_*s,E=A-s,L=A+s;for(let G=0;G!==s;++G){const j=t[A+G];if(j!==t[E+G]||j!==t[L+G]){b=!0;break}}}if(b){if(_!==g){e[g]=e[_];const A=_*s,E=g*s;for(let L=0;L!==s;++L)t[E+L]=t[A+L]}++g}}if(h>0){e[g]=e[h];for(let _=h*s,b=g*s,x=0;x!==s;++x)t[b+x]=t[_+x];++g}return g!==e.length?(this.times=Lo(e,0,g),this.values=Lo(t,0,g*s)):(this.times=e,this.values=t),this}clone(){const e=Lo(this.times,0),t=Lo(this.values,0),l=new(0,this.constructor)(this.name,e,t);return l.createInterpolant=this.createInterpolant,l}}jl.prototype.TimeBufferType=Float32Array,jl.prototype.ValueBufferType=Float32Array,jl.prototype.DefaultInterpolation=2301;class Sd extends jl{}Sd.prototype.ValueTypeName="bool",Sd.prototype.ValueBufferType=Array,Sd.prototype.DefaultInterpolation=2300,Sd.prototype.InterpolantFactoryMethodLinear=void 0,Sd.prototype.InterpolantFactoryMethodSmooth=void 0;(class Ym extends jl{}).prototype.ValueTypeName="color";(class Cd extends jl{}).prototype.ValueTypeName="number";class kv extends Nu{constructor(e,t,s,l){super(e,t,s,l)}interpolate_(e,t,s,l){const h=this.resultBuffer,g=this.sampleValues,_=this.valueSize,b=(s-t)/(l-t);let x=e*_;for(let S=x+_;x!==S;x+=4)js.slerpFlat(h,0,g,x-_,g,x,b);return h}}class qh extends jl{InterpolantFactoryMethodLinear(e){return new kv(this.times,this.values,this.getValueSize(),e)}}qh.prototype.ValueTypeName="quaternion",qh.prototype.DefaultInterpolation=2301,qh.prototype.InterpolantFactoryMethodSmooth=void 0;class Ed extends jl{}Ed.prototype.ValueTypeName="string",Ed.prototype.ValueBufferType=Array,Ed.prototype.DefaultInterpolation=2300,Ed.prototype.InterpolantFactoryMethodLinear=void 0,Ed.prototype.InterpolantFactoryMethodSmooth=void 0;(class fp extends jl{}).prototype.ValueTypeName="vector";class j_ extends Error{constructor(e,t){super(e),this.response=t}}class k_ extends _s{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new $t(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}const G_=new Vt,Es=new le,V_=new le;class Ny{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new ft(512,512),this.map=null,this.mapPass=null,this.matrix=new Vt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Wd,this._frameExtents=new ft(1,1),this._viewportCount=1,this._viewports=[new qn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,s=this.matrix;Es.setFromMatrixPosition(e.matrixWorld),t.position.copy(Es),V_.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(V_),t.updateMatrixWorld(),G_.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(G_),s.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),s.multiply(G_)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}const Wv=new Vt,Xh=new le,Jm=new le;class Qh extends Ny{constructor(){super(new vr(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new ft(4,2),this._viewportCount=6,this._viewports=[new qn(2,1,1,1),new qn(0,1,1,1),new qn(3,1,1,1),new qn(1,1,1,1),new qn(3,0,1,1),new qn(1,0,1,1)],this._cubeDirections=[new le(1,0,0),new le(-1,0,0),new le(0,0,1),new le(0,0,-1),new le(0,1,0),new le(0,-1,0)],this._cubeUps=[new le(0,1,0),new le(0,1,0),new le(0,1,0),new le(0,1,0),new le(0,0,1),new le(0,0,-1)]}updateMatrices(e,t=0){const s=this.camera,l=this.matrix,h=e.distance||s.far;h!==s.far&&(s.far=h,s.updateProjectionMatrix()),Xh.setFromMatrixPosition(e.matrixWorld),s.position.copy(Xh),Jm.copy(s.position),Jm.add(this._cubeDirections[t]),s.up.copy(this._cubeUps[t]),s.lookAt(Jm),s.updateMatrixWorld(),l.makeTranslation(-Xh.x,-Xh.y,-Xh.z),Wv.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Wv)}}class $v extends k_{constructor(e,t,s=0,l=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=s,this.decay=l,this.shadow=new Qh}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class Jv extends k_{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class z_{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=W_(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=W_();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function W_(){return(typeof performance>"u"?Date:performance).now()}const qm="\\[\\]\\.:\\/",Vy=new RegExp("["+qm+"]","g"),Km="[^"+qm+"]",Uy="[^"+qm.replace("\\.","")+"]",Yy=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",Km)+/(WCOD+)?/.source.replace("WCOD",Uy)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Km)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Km)+"$"),Jy=["material","materials","bones","map"];class Zy{constructor(e,t,s){const l=s||Hr.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,l)}getValue(e,t){this.bind();const l=this._bindings[this._targetGroup.nCachedObjects_];void 0!==l&&l.getValue(e,t)}setValue(e,t){const s=this._bindings;for(let l=this._targetGroup.nCachedObjects_,h=s.length;l!==h;++l)s[l].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,s=e.length;t!==s;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,s=e.length;t!==s;++t)e[t].unbind()}}let Hr=(()=>{class v{constructor(t,s,l){this.path=s,this.parsedPath=l||v.parseTrackName(s),this.node=v.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,s,l){return t&&t.isAnimationObjectGroup?new v.Composite(t,s,l):new v(t,s,l)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(Vy,"")}static parseTrackName(t){const s=Yy.exec(t);if(null===s)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const l={nodeName:s[2],objectName:s[3],objectIndex:s[4],propertyName:s[5],propertyIndex:s[6]},h=l.nodeName&&l.nodeName.lastIndexOf(".");if(void 0!==h&&-1!==h){const g=l.nodeName.substring(h+1);-1!==Jy.indexOf(g)&&(l.nodeName=l.nodeName.substring(0,h),l.objectName=g)}if(null===l.propertyName||0===l.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return l}static findNode(t,s){if(void 0===s||""===s||"."===s||-1===s||s===t.name||s===t.uuid)return t;if(t.skeleton){const l=t.skeleton.getBoneByName(s);if(void 0!==l)return l}if(t.children){const l=function(g){for(let _=0;_<g.length;_++){const b=g[_];if(b.name===s||b.uuid===s)return b;const x=l(b.children);if(x)return x}return null},h=l(t.children);if(h)return h}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,s){t[s]=this.targetObject[this.propertyName]}_getValue_array(t,s){const l=this.resolvedProperty;for(let h=0,g=l.length;h!==g;++h)t[s++]=l[h]}_getValue_arrayElement(t,s){t[s]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,s){this.resolvedProperty.toArray(t,s)}_setValue_direct(t,s){this.targetObject[this.propertyName]=t[s]}_setValue_direct_setNeedsUpdate(t,s){this.targetObject[this.propertyName]=t[s],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,s){this.targetObject[this.propertyName]=t[s],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,s){const l=this.resolvedProperty;for(let h=0,g=l.length;h!==g;++h)l[h]=t[s++]}_setValue_array_setNeedsUpdate(t,s){const l=this.resolvedProperty;for(let h=0,g=l.length;h!==g;++h)l[h]=t[s++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,s){const l=this.resolvedProperty;for(let h=0,g=l.length;h!==g;++h)l[h]=t[s++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,s){this.resolvedProperty[this.propertyIndex]=t[s]}_setValue_arrayElement_setNeedsUpdate(t,s){this.resolvedProperty[this.propertyIndex]=t[s],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,s){this.resolvedProperty[this.propertyIndex]=t[s],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,s){this.resolvedProperty.fromArray(t,s)}_setValue_fromArray_setNeedsUpdate(t,s){this.resolvedProperty.fromArray(t,s),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,s){this.resolvedProperty.fromArray(t,s),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,s){this.bind(),this.getValue(t,s)}_setValue_unbound(t,s){this.bind(),this.setValue(t,s)}bind(){let t=this.node;const s=this.parsedPath,l=s.objectName,h=s.propertyName;let g=s.propertyIndex;if(t||(t=v.findNode(this.rootNode,s.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(l){let S=s.objectIndex;switch(l){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let A=0;A<t.length;A++)if(t[A].name===S){S=A;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);t=t.material.map;break;default:if(void 0===t[l])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[l]}if(void 0!==S){if(void 0===t[S])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[S]}}const _=t[h];if(void 0===_)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+s.nodeName+"."+h+" but it wasn't found.",t);let b=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?b=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(b=this.Versioning.MatrixWorldNeedsUpdate);let x=this.BindingType.Direct;if(void 0!==g){if("morphTargetInfluences"===h){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[g]&&(g=t.morphTargetDictionary[g])}x=this.BindingType.ArrayElement,this.resolvedProperty=_,this.propertyIndex=g}else void 0!==_.fromArray&&void 0!==_.toArray?(x=this.BindingType.HasFromToArray,this.resolvedProperty=_):Array.isArray(_)?(x=this.BindingType.EntireArray,this.resolvedProperty=_):this.propertyName=h;this.getValue=this.GetterByBindingType[x],this.setValue=this.SetterByBindingTypeAndVersioning[x][b]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return v.Composite=Zy,v})();Hr.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Hr.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Hr.prototype.GetterByBindingType=[Hr.prototype._getValue_direct,Hr.prototype._getValue_array,Hr.prototype._getValue_arrayElement,Hr.prototype._getValue_toArray],Hr.prototype.SetterByBindingTypeAndVersioning=[[Hr.prototype._setValue_direct,Hr.prototype._setValue_direct_setNeedsUpdate,Hr.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Hr.prototype._setValue_array,Hr.prototype._setValue_array_setNeedsUpdate,Hr.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Hr.prototype._setValue_arrayElement,Hr.prototype._setValue_arrayElement_setNeedsUpdate,Hr.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Hr.prototype._setValue_fromArray,Hr.prototype._setValue_fromArray_setNeedsUpdate,Hr.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]],new Float32Array(1);class oy{constructor(e,t,s=0,l=1/0){this.ray=new li(e,t),this.near=s,this.far=l,this.camera=null,this.layers=new Yt,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,s=[]){return Xm(e,this,s,t),s.sort(J_),s}intersectObjects(e,t=!0,s=[]){for(let l=0,h=e.length;l<h;l++)Xm(e[l],this,s,t);return s.sort(J_),s}}function J_(v,e){return v.distance-e.distance}function Xm(v,e,t,s){if(v.layers.test(e.layers)&&v.raycast(e,t),!0===s){const l=v.children;for(let h=0,g=l.length;h<g;h++)Xm(l[h],e,t,!0)}}class o0 extends Nm{constructor(e=10,t=10,s=4473924,l=8947848){s=new $t(s),l=new $t(l);const h=t/2,g=e/t,_=e/2,b=[],x=[];for(let E=0,L=0,G=-_;E<=t;E++,G+=g){b.push(-_,0,G,_,0,G),b.push(G,0,-_,G,0,_);const j=E===h?s:l;j.toArray(x,L),L+=3,j.toArray(x,L),L+=3,j.toArray(x,L),L+=3,j.toArray(x,L),L+=3}const S=new Kn;S.setAttribute("position",new dn(b,3)),S.setAttribute("color",new dn(x,3)),super(S,new No({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Y}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Y)},5861:(gn,qe,ee)=>{function a(be,xe,Re,ze,Xe,St,je){try{var Pe=be[St](je),Oe=Pe.value}catch(Ke){return void Re(Ke)}Pe.done?xe(Oe):Promise.resolve(Oe).then(ze,Xe)}function Y(be){return function(){var xe=this,Re=arguments;return new Promise(function(ze,Xe){var St=be.apply(xe,Re);function je(Oe){a(St,ze,Xe,je,Pe,"next",Oe)}function Pe(Oe){a(St,ze,Xe,je,Pe,"throw",Oe)}je(void 0)})}}ee.d(qe,{Z:()=>Y})}},gn=>{gn(gn.s=8014)}]);